(self.webpackChunkgdevelop_ide=self.webpackChunkgdevelop_ide||[]).push([[9641],{96210:function(e,t,n){"use strict";n.d(t,{i:function(){return h},X:function(){return f}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(14446),c=n.n(l),u=n(45911),d=function(){var e=(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get("".concat(u.bw.baseUrl,"/announcement"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=n(29343),h=s.createContext({announcements:null,error:null,fetchAnnouncements:function(){}}),f=function(e){var t=e.children,n=s.useState(null),i=(0,o.Z)(n,2),l=i[0],c=i[1],u=s.useState(null),f=(0,o.Z)(u,2),g=f[0],m=f[1],x=s.useRef(!1),v=s.useCallback((function(){x.current||(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),x.current=!0,e.prev=2,e.next=5,d();case 5:t=e.sent,c(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to load the announcements from the api:",e.t0),m(e.t0);case 13:x.current=!1;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[x]);s.useEffect((function(){if(!l&&!x.current){var e=setTimeout((function(){console.info("Pre-fetching announcements from the api..."),v()}),1e3);return function(){return clearTimeout(e)}}}),[v,l,x]);var b=s.useMemo((function(){return{announcements:l,error:g,fetchAnnouncements:v}}),[l,g,v]);return(0,p.jsx)(h.Provider,{value:b,children:t})}},8304:function(e,t,n){"use strict";n.d(t,{TT:function(){return D},Zq:function(){return A},AP:function(){return O},c7:function(){return M},rr:function(){return F},fV:function(){return L}});var r=n(1413),o=n(28381),i=n(36600),a=n(65522),s=n.n(a),l=n(16021),c=n(10008),u=n(31226),d=n(65111),p=n(20914),h=n(23818),f=n(31318),g=n(40243),m=n(86278),x=n(75177),v=n(84140),b=n(39909),j=n(58893),C=n(76683),y=n(29343),Z={previewContainer:{display:"flex",justifyContent:"center",alignItems:"center"},previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"},previewImagePixelated:{width:"100%",imageRendering:(0,b.g)(),padding:15},icon:{color:"#fff"},cardContainer:{overflow:"hidden",position:"relative",borderRadius:8},titleContainer:{position:"absolute",bottom:0,left:0,right:0,color:"#fff",backgroundColor:"rgb(0,0,0,0.5)",display:"inline-block",textAlign:"center",flexDirection:"column"},title:(0,r.Z)((0,r.Z)({},f.t),{},{overflowWrap:"break-word"})},k=function(e){var t=e.id,n=e.assetShortHeader,o=e.size,i=n.previewImageUrls[0],a=(0,v.kt)(n),s=(0,r.Z)((0,r.Z)({maxWidth:108,maxHeight:108},Z.previewImage),(0,v.V0)(n)?Z.previewImagePixelated:void 0);return(0,y.jsxs)("div",{id:t,style:(0,r.Z)((0,r.Z)({},Z.cardContainer),{},{width:o,height:o}),children:[(0,y.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},Z.previewContainer),{},{width:o,height:o}),children:[(0,y.jsx)(j.Z,{}),a?(0,y.jsx)(C.Z,{style:s,url:i,alt:n.name},i):(0,y.jsx)(h.W,{style:s,src:i,alt:n.name},i)]}),(0,y.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},Z.titleContainer),{},{height:n.shortDescription?40:20}),children:[(0,y.jsx)(m.Z,{noMargin:!0,style:Z.title,color:"inherit",children:n.name}),n.shortDescription&&(0,y.jsx)(m.Z,{noMargin:!0,style:Z.title,size:"body2",color:"inherit",children:n.shortDescription})]})]})},w=n(68262),T=n(67835),E=n(32484),S=n(24910),P={priceTagContainer:{position:"absolute",top:10,left:10,cursor:"default"},previewImage:{width:"100%",aspectRatio:"16 / 9",objectFit:"cover",position:"relative"},promoImage:{width:"20%",minWidth:200,margin:4},paper:{margin:4,minWidth:180},packTitle:(0,r.Z)((0,r.Z)({},f.t),{},{overflowWrap:"break-word"}),folderTitle:{marginLeft:8},folderPaper:{height:55},folderIcon:{width:32,height:32},promoLineContainer:{borderRadius:8,padding:2,flex:1},promoImageContainer:{display:"flex",flex:0}},I=(0,u.Z)((function(e){return(0,c.Z)({root:{"&:focus":{outline:"1px solid ".concat(e.palette.primary.light)},"&:hover":{outline:"1px solid ".concat(e.palette.primary.light)}}})})),D=function(e){var t=e.assetShortHeader,n=e.onOpenDetails,r=e.size,o=e.margin,i=I();return(0,y.jsx)(l.Z,{classes:i,tabIndex:0,onKeyPress:function(e){(0,d.ph)(e)&&n()},onClick:n,style:{margin:o},children:(0,y.jsx)(k,{id:"asset-card-".concat(t.name.replace(/\s/g,"-")),assetShortHeader:t,size:r})})},A=function(e){var t=e.tag,n=e.onSelect,r=e.style,o=I();return(0,y.jsx)(l.Z,{classes:o,tabIndex:0,onKeyPress:function(e){(0,d.ph)(e)&&n()},style:r,onClick:n,children:(0,y.jsx)(g.sg,{noMargin:!0,id:"asset-folder-".concat(t.replace(/\s/g,"-")),children:(0,y.jsxs)(g.x1,{alignItems:"center",children:[(0,y.jsx)(w.Z,{style:P.folderIcon}),(0,y.jsx)(m.Z,{noMargin:!0,style:P.folderTitle,size:"sub-title",children:s()(t)})]})})})},L=function(e){var t=e.assetPack,n=e.onSelect,r=e.style,o=I();return(0,y.jsx)(l.Z,{classes:o,tabIndex:0,onKeyPress:function(e){(0,d.ph)(e)&&n()},style:r,onClick:n,children:(0,y.jsxs)(p.Z,{id:"asset-pack-".concat(t.tag.replace(/\s/g,"-")),elevation:2,style:P.paper,background:"light",children:[(0,y.jsx)(h.W,{style:P.previewImage,src:t.thumbnailUrl,alt:"Preview image of asset pack ".concat(t.name)},t.name),(0,y.jsx)(g.sg,{children:(0,y.jsxs)(g.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,y.jsx)(m.Z,{style:P.packTitle,size:"body2",children:t.name}),(0,y.jsxs)(m.Z,{style:P.packTitle,color:"primary",size:"body2",children:[(0,y.jsx)(i.Trans,{id:"{0} Assets",values:{0:t.assetsCount}}),t.userFriendlyPrice?" - "+t.userFriendlyPrice:null]})]})})]})})},M=function(e){var t=e.assetPackListingData,n=e.onSelect,r=e.style,o=e.owned,i=I();return(0,y.jsx)(l.Z,{classes:i,tabIndex:0,onKeyPress:function(e){(0,d.ph)(e)&&n()},style:r,onClick:n,children:(0,y.jsxs)(p.Z,{elevation:2,style:P.paper,background:"light",children:[(0,y.jsx)(h.W,{style:P.previewImage,src:t.thumbnailUrls[0],alt:"Preview image of asset pack ".concat(t.name)},t.name),(0,y.jsx)("div",{style:P.priceTagContainer,children:(0,y.jsx)(x.c,{privateAssetPackListingData:t,withOverlay:!0,owned:o})}),(0,y.jsx)(g.sg,{children:(0,y.jsxs)(g.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,y.jsx)(m.Z,{style:P.packTitle,size:"body2",children:t.name}),(0,y.jsx)(m.Z,{style:P.packTitle,color:"primary",size:"body2",children:t.description})]})})]})})},F=function(e){var t=e.assetPackListingData,n=e.onSelect,a=e.owned,s=o.useContext(S.Z);return(0,y.jsx)(i.I18n,{children:function(e){var o=e.i18n;return(0,y.jsx)(g.x1,{expand:!0,children:(0,y.jsx)("div",{style:(0,r.Z)((0,r.Z)({},P.promoLineContainer),{},{border:"2px solid ".concat(s.palette.secondary)}),children:(0,y.jsxs)(g.x1,{expand:!0,noMargin:!0,children:[(0,y.jsx)(h.W,{style:(0,r.Z)((0,r.Z)({},P.previewImage),P.promoImage),src:t.thumbnailUrls[0],alt:"Preview image of bundle ".concat(t.name)},t.name),(0,y.jsxs)(g.sg,{expand:!0,alignItems:"flex-start",justifyContent:"center",children:[(0,y.jsx)(m.Z,{color:"primary",size:"section-title",children:a?(0,y.jsx)(i.Trans,{id:"You already own this pack!"}):(0,y.jsx)(i.Trans,{id:"Get {0}!",values:{0:t.description}})}),(0,y.jsx)(m.Z,{style:P.packTitle,color:"primary",size:"body2",children:a?(0,y.jsx)(i.Trans,{id:"It is included in the bundle {0}.",values:{0:t.name}}):(0,y.jsx)(i.Trans,{id:"This pack is included in this bundle for {0} !",values:{0:(0,x.I)({i18n:o,privateAssetPackListingData:t})}})})]}),(0,y.jsx)(g.sg,{justifyContent:"center",children:a?(0,y.jsx)(E.Z,{label:(0,y.jsx)(i.Trans,{id:"See this bundle"}),onClick:n,primary:!0}):(0,y.jsx)(T.Z,{label:(0,y.jsx)(i.Trans,{id:"See this bundle"}),onClick:n,primary:!0})})]})})})}})},O=function(e){var t=e.id,n=e.title,i=e.imageSource,a=e.imageAlt,s=e.onSelect,c=e.style,u=I(),f=o.useContext(S.Z);return(0,y.jsx)(l.Z,{classes:u,tabIndex:0,onKeyPress:function(e){(0,d.ph)(e)&&s()},style:c,onClick:s,children:(0,y.jsxs)(p.Z,{id:t,elevation:2,style:P.paper,background:"light",children:[(0,y.jsx)(h.W,{style:(0,r.Z)((0,r.Z)({},P.previewImage),{},{background:f.palette.primary}),src:i,alt:a}),(0,y.jsx)(g.sg,{children:(0,y.jsx)(g.x1,{justifyContent:"center",noMargin:!0,children:(0,y.jsx)(m.Z,{style:P.packTitle,size:"sub-title",children:n})})})]})})}},59717:function(e,t,n){"use strict";n.d(t,{K:function(){return Z},p:function(){return S}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(84140),c=n(36465),u=n(49819),d=n(39818),p=n(1525),h=n(16243),f=n.n(h),g=n(71106),m=n(37762),x=function(e){return e.toLowerCase().replace(/\xfc/g,"ue").replace(/\xe4/g,"ae").replace(/\xf6/g,"oe").replace(/\xdf/g,"ss").replace(new RegExp("["+[".","=","-"].join("")+"]","g")," ").replace(/-{2,}/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"").replace(/[^\w ]/gi,"").replace(/[ ]/gi,"-")},v=function(e){return"".concat(x(e.name),"-").concat(x(e.tag))},b=function(e){return e.slice(-36)},j=function(e){var t=e.receivedAssetPacks,n=e.publicAssetPacks,r=e.userFriendlySlug,o=b(r),i=t.find((function(e){return o===e.id}));if(i)return i;var a=function(e,t){var n,r=(0,m.Z)(e.starterPacks);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(v(o)===t)return o}}catch(i){r.e(i)}finally{r.f()}return null}(n,r);return a||null},C=n(65056),y=n(29343),Z=s.createContext({filters:null,publicAssetPacks:null,privateAssetPackListingDatas:null,assetPackRandomOrdering:null,authors:null,licenses:null,environment:"live",setEnvironment:function(){},assetShortHeadersSearchResults:null,publicAssetPacksSearchResults:null,privateAssetPackListingDatasSearchResults:null,fetchAssetsAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},assetFiltersState:{animatedFilter:new d.FL,setAnimatedFilter:function(e){},viewpointFilter:new d.GI,setViewpointFilter:function(e){},dimensionFilter:new d.C9,setDimensionFilter:function(e){},objectTypeFilter:new d.Jk,setObjectTypeFilter:function(e){},colorFilter:new d.ad,setColorFilter:function(e){},licenseFilter:new d.t3,setLicenseFilter:function(e){}},assetPackFiltersState:{typeFilter:new d.lz({}),setTypeFilter:function(e){}},clearAllFilters:function(){},navigationState:{getCurrentPage:function(){return p.h1},backToPreviousPage:function(){return p.h1},openHome:function(){return p.h1},clearHistory:function(){},clearPreviousPageFromHistory:function(){},openSearchResultPage:function(){},openTagPage:function(e){},openAssetCategoryPage:function(e){},openPackPage:function(e){},openDetailPage:function(e){},openPrivateAssetPackInformationPage:function(e){}},currentPage:p.h1,useSearchItem:function(e,t,n,r){return null},setInitialPackUserFriendlySlug:function(e){}}),k=function(e){return e.name+"\n"+e.shortDescription+"\n"+e.tags.join(", ")},w=function(e){return e.name+"\n"+e.tag},T=function(e){return e.name+"\n"+e.description},E=function(e){var t=new Array(e).fill(0).map((function(e,t){return t}));return f()(t)},S=function(e){var t=e.onlyAppStorePrivateAssetPacks,n=e.children,i=s.useState(null),h=(0,o.Z)(i,2),f=h[0],m=h[1],x=s.useState(null),v=(0,o.Z)(x,2),S=v[0],P=v[1],I=s.useContext(g.ZP),D=I.receivedAssetShortHeaders,A=I.receivedAssetPacks,L=s.useState(null),M=(0,o.Z)(L,2),F=M[0],O=M[1],R=s.useState(null),B=(0,o.Z)(R,2),_=B[0],N=B[1],U=s.useState(null),H=(0,o.Z)(U,2),V=H[0],W=H[1],z=s.useState(null),G=(0,o.Z)(z,2),Y=G[0],q=G[1],X=s.useState(null),J=(0,o.Z)(X,2),K=J[0],Q=J[1],$=s.useState(null),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=s.useState("live"),oe=(0,o.Z)(re,2),ie=oe[0],ae=oe[1],se=s.useState(null),le=(0,o.Z)(se,2),ce=le[0],ue=le[1],de=s.useState(null),pe=(0,o.Z)(de,2),he=pe[0],fe=pe[1],ge=s.useRef(!1),me=(0,C.Z)().showAlert,xe=s.useState(""),ve=(0,o.Z)(xe,2),be=ve[0],je=ve[1],Ce=(0,p.HJ)(),ye=s.useState(new d.FL),Ze=(0,o.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=s.useState(new d.GI),Ee=(0,o.Z)(Te,2),Se=Ee[0],Pe=Ee[1],Ie=s.useState(new d.C9),De=(0,o.Z)(Ie,2),Ae=De[0],Le=De[1],Me=s.useState(new d.Jk),Fe=(0,o.Z)(Me,2),Oe=Fe[0],Re=Fe[1],Be=s.useState(new d.ad),_e=(0,o.Z)(Be,2),Ne=_e[0],Ue=_e[1],He=s.useState(new d.t3),Ve=(0,o.Z)(He,2),We=Ve[0],ze=Ve[1],Ge=s.useMemo((function(){return[ke,Se,Ae,Oe,Ne,We]}),[ke,Se,Ae,Oe,Ne,We]),Ye=s.useState(new d.lz({receivedAssetPacks:A})),qe=(0,o.Z)(Ye,2),Xe=qe[0],Je=qe[1],Ke=s.useMemo((function(){return[Xe]}),[Xe]),Qe=s.useCallback((function(){(0,r.Z)(a().mark((function e(){var n,r,o,i,s,u,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(null),e.prev=1,e.next=4,(0,l.Xt)({environment:ie});case 4:return n=e.sent,r=n.publicAssetShortHeaders,o=n.publicFilters,i=n.publicAssetPacks,e.next=10,(0,l.Dz)({environment:ie});case 10:return s=e.sent,e.next=13,(0,l.$l)({environment:ie});case 13:return u=e.sent,e.next=16,(0,c.Ab)({onlyAppStorePrivateAssetPacks:t});case 16:d=e.sent,console.info("Loaded ".concat(r?r.length:0," assets from the asset store.")),N(i),P(r),O(o),Q(s),ne(u),q(d),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),console.error("Unable to load the assets from the asset store:",e.t0),ue(e.t0);case 30:case"end":return e.stop()}}),e,null,[[1,26]])})))()}),[ie,t]);s.useEffect((function(){var e={};S&&S.forEach((function(t){e[t.id]=t})),D&&D.forEach((function(t){e[t.id]=t})),Object.keys(e).length>0&&m(e)}),[S,D]),s.useEffect((function(){if(he&&!ge.current&&_&&A&&Y&&he){ge.current=!0;var e=j({publicAssetPacks:_,receivedAssetPacks:A,userFriendlySlug:he});if(e)return Ce.openPackPage({assetPack:e,previousSearchText:be}),ge.current=!1,void fe(null);var t=function(e){var t=e.privateAssetPackListingDatas,n=e.userFriendlySlug,r=b(n),o=t.find((function(e){return r===e.id}));return o||null}({privateAssetPackListingDatas:Y,userFriendlySlug:he});if(t)return Ce.openPrivateAssetPackInformationPage({assetPack:t,previousSearchText:be}),ge.current=!1,void fe(null);me({title:{id:"Asset pack not found"},message:{id:"The link to the asset pack you've followed seems outdated. Why not take a look at the other packs in the asset store?"}})}}),[_,A,Y,Ce,me,he,be]),s.useEffect((function(){Qe()}),[Qe]);var $e=s.useMemo((function(){if(!_)return null;var e={};return _.starterPacks.forEach((function(t){var n=t.tag;e[n]&&console.warn("Multiple public asset packs with the same tag: ".concat(n)),e[n]=t})),e}),[_]),et=s.useMemo((function(){if(!Y)return null;var e={};return Y.forEach((function(t){var n=t.id;e[n]&&console.warn("Multiple private asset packs with the same id: ".concat(n)),e[n]=t})),e}),[Y]),tt=_&&_.starterPacks?_.starterPacks.length:void 0,nt=Y?Y.length:void 0;s.useEffect((function(){void 0!==tt&&void 0!==nt&&W({starterPacks:E(tt),privateAssetPacks:E(nt)})}),[tt,nt]);var rt=Ce.getCurrentPage(),ot=rt.filtersState,it=ot.chosenCategory,at=ot.chosenFilters,st=(0,u.az)(f,k,be,it,at,Ge),lt=(0,u.az)($e,w,be,it,null,Ke),ct=(0,u.az)(et,T,be,it,null,Ke),ut=s.useMemo((function(){return{animatedFilter:ke,setAnimatedFilter:we,viewpointFilter:Se,setViewpointFilter:Pe,dimensionFilter:Ae,setDimensionFilter:Le,objectTypeFilter:Oe,setObjectTypeFilter:Re,colorFilter:Ne,setColorFilter:Ue,licenseFilter:We,setLicenseFilter:ze}}),[ke,we,Se,Pe,Ae,Le,Oe,Re,Ne,Ue,We,ze]),dt=s.useMemo((function(){return{typeFilter:Xe,setTypeFilter:Je}}),[Xe,Je]),pt=s.useCallback((function(){ut.setAnimatedFilter(new d.FL),ut.setViewpointFilter(new d.GI),ut.setDimensionFilter(new d.C9),ut.setObjectTypeFilter(new d.Jk),ut.setColorFilter(new d.ad),ut.setLicenseFilter(new d.t3),dt.setTypeFilter(new d.lz({}))}),[ut,dt]),ht=s.useMemo((function(){return{assetShortHeadersSearchResults:st,publicAssetPacksSearchResults:lt,privateAssetPackListingDatasSearchResults:ct,fetchAssetsAndFilters:Qe,filters:F,publicAssetPacks:_,privateAssetPackListingDatas:Y,assetPackRandomOrdering:V,authors:K,licenses:te,environment:ie,setEnvironment:ae,error:ce,navigationState:Ce,currentPage:rt,searchText:be,setSearchText:je,assetFiltersState:ut,assetPackFiltersState:dt,clearAllFilters:pt,useSearchItem:function(e,t,n,r){return(0,u.az)(f,k,e,t,n,r)},setInitialPackUserFriendlySlug:fe}}),[st,lt,ct,Qe,F,_,Y,V,K,te,ie,ae,ce,Ce,rt,be,ut,dt,pt,f,fe]);return(0,y.jsx)(Z.Provider,{value:ht,children:n})}},1525:function(e,t,n){"use strict";n.d(t,{C$:function(){return u},HJ:function(){return p},h1:function(){return l},wA:function(){return d}});var r=n(93433),o=n(1413),i=n(29439),a=n(28381),s={chosenCategory:null,chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},l={openedAssetShortHeader:null,openedAssetCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,filtersState:s,displayAssets:!1},c={openedAssetShortHeader:null,openedAssetCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,filtersState:s,displayAssets:!0},u=function(e){return e===l||!e.openedAssetShortHeader&&!e.openedPrivateAssetPackListingData&&!e.openedAssetPack&&e.filtersState===s&&!e.displayAssets},d=function(e){return!u(e)&&!e.openedAssetShortHeader&&!e.openedPrivateAssetPackListingData},p=function(){var e=a.useState({previousPages:[l]}),t=(0,i.Z)(e,2),n=t[0],u=t[1],p=n.previousPages;return a.useMemo((function(){return{getCurrentPage:function(){return p[p.length-1]},backToPreviousPage:function(){if(p.length>1){var e=p.slice(0,p.length-1),t=e[e.length-1];return u({previousPages:e}),t}return p[0]},openHome:function(){return u({previousPages:[l]}),l},clearHistory:function(){u((function(e){if(e.previousPages.length<=1)return e;var t=e.previousPages[e.previousPages.length-1];return{previousPages:[l,t]}}))},clearPreviousPageFromHistory:function(){u((function(e){return e.previousPages.length<=1?e:{previousPages:e.previousPages.slice(0,e.previousPages.length-1)}}))},openSearchResultPage:function(){u((function(e){var t=e.previousPages[e.previousPages.length-1];return d(t)?e:(0,o.Z)((0,o.Z)({},e),{},{previousPages:[].concat((0,r.Z)(e.previousPages),[c])})}))},openTagPage:function(e){u((function(t){return(0,o.Z)((0,o.Z)({},t),{},{previousPages:[].concat((0,r.Z)(t.previousPages),[{openedAssetShortHeader:null,openedAssetCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,displayAssets:!0,filtersState:{chosenCategory:{node:{name:e,allChildrenTags:[],children:[]},parentNodes:[]},chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}}}])})}))},openAssetCategoryPage:function(e){u((function(t){return(0,o.Z)((0,o.Z)({},t),{},{previousPages:[].concat((0,r.Z)(t.previousPages),[{openedAssetShortHeader:null,openedAssetCategory:e,openedAssetPack:null,openedPrivateAssetPackListingData:null,filtersState:s,displayAssets:!1}])})}))},openPackPage:function(e){var t=e.assetPack,n=e.previousSearchText;u((function(e){var i=e.previousPages[e.previousPages.length-1],a=(0,o.Z)((0,o.Z)({},i),{},{searchText:n}),s=e.previousPages.slice(0,e.previousPages.length-1),l=[].concat((0,r.Z)(s),[a]);return(0,o.Z)((0,o.Z)({},e),{},{previousPages:[].concat((0,r.Z)(l),[{openedAssetShortHeader:null,openedAssetCategory:i&&i.openedAssetCategory||null,openedAssetPack:t,openedPrivateAssetPackListingData:null,displayAssets:!0,filtersState:{chosenCategory:{node:{name:t.tag,allChildrenTags:[],children:[]},parentNodes:[]},chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}}}])})}))},openPrivateAssetPackInformationPage:function(e){var t=e.assetPack,n=e.previousSearchText;u((function(e){var i=e.previousPages[e.previousPages.length-1],a=(0,o.Z)((0,o.Z)({},i),{},{searchText:n}),l=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(l),[a]);return(0,o.Z)((0,o.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:null,openedAssetCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:t,filtersState:s,displayAssets:!1}])})}))},openDetailPage:function(e){var t=e.assetShortHeader,n=e.previousSearchText;u((function(e){var i=e.previousPages[e.previousPages.length-1],a=(0,o.Z)((0,o.Z)({},i),{},{searchText:n}),l=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(l),[a]);return(0,o.Z)((0,o.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:t,openedAssetCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,filtersState:s,displayAssets:!1}])})}))}}}),[p])}},39818:function(e,t,n){"use strict";n.d(t,{C9:function(){return g},FL:function(){return f},GI:function(){return u},Jk:function(){return d},ad:function(){return x},cx:function(){return v},lz:function(){return h},t3:function(){return p}});var r=n(37762),o=n(43144),i=n(15671),a=n(60136),s=n(29388),l=n(49819),c=n(11858),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return(0,i.Z)(this,n),t.call(this,e)}return(0,o.Z)(n)}(l.hM),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;(0,i.Z)(this,e),this.objectTypes=t}return(0,o.Z)(e,[{key:"getPertinence",value:function(e){return 0===this.objectTypes.size||this.objectTypes.has(e.objectType)?1:0}},{key:"hasFilters",value:function(){return this.objectTypes.size>0}}]),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,i.Z)(this,e),this.attributionFreeOnly=t}return(0,o.Z)(e,[{key:"getPertinence",value:function(t){return!this.attributionFreeOnly||e.noAttributionLicenses.includes(t.license)?1:0}},{key:"hasFilters",value:function(){return this.attributionFreeOnly}}]),e}();p.noAttributionLicenses=["CC0 (public domain)","Apache 2.0","Trademark of SpeXEngine Ltd (fair use authorised in SpeXEngine games)","SIL Open Font License 1.1 (OFL)"];var h=function(){function e(t){var n=t.isFree,r=void 0!==n&&n,o=t.isPremium,a=void 0!==o&&o,s=t.isOwned,l=void 0!==s&&s,c=t.receivedAssetPacks,u=void 0===c?[]:c;(0,i.Z)(this,e),this.isFree=r,this.isPremium=a,this.isOwned=l,this.receivedAssetPacks=u||[]}return(0,o.Z)(e,[{key:"getPertinence",value:function(e){return this.isFree||this.isPremium||this.isOwned?this.isOwned&&e.prices&&this.receivedAssetPacks.map((function(e){return e.id})).includes(e.id)||this.isPremium&&e.prices||this.isFree&&!e.prices?1:0:1}},{key:"hasFilters",value:function(){return this.isFree||this.isPremium||this.isOwned}}]),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,i.Z)(this,e),this.mustBeAnimated=t,this.mustHaveSeveralState=n}return(0,o.Z)(e,[{key:"getPertinence",value:function(e){var t=e.maxFramesCount>1,n=e.animationsCount>1;return this.mustBeAnimated&&!t||this.mustHaveSeveralState&&!n?0:1}},{key:"hasFilters",value:function(){return this.mustBeAnimated||this.mustHaveSeveralState}}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.boundMin,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.boundMax;(0,i.Z)(this,e),this.dimensionMin=t,this.dimensionMax=n}return(0,o.Z)(e,[{key:"getPertinence",value:function(t){return t.width&&t.height?(this.dimensionMin===e.boundMin||this.dimensionMin<=t.width)&&(this.dimensionMin===e.boundMax||t.width<=this.dimensionMax)||(this.dimensionMin===e.boundMin||this.dimensionMin<=t.height)&&(this.dimensionMin===e.boundMax||t.height<=this.dimensionMax)?1:0:1}},{key:"hasFilters",value:function(){return this.dimensionMin!==e.boundMin||this.dimensionMax!==e.boundMax}}]),e}();g.boundMin=8,g.boundMax=2048;var m=function(e,t){var n=(0,c.lC)(e.r,e.g,e.b),r=(0,c.lC)(t.r,t.g,t.b),o=n[1],i=r[1];if(0===o){var a=i-o,s=r[2]-n[2];return 1-(a*a+s*s)/2}var l,u=0===i?1:2*Math.abs(((r[0]-n[0]+.5)%(l=1)+l)%l-.5),d=i-o,p=r[2]-n[2];return 1-(4*u*u+d*d+p*p)/6},x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,i.Z)(this,e),this.color=t}return(0,o.Z)(e,[{key:"getPertinence",value:function(e){var t=this.color;if(!t)return 1;var n,o=Number.MIN_VALUE,i=(0,r.Z)(e.dominantColors);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=(0,c.D6)(a),l=m(s,t);o=Math.max(o,l)}}catch(u){i.e(u)}finally{i.f()}return o}},{key:"hasFilters",value:function(){return!!this.color}}]),e}(),v=function(){function e(t){(0,i.Z)(this,e),this.other=t}return(0,o.Z)(e,[{key:"getPertinence",value:function(e){if(this.other===e||this.other.objectType!==e.objectType)return 0;var t=e.maxFramesCount>1,n=e.animationsCount>1,o=this.other.maxFramesCount>1,i=this.other.animationsCount>1;if(t!==o||n!==i)return 0;var a=e.tags.includes("top-down"),s=e.tags.includes("isometric"),l=e.tags.includes("side view"),u=this.other.tags.includes("top-down"),d=this.other.tags.includes("isometric"),p=this.other.tags.includes("side view");if(!(a&&u||s&&d||l&&p||!a&&!s&&!l&&!u&&!d&&!p))return 0;var h=e.width*e.height,f=this.other.width*this.other.height;if(2*Math.min(h,f)<Math.max(h,f))return 0;var g=e.width/e.height,x=this.other.width/this.other.height;if(1.5*Math.min(g,x)<Math.max(g,x))return 0;var v,b=0,j=(0,r.Z)(e.dominantColors);try{for(j.s();!(v=j.n()).done;){var C,y=v.value,Z=(0,c.D6)(y),k=(0,r.Z)(this.other.dominantColors);try{for(k.s();!(C=k.n()).done;){var w=C.value,T=(0,c.D6)(w),E=m(Z,T);b=Math.max(b,E)}}catch(S){k.e(S)}finally{k.f()}}}catch(S){j.e(S)}finally{j.f()}return b}},{key:"hasFilters",value:function(){return!0}}]),e}()},8162:function(e,t,n){"use strict";n.d(t,{N:function(){return b},y:function(){return v}});var r=n(93433),o=n(37762),i=n(15861),a=n(29439),s=n(64687),l=n.n(s),c=n(28381),u=n(81442),d=n(39126),p=n(82069),h=n(36262),f=n(29343),g=n.g.gd,m=new Set,x=new Set(["community"]),v=c.createContext({filters:null,searchResults:null,fetchBehaviors:function(){},error:null,searchText:"",setSearchText:function(){},allCategories:[],chosenCategory:"",setChosenCategory:function(){},setInstalledBehaviorMetadataList:function(){},behaviorShortHeadersByType:{},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),b=function(e){var t=e.children,n=e.defaultSearchText,s=c.useState([]),b=(0,a.Z)(s,2),j=b[0],C=b[1],y=c.useState({}),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=c.useContext(h.ZP).values.showCommunityExtensions,E=c.useState([]),S=(0,a.Z)(E,2),P=S[0],I=S[1],D=c.useState(null),A=(0,a.Z)(D,2),L=A[0],M=A[1],F=c.useRef(!1),O=c.useState(n||""),R=(0,a.Z)(O,2),B=R[0],_=R[1],N=c.useState(""),U=(0,a.Z)(N,2),H=U[0],V=U[1],W=(0,u.m)(),z=c.useCallback((function(){Object.keys(k).length||F.current||(0,i.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(null),F.current=!0,e.prev=2,e.next=5,(0,d.E)();case 5:t=e.sent,n=t.headers,r={},n.forEach((function(e){r[e.type]=e})),console.info("Loaded ".concat(n?n.length:0," behaviors from the extension store.")),w(r),I(t.views.default.firstIds.map((function(e){var t=e.extensionName,n=e.behaviorName;return g.PlatformExtension.getBehaviorFullType(t,n)}))),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the behaviors from the extension store:",e.t0),M(e.t0);case 18:F.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[k,F]);c.useEffect((function(){if(!Object.keys(k).length&&!F.current){var e=setTimeout((function(){console.info("Pre-fetching behaviors from extension store..."),z()}),5e3);return function(){return clearTimeout(e)}}}),[z,k,F]);var G=c.useMemo((function(){var e={};for(var t in k)e[t]=k[t];var n,r=(0,o.Z)(j);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i.type]=i}}catch(a){r.e(a)}finally{r.f()}return e}),[j,k]),Y=c.useMemo((function(){var e=new Set;for(var t in G)e.add(G[t].category);return(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}),[G]),q=c.useMemo((function(){var e=new Set,t=function(t){var n=G[t];n.tags.forEach((function(t){!T&&n.tier&&x.has(n.tier)||e.add(t)}))};for(var n in G)t(n);var o=(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}));return{allTags:o,defaultTags:o,tagsTree:[]}}),[G,T]),X=c.useMemo((function(){return[].concat((0,r.Z)(j.map((function(e){return e.type}))),(0,r.Z)(P))}),[P,j]),J=(0,p.qg)(G,{searchText:B,chosenItemCategory:H,chosenCategory:W.chosenCategory,chosenFilters:W.chosenFilters,excludedTiers:T?m:x,defaultFirstSearchItemIds:X}),K=c.useMemo((function(){return{searchResults:J,fetchBehaviors:z,filters:q,allCategories:Y,chosenCategory:H,setChosenCategory:V,error:L,searchText:B,setSearchText:_,setInstalledBehaviorMetadataList:C,behaviorShortHeadersByType:k,filtersState:W}}),[J,L,q,Y,H,V,B,C,k,W,z]);return(0,f.jsx)(v.Provider,{value:K,children:t})}},30227:function(e,t,n){"use strict";n.d(t,{I:function(){return f},h:function(){return g}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(81442),c=n(69197),u=n(82069),d=n(29343),p=new Set,h=[],f=s.createContext({filters:null,searchResults:null,fetchExamplesAndFilters:function(){},allExamples:null,error:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),g=function(e){var t=e.children,n=s.useState(null),i=(0,o.Z)(n,2),g=i[0],m=i[1],x=s.useState(null),v=(0,o.Z)(x,2),b=v[0],j=v[1],C=s.useState(null),y=(0,o.Z)(C,2),Z=y[0],k=y[1],w=s.useState(null),T=(0,o.Z)(w,2),E=T[0],S=T[1],P=s.useRef(!1),I=s.useState(""),D=(0,o.Z)(I,2),A=D[0],L=D[1],M=(0,l.m)(),F=s.useCallback((function(){g||P.current||(0,r.Z)(a().mark((function e(){var t,n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(null),P.current=!0,e.prev=2,e.next=5,(0,c.rx)();case 5:t=e.sent,n=t.exampleShortHeaders,r=t.filters,S(n),o={},n.forEach((function(e){o[e.id]=e})),console.info("Loaded ".concat(n?n.length:0," examples from the example store.")),m(o),j(r),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Unable to load the examples from the example store:",e.t0),k(e.t0);case 19:P.current=!1;case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))()}),[g,P]);s.useEffect((function(){if(!g&&!P.current){var e=setTimeout((function(){console.info("Pre-fetching examples from the example store..."),F()}),5e3);return function(){return clearTimeout(e)}}}),[F,g,P]);var O=M.chosenCategory,R=M.chosenFilters,B=(0,u.qg)(g,{searchText:A,chosenCategory:O,chosenFilters:R,excludedTiers:p,defaultFirstSearchItemIds:h,shuffleResults:!1}),_=s.useMemo((function(){return{searchResults:B,fetchExamplesAndFilters:F,allExamples:E,filters:b,error:Z,searchText:A,setSearchText:L,filtersState:M}}),[B,E,Z,b,A,M,F]);return(0,d.jsx)(f.Provider,{value:_,children:t})}},48210:function(e,t,n){"use strict";n.d(t,{D:function(){return x},H:function(){return m}});var r=n(93433),o=n(15861),i=n(29439),a=n(64687),s=n.n(a),l=n(28381),c=n(81442),u=n(39126),d=n(82069),p=n(36262),h=n(29343),f=new Set,g=new Set(["community"]),m=l.createContext({filters:null,searchResults:null,fetchExtensionsAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},allCategories:[],chosenCategory:"",setChosenCategory:function(){},extensionShortHeadersByName:{},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}},hasExtensionNamed:function(){return!1}}),x=function(e){var t=e.children,n=e.defaultSearchText,a=l.useState({}),x=(0,i.Z)(a,2),v=x[0],b=x[1],j=l.useContext(p.ZP).values.showCommunityExtensions,C=l.useState([]),y=(0,i.Z)(C,2),Z=y[0],k=y[1],w=l.useState(null),T=(0,i.Z)(w,2),E=T[0],S=T[1],P=l.useRef(!1),I=l.useState(n||""),D=(0,i.Z)(I,2),A=D[0],L=D[1],M=l.useState(""),F=(0,i.Z)(M,2),O=F[0],R=F[1],B=(0,c.m)(),_=l.useCallback((function(){Object.keys(v).length||P.current||(0,o.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),P.current=!0,e.prev=2,e.next=5,(0,u.In)();case 5:t=e.sent,n=t.headers,r={},n.forEach((function(e){r[e.name]=e})),console.info("Loaded ".concat(n?n.length:0," extensions from the extension store.")),b(r),k(t.views.default.firstIds),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the extensions from the extension store:",e.t0),S(e.t0);case 18:P.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[v,P]);l.useEffect((function(){if(!Object.keys(v).length&&!P.current){var e=setTimeout((function(){console.info("Pre-fetching extensions from extension store..."),_()}),5e3);return function(){return clearTimeout(e)}}}),[_,v,P]);var N=l.useMemo((function(){var e=new Set;for(var t in v)e.add(v[t].category);return(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}),[v]),U=l.useMemo((function(){var e=new Set;for(var t in v)v[t].tags.forEach((function(t){return e.add(t)}));var n=(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}));return{allTags:n,defaultTags:n,tagsTree:[]}}),[v]),H=(0,d.qg)(v,{searchText:A,chosenItemCategory:O,chosenCategory:B.chosenCategory,chosenFilters:B.chosenFilters,excludedTiers:j?f:g,defaultFirstSearchItemIds:Z}),V=l.useCallback((function(e){return!!v[e]}),[v]),W=l.useMemo((function(){return{searchResults:H,fetchExtensionsAndFilters:_,filters:U,allCategories:N,chosenCategory:O,setChosenCategory:R,error:E,searchText:A,setSearchText:L,extensionShortHeadersByName:v,filtersState:B,hasExtensionNamed:V}}),[H,E,U,N,O,R,A,v,B,_,V]);return(0,h.jsx)(m.Provider,{value:W,children:t})}},87706:function(e,t,n){"use strict";n.d(t,{An:function(){return E},Lu:function(){return Z},Pr:function(){return y},Sg:function(){return P},UN:function(){return T},bg:function(){return S}});var r=n(93433),o=n(15861),i=n(64687),a=n.n(i),s=n(84140),l=n(79431),c=n(41006),u=n(10952),d=n.n(u),p=n(29118),h=n.n(p),f=n(60575),g=n.n(f),m=n(39126),x=n(18455),v=n(84360),b=n.g.gd,j=function(e){var t=e.trim();if(!t)return"UnnamedObject";var n,r=(n=t)?n.replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g,"$").replace(/[^A-Za-z0-9]+/g,"$").replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+"$"+n})).toLowerCase().replace(/(\$)(\w?)/g,(function(e,t,n){return n.toUpperCase()})):"";return r[0]>="0"&&r[0]<="9"&&(r="_"+r),r},C=function(e,t,n,r){var o=n.name;if(!r[o]){var i=e.getResourcesManager(),a=n.file,u=n.origin?n.origin.name:"",d=(0,s.d0)(a)?(0,s.uD)(a):u,p=n.origin?n.origin.identifier:"",h=d&&p?i.getResourceNameWithOrigin(d,p):"",f=i.getResourceNameWithFile(a);if(h)r[o]=h;else if(f)r[o]=f;else{var g=null;if("image"===n.kind)g=new b.ImageResource;else if("audio"===n.kind)g=new b.AudioResource;else if("font"===n.kind)g=new b.FontResource;else if("video"===n.kind)g=new b.VideoResource;else if("json"===n.kind)g=new b.JsonResource;else{if("model3D"!==n.kind)throw new Error('Resource of kind "'.concat(n.kind,'" is not supported.'));g=new b.Model3DResource}(0,c.qx)(g,n),"image"===g.getKind()&&g.setSmooth("nearest"!==e.getScaleMode()&&!(0,s.V0)(t));var m=(0,l.Z)(o,(function(e){return i.hasResource(e)}));g.setName(m),g.setOrigin(d,p),i.addResource(g),g.delete(),r[o]=m}}},y=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,o,i,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.asset,r=t.project,o=t.objectsContainer,i={},s={},u=[],n.objectAssets.forEach((function(e){var t=e.object.type;if(!t)throw new Error("An object has no type specified");var a=j(e.object.name),d=(0,l.Z)(a,(function(e){return o.hasObjectNamed(e)})),p=o.insertNewObject(r,t,d,o.getObjectsCount());i[a]=d,(0,c.qx)(p,e.object,"unserializeFrom",r),p.setAssetStoreId(n.id),p.setName(d),e.resources.forEach((function(e){C(r,n,e,s)}));var h=(0,v.R)(s),f=new b.ResourcesRenamer(h);h.delete(),p.getConfiguration().exposeResources(f),f.delete(),u.push(p)})),e.abrupt("return",{createdObjects:u});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=y,k=function(e){return h()(d()(e.objectAssets.map((function(e){return e.requiredExtensions||[]}))),(function(e){return e.extensionName}))},w=function(e,t){var n=(0,x.mapVector)(e.asPlatform(e.JsPlatform.get()).getAllPlatformExtensions(),(function(e){return e.getName()}));return t.filter((function(e){return!n.includes(e.name)}))},T=function(){var e=(0,o.Z)(a().mark((function e(t){var n,o,i,s,l,c,u,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requiredExtensionInstallation,o=t.shouldUpdateExtension,i=t.eventsFunctionsExtensionsState,s=t.project,l=n.requiredExtensionShortHeaders,c=n.missingExtensionShortHeaders,u=n.outOfDateExtensionShortHeaders,0!==c.length||0!==u.length){e.next=4;break}return e.abrupt("return");case 4:return d=o?[].concat((0,r.Z)(c),(0,r.Z)(u)):c,e.next=7,Promise.all(g()(d).map((function(e){return(0,m.RT)(e)})));case 7:return p=e.sent,e.next=10,E(i,s,p);case 10:if(!w(b,l).length){e.next=13;break}throw new Error("These extensions could not be installed: "+c.map((function(e){return e.name})).join(", "));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n.forEach((function(e){var n=e.name;if(!n)return Promise.reject(new Error("Malformed extension (missing name)."));var o=t.hasEventsFunctionsExtensionNamed(n)?t.getEventsFunctionsExtension(n):t.insertNewEventsFunctionsExtension(n,0);(0,c.qx)(o,e,"unserializeFrom",t),r&&o.setOrigin("gdevelop-extension-store",n)})),e.loadProjectEventsFunctionsExtensions(t)},S=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requiredExtensions,r=t.project,0!==n.length){e.next=3;break}return e.abrupt("return",{requiredExtensionShortHeaders:[],missingExtensionShortHeaders:[],outOfDateExtensionShortHeaders:[]});case 3:return e.next=5,(0,m.In)();case 5:return o=e.sent,i=n.map((function(e){var t=o.headers.find((function(t){return t.name===e.extensionName}));if(!t)throw new Error("Unable to find extension "+e.extensionName+" in the registry.");return t})),s=i.filter((function(e){return r.hasEventsFunctionsExtensionNamed(e.name)&&r.getEventsFunctionsExtension(e.name).getVersion()!==e.version})),l=w(b,i),e.abrupt("return",{requiredExtensionShortHeaders:i,missingExtensionShortHeaders:l,outOfDateExtensionShortHeaders:s});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,r=t.project,o=[],n.forEach((function(e){k(e).forEach((function(e){o.some((function(t){return t.extensionName===e.extensionName}))||o.push(e)}))})),e.abrupt("return",S({requiredExtensions:o,project:r}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},76683:function(e,t,n){"use strict";var r=n(1413),o=n(29439),i=n(28381),a=n(24347),s=n(78081),l=n(36465),c=n(29343);t.Z=function(e){var t=e.url,n=e.style,u=e.alt,d=e.onError,p=e.onLoad,h=e.hideLoader,f=i.useState(null),g=(0,o.Z)(f,2),m=g[0],x=g[1],v=i.useState(!1),b=(0,o.Z)(v,2),j=b[0],C=b[1],y=i.useContext(a.Z),Z=y.authorizationToken,k=y.updateAuthorizationToken,w=i.useRef(0);i.useEffect((function(){j||(Z?x((0,l.mR)(t,Z)):k())}),[Z,k,t,j]);return i.useEffect((function(){t&&C(!1)}),[t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{alt:u,src:m,style:(0,r.Z)((0,r.Z)({},n),{},{display:h||j?"block":"none"}),onError:function(){console.warn("Error while fetching authorized image"),w.current>=3?d&&d():(C(!1),console.info("Error while fetching image, fetching a new token..."),k(),w.current+=1)},onLoad:function(e){C(!0),p&&p(e)}}),!h&&!j&&(0,c.jsx)(s.Z,{})]})}},75177:function(e,t,n){"use strict";n.d(t,{c:function(){return d},I:function(){return u}});n(28381);var r=n(36600),o=n(86278),i=n(69186),a=n(29343),s=(0,i.Z)((function(e){return{container:{borderRadius:4,padding:"2px 4px",backdropFilter:function(t){return t.withOverlay&&"light"===e.palette.type?"brightness(40%)":void 0},backgroundColor:function(t){return t.withOverlay&&"light"===e.palette.type?void 0:e.palette.background.alternate.startsWith("#")?e.palette.background.alternate+"BB":e.palette.background.alternate},color:function(t){return t.withOverlay&&"light"===e.palette.type?"#FAFAFA":void 0}}}}));var l=function(e){var t=e.label,n=e.withOverlay,r=s({withOverlay:n});return(0,a.jsx)("div",{className:r.container,children:(0,a.jsx)(o.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:t})})},c=n(51137),u=function(e){var t=e.i18n,n=e.privateAssetPackListingData,r=(0,c.PN)()?(0,c.e_)(n.appStoreProductId):null;if(r)return r.price;var o=n.prices[0];return o?"\u20ac ".concat(t.number(o.value/100,{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\D00$/,"")):""},d=function(e){var t=e.privateAssetPackListingData,n=e.withOverlay,o=e.owned;return(0,a.jsx)(r.I18n,{children:function(e){var i=e.i18n,s=o?(0,a.jsx)(r.Trans,{id:"\u2705 Owned"}):u({i18n:i,privateAssetPackListingData:t});return(0,a.jsx)(l,{withOverlay:n,label:s})}})}},24347:function(e,t,n){"use strict";var r=n(15861),o=n(64687),i=n.n(o),a=n(28381),s={authorizationToken:null,updateAuthorizationToken:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchPrivateAsset:function(){var e=(0,r.Z)(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),installPrivateAsset:function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPrivateAssetPackAudioArchiveUrl:function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=a.createContext(s);t.Z=l},23375:function(e,t,n){"use strict";n.d(t,{E:function(){return g},Z:function(){return h}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(81442),c=n(84140),u=n(49819),d=n(59717),p=n(29343),h=s.createContext({filters:null,authors:null,licenses:null,searchResults:null,fetchResourcesAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),f=function(e){return e.name+"\n"+e.tags.join(", ")},g=function(e){var t=e.children,n=s.useState(null),i=(0,o.Z)(n,2),g=i[0],m=i[1],x=s.useState(null),v=(0,o.Z)(x,2),b=v[0],j=v[1],C=s.useState(null),y=(0,o.Z)(C,2),Z=y[0],k=y[1],w=s.useState(null),T=(0,o.Z)(w,2),E=T[0],S=T[1],P=s.useState(null),I=(0,o.Z)(P,2),D=I[0],A=I[1],L=s.useRef(!1),M=s.useState(""),F=(0,o.Z)(M,2),O=F[0],R=F[1],B=(0,l.m)(),_=s.useContext(d.K).environment,N=s.useCallback((function(){g||L.current||(0,r.Z)(a().mark((function e(){var t,n,r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(null),L.current=!0,e.prev=2,e.next=5,(0,c.R5)({environment:_});case 5:return t=e.sent,n=t.resources,r=t.filters,e.next=10,(0,c.Dz)({environment:_});case 10:return o=e.sent,e.next=13,(0,c.$l)({environment:_});case 13:i=e.sent,s={},n.forEach((function(e){s[e.url]=e})),console.info("Loaded ".concat(n?n.length:0," resources from the asset store.")),m(s),j(r),k(o),S(i),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(2),console.error("Unable to load the assets from the asset store:",e.t0),A(e.t0);case 27:L.current=!1;case 28:case"end":return e.stop()}}),e,null,[[2,23]])})))()}),[g,L,_]),U=B.chosenCategory,H=B.chosenFilters,V=(0,u.az)(g,f,O,U,H),W=s.useMemo((function(){return{searchResults:V,fetchResourcesAndFilters:N,filters:b,authors:Z,licenses:E,error:D,searchText:O,setSearchText:R,filtersState:B}}),[V,D,b,Z,E,O,B,N]);return(0,p.jsx)(h.Provider,{value:W,children:t})}},33258:function(e,t,n){"use strict";n.d(t,{L:function(){return W}});var r=n(36600),o=n(28381),i=n(64903),a=n(40243),s=n(2632),l=n(81442),c=n(23375),u=n(1413),d=n(78081),p=n(75383),h=n(61651),f=n(38509),g=n(86578),m=n(29343),x={container:{flex:1},grid:{overflowX:"hidden"}},v=o.forwardRef((function(e,t){var n=e.searchItems,i=e.renderSearchItem,a=e.spacing,s=e.error,l=e.onRetry,c=e.baseSize,v=e.noResultPlaceholder,b=e.noScroll,j=o.useRef(null);return o.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=j.current;return e?e.state.scrollTop:0},scrollToPosition:function(e){var t=j.current;t&&t.scrollToPosition({scrollLeft:0,scrollTop:e})}}})),n?0===n.length?v||(0,m.jsx)(g.Z,{children:(0,m.jsx)(r.Trans,{id:"No results returned for your search. Try something else, browse the categories or create your object from scratch!"})}):(0,m.jsx)(h.C,{title:"An error occurred when displaying search results",scope:"box-search-result",children:(0,m.jsx)("div",{style:x.container,children:(0,m.jsx)(f.qj,{children:function(e){var t=e.width,r=e.height,o=Math.max(Math.floor((t-5)/c),1),s=Math.max(Math.floor(t/o),30),l=Math.max(1,Math.ceil(n.length/o)),d=s,p=b?d*l:r,h=t;return(0,m.jsx)(f.rj,{ref:j,width:h,height:p,columnCount:o,columnWidth:s,rowHeight:d,rowCount:l,cellRenderer:function(e){var t=e.columnIndex,r=e.key,l=e.rowIndex,c=e.style,d=l*o+t,p=d<n.length?n[d]:null;return(0,m.jsx)("div",{style:(0,u.Z)((0,u.Z)({},c),{},{left:c.left+a/2,top:c.top+a/2,width:c.width-a,height:c.height-a}),children:p?i(p,s-a):null},r)},style:x.grid})}})})}):s?(0,m.jsx)(p.Z,{onRetry:l,children:(0,m.jsx)(r.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}):(0,m.jsx)(d.Z,{})})),b=n(3798),j=n(86278),C=n(48812),y=n(32484),Z=n(23818),k=n(58893),w=n(24910),T=n(81730),E=n(62981),S={previewContainer:{display:"flex",position:"relative",justifyContent:"center",alignItems:"center"},previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"},previewIconDarkTheme:{width:40,height:40,filter:"grayscale(1) invert(1)"},previewIconLightTheme:{width:40,height:40},cardContainer:{overflow:"hidden",position:"relative"},titleContainer:{position:"absolute",bottom:0,left:0,right:0,height:48,color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"rgb(0,0,0,0.5)"},title:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{width:32,height:32},audioElement:{width:128,height:40}},P=function(e){var t=e.resource,n=e.onChoose,r=e.size,o=e.imageStyle;return(0,m.jsx)(b.Z,{onClick:n,focusRipple:!0,children:(0,m.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},S.cardContainer),{},{width:r,height:r}),children:[(0,m.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},S.previewContainer),{},{width:r,height:r}),children:[(0,m.jsx)(k.Z,{}),(0,m.jsx)(Z.W,{style:(0,u.Z)((0,u.Z)({},S.previewImage),{},{maxWidth:108,maxHeight:108},o),src:t.url,alt:t.name},t.url)]}),(0,m.jsxs)("div",{style:S.titleContainer,children:[(0,m.jsx)(j.Z,{noMargin:!0,style:S.title,children:t.name}),(0,m.jsx)(j.Z,{noMargin:!0,style:S.title,size:"body2",children:t.license})]})]})})},I=function(e){var t=e.resource,n=(e.onChoose,e.size),r=e.children;return(0,m.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},S.cardContainer),{},{width:n,height:n}),children:[(0,m.jsx)(a.sg,{children:r}),(0,m.jsxs)("div",{style:S.titleContainer,children:[(0,m.jsx)(j.Z,{noMargin:!0,style:S.title,children:t.name}),(0,m.jsx)(j.Z,{noMargin:!0,style:S.title,size:"body2",children:t.license})]})]})},D=function(e){var t=e.resource,n=e.onChoose,i=e.size,s=t.type,l=o.useContext(w.Z);switch(s){case"image":return(0,m.jsx)(P,{resource:t,onChoose:n,size:i});case"svg":return(0,m.jsx)(P,{resource:t,onChoose:n,size:i,imageStyle:"light"===l.palette.type?S.previewIconLightTheme:S.previewIconDarkTheme});case"audio":return(0,m.jsxs)(I,{onChoose:n,resource:t,size:i,children:[(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)("audio",{controls:!0,src:t.url,style:S.audioElement,children:"Audio preview is unsupported."})}),(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(y.Z,{onClick:n,label:(0,m.jsx)(r.Trans,{id:"Choose"})})})]});case"json":case"tilemap":case"tileset":return(0,m.jsxs)(I,{onChoose:n,resource:t,size:i,children:[(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(E.Z,{style:S.icon})}),(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(y.Z,{onClick:n,label:(0,m.jsx)(r.Trans,{id:"Choose"})})})]});case"video":return(0,m.jsxs)(I,{onChoose:n,resource:t,size:i,children:[(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(T.Z,{style:S.icon})}),(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(y.Z,{onClick:n,label:(0,m.jsx)(r.Trans,{id:"Choose"})})})]});case"font":case"model3D":return(0,m.jsxs)(I,{onChoose:n,resource:t,size:i,children:[(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(C.Z,{style:S.icon})}),(0,m.jsx)(a.x1,{justifyContent:"center",children:(0,m.jsx)(y.Z,{onClick:n,label:(0,m.jsx)(r.Trans,{id:"Choose"})})})]});default:return null}},A=n(36607),L=n(93433),M=n(23125),F=n(15845),O=n(84900),R=n(25638),B=function(e){return e.map((function(e){return e.name})).join(";-/>")},_=function e(t){var n=t.tagsTreeNodes,r=t.onChoose,o=t.parentNodes;return n.length?n.map((function(t){var n=[].concat((0,L.Z)(o),[t]);return(0,m.jsx)(F.Z,{nodeId:B(n),label:t.name,onLabelClick:function(){return r({node:t,parentNodes:o})},collapseIcon:t.children.length?(0,m.jsx)(R.Z,{}):null,expandIcon:t.children.length?(0,m.jsx)(O.Z,{}):null,children:(0,m.jsx)(e,{tagsTreeNodes:t.children,parentNodes:n,onChoose:r})},t.name)})):null},N=o.memo((function(e){var t=e.allItemsLabel,n=e.chosenCategory,r=e.setChosenCategory,o=e.onChoiceChange,i=e.allFilters;return(0,m.jsxs)(M.Z,{selected:n?B([].concat((0,L.Z)(n.parentNodes),[n.node])):"",defaultExpanded:[],onNodeSelect:function(){},children:[(0,m.jsx)(F.Z,{nodeId:"",label:t,onLabelClick:function(){r(null)}}),(0,m.jsx)(_,{tagsTreeNodes:i.tagsTree,onChoose:function(e){r(e),o&&o(e)},parentNodes:[]})]})})),U=function(e){var t=e.filtersState,n=e.onChoiceChange,r=e.allFilters,o=e.error,i=e.allItemsLabel;return r?o?null:(0,m.jsx)(N,{allItemsLabel:i,chosenCategory:t.chosenCategory,setChosenCategory:t.setChosenCategory,onChoiceChange:n,allFilters:r}):(0,m.jsx)(d.Z,{})},H=n(20914),V={paper:{width:250}},W=function(e){var t=e.onChoose,n=e.resourceKind,u=o.useContext(c.Z),d=u.filters,p=u.searchResults,h=u.error,f=u.fetchResourcesAndFilters,g=u.filtersState,x=u.searchText,b=u.setSearchText;o.useEffect((function(){f()}),[f]);var j=p?p.filter((function(e){return e.type===n})):null;return(0,m.jsxs)(a.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,m.jsx)(a.x1,{children:(0,m.jsx)(a.sg,{expand:!0,noMargin:!0,children:(0,m.jsx)(i.Z,{value:x,onChange:b,onRequestSearch:function(){},placeholder:{id:"Search resources"}})})}),(0,m.jsxs)(a.x1,{expand:!0,overflow:"hidden",noMargin:!0,children:[(0,m.jsx)(a.sg,{noMargin:!0,children:(0,m.jsx)(s.Z,{children:(0,m.jsxs)(H.Z,{style:V.paper,background:"medium",children:[(0,m.jsx)(A.Z,{children:(0,m.jsx)(r.Trans,{id:"Categories"})}),(0,m.jsx)(U,{allItemsLabel:(0,m.jsx)(r.Trans,{id:"All assets"}),allFilters:d,filtersState:g,error:h}),(0,m.jsx)(A.Z,{children:(0,m.jsx)(r.Trans,{id:"Filters"})}),(0,m.jsx)(l.T,{allFilters:d,filtersState:g,error:h})]})})}),(0,m.jsx)(v,{baseSize:128,spacing:8,onRetry:f,error:h,searchItems:j,renderSearchItem:function(e,n){return(0,m.jsx)(D,{size:n,resource:e,onChoose:function(){return t(e)}})}})]})]})}},76288:function(e,t,n){"use strict";n.d(t,{YZ:function(){return i},gT:function(){return a}});var r=n(28381),o=n(59788),i=function(e,t,n){var i=r.useContext(o.Z),a=n.handler;r.useEffect((function(){if(t)return i.registerCommand(e,{handler:a}),function(){return i.deregisterCommand(e)}}),[i,e,t,a])},a=function(e,t,n){var i=r.useContext(o.Z),a=n.generateOptions;r.useEffect((function(){if(t)return i.registerCommand(e,{generateOptions:a}),function(){return i.deregisterCommand(e)}}),[i,e,t,a])}},59788:function(e,t,n){"use strict";n.d(t,{V:function(){return d},Z:function(){return p}});var r=n(28381),o=n(1413),i=n(43144),a=n(15671),s=(0,i.Z)((function e(){var t=this;(0,a.Z)(this,e),this.registerCommand=function(e,n){if(t._commands[e])return console.warn("Tried to register command ".concat(e,", but it is already registered."));t._commands[e]=n},this.deregisterCommand=function(e){if(!t._commands[e])return console.warn("Tried to deregister command ".concat(e,", but it is not registered."));delete t._commands[e]},this.getNamedCommand=function(e){var n=t._commands[e];return n?(0,o.Z)({name:e},n):null},this.getAllNamedCommands=function(){return Object.keys(t._commands).map((function(e){var n=t._commands[e];return(0,o.Z)((0,o.Z)({},n),{},{name:e})}))},this._commands={}})),l=n(10293),c=n(29343),u=r.createContext(new s),d=function(e){var t=(0,l.Z)((function(){return new s}));return(0,c.jsx)(u.Provider,{value:t,children:e.children})},p=u},32072:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r={GENERAL:{id:"General"},IDE:{id:"IDE"},PROJECT:{id:"Project"},SCENE:{id:"Scene"},EVENTS:{id:"Events"}};t.Z={QUIT_APP:{area:"GENERAL",displayText:{id:"Close SpeXEngine"},handledByElectron:!0},OPEN_PROJECT_MANAGER:{area:"IDE",displayText:{id:"Open project manager"},handledByElectron:!0},OPEN_PROFILE:{area:"IDE",displayText:{id:"Open My Profile"}},OPEN_GAMES_DASHBOARD:{area:"IDE",displayText:{id:"Open My Games Dashboard"}},LAUNCH_NEW_PREVIEW:{area:"PROJECT",displayText:{id:"Launch new preview"}},LAUNCH_DEBUG_PREVIEW:{area:"PROJECT",displayText:{id:"Launch preview with debugger and profiler"}},LAUNCH_NETWORK_PREVIEW:{area:"PROJECT",displayText:{id:"Launch network preview over WiFi/LAN"}},HOT_RELOAD_PREVIEW:{area:"PROJECT",displayText:{id:"Apply changes to the running preview"}},OPEN_HOME_PAGE:{area:"IDE",displayText:{id:"Show Home"}},CREATE_NEW_PROJECT:{area:"GENERAL",displayText:{id:"Create a new project"},handledByElectron:!0},OPEN_PROJECT:{area:"GENERAL",displayText:{id:"Open project"},handledByElectron:!0},SAVE_PROJECT:{area:"GENERAL",displayText:{id:"Save project"},handledByElectron:!0},SAVE_PROJECT_AS:{area:"GENERAL",displayText:{id:"Save project as..."},handledByElectron:!0},CLOSE_PROJECT:{area:"GENERAL",displayText:{id:"Close project"},handledByElectron:!0},EXPORT_GAME:{area:"PROJECT",displayText:{id:"Export game"},handledByElectron:!0},OPEN_RECENT_PROJECT:{area:"GENERAL",displayText:{id:"Open recent project..."}},OPEN_COMMAND_PALETTE:{area:"IDE",displayText:{id:"Open command palette"},ghost:!0},OPEN_PROJECT_PROPERTIES:{area:"PROJECT",displayText:{id:"Open project properties"}},OPEN_PROJECT_LOADING_SCREEN:{area:"PROJECT",displayText:{id:"Edit loading screen"}},OPEN_PROJECT_VARIABLES:{area:"PROJECT",displayText:{id:"Edit global variables"}},OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG:{area:"PROJECT",displayText:{id:"Open project icons"}},OPEN_PROJECT_RESOURCES:{area:"PROJECT",displayText:{id:"Open project resources"}},OPEN_SEARCH_EXTENSIONS_DIALOG:{area:"PROJECT",displayText:{id:"Search/import extensions"}},OPEN_LAYOUT:{area:"IDE",displayText:{id:"Open scene..."}},OPEN_EXTERNAL_EVENTS:{area:"IDE",displayText:{id:"Open external events..."}},OPEN_EXTERNAL_LAYOUT:{area:"IDE",displayText:{id:"Open external layout..."}},OPEN_EXTENSION:{area:"IDE",displayText:{id:"Open extension..."}},OPEN_SCENE_PROPERTIES:{area:"SCENE",displayText:{id:"Open scene properties"}},OPEN_SCENE_VARIABLES:{area:"SCENE",displayText:{id:"Open scene variables"}},OPEN_OBJECTS_PANEL:{area:"SCENE",displayText:{id:"Toggle Objects Panel"}},OPEN_OBJECT_GROUPS_PANEL:{area:"SCENE",displayText:{id:"Toggle Object Groups Panel"}},OPEN_PROPERTIES_PANEL:{area:"SCENE",displayText:{id:"Toggle Properties Panel"}},TOGGLE_INSTANCES_PANEL:{area:"SCENE",displayText:{id:"Toggle Instances List Panel"}},TOGGLE_LAYERS_PANEL:{area:"SCENE",displayText:{id:"Toggle Layers Panel"}},SCENE_EDITOR_UNDO:{area:"SCENE",displayText:{id:"Undo the last changes"},noShortcut:!0},SCENE_EDITOR_REDO:{area:"SCENE",displayText:{id:"Redo the last changes"},noShortcut:!0},RENAME_SCENE_OBJECT:{area:"SCENE",displayText:{id:"Rename the selected object"}},DELETE_INSTANCES:{area:"SCENE",displayText:{id:"Delete the selected instances from the scene"},noShortcut:!0},TOGGLE_WINDOW_MASK:{area:"SCENE",displayText:{id:"Toggle mask"}},TOGGLE_GRID:{area:"SCENE",displayText:{id:"Toggle grid"}},OPEN_SETUP_GRID:{area:"SCENE",displayText:{id:"Setup grid"}},EDIT_LAYER_EFFECTS:{area:"SCENE",displayText:{id:"Edit layer effects..."}},EDIT_LAYER:{area:"SCENE",displayText:{id:"Edit layer..."}},EDIT_OBJECT:{area:"SCENE",displayText:{id:"Edit object..."}},EDIT_OBJECT_BEHAVIORS:{area:"SCENE",displayText:{id:"Edit object behaviors..."}},EDIT_OBJECT_EFFECTS:{area:"SCENE",displayText:{id:"Edit object effects..."}},EDIT_OBJECT_VARIABLES:{area:"SCENE",displayText:{id:"Edit object variables..."}},EDIT_OBJECT_GROUP:{area:"SCENE",displayText:{id:"Edit object group..."}},ADD_STANDARD_EVENT:{area:"EVENTS",displayText:{id:"Add a new empty event"}},ADD_SUBEVENT:{area:"EVENTS",displayText:{id:"Add a sub-event to the selected event"}},ADD_COMMENT_EVENT:{area:"EVENTS",displayText:{id:"Add a comment"}},TOGGLE_EVENT_DISABLED:{area:"EVENTS",displayText:{id:"Toggle disabled event"}},TOGGLE_CONDITION_INVERTED:{area:"EVENTS",displayText:{id:"Toggle inverted condition"}},CHOOSE_AND_ADD_EVENT:{area:"EVENTS",displayText:{id:"Choose and add an event..."}},EVENTS_EDITOR_UNDO:{area:"EVENTS",displayText:{id:"Undo the last changes"},noShortcut:!0},EVENTS_EDITOR_REDO:{area:"EVENTS",displayText:{id:"Redo the last changes"},noShortcut:!0},DELETE_SELECTION:{area:"EVENTS",displayText:{id:"Delete the selected event(s)"},noShortcut:!0},SEARCH_EVENTS:{area:"EVENTS",displayText:{id:"Search in events"},noShortcut:!0},OPEN_EXTENSION_SETTINGS:{area:"EVENTS",displayText:{id:"Open extension settings"}}}},10293:function(e,t,n){"use strict";var r=n(28381);t.Z=function(e){var t=(0,r.useRef)(null),n=t.current;if(null!==n)return n;var o=e();return t.current=o,o}},28923:function(e,t,n){"use strict";var r={eventsFunctionsExtensionsError:null,loadProjectEventsFunctionsExtensions:function(){return Promise.reject(new Error("Use a provider"))},unloadProjectEventsFunctionsExtensions:function(){},reloadProjectEventsFunctionsExtensions:function(){return Promise.reject(new Error("Use a provider"))},reloadProjectEventsFunctionsExtensionMetadata:function(){throw new Error("Use a provider")},unloadProjectEventsFunctionsExtension:function(){},getEventsFunctionsExtensionWriter:function(){return null},getEventsFunctionsExtensionOpener:function(){return null},ensureLoadFinished:function(){return Promise.reject(new Error("Use a provider"))},getIncludeFileHashs:function(){return{}}},o=n(28381).createContext(r);t.Z=o},51458:function(e,t,n){"use strict";n.d(t,{$5:function(){return g},At:function(){return i},Op:function(){return b},_u:function(){return v},e0:function(){return m},fP:function(){return a},mK:function(){return j},xo:function(){return x}});var r=n(18455),o=n.g.gd,i=function(e,t,n){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(r){return s(e,e.getEventsFunctionsExtensionAt(r),{skipCodeGeneration:!0,eventsFunctionCodeWriter:t,i18n:n})}))).then((function(){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(r){return s(e,e.getEventsFunctionsExtensionAt(r),{skipCodeGeneration:!1,eventsFunctionCodeWriter:t,i18n:n})})))}))},a=function(e,t,n,r){var i=u(e,t,{eventsFunctionCodeWriter:n,i18n:r});o.JsPlatform.get().addNewExtension(i),i.delete()},s=function(e,t,n){return c(e,t,n).then((function(e){o.JsPlatform.get().addNewExtension(e),e.delete()}))},l=function(e,t,n){return(0,r.mapFor)(0,t.getEventsFunctionsCount(),(function(e){var r=t.getEventsFunctionAt(e),i=o.MetadataDeclarationHelper.getFreeFunctionCodeName(t,r);return n.eventsFunctionCodeWriter.getIncludeFileFor(i)})).filter(Boolean)},c=function(e,t,n){var i=new o.PlatformExtension;o.MetadataDeclarationHelper.declareExtension(i,t);var a={codeNamespacePrefix:o.MetadataDeclarationHelper.getExtensionCodeNamespacePrefix(t),extensionIncludeFiles:l(0,t,n)};return Promise.all((0,r.mapVector)(t.getEventsBasedBehaviors(),(function(r){return function(e,t,n,r,i,a){return Promise.resolve().then((function(){var s=new o.MapStringString,l=h(e,t,n,r,i,a,s);if(i.skipCodeGeneration)return s.delete(),Promise.resolve();var c=o.MetadataDeclarationHelper.getBehaviorFunctionCodeNamespace(r,a.codeNamespacePrefix),u=new o.SetString,d=new o.BehaviorCodeGenerator(e),p=d.generateRuntimeBehaviorCompleteCode(n.getName(),r,c,s,u,!0);return d.delete(),s.delete(),u.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),u.delete(),i.eventsFunctionCodeWriter.writeBehaviorCode(c,p)}))}(e,i,t,r,n,a)}))).then((function(){return Promise.all((0,r.mapVector)(t.getEventsBasedObjects(),(function(r){return function(e,t,n,r,i,a){return Promise.resolve().then((function(){var s=new o.MapStringString,l=f(e,t,n,r,i,a,s);if(i.skipCodeGeneration)return s.delete(),Promise.resolve();var c=o.MetadataDeclarationHelper.getObjectFunctionCodeNamespace(r,a.codeNamespacePrefix),u=new o.SetString,d=new o.ObjectCodeGenerator(e),p=d.generateRuntimeObjectCompleteCode(n.getName(),r,c,s,u,!0);return d.delete(),s.delete(),u.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),u.delete(),i.eventsFunctionCodeWriter.writeObjectCode(c,p)}))}(e,i,t,r,n,a)})))})).then((function(){return Promise.all((0,r.mapFor)(0,t.getEventsFunctionsCount(),(function(r){var o=t.getEventsFunctionAt(r);return d(e,i,t,o,n,a)})))})).then((function(e){return i}))},u=function(e,t,n){var i=new o.PlatformExtension;o.MetadataDeclarationHelper.declareExtension(i,t);var a={codeNamespacePrefix:o.MetadataDeclarationHelper.getExtensionCodeNamespacePrefix(t),extensionIncludeFiles:l(0,t,n)};(0,r.mapVector)(t.getEventsBasedBehaviors(),(function(r){var s=new o.MapStringString;h(e,i,t,r,n,a,s),s.delete()})),(0,r.mapVector)(t.getEventsBasedObjects(),(function(r){var s=new o.MapStringString;f(e,i,t,r,n,a,s),s.delete()}));var s=new o.MetadataDeclarationHelper;return(0,r.mapFor)(0,t.getEventsFunctionsCount(),(function(r){var o=t.getEventsFunctionAt(r);return p(e,i,t,o,n,a,s)})),s.delete(),i},d=function(e,t,n,r,i,a){var s=new o.MetadataDeclarationHelper,l=p(e,t,n,r,i,a,s).functionMetadata;if(i.skipCodeGeneration)return Promise.resolve();var c=new o.SetString,u=new o.EventsFunctionsExtensionCodeGenerator(e),d=o.MetadataDeclarationHelper.getFreeFunctionCodeNamespace(r,a.codeNamespacePrefix),h=u.generateFreeEventsFunctionCompleteCode(n,r,d,c,!0);c.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),c.delete(),u.delete(),s.delete();var f=o.MetadataDeclarationHelper.getFreeFunctionCodeName(n,r);return i.eventsFunctionCodeWriter.writeFunctionCode(f,h).then((function(){}))},p=function(e,t,n,r,i,a,s){var l=s.generateFreeFunctionMetadata(e,t,n,r),c=o.MetadataDeclarationHelper.getFreeFunctionCodeName(n,r),u=i.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.setIncludeFile(u),a.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),{functionFile:u,functionMetadata:l}};function h(e,t,n,r,i,a,s){var l=o.MetadataDeclarationHelper.generateBehaviorMetadata(e,t,n,r,s),c=o.MetadataDeclarationHelper.getBehaviorFunctionCodeNamespace(r,a.codeNamespacePrefix),u=i.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.setIncludeFile(u),a.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),l}function f(e,t,n,r,i,a,s){var l=o.MetadataDeclarationHelper.generateObjectMetadata(e,t,n,r,s),c=o.MetadataDeclarationHelper.getObjectFunctionCodeNamespace(r,a.codeNamespacePrefix),u=i.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.setIncludeFile(u),a.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),l}var g=function(e){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(t){o.JsPlatform.get().removeExtension(e.getEventsFunctionsExtensionAt(t).getName())})))},m=function(e,t){o.JsPlatform.get().removeExtension(t)},x=function(e){var t=e.getParametersCount();return!(t<=0)&&"eventsFunctionContext"===e.getParameter(t-1).getType()},v=function(e){var t=e.split("::");return t.length?{name:t[t.length-1],behaviorName:t.length>2?t[1]:void 0,extensionName:t[0]}:{name:"",behaviorName:"",extensionName:""}},b=function(e,t){return e+"::"+t.getName()},j=Object.freeze({FreeFunction:1,BehaviorFunction:0,ObjectFunction:0})},59362:function(e,t,n){"use strict";var r=n(15861),o=n(64687),i=n.n(o),a=n(36600),s=n(28381),l=n(32484),c=n(40243),u=n(86578),d=n(95100),p=n(86278),h=n(10959),f=n(16999),g=n(2066),m=n(61325),x=n(71106),v=n(57597),b=n(42699),j=n(17361),C=n(90264),y=n(14737),Z=n(64480),k=n(67835),w=n(44634),T=n(29343),E={"cordova-build":{estimatedTimeInSeconds:function(e){return 300},completeDescription:"You can download it on your Android phone and install it."},"electron-build":{estimatedTimeInSeconds:function(e){return 90+130*(e.targets?e.targets.length:0)},completeDescription:""},"web-build":{estimatedTimeInSeconds:function(e){return 5},completeDescription:""}},S=[{displayName:{id:"Download (APK)"},key:"apkKey",icon:(0,T.jsx)(j.Z,{})},{displayName:{id:"Download (Android App Bundle)"},key:"aabKey",icon:(0,T.jsx)(j.Z,{})},{displayName:{id:"Windows (zip)"},key:"windowsZipKey",icon:(0,T.jsx)(j.Z,{})},{displayName:{id:"Windows (exe)"},key:"windowsExeKey",icon:(0,T.jsx)(j.Z,{})},{displayName:{id:"macOS (zip)"},key:"macosZipKey",icon:(0,T.jsx)(j.Z,{})},{displayName:{id:"Linux (AppImage)"},key:"linuxAppImageKey",icon:(0,T.jsx)(j.Z,{})},{displayName:{id:"Open build link"},key:"s3Key",icon:(0,T.jsx)(w.Z,{})}];t.Z=function(e){var t=e.build,n=e.game,o=e.onGameUpdated,j=e.gameUpdating,w=e.setGameUpdating,P=e.onCopyToClipboard,I=s.useContext(x.ZP),D=I.getAuthorizationHeader,A=I.profile,L=E[t.type],M=L.estimatedTimeInSeconds(t),F=Math.abs((0,d.Z)(t.updatedAt,Date.now())),O=M-F,R=O>0,B=!R&&O>=-M,_=!R&&O<-M,N=function(e){var n=(0,h.Fp)(t,e);n&&g.ZP.openExternalURL(n)},U=function(){var e=(0,h.Fp)(t,"s3Key");e&&navigator.clipboard.writeText(e),P&&P()},H=s.useCallback(function(){var e=(0,r.Z)(i().mark((function e(r,a){var s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A&&n&&o&&w){e.next=2;break}return e.abrupt("return");case 2:if(s=A.id,g.ZP.showConfirmDialog(r?a._({id:'"{0}" will be the new build of this game published on games.engine.spacexpanse.org. Continue?',values:{0:t.name||(0,y.GA)(t.id)}}):a._({id:'"{0}" will be unpublished on games.engine.spacexpanse.org. Continue?',values:{0:t.name||(0,y.GA)(t.id)}}))){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,w(!0),e.next=10,(0,f.Bi)(D,s,n.id,{publicWebBuildId:r});case 10:l=e.sent,o(l),w(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.error("Unable to update the game",e.t0),w(!1);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t,n){return e.apply(this,arguments)}}(),[A,n,o,w,t.name,t.id,D]),V=!!n&&n.publicWebBuildId===t.id;return(0,T.jsx)(a.I18n,{children:function(e){var r=e.i18n;return"error"===t.status?(0,T.jsxs)(m.ep,{alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,T.jsxs)(c.sg,{noMargin:!0,children:[(0,T.jsx)(p.Z,{noMargin:!0,children:(0,T.jsx)(a.Trans,{id:"Something wrong happened :("})}),(0,T.jsx)(u.Z,{style:{justifyContent:"flex-start",padding:0},children:(0,T.jsx)(a.Trans,{id:"Check the logs to see if there is an explanation about what went wrong, or try again later."})})]}),(0,T.jsx)(l.Z,{primary:!0,label:(0,T.jsx)(a.Trans,{id:"Download log files"}),onClick:function(){return N("logsKey")}})]}):"pending"===t.status?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(c.x1,{alignItems:"center",expand:!0,justifyContent:"center",children:[(R||B)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Z.Z,{value:R?(M-O)/M*100:0,variant:R?"determinate":"indeterminate"}),(0,T.jsx)(c.LZ,{})]}),R&&(0,T.jsx)(p.Z,{children:(0,T.jsx)(a.Trans,{id:"~{0} minutes.",values:{0:Math.round(O/60)}})}),B&&(0,T.jsx)(p.Z,{children:(0,T.jsx)(a.Trans,{id:"Should finish soon."})})]}),_&&(0,T.jsxs)(c.sg,{children:[(0,T.jsx)(c.x1,{justifyContent:"flex-end",noMargin:!0,children:(0,T.jsx)(p.Z,{noMargin:!0,children:(0,T.jsx)(a.Trans,{id:"Something wrong happened :("})})}),(0,T.jsx)(c.x1,{justifyContent:"flex-end",noMargin:!0,children:(0,T.jsx)(u.Z,{style:{justifyContent:"flex-end",padding:0},children:(0,T.jsx)(a.Trans,{id:"It looks like the build has timed out, please try again."})})})]})]}):"complete"===t.status?(0,T.jsxs)(m.ak,{noMargin:!0,expand:!0,children:[(0,T.jsxs)(m.ep,{expand:!0,justifyContent:"space-between",noMargin:!0,children:[(0,T.jsxs)(m.ep,{noMargin:!0,noColumnMargin:!0,children:[n&&!!t.s3Key&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(v.Z,{label:(0,T.jsx)(a.Trans,{id:"Publish this build on games.engine.spacexpanse.org"}),labelPosition:"left",toggled:V,onToggle:function(){H(V?null:t.id,r)},disabled:j}),(0,T.jsx)(c.LZ,{}),(0,T.jsx)(b.Z,{label:(0,T.jsx)(a.Trans,{id:"Copy build link"}),icon:(0,T.jsx)(C.Z,{}),onClick:U})]}),S.filter((function(e){return!!t[e.key]})).map((function(e){return(0,T.jsxs)(s.Fragment,{children:[(0,T.jsx)(l.Z,{primary:!0,label:r._(e.displayName),onClick:function(){return N(e.key)},icon:e.icon}),(0,T.jsx)(c.LZ,{})]},e.key)}))]}),(0,T.jsx)(k.Z,{label:(0,T.jsx)(a.Trans,{id:"Download log files"}),onClick:function(){return N("logsKey")}})]}),L&&L.completeDescription&&(0,T.jsx)(c.x1,{expand:!0,justifyContent:"flex-start",noMargin:!0,children:(0,T.jsx)(p.Z,{noMargin:!0,size:"body2",children:L.completeDescription})})]}):(0,T.jsx)(c.x1,{children:(0,T.jsx)(a.Trans,{id:"Unknown status"})})}})}},74394:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15861),o=n(15671),i=n(43144),a=n(64687),s=n.n(a),l=n(10959),c=n(58336),u=18e5,d=function(){function e(){var t=this;(0,o.Z)(this,e),this.runningWatchers={},this.nextWatcherId=0,this._pollBuild=function(){var e=(0,r.Z)(s().mark((function e(n,r){var o,i,a,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.nextWatcherId.toString(),t.nextWatcherId++,t.runningWatchers[o]=!0,i=null;case 4:if(t.authenticatedUser){e.next=6;break}return e.abrupt("return");case 6:if(a=t.authenticatedUser,u=a.getAuthorizationHeader,d=a.firebaseUser){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,console.info("Checking progress of build ".concat(n,"...")),e.next=13,(0,l.Xr)(u,d.uid,n);case 13:i=e.sent,t.onBuildUpdated&&t.onBuildUpdated(i),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.warn("Error while watching build progress:",e.t0);case 20:return e.next=22,(0,c.g)(r);case 22:if(t.runningWatchers[o]){e.next=25;break}return console.info("Stopping watch of build ".concat(n,".")),e.abrupt("return");case 25:if(i&&"pending"===i.status){e.next=4;break}case 26:console.info("Watch of build ".concat(n," finished."));case 27:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t,n){return e.apply(this,arguments)}}()}return(0,i.Z)(e,[{key:"start",value:function(e){var t=this,n=e.authenticatedUser,r=e.builds,o=e.onBuildUpdated;this.stop(),this.authenticatedUser=n,this.onBuildUpdated=o,r.forEach((function(e){"pending"===e.status&&((!e.createdAt||e.createdAt<Date.now()-u)&&(!e.updatedAt||e.updatedAt<Date.now()-u)?console.info("Ignoring a build for polling as it's too old and still pending",e):t._pollBuild(e.id,r.length>1?5e3:1500))}))}},{key:"stop",value:function(){this.runningWatchers={}}}]),e}()},60149:function(e,t,n){"use strict";n.d(t,{Z:function(){return te}});var r=n(1413),o=n(15671),i=n(43144),a=n(60136),s=n(29388),l=n(28381),c=n(29439),u=n(36600),d=n(40243),p=n(86578),h=n(78081),f=n(61325),g=n(75383),m=n(81683),x=n(90242),v=n(15861),b=n(64687),j=n.n(b),C=n(20968),y=n(96522),Z=n(51375),k=n(86278),w=n(22537),T=n(51598),E=n(90264),S=n(24910),P=n(54168),I=n(29277),D=n(30141),A=n(1589),L=n(65111),M=n(87284),F=n(59362),O=n(46448),R=n(10959),B=n(2066),_=n(66789),N=n(61804),U=n(51224),H=n(50583),V=n(29343),W={icon:{height:16,width:16,marginRight:4},buildButtonIcon:{height:16,width:16,opacity:.6},openForFeedbackIndicator:{height:4,width:4,borderRadius:4},cardContent:{flex:1},textField:{width:"70%"},circularProgress:{height:20,width:20}},z=function(e){switch(e){case"cordova-build":return(0,V.jsx)(u.Trans,{id:"Android Build"});case"electron-build":return(0,V.jsx)(u.Trans,{id:"Windows/macOS/Linux Build"});case"web-build":return(0,V.jsx)(u.Trans,{id:"Web Build"});default:return e}},G=function(e){switch(e){case"cordova-build":return(0,V.jsx)(U.Z,{style:W.icon});case"electron-build":return(0,V.jsx)(H.Z,{style:W.icon});default:return(0,V.jsx)(Z.Z,{style:W.icon})}},Y=function(e){var t=e.build;return(0,V.jsxs)(d.x1,{alignItems:"end",children:[(0,V.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[G(t.type),(0,V.jsx)(k.Z,{noMargin:!0,children:(0,V.jsx)(u.Trans,{id:"{0}",values:{0:z(t.type)}})})]}),(0,V.jsx)(d.LZ,{}),(0,V.jsx)(A.Z,{children:(0,V.jsx)(u.Trans,{id:"{0}",values:{0:(0,C.Z)(t.updatedAt,"yyyy-MM-dd HH:mm:ss")}})})]})},q="yyyy-MM-dd-HH-mm-ss",X=function(e){var t=e.build,n=e.game,o=e.onGameUpdated,i=e.gameUpdating,a=e.setGameUpdating,s=e.onBuildUpdated,h=e.onBuildDeleted,g=e.authenticatedUser,m=g.getAuthorizationHeader,x=g.profile,b="".concat(n.gameName.toLowerCase().replace(/ /g,"-").slice(0,30),"-").concat((0,C.Z)(t.updatedAt,q)),Z=t.name?t.name:b,U=n.publicWebBuildId===t.id,H=t&&"web-build"!==t.type&&(0,y.Z)(Date.now(),t.updatedAt)>6,z=l.useContext(S.Z),G=l.useRef(null),X="small"===(0,O.L)(),J=l.useState(!1),K=(0,c.Z)(J,2),Q=K[0],$=K[1],ee=l.useState(!1),te=(0,c.Z)(ee,2),ne=te[0],re=te[1],oe=l.useState(Z),ie=(0,c.Z)(oe,2),ae=ie[0],se=ie[1],le=function(){navigator.clipboard.writeText(t.id),$(!0)},ce=function(){re(!0),G.current&&G.current.focus()},ue=function(){var e=(0,v.Z)(j().mark((function e(n){var o,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(o=ae.trim()){e.next=7;break}se(t.name||""),e.next=26;break;case 7:if(o!==Z){e.next=11;break}se(ae.trim()),e.next=26;break;case 11:return e.prev=11,a(!0),e.next=15,(0,R.QX)(m,x.id,t.id,{name:ae});case 15:i=e.sent,s((0,r.Z)((0,r.Z)({},t),{},{name:i.name})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),se(t.name||""),(0,D.gR)({message:n._({id:"Could not update the build name. Verify your internet connection or try again later."}),rawError:e.t0,errorId:"build-name-update-error"});case 23:return e.prev=23,a(!1),e.finish(23);case 26:re(!1);case 27:case"end":return e.stop()}}),e,null,[[11,19,23,26]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,v.Z)(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(B.ZP.showConfirmDialog("You are about to delete this build. Continue?")){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,a(!0),e.next=9,(0,R.c8)(m,x.id,t.id);case 9:a(!1),h(t),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),(0,D.gR)({message:n._({id:"Could not delete the build. Verify your internet connection or try again later."}),rawError:e.t0,errorId:"build-delete-error"}),a(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsx)(u.I18n,{children:function(e){var s=e.i18n;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(M.Z,{isHighlighted:U,cardCornerAction:(0,V.jsx)(P.Z,{element:(0,V.jsx)(T.Z,{size:"small",disabled:i,children:(0,V.jsx)(N.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Edit build name"}),click:ce},{type:"separator"},{label:e._({id:"Delete build"}),click:function(){return de(e)}}]}}),header:(0,V.jsxs)(d.x1,{noMargin:!0,alignItems:"start",justifyContent:"space-between",children:[!X&&(0,V.jsx)(Y,{build:t}),(0,V.jsx)(d.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,V.jsx)(d.x1,{noMargin:!0,justifyContent:"end",children:U?(0,V.jsx)(k.Z,{size:"body2",children:(0,V.jsx)(u.Trans,{id:"Current build online"})}):n.acceptsBuildComments&&"web-build"===t.type&&(0,V.jsxs)(f.pJ,{alignItems:"center",noMargin:!0,children:[(0,V.jsx)("div",{style:(0,r.Z)((0,r.Z)({},W.openForFeedbackIndicator),{},{backgroundColor:z.message.valid})}),(0,V.jsx)(k.Z,{size:"body2",children:(0,V.jsx)(u.Trans,{id:"Build open for feedbacks"})})]})})})]}),children:(0,V.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[X&&(0,V.jsx)(Y,{build:t}),(0,V.jsx)(d.LZ,{}),(0,V.jsx)(d.x1,{noMargin:!0,children:ne?(0,V.jsxs)(d.x1,{noMargin:!0,expand:!0,children:[(0,V.jsx)(I.ZP,{ref:G,style:W.textField,value:ae,margin:"none",onChange:function(e,t){return se(t)},onBlur:function(){ue(s)},hintText:Z,disabled:i,onKeyPress:function(e){(0,L.ph)(e)&&G.current&&G.current.blur()},onKeyDown:function(e){(0,L.W$)(e)&&(e.stopPropagation(),re(!1),se(Z))},maxLength:50}),i&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(d.LZ,{}),(0,V.jsx)(_.Z,{style:W.circularProgress})]})]}):(0,V.jsx)(d.x1,{noMargin:!0,alignItems:"baseline",children:(0,V.jsx)(k.Z,{noMargin:!0,children:Z})})}),(0,V.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,V.jsx)(A.Z,{style:{textAlign:"left"},children:t.id}),(0,V.jsx)(d.LZ,{}),(0,V.jsx)(T.Z,{size:"small",onClick:le,children:(0,V.jsx)(E.Z,{style:W.buildButtonIcon})})]}),(0,V.jsx)(d.hS,{}),(0,V.jsxs)(d.x1,{expand:!0,noMargin:!0,justifyContent:"space-between",children:[!H&&(0,V.jsx)(F.Z,{build:t,game:n,onGameUpdated:o,gameUpdating:i,setGameUpdating:a,onCopyToClipboard:function(){return $(!0)}}),H&&(0,V.jsx)(p.Z,{children:(0,V.jsx)(u.Trans,{id:"This build is old and the generated games can't be downloaded anymore."})})]})]})}),(0,V.jsx)(w.Z,{visible:Q,hide:function(){return $(!1)},message:(0,V.jsx)(u.Trans,{id:"Copied to clipboard!"})})]})}})},J={emptyMessageStyle:{textAlign:"left"}},K=[{key:"all-build",value:"all-build",label:{id:"All builds"}},{key:"web-build",value:"web-build",label:{id:"Web builds"}},{key:"cordova-build",value:"cordova-build",label:{id:"Mobile builds"}},{key:"electron-build",value:"electron-build",label:{id:"Desktop builds"}}],Q={"web-build":(0,V.jsx)(u.Trans,{id:"You don't have any web builds for this game."}),"cordova-build":(0,V.jsx)(u.Trans,{id:"You don't have any mobile builds for this game."}),"electron-build":(0,V.jsx)(u.Trans,{id:"You don't have any desktop builds for this game."}),"all-build":(0,V.jsx)(u.Trans,{id:"You don't have any builds for this game."})},$=function(e){var t=e.builds,n=e.authenticatedUser,r=e.error,o=e.loadBuilds,i=e.game,a=e.onGameUpdated,s=e.onBuildUpdated,v=e.onBuildDeleted,b=l.useState(!1),j=(0,c.Z)(b,2),C=j[0],y=j[1],Z=l.useState("all-build"),k=(0,c.Z)(Z,2),w=k[0],T=k[1],E=function(e,t){if(e)switch(t){case"web-build":return e.filter((function(e){return"web-build"===e.type}));case"cordova-build":return e.filter((function(e){return"cordova-build"===e.type}));case"electron-build":return e.filter((function(e){return"electron-build"===e.type}));default:return e}}(t,w);return(0,V.jsxs)(d.sg,{noMargin:!0,expand:!0,children:[(0,V.jsxs)(f.ep,{justifyContent:"space-between",children:[(0,V.jsx)(d.sg,{noMargin:!0,children:(0,V.jsx)(p.Z,{messageStyle:J.emptyMessageStyle,children:(0,V.jsx)(u.Trans,{id:"This is the list of builds that you've done for this game. <0/>Note that builds for mobile and desktop are available for 7 days, after which they are removed.",components:[(0,V.jsx)("br",{})]})})}),(0,V.jsx)(d.sg,{noMargin:!0,children:(0,V.jsx)(m.Z,{floatingLabelText:(0,V.jsx)(u.Trans,{id:"Show"}),value:w,onChange:function(e,t,n){T(n)},children:K.map((function(e){var t=e.key,n=e.value,r=e.label;return(0,V.jsx)(x.Z,{value:n,label:r},t)}))})})]}),(0,V.jsxs)(d.x1,{children:[!n.authenticated&&(0,V.jsx)(p.Z,{children:(0,V.jsx)(u.Trans,{id:"You need to login first to see your builds."})}),n.authenticated&&!E&&!r&&(0,V.jsx)(h.Z,{}),n.authenticated&&r&&(0,V.jsx)(g.Z,{onRetry:o,children:r.message}),n.authenticated&&E&&0===E.length&&(0,V.jsx)(p.Z,{children:Q[w]}),n.authenticated&&E&&0!==E.length&&(0,V.jsx)(f.ak,{expand:!0,noMargin:!0,children:E.map((function(e){return(0,V.jsx)(X,{build:e,game:i,onGameUpdated:a,gameUpdating:C,setGameUpdating:y,onBuildUpdated:s,onBuildDeleted:v,authenticatedUser:n},e.id)}))})]})]})},ee=n(74394),te=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={builds:null,error:null},e.buildsWatcher=new ee.Z,e._startBuildsWatcher=function(){e.state.builds&&e.buildsWatcher.start({authenticatedUser:e.props.authenticatedUser,builds:e.state.builds,onBuildUpdated:function(t){e.state.builds&&e.setState({builds:e.state.builds.map((function(e){return t.id===e.id?t:e}))})}})},e._refreshBuilds=function(){var t=e.props.authenticatedUser,n=t.getAuthorizationHeader,r=t.firebaseUser;if(r){var o=e.props.game.id;e.setState({builds:null,error:null}),(0,R.BY)(n,r.uid,o).then((function(t){e.setState({builds:t},(function(){e._startBuildsWatcher(),e.props.onBuildsUpdated&&e.props.onBuildsUpdated()}))}),(function(){e.setState({error:new Error("There was an issue getting the game builds, verify your internet connection or try again later.")})}))}},e._onBuildUpdated=function(t){e.setState((function(e){if(e.builds)return(0,r.Z)((0,r.Z)({},e),{},{builds:e.builds.map((function(e){return t.id===e.id?t:e}))})}))},e._onBuildDeleted=function(t){e.setState((function(e){if(e.builds)return(0,r.Z)((0,r.Z)({},e),{},{builds:e.builds.filter((function(e){return t.id!==e.id}))})}))},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this._refreshBuilds()}},{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){return(0,V.jsx)($,{builds:this.state.builds,authenticatedUser:this.props.authenticatedUser,error:this.state.error,loadBuilds:this._refreshBuilds,game:this.props.game,onGameUpdated:this.props.onGameUpdated,onBuildUpdated:this._onBuildUpdated,onBuildDeleted:this._onBuildDeleted})}}]),n}(l.Component)},9972:function(e,t,n){"use strict";n.d(t,{Z:function(){return fe}});var r=n(93433),o=n(15861),i=n(29439),a=n(64687),s=n.n(a),l=n(36600),c=n(28381),u=n(1773),d=n(4076),p=n(67835),h=n(60149),f=n(38501),g=n(29343),m=function(e){var t=e.authenticatedUser,n=e.game,r=e.open,o=e.onClose,i=e.onGameUpdated,a=(0,f.Z)();return r?(0,g.jsx)(u.ZP,{title:(0,g.jsx)(l.Trans,{id:"{0} builds",values:{0:n.gameName}}),actions:[(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Close"}),primary:!1,onClick:o},"close")],secondaryActions:[(0,g.jsx)(d.Z,{helpPagePath:"/publishing"},"help")],onRequestClose:o,open:r,children:(0,g.jsx)(h.Z,{onBuildsUpdated:a,authenticatedUser:t,game:n,onGameUpdated:i})}):null},x=n(71106),v=n(1413),b=n(15671),j=n(43144),C=n(60136),y=n(29388),Z=n(32484),k=n(67724),w=n(40243),T=n(30141),E=n(54458),S=n(68151),P=n(78081),I=n(86278),D=n(28641),A=function(e){var t=e.subscription,n=e.currentUsage,r=e.onChangeSubscription,o=c.useContext(D.o).openSubscriptionDialog;if(!n)return(0,g.jsx)(P.Z,{});var i=(0,S.e_)(t),a=t&&!(0,S.e_)(t);return(0,g.jsxs)(w.sg,{noMargin:!0,children:[(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"You have {0} remaining builds for today (out of {1}).",values:{0:Math.max(n.max-n.current,0),1:n.max}})}),i&&n.limitReached&&(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"Need more power? You can upgrade to a new plan to increase the limit!"})}),i&&n.limitReached&&(0,g.jsx)(w.x1,{justifyContent:"center",alignItems:"center",children:(0,g.jsx)(Z.Z,{label:(0,g.jsx)(l.Trans,{id:"Upgrade my account"}),onClick:function(){r(),o({reason:"Build limit reached"})},primary:!0})}),a&&(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"You don't have a subscription. Get one to increase the limits!"})}),a&&(0,g.jsx)(w.x1,{justifyContent:"center",alignItems:"center",children:(0,g.jsx)(Z.Z,{label:(0,g.jsx)(l.Trans,{id:"Get a subscription"}),onClick:function(){r(),o({reason:"Build limit reached"})},primary:!0})})]})},L=n(32921),M=n(74394),F=n(10637),O=n(73211),R=n(40934),B=n(16413),_=n(59362),N=n(86578),U=n(6403),H=n(64480),V=n(66789),W=n(17358),z=n(53949),G=n(24910),Y={flex:1},q=(0,W.Z)((function(e){return{text:{fill:e.palette.secondary.contrastText},completed:{fill:e.palette.secondary.main},active:{fill:e.palette.secondary.main}}})),X=function(e){var t=q();return(0,g.jsx)(R.Z,(0,v.Z)((0,v.Z)({},e),{},{StepIconComponent:function(e){return(0,g.jsx)(z.Z,(0,v.Z)((0,v.Z)({},e),{},{classes:t}))},children:e.children}))},J=function(e){var t=e.exportStep,n=e.build,r=e.stepMaxProgress,o=e.stepCurrentProgress,i=e.errored,a=e.hasBuildStep,s=e.showSeeAllMyBuildsExplanation,u=c.useContext(G.Z),d=c.useCallback((function(){return"register"===t||"export"===t||"resources-download"===t?0:"compress"===t||"upload"===t?1:"waiting-for-build"===t||"build"===t?2:"done"===t?a?2:1:-1}),[t,a]);return(0,g.jsxs)(F.Z,{activeStep:d(),orientation:"vertical",style:(0,v.Z)((0,v.Z)({},Y),{},{backgroundColor:u.paper.backgroundColor.medium}),children:[(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(X,{children:(0,g.jsx)(l.Trans,{id:"Game export"})}),(0,g.jsx)(B.Z,{children:i?(0,g.jsxs)(U.Z,{kind:"error",children:[(0,g.jsx)(l.Trans,{id:"Can't properly export the game."})," ",(0,g.jsx)(l.Trans,{id:"Please check your internet connection or try again later."})]}):"resources-download"===t?(0,g.jsxs)(w.sg,{expand:!0,noMargin:!0,children:[(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"Downloading game resources..."})}),(0,g.jsx)(w.x1,{expand:!0,children:(0,g.jsx)(H.Z,{value:r>0?o/r*100:0,variant:"determinate"})})]}):(0,g.jsxs)(w.sg,{expand:!0,noMargin:!0,children:[(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"Export in progress..."})}),(0,g.jsx)(w.x1,{expand:!0,children:(0,g.jsx)(H.Z,{})})]})})]}),a&&(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(X,{children:(0,g.jsx)(l.Trans,{id:"Upload to build service"})}),(0,g.jsx)(B.Z,{children:i?(0,g.jsxs)(U.Z,{kind:"error",children:[(0,g.jsx)(l.Trans,{id:"Can't upload your game to the build service."})," ",(0,g.jsx)(l.Trans,{id:"Please check your internet connection or try again later."})]}):"compress"===t?(0,g.jsxs)(w.x1,{alignItems:"center",children:[(0,g.jsx)(V.Z,{size:20}),(0,g.jsx)(w.LZ,{}),(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"Compressing before upload..."})})]}):(0,g.jsx)(w.x1,{alignItems:"center",expand:!0,children:(0,g.jsx)(H.Z,{value:r>0?o/r*100:0,variant:"determinate"})})})]}),a&&(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(X,{children:(0,g.jsx)(l.Trans,{id:"Build and download"})}),(0,g.jsxs)(B.Z,{children:[i&&(0,g.jsx)(U.Z,{kind:"error",children:(0,g.jsx)(l.Trans,{id:"Build could not start or errored. Please check your internet connection or try again later."})}),!n&&!i&&(0,g.jsx)(I.Z,{children:(0,g.jsx)(l.Trans,{id:"Build is starting..."})}),n&&(0,g.jsx)(_.Z,{build:n}),s&&(0,g.jsx)(N.Z,{children:(0,g.jsx)(l.Trans,{id:"If you close this window while the build is being done, you can see its progress and download the game later by clicking on See All My Builds below."})})]})]}),!a&&(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(X,{children:(0,g.jsx)(l.Trans,{id:"Done"})}),(0,g.jsx)(B.Z,{})]})]})},K=n(16999),Q=n(40790),$=n(24830),ee=n(2861),te=function(e){(0,C.Z)(n,e);var t=(0,y.Z)(n);function n(e){var r;return(0,b.Z)(this,n),(r=t.call(this,e)).state={exportStep:"",build:null,compressionOutput:null,stepCurrentProgress:0,stepMaxProgress:0,doneFooterOpen:!1,errored:!1,exportState:r.props.exportPipeline.getInitialExportState(r.props.project)},r.buildsWatcher=new M.Z,r._setupAchievementHook=function(){r.props.exportPipeline.name.includes("web")?r.launchWholeExport=(0,ee.zi)(r.props.authenticatedUser,ee.$A,r._launchWholeExport):r.launchWholeExport=r._launchWholeExport},r._updateStepProgress=function(e,t){return r.setState({stepCurrentProgress:e,stepMaxProgress:t})},r._startBuildWatch=function(e){r.state.build&&r.buildsWatcher.start({authenticatedUser:e,builds:[r.state.build],onBuildUpdated:function(t){r.setState({build:t}),"pending"!==t.status&&e.onRefreshUserProfile()}})},r.tryUpdateAuthors=(0,o.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.props.authenticatedUser.profile)){e.next=11;break}return n=(0,K.WO)(r.props.project.getAuthorIds().toJSArray()),e.prev=3,e.next=6,(0,K.wC)(r.props.authenticatedUser.getAuthorizationHeader,t.id,r.props.project.getProjectUuid(),{author:n});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),r.registerGameIfNot=(0,o.Z)(s().mark((function e(){var t,n,o,i,a,l,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.authenticatedUser.profile,n=r.props.authenticatedUser.getAuthorizationHeader,o=r.props.project.getProjectUuid(),!t){e.next=21;break}return i=t.id,e.prev=5,e.next=8,(0,K.cF)(n,i,o);case 8:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(5),404!==e.t0.response.status){e.next=21;break}return a=r.props.project.getAuthor()||"Unspecified publisher",l=r.props.project.getTemplateSlug(),c=r.props.project.getName()||"Untitled game",e.next=18,(0,K.r$)(n,i,{gameId:o,authorName:a,gameName:c,templateSlug:l});case 18:u=e.sent,r.tryUpdateAuthors(),r.props.onGameUpdated(u);case 21:case"end":return e.stop()}}),e,null,[[5,10]])}))),r._launchWholeExport=function(){var e=(0,o.Z)(s().mark((function e(t){var n,o,i,a,l,c,u,d,p,h,f,g,m,x,v,b,j,C;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,o=n.project,i=n.exportPipeline,a=n.authenticatedUser,(0,k.nU)(i.name),(0,L.vv)(t,(0,L.nu)(t,o))){e.next=4;break}return e.abrupt("return");case 4:return l=function(){switch(r.state.exportStep){case"export":return t._({id:"Error while exporting the game."});case"resources-download":return t._({id:"Error while downloading the game resources. Check your internet connection and that all resources of the game are valid in the Resources editor."});case"compress":return t._({id:"Error while compressing the game."});case"upload":return t._({id:"Error while uploading the game. Check your internet connection or try again later."});case"waiting-for-build":return t._({id:"Error while building the game. Check the logs of the build for more details."});case"build":return t._({id:"Error while building of the game. Check the logs of the build for more details."});default:return t._({id:"Error while building the game. Try again later. Your internet connection may be slow or one of your resources may be corrupted."})}},c=function(e){r.state.errored||(r.setState({errored:!0}),(0,T.gR)({message:l()+(e.message?"\n\n".concat(e.message):""),rawError:{exportStep:r.state.exportStep,rawError:e},errorId:"export-error"}))},u=function(e){return r.setState({exportStep:e})},e.prev=7,u("register"),e.next=11,r.registerGameIfNot();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.warn("Error while registering the game."),403===e.t0.response.status&&(e.t0.response.data&&"game-creation/existing-game"===e.t0.response.data.code?(0,T.gR)({message:[t._({id:"A game with this ID already exists and you are not the owner."}),t._({id:"A link or file will be created but the game will not be registered."})].join("\n\n"),rawError:e.t0,errorId:"existing-game-register"}):e.t0.response.data&&"game-creation/too-many-games"===e.t0.response.data.code&&(0,T.gR)({message:[t._({id:"You have reached the maximum number of games you can register! You can unregister games in your Games Dashboard."}),t._({id:"A link or file will be created but the game will not be registered."})].join("\n\n"),rawError:e.t0,errorId:"too-many-games-register"}));case 17:return e.prev=17,d={project:o,updateStepProgress:r._updateStepProgress,exportState:r.state.exportState},u("export"),r.setState({stepCurrentProgress:0,stepMaxProgress:0,errored:!1,build:null}),e.next=23,i.prepareExporter(d);case 23:return p=e.sent,h=a.profile,f=h?{username:h.username||"",id:h.id}:void 0,e.next=28,i.launchExport(d,p,f);case 28:return g=e.sent,u("resources-download"),e.next=32,i.launchResourcesDownload(d,g);case 32:return m=e.sent,u("compress"),e.next=36,i.launchCompression(d,m);case 36:if(x=e.sent,v=i.launchUpload,b=i.launchOnlineBuild,!v||!b){e.next=49;break}return u("upload"),e.next=42,v(d,x);case 42:return j=e.sent,u("waiting-for-build"),e.next=46,b(r.state.exportState,a,j,o.getProjectUuid(),{gameName:o.getName(),gameVersion:o.getVersion()});case 46:C=e.sent,u("build"),r.setState({build:C},(function(){r._startBuildWatch(a)}));case 49:u("done"),r.setState({compressionOutput:x,doneFooterOpen:!0}),e.next=57;break;case 53:e.prev=53,e.t1=e.catch(17),console.error("An error happened during export:",e.t1),c(e.t1);case 57:case"end":return e.stop()}}),e,null,[[7,13],[17,53]])})));return function(t){return e.apply(this,arguments)}}(),r._closeDoneFooter=function(){return r.setState({doneFooterOpen:!1})},r._updateExportState=function(e){r.setState((function(t){return(0,v.Z)((0,v.Z)({},t),{},{exportState:e(t.exportState)})}))},r._setupAchievementHook(),r}return(0,j.Z)(n,[{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"componentDidUpdate",value:function(e,t){this._setupAchievementHook(),t.exportStep===this.state.exportStep&&t.errored===this.state.errored||this.props.setIsNavigationDisabled(this.props.exportPipeline.isNavigationDisabled(this.state.exportStep,this.state.errored))}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.compressionOutput,o=t.build,i=t.stepMaxProgress,a=t.stepCurrentProgress,s=t.errored,c=t.doneFooterOpen,u=t.exportState,d=this.props,p=d.project,h=d.authenticatedUser,f=d.exportPipeline,m=d.onSaveProject;if(!p)return null;var x=function(e){return e.limits&&f.onlineBuildType?e.limits.limits[f.onlineBuildType]:null},v=function(e){var t=x(e);return(!t||!t.limitReached)&&f.canLaunchBuild(u,s,n)};return(0,g.jsx)(l.I18n,{children:function(t){var d=t.i18n;return(0,g.jsxs)(w.sg,{noMargin:!0,children:[!!f.packageNameWarningType&&-1!==p.getPackageName().indexOf("com.example")&&(0,g.jsx)(w.x1,{children:(0,g.jsx)($.Z,{identifier:"project-should-have-unique-package-name",kind:"warning",children:d._("mobile"===f.packageNameWarningType?{id:"The package name begins with com.example, make sure you replace it with an unique one to be able to publish your game on app stores."}:{id:"The package name begins with com.example, make sure you replace it with an unique one, else installing your game might overwrite other games."})})}),(0,g.jsx)(w.x1,{children:f.renderHeader({project:p,exportState:u,updateExportState:e._updateExportState})}),(!f.onlineBuildType||h.authenticated)&&(0,g.jsx)(w.x1,{justifyContent:"center",children:(0,g.jsx)(Z.Z,{label:f.renderLaunchButtonLabel(),primary:!0,id:"launch-export-".concat(f.name,"-button"),onClick:function(){return e.launchWholeExport(d)},disabled:!v(h)})}),(0,g.jsx)(w.LZ,{}),!!f.onlineBuildType&&!h.authenticated&&(0,g.jsx)(E.Z,{onLogin:h.onLogin,onCreateAccount:h.onCreateAccount,message:(0,g.jsx)(l.Trans,{id:"Create an account or login first to publish your game."}),justifyContent:"center"}),h.authenticated&&(f.renderCustomStepsProgress?f.renderCustomStepsProgress({build:o,project:p,onSaveProject:m,errored:s,exportStep:n}):(0,g.jsx)(w.x1,{expand:!0,children:(0,g.jsx)(J,{exportStep:n,hasBuildStep:!!f.onlineBuildType,build:o,stepMaxProgress:i,stepCurrentProgress:a,errored:s})})),!!f.limitedBuilds&&h.authenticated&&(0,g.jsx)(A,{subscription:h.subscription,currentUsage:x(h),onChangeSubscription:e.props.onChangeSubscription}),c&&f.renderDoneFooter&&f.renderDoneFooter({compressionOutput:r,exportState:u,onClose:e._closeDoneFooter}),c&&(0,g.jsx)(w.x1,{justifyContent:"center",children:(0,g.jsx)(Q.C,{project:p,hideLoader:!0,suggestGameStatsEmail:!0})})]})}})}}]),n}(c.Component),ne=n(83297),re=n(28894),oe=n(61325),ie=n(46448),ae=function(){var e="small"===(0,ie.L)(),t=c.useContext(G.Z);return e?(0,g.jsx)(w.x1,{justifyContent:"center",children:(0,g.jsx)("span",{style:{width:"80%",borderBottomStyle:"solid",borderBottomWidth:1,borderColor:t.toolbar.separatorColor}})}):(0,g.jsx)(w.sg,{justifyContent:"center",noMargin:!0,children:(0,g.jsx)("span",{style:{height:"calc(100% - 30px)",borderLeftStyle:"solid",borderLeftWidth:1,borderColor:t.toolbar.separatorColor}})})},se=n(51375),le=n(72392),ce=n(51224),ue=n(50583),de={titleContainer:{display:"flex",flex:2,alignItems:"center",minHeight:"100px"},iconsContainer:{marginTop:10,marginBottom:10},icon:{height:48,width:48},contentContainer:{flex:5}},pe=function(e){var t=e.onlineWebExporter,n=e.setChosenExporterKey,r=e.setChosenExporterSection,o=e.project,i=e.onSaveProject,a=e.onChangeSubscription,s=e.authenticatedUser,c=e.isNavigationDisabled,u=e.setIsNavigationDisabled,d=e.onGameUpdated,h=e.showOnlineWebExporterOnly;return(0,g.jsxs)(oe.ep,{children:[(0,g.jsxs)(oe.ak,{alignItems:"center",expand:!0,children:[(0,g.jsx)("div",{style:de.titleContainer,children:(0,g.jsx)(w.x1,{children:(0,g.jsx)(I.Z,{size:"block-title",align:"center",children:(0,g.jsx)(l.Trans,{id:"Publish on games.engine.spacexpanse.org, SpeXEngine's game platform"})})})}),(0,g.jsx)(w.x1,{expand:!0,children:(0,g.jsx)(le.Z,{style:de.icon})}),(0,g.jsx)("div",{style:de.contentContainer,children:(0,g.jsx)(te,{exportPipeline:t.exportPipeline,project:o,onSaveProject:i,onChangeSubscription:a,authenticatedUser:s,setIsNavigationDisabled:u,onGameUpdated:d})})]}),h?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ae,{}),(0,g.jsxs)(oe.ak,{alignItems:"center",expand:!0,children:[(0,g.jsx)("div",{style:de.titleContainer,children:(0,g.jsx)(w.x1,{children:(0,g.jsx)(I.Z,{size:"block-title",align:"center",children:(0,g.jsx)(l.Trans,{id:"Export and publish on other platforms"})})})}),(0,g.jsx)(w.x1,{expand:!0,children:(0,g.jsxs)("div",{style:de.iconsContainer,children:[(0,g.jsx)(se.Z,{style:de.icon}),(0,g.jsx)(ue.Z,{style:de.icon}),(0,g.jsx)(ce.Z,{style:de.icon})]})}),(0,g.jsx)("div",{style:de.contentContainer,children:(0,g.jsxs)(w.sg,{alignItems:"center",children:[(0,g.jsx)(w.x1,{children:(0,g.jsx)(I.Z,{align:"center",children:(0,g.jsx)(l.Trans,{id:"Export your game to mobile, desktop and web platforms."})})}),(0,g.jsx)(Z.Z,{label:(0,g.jsx)(l.Trans,{id:"Export to other platforms"}),onClick:function(){r("automated"),n("webexport")},primary:!0,disabled:c}),(0,g.jsx)(w.LZ,{}),(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Build manually"}),primary:!0,onClick:function(){r("manual"),n("webexport")},disabled:c})]})})]})]})]})},he=n(36595),fe=function(e){var t=e.project,n=e.onSaveProject,a=e.onClose,h=e.allExportersRequireOnline,f=e.onChangeSubscription,v=e.automatedExporters,b=e.manualExporters,j=e.onlineWebExporter,C="small"===(0,ie.L)(),y=c.useState("home"),Z=(0,i.Z)(y,2),k=Z[0],w=Z[1],E=c.useState(!1),S=(0,i.Z)(E,2),P=S[0],I=S[1],D=c.useState(!1),A=(0,i.Z)(D,2),L=A[0],M=A[1],F=c.useState("onlinewebexport"),O=(0,i.Z)(F,2),R=O[0],B=O[1],_=c.useState(null),N=(0,i.Z)(_,2),H=N[0],V=N[1],W=c.useContext(x.ZP),z=W.profile,G=W.getAuthorizationHeader,Y=(0,ne.k)(),q=!!h&&!Y,X=c.useCallback((0,o.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z&&t){e.next=2;break}return e.abrupt("return");case 2:return n=z.id,e.prev=3,e.next=6,(0,K.cF)(G,n,t.getProjectUuid());case 6:r=e.sent,V(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Unable to load the game",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[t,G,z]);if(c.useEffect((function(){H||X()}),[X,H]),!t)return null;var J=[].concat((0,r.Z)(v||[]),(0,r.Z)(b||[]),[j]).find((function(e){return e.key===R}));if(!J||!J.exportPipeline)return null;var Q=!b&&!v;return(0,g.jsxs)(u.ZP,{id:"export-dialog",maxWidth:Q?"sm":"md",title:"automated"===k?(0,g.jsx)(l.Trans,{id:"Publish your game"}):"manual"===k?(0,g.jsx)(l.Trans,{id:"Build manually"}):null,actions:["home"!==k&&(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Back"}),primary:!1,onClick:function(){w("home"),B("onlinewebexport")},disabled:L},"back"),(0,g.jsx)(p.Z,{label:(0,g.jsx)(l.Trans,{id:"Close"}),primary:!1,onClick:a,disabled:L},"close")],secondaryActions:[(0,g.jsx)(d.Z,{helpPagePath:J.helpPage},"help"),"local-html5"===J.exportPipeline.name||"browser-html5"===J.exportPipeline.name?(0,g.jsx)(he.Z,{tutorialId:"export-to-itch",label:C?"Itch.io":(0,g.jsx)(l.Trans,{id:"How to export to Itch.io"})},"tutorial"):null,(0,g.jsx)(p.Z,{label:C?(0,g.jsx)(l.Trans,{id:"Builds"}):(0,g.jsx)(l.Trans,{id:"See this game builds"}),onClick:function(){H?I(!0):(0,T.T4)("Either this game is not registered or you are not its owner, so you can't see the builds or publish a build to the game page on games.engine.spacexpanse.org.")},disabled:L},"builds")],onRequestClose:a,open:!0,fixedContent:v&&b?"automated"===k?(0,g.jsx)(re.m,{value:R,onChange:B,options:v.map((function(e){return{value:e.key,label:e.tabName,disabled:L}}))}):"manual"===k?(0,g.jsx)(re.m,{value:R,onChange:B,options:b.map((function(e){return{value:e.key,label:e.tabName,disabled:L}}))}):null:null,children:[q?(0,g.jsx)(U.Z,{kind:"error",children:(0,g.jsx)(l.Trans,{id:"You must be online and have a proper internet connection to export your game."})}):"home"===k?(0,g.jsx)(pe,{onlineWebExporter:j,setChosenExporterKey:B,setChosenExporterSection:w,project:t,onSaveProject:n,onChangeSubscription:f,authenticatedUser:W,isNavigationDisabled:L,setIsNavigationDisabled:M,onGameUpdated:V,showOnlineWebExporterOnly:Q}):(0,g.jsx)(te,{exportPipeline:J.exportPipeline,project:t,onSaveProject:n,onChangeSubscription:f,authenticatedUser:W,setIsNavigationDisabled:M,onGameUpdated:V},R),H&&(0,g.jsx)(m,{open:P,onClose:function(){return I(!1)},authenticatedUser:W,game:H,onGameUpdated:V})]})}},82232:function(e,t,n){"use strict";n.d(t,{Eg:function(){return l},VU:function(){return c},if:function(){return s}});var r=n(36600),o=(n(28381),n(86278)),i=n(40243),a=n(29343),s=function(){return(0,a.jsx)(o.Z,{children:(0,a.jsx)(r.Trans,{id:"This will export your game as a Cordova project. Cordova is a technology that enables HTML5 games to be packaged for iOS and Android."})})},l=function(e){var t=e.renderGameButton;return(0,a.jsxs)(i.sg,{noMargin:!0,children:[(0,a.jsx)(o.Z,{children:(0,a.jsx)(r.Trans,{id:"You can now compile the game by yourself using Cordova command-line tool to iOS (XCode is required) or Android (Android SDK is required)."})}),(0,a.jsx)(i.x1,{justifyContent:"center",children:t()})]})},c={key:"cordovaexport",tabName:(0,a.jsx)(r.Trans,{id:"Mobile"}),name:(0,a.jsx)(r.Trans,{id:"iOS & Android (manual)"}),helpPage:"/publishing/android_and_ios_with_cordova"}},31502:function(e,t,n){"use strict";n.d(t,{Eg:function(){return l},c8:function(){return c},if:function(){return s}});var r=n(36600),o=(n(28381),n(86278)),i=n(40243),a=n(29343),s=function(){return(0,a.jsx)(o.Z,{children:(0,a.jsx)(r.Trans,{id:"This will export your game so that you can package it for Windows, macOS or Linux. You will need to install third-party tools (Node.js, Electron Builder) to package your game."})})},l=function(e){var t=e.renderGameButton;return(0,a.jsxs)(i.sg,{noMargin:!0,children:[(0,a.jsx)(o.Z,{children:(0,a.jsx)(r.Trans,{id:"The game was properly exported. You can now use Electron Builder (you need Node.js installed and to use the command-line on your computer to run it) to create an executable."})}),(0,a.jsx)(i.x1,{justifyContent:"center",children:t()})]})},c={key:"electronexport",tabName:(0,a.jsx)(r.Trans,{id:"Desktop"}),name:(0,a.jsx)(r.Trans,{id:"Windows/macOS/Linux (manual)"}),helpPage:"/publishing/windows-macos-linux-with-electron"}},30400:function(e,t,n){"use strict";n.d(t,{Eg:function(){return p},if:function(){return d},xu:function(){return h}});var r=n(36600),o=(n(28381),n(86278)),i=n(40243),a=n(67835),s=n(39949),l=n(2066),c=n(61325),u=n(29343),d=function(){return(0,u.jsx)(o.Z,{children:(0,u.jsx)(r.Trans,{id:"Prepare your game for Facebook Instant Games so that it can be play on Facebook Messenger. SpeXEngine will create a compressed file that you can upload on your Facebook Developer account."})})},p=function(e){var t=e.renderGameButton;return(0,u.jsxs)(i.sg,{noMargin:!0,children:[(0,u.jsx)(o.Z,{children:(0,u.jsx)(r.Trans,{id:"You can now create a game on Facebook Instant Games, if not already done, and upload the generated archive."})}),(0,u.jsxs)(c.ep,{justifyContent:"center",children:[t(),(0,u.jsx)(a.Z,{label:(0,u.jsx)(r.Trans,{id:"Learn more about Instant Games publication"}),primary:!0,onClick:function(){l.ZP.openExternalURL((0,s.vA)("/publishing/publishing-to-facebook-instant-games"))}})]})]})},h={key:"facebookinstantgamesexport",tabName:(0,u.jsx)(r.Trans,{id:"Instant Games"}),name:(0,u.jsx)(r.Trans,{id:"Facebook Instant Games"}),helpPage:"/publishing/publishing-to-facebook-instant-games"}},23624:function(e,t,n){"use strict";n.d(t,{Eg:function(){return y},if:function(){return C},BN:function(){return Z}});var r=n(36600),o=n(28381),i=n(86278),a=n(39949),s=n(2066),l=n(67835),c=n(40243),u=n(6403),d=n(1413),p=n(78118),h=n(29343),f=o.memo((function(e){return(0,h.jsx)(p.Z,(0,d.Z)((0,d.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M5.06 3C4.63 3 4.22 3.14 3.84 3.42C3.46 3.7 3.24 4.06 3.14 4.5L2.11 8.91C1.86 10 2.06 10.92 2.69 11.73C2.81 11.85 2.93 11.97 3.04 12.07C3.63 12.64 4.28 13 5.22 13C6.16 13 6.91 12.59 7.47 12.05C8.1 12.67 8.86 13 9.8 13C10.64 13 11.44 12.63 12 12.07C12.68 12.7 13.45 13 14.3 13C15.17 13 15.91 12.67 16.54 12.05C17.11 12.62 17.86 13 18.81 13C19.76 13 20.43 12.65 21 12.06C21.09 11.97 21.18 11.87 21.28 11.77C21.94 10.95 22.14 10 21.89 8.91L20.86 4.5C20.73 4.06 20.5 3.7 20.13 3.42C19.77 3.14 19.38 3 18.94 3M18.89 4.97L19.97 9.38C20.06 9.81 19.97 10.2 19.69 10.55C19.44 10.86 19.13 11 18.75 11C18.44 11 18.17 10.9 17.95 10.66C17.73 10.43 17.61 10.16 17.58 9.84L16.97 5M5.06 5H7.03L6.42 9.84C6.3 10.63 5.91 11 5.25 11C4.84 11 4.53 10.86 4.31 10.55C4.03 10.2 3.94 9.81 4.03 9.38M9.05 5H11V9.7C11 10.05 10.89 10.35 10.64 10.62C10.39 10.88 10.08 11 9.7 11C9.36 11 9.07 10.88 8.84 10.59C8.61 10.3 8.5 10 8.5 9.66V9.5M13 5H14.95L15.5 9.5C15.58 9.92 15.5 10.27 15.21 10.57C14.95 10.87 14.61 11 14.2 11C13.89 11 13.61 10.88 13.36 10.62C13.11 10.35 13 10.05 13 9.7M3 14.03V19C3 20.11 3.89 21 5 21C9.67 21 14.33 21 19 21C20.1 21 21 20.11 21 19V14.05C20.45 14.63 19.75 14.96 19 15C18 15.03 17.25 14.74 16.54 14.05C15.94 14.65 15.14 15 14.3 15C13.4 15 12.6 14.64 12 14.07C11.43 14.64 10.65 15 9.78 15C8.87 15 8.07 14.65 7.47 14.05C6.89 14.64 6.1 15 5.23 15C4.33 15 3.66 14.65 3 14.03Z"})}))})),g=o.memo((function(e){return(0,h.jsx)(p.Z,(0,d.Z)((0,d.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M7,2H17L13.5,9H17L10,22V14H7V2M9,4V12H12V14.66L14,11H10.24L13.76,4H9Z"})}))})),m=o.memo((function(e){return(0,h.jsx)(p.Z,(0,d.Z)((0,d.Z)({},e),{},{style:(0,d.Z)({transform:"rotate(90deg)"},e.style),children:(0,h.jsx)("path",{d:"M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2M12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4M12 5C15.87 5 19 8.13 19 12C19 15.87 15.87 19 12 19V5Z"})}))})),x=o.memo((function(e){return(0,h.jsx)(p.Z,(0,d.Z)((0,d.Z)({},e),{},{children:(0,h.jsx)("path",{fill:"currentColor",d:"M1.5,2.09C2.4,3 3.87,3.73 5.69,4.25C7.41,2.84 9.61,2 12,2C14.39,2 16.59,2.84 18.31,4.25C20.13,3.73 21.6,3 22.5,2.09C22.47,3.72 21.65,5.21 20.28,6.4C21.37,8 22,9.92 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12C2,9.92 2.63,8 3.72,6.4C2.35,5.21 1.53,3.72 1.5,2.09M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M10.5,10C10.5,10.8 9.8,11.5 9,11.5C8.2,11.5 7.5,10.8 7.5,10V8.5L10.5,10M16.5,10C16.5,10.8 15.8,11.5 15,11.5C14.2,11.5 13.5,10.8 13.5,10L16.5,8.5V10M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"})}))})),v=o.memo((function(e){return(0,h.jsx)(p.Z,(0,d.Z)((0,d.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M20,12H4V11H6L7,6H12L13,11H20V12M13.22,7L13.62,9H22V7H13.22M22,16A3,3 0 0,1 19,19H5A3,3 0 0,1 2,16A3,3 0 0,1 5,13H19A3,3 0 0,1 22,16M6,16A1,1 0 0,0 5,15A1,1 0 0,0 4,16A1,1 0 0,0 5,17A1,1 0 0,0 6,16M13,16A1,1 0 0,0 12,15A1,1 0 0,0 11,16A1,1 0 0,0 12,17A1,1 0 0,0 13,16M20,16A1,1 0 0,0 19,15A1,1 0 0,0 18,16A1,1 0 0,0 19,17A1,1 0 0,0 20,16Z"})}))})),b=n(46448),j=n(95644),C=function(){var e=function(e){var t="small"===e;return{height:t?30:48,width:t?30:48,margin:10}}((0,b.L)());return(0,h.jsxs)(c.sg,{noMargin:!0,children:[(0,h.jsx)(j.Z,{tutorialId:"export-to-itch"}),(0,h.jsx)(c.x1,{children:(0,h.jsx)(i.Z,{children:(0,h.jsx)(r.Trans,{id:"This will export your game to a folder. You can then upload it on a website/game hosting service and share it on marketplaces and gaming portals like CrazyGames, Poki, Game Jolt, itch.io, Newgrounds..."})})}),(0,h.jsxs)(c.x1,{justifyContent:"center",children:[(0,h.jsx)(f,{color:"secondary",style:e}),(0,h.jsx)(g,{color:"secondary",style:e}),(0,h.jsx)(m,{color:"secondary",style:e}),(0,h.jsx)(x,{color:"secondary",style:e}),(0,h.jsx)(v,{color:"secondary",style:e})]})]})},y=function(e){var t=e.renderGameButton;return(0,h.jsxs)(c.sg,{noMargin:!0,children:[(0,h.jsx)(i.Z,{children:(0,h.jsx)(r.Trans,{id:"You can now upload the game to a web hosting to play to the game."})}),(0,h.jsx)(u.Z,{kind:"warning",children:(0,h.jsx)(r.Trans,{id:"Your game won't work if you open index.html on your computer. You must upload it to a web hosting (Kongregate, Itch.io, etc...) or a web server to run it."})}),(0,h.jsx)(c.LZ,{}),t(),(0,h.jsx)(c.LZ,{}),(0,h.jsx)(l.Z,{fullWidth:!0,primary:!0,onClick:function(){return s.ZP.openExternalURL((0,a.vA)("/publishing/publishing-to-gamejolt-store"))},label:(0,h.jsx)(r.Trans,{id:"Publish your game on Game Jolt"}),leftIcon:(0,h.jsx)(g,{})}),(0,h.jsx)(l.Z,{fullWidth:!0,primary:!0,onClick:function(){return s.ZP.openExternalURL("https://engine.spacexpanse.org/page/crazy-games")},label:(0,h.jsx)(r.Trans,{id:"Publish your game on CrazyGames.com"}),leftIcon:(0,h.jsx)(x,{})}),(0,h.jsx)(l.Z,{fullWidth:!0,primary:!0,onClick:function(){return s.ZP.openExternalURL((0,a.vA)("/publishing/publishing-to-kongregate-store"))},label:(0,h.jsx)(r.Trans,{id:"Publish your game on Kongregate"})}),(0,h.jsx)(l.Z,{fullWidth:!0,primary:!0,onClick:function(){return s.ZP.openExternalURL((0,a.vA)("/publishing/publishing-to-itch-io"))},label:(0,h.jsx)(r.Trans,{id:"Publish your game on Itch.io"}),leftIcon:(0,h.jsx)(f,{})}),(0,h.jsx)(l.Z,{fullWidth:!0,primary:!0,onClick:function(){return s.ZP.openExternalURL("https://engine.spacexpanse.org/page/poki")},label:(0,h.jsx)(r.Trans,{id:"Publish your game on Poki.com"}),leftIcon:(0,h.jsx)(m,{})}),(0,h.jsx)(l.Z,{fullWidth:!0,onClick:function(){return s.ZP.openExternalURL((0,a.vA)("/publishing"))},label:(0,h.jsx)(r.Trans,{id:"Learn more about publishing"})})]})},Z={key:"webexport",tabName:(0,h.jsx)(r.Trans,{id:"Web"}),name:(0,h.jsx)(r.Trans,{id:"Web"}),helpPage:"/publishing/html5_game_in_a_local_folder"}},28490:function(e,t,n){"use strict";n.d(t,{V:function(){return g},s:function(){return f}});var r=n(1413),o=n(36600),i=(n(28381),n(86278)),a=n(40243),s=n(19345),l=n(3698),c=n(50463),u=n(1773),d=n(67835),p=n(4076),h=n(29343),f=function(e){var t=e.exportState,n=e.updateExportState;return(0,h.jsxs)(a.sg,{noMargin:!0,children:[(0,h.jsx)(a.x1,{children:(0,h.jsx)(i.Z,{children:(0,h.jsx)(o.Trans,{id:"Packaging your game for Android will create an APK file that can be installed on Android phones or an Android App Bundle that can be published to Google Play."})})}),(0,h.jsxs)(c.Z,{value:t.targets[0]||"androidApk",onChange:function(e){var t=e.target.value;n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{targets:[t]})}))},children:[(0,h.jsx)(s.Z,{value:"androidApk",control:(0,h.jsx)(l.Z,{color:"secondary"}),label:(0,h.jsx)(o.Trans,{id:"APK (for testing on device or sharing outside Google Play)"})}),(0,h.jsx)(s.Z,{value:"androidAppBundle",control:(0,h.jsx)(l.Z,{color:"secondary"}),label:(0,h.jsx)(o.Trans,{id:"Android App Bundle (for publishing on Google Play)"})})]}),(0,h.jsx)(a.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,h.jsx)(d.Z,{label:(0,h.jsx)(o.Trans,{id:"Signing options"}),onClick:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!0})}))},disabled:"androidAppBundle"!==t.targets[0]})}),t.signingDialogOpen&&(0,h.jsxs)(u.ZP,{title:(0,h.jsx)(o.Trans,{id:"Signing options"}),actions:[(0,h.jsx)(d.Z,{label:(0,h.jsx)(o.Trans,{id:"Close"}),primary:!0,keyboardFocused:!0,onClick:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!1})}))}},"close")],secondaryActions:[(0,h.jsx)(p.Z,{helpPagePath:"/publishing/android_and_ios/play-store/upgrading-from-apk-to-aab"},"help")],open:!0,onRequestClose:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!1})}))},maxWidth:"sm",children:[(0,h.jsx)(i.Z,{children:(0,h.jsx)(o.Trans,{id:'Choose the upload key to use to identify your Android App Bundle. In most cases you don\'t need to change this. Use the "Old upload key" if you used to publish your game as an APK and you activated Play App Signing before switching to Android App Bundle.'})}),(0,h.jsxs)(c.Z,{name:"signing-keystore",value:t.keystore,onChange:function(e){var t=e.target.value;n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{keystore:t})}))},children:[(0,h.jsx)(s.Z,{value:"new",control:(0,h.jsx)(l.Z,{color:"primary"}),label:(0,h.jsx)(o.Trans,{id:"Default upload key (recommended)"})}),(0,h.jsx)(s.Z,{value:"old",control:(0,h.jsx)(l.Z,{color:"primary"}),label:(0,h.jsx)(o.Trans,{id:"Old, legacy upload key (only if you used to publish your game as an APK and already activated Play App Signing)"})}),(0,h.jsx)(s.Z,{value:"custom",control:(0,h.jsx)(l.Z,{color:"primary"}),label:(0,h.jsx)(o.Trans,{id:"Custom upload key (not available yet)"}),disabled:!0})]})]})]})},g={key:"onlinecordovaexport",tabName:(0,h.jsx)(o.Trans,{id:"Mobile"}),name:(0,h.jsx)(o.Trans,{id:"Android (& iOS coming soon)"}),helpPage:"/publishing/android_and_ios"}},42141:function(e,t,n){"use strict";n.d(t,{O:function(){return p},s:function(){return d}});var r=n(93433),o=n(1413),i=n(36600),a=n(28381),s=n(86278),l=n(21601),c=n(40243),u=n(29343),d=function(e){var t=e.exportState,n=e.updateExportState,d=function(e,t){n((function(n){return t&&-1===n.targets.indexOf(e)?(0,o.Z)((0,o.Z)({},n),{},{targets:[].concat((0,r.Z)(n.targets),[e])}):t||-1===n.targets.indexOf(e)?n:(0,o.Z)((0,o.Z)({},n),{},{targets:n.targets.filter((function(t){return t!==e}))})}))};return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(c.sg,{noMargin:!0,children:[(0,u.jsx)(c.x1,{children:(0,u.jsx)(s.Z,{children:(0,u.jsx)(i.Trans,{id:"Your game will be exported and packaged online as a stand-alone game for Windows, Linux and/or macOS."})})}),(0,u.jsx)(l.Z,{label:(0,u.jsx)(i.Trans,{id:"Windows (zip file)"}),checked:-1!==t.targets.indexOf("winZip"),onCheck:function(e,t){return d("winZip",t)}}),(0,u.jsx)(l.Z,{label:(0,u.jsx)(i.Trans,{id:"Windows (auto-installer file)"}),checked:-1!==t.targets.indexOf("winExe"),onCheck:function(e,t){return d("winExe",t)}}),(0,u.jsx)(l.Z,{label:(0,u.jsx)(i.Trans,{id:"macOS (zip file)"}),checked:-1!==t.targets.indexOf("macZip"),onCheck:function(e,t){return d("macZip",t)}}),(0,u.jsx)(l.Z,{label:(0,u.jsx)(i.Trans,{id:"Linux (AppImage)"}),checked:-1!==t.targets.indexOf("linuxAppImage"),onCheck:function(e,t){return d("linuxAppImage",t)}})]})})},p={key:"onlineelectronexport",tabName:(0,u.jsx)(i.Trans,{id:"Desktop"}),name:(0,u.jsx)(i.Trans,{id:"Windows/macOS/Linux"}),helpPage:"/publishing/windows-macos-linux"}},80010:function(e,t,n){"use strict";n.d(t,{if:function(){return D},lv:function(){return I},O1:function(){return A}});var r=n(36600),o=n(28381),i=n(86278),a=n(40243),s=n(15861),l=n(29439),c=n(64687),u=n.n(c),d=n(10959),p=n(22537),h=n(67835),f=n(1773),g=n(16999),m=n(71106),x=n(6403),v=n(12203),b=n(78196),j=n(57244),C=n(29343),y=function(e){var t=e.project,n=e.onSaveProject,i=e.buildId,a=e.game,c=e.onClose,p=e.onApply,g=e.isLoading,x=e.i18n,y=o.useContext(m.ZP).profile,Z=o.useState(t.getName()),k=(0,l.Z)(Z,2),w=k[0],T=k[1],E=o.useState(t.getCategories().toJSArray()),S=(0,l.Z)(E,2),P=S[0],I=S[1],D=o.useState(t.getDescription()),A=(0,l.Z)(D,2),L=A[0],M=A[1],F=o.useState(t.getAuthorIds().toJSArray()),O=(0,l.Z)(F,2),R=O[0],B=O[1],_=o.useState(t.getAuthorUsernames().toJSArray()),N=(0,l.Z)(_,2),U=N[0],H=N[1],V=o.useState(t.isPlayableWithKeyboard()),W=(0,l.Z)(V,2),z=W[0],G=W[1],Y=o.useState(t.isPlayableWithGamepad()),q=(0,l.Z)(Y,2),X=q[0],J=q[1],K=o.useState(t.isPlayableWithMobile()),Q=(0,l.Z)(K,2),$=Q[0],ee=Q[1],te=o.useState(a.cachedCurrentSlug&&a.cachedCurrentSlug.username||y&&y.username||""),ne=(0,l.Z)(te,2),re=ne[0],oe=ne[1],ie=o.useState(a.cachedCurrentSlug&&a.cachedCurrentSlug.gameSlug||(0,v.GN)(t.getName())),ae=(0,l.Z)(ie,2),se=ae[0],le=ae[1],ce=o.useState(t.getOrientation()),ue=(0,l.Z)(ce,2),de=ue[0],pe=ue[1],he=o.useState(!!a.discoverable),fe=(0,l.Z)(he,2),ge=fe[0],me=fe[1],xe=(0,d.UN)(t,i),ve=function(){var e=(0,s.Z)(u().mark((function e(r){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.saveProject,!(0,b.U6)(t,x,{name:w,categories:P||[],description:L||"",authorIds:R,authorUsernames:U,playWithKeyboard:!!z,playWithGamepad:!!X,playWithMobile:!!$,orientation:de||"default"})){e.next=7;break}if(!o){e.next=5;break}return e.next=5,n();case 5:return e.next=7,p({discoverable:ge,userSlug:re,gameSlug:se});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsx)(f.ZP,{title:(0,C.jsx)(r.Trans,{id:"Verify your game info before publishing"}),actions:[(0,C.jsx)(h.Z,{label:(0,C.jsx)(r.Trans,{id:"Back"}),primary:!1,onClick:c,disabled:g},"back"),(0,C.jsx)(j.Z,{label:(0,C.jsx)(r.Trans,{id:"Save project and publish"}),primary:!0,onClick:function(){ve({saveProject:!0})},disabled:g,buildMenuTemplate:function(e){return[{label:e._({id:"Publish without saving project"}),click:function(){return ve({saveProject:!1})}}]}},"publish")],cannotBeDismissed:g,onRequestClose:c,onApply:function(){ve({saveProject:!0})},open:!0,children:(0,C.jsx)(v.b$,{name:w,setName:T,categories:P,setCategories:I,description:L,setDescription:M,project:t,authorIds:R,setAuthorIds:B,setAuthorUsernames:H,setPlayableWithKeyboard:G,playWithKeyboard:z,setPlayableWithGamepad:J,playWithGamepad:X,setPlayableWithMobile:ee,playWithMobile:$,setOrientation:pe,orientation:de,userSlug:re,setUserSlug:oe,gameSlug:se,setGameSlug:le,discoverable:ge,setDiscoverable:me,displayThumbnail:!0,thumbnailUrl:xe,disabled:g})})},Z=n(30141),k=n(75087),w=n(65911),T=n(78966),E=n(64480),S=n(66789),P=n(61325),I=function(e){var t=e.build,n=e.project,c=e.onSaveProject,v=e.errored,b=e.exportStep,j=o.useState(!1),I=(0,l.Z)(j,2),D=I[0],A=I[1],L=o.useState(!1),M=(0,l.Z)(L,2),F=M[0],O=M[1],R=o.useState(!1),B=(0,l.Z)(R,2),_=B[0],N=B[1],U=o.useState(null),H=(0,l.Z)(U,2),V=H[0],W=H[1],z=o.useState(!1),G=(0,l.Z)(z,2),Y=G[0],q=G[1],X=o.useContext(m.ZP),J=X.getAuthorizationHeader,K=X.profile,Q=!v&&""!==b&&"done"!==b,$=t&&"complete"===t.status,ee=t&&V&&t.id===V.publicWebBuildId,te=(0,g.IH)(V),ne=Q||!$?null:ee?te:(0,d.Fp)(t,"s3Key"),re=o.useCallback((0,s.Z)(u().mark((function e(){var n,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t&&t.gameId,K&&n){e.next=3;break}return e.abrupt("return");case 3:return r=K.id,e.prev=4,q(!0),e.next=8,(0,g.cF)(J,r,n);case 8:o=e.sent,W(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Unable to load the game",e.t0);case 15:return e.prev=15,q(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])}))),[t,J,K]),oe=o.useCallback(function(){var e=(0,s.Z)(u().mark((function e(r){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K&&V&&t){e.next=2;break}return e.abrupt("return",!1);case 2:return o=(0,g.WO)(n.getAuthorIds().toJSArray()),e.prev=3,e.next=6,(0,g.wC)(J,K.id,n.getProjectUuid(),{author:o});case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error("Unable to update the authors:",e.t0.response||e.t0.message),(0,Z.gR)({message:r._({id:"Unable to update the authors of the project."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"author-update-error"}),e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),[t,V,J,K,n]),ie=o.useCallback(function(){var e=(0,s.Z)(u().mark((function e(n,r){var o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K&&V&&t){e.next=2;break}return e.abrupt("return",!1);case 2:if(o=n.userSlug,i=n.gameSlug,!o||!i||o!==K.username){e.next=14;break}return e.prev=4,e.next=7,(0,g.b)(J,K.id,V.id,o,i);case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),console.error("Unable to update the game slug:",e.t0.response||e.t0.message),(0,Z.gR)({message:r._({id:"Unable to update the game slug. A slug must be 6 to 30 characters long and only contains letters, digits or dashes."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-slug-update-error"}),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[t,V,J,K]);o.useEffect((function(){!V&&$&&re()}),[V,re,$]),o.useEffect((function(){"done"===b&&O(!0)}),[b]);var ae=o.useCallback(function(){var e=(0,s.Z)(u().mark((function e(r,o){var i,a,s,c,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K&&V&&t){e.next=2;break}return e.abrupt("return",!1);case 2:return i=K.id,e.prev=3,q(!0),e.next=7,(0,g.Bi)(J,i,V.id,{gameName:n.getName(),description:n.getDescription(),categories:n.getCategories().toJSArray(),playWithGamepad:n.isPlayableWithGamepad(),playWithKeyboard:n.isPlayableWithKeyboard(),playWithMobile:n.isPlayableWithMobile(),orientation:n.getOrientation(),publicWebBuildId:t.id,thumbnailUrl:(0,d.UN)(n,t.id),discoverable:r.discoverable});case 7:return e.next=9,Promise.all([oe(o),ie(r,o)]);case 9:return a=e.sent,s=(0,l.Z)(a,2),c=s[0],p=s[1],e.next=15,re();case 15:if(c&&p){e.next=17;break}return e.abrupt("return",!1);case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(3),(0,Z.gR)({message:o._({id:"There was an error updating your game. Verify that your internet connection is working or try again later."}),rawError:e.t0,errorId:"update-game-error"}),console.error("Unable to update the game",e.t0),e.abrupt("return",!1);case 24:return e.prev=24,q(!1),e.finish(24);case 27:return e.abrupt("return",!0);case 28:case"end":return e.stop()}}),e,null,[[3,19,24,27]])})));return function(t,n){return e.apply(this,arguments)}}(),[V,J,K,t,n,oe,ie,re]);if(!t&&!b)return null;var se=[(0,C.jsx)(h.Z,{label:(0,C.jsx)(r.Trans,{id:"Close"}),primary:!1,onClick:function(){return O(!1)}},"close"),V&&ne&&!ee&&(0,C.jsx)(f.vF,{label:(0,C.jsx)(r.Trans,{id:"Verify and Publish to games.engine.spacexpanse.org"}),primary:!0,onClick:function(){return N(!0)}},"publish")];return(0,C.jsx)(r.I18n,{children:function(e){var o=e.i18n;return(0,C.jsxs)(C.Fragment,{children:[Q&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.Z,{children:(0,C.jsx)(r.Trans,{id:"Just a few seconds while we generate the link..."})}),(0,C.jsx)(a.x1,{expand:!0,children:(0,C.jsx)(E.Z,{})})]}),F&&(0,C.jsxs)(f.ZP,{title:(0,C.jsx)(r.Trans,{id:"Share your game"}),id:"export-game-share-dialog",actions:se,open:!0,onRequestClose:function(){return O(!1)},onApply:function(){V&&ne&&!ee&&N(!0)},children:[ne&&!Y?(0,C.jsxs)(a.sg,{noMargin:!0,children:[(0,C.jsx)(k.Z,{url:ne}),ee&&navigator.share&&(0,C.jsx)(T.Z,{url:ne}),ee&&!navigator.share&&(0,C.jsx)(a.x1,{expand:!0,children:(0,C.jsxs)(P.ep,{expand:!0,justifyContent:"space-between",noMargin:!0,children:[(0,C.jsx)(a.sg,{justifyContent:"center",noMargin:!0,children:(0,C.jsx)(x.Z,{kind:"info",children:(0,C.jsx)(r.Trans,{id:"Your game is published! Share it with the community!"})})}),(0,C.jsx)(a.sg,{justifyContent:"flex-end",noMargin:!0,alignItems:"center",children:(0,C.jsx)(w.Z,{url:ne})})]})}),!ee&&V&&(0,C.jsx)(a.x1,{children:(0,C.jsx)(x.Z,{kind:"info",children:(0,C.jsx)(r.Trans,{id:"This link is private so you can share it with friends and testers. When you're ready you can update your games.engine.spacexpanse.org game page."})})})]}):(0,C.jsxs)(a.sg,{alignItems:"center",children:[(0,C.jsx)(a.x1,{children:(0,C.jsx)(S.Z,{})}),(0,C.jsx)(i.Z,{children:(0,C.jsx)(r.Trans,{id:"Loading your link..."})})]}),(0,C.jsx)(p.Z,{message:(0,C.jsx)(r.Trans,{id:"Copied to clipboard!"}),visible:D,hide:function(){return A(!1)}})]}),V&&t&&_&&(0,C.jsx)(y,{project:n,onSaveProject:c,buildId:t.id,onClose:function(){return N(!1)},onApply:function(){var e=(0,s.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t,o);case 2:e.sent&&N(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),game:V,isLoading:Y,i18n:o})]})}})},D=function(){return(0,C.jsx)(a.sg,{noMargin:!0,alignItems:"center",justifyContent:"center",children:(0,C.jsx)(a.x1,{children:(0,C.jsx)(i.Z,{align:"center",children:(0,C.jsx)(r.Trans,{id:"Generate a unique link, playable from any computer or mobile phone's browser."})})})})},A={key:"onlinewebexport",tabName:"Web",name:(0,C.jsx)(r.Trans,{id:"Web"}),helpPage:"/publishing/web"}},40790:function(e,t,n){"use strict";n.d(t,{C:function(){return v}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(36600),l=n(28381),c=n(54458),u=n(71106),d=n(6403),p=n(30141),h=n(75383),f=n(78081),g=n(32484),m=n(16999),x=n(29343),v=function(e){var t=e.project,n=e.suggestGameStatsEmail,i=e.hideLoader,v=e.onGameRegistered,b=l.useContext(u.ZP),j=b.authenticated,C=b.onLogin,y=b.onCreateAccount,Z=b.getAuthorizationHeader,k=b.profile,w=b.onAcceptGameStatsEmail,T=l.useState(null),E=(0,o.Z)(T,2),S=E[0],P=E[1],I=l.useState(null),D=(0,o.Z)(I,2),A=D[0],L=D[1],M=l.useState(null),F=(0,o.Z)(M,2),O=F[0],R=F[1],B=l.useState(!1),_=(0,o.Z)(B,2),N=_[0],U=_[1],H=l.useState(!1),V=(0,o.Z)(H,2),W=V[0],z=V[1],G=l.useCallback((0,r.Z)(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&t){e.next=2;break}return e.abrupt("return");case 2:return n=k.id,P(null),e.prev=4,e.next=7,(0,m.cF)(Z,n,t.getProjectUuid());case 7:r=e.sent,L(null),R(r),e.next=25;break;case 12:if(e.prev=12,e.t0=e.catch(4),console.error(e.t0),!e.t0.response){e.next=24;break}if(403!==e.t0.response.status){e.next=21;break}return L("unauthorized"),e.abrupt("return");case 21:if(404!==e.t0.response.status){e.next=24;break}return L("not-existing"),e.abrupt("return");case 24:P(e.t0);case 25:case"end":return e.stop()}}),e,null,[[4,12]])}))),[t,Z,k]),Y=l.useCallback((0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&t){e.next=2;break}return e.abrupt("return");case 2:return n=k.id,U(!0),e.prev=4,e.next=7,(0,m.r$)(Z,n,{gameId:t.getProjectUuid(),authorName:t.getAuthor()||"Unspecified publisher",gameName:t.getName()||"Untitled game",templateSlug:t.getTemplateSlug()});case 7:G(),v&&v(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Unable to register the game",e.t0),(0,p.gR)({rawError:e.t0,errorId:"register-game-error",message:"Unable to register the game. Verify your internet connection or try again later."});case 15:U(!1);case 16:case"end":return e.stop()}}),e,null,[[4,11]])}))),[Z,k,t,G,v]),q=l.useCallback((0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&t){e.next=2;break}return e.abrupt("return");case 2:return z(!0),e.prev=3,e.next=6,w();case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Unable to accept game stats email.",e.t0),(0,p.gR)({rawError:e.t0,errorId:"game-stats-email-error",message:"Unable to accept game stats email.  Verify your internet connection or try again later."});case 12:z(!1);case 13:case"end":return e.stop()}}),e,null,[[3,8]])}))),[k,t,w]);return l.useEffect((function(){O||G()}),[G,O]),t?j&&k?"not-existing"===A?(0,x.jsx)(d.Z,{kind:"info",renderRightButton:function(){return(0,x.jsx)(g.Z,{label:(0,x.jsx)(s.Trans,{id:"Register the project"}),disabled:N,primary:!0,onClick:Y})},children:(0,x.jsx)(s.Trans,{id:"The project currently opened is not registered online. Register it now to get access to leaderboards, player accounts, analytics and more!"})}):"unauthorized"===A?(0,x.jsx)(d.Z,{kind:"error",children:(0,x.jsx)(s.Trans,{id:"The project currently opened is registered online but you don't have access to it. Ask the original owner of the game to share it with you to be able to manage it."})}):S?(0,x.jsxs)(h.Z,{onRetry:function(){G()},children:[(0,x.jsx)(s.Trans,{id:"Can't check if the game is registered online."})," ",(0,x.jsx)(s.Trans,{id:"Verify your internet connection or try again later."})]}):O||i?O&&n&&!k.getGameStatsEmail?(0,x.jsx)(d.Z,{kind:"info",renderRightButton:function(){return(0,x.jsx)(g.Z,{label:(0,x.jsx)(s.Trans,{id:"Get game stats"}),disabled:W,primary:!0,onClick:q})},children:(0,x.jsx)(s.Trans,{id:"Receive weekly stats about your game by email!"})}):null:(0,x.jsx)(f.Z,{}):(0,x.jsx)(c.Z,{onLogin:C,onCreateAccount:y}):null}},1879:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var r=n(1413),o=n(36600),i=(n(28381),n(86578)),a=n(20914),s=n(29343),l={display:"block",objectFit:"cover"},c={width:272,height:153},u=function(e){var t=e.thumbnailUrl,n=e.gameName,u=e.background,d=void 0===u?"light":u;return t?(0,s.jsx)("img",{src:t,style:(0,r.Z)((0,r.Z)({},l),c),alt:n,title:n}):(0,s.jsx)(a.Z,{variant:"outlined",style:(0,r.Z)((0,r.Z)({},c),{},{whiteSpace:"normal",display:"flex"}),background:d,children:(0,s.jsx)(i.Z,{children:(0,s.jsx)(o.Trans,{id:"No thumbnail set"})})})}},12203:function(e,t,n){"use strict";n.d(t,{GN:function(){return w},b$:function(){return T}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(42986),c=n(10641),u=n(61325),d=n(21601),p=n(81683),h=n(90242),f=n(98094),g=n(16999),m=n(71106),x=n(36600),v=n(40243),b=n(1589),j=n(6403),C=n(1879),y=n(29343),Z=30,k=n(97396),w=function(e){var t=e;/[\u0411\u0413\u0414\u0416\u0417\u0418\u0419\u041b\u041f\u0424\u0426\u0427\u0428\u0429\u042b\u042d\u042e\u042f\u0431\u0432\u0433\u0434\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043f\u0442\u0444\u0446\u0447\u0448\u0449\u044b\u044d\u044e\u044f]/.test(e)&&(t=e.split("").map((function(e){var t=k[e];return void 0===t?e:t})).join(""));var n=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"-").toLowerCase().slice(0,Z);return n.length<6&&(n=n.concat(new Array(6-n.length).fill("-").join(""))),n};function T(e){var t=e.project,n=e.disabled,i=e.setName,k=e.name,T=e.categories,E=e.setCategories,S=e.setDescription,P=e.description,I=e.setAuthorIds,D=e.setAuthorUsernames,A=e.authorIds,L=e.setOwnerIds,M=e.ownerIds,F=e.setPlayableWithKeyboard,O=e.playWithKeyboard,R=e.setPlayableWithGamepad,B=e.playWithGamepad,_=e.setPlayableWithMobile,N=e.playWithMobile,U=e.setOrientation,H=e.orientation,V=e.userSlug,W=e.setUserSlug,z=e.gameSlug,G=e.setGameSlug,Y=e.setDiscoverable,q=e.discoverable,X=e.displayThumbnail,J=e.thumbnailUrl,K=s.useState(""),Q=(0,o.Z)(K,2),$=Q[0],ee=Q[1],te=s.useContext(m.ZP).profile,ne=V&&!!V.length&&te&&te.username,re=ne&&te&&V!==te.username,oe=s.useState([]),ie=(0,o.Z)(oe,2),ae=ie[0],se=ie[1],le=s.useCallback((0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.bb)();case 2:t=e.sent,se(t);case 4:case"end":return e.stop()}}),e)}))),[]);return s.useEffect((function(){le()}),[le]),(0,y.jsx)(x.I18n,{children:function(e){var r=e.i18n;return(0,y.jsxs)(u.ak,{noMargin:!0,children:[(0,y.jsxs)(u.ep,{noMargin:!0,children:[X&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.sg,{noMargin:!0,children:(0,y.jsx)(C.J,{gameName:t.getName(),thumbnailUrl:J})}),(0,y.jsx)(v.LZ,{})]}),(0,y.jsxs)(u.ak,{noMargin:!0,expand:!0,children:[(0,y.jsx)(l.Z,{floatingLabelText:(0,y.jsx)(x.Trans,{id:"Game name"}),fullWidth:!0,type:"text",value:k,onChange:i,autoFocus:"desktop",disabled:n}),E&&(0,y.jsx)(f.Z,{hintText:{id:"Select a genre"},floatingLabelText:(0,y.jsx)(x.Trans,{id:"Genres"}),helperText:(0,y.jsx)(x.Trans,{id:"Select up to 3 genres for the game to be visible on games.engine.spacexpanse.org's categories pages!"}),value:T?T.map((function(e){return{value:e,text:(0,g.Oo)(e,r)}})):[],onChange:function(e,t){E(t?t.map((function(e){return e.value})):[]),ee("")},inputValue:$,onInputChange:function(e,t,n){"input"===n&&ee(t)},dataSource:ae.map((function(e){return{value:e.name,text:(0,g.Oo)(e.name,r),disabled:"admin-only"===e.type}})),fullWidth:!0,optionsLimit:3,disabled:n,loading:0===ae.length}),Y&&(0,y.jsx)(d.Z,{label:(0,y.jsx)(x.Trans,{id:"Make your game discoverable on games.engine.spacexpanse.org"}),checked:!!q,onCheck:function(e,t){return Y(t)},disabled:n})]})]}),X&&(0,y.jsx)(v.x1,{noMargin:!0,children:(0,y.jsx)(b.Z,{children:(0,y.jsx)(x.Trans,{id:"To update your thumbnail, go into your Game Settings > Icons and thumbnail, then create and publish a new build."})})}),(0,y.jsx)(l.Z,{floatingLabelText:(0,y.jsx)(x.Trans,{id:"Game description"}),fullWidth:!0,type:"text",value:P||"",onChange:S,multiline:!0,rows:5,disabled:n}),W&&G&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(v.x1,{children:[(0,y.jsxs)(p.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(x.Trans,{id:"User name in the game URL"}),value:V||"",onChange:function(e,t,n){return W(n)},disabled:!re||n,children:[te&&te.username&&(0,y.jsx)(h.Z,{value:te.username,label:te.username,shouldNotTranslate:!0}),V&&(!te||V!==te.username)&&(0,y.jsx)(h.Z,{value:V,label:V,shouldNotTranslate:!0})]}),(0,y.jsx)(v.LZ,{}),(0,y.jsx)(l.Z,{disabled:!ne||n,floatingLabelText:(0,y.jsx)(x.Trans,{id:"Game name in the game URL"}),fullWidth:!0,maxLength:Z,type:"text",value:ne&&z||"",onChange:function(e){return G(w(e))}})]}),!ne&&(0,y.jsx)(j.Z,{kind:"info",children:(0,y.jsx)(x.Trans,{id:"Usernames are required to choose a custom game URL."})})]}),(0,y.jsx)(c.D,{userIds:A,onChange:function(e){I(e.map((function(e){return e.userId}))),D(e.map((function(e){return e.username})))},floatingLabelText:(0,y.jsx)(x.Trans,{id:"Authors"}),helperText:(0,y.jsx)(x.Trans,{id:"Select the usernames of the authors of this project. They will be displayed in the selected order, if you publish this game as an example or in the community."}),disabled:n}),L&&(0,y.jsx)(c.D,{userIds:M||[],onChange:function(e){return L(e.map((function(e){return e.userId})))},floatingLabelText:(0,y.jsx)(x.Trans,{id:"Owners"}),helperText:(0,y.jsx)(x.Trans,{id:"Select the usernames of the owners of this project to let them manage this game builds. Be aware that owners can revoke your ownership."}),disabled:n}),(0,y.jsxs)(p.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(x.Trans,{id:"Device orientation (for mobile)"}),value:H,onChange:function(e,t,n){return U(n)},disabled:n,children:[(0,y.jsx)(h.Z,{value:"default",label:{id:"Platform default"}}),(0,y.jsx)(h.Z,{value:"landscape",label:{id:"Landscape"}}),(0,y.jsx)(h.Z,{value:"portrait",label:{id:"Portrait"}})]}),F&&R&&_&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(d.Z,{label:(0,y.jsx)(x.Trans,{id:"Playable with a keyboard"}),checked:!!O,onCheck:function(e,t){return F(t)},disabled:n}),(0,y.jsx)(d.Z,{label:(0,y.jsx)(x.Trans,{id:"Playable with a gamepad"}),checked:!!B,onCheck:function(e,t){return R(t)},disabled:n}),(0,y.jsx)(d.Z,{label:(0,y.jsx)(x.Trans,{id:"Playable on mobile"}),checked:!!N,onCheck:function(e,t){return _(t)},disabled:n})]})]})}})}t.ZP=T},78196:function(e,t,n){"use strict";n.d(t,{U6:function(){return g},X:function(){return m}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(36600),l=n(28381),c=n(12203),u=n(32921),d=n(67835),p=n(1773),h=n(71106),f=n(29343),g=function(e,t,n){var r=n.name,o=n.authorIds,i=n.authorUsernames,a=n.description,s=n.categories;e.setName(r);var l=e.getCategories();l.clear(),s.forEach((function(e){return l.push_back(e)})),e.setDescription(a);var c=e.getAuthorIds();c.clear(),o.forEach((function(e){return c.push_back(e)}));var d=e.getAuthorUsernames();return d.clear(),i.forEach((function(e){return d.push_back(e)})),e.setPlayableWithKeyboard(n.playWithKeyboard),e.setPlayableWithGamepad(n.playWithGamepad),e.setPlayableWithMobile(n.playWithMobile),e.setOrientation(n.orientation),(0,u.vv)(t,(0,u.nu)(t,e))},m=function(e){var t=e.project,n=e.publicGame,i=e.onClose,u=e.onApply,m=e.isLoading,x=e.i18n,v=l.useContext(h.ZP).profile,b=n.authors.map((function(e){return e.id})),j=n.authors.map((function(e){return e.username})).filter(Boolean),C=n.owners.map((function(e){return e.id})),y=l.useState(n.gameName),Z=(0,o.Z)(y,2),k=Z[0],w=Z[1],T=l.useState(n.categories),E=(0,o.Z)(T,2),S=E[0],P=E[1],I=l.useState(n.description),D=(0,o.Z)(I,2),A=D[0],L=D[1],M=l.useState(b),F=(0,o.Z)(M,2),O=F[0],R=F[1],B=l.useState(j),_=(0,o.Z)(B,2),N=_[0],U=_[1],H=l.useState(C),V=(0,o.Z)(H,2),W=V[0],z=V[1],G=l.useState(n.playWithKeyboard),Y=(0,o.Z)(G,2),q=Y[0],X=Y[1],J=l.useState(n.playWithGamepad),K=(0,o.Z)(J,2),Q=K[0],$=K[1],ee=l.useState(n.playWithMobile),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],oe=l.useState(n.orientation),ie=(0,o.Z)(oe,2),ae=ie[0],se=ie[1],le=l.useState(n.userSlug||v&&v.username||""),ce=(0,o.Z)(le,2),ue=ce[0],de=ce[1],pe=l.useState(n.gameSlug||(0,c.GN)(n.gameName)),he=(0,o.Z)(pe,2),fe=he[0],ge=he[1],me=l.useState(n.discoverable),xe=(0,o.Z)(me,2),ve=xe[0],be=xe[1],je=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g(t,x,{name:k,categories:S||[],description:A||"",authorIds:O,authorUsernames:N,playWithKeyboard:!!q,playWithGamepad:!!Q,playWithMobile:!!ne,orientation:ae||"default"})){e.next=3;break}return e.next=3,u({ownerIds:W,userSlug:ue,gameSlug:fe,discoverable:ve});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=[(0,f.jsx)(d.Z,{label:(0,f.jsx)(s.Trans,{id:"Back"}),primary:!1,onClick:i,disabled:m},"back"),(0,f.jsx)(p.vF,{label:(0,f.jsx)(s.Trans,{id:"Save"}),primary:!0,onClick:je,disabled:m},"save")];return(0,f.jsx)(p.ZP,{title:n.gameName,actions:Ce,cannotBeDismissed:m,onRequestClose:i,onApply:je,open:!0,children:(0,f.jsx)(c.b$,{name:k,setName:w,categories:S,setCategories:P,description:A,setDescription:L,project:t,authorIds:O,setAuthorIds:R,setAuthorUsernames:U,ownerIds:W,setOwnerIds:z,setPlayableWithKeyboard:X,playWithKeyboard:q,setPlayableWithGamepad:$,playWithGamepad:Q,setPlayableWithMobile:re,playWithMobile:ne,setOrientation:se,orientation:ae,setUserSlug:de,userSlug:ue,setGameSlug:ge,gameSlug:fe,setDiscoverable:be,discoverable:ve,displayThumbnail:!0,thumbnailUrl:n.thumbnailUrl})})}},74149:function(e,t,n){var r=n(50057),o=r("@electron/remote"),i=o?o.app:null,a=r("fs"),s=r("path"),l=r("process"),c=l&&/^darwin/.test(l.platform),u=function(e,t,n){return a.access(e,a.constants.R_OK,(function(r){r?n():t(e)}))};e.exports={findGDJS:function(){if(!s||!l||!a)return Promise.reject(new Error("Unsupported"));var e=i?i.getAppPath():l.cwd(),t=c?"../../../../":s.join("..",".."),n=s.join(e,t);return new Promise((function(t,r){var o=function(e){return t({gdjsRoot:e})},i=function(){return r(new Error("Could not find GDJS"))};u(s.join(n,"..","JsPlatform"),o,(function(){u(s.join(e,"..","GDJS"),o,(function(){var t=s.join(e,"..","..","app","resources","GDJS");u(t,o,i)}))}))}))}}},95644:function(e,t,n){"use strict";var r=n(3429);t.Z=function(e){var t=e.tutorialId;return(0,r.Z)(t).DismissableTutorialMessage}},4346:function(e,t,n){"use strict";var r=n(36600),o=n(28381),i=n(36262),a=n(6403),s=n(2066),l=n(32484),c=n(81730),u=n(60274),d=n(29343);t.Z=function(e){var t=e.tutorial,n=o.useContext(i.ZP).showTutorialHint;return(0,d.jsx)(r.I18n,{children:function(e){e.i18n;return(0,d.jsx)(a.Z,{kind:"info",children:t.title,renderLeftIcon:function(){return(0,d.jsx)("img",{alt:"",style:{width:128,borderRadius:4,aspectRatio:"16 / 9"},src:t.thumbnailUrl})},renderRightButton:function(){return(0,d.jsx)(l.Z,{icon:"video"===t.type?(0,d.jsx)(c.Z,{}):(0,d.jsx)(u.Z,{}),label:"video"===t.type?(0,d.jsx)(r.Trans,{id:"Watch the tutorial"}):(0,d.jsx)(r.Trans,{id:"Read the tutorial"}),onClick:function(){s.ZP.openExternalURL(t.link)}})},onHide:function(){n(t.id,!1)}})}})}},32515:function(e,t){"use strict";t.Z=function(e,t,n){if(!t)return null;if(e.values.hiddenTutorialHints[n])return null;var r=t.find((function(e){return e.id===n}));return r||(console.warn("Tutorial with id ".concat(n," not found")),null)}},44397:function(e,t,n){"use strict";n.d(t,{du:function(){return r},gF:function(){return o},zZ:function(){return i}});var r=function(){return{"PhysicsBehavior::PhysicsBehavior":{warning:{id:"A new physics engine (Physics Engine 2.0) is now available. You should prefer using it for new game. For existing games, note that the two behaviors are not compatible, so you should only use one of them with your objects."}}}},o=function(){return{"Video::VideoObject":[{kind:"warning",message:{id:"Most browsers will require the user to have interacted with your game before allowing any video to play. Make sure that the player click/touch the screen at the beginning of the game before starting any video."}},{kind:"warning",message:{id:"For a given video resource, only one video will be played in memory and displayed. If you put this object multiple times on the scene, all the instances will be displaying the exact same video (with the same timing and paused/played/stopped state)."}},{kind:"info",message:{id:"Video format supported can vary according to devices and browsers. For maximum compatibility, use H.264/mp4 file format (and AAC for audio)."}}],"BitmapText::BitmapTextObject":[{kind:"info",message:{id:"For a pixel type font, you must disable the Smooth checkbox related to your texture in the game resources to disable anti-aliasing."}},{kind:"info",message:{id:"The font size is stored directly inside the font. If you want to change it, export again your font using an external editor like bmFont. Click on the help button to learn more."}}],"TileMap::TileMap":[{kind:"info",message:{id:"The tilemap must be designed in a separated program, Tiled, that can be downloaded on mapeditor.org. Save your map as a JSON file, then select here the Atlas image that you used and the Tile map JSON file."}}],"TextInput::TextInputObject":[{kind:"warning",message:{id:"The text input will be always shown on top of all other objects in the game - this is a limitation that can't be changed. According to the platform/device or browser running the game, the appearance can also slightly change."}}]}},i=function(e){return 0===e.indexOf("PhysicsBehavior::")?{kind:"warning",message:{id:'This action is deprecated and should not be used anymore. Instead, use for all your objects the behavior called "Physics2" and the associated actions (in this case, all objects must be set up to use Physics2, you can\'t mix the behaviors).'}}:e.startsWith("BoundingBox")?{kind:"info",message:{id:"The bounding box is an imaginary rectangle surrounding the object collision mask. Even if the object X and Y positions are not changed, this rectangle can change if the object is rotated or if an animation is being played. Usually you should use actions and conditions related to the object position or center, but the bounding box can be useful to deal with the area of the object."}}:"PickedInstancesCount"===e?{kind:"info",message:{id:"If no previous condition or action used the specified object(s), the picked instances count will be 0."}}:"CompareTimer"===e?{kind:"info",message:{id:'To start a timer, don\'t forget to use the action "Start (or reset) a scene timer" in another event.'}}:"CompareObjectTimer"===e?{kind:"info",message:{id:'To start a timer, don\'t forget to use the action "Start (or reset) an object timer" in another event.'}}:"FixCamera"===e?{kind:"info",message:{id:'Please prefer using the new action "Enforce camera boundaries" which is more flexible.'}}:"BitmapText::Scale"===e?{kind:"info",message:{id:"A scale under 1 on a Bitmap text object can downgrade the quality text, prefer to remake a bitmap font smaller in the external bmFont editor."}}:"TextObject::Text::SetFontSize"===e?{kind:"warning",message:{id:"This action will create a new texture and re-render the text each time it is called, which is expensive and can reduce performances. Prefer to avoid changing a lot the character size of a text."}}:"PlayMusicCanal"===e||"PlayMusic"===e?{kind:"warning",message:{id:"Musics will only be played if the user has interacted with the game before (by clicking/touching it or pressing a key on the keyboard). This is due to browser limitations. Make sure to have the user interact with the game before using this action."}}:"P2P::OnEvent"===e?{kind:"info",message:{id:"Read the wiki page for more info about the dataloss mode."},identifier:"p2p-dataloss"}:"PlatformBehavior::IsObjectOnGivenFloor"===e?{kind:"info",message:{id:"This condition may have unexpected results when the object is on different floors at the same time, due to the fact that the engine only considers the first floor the object comes into contact with."}}:"P2P::OverrideID"===e?{kind:"warning",message:{id:"Overriding the ID may have unwanted consequences, such as blocking the ability to connect to any peer. Do not use this feature unless you really know what you are doing."}}:0===e.indexOf("P2P::")?{kind:"warning",message:{id:"P2P is a peer-to-peer networking solution. It leaks IP addresses to other players - it is made to play with friends, and is not suitable for playing with unknown players.\nP2P also only allows to exchange messages and leaves implementation of higher-level tasks, such as synchronizing the game state, to you. Use the THNK Framework if you seek an easier, more performant and more flexible solution suitable for playing with strangers."},identifier:"p2p-is-networking"}:"SystemInfo::IsMobile"===e?{kind:"warning",message:{id:'Note that the distinction between what is a mobile device and what is not is becoming blurry (with devices like iPad pro and other "desktop-class" tablets). If you use this for mobile controls, prefer to check if the device has touchscreen support.'}}:"AdvancedWindow::SetClosable"===e||"AdvancedWindow::EnableWindow"===e||"AdvancedWindow::Show"===e||"AdvancedWindow::SetFocusable"===e||"AdvancedWindow::Focus"===e?{kind:"warning",message:{id:"Be careful with this action, you may have problems exiting the preview if you don't add a way to toggle it back."}}:"GetArgumentAsBoolean"===e?{kind:"info",message:{id:'If the parameter is a string or a number, you probably want to use the expressions "GetArgumentAsString" or "GetArgumentAsNumber", along with the conditions "Compare two strings" or "Compare two numbers".'}}:null}},3429:function(e,t,n){"use strict";var r=n(28381),o=n(3550),i=n(36262),a=n(72291),s=n(32515),l=n(4346),c=n(29343);t.Z=function(e){var t=r.useContext(i.ZP),n=r.useContext(o.Z).currentlyRunningInAppTutorial,u=r.useContext(a.n).tutorials,d=(0,s.Z)(t,u,e);return{DismissableTutorialMessage:r.useMemo((function(){return!d||n?null:(0,c.jsx)(l.Z,{tutorial:d})}),[d,n])}}},3550:function(e,t,n){"use strict";var r=n(15861),o=n(64687),i=n.n(o),a=n(28381),s={currentlyRunningInAppTutorial:null,getInAppTutorialShortHeader:function(e){return null},startTutorial:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),endTutorial:function(){},inAppTutorialShortHeaders:null,startStepIndex:0,startProjectData:{},inAppTutorialsFetchingError:null,fetchInAppTutorials:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},l=a.createContext(s);t.Z=l},23570:function(e,t,n){var r=n(83306),o=function(e,t,n){if(!n.runExtensionSanityTests)return{error:!0,message:"Missing runExtensionSanityTests in the extension module exports"};var o=n.runExtensionSanityTests(e,t);return r(o)?{error:!0,message:"One or more tests are failing for the extension (see rawError)",rawError:o}:{error:!1,message:"Tests passed successfully"}};e.exports={runExtensionSanityTests:o,loadExtension:function(e,t,n,r){if(!r.createExtension)return{message:"Extension module found, but no createExtension method is exported",error:!0};var i=null;try{if(!(i=r.createExtension(e,t)))return{message:"createExtension did not return any extension. Did you forget to return the extension created?",error:!0}}catch(s){return{message:"\ud83d\udea8 Exception caught while running createExtension. \ud83d\udca3 Please fix this error as this will make SpeXEngine crash at some point.",error:!0,dangerous:!0,rawError:s}}try{var a=o(t,i,r);if(a.error)return i.delete(),a}catch(s){return{message:"\ud83d\udea8 Exception caught while running runExtensionSanityTests. \ud83d\udca3 Please fix this error as this will make SpeXEngine crash at some point.",error:!0,dangerous:!0,rawError:s}}return n.addNewExtension(i),i.delete(),{message:"\u2705 Successfully loaded the extension.",error:!1}}}},55760:function(e,t,n){"use strict";n.d(t,{YK:function(){return b},$3:function(){return v},oN:function(){return g},aL:function(){return x},LB:function(){return m}});var r=n(1413),o=n(28381),i=function(){var e=document.body,t=document.activeElement,n=document.querySelector("div.main-frame"),r=n&&n.contains(t);return!(t===e)&&!r},a=n(48409),s=["CmdOrCtrl+KeyZ","CmdOrCtrl+KeyY","CmdOrCtrl+Shift+KeyZ","CmdOrCtrl+KeyX","CmdOrCtrl+KeyC","CmdOrCtrl+KeyV","CmdOrCtrl+KeyD","CmdOrCtrl+Shift+KeyV","CmdOrCtrl+KeyA","Delete","CmdOrCtrl+Shift+KeyI","F11","NumpadAdd","CmdOrCtrl+Equal","NumpadSubtract","CmdOrCtrl+Minus","CmdOrCtrl+KeyF"],l=n(36262),c=n(32072),u=function(){var e=document.activeElement;if(!e)return!1;return!!e.closest('textarea, input, [contenteditable="true"]')},d=n(83141),p=n(50057),h=n.n(p)()("electron"),f=function(e){return e?0===e.indexOf("Key")?"alphabet":0===e.indexOf("Digit")?"number":0===e.indexOf("F")?"fn-row":"NumpadAdd"===e||"NumpadSubtract"===e?"numpad-arith":"Equal"===e||"Minus"===e?"numrow-arith":"Tab"===e||"Space"===e?"other":null:null},g=function(e){var t=function(e){var t="";(e.ctrlKey||e.metaKey)&&(t+="CmdOrCtrl+"),e.shiftKey&&(t+="Shift+"),e.altKey&&(t+="Alt+");var n=e.code||"";return f(n)&&(t+=n),t}(e),n=function(e){var t=e.code||"",n=f(t);if(!n)return!1;var r=e.ctrlKey||e.metaKey,o=e.altKey;return!("other"===n&&!r&&!o)}(e),r=s.includes(t);return{shortcutString:t,isValid:n&&!r}},m=function(){var e=o.useContext(l.ZP).values.userShortcutMap;return(0,r.Z)((0,r.Z)({},d.Z),e)},x=function(e){var t=m();o.useEffect((function(){var n=function(n){var r=g(n);if(r.isValid){var o=Object.keys(t).find((function(e){return t[e]===r.shortcutString}));o&&(h&&c.Z[o].handledByElectron||u()||(n.preventDefault(),i()||e(o)))}};return document.addEventListener("keydown",n),function(){return document.removeEventListener("keydown",n)}}),[e,t])},v=function(e){return e.split("+").map((function(e){return"CmdOrCtrl"===e?(0,a.z1)()?"Cmd":"Ctrl":"Shift"===e||"Alt"===e?e:function(e){var t=f(e);return"alphabet"===t?e.slice(3):"number"===t?e.slice(5):"fn-row"===t?e:"numpad-arith"===t?"NumpadAdd"===e?"Num+":"Num-":"numrow-arith"===t?"Minus"===e?"-":"=":e}(e)})).join(" + ")},b=function(e){return e.split("+").map((function(e){return"CmdOrCtrl"===e||"Shift"===e||"Alt"===e?e:function(e){var t=f(e);return"alphabet"===t?e.slice(3):"number"===t?e.slice(5):"fn-row"===t?e:"numpad-arith"===t?"NumpadAdd"===e?"numadd":"numsub":"numrow-arith"===t?"Minus"===e?"-":"=":e}(e)})).join("+")}},36559:function(e,t,n){"use strict";n.d(t,{c:function(){return p},z:function(){return h}});var r=n(1413),o=n(45987),i=n(93433),a=n(55760),s=n(48409),l=n(2066),c=n(50057),u=["onClickSendEvent","onClickOpenLink","eventArgs"],d=n.n(c)()("electron"),p=function(e){var t=e.shortcutMap,n=e.i18n,r=e.recentProjectFiles,o=e.project,l=e.isApplicationTopLevelMenu,c={label:n._({id:"File"}),submenu:[{label:n._({id:"Create"}),submenu:[{label:n._({id:"New empty project..."}),accelerator:(0,a.YK)(t.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create-blank"},{label:n._({id:"New project from template..."}),onClickSendEvent:"main-menu-create-template"}]},{type:"separator"},{label:n._({id:"Open..."}),accelerator:(0,a.YK)(t.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:n._({id:"Open Recent"}),submenu:r.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}}))},{type:"separator"},{label:n._({id:"Save"}),accelerator:(0,a.YK)(t.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!o},{label:n._({id:"Save as..."}),accelerator:(0,a.YK)(t.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:!!o},{type:"separator"},{label:n._({id:"Export (web, iOS, Android)..."}),accelerator:(0,a.YK)(t.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!o},{type:"separator"},{label:n._({id:"Close Project"}),accelerator:(0,a.YK)(t.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!o}].concat((0,i.Z)((0,s.z1)()&&l?[]:[{type:"separator"},{label:n._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:n._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:n._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:n._({id:"Language"}),onClickSendEvent:"main-menu-open-language"}].concat((0,i.Z)(d?[{type:"separator"},{label:n._({id:"Exit SpeXEngine"}),accelerator:(0,a.YK)(t.QUIT_APP),onClickSendEvent:"main-menu-close-app"}]:[]))))},u={label:n._({id:"Edit"}),submenu:[{label:n._({id:"Undo"}),role:"undo"},{label:n._({id:"Redo"}),role:"redo"},{type:"separator"},{label:n._({id:"Cut"}),role:"cut"},{label:n._({id:"Copy"}),role:"copy"},{label:n._({id:"Paste"}),role:"paste"},{label:n._({id:"Paste and Match Style"}),role:"pasteandmatchstyle"},{label:n._({id:"Delete"}),role:"delete"},{label:n._({id:"Select All"}),role:"selectall"}]},p={label:n._({id:"View"}),submenu:[{label:n._({id:"Show Project Manager"}),accelerator:(0,a.YK)(t.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!o},{label:n._({id:"Show Home"}),onClickSendEvent:"main-menu-open-home-page"},{label:n._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!o}].concat((0,i.Z)(d?[{type:"separator"},{label:n._({id:"Toggle Developer Tools"}),role:"toggledevtools"},{type:"separator"},{label:n._({id:"Toggle Fullscreen"}),role:"togglefullscreen"}]:[]))},h={label:n._({id:"Window"}),role:"window",submenu:[{label:n._({id:"Minimize"}),role:"minimize"}]},f={label:n._({id:"Help"}),role:"help",submenu:[{label:n._({id:"SpeXEngine website"}),onClickOpenLink:"http://engine.spacexpanse.org"},{type:"separator"},{label:n._({id:"SpeXEngine games on games.engine.spacexpanse.org"}),onClickOpenLink:"https://games.engine.spacexpanse.org"},{label:n._({id:"Community Forums"}),onClickOpenLink:"https://forum.engine.spacexpanse.org"},{label:n._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/thespacexpansecrew"},{type:"separator"},{label:n._({id:"YouTube channel (tutorials and more)"}),onClickOpenLink:"https://www.youtube.com/c/gdevelopapp"},{label:n._({id:"TikTok"}),onClickOpenLink:"https://tiktok.com/@gdevelop"},{label:n._({id:"Twitter"}),onClickOpenLink:"https://twitter.com/gdevelopapp"},{label:n._({id:"Instagram"}),onClickOpenLink:"https://www.instagram.com/gdevelopapp"},{label:n._({id:"Facebook"}),onClickOpenLink:"https://facebook.com/gdevelopapp"},{type:"separator"},{label:n._({id:"Buy SpeXEngine goodies and swag"}),onClickOpenLink:"https://goodies.engine.spacexpanse.org"},{label:n._({id:"Contribute to SpeXEngine"}),onClickOpenLink:"https://engine.spacexpanse.org/page/contribute"},{label:n._({id:"Create Extensions for SpeXEngine"}),onClickOpenLink:"https://github.com/SpaceXpanse/SpeXEngine/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:n._({id:"Help to Translate SpeXEngine"}),onClickOpenLink:"https://crowdin.com/project/spexengine"},{label:n._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/SpaceXpanse/SpeXEngine/issues/969"}].concat((0,i.Z)(!(0,s.z1)()&&l?[{type:"separator"},{label:n._({id:"About SpeXEngine"}),onClickSendEvent:"main-menu-open-about"}]:[]))},g=[c].concat((0,i.Z)(d?[u]:[]),[p],(0,i.Z)(d?[h]:[]),[f]);return(0,s.z1)()&&l&&(g.unshift({label:n._({id:"SpeXEngine 5"}),submenu:[{label:n._({id:"About SpeXEngine"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:n._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:n._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:n._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:n._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),u.submenu.push({type:"separator"},{label:n._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),h.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),g},h=function(e,t){return function e(n){return n.map((function(n){var i=n.onClickSendEvent,a=n.onClickOpenLink,s=n.eventArgs,c=(0,o.Z)(n,u),d=i||a;return(0,r.Z)((0,r.Z)({},c),{},{click:d?function(){if(n.onClickSendEvent){var e=function(e,t){return{"main-menu-open":t.onChooseProject,"main-menu-open-recent":t.onOpenRecentFile,"main-menu-save":t.onSaveProject,"main-menu-save-as":t.onSaveProjectAs,"main-menu-close":t.onCloseProject,"main-menu-close-app":t.onCloseApp,"main-menu-export":t.onExportProject,"main-menu-create-template":t.onCreateProject,"main-menu-create-blank":t.onCreateBlank,"main-menu-open-project-manager":t.onOpenProjectManager,"main-menu-open-home-page":t.onOpenHomePage,"main-menu-open-debugger":t.onOpenDebugger,"main-menu-open-about":t.onOpenAbout,"main-menu-open-preferences":t.onOpenPreferences,"main-menu-open-language":t.onOpenLanguage,"main-menu-open-profile":t.onOpenProfile,"main-menu-open-games-dashboard":t.onOpenGamesDashboard,"update-status":t.setElectronUpdateStatus}[e]||function(){}}(n.onClickSendEvent,t);s?e(s):e()}n.onClickOpenLink&&l.ZP.openExternalURL(n.onClickOpenLink)}:void 0,submenu:n.submenu?e(n.submenu):void 0})}))}(e)}},62052:function(e,t,n){"use strict";n.d(t,{Z:function(){return Tt}});var r=n(28381),o=n(15671),i=n(43144),a=n(60136),s=n(29388),l=n(61915),c=n(50465),u=n(17777),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(r.Component),p=(0,u.DragDropContext)((0,l.default)(c.default))(d),h=n(1413),f=n(15861),g=n(64687),m=n.n(g),x=n(36600),v=n(68151),b=n(93431),j=(n(94492),n(71445),n(29439)),C=n(67835),y=n(1773),Z=n(40243),k=n(29277),w=n(63854),T=n(86278),E=n(1589),S=n(61325),P=n(32832),I=n(66789),D=n(68009),A=n(29343),L={circularProgress:{height:20,width:20}},M=function(e,t){return!(!t||!t.allowEmpty||""!==e)||!!e&&/^[\w|-]+$/.test(e)&&e.length<31},F=(0,A.jsx)(x.Trans,{id:"Please pick a short username with only alphanumeric characters as well as _ and -"}),O=(0,A.jsx)(x.Trans,{id:"This username is already used, please pick another one."}),R=function(e){var t=e.initialUsername,n=e.value,o=e.onChange,i=e.errorText,a=e.allowEmpty,s=e.onAvailabilityChecked,l=e.onAvailabilityCheckLoading,c=e.isValidatingUsername,u=e.disabled,d=M(n,{allowEmpty:!!a})?void 0:F,p=r.useState(null),h=(0,j.Z)(p,2),g=h[0],v=h[1],C=function(e){var t=e.usernameAvailability,n=e.error;s(t),v(n),l(!1)},y=(0,D.N)(function(){var e=(0,f.Z)(m().mark((function e(n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.toLowerCase()!==n.toLowerCase()){e.next=3;break}return C({usernameAvailability:{username:n,isAvailable:!0},error:null}),e.abrupt("return");case 3:if(n&&M(n,{allowEmpty:!!a})){e.next=6;break}return C({usernameAvailability:null,error:null}),e.abrupt("return");case 6:return e.prev=6,e.next=9,(0,b.HW)(n);case 9:if(r=e.sent){e.next=14;break}throw new Error("Could not get username availability.");case 14:C({usernameAvailability:r,error:r.isAvailable?null:O});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),console.error("Unable to check username availability.",e.t0),C({usernameAvailability:null,error:null});case 21:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),500);return r.useEffect((function(){y(n)}),[n,y]),(0,A.jsx)(k.ZP,{autoFocus:"desktop",value:n,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Username"}),fullWidth:!0,onChange:function(e,t){o(e,t),t&&l(!0)},errorText:d||g||i,endAdornment:c&&(0,A.jsx)(I.Z,{style:L.circularProgress}),disabled:u,maxLength:50})},B=n(21601),_=n(4076),N=n(24893),U=n(96591),H=n(46448),V=function(e){if(e)return"auth/invalid-email"===e.code?(0,A.jsx)(x.Trans,{id:"This email is invalid."}):"auth/user-disabled"===e.code?(0,A.jsx)(x.Trans,{id:"This account has been deactivated or deleted."}):"auth/user-not-found"===e.code?(0,A.jsx)(x.Trans,{id:"This user was not found: have you created your account?"}):"auth/email-already-in-use"===e.code?(0,A.jsx)(x.Trans,{id:"This email was already used for another account."}):"auth/operation-not-allowed"===e.code?(0,A.jsx)(x.Trans,{id:"Service seems to be unavailable, please try again later."}):"auth/requires-recent-login"===e.code?(0,A.jsx)(x.Trans,{id:"Please log out and log in again to verify your identify, then change your email."}):void 0},W=function(e){if(e)return"auth/too-many-requests"===e.code?(0,A.jsx)(x.Trans,{id:"That's a lot of unsuccessful login attempts! Wait a bit before trying again or reset your password."}):"auth/wrong-password"===e.code?(0,A.jsx)(x.Trans,{id:"The password is invalid."}):"auth/weak-password"===e.code?(0,A.jsx)(x.Trans,{id:"This password is too weak: please use more letters and digits."}):void 0},z=function(e){var t=e.onClose,n=e.onGoToLogin,o=e.onCreateAccount,i=e.createAccountInProgress,a=e.error,s=(0,H.L)(),l={formContainer:{width:"small"==={windowWidth:s}.windowWidth?"95%":"60%",marginTop:20}},c=r.useState(""),u=(0,j.Z)(c,2),d=u[0],p=u[1],h=r.useState(""),g=(0,j.Z)(h,2),v=g[0],b=g[1],I=r.useState(""),D=(0,j.Z)(I,2),L=D[0],F=D[1],O=r.useState(!1),z=(0,j.Z)(O,2),G=z[0],Y=z[1],q=r.useState(null),X=(0,j.Z)(q,2),J=X[0],K=X[1],Q=r.useState(!1),$=(0,j.Z)(Q,2),ee=$[0],te=$[1],ne=!i&&M(L,{allowEmpty:!0})&&!ee&&(!J||J.isAvailable),re=function(){var e=(0,f.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,o({email:d.trim(),password:v,username:L,getNewsletterEmail:G});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,A.jsx)(y.ZP,{title:null,id:"create-account-dialog",actions:[(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"Cancel"}),disabled:i,primary:!1,onClick:t},"close"),(0,A.jsx)(w.Z,{isLoading:i,children:(0,A.jsx)(y.vF,{label:(0,A.jsx)(x.Trans,{id:"Create account"}),id:"create-account-button",primary:!0,disabled:!ne,onClick:re})},"create-account")],secondaryActions:[(0,A.jsx)(_.Z,{helpPagePath:"/interface/profile"},"help")],cannotBeDismissed:i,onApply:re,onRequestClose:function(){i||t()},maxWidth:"sm",open:!0,flexColumnBody:!0,children:(0,A.jsxs)(S.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(N.Z,{fontSize:"large"}),(0,A.jsx)(T.Z,{size:"title",align:"center",children:(0,A.jsx)(x.Trans,{id:"Sign up for free!"})}),(0,A.jsxs)(Z.sg,{noMargin:!0,alignItems:"center",children:[(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,align:"center",children:(0,A.jsx)(x.Trans,{id:"Welcome to SpeXEngine!"})}),(0,A.jsxs)(S.pJ,{noMargin:!0,children:[(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,align:"center",children:(0,A.jsx)(x.Trans,{id:"Already a member?"})}),(0,A.jsx)(U.Z,{href:"#",onClick:n,disabled:i,children:(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,A.jsx)(x.Trans,{id:"Log in to your account"})})})]})]}),(0,A.jsx)("div",{style:l.formContainer,children:(0,A.jsx)("form",{onSubmit:function(e){e.preventDefault(),re()},autoComplete:"on",name:"createAccount",children:(0,A.jsxs)(S.ak,{noMargin:!0,children:[(0,A.jsx)(R,{value:L,onChange:function(e,t){F(t)},allowEmpty:!0,onAvailabilityChecked:K,onAvailabilityCheckLoading:te,isValidatingUsername:ee,disabled:i}),(0,A.jsx)(k.ZP,{value:d,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Email"}),errorText:V(a),fullWidth:!0,required:!0,onChange:function(e,t){p(t)},onBlur:function(e){p(e.currentTarget.value.trim())},disabled:i}),(0,A.jsx)(k.ZP,{value:v,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Password"}),errorText:W(a),type:"password",fullWidth:!0,required:!0,onChange:function(e,t){b(t)},disabled:i}),(0,A.jsx)(B.Z,{label:(0,A.jsx)(x.Trans,{id:"I want to receive the SpeXEngine Newsletter"}),checked:G,onCheck:function(e,t){Y(t)},disabled:i}),(0,A.jsx)("input",{type:"submit",value:"Submit",style:{display:"none"}})]})})}),(0,A.jsx)(E.Z,{children:(0,A.jsx)(P.r,{translatableSource:{id:"By creating an account and using SpeXEngine, you agree to the [Terms and Conditions](https://engine.spacexpanse.org/page/terms-and-conditions)."}})})]})})},G=/^(.+)@(.+)$/,Y=function(e){var t=e.onClose,n=e.onForgotPassword,o=r.useState(""),i=(0,j.Z)(o,2),a=i[0],s=i[1],l=r.useState(!1),c=(0,j.Z)(l,2),u=c[0],d=c[1],p=r.useState(!1),h=(0,j.Z)(p,2),g=h[0],v=h[1],b=r.useState(!0),E=(0,j.Z)(b,2),S=E[0],P=E[1],I=function(){var e=(0,f.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.trim(),s(t),P(G.test(t)),!g&&a&&S){e.next=5;break}return e.abrupt("return");case 5:return v(!0),e.next=8,n({email:a});case 8:v(!1),d(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsx)(y.ZP,{title:(0,A.jsx)(x.Trans,{id:"Reset your password"}),open:!0,actions:[(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"Close"}),onClick:t,disabled:g},"close"),u?null:(0,A.jsx)(w.Z,{isLoading:g,children:(0,A.jsx)(y.vF,{label:(0,A.jsx)(x.Trans,{id:"Reset password"}),primary:!0,onClick:I,disabled:g||!S})},"reset")],cannotBeDismissed:g,onRequestClose:t,maxWidth:"xs",onApply:I,children:u?(0,A.jsx)(Z.sg,{noMargin:!0,children:(0,A.jsx)(T.Z,{children:(0,A.jsx)(x.Trans,{id:"You should have received an email containing instructions to reset and set a new password. Once it's done, you can use your new password in SpeXEngine."})})}):(0,A.jsx)("form",{onSubmit:function(e){e.preventDefault(),I()},autoComplete:"on",name:"resetPassword",children:(0,A.jsx)(Z.sg,{noMargin:!0,children:(0,A.jsx)(k.ZP,{autoFocus:"desktop",value:a,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Email"}),onChange:function(e,t){S||P(!0),s(t)},errorText:S?void 0:(0,A.jsx)(x.Trans,{id:"Invalid email address."}),fullWidth:!0,onBlur:function(e){var t=e.currentTarget.value.trim();s(t),P(G.test(t))}})})})})},q={marginTop:20},X=function(e){var t=e.onClose,n=e.onGoToCreateAccount,o=e.onLogin,i=e.onForgotPassword,a=e.loginInProgress,s=e.error,l="small"===(0,H.L)(),c=r.useState(""),u=(0,j.Z)(c,2),d=u[0],p=u[1],f=r.useState(""),g=(0,j.Z)(f,2),m=g[0],v=g[1],b=r.useState(!1),E=(0,j.Z)(b,2),P=E[0],I=E[1],D=function(){a||o({email:d.trim(),password:m})},L=[(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"Cancel"}),disabled:a,primary:!1,onClick:t},"cancel"),(0,A.jsx)(w.Z,{isLoading:a,children:(0,A.jsx)(y.vF,{id:"login-button",label:(0,A.jsx)(x.Trans,{id:"Login"}),primary:!0,onClick:D,disabled:a})},"login")];return(0,A.jsxs)(y.ZP,{title:null,id:"login-dialog",actions:L,secondaryActions:[(0,A.jsx)(_.Z,{helpPagePath:"/interface/profile"},"help")],cannotBeDismissed:a,onRequestClose:t,onApply:function(){P||D()},maxWidth:"sm",open:!0,flexColumnBody:!0,children:[(0,A.jsxs)(S.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(N.Z,{fontSize:"large"}),(0,A.jsx)(T.Z,{size:"title",align:"center",children:(0,A.jsx)(x.Trans,{id:"Log in to your account"})}),(0,A.jsxs)(Z.sg,{noMargin:!0,alignItems:"center",children:[(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,children:(0,A.jsx)(x.Trans,{id:"Don't have an account yet?"})}),(0,A.jsx)(U.Z,{href:"",onClick:n,disabled:a,children:(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,A.jsx)(x.Trans,{id:"Create an account"})})})]}),(0,A.jsx)("div",{style:(0,h.Z)((0,h.Z)({},q),{},{width:l?"100%":"60%"}),children:(0,A.jsx)("form",{onSubmit:function(e){e.preventDefault(),D()},autoComplete:"on",name:"login",children:(0,A.jsxs)(S.ak,{noMargin:!0,children:[(0,A.jsx)(k.ZP,{autoFocus:"desktop",value:d,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Email"}),errorText:V(s),onChange:function(e,t){p(t)},onBlur:function(e){p(e.currentTarget.value.trim())},fullWidth:!0,disabled:a}),(0,A.jsx)(k.ZP,{value:m,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Password"}),errorText:W(s),type:"password",onChange:function(e,t){v(t)},fullWidth:!0,disabled:a}),(0,A.jsx)("input",{type:"submit",value:"Submit",style:{display:"none"}})]})})}),(0,A.jsx)(U.Z,{href:"",onClick:function(){return I(!0)},disabled:a,children:(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,A.jsx)(x.Trans,{id:"Did you forget your password?"})})})]}),P&&(0,A.jsx)(Y,{onClose:function(){return I(!1)},onForgotPassword:i})]})},J=n(67724),K=n(71106),Q=n(42699),$=n(65056),ee=function(e){if(e)return"auth/username-used"===e.code?O:"auth/malformed-username"===e.code?F:void 0},te=function(e){var t=e.id,n=e.value,r=e.onChange,o=e.disabled,i=e.translatableHintText,a=b.Ty[t];return(0,A.jsxs)(S.pJ,{noMargin:!0,alignItems:"center",children:[a.icon,(0,A.jsx)(k.ZP,{value:n,fullWidth:!0,translatableHintText:i,onChange:r,disabled:o,errorText:a.getFormattingError?a.getFormattingError(n):void 0,maxLength:a.maxLength,startAdornment:a.prefix?(0,A.jsx)(T.Z,{noMargin:!0,children:a.prefix}):void 0})]})},ne=function(e){var t=e.profile,n=e.subscription,o=e.onClose,i=e.onEdit,a=e.onDelete,s=e.actionInProgress,l=e.error,c=(0,$.Z)(),u=c.showDeleteConfirmation,d=c.showAlert,p=t.communityLinks||{},h=r.useState(t.username||""),g=(0,j.Z)(h,2),Z=g[0],T=g[1],E=r.useState(t.description||""),P=(0,j.Z)(E,2),I=P[0],D=P[1],L=r.useState(t.donateLink||""),F=(0,j.Z)(L,2),O=F[0],_=F[1],N=r.useState(p.personalWebsiteLink||""),U=(0,j.Z)(N,2),H=U[0],V=U[1],W=r.useState(p.personalWebsite2Link||""),z=(0,j.Z)(W,2),G=z[0],Y=z[1],q=r.useState(p.twitterUsername||""),X=(0,j.Z)(q,2),J=X[0],K=X[1],ne=r.useState(p.facebookUsername||""),re=(0,j.Z)(ne,2),oe=re[0],ie=re[1],ae=r.useState(p.youtubeUsername||""),se=(0,j.Z)(ae,2),le=se[0],ce=se[1],ue=r.useState(p.tiktokUsername||""),de=(0,j.Z)(ue,2),pe=de[0],he=de[1],fe=r.useState(p.instagramUsername||""),ge=(0,j.Z)(fe,2),me=ge[0],xe=ge[1],ve=r.useState(p.redditUsername||""),be=(0,j.Z)(ve,2),je=be[0],Ce=be[1],ye=r.useState(p.snapchatUsername||""),Ze=(0,j.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=r.useState(p.discordServerLink||""),Ee=(0,j.Z)(Te,2),Se=Ee[0],Pe=Ee[1],Ie=r.useState(!!t.getGameStatsEmail),De=(0,j.Z)(Ie,2),Ae=De[0],Le=De[1],Me=r.useState(!!t.getNewsletterEmail),Fe=(0,j.Z)(Me,2),Oe=Fe[0],Re=Fe[1],Be=r.useState(null),_e=(0,j.Z)(Be,2),Ne=_e[0],Ue=_e[1],He=r.useState(!1),Ve=(0,j.Z)(He,2),We=Ve[0],ze=Ve[1],Ge=b.Ty.personalWebsiteLink.getFormattingError(H),Ye=b.Ty.personalWebsite2Link.getFormattingError(G),qe=b.Ty.discordServerLink.getFormattingError(Se),Xe=b.Pk.getFormattingError(O),Je=b.Ty.tiktokUsername.getFormattingError(pe),Ke=Ge||Ye||qe||Xe||Je,Qe=!s&&M(Z,{allowEmpty:!1})&&!We&&(!Ne||Ne.isAvailable)&&!Ke,$e=function(){var e=(0,f.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qe){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i({username:Z,description:I,getGameStatsEmail:Ae,getNewsletterEmail:Oe,donateLink:O,communityLinks:{personalWebsiteLink:H,personalWebsite2Link:G,twitterUsername:J,facebookUsername:oe,youtubeUsername:le,tiktokUsername:pe,instagramUsername:me,redditUsername:je,snapchatUsername:ke,discordServerLink:Se}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),et=!s,tt=r.useCallback(function(){var e=(0,f.Z)(m().mark((function e(r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(et){e.next=2;break}return e.abrupt("return");case 2:if(!(0,v.e_)(n)){e.next=6;break}return e.next=5,d({title:{id:"You have an active subscription"},message:{id:"You can't delete your account while you have an active subscription. Please cancel your subscription first."}});case 5:return e.abrupt("return");case 6:return e.next=8,u({title:{id:"Delete account"},message:{id:"Before you go, make sure that you've unpublished all your games on games.engine.spacexpanse.org. Otherwise they will stay visible to the community. Are you sure you want to permanently delete your account? This action cannot be undone."},confirmButtonLabel:{id:"Delete account"},confirmText:t.email,fieldMessage:{id:"Type your email to confirm"}});case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,a();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[et,a,t.email,n,u,d]),nt=[(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"Back"}),disabled:s,primary:!1,onClick:o},"back"),(0,A.jsx)(w.Z,{isLoading:s,children:(0,A.jsx)(y.vF,{label:(0,A.jsx)(x.Trans,{id:"Save"}),primary:!0,disabled:!Qe,onClick:$e})},"edit")],rt=[(0,A.jsx)(Q.Z,{label:(0,A.jsx)(x.Trans,{id:"Delete my account"}),disabled:s,primary:!1,onClick:tt},"delete")];return(0,A.jsx)(x.I18n,{children:function(e){var n=e.i18n;return(0,A.jsx)(y.ZP,{title:(0,A.jsx)(x.Trans,{id:"Edit your SpeXEngine profile"}),actions:nt,secondaryActions:rt,maxWidth:"sm",cannotBeDismissed:s,onRequestClose:o,onApply:$e,open:!0,children:(0,A.jsx)("form",{onSubmit:function(e){e.preventDefault(),$e()},autoComplete:"on",name:"editProfile",children:(0,A.jsxs)(S.ak,{noMargin:!0,children:[(0,A.jsx)(R,{initialUsername:t.username,value:Z,onChange:function(e,t){T(t)},errorText:ee(l),onAvailabilityChecked:Ue,onAvailabilityCheckLoading:ze,isValidatingUsername:We,disabled:s}),(0,A.jsx)(k.ZP,{value:I,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Bio"}),fullWidth:!0,multiline:!0,rows:3,rowsMax:5,translatableHintText:{id:"What are you using SpeXEngine for?"},onChange:function(e,t){D(t)},disabled:s,floatingLabelFixed:!0,maxLength:1e4}),(0,A.jsx)(te,{id:"personalWebsiteLink",value:H,translatableHintText:{id:"Personal website, itch.io page, etc."},onChange:function(e,t){V(t)},disabled:s}),(0,A.jsx)(te,{id:"personalWebsite2Link",value:G,translatableHintText:{id:"Another personal website, newgrounds.com page, etc."},onChange:function(e,t){Y(t)},disabled:s}),(0,A.jsx)(te,{id:"twitterUsername",value:J,translatableHintText:{id:"username"},onChange:function(e,t){K(t)},disabled:s}),(0,A.jsx)(te,{id:"facebookUsername",value:oe,translatableHintText:{id:"username"},onChange:function(e,t){ie(t)},disabled:s}),(0,A.jsx)(te,{id:"youtubeUsername",value:le,translatableHintText:{id:"username"},onChange:function(e,t){ce(t)},disabled:s}),(0,A.jsx)(te,{id:"tiktokUsername",value:pe,translatableHintText:{id:"username"},onChange:function(e,t){he(t)},disabled:s}),(0,A.jsx)(te,{id:"instagramUsername",value:me,translatableHintText:{id:"username"},onChange:function(e,t){xe(t)},disabled:s}),(0,A.jsx)(te,{id:"redditUsername",value:je,translatableHintText:{id:"username"},onChange:function(e,t){Ce(t)},disabled:s}),(0,A.jsx)(te,{id:"snapchatUsername",value:ke,translatableHintText:{id:"username"},onChange:function(e,t){we(t)},disabled:s}),(0,A.jsx)(te,{id:"discordServerLink",value:Se,translatableHintText:{id:"Discord server, e.g: https://discord.gg/..."},onChange:function(e,t){Pe(t)},disabled:s}),(0,A.jsx)(k.ZP,{value:O,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Donate link"}),fullWidth:!0,translatableHintText:{id:"Do you have a Patreon? Ko-fi? Paypal?"},onChange:function(e,t){_(t)},disabled:s,floatingLabelFixed:!0,helperMarkdownText:n._({id:"Add a link to your donation page. It will be displayed on your games.engine.spacexpanse.org profile and game pages."}),errorText:Xe,maxLength:b.Pk.maxLength}),(0,A.jsx)(B.Z,{label:(0,A.jsx)(x.Trans,{id:"I want to receive the SpeXEngine Newsletter"}),checked:Oe,onCheck:function(e,t){Re(t)},disabled:s}),(0,A.jsx)(B.Z,{label:(0,A.jsx)(x.Trans,{id:"I want to receive weekly stats about my games"}),checked:Ae,onCheck:function(e,t){Le(t)},disabled:s}),(0,A.jsx)("input",{type:"submit",value:"Submit",style:{display:"none"}})]})})})}})},re=function(e){var t=e.onClose,n=e.onChangeEmail,o=e.firebaseUser,i=e.changeEmailInProgress,a=e.error,s=r.useState(o.email),l=(0,j.Z)(s,2),c=l[0],u=l[1],d=r.useState(!0),p=(0,j.Z)(d,2),h=p[0],g=p[1],v=function(){var e=(0,f.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.trim(),u(t),g(G.test(t)),!i&&c&&h){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n({email:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsx)(y.ZP,{title:(0,A.jsx)(x.Trans,{id:"Change your email"}),actions:[(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"Back"}),disabled:i,primary:!1,onClick:t},"back"),(0,A.jsx)(w.Z,{isLoading:i,children:(0,A.jsx)(y.vF,{label:(0,A.jsx)(x.Trans,{id:"Save"}),primary:!0,onClick:v,disabled:i})},"change-email")],maxWidth:"xs",cannotBeDismissed:i,onRequestClose:t,onApply:v,open:!0,children:(0,A.jsx)("form",{onSubmit:function(e){e.preventDefault(),v()},autoComplete:"on",name:"changeEmail",children:(0,A.jsx)(S.ak,{noMargin:!0,children:(0,A.jsx)(k.ZP,{value:c,floatingLabelText:(0,A.jsx)(x.Trans,{id:"Email"}),errorText:V(a)||(h?null:(0,A.jsx)(x.Trans,{id:"Invalid email address"})),fullWidth:!0,disabled:i,required:!0,onChange:function(e,t){h||g(!0),u(t)},onBlur:function(e){var t=e.currentTarget.value.trim();u(t),g(G.test(t))}})})})})},oe=n(21676),ie=n(32484),ae=n(49536);function se(e){var t=e.onClose,n=e.authenticatedUser,o=e.sendEmailAutomatically,i=e.showSendEmailButton,a=e.onSendEmail,s=!!n.firebaseUser&&!!n.firebaseUser.emailVerified,l=r.useState(!1),c=(0,j.Z)(l,2),u=c[0],d=c[1];return r.useEffect((function(){!s&&o&&a()}),[s,a,o]),(0,oe.Y)((function(){n.onRefreshFirebaseProfile().catch((function(){}))}),s?null:5e3),(0,A.jsx)(y.ZP,{title:null,actions:[s?(0,A.jsx)(y.vF,{label:(0,A.jsx)(x.Trans,{id:"Done!"}),primary:!0,onClick:t},"close"):(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"I'll do it later"}),primary:!1,onClick:t},"close")],maxWidth:"sm",open:!0,onRequestClose:t,onApply:t,children:(0,A.jsxs)(S.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(N.Z,{fontSize:"large"}),n.firebaseUser?n.firebaseUser.emailVerified?(0,A.jsxs)(S.pJ,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(ae.Z,{}),(0,A.jsx)(T.Z,{size:"title",align:"center",children:(0,A.jsx)(x.Trans,{id:"Email verified"})})]}):(0,A.jsxs)(S.ak,{noMargin:!0,alignItems:"center",children:[(0,A.jsx)(T.Z,{size:"title",align:"center",children:(0,A.jsx)(x.Trans,{id:"Confirm your email"})}),(0,A.jsx)(T.Z,{align:"center",children:(0,A.jsx)(x.Trans,{id:"You will get access to special discounts on the SpeXEngine asset store, as well as weekly stats about your games."})}),!u&&i?(0,A.jsx)(ie.Z,{primary:!0,label:(0,A.jsx)(x.Trans,{id:"Send it again"}),onClick:function(){d(!0),a()}}):(0,A.jsx)(E.Z,{children:(0,A.jsxs)(S.pJ,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(I.Z,{size:20}),(0,A.jsx)(T.Z,{children:(0,A.jsx)(x.Trans,{id:"Email sent to {0}, waiting for validation...",values:{0:n.firebaseUser.email}})})]})})]}):null]})})}var le=n(36262),ce=n(34517),ue=ce.nZ,de=n(84140),pe=n(81683),he=n(90242),fe=n(3550),ge=n(42986),me=[{value:"personal",label:{id:"Personal"}},{value:"student",label:{id:"Student"}},{value:"teacher",label:{id:"Teaching and Training"}},{value:"work-marketing",label:{id:"Marketing and Advertising"}},{value:"work-gamedev",label:{id:"Game studio"}},{value:"work-other",label:{id:"Work (other)"}},{value:"other",label:{id:"Other"}}],xe=[{value:"no-experience",label:{id:"None"}},{value:"nocode-experience",label:{id:"Some no-code or low-code engines"}},{value:"code-experience",label:{id:"Some code based engines (Unity, Unreal Engine...)"}},{value:"code-and-nocode-experience",label:{id:"Both low-code and code based engines"}}],ve=[{value:"friend",label:{id:"Friend/Word of mouth"}},{value:"search",label:{id:"Search engine"}},{value:"social",label:{id:"Social media"}},{value:"work",label:{id:"Work"}},{value:"school",label:{id:"School"}},{value:"youtube",label:{id:"Youtube"}},{value:"blog",label:{id:"Blog article"}},{value:"other",label:{id:"Other"}}],be=[{value:"teach-students",label:{id:"Teach students the principles of Game Development and logic"}},{value:"train-workers",label:{id:"Train workers on specific scenarios"}},{value:"therapy",label:{id:"Develop tools for therapy or rehab"}},{value:"learning-support",label:{id:"Create learning supports for students"}},{value:"other",label:{id:"Other"}}],je=[{value:"learn-gamedev",label:{id:"Learn Game Development principles"}},{value:"create-fun",label:{id:"Create games for fun"}},{value:"create-community",label:{id:"Create games for my community"}},{value:"create-money",label:{id:"Create games for monetisation"}},{value:"other",label:{id:"Other"}}],Ce=[{value:"1",label:{id:"1 person"}},{value:"2-4",label:{id:"2 to 4 people"}},{value:"5-9",label:{id:"5 to 9 people"}},{value:"10-19",label:{id:"10 to 19 people"}},{value:"20-99",label:{id:"20 to 99 people"}},{value:"100-299",label:{id:"100 to 299 people"}},{value:"300+",label:{id:"300 people or more"}}],ye=function(e){var t=e.gdevelopUsage;return"teacher"===t||"work-marketing"===t||"work-gamedev"===t||"work-other"===t},Ze=function(e){var t=e.profile,n=e.onClose,o=e.onSaveAdditionalUserInfo,i=e.updateInProgress,a=(0,H.L)(),s={formContainer:{width:"small"==={windowWidth:a}.windowWidth?"95%":"70%",marginTop:20}},l=r.useContext(fe.Z).currentlyRunningInAppTutorial,c=r.useState(t.gdevelopUsage||""),u=(0,j.Z)(c,2),d=u[0],p=u[1],f=r.useState(t.teamOrCompanySize||""),g=(0,j.Z)(f,2),m=g[0],v=g[1],b=r.useState(t.companyName||""),k=(0,j.Z)(b,2),E=k[0],P=k[1],I=r.useState(t.creationExperience||""),D=(0,j.Z)(I,2),L=D[0],M=D[1],F=r.useState(t.creationGoal||""),O=(0,j.Z)(F,2),R=O[0],B=O[1],_=r.useState(t.hearFrom||""),U=(0,j.Z)(_,2),V=U[0],W=U[1],z=function(){i||o({gdevelopUsage:d,teamOrCompanySize:m,companyName:E,creationExperience:L,creationGoal:R,hearFrom:V})},G={translatableHintText:{id:"Select one"},fullWidth:!0,disabled:i,disableUnderline:!0};if(l)return n(),null;var Y={usage:{title:(0,A.jsx)(x.Trans,{id:"What are you using SpeXEngine for?"}),options:me},teamOrCompanySize:ye({gdevelopUsage:d})?{title:(0,A.jsx)(x.Trans,{id:"Company or Team size"}),options:Ce}:void 0,companyName:ye({gdevelopUsage:d})?{title:"teacher"===d?(0,A.jsx)(x.Trans,{id:"Company, University or School name"}):(0,A.jsx)(x.Trans,{id:"Company name"})}:void 0,creationExperience:{title:(0,A.jsx)(x.Trans,{id:"What kind of game engines have you used before?"}),options:xe},creationGoal:d&&"personal"!==d&&"student"!==d&&"teacher"!==d?void 0:{title:(0,A.jsx)(x.Trans,{id:"What do you want to accomplish with SpeXEngine?"}),options:"teacher"===d?be:je},hearFrom:{title:(0,A.jsx)(x.Trans,{id:"How did you hear about SpeXEngine?"}),options:ve}};return(0,A.jsx)(y.ZP,{title:null,actions:[(0,A.jsx)(C.Z,{label:(0,A.jsx)(x.Trans,{id:"Skip for now"}),primary:!1,onClick:n,disabled:i},"skip"),(0,A.jsx)(w.Z,{isLoading:i,children:(0,A.jsx)(y.vF,{label:(0,A.jsx)(x.Trans,{id:"Submit"}),primary:!0,onClick:z,disabled:i})},"submit-infos")],cannotBeDismissed:i,onApply:z,onRequestClose:function(){i||n()},maxWidth:"sm",open:!l,children:(0,A.jsxs)(S.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(N.Z,{fontSize:"large"}),(0,A.jsx)(T.Z,{size:"title",align:"center",children:(0,A.jsx)(x.Trans,{id:"Tell us about yourself"})}),(0,A.jsx)(Z.sg,{noMargin:!0,alignItems:"center",children:(0,A.jsx)(T.Z,{size:"body2",noMargin:!0,align:"center",children:(0,A.jsx)(x.Trans,{id:"Your answers will help us better understand our users and make the engine better for them. Of course, your answers will stay private and won't be sent to anyone else."})})}),(0,A.jsx)("div",{style:s.formContainer,children:(0,A.jsxs)(S.ak,{noMargin:!0,children:[(0,A.jsx)(pe.Z,(0,h.Z)((0,h.Z)({floatingLabelText:Y.usage.title,value:d,onChange:function(e,t,n){p(n)}},G),{},{children:Y.usage.options.map((function(e){return(0,A.jsx)(he.Z,{value:e.value,label:e.label},e.value)}))})),Y.teamOrCompanySize&&(0,A.jsx)(pe.Z,(0,h.Z)((0,h.Z)({floatingLabelText:Y.teamOrCompanySize.title,value:m,onChange:function(e,t,n){v(n)}},G),{},{children:Y.teamOrCompanySize.options.map((function(e){return(0,A.jsx)(he.Z,{value:e.value,label:e.label},e.value)}))})),Y.companyName&&(0,A.jsx)(ge.Z,{floatingLabelText:Y.companyName.title,value:E,onChange:function(e){P((e||"").substr(0,60))},fullWidth:!0,disabled:i}),(0,A.jsx)(pe.Z,(0,h.Z)((0,h.Z)({floatingLabelText:Y.creationExperience.title,value:L,onChange:function(e,t,n){M(n)}},G),{},{children:Y.creationExperience.options.map((function(e){return(0,A.jsx)(he.Z,{value:e.value,label:e.label},e.value)}))})),Y.creationGoal&&(0,A.jsx)(pe.Z,(0,h.Z)((0,h.Z)({floatingLabelText:Y.creationGoal.title,value:R,onChange:function(e,t,n){B(n)}},G),{},{children:Y.creationGoal.options.map((function(e){return(0,A.jsx)(he.Z,{value:e.value,label:e.label},e.value)}))})),(0,A.jsx)(pe.Z,(0,h.Z)((0,h.Z)({floatingLabelText:Y.hearFrom.title,value:V,onChange:function(e,t,n){W(n)}},G),{},{children:Y.hearFrom.options.map((function(e){return(0,A.jsx)(he.Z,{value:e.value,label:e.label},e.value)}))}))]})})]})})},ke=n(53385),we=n(93433),Te=function(){function e(t){(0,o.Z)(this,e),this._promise=null,this._requestSender=t}return(0,i.Z)(e,[{key:"launchRequestOrGetOngoingPromise",value:function(e){var t=this;return this._promise||(this._promise=this._requestSender.apply(this,(0,we.Z)(e)).finally((function(){t._promise=null}))),this._promise}}]),e}(),Ee=n(794),Se=function(){var e=(0,f.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ue(),(0,Ee.rM)()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={authenticatedUser:K.aZ,loginDialogOpen:!1,createAccountDialogOpen:!1,loginInProgress:!1,createAccountInProgress:!1,editProfileDialogOpen:!1,editInProgress:!1,deleteInProgress:!1,additionalUserInfoDialogOpen:!1,authError:null,resetPasswordDialogOpen:!1,emailVerificationDialogOpen:!1,emailVerificationDialogProps:{sendEmailAutomatically:!1,showSendEmailButton:!1},forgotPasswordInProgress:!1,changeEmailDialogOpen:!1,changeEmailInProgress:!1,userSnackbarMessage:null},e._automaticallyUpdateUserProfile=!0,e._hasNotifiedUserAboutAdditionalInfo=!1,e._hasNotifiedUserAboutEmailVerification=!1,e._cloudProjectListingDeduplicator=new Te(ce.xU),e._reloadFirebaseProfile=(0,f.Z)(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.authentication,t.prev=1,t.next=4,n.getFirebaseUser();case 4:if(r=t.sent){t.next=8;break}return e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{authenticated:!1,profile:null,usages:null,limits:null,subscription:null})}})),t.abrupt("return",null);case 8:return e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{authenticated:!0,firebaseUser:r})}})),t.abrupt("return",r);case 12:throw t.prev=12,t.t0=t.catch(1),console.error("Unable to fetch the authenticated Firebase user:",t.t0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,12]])}))),e._fetchUserProfileWithoutThrowingErrors=(0,f.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._fetchUserProfile();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Error while fetching the user profile - but ignoring it.",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),e._fetchUserProfile=(0,f.Z)(m().mark((function t(){var n,r,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.authentication,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{loginState:"loggingIn",cloudProjectsFetchingErrorLabel:null})}})),t.prev=2,t.next=5,e._reloadFirebaseProfile();case 5:if(r=t.sent){t.next=10;break}return console.info("User is not authenticated."),e._markAuthenticatedUserAsLoggedOut(),t.abrupt("return");case 10:t.next=17;break;case 12:throw t.prev=12,t.t0=t.catch(2),console.error("Unable to fetch the authenticated Firebase user:",t.t0),e._markAuthenticatedUserAsLoggedOut(),t.t0;case 17:return(0,v.Xp)(n.getAuthorizationHeader,r.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{usages:t})}}))}),(function(e){console.error("Error while loading user usages:",e)})),(0,v.rE)(n.getAuthorizationHeader,r.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{subscription:t})}}))}),(function(e){console.error("Error while loading user subscriptions:",e)})),(0,v.Mm)(n.getAuthorizationHeader,r.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{limits:t})}}))}),(function(e){console.error("Error while loading user limits:",e)})),e._cloudProjectListingDeduplicator.launchRequestOrGetOngoingPromise([n.getAuthorizationHeader,r.uid]).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{cloudProjects:t})}}))}),(function(t){console.error("Error while loading user cloud projects:",t),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{cloudProjectsFetchingErrorLabel:(0,A.jsx)(x.Trans,{id:"We couldn't load your cloud projects. Verify your internet connection or try again later."})})}}))})),(0,de.QR)(n.getAuthorizationHeader,{userId:r.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{receivedAssetPacks:t})}}))}),(function(e){console.error("Error while loading received asset packs:",e)})),(0,de.Tm)(n.getAuthorizationHeader,{userId:r.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{receivedAssetShortHeaders:t})}}))}),(function(e){console.error("Error while loading received asset short headers:",e)})),e._fetchUserBadges(),t.next=26,n.getUserProfile(n.getAuthorizationHeader);case 26:if((o=t.sent).isCreator){t.next=36;break}return t.prev=28,t.next=31,n.editUserProfile(n.getAuthorizationHeader,{isCreator:!0});case 31:t.next=36;break;case 33:t.prev=33,t.t1=t.catch(28),console.error("Error while updating the user profile:",t.t1);case 36:e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{profile:o,loginState:"done"})}})),(0,J.jP)(e.state.authenticatedUser),e._notifyUserAboutEmailVerificationAndAdditionalInfo();case 39:case"end":return t.stop()}}),t,null,[[2,12],[28,33]])}))),e._fetchUserSubscriptionLimitsAndUsages=(0,f.Z)(m().mark((function t(){var n,r,o,i,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,v.Xp)(n.getAuthorizationHeader,r.uid);case 7:o=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{usages:o})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user usages:",t.t0);case 14:return t.prev=14,t.next=17,(0,v.rE)(n.getAuthorizationHeader,r.uid);case 17:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{subscription:i})}})),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),console.error("Error while loading user subscriptions:",t.t1);case 24:return t.prev=24,t.next=27,(0,v.Mm)(n.getAuthorizationHeader,r.uid);case 27:a=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{limits:a})}})),t.next=34;break;case 31:t.prev=31,t.t2=t.catch(24),console.error("Error while loading user limits:",t.t2);case 34:case"end":return t.stop()}}),t,null,[[4,11],[14,21],[24,31]])}))),e._fetchUserAssets=(0,f.Z)(m().mark((function t(){var n,r,o,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,de.QR)(n.getAuthorizationHeader,{userId:r.uid});case 7:o=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{receivedAssetPacks:o})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received asset packs:",t.t0);case 14:return t.prev=14,t.next=17,(0,de.Tm)(n.getAuthorizationHeader,{userId:r.uid});case 17:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{receivedAssetShortHeaders:i})}})),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),console.error("Error while loading received asset short headers:",t.t1);case 24:case"end":return t.stop()}}),t,null,[[4,11],[14,21]])}))),e._fetchUserCloudProjects=(0,f.Z)(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{cloudProjectsFetchingErrorLabel:null})}})),e._cloudProjectListingDeduplicator.launchRequestOrGetOngoingPromise([n.getAuthorizationHeader,r.uid]).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},n),{},{cloudProjects:t})}}))}),(function(t){console.error("Error while loading user cloud projects:",t),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{cloudProjectsFetchingErrorLabel:(0,A.jsx)(x.Trans,{id:"We couldn't load your cloud projects. Verify your internet connection or try again later."})})}}))}));case 6:case"end":return t.stop()}}),t)}))),e._fetchUserBadges=(0,f.Z)(m().mark((function t(){var n,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.authenticatedUser.firebaseUser){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,b.r0)(n.uid);case 6:r=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),{},{badges:r})}})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Error while loading user badges:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])}))),e._notifyUserAboutEmailVerificationAndAdditionalInfo=function(){var t=e.state.authenticatedUser.profile;if(t){var n=Date.now()-t.createdAt<1e4;!e.state.authenticatedUser.firebaseUser||e.state.authenticatedUser.firebaseUser.emailVerified||e._hasNotifiedUserAboutEmailVerification?e._notifyUserAboutAdditionalInfo():setTimeout((function(){return e.openEmailVerificationDialog({open:!0,sendEmailAutomatically:!1,showSendEmailButton:!n})}),1e3)}},e._notifyUserAboutAdditionalInfo=function(){var t=e.state.authenticatedUser.profile;t&&t&&!e._hasNotifiedUserAboutAdditionalInfo&&function(e){var t=e.gdevelopUsage,n=e.teamOrCompanySize,r=e.companyName,o=e.creationExperience,i=e.creationGoal,a=e.hearFrom;return!e.isEmailAutogenerated&&(!(!ye({gdevelopUsage:t})||n&&r)||!(!function(e){var t=e.gdevelopUsage;return!t||"personal"===t||"student"===t||"teacher"===t}({gdevelopUsage:t})||i)||!(a||t||o))}(t)&&setTimeout((function(){return e.openAdditionalUserInfoDialog(!0)}),1e3)},e._doLogout=(0,f.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.authentication){t.next=3;break}return t.next=3,e.props.authentication.logout();case 3:e._markAuthenticatedUserAsLoggedOut(),Se(),e.showUserSnackbar({message:(0,A.jsx)(x.Trans,{id:"You're now logged out"})});case 6:case"end":return t.stop()}}),t)}))),e._doLogin=function(){var t=(0,f.Z)(m().mark((function t(n){var r,o,i;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({loginInProgress:!0,authError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.login(n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:e.openLoginDialog(!1),o=e.state.authenticatedUser.profile,i=o?o.username:null,e.showUserSnackbar({message:i?(0,A.jsx)(x.Trans,{id:"\ud83d\udc4b Good to see you {username}!",values:{username:i}}):(0,A.jsx)(x.Trans,{id:"\ud83d\udc4b Good to see you!"})}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),e.setState({authError:t.t0});case 19:e.setState({loginInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 21:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}(),e._doEdit=function(){var t=(0,f.Z)(m().mark((function t(n,r){var o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({editInProgress:!0,authError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,o.editUserProfile(o.getAuthorizationHeader,{username:n.username,description:n.description,getGameStatsEmail:n.getGameStatsEmail,getNewsletterEmail:n.getNewsletterEmail,appLanguage:r.language,donateLink:n.donateLink,communityLinks:n.communityLinks});case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:e.openEditProfileDialog(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e.setState({authError:t.t0});case 16:e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._doCreateAccount=function(){var t=(0,f.Z)(m().mark((function t(n,r){var o,i,a,s;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({createAccountInProgress:!0,authError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,o.createFirebaseAccount(n);case 8:return t.prev=8,t.next=11,o.createUser(o.getAuthorizationHeader,n,r.language);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(8);case 15:return t.next=17,e._fetchUserProfileWithoutThrowingErrors();case 17:e.openCreateAccountDialog(!1),(0,J.rP)(n.email),i=e.state.authenticatedUser.firebaseUser,(0,J.Oy)(i),a=e.state.authenticatedUser.profile,s=a?a.username:null,e.showUserSnackbar({message:s?(0,A.jsx)(x.Trans,{id:"\ud83d\udc4b Welcome to SpeXEngine {username}!",values:{username:s}}):(0,A.jsx)(x.Trans,{id:"\ud83d\udc4b Welcome to SpeXEngine!"})}),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(5),e.setState({authError:t.t1});case 29:e.setState({createAccountInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 31:case"end":return t.stop()}}),t,null,[[5,26],[8,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._doDeleteAccount=(0,f.Z)(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({deleteInProgress:!0,authError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,n.deleteAccount(n.getAuthorizationHeader);case 8:e._markAuthenticatedUserAsLoggedOut(),Se(),e.openEditProfileDialog(!1),e.showUserSnackbar({message:(0,A.jsx)(x.Trans,{id:"Your account has been deleted!"})}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),e.setState({authError:t.t0});case 17:e.setState({deleteInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 19:case"end":return t.stop()}}),t,null,[[5,14]])}))),e._doSaveAdditionalUserInfo=function(){var t=(0,f.Z)(m().mark((function t(n){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({editInProgress:!0}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.editUserProfile(r.getAuthorizationHeader,{gdevelopUsage:n.gdevelopUsage,teamOrCompanySize:n.teamOrCompanySize,companyName:n.companyName,creationExperience:n.creationExperience,creationGoal:n.creationGoal,hearFrom:n.hearFrom});case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),console.error("Error while saving additional user info:",t.t0);case 15:return t.prev=15,e.openAdditionalUserInfoDialog(!1),e.showUserSnackbar({message:(0,A.jsx)(x.Trans,{id:"Thank you!"})}),t.finish(15);case 19:e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 21:case"end":return t.stop()}}),t,null,[[5,12,15,19]])})));return function(e){return t.apply(this,arguments)}}(),e._doForgotPassword=function(){var t=(0,f.Z)(m().mark((function t(n){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,r.forgotPassword(n);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(3);case 10:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e._doSendEmailVerification=(0,f.Z)(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.sendFirebaseEmailVerification();case 5:case"end":return t.stop()}}),t)}))),e._doAcceptGameStatsEmail=(0,f.Z)(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({editInProgress:!0,authError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,n.acceptGameStatsEmail(n.getAuthorizationHeader);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.setState({authError:t.t0});case 15:e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 17:case"end":return t.stop()}}),t,null,[[5,12]])}))),e._doChangeEmail=function(){var t=(0,f.Z)(m().mark((function t(n){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({changeEmailInProgress:!0,authError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.changeEmail(r.getAuthorizationHeader,n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:e.openChangeEmailDialog(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e.setState({authError:t.t0});case 16:e.setState({changeEmailInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}(),e.openEmailVerificationDialog=function(t){var n=t.open,r=void 0===n||n,o=t.sendEmailAutomatically,i=void 0!==o&&o,a=t.showSendEmailButton,s=void 0!==a&&a;e.setState({emailVerificationDialogOpen:r,emailVerificationDialogProps:{sendEmailAutomatically:!!r&&i,showSendEmailButton:!!r&&s}}),r||(e._hasNotifiedUserAboutEmailVerification=!0,e._notifyUserAboutAdditionalInfo())},e.openResetPassword=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({resetPasswordDialogOpen:t,authError:null})},e.openLoginDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({loginDialogOpen:t,createAccountDialogOpen:!1,authError:null})},e.openAdditionalUserInfoDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e._hasNotifiedUserAboutAdditionalInfo=!0,e.setState({additionalUserInfoDialogOpen:t,createAccountDialogOpen:!1,loginDialogOpen:!1})},e.showUserSnackbar=function(t){var n=t.message;e.setState({userSnackbarMessage:n?(0,A.jsx)("span",{children:n}):null})},e.openEditProfileDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({editProfileDialogOpen:t,authError:null})},e.openCreateAccountDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({loginDialogOpen:!1,createAccountDialogOpen:t,authError:null})},e.openChangeEmailDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({changeEmailDialogOpen:t,authError:null})},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,f.Z)(m().mark((function e(){var t=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initializeAuthenticatedUser(),this.props.authentication.addUserLogoutListener(J.mA),this.props.authentication.addUserLogoutListener(this._fetchUserProfileWithoutThrowingErrors),this.props.authentication.addUserUpdateListener((function(){t._automaticallyUpdateUserProfile?(console.info("Fetching user profile as the authenticated user changed..."),t._fetchUserProfileWithoutThrowingErrors()):console.info("The authenticated user changed, but not fetching the user profile again (deactivated).")})),!this.props.authentication.getFirebaseUserSync()){e.next=12;break}return console.info("Fetching user profile as authenticated user found at startup..."),this._automaticallyUpdateUserProfile=!1,e.next=9,this._fetchUserProfileWithoutThrowingErrors();case 9:this._automaticallyUpdateUserProfile=!0,e.next=15;break;case 12:console.info("No authenticated user found at startup."),this._markAuthenticatedUserAsLoggedOut(),(0,J.jP)(this.state.authenticatedUser);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_initializeAuthenticatedUser",value:function(){var e=this;this.setState((function(t){t.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},K.aZ),{},{onLogout:e._doLogout,onBadgesChanged:e._fetchUserBadges,onCloudProjectsChanged:e._fetchUserCloudProjects,onLogin:function(){return e.openLoginDialog(!0)},onEdit:function(){return e.openEditProfileDialog(!0)},onChangeEmail:function(){return e.openChangeEmailDialog(!0)},onCreateAccount:function(){return e.openCreateAccountDialog(!0)},onRefreshUserProfile:e._fetchUserProfile,onRefreshFirebaseProfile:function(){var t=(0,f.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._reloadFirebaseProfile();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onSubscriptionUpdated:e._fetchUserSubscriptionLimitsAndUsages,onPurchaseSuccessful:e._fetchUserAssets,onSendEmailVerification:e._doSendEmailVerification,onOpenEmailVerificationDialog:function(t){var n=t.sendEmailAutomatically,r=t.showSendEmailButton;return e.openEmailVerificationDialog({open:!0,sendEmailAutomatically:n,showSendEmailButton:r})},onAcceptGameStatsEmail:e._doAcceptGameStatsEmail,getAuthorizationHeader:function(){return e.props.authentication.getAuthorizationHeader()}})}})),this._hasNotifiedUserAboutAdditionalInfo=!1,this._hasNotifiedUserAboutEmailVerification=!1}},{key:"_markAuthenticatedUserAsLoggedOut",value:function(){this.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,h.Z)((0,h.Z)({},t),K.Pu)}})),this._hasNotifiedUserAboutAdditionalInfo=!1,this._hasNotifiedUserAboutEmailVerification=!1}},{key:"render",value:function(){var e=this;return(0,A.jsx)(le.ZP.Consumer,{children:function(t){var n=t.values;return(0,A.jsxs)(r.Fragment,{children:[(0,A.jsx)(K.ZP.Provider,{value:e.state.authenticatedUser,children:e.props.children}),e.state.loginDialogOpen&&(0,A.jsx)(X,{onClose:function(){return e.openLoginDialog(!1)},onGoToCreateAccount:function(){return e.openCreateAccountDialog(!0)},onLogin:e._doLogin,loginInProgress:e.state.loginInProgress,error:e.state.authError,onForgotPassword:e._doForgotPassword}),e.state.authenticatedUser.profile&&e.state.editProfileDialogOpen&&(0,A.jsx)(ne,{profile:e.state.authenticatedUser.profile,subscription:e.state.authenticatedUser.subscription,onClose:function(){return e.openEditProfileDialog(!1)},onEdit:function(t){return e._doEdit(t,n)},onDelete:e._doDeleteAccount,actionInProgress:e.state.editInProgress||e.state.deleteInProgress,error:e.state.authError}),e.state.authenticatedUser.firebaseUser&&e.state.changeEmailDialogOpen&&(0,A.jsx)(re,{firebaseUser:e.state.authenticatedUser.firebaseUser,onClose:function(){return e.openChangeEmailDialog(!1)},onChangeEmail:e._doChangeEmail,changeEmailInProgress:e.state.changeEmailInProgress,error:e.state.authError}),e.state.createAccountDialogOpen&&(0,A.jsx)(z,{onClose:function(){return e.openCreateAccountDialog(!1)},onGoToLogin:function(){return e.openLoginDialog(!0)},onCreateAccount:function(t){return e._doCreateAccount(t,n)},createAccountInProgress:e.state.createAccountInProgress,error:e.state.authError}),e.state.additionalUserInfoDialogOpen&&e.state.authenticatedUser.profile&&(0,A.jsx)(Ze,{profile:e.state.authenticatedUser.profile,onClose:function(){return e.openAdditionalUserInfoDialog(!1)},onSaveAdditionalUserInfo:function(t){return e._doSaveAdditionalUserInfo(t)},updateInProgress:e.state.editInProgress}),e.state.emailVerificationDialogOpen&&(0,A.jsx)(se,(0,h.Z)((0,h.Z)({authenticatedUser:e.state.authenticatedUser,onClose:function(){e.openEmailVerificationDialog({open:!1}),e.state.authenticatedUser.onRefreshFirebaseProfile().catch((function(){}))}},e.state.emailVerificationDialogProps),{},{onSendEmail:e._doSendEmailVerification})),(0,A.jsx)(ke.Z,{open:!!e.state.userSnackbarMessage,autoHideDuration:3e3,onClose:function(){return e.showUserSnackbar({message:null})},ContentProps:{"aria-describedby":"snackbar-message"},message:(0,A.jsx)("span",{id:"snackbar-message",children:e.state.userSnackbarMessage})})]})}})}}]),n}(r.Component),Ie=n(86778),De=n(56596),Ae=function(e){var t=e.children,n=r.useState(null),o=(0,j.Z)(n,2),i=o[0],a=o[1],s=r.useCallback((function(e){a(e)}),[a]),l=r.useCallback((function(){a(null)}),[a]),c=r.useMemo((function(){return{openUserPublicProfile:s}}),[s]);return(0,A.jsxs)(r.Fragment,{children:[(0,A.jsx)(De.Z.Provider,{value:c,children:t}),i&&(0,A.jsx)(Ie.Z,{userId:i,onClose:l})]})},Le=n(92371),Me=n(4942),Fe=n(25625),Oe=n(88991),Re=n.g.gd,Be=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;(0,o.Z)(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={language:"en",catalogs:{},i18n:null},e._loadCatalog=function(t){return e.state.catalogs[t]?Promise.resolve(e.state.catalogs):n(91485)("./".concat(t.replace("-","_"),"/messages")).then((function(n){return(0,h.Z)((0,h.Z)({},e.state.catalogs),{},(0,Me.Z)({},t,n))}),(function(n){return console.error("Error while loading language="+t,n),e.state.catalogs}))},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this._loadLanguage(this.props.language)}},{key:"componentDidUpdate",value:function(e){e.language!==this.props.language&&this._loadLanguage(this.props.language)}},{key:"_loadLanguage",value:function(e){var t=this;this._loadCatalog(e).then((function(n){t.setState({language:e,catalogs:n,i18n:(0,Fe.setupI18n)({language:e,catalogs:n})},(function(){var n=t.state.i18n;Re.getTranslation=(0,Oe.P)(n),console.info('Loaded "'.concat(e,'" language'))}))}))}},{key:"render",value:function(){var e=this.state,t=e.i18n,n=e.catalogs,r=e.language,o=this.props.children;return t?(0,A.jsx)(x.I18nProvider,{i18n:t,language:r,catalogs:n,children:o}):null}}]),r}(r.Component),_e=n(97326),Ne=n(28923),Ue=n(51458),He=n(30141),Ve=n(83491),We=n.n(Ve),ze=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._eventsFunctionCodeWriter=e.props.makeEventsFunctionCodeWriter({onWriteFile:e._onWriteFile.bind((0,_e.Z)(e))}),e._includeFileHashs={},e._lastLoadPromise=null,e.state={eventsFunctionsExtensionsError:null,loadProjectEventsFunctionsExtensions:e._loadProjectEventsFunctionsExtensions.bind((0,_e.Z)(e)),unloadProjectEventsFunctionsExtensions:e._unloadProjectEventsFunctionsExtensions.bind((0,_e.Z)(e)),unloadProjectEventsFunctionsExtension:e._unloadProjectEventsFunctionsExtension.bind((0,_e.Z)(e)),reloadProjectEventsFunctionsExtensions:e._reloadProjectEventsFunctionsExtensions.bind((0,_e.Z)(e)),reloadProjectEventsFunctionsExtensionMetadata:e._reloadProjectEventsFunctionsExtensionMetadata.bind((0,_e.Z)(e)),ensureLoadFinished:e._ensureLoadFinished.bind((0,_e.Z)(e)),getEventsFunctionsExtensionWriter:function(){return e.props.eventsFunctionsExtensionWriter},getEventsFunctionsExtensionOpener:function(){return e.props.eventsFunctionsExtensionOpener},getIncludeFileHashs:function(){return e._includeFileHashs}},e}return(0,i.Z)(n,[{key:"_onWriteFile",value:function(e){var t=e.includeFile,n=e.content;this._includeFileHashs[t]=We().h32(n,43981).toNumber()}},{key:"_ensureLoadFinished",value:function(){return this._lastLoadPromise?console.info("Waiting on the events functions extensions to finish loading..."):console.info("Events functions extensions are ready."),this._lastLoadPromise?this._lastLoadPromise.then((function(){console.info("Events functions extensions finished loading.")})):Promise.resolve()}},{key:"_loadProjectEventsFunctionsExtensions",value:function(e){var t=this,n=this.props.i18n,r=this._eventsFunctionCodeWriter;if(!e||!r)return Promise.resolve();var o=this._lastLoadPromise||Promise.resolve();return this._lastLoadPromise=o.then((function(){return(0,Ue.At)(e,r,n)})).then((function(){return t.setState({eventsFunctionsExtensionsError:null})})).catch((function(e){t.setState({eventsFunctionsExtensionsError:e}),(0,He.gR)({message:n._({id:"An error has occurred during functions generation. If SpeXEngine is installed, verify that nothing is preventing SpeXEngine from writing on disk. If you're running SpeXEngine online, verify your internet connection and refresh functions from the Project Manager."}),rawError:e,errorId:"events-functions-extensions-load-error"})})).then((function(){t._lastLoadPromise=null})),this._lastLoadPromise}},{key:"_reloadProjectEventsFunctionsExtensionMetadata",value:function(e,t){var n=this.props.i18n,r=this._eventsFunctionCodeWriter;if(e&&r)try{(0,Ue.fP)(e,t,r,n)}catch(o){this.setState({eventsFunctionsExtensionsError:o}),(0,He.gR)({message:n._({id:"An error has occurred during functions generation. If SpeXEngine is installed, verify that nothing is preventing SpeXEngine from writing on disk. If you're running SpeXEngine online, verify your internet connection and refresh functions from the Project Manager."}),rawError:o,errorId:"events-functions-extensions-load-error"})}}},{key:"_unloadProjectEventsFunctionsExtensions",value:function(e){(0,Ue.$5)(e)}},{key:"_unloadProjectEventsFunctionsExtension",value:function(e,t){(0,Ue.e0)(e,t)}},{key:"_reloadProjectEventsFunctionsExtensions",value:function(e){return e&&this._unloadProjectEventsFunctionsExtensions(e),this._loadProjectEventsFunctionsExtensions(e)}},{key:"render",value:function(){return(0,A.jsx)(Ne.Z.Provider,{value:this.state,children:this.props.children})}}]),n}(r.Component),Ge=n(19174),Ye=n(59788),qe=n(59717),Xe=n(23375),Je=n(30227),Ke=n(48210),Qe=n(8162),$e=n(72291),et=n(91739);var tt=function(e){return(0,A.jsx)(x.I18n,{children:function(t){var n=t.i18n;return(0,A.jsx)(y.ZP,{title:n._(e.title),open:e.open,noMobileFullScreen:!0,actions:[(0,A.jsx)(C.Z,{keyboardFocused:!0,label:e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,A.jsx)(x.Trans,{id:"OK"}),onClick:e.onDismiss},"dismiss")],maxWidth:"xs",children:(0,A.jsx)(T.Z,{children:n._(e.message)})})}})};var nt=function(e){return(0,A.jsx)(x.I18n,{children:function(t){var n=t.i18n;return(0,A.jsx)(y.ZP,{title:n._(e.title),open:e.open,actions:[(0,A.jsx)(C.Z,{keyboardFocused:!0,label:e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,A.jsx)(x.Trans,{id:"Cancel"}),onClick:e.onDismiss},"dismiss"),(0,A.jsx)(y.vF,{label:e.confirmButtonLabel?n._(e.confirmButtonLabel):(0,A.jsx)(x.Trans,{id:"Confirm"}),onClick:e.onConfirm,primary:!0},"confirm")],maxWidth:"xs",noMobileFullScreen:!0,children:(0,A.jsx)(P.r,{translatableSource:e.message,isStandaloneText:!0})})}})};var rt=function(e){var t=r.useState(""),n=(0,j.Z)(t,2),o=n[0],i=n[1],a=o===e.confirmText,s=function(){a&&(e.onConfirm(),i(""))};return(0,A.jsx)(x.I18n,{children:function(t){var n=t.i18n;return(0,A.jsxs)(y.ZP,{title:n._(e.title),open:e.open,isDangerous:!0,onApply:s,onRequestClose:e.onDismiss,maxWidth:"sm",flexColumnBody:!0,actions:[(0,A.jsx)(C.Z,{label:e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,A.jsx)(x.Trans,{id:"Cancel"}),primary:!1,onClick:e.onDismiss},"cancel"),(0,A.jsx)(y.vF,{label:e.confirmButtonLabel?n._(e.confirmButtonLabel):(0,A.jsx)(x.Trans,{id:"Confirm"}),primary:!0,onClick:s,disabled:!a},"confirm")],noMobileFullScreen:!0,children:[(0,A.jsx)(T.Z,{size:"body",style:{userSelect:"text"},children:n._(e.message)}),(0,A.jsx)(Z.hS,{}),(0,A.jsx)(k.ZP,{autoFocus:"desktop",floatingLabelFixed:!0,floatingLabelText:n._(e.fieldMessage),value:o,onChange:function(e,t){return i(t)},hintText:e.confirmText})]})}})};var ot=function(e){var t=e.children,n=r.useState(!1),o=(0,j.Z)(n,2),i=o[0],a=o[1],s=r.useState(null),l=(0,j.Z)(s,2),c=l[0],u=l[1],d=r.useCallback((function(e){a(!0),u(e)}),[]),p=r.useState(!1),h=(0,j.Z)(p,2),f=h[0],g=h[1],m=r.useState(null),x=(0,j.Z)(m,2),v=x[0],b=x[1],C=r.useCallback((function(e){g(!0),b(e)}),[]),y=r.useState(!1),Z=(0,j.Z)(y,2),k=Z[0],w=Z[1],T=r.useState(null),E=(0,j.Z)(T,2),S=E[0],P=E[1],I=r.useCallback((function(e){w(!0),P(e)}),[]);return(0,A.jsxs)(et.Z.Provider,{value:{showAlertDialog:d,showConfirmDialog:C,showConfirmDeleteDialog:I},children:[t,c&&(0,A.jsx)(tt,{open:i,onDismiss:function(){a(!1),c.callback()},dismissButtonLabel:c.dismissButtonLabel,title:c.title,message:c.message}),v&&(0,A.jsx)(nt,{open:f,onConfirm:function(){g(!1),v.callback(!0)},confirmButtonLabel:v.confirmButtonLabel,onDismiss:function(){g(!1),v.callback(!1)},dismissButtonLabel:v.dismissButtonLabel,title:v.title,message:v.message}),S&&(0,A.jsx)(rt,{open:k,onConfirm:function(){w(!1),S.callback(!0)},confirmButtonLabel:S.confirmButtonLabel,onDismiss:function(){w(!1),S.callback(!1)},dismissButtonLabel:S.dismissButtonLabel,title:S.title,message:S.message,fieldMessage:S.fieldMessage,confirmText:S.confirmText})]})},it=n(96210),at=n(87706),st=n(36465),lt=n(24347),ct=function(e,t){var n=e.objectAssets;return(0,h.Z)((0,h.Z)({},e),{},{objectAssets:n.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{resources:e.resources.map((function(e){return(0,h.Z)((0,h.Z)({},e),{},{file:(0,st.mR)(e.file,t)})}))})}))})},ut=function(e){var t=e.children,n=r.useContext(K.ZP),o=n.profile,i=r.useState(null),a=(0,j.Z)(i,2),s=a[0],l=a[1],c=r.useRef(!1),u=r.useCallback(function(){var e=(0,f.Z)(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,st.B$)(n.getAuthorizationHeader,{userId:t});case 2:return r=e.sent,l(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n.getAuthorizationHeader]),d=function(){var e=(0,f.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:if(t=o.id,!c.current){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,c.current=!0,e.next=9,u(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error("Could not fetch the authorization token",e.t0);case 14:return e.prev=14,c.current=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[5,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,f.Z)(m().mark((function e(t,n){var r,i,a,l,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.environment,o){e.next=3;break}return e.abrupt("return");case 3:if(i=o.id,e.t0=s,e.t0){e.next=9;break}return e.next=8,u(o.id);case 8:e.t0=e.sent;case 9:return a=e.t0,e.prev=10,e.next=13,(0,de._N)(t,a,{environment:r});case 13:return l=e.sent,e.abrupt("return",l);case 17:if(e.prev=17,e.t1=e.catch(10),!e.t1.response||404!==e.t1.response.status){e.next=27;break}return e.next=22,u(i);case 22:return a=e.sent,e.next=25,(0,de._N)(t,a,{environment:r});case 25:return c=e.sent,e.abrupt("return",c);case 27:throw e.t1;case 28:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,f.Z)(m().mark((function e(t){var n,r,i,a,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.asset,r=t.project,i=t.objectsContainer,o){e.next=3;break}throw new Error("Unable to install the asset because no profile was found.");case 3:if(e.t0=s,e.t0){e.next=8;break}return e.next=7,u(o.id);case 7:e.t0=e.sent;case 8:return a=e.t0,l=ct(n,a),e.abrupt("return",(0,at.Pr)({asset:l,project:r,objectsContainer:i}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,f.Z)(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,u(o.id);case 4:return n=e.sent,e.abrupt("return",(0,de.bX)(t,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,A.jsx)(lt.Z.Provider,{value:{authorizationToken:s,updateAuthorizationToken:d,fetchPrivateAsset:p,installPrivateAsset:h,getPrivateAssetPackAudioArchiveUrl:g},children:t})},dt={id:"onboarding",editorSwitches:{GoToBuildSection:{editor:"Home"},ClickOnNewObjectButtonForCharacter:{editor:"Scene"},ClickOnNewEvent:{editor:"EventsSheet"}},endDialog:{content:[{messageDescriptor:{id:"## Congratulations! \ud83c\udf89"}},{messageDescriptor:{id:"### You\u2019ve built your first game! \ud83d\ude0a"}},{messageDescriptor:{id:"You\u2019re now ready to learn the basics of SpeXEngine."}},{messageDescriptor:{id:"Click the image to start!"}},{messageDescriptor:{id:"\ud83d\udc47\ud83d\udc47\ud83d\udc47"}},{image:{imageSource:"https://i3.ytimg.com/vi/bR2BjT7JG0k/mqdefault.jpg",linkHref:"https://www.youtube.com/watch?v=bR2BjT7JG0k&list=PL3YlZTdKiS89Kj7IQVPoNElJCWrjZaCC8"}},{messageDescriptor:{id:"### Want to skip the basics?"}},{messageDescriptor:{id:'Go to the "Learn" section on the app to explore advanced materials.'}},{messageDescriptor:{id:"Have fun!"}}]},flow:[{id:"GoToBuildSection",elementToHighlightId:"#home-build-tab",nextStepTrigger:{presenceOfElement:"#home-create-project-button"},tooltip:{description:{messageDescriptor:{id:"Head over to the **Build section**"}},placement:"right"}},{id:"CreateProject",elementToHighlightId:"#home-create-project-button",nextStepTrigger:{presenceOfElement:"#create-project-button"},tooltip:{description:{messageDescriptor:{id:"We'll create a simple game with **a character that can collect coins**. {0}{1}Let's create a new project!",values:{0:"\n",1:"\n"}}}}},{id:"ValidateProjectCreation",elementToHighlightId:"#create-project-button",nextStepTrigger:{presenceOfElement:"[id^=tab-layout]:not([id^=tab-layout-events])"},tooltip:{description:{messageDescriptor:{id:"Let's go!"}}},isOnClosableDialog:!0},{id:"ClickOnNewObjectButtonForCharacter",elementToHighlightId:"#add-new-object-button",nextStepTrigger:{presenceOfElement:"#new-object-dialog"},tooltip:{placement:"left",title:{messageDescriptor:{id:"Let's create an **object**"}},description:{messageDescriptor:{id:"\ud83d\udc49 Everything you see in a game is an **object**: your character, the enemies, coins and potions, platforms or trees, ..."}}}},{id:"OpenAssetTab",elementToHighlightId:"#asset-store-tab",nextStepTrigger:{presenceOfElement:"#asset-store"},tooltip:{description:{messageDescriptor:{id:"Let's choose an object from the asset store."}},placement:"bottom"},skippable:!0,isOnClosableDialog:!0},{id:"ClickOnSearchBar",elementToHighlightId:"#asset-store-search-bar",nextStepTrigger:{valueHasChanged:!0},tooltip:{title:{messageDescriptor:{id:"Choose an asset to represent your main character!"}},description:{messageDescriptor:{id:"Tip: search for \u201cwizard\u201d."}}},skippable:!0,isOnClosableDialog:!0},{id:"WaitForUserToSelectAsset",nextStepTrigger:{presenceOfElement:"#add-asset-button"},isOnClosableDialog:!0},{id:"AddAsset",elementToHighlightId:"#add-asset-button",isTriggerFlickering:!0,nextStepTrigger:{presenceOfElement:"#object-item-0"},tooltip:{description:{messageDescriptor:{id:"Add this asset to your project."}}},mapProjectData:{firstObject:"lastProjectObjectName"},isOnClosableDialog:!0},{id:"CloseAssetStore",elementToHighlightId:"#new-object-dialog #close-button",nextStepTrigger:{absenceOfElement:"#new-object-dialog"},tooltip:{description:{messageDescriptor:{id:"Great! Our game now has an **object**, let's see what we can do with it."}}}},{id:"DragObjectToScene",elementToHighlightId:"#object-item-0",nextStepTrigger:{instanceAddedOnScene:"firstObject"},tooltip:{description:{messageDescriptor:{id:"Drag $(firstObject) from the menu to the canvas."}},placement:"left"}},{id:"OpenBehaviors",elementToHighlightId:"#object-item-0",nextStepTrigger:{presenceOfElement:"#object-editor-dialog"},tooltip:{title:{messageDescriptor:{id:"Let's make our character move! \ud83d\udef9"}},description:{messageDescriptor:{id:"Here, right-click on it and click \u201cEdit **behaviors**\u201d"}},placement:"left"}},{id:"OpenBehaviorTab",elementToHighlightId:"#behaviors-tab",nextStepTrigger:{presenceOfElement:"#add-behavior-button"},tooltip:{description:{messageDescriptor:{id:"See the **behaviors** of your object here."}},placement:"bottom"},skippable:!0,isOnClosableDialog:!0},{id:"AddBehavior",elementToHighlightId:"#add-behavior-button",nextStepTrigger:{presenceOfElement:"#behavior-item-TopDownMovementBehavior--TopDownMovementBehavior"},tooltip:{title:{messageDescriptor:{id:"Let\u2019s add a **behavior**!"}},description:{messageDescriptor:{id:"\ud83d\udc49 Behaviors add features to objects in a matter of clicks. They are very powerful!"}},placement:"bottom"},isOnClosableDialog:!0},{id:"SelectTopDownBehavior",elementToHighlightId:"#behavior-item-TopDownMovementBehavior--TopDownMovementBehavior",nextStepTrigger:{presenceOfElement:"#behavior-parameters-TopDownMovement"},tooltip:{description:{messageDescriptor:{id:'Add the "Top down movement" **behavior**.'}},placement:"bottom"},isOnClosableDialog:!0},{id:"ApplyBehavior",elementToHighlightId:"#object-editor-dialog #apply-button",nextStepTrigger:{absenceOfElement:"#object-editor-dialog"},tooltip:{description:{messageDescriptor:{id:"The parameters above help you customise the **behavior**, but let's ignore them for now."}},placement:"top"},isOnClosableDialog:!0},{id:"LaunchPreviewCharacterOnly",elementToHighlightId:"#toolbar-preview-button",nextStepTrigger:{previewLaunched:!0},tooltip:{title:{messageDescriptor:{id:"Let's play! \ud83c\udfae"}},description:{messageDescriptor:{id:'Click on "**Preview**" and move your character with the **arrow keys**!'}},placement:"bottom"}},{id:"WaitForUserToHavePlayed",elementToHighlightId:"#toolbar-preview-button",nextStepTrigger:{clickOnTooltipButton:{messageDescriptor:{id:"I'm done"}}},tooltip:{description:{messageDescriptor:{id:"Once you're done testing, close the **preview** and come back here."}},placement:"bottom"}},{id:"ClickOnNewObjectButtonForCoin",elementToHighlightId:"#add-new-object-button",nextStepTrigger:{presenceOfElement:"#new-object-dialog"},tooltip:{placement:"left",title:{messageDescriptor:{id:"Let's now add another **object** that $(firstObject) can collect!"}}}},{id:"OpenAssetTabForCoin",elementToHighlightId:"#asset-store-tab",nextStepTrigger:{presenceOfElement:"#asset-store"},tooltip:{description:{messageDescriptor:{id:"Let's choose an object from the asset store."}},placement:"bottom"},skippable:!0,isOnClosableDialog:!0},{id:"ClickOnSearchBarForCoin",elementToHighlightId:"#asset-store-search-bar",nextStepTrigger:{valueHasChanged:!0},tooltip:{description:{messageDescriptor:{id:"Search for \u201ccoin\u201d (or a potion, food, ...)."}}},isOnClosableDialog:!0,shortcuts:[{stepId:"CloseAssetStoreForCoin",trigger:{presenceOfElement:"#object-item-1"}}]},{id:"WaitForUserToSelectAssetForCoin",nextStepTrigger:{presenceOfElement:"#add-asset-button"},isOnClosableDialog:!0},{id:"AddAssetForCoin",elementToHighlightId:"#add-asset-button",isTriggerFlickering:!0,nextStepTrigger:{presenceOfElement:"#object-item-1"},mapProjectData:{secondObject:"lastProjectObjectName"},isOnClosableDialog:!0},{id:"CloseAssetStoreForCoin",elementToHighlightId:"#new-object-dialog #close-button",nextStepTrigger:{absenceOfElement:"#new-object-dialog"},tooltip:{description:{messageDescriptor:{id:"Great! Our game now has 2 **objects**, let's see what we can do with them."}}}},{id:"DragObjectToScene",elementToHighlightId:"#object-item-1",nextStepTrigger:{instanceAddedOnScene:"secondObject"},tooltip:{description:{messageDescriptor:{id:"Place a few $(secondObject) in the scene by dragging them to the canvas."}},placement:"left"}},{id:"SwitchToEventsSheet",elementToHighlightId:"editorTab::EventsSheet",nextStepTrigger:{editorIsActive:":EventsSheet"},tooltip:{description:{messageDescriptor:{id:"Now let's make $(firstObject) collect the $(secondObject)! Go to the **events** tab of the **scene**."}},placement:"bottom"}},{id:"ClickOnNewEvent",elementToHighlightId:"#add-event-button",nextStepTrigger:{presenceOfElement:"#add-condition-button-empty"},tooltip:{title:{messageDescriptor:{id:"Let\u2019s add an **event**!"}},description:{messageDescriptor:{id:"\ud83d\udc49 **Events** are the logic to your game."}},placement:"bottom"}},{id:"ClickOnNewCondition",elementToHighlightId:"#add-condition-button-empty",nextStepTrigger:{presenceOfElement:"#instruction-editor-dialog"},tooltip:{description:{messageDescriptor:{id:'**Events** are made of a condition and an action: {0}{1}Condition: "**If** $(firstObject) touches the $(secondObject)..." {2}{3}Action: "... **then** the $(secondObject) disappears" {4}{5}**Click "Add condition**"',values:{0:"\n",1:"\n",2:"\n",3:"\n",4:"\n",5:"\n"}}},placement:"bottom"}},{id:"ChooseCharacterForCondition",elementToHighlightId:"#instruction-editor-dialog #object-item-0",nextStepTrigger:{presenceOfElement:"#object-instruction-selector"},tooltip:{description:{messageDescriptor:{id:"Choose $(firstObject)"}},placement:"bottom"},isOnClosableDialog:!0},{id:"ChooseCondition",elementToHighlightId:"#instruction-item-CollisionNP",nextStepTrigger:{presenceOfElement:"#instruction-parameters-container"},tooltip:{description:{messageDescriptor:{id:'Then the condition we want to use: **"Collision"**.'}},placement:"bottom"},isOnClosableDialog:!0},{id:"SetParameter",elementToHighlightId:"#parameter-1-object-selector",nextStepTrigger:{valueHasChanged:!0},tooltip:{description:{messageDescriptor:{id:"Finally, select the target **object** ($(secondObject))."}},placement:"top"},isOnClosableDialog:!0},{id:"CloseInstructionEditorForCondition",elementToHighlightId:"#instruction-editor-dialog #ok-button",nextStepTrigger:{absenceOfElement:"#instruction-editor-dialog"},tooltip:{description:{messageDescriptor:{id:"We're good."}},placement:"top"}},{id:"ClickOnNewAction",elementToHighlightId:"#add-action-button-empty",nextStepTrigger:{presenceOfElement:"#instruction-editor-dialog"},tooltip:{description:{messageDescriptor:{id:"Let's add **what happens when the condition is met**: make $(secondObject) disappear."}},placement:"bottom"}},{id:"ChoseCoinForAction",elementToHighlightId:"#instruction-editor-dialog #object-item-1",nextStepTrigger:{presenceOfElement:"#object-instruction-selector"},tooltip:{description:{messageDescriptor:{id:"Choose $(secondObject)"}},placement:"bottom"},isOnClosableDialog:!0},{id:"ChooseAction",elementToHighlightId:"#instruction-item-Delete",nextStepTrigger:{presenceOfElement:"#instruction-parameters-container"},tooltip:{description:{messageDescriptor:{id:'Then choose the **action** $(secondObject) will receive : "Delete", as we want to remove it.'}},placement:"bottom"},isOnClosableDialog:!0},{id:"CloseInstructionEditorForAction",elementToHighlightId:"#instruction-editor-dialog #ok-button",nextStepTrigger:{absenceOfElement:"#instruction-editor-dialog"},tooltip:{description:{messageDescriptor:{id:"Nothing more is needed!"}},placement:"top"}},{id:"LaunchPreviewWithCoinCollection",elementToHighlightId:"#toolbar-preview-button",nextStepTrigger:{previewLaunched:!0},tooltip:{title:{messageDescriptor:{id:"Let's see how it works! \ud83c\udfae"}},placement:"bottom"}},{id:"WaitForUserToHavePlayedWithCoinCollection",elementToHighlightId:"#toolbar-preview-button",nextStepTrigger:{clickOnTooltipButton:{messageDescriptor:{id:"I'm done"}}},tooltip:{description:{messageDescriptor:{id:"Once you're done testing, close the **preview** and come back here."}},placement:"bottom"}}]},pt=n(19817),ht=function(e){var t=r.useState(null),n=(0,j.Z)(t,2),o=n[0],i=n[1],a=r.useState(null),s=(0,j.Z)(a,2),l=s[0],c=s[1],u=r.useState(0),d=(0,j.Z)(u,2),p=d[0],h=d[1],g=r.useState({}),x=(0,j.Z)(g,2),v=x[0],b=x[1],C=r.useState(null),y=(0,j.Z)(C,2),Z=y[0],k=y[1],w=r.useCallback((function(e){return Z?Z.find((function(t){return t.id===e})):null}),[Z]),T=function(){var e=(0,f.Z)(m().mark((function e(t){var n,r,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tutorialId,r=t.initialStepIndex,o=t.initialProjectData,n!==dt.id){e.next=7;break}return h(r),b(o),i(dt),(0,J.$t)(n),e.abrupt("return");case 7:if(Z){e.next=9;break}return e.abrupt("return");case 9:if(a=w(n)){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,(0,pt.TO)(a);case 14:s=e.sent,h(r),b(o),i(s),(0,J.$t)(n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=r.useCallback((0,f.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(null),e.prev=1,e.next=4,(0,pt.oO)();case 4:t=e.sent,k(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("An error occurred when fetching in app tutorials:",e.t0),c("fetching-error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[]);return r.useEffect((function(){var e=setTimeout((function(){console.info("Pre-fetching in-app tutorials..."),E()}),1e3);return function(){return clearTimeout(e)}}),[E]),(0,A.jsx)(fe.Z.Provider,{value:{inAppTutorialShortHeaders:Z,getInAppTutorialShortHeader:w,currentlyRunningInAppTutorial:o,startTutorial:T,startProjectData:v,endTutorial:function(){i(null),(0,J.$t)(null)},startStepIndex:p,inAppTutorialsFetchingError:l,fetchInAppTutorials:E},children:e.children})},ft=n(28641),gt=n(30609),mt=n(61651),xt=n(78351),vt=n(98555),bt=n(46789),jt=n(74268),Ct=n(76436),yt=n(59509),Zt=n(24910),kt=(0,Ct.Ue)({plugins:[].concat((0,we.Z)((0,vt.Z)().plugins),[(0,yt.Z)()])}),wt=function(e){var t=e.children,n=e.forcedThemeName,o=r.useContext(le.ZP).values,i=o.themeName,a=o.language,s=(0,H.L)(),l=r.useMemo((function(){return(0,jt.l)({themeName:n||i,language:a,windowWidth:s})}),[n,i,a,s]);return(0,A.jsx)(Zt.Z.Provider,{value:l.gdevelopTheme,children:(0,A.jsx)(bt.ZP,{jss:kt,children:(0,A.jsx)(xt.Z,{theme:l.muiTheme,children:t})})})},Tt=function(e){var t=e.disableCheckForUpdates,n=e.authentication,r=e.children,o=e.makeEventsFunctionCodeWriter,i=e.eventsFunctionsExtensionWriter,a=e.eventsFunctionsExtensionOpener,s=e.onlyAppStorePrivateAssetPacks;return(0,A.jsx)(p,{children:(0,A.jsx)(Ge.$,{children:(0,A.jsx)(gt.K,{children:(0,A.jsx)(Le.ZP,{disableCheckForUpdates:t,children:(0,A.jsx)(le.ZP.Consumer,{children:function(e){var t=e.values;return(0,A.jsx)(Be,{language:t.language.replace("_","-"),children:(0,A.jsx)(wt,{children:(0,A.jsx)(mt.C,{title:"SpeXEngine encountered an issue",scope:"app",children:(0,A.jsx)(ht,{children:(0,A.jsx)(ot,{children:(0,A.jsx)(Pe,{authentication:n,children:(0,A.jsx)(Ae,{children:(0,A.jsx)(x.I18n,{update:!0,children:function(e){var t=e.i18n;return(0,A.jsx)(ze,{i18n:t,makeEventsFunctionCodeWriter:o,eventsFunctionsExtensionWriter:i,eventsFunctionsExtensionOpener:a,children:(0,A.jsx)(ft.p,{children:(0,A.jsx)(Ye.V,{children:(0,A.jsx)(qe.p,{onlyAppStorePrivateAssetPacks:s,children:(0,A.jsx)(Xe.E,{children:(0,A.jsx)(Je.h,{children:(0,A.jsx)(Ke.D,{children:(0,A.jsx)(Qe.N,{children:(0,A.jsx)($e.b,{children:(0,A.jsx)(it.X,{children:(0,A.jsx)(ut,{children:r({i18n:t})})})})})})})})})})})})}})})})})})})})})}})})})})})}},30609:function(e,t,n){"use strict";n.d(t,{K:function(){return u}});var r=n(1413),o=n(29439),i=n(28381),a=n(2066),s=n(29343),l={routeArguments:{},removeRouteArguments:function(){},addRouteArguments:function(){},navigateToRoute:function(){}},c=i.createContext(l);t.Z=c;var u=function(e){var t=e.children,n=i.useState(a.ZP.getArguments()),l=(0,o.Z)(n,2),u=l[0],d=l[1],p=i.useCallback((function(e){a.ZP.removeArguments(e),d((function(t){var n=(0,r.Z)({},t);return e.forEach((function(e){delete n[e]})),n}))}),[]),h=i.useCallback((function(e){a.ZP.addArguments(e),d((function(t){return(0,r.Z)((0,r.Z)({},t),e)}))}),[]),f=i.useCallback((function(e,t){h((0,r.Z)((0,r.Z)({},t),{},{"initial-dialog":e}))}),[h]);return(0,s.jsx)(c.Provider,{value:{routeArguments:u,addRouteArguments:h,removeRouteArguments:p,navigateToRoute:f},children:t})}},19174:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var r=n(29439),o=n(28381),i=n(29343),a={hasUnsavedChanges:!1,sealUnsavedChanges:function(){},triggerUnsavedChanges:function(){}},s=o.createContext(a);t.Z=s;var l=function(e){var t=o.useState(!1),n=(0,r.Z)(t,2),a=n[0],l=n[1];return(0,i.jsx)(s.Provider,{value:{hasUnsavedChanges:a,triggerUnsavedChanges:function(){a||l(!0)},sealUnsavedChanges:function(){a&&l(!1)}},children:e.children})}},88505:function(e,t,n){"use strict";n.d(t,{Z:function(){return OI}});var r=n(4942),o=n(15861),i=n(1413),a=n(29439),s=n(64687),l=n.n(s),c=n(36600),u=n(28381),d=n(82054),p=n(53385),h=n(78118),f=n(29343),g=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.71627 2.75526C7.88716 2.63741 8.11311 2.63741 8.284 2.75526L13.1173 6.0886C13.2527 6.18193 13.3335 6.33582 13.3335 6.50021V11.5002C13.3335 12.5127 12.5127 13.3335 11.5001 13.3335H4.50016C3.48765 13.3335 2.66683 12.5127 2.66683 11.5002V6.50021C2.66683 6.33582 2.74763 6.18193 2.88296 6.0886L7.71627 2.75526ZM8.00014 3.77425L3.66683 6.76276V11.5002C3.66683 11.9604 4.03992 12.3335 4.50016 12.3335H11.5001C11.9604 12.3335 12.3335 11.9604 12.3335 11.5002V6.76276L8.00014 3.77425Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83307 9.66624C7.37287 9.66624 6.99975 10.0393 6.99975 10.4996V12.3329H8.99974V10.4996C8.99974 10.0393 8.62666 9.66624 8.1664 9.66624H7.83307ZM5.99975 10.4996C5.99975 9.48703 6.8206 8.66624 7.83307 8.66624H8.1664C9.17894 8.66624 9.99974 9.48703 9.99974 10.4996V12.8329C9.99974 13.1091 9.77588 13.3329 9.49974 13.3329H6.49975C6.22361 13.3329 5.99975 13.1091 5.99975 12.8329V10.4996Z",fill:"currentColor"})]}))})),m=n(24910),x=u.memo((function(e){var t=e.children,n=u.useContext(m.Z);return(0,f.jsx)("div",{className:"almost-invisible-scrollbar",style:{backgroundColor:n.toolbar.backgroundColor,flexShrink:0,display:"flex",overflowX:"overlay",overflowY:"hidden",height:40,paddingLeft:8,paddingRight:8},children:t})})),v=function(e){return{flex:1,display:"flex",alignItems:"center",justifyContent:e.firstChild?"flex-start":e.lastChild?"flex-end":"center"}},b=u.memo((function(e){return(0,f.jsx)("span",{style:v(e),children:e.children})})),j=n(93433),C=n(61325),y=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.57046 3.408C3.71787 3.3169 3.90194 3.30862 4.05694 3.38612L12.3903 7.55278C12.5597 7.63748 12.6667 7.81061 12.6667 8C12.6667 8.18938 12.5597 8.36251 12.3903 8.44721L4.05694 12.6139C3.90194 12.6914 3.71787 12.6831 3.57046 12.592C3.42305 12.5009 3.33333 12.34 3.33333 12.1667V3.83333C3.33333 3.66004 3.42305 3.49911 3.57046 3.408ZM4.33333 4.64235V11.3576L11.0486 8L4.33333 4.64235Z",fill:"currentColor"})}))})),Z=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.87161 2.83221C8.05634 3.03746 8.0397 3.35361 7.83444 3.53834L6.58072 4.66669L7.83444 5.79504C8.0397 5.97977 8.05634 6.29592 7.87161 6.50117C7.68688 6.70643 7.37073 6.72307 7.16548 6.53834L5.49881 5.03834C5.39345 4.94352 5.33329 4.80843 5.33329 4.66669C5.33329 4.52495 5.39345 4.38987 5.49881 4.29504L7.16548 2.79504C7.37073 2.61031 7.68688 2.62695 7.87161 2.83221Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99996 4.66669C5.99996 4.39055 6.22382 4.16669 6.49996 4.16669H8.83329C11.3186 4.16669 13.3333 6.18141 13.3333 8.66669V8.83336C13.3333 9.1095 13.1094 9.33336 12.8333 9.33336C12.5572 9.33336 12.3333 9.1095 12.3333 8.83336V8.66669C12.3333 6.73369 10.7663 5.16669 8.83329 5.16669H6.49996C6.22382 5.16669 5.99996 4.94283 5.99996 4.66669Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.12831 9.49888C8.31304 9.29362 8.62919 9.27698 8.83444 9.46171L10.5011 10.9617C10.6065 11.0565 10.6666 11.1916 10.6666 11.3334C10.6666 11.4751 10.6065 11.6102 10.5011 11.705L8.83444 13.205C8.62919 13.3897 8.31304 13.3731 8.12831 13.1678C7.94358 12.9626 7.96022 12.6464 8.16548 12.4617L9.4192 11.3334L8.16548 10.205C7.96022 10.0203 7.94358 9.70413 8.12831 9.49888Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16663 6.66669C3.44277 6.66669 3.66663 6.89055 3.66663 7.16669V7.33336C3.66663 9.26635 5.23363 10.8334 7.16663 10.8334H9.49996C9.7761 10.8334 9.99996 11.0572 9.99996 11.3334C9.99996 11.6095 9.7761 11.8334 9.49996 11.8334H7.16663C4.68134 11.8334 2.66663 9.81863 2.66663 7.33336V7.16669C2.66663 6.89055 2.89048 6.66669 3.16663 6.66669Z",fill:"currentColor"})]}))})),k=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99996 3.66669C5.60673 3.66669 3.66663 5.60679 3.66663 8.00002C3.66663 10.3933 5.60673 12.3334 7.99996 12.3334C10.3932 12.3334 12.3333 10.3933 12.3333 8.00002C12.3333 5.60679 10.3932 3.66669 7.99996 3.66669ZM2.66663 8.00002C2.66663 5.0545 5.05444 2.66669 7.99996 2.66669C10.9455 2.66669 13.3333 5.0545 13.3333 8.00002C13.3333 10.9455 10.9455 13.3334 7.99996 13.3334C5.05444 13.3334 2.66663 10.9455 2.66663 8.00002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.04854 4.69103C6.65219 5.44491 6.33329 6.57193 6.33329 8.00002C6.33329 9.42811 6.65219 10.5551 7.04854 11.309C7.2474 11.6873 7.459 11.9589 7.64726 12.1291C7.8457 12.3085 7.96937 12.3334 7.99996 12.3334C8.03055 12.3334 8.15422 12.3085 8.35266 12.1291C8.54092 11.9589 8.75252 11.6873 8.95138 11.309C9.34773 10.5551 9.66663 9.42811 9.66663 8.00002C9.66663 6.57193 9.34773 5.44491 8.95138 4.69103C8.75252 4.31278 8.54092 4.04112 8.35266 3.87091C8.15422 3.6915 8.03055 3.66669 7.99996 3.66669C7.96937 3.66669 7.8457 3.6915 7.64726 3.87091C7.459 4.04112 7.2474 4.31278 7.04854 4.69103ZM6.97662 3.12913C7.26209 2.87104 7.61635 2.66669 7.99996 2.66669C8.38357 2.66669 8.73783 2.87104 9.0233 3.12913C9.31895 3.39642 9.59725 3.7706 9.83651 4.22568C10.3164 5.13846 10.6666 6.42811 10.6666 8.00002C10.6666 9.57193 10.3164 10.8616 9.83651 11.7744C9.59725 12.2294 9.31895 12.6036 9.0233 12.8709C8.73783 13.129 8.38357 13.3334 7.99996 13.3334C7.61635 13.3334 7.26209 13.129 6.97662 12.8709C6.68096 12.6036 6.40267 12.2294 6.16341 11.7744C5.68353 10.8616 5.33329 9.57193 5.33329 8.00002C5.33329 6.42811 5.68353 5.13846 6.16341 4.22568C6.40267 3.7706 6.68096 3.39642 6.97662 3.12913Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83329 8.00002C2.83329 7.72388 3.05715 7.50002 3.33329 7.50002H12.6666C12.9428 7.50002 13.1666 7.72388 13.1666 8.00002C13.1666 8.27616 12.9428 8.50002 12.6666 8.50002H3.33329C3.05715 8.50002 2.83329 8.27616 2.83329 8.00002Z",fill:"currentColor"})]}))})),w=n(9383),T=n(46448),E=n(32484),S=function(e){var t="small"===(0,T.L)();return(0,f.jsx)(E.Z,(0,i.Z)((0,i.Z)({},e),{},{label:t?"":e.label}))};function P(e){var t=e.onPreviewWithoutHotReload,n=e.onNetworkPreview,r=e.onOpenDebugger,o=e.onHotReloadPreview,i=e.canDoNetworkPreview,a=e.isPreviewEnabled,s=e.hasPreviewsRunning,l=e.previewState,d=e.setPreviewOverride,p=e.exportProject,h="small"===(0,T.L)(),g=u.useCallback((function(e){return[{label:e._({id:"Start Network Preview (Preview over WiFi/LAN)"}),click:n,enabled:i},{label:e._({id:"Start Preview and Debugger"}),click:r},{label:e._({id:"Launch another preview in a new window"}),click:t,enabled:a&&s},{type:"separator"}].concat((0,j.Z)(l.overridenPreviewLayoutName?[{type:"checkbox",label:l.overridenPreviewExternalLayoutName?e._({id:"Start all previews from external layout {0}",values:{0:l.overridenPreviewExternalLayoutName}}):e._({id:"Start all previews from scene {0}",values:{0:l.overridenPreviewLayoutName}}),checked:l.isPreviewOverriden,click:function(){return d({isPreviewOverriden:!l.isPreviewOverriden,overridenPreviewLayoutName:l.overridenPreviewLayoutName,overridenPreviewExternalLayoutName:l.overridenPreviewExternalLayoutName})}},{type:"separator"}]:[]),[{label:l.previewExternalLayoutName?e._({id:"Use this external layout inside this scene to start all previews"}):e._({id:"Use this scene to start all previews"}),click:function(){return d({isPreviewOverriden:!0,overridenPreviewLayoutName:l.previewLayoutName,overridenPreviewExternalLayoutName:l.previewExternalLayoutName})},enabled:l.previewLayoutName!==l.overridenPreviewLayoutName||l.previewExternalLayoutName!==l.overridenPreviewExternalLayoutName}])}),[t,a,s,d,l,n,r,i]);return(0,f.jsxs)(C.pJ,{noMargin:!0,children:[(0,f.jsx)(w.Z,{primary:!0,onClick:o,disabled:!a,icon:s?(0,f.jsx)(Z,{}):(0,f.jsx)(y,{}),label:h?null:s?(0,f.jsx)(c.Trans,{id:"Update"}):(0,f.jsx)(c.Trans,{id:"Preview"}),id:"toolbar-preview-button",buildMenuTemplate:g}),(0,f.jsx)(S,{primary:!0,onClick:p,icon:(0,f.jsx)(k,{}),label:(0,f.jsx)(c.Trans,{id:"Publish"}),id:"toolbar-publish-button"})]})}var I=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 5.75C4 4.78351 4.78351 4 5.75 4H9.25C10.2165 4 11 4.78351 11 5.75V18.2502C11 19.2167 10.2165 20.0002 9.25 20.0002H5.75C4.78352 20.0002 4 19.2167 4 18.2502V5.75ZM5.75 5.5C5.61193 5.5 5.5 5.61193 5.5 5.75V18.2502C5.5 18.3883 5.61192 18.5002 5.75 18.5002H9.25C9.38808 18.5002 9.5 18.3883 9.5 18.2502V5.75C9.5 5.61193 9.38807 5.5 9.25 5.5H5.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 5.75C13 4.78352 13.7835 4 14.75 4H18.25C19.2165 4 20 4.78352 20 5.75V9.25025C20 10.2168 19.2165 11.0002 18.25 11.0002H14.75C13.7835 11.0002 13 10.2168 13 9.25025V5.75ZM14.75 5.5C14.6119 5.5 14.5 5.61192 14.5 5.75V9.25025C14.5 9.38828 14.6119 9.5002 14.75 9.5002H18.25C18.3881 9.5002 18.5 9.38828 18.5 9.25025V5.75C18.5 5.61192 18.3881 5.5 18.25 5.5H14.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 14.75C13 13.7835 13.7835 13 14.75 13H18.25C19.2165 13 20 13.7835 20 14.75V18.2502C20 19.2167 19.2165 20.0002 18.25 20.0002H14.75C13.7835 20.0002 13 19.2167 13 18.2502V14.75ZM14.75 14.5C14.6119 14.5 14.5 14.6119 14.5 14.75V18.2502C14.5 18.3883 14.6119 18.5002 14.75 18.5002H18.25C18.3881 18.5002 18.5 18.3883 18.5 18.2502V14.75C18.5 14.6119 18.3881 14.5 18.25 14.5H14.75Z",fill:"currentColor"})]}))})),D=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{d:"M6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25V9.82843C19.25 9.29799 19.0393 8.78929 18.6642 8.41421L15.5858 5.33579C15.2107 4.96071 14.702 4.75 14.1716 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,f.jsx)("path",{d:"M8.75 19V15.75C8.75 15.1977 9.19772 14.75 9.75 14.75H14.25C14.8023 14.75 15.25 15.1977 15.25 15.75V19",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,f.jsx)("path",{d:"M8.75 5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}))})),A=n(51598),L=n(40243),M=u.forwardRef((function(e,t){var n=u.useState(null),r=(0,a.Z)(n,2),o=r[0],i=r[1];return u.useImperativeHandle(t,(function(){return{setEditorToolbar:i}})),(0,f.jsxs)(x,{children:[e.showProjectButtons?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(b,{firstChild:!0,children:[(0,f.jsx)(A.Z,{size:"small",id:"main-toolbar-project-manager-button",onClick:e.toggleProjectManager,tooltip:{id:"Project Manager"},color:"default",children:(0,f.jsx)(I,{})}),(0,f.jsx)(A.Z,{size:"small",id:"toolbar-save-button",onClick:e.onSave,tooltip:{id:"Save project"},color:"default",disabled:!e.canSave,children:(0,f.jsx)(D,{})})]}),(0,f.jsxs)(b,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(P,{onPreviewWithoutHotReload:e.onPreviewWithoutHotReload,onOpenDebugger:e.onOpenDebugger,onNetworkPreview:e.onNetworkPreview,onHotReloadPreview:e.onHotReloadPreview,setPreviewOverride:e.setPreviewOverride,canDoNetworkPreview:e.canDoNetworkPreview,isPreviewEnabled:e.isPreviewEnabled,previewState:e.previewState,hasPreviewsRunning:e.hasPreviewsRunning,exportProject:e.exportProject}),(0,f.jsx)(L.LZ,{})]})]}):null,o||(0,f.jsx)(b,{})]})})),F=n(2066),O=n(19174),R=u.memo((function(e){var t=e.fileMetadata,n=e.storageProvider,r=e.projectName,o=e.i18n,i=u.useContext(m.Z),a=u.useContext(O.Z).hasUnsavedChanges,s=a?" *":"",l="LocalFile"===n.internalName?t&&t.fileIdentifier:r,c=l&&!n.hiddenInSaveDialog?o._(n.name):null;return u.useEffect((function(){var e=["SpeXEngine 5",l?"".concat(l).concat(s):"",c].filter(Boolean).join(" - ");F.ZP.setTitle(e),F.ZP.setTitleBarColor(i.titlebar.backgroundColor)}),[l,s,a,i.titlebar.backgroundColor,c]),null})),B=n(81683),_=n(67835),N=n(73818),U=n(90242),H=n(57597),V=n(1773),W=n(63665),z=[{name:"Visual Studio",themeName:"vs"},{name:"Visual Studio Dark",themeName:"vs-dark"},{name:"GitHub",themeName:"github",themeData:{base:"vs",inherit:!0,rules:[{foreground:"999988",fontStyle:"italic",token:"comment"},{foreground:"999999",fontStyle:"bold",token:"comment.block.preprocessor"},{foreground:"999999",fontStyle:"bold italic",token:"comment.documentation"},{foreground:"999999",fontStyle:"bold italic",token:"comment.block.documentation"},{foreground:"a61717",background:"e3d2d2",token:"invalid.illegal"},{fontStyle:"bold",token:"keyword"},{fontStyle:"bold",token:"storage"},{fontStyle:"bold",token:"keyword.operator"},{fontStyle:"bold",token:"constant.language"},{fontStyle:"bold",token:"support.constant"},{foreground:"445588",fontStyle:"bold",token:"storage.type"},{foreground:"445588",fontStyle:"bold",token:"support.type"},{foreground:"008080",token:"entity.other.attribute-name"},{foreground:"0086b3",token:"variable.other"},{foreground:"999999",token:"variable.language"},{foreground:"445588",fontStyle:"bold",token:"entity.name.type"},{foreground:"445588",fontStyle:"bold",token:"entity.other.inherited-class"},{foreground:"445588",fontStyle:"bold",token:"support.class"},{foreground:"008080",token:"variable.other.constant"},{foreground:"800080",token:"constant.character.entity"},{foreground:"990000",token:"entity.name.exception"},{foreground:"990000",token:"entity.name.function"},{foreground:"990000",token:"support.function"},{foreground:"990000",token:"keyword.other.name-of-parameter"},{foreground:"555555",token:"entity.name.section"},{foreground:"000080",token:"entity.name.tag"},{foreground:"008080",token:"variable.parameter"},{foreground:"008080",token:"support.variable"},{foreground:"009999",token:"constant.numeric"},{foreground:"009999",token:"constant.other"},{foreground:"dd1144",token:"string - string source"},{foreground:"dd1144",token:"constant.character"},{foreground:"009926",token:"string.regexp"},{foreground:"990073",token:"constant.other.symbol"},{fontStyle:"bold",token:"punctuation"},{foreground:"000000",background:"ffdddd",token:"markup.deleted"},{fontStyle:"italic",token:"markup.italic"},{foreground:"aa0000",token:"markup.error"},{foreground:"999999",token:"markup.heading.1"},{foreground:"000000",background:"ddffdd",token:"markup.inserted"},{foreground:"888888",token:"markup.output"},{foreground:"888888",token:"markup.raw"},{foreground:"555555",token:"markup.prompt"},{fontStyle:"bold",token:"markup.bold"},{foreground:"aaaaaa",token:"markup.heading"},{foreground:"aa0000",token:"markup.traceback"},{fontStyle:"underline",token:"markup.underline"},{foreground:"999999",background:"eaf2f5",token:"meta.diff.range"},{foreground:"999999",background:"eaf2f5",token:"meta.diff.index"},{foreground:"999999",background:"eaf2f5",token:"meta.separator"},{foreground:"999999",background:"ffdddd",token:"meta.diff.header.from-file"},{foreground:"999999",background:"ddffdd",token:"meta.diff.header.to-file"},{foreground:"4183c4",token:"meta.link"}],colors:{"editor.foreground":"#000000","editor.background":"#F8F8FF","editor.selectionBackground":"#B4D5FE","editor.lineHighlightBackground":"#FFFEEB","editorCursor.foreground":"#666666","editorWhitespace.foreground":"#BBBBBB"}}},{name:"Monokai",themeName:"monokai",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"75715e",token:"comment"},{foreground:"e6db74",token:"string"},{foreground:"ae81ff",token:"constant.numeric"},{foreground:"ae81ff",token:"constant.language"},{foreground:"ae81ff",token:"constant.character"},{foreground:"ae81ff",token:"constant.other"},{foreground:"f92672",token:"keyword"},{foreground:"f92672",token:"storage"},{foreground:"66d9ef",fontStyle:"italic",token:"storage.type"},{foreground:"a6e22e",fontStyle:"underline",token:"entity.name.class"},{foreground:"a6e22e",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"a6e22e",token:"entity.name.function"},{foreground:"fd971f",fontStyle:"italic",token:"variable.parameter"},{foreground:"f92672",token:"entity.name.tag"},{foreground:"a6e22e",token:"entity.other.attribute-name"},{foreground:"66d9ef",token:"support.function"},{foreground:"66d9ef",token:"support.constant"},{foreground:"66d9ef",fontStyle:"italic",token:"support.type"},{foreground:"66d9ef",fontStyle:"italic",token:"support.class"},{foreground:"f8f8f0",background:"f92672",token:"invalid"},{foreground:"f8f8f0",background:"ae81ff",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"75715e",token:"meta.diff"},{foreground:"75715e",token:"meta.diff.header"},{foreground:"f92672",token:"markup.deleted"},{foreground:"a6e22e",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"ae81ff",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename.find-in-files"}],colors:{"editor.foreground":"#F8F8F2","editor.background":"#272822","editor.selectionBackground":"#49483E","editor.lineHighlightBackground":"#3E3D32","editorCursor.foreground":"#F8F8F0","editorWhitespace.foreground":"#3B3A32","editorIndentGuide.activeBackground":"#9D550F","editor.selectionHighlightBorder":"#222218"}}},{name:"Solarized-Dark",themeName:"solarized-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"657b83",fontStyle:"italic",token:"comment"},{foreground:"2aa198",token:"string"},{foreground:"d30102",token:"string.regexp"},{foreground:"d33682",token:"constant.numeric"},{foreground:"268bd2",token:"variable.language"},{foreground:"268bd2",token:"variable.other"},{foreground:"859900",token:"keyword"},{foreground:"93a1a1",fontStyle:"bold",token:"storage"},{foreground:"cb4b16",token:"entity.name.class"},{foreground:"cb4b16",token:"entity.name.type.class"},{foreground:"268bd2",token:"entity.name.function"},{foreground:"859900",token:"punctuation.definition.variable"},{foreground:"d30102",token:"punctuation.section.embedded.begin"},{foreground:"d30102",token:"punctuation.section.embedded.end"},{foreground:"b58900",token:"constant.language"},{foreground:"b58900",token:"meta.preprocessor"},{foreground:"cb4b16",token:"support.function.construct"},{foreground:"cb4b16",token:"keyword.other.new"},{foreground:"cb4b16",token:"constant.character"},{foreground:"cb4b16",token:"constant.other"},{foreground:"6c71c4",token:"entity.other.inherited-class"},{foreground:"268bd2",fontStyle:"bold",token:"entity.name.tag"},{foreground:"657b83",token:"punctuation.definition.tag"},{foreground:"93a1a1",token:"entity.other.attribute-name"},{foreground:"268bd2",token:"support.function"},{foreground:"d30102",token:"punctuation.separator.continuation"},{foreground:"859900",token:"support.type"},{foreground:"859900",token:"support.class"},{foreground:"cb4b16",token:"support.type.exception"}],colors:{"editor.foreground":"#93A1A1","editor.background":"#002B36","editor.selectionBackground":"#073642","editor.lineHighlightBackground":"#073642","editorCursor.foreground":"#D30102","editorWhitespace.foreground":"#93A1A1"}}},{name:"Solarized-Light",themeName:"solarized-light",themeData:{base:"vs",inherit:!0,rules:[{foreground:"93a1a1",token:"comment"},{foreground:"2aa198",token:"string"},{foreground:"d30102",token:"string.regexp"},{foreground:"d33682",token:"constant.numeric"},{foreground:"268bd2",token:"variable.language"},{foreground:"268bd2",token:"variable.other"},{foreground:"859900",token:"keyword"},{foreground:"073642",fontStyle:"bold",token:"storage"},{foreground:"268bd2",token:"entity.name.class"},{foreground:"268bd2",token:"entity.name.type.class"},{foreground:"268bd2",token:"entity.name.function"},{foreground:"859900",token:"punctuation.definition.variable"},{foreground:"d30102",token:"punctuation.section.embedded.begin"},{foreground:"d30102",token:"punctuation.section.embedded.end"},{foreground:"b58900",token:"constant.language"},{foreground:"b58900",token:"meta.preprocessor"},{foreground:"d30102",token:"support.function.construct"},{foreground:"d30102",token:"keyword.other.new"},{foreground:"cb4b16",token:"constant.character"},{foreground:"cb4b16",token:"constant.other"},{foreground:"268bd2",fontStyle:"bold",token:"entity.name.tag"},{foreground:"93a1a1",token:"punctuation.definition.tag.begin"},{foreground:"93a1a1",token:"punctuation.definition.tag.end"},{foreground:"93a1a1",token:"entity.other.attribute-name"},{foreground:"268bd2",token:"support.function"},{foreground:"d30102",token:"punctuation.separator.continuation"},{foreground:"859900",token:"support.type"},{foreground:"859900",token:"support.class"},{foreground:"cb4b16",token:"support.type.exception"}],colors:{"editor.foreground":"#586E75","editor.background":"#FDF6E3","editor.selectionBackground":"#073642","editor.lineHighlightBackground":"#EEE8D5","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#93A1A1"}}},{name:"Tomorrow",themeName:"tomorrow",themeData:{base:"vs",inherit:!0,rules:[{foreground:"8e908c",token:"comment"},{foreground:"666969",token:"keyword.operator.class"},{foreground:"666969",token:"constant.other"},{foreground:"666969",token:"source.php.embedded.line"},{foreground:"c82829",token:"variable"},{foreground:"c82829",token:"support.other.variable"},{foreground:"c82829",token:"string.other.link"},{foreground:"c82829",token:"string.regexp"},{foreground:"c82829",token:"entity.name.tag"},{foreground:"c82829",token:"entity.other.attribute-name"},{foreground:"c82829",token:"meta.tag"},{foreground:"c82829",token:"declaration.tag"},{foreground:"f5871f",token:"constant.numeric"},{foreground:"f5871f",token:"constant.language"},{foreground:"f5871f",token:"support.constant"},{foreground:"f5871f",token:"constant.character"},{foreground:"f5871f",token:"variable.parameter"},{foreground:"f5871f",token:"punctuation.section.embedded"},{foreground:"f5871f",token:"keyword.other.unit"},{foreground:"c99e00",token:"entity.name.class"},{foreground:"c99e00",token:"entity.name.type.class"},{foreground:"c99e00",token:"support.type"},{foreground:"c99e00",token:"support.class"},{foreground:"718c00",token:"string"},{foreground:"718c00",token:"constant.other.symbol"},{foreground:"718c00",token:"entity.other.inherited-class"},{foreground:"718c00",token:"markup.heading"},{foreground:"3e999f",token:"keyword.operator"},{foreground:"3e999f",token:"constant.other.color"},{foreground:"4271ae",token:"entity.name.function"},{foreground:"4271ae",token:"meta.function-call"},{foreground:"4271ae",token:"support.function"},{foreground:"4271ae",token:"keyword.other.special-method"},{foreground:"4271ae",token:"meta.block-level"},{foreground:"8959a8",token:"keyword"},{foreground:"8959a8",token:"storage"},{foreground:"8959a8",token:"storage.type"},{foreground:"ffffff",background:"c82829",token:"invalid"},{foreground:"ffffff",background:"4271ae",token:"meta.separator"},{foreground:"ffffff",background:"8959a8",token:"invalid.deprecated"}],colors:{"editor.foreground":"#4D4D4C","editor.background":"#FFFFFF","editor.selectionBackground":"#D6D6D6","editor.lineHighlightBackground":"#EFEFEF","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#D1D1D1"}}},{name:"Tomorrow-Night",themeName:"tomorrow-night",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"969896",token:"comment"},{foreground:"ced1cf",token:"keyword.operator.class"},{foreground:"ced1cf",token:"constant.other"},{foreground:"ced1cf",token:"source.php.embedded.line"},{foreground:"cc6666",token:"variable"},{foreground:"cc6666",token:"support.other.variable"},{foreground:"cc6666",token:"string.other.link"},{foreground:"cc6666",token:"string.regexp"},{foreground:"cc6666",token:"entity.name.tag"},{foreground:"cc6666",token:"entity.other.attribute-name"},{foreground:"cc6666",token:"meta.tag"},{foreground:"cc6666",token:"declaration.tag"},{foreground:"de935f",token:"constant.numeric"},{foreground:"de935f",token:"constant.language"},{foreground:"de935f",token:"support.constant"},{foreground:"de935f",token:"constant.character"},{foreground:"de935f",token:"variable.parameter"},{foreground:"de935f",token:"punctuation.section.embedded"},{foreground:"de935f",token:"keyword.other.unit"},{foreground:"f0c674",token:"entity.name.class"},{foreground:"f0c674",token:"entity.name.type.class"},{foreground:"f0c674",token:"support.type"},{foreground:"f0c674",token:"support.class"},{foreground:"b5bd68",token:"string"},{foreground:"b5bd68",token:"constant.other.symbol"},{foreground:"b5bd68",token:"entity.other.inherited-class"},{foreground:"b5bd68",token:"markup.heading"},{foreground:"8abeb7",token:"keyword.operator"},{foreground:"8abeb7",token:"constant.other.color"},{foreground:"81a2be",token:"entity.name.function"},{foreground:"81a2be",token:"meta.function-call"},{foreground:"81a2be",token:"support.function"},{foreground:"81a2be",token:"keyword.other.special-method"},{foreground:"81a2be",token:"meta.block-level"},{foreground:"b294bb",token:"keyword"},{foreground:"b294bb",token:"storage"},{foreground:"b294bb",token:"storage.type"},{foreground:"b294bb",token:"entity.name.tag.css"},{foreground:"ced2cf",background:"df5f5f",token:"invalid"},{foreground:"ced2cf",background:"82a3bf",token:"meta.separator"},{foreground:"ced2cf",background:"b798bf",token:"invalid.deprecated"}],colors:{"editor.foreground":"#C5C8C6","editor.background":"#1D1F21","editor.selectionBackground":"#373B41","editor.lineHighlightBackground":"#282A2E","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#4B4E55"}}},{name:"Vibrant Ink",themeName:"vibrant-ink",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"ffffff",background:"0f0f0f",token:"text"},{background:"000000",token:"source.ruby.rails.embedded.html"},{foreground:"ffffff",background:"101010",token:"text.html.ruby"},{foreground:"ccff33",background:"000000",token:"invalid"},{foreground:"ccff33",background:"000000",token:"invalid.deprecated"},{foreground:"99cc99",token:"constant.numeric"},{foreground:"ffffff",background:"000000",token:"source"},{foreground:"9933cc",token:"comment"},{foreground:"339999",token:"constant"},{foreground:"ff6600",token:"keyword"},{foreground:"edf8f9",token:"keyword.preprocessor"},{foreground:"ffffff",token:"keyword.preprocessor directive"},{foreground:"ffcc00",token:"entity.name.function"},{foreground:"ffcc00",token:"storage.type.function.js"},{fontStyle:"italic",token:"variable.parameter"},{foreground:"772cb7",background:"070707",token:"source comment.block"},{foreground:"ffffff",token:"variable.other"},{foreground:"ffcc00",token:"support.function"},{foreground:"66ff00",token:"string"},{foreground:"aaaaaa",token:"string constant.character.escape"},{foreground:"000000",background:"cccc33",token:"string.interpolated"},{foreground:"44b4cc",token:"string.regexp"},{foreground:"cccc33",token:"string.literal"},{foreground:"555555",token:"string.interpolated constant.character.escape"},{fontStyle:"underline",token:"entity.name.class"},{fontStyle:"underline",token:"support.class.js"},{fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"ff6600",token:"meta.tag.inline.any.html"},{foreground:"ff6600",token:"meta.tag.block.any.html"},{foreground:"99cc99",fontStyle:"italic",token:"entity.other.attribute-name"},{foreground:"dde93d",token:"keyword.other"},{foreground:"ff6600",token:"meta.selector.css"},{foreground:"ff6600",token:"entity.other.attribute-name.pseudo-class.css"},{foreground:"ff6600",token:"entity.name.tag.wildcard.css"},{foreground:"ff6600",token:"entity.other.attribute-name.id.css"},{foreground:"ff6600",token:"entity.other.attribute-name.class.css"},{foreground:"999966",token:"support.type.property-name.css"},{foreground:"ffffff",token:"keyword.other.unit.css"},{foreground:"ffffff",token:"constant.other.rgb-value.css"},{foreground:"ffffff",token:"constant.numeric.css"},{foreground:"ffffff",token:"support.function.event-handler.js"},{foreground:"ffffff",token:"keyword.operator.js"},{foreground:"cccc66",token:"keyword.control.js"},{foreground:"ffffff",token:"support.class.prototype.js"},{foreground:"ff6600",token:"object.property.function.prototype.js"}],colors:{"editor.foreground":"#FFFFFF","editor.background":"#0F0F0F","editor.selectionBackground":"#6699CC","editor.lineHighlightBackground":"#333333","editorCursor.foreground":"#FFFFFF","editorWhitespace.foreground":"#404040"}}},{name:"Nord-Dark",themeName:"nord-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"616e88",token:"comment"},{foreground:"616e88",fontStyle:"bold",token:"comment.block.preprocessor"},{foreground:"81a1c1",token:"comment.block.documentation"},{foreground:"d8dee9",background:"bf616a",token:"invalid.illegal"},{foreground:"81a1c1",token:"keyword"},{foreground:"81a1c1",token:"storage"},{foreground:"81a1c1",token:"keyword.operator"},{foreground:"81a1c1",token:"constant.language"},{foreground:"81a1c1",token:"support.constant"},{foreground:"8fbcbb",token:"storage.type"},{foreground:"8fBcbb",token:"entity.other.attribute-name"},{foreground:"d8dee9",token:"variable.other"},{foreground:"d8dee9",token:"variable.language"},{foreground:"8fbcbb",token:"entity.name.type"},{foreground:"8fbcbb",fontStyle:"bold",token:"entity.other.inherited-class"},{foreground:"8fbcbb",token:"support.class"},{foreground:"8fbcbb",token:"variable.other.constant"},{foreground:"88c0d0",token:"entity.name.function"},{foreground:"88c0d0",token:"support.function"},{foreground:"88c0d0",token:"entity.name.section"},{foreground:"5e81ac",token:"entity.name.tag"},{foreground:"d8dee9",token:"variable.parameter"},{foreground:"d8dee9",token:"support.variable"},{foreground:"b48ead",token:"constant.numeric"},{foreground:"b48ead",token:"constant.other"},{foreground:"a3be8c",token:"string - string source"},{foreground:"ebcb8b",token:"constant.character"},{foreground:"ebcb8b",token:"string.regexp"},{foreground:"d8dee9",fontStyle:"bold",token:"constant.other.symbol"},{fontground:"eceff4",token:"punctuation"},{foreground:"bf616a",token:"markup.deleted"},{fontStyle:"italic",token:"markup.italic"},{foreground:"88c0d0",token:"markup.heading"},{foreground:"a3be8c",token:"markup.inserted"},{fontStyle:"bold",token:"markup.bold"},{fontStyle:"underline",token:"markup.underline"},{foreground:"8fbcbb",token:"meta.diff.range"},{foreground:"8fbcbb",token:"meta.diff.header.from-file"}],colors:{"editorActiveLineNumber.foreground":"#d8dee9","editorCursor.foreground":"#d8dee9","editorHint.border":"#ebcb8b","editorHint.foreground":"#ebcb8b","editorIndentGuide.background":"#434c5e","editorIndentGuide.activeBackground":"#4c566a","editorLineNumber.foreground":"#4c566a","editorLineNumber.activeForeground":"#d8dee9","editorWhitespace.foreground":"#4c566a","editorWidget.background":"#2e3440","editorWidget.border":"#3b4252","editor.background":"#2e3440","editor.foreground":"#d8dee9","editor.hoverHighlightBackground":"#3b4252","editor.findMatchBackground":"#88c0d0","editor.findMatchHighlightBackground":"#88c0d0","editor.findRangeHighlightBackground":"#88c0d0","editor.lineHighlightBackground":"#3b4252","editor.lineHighlightBorder":"#3b4252","editor.inactiveSelectionBackground":"#434c5e","editor.selectionBackground":"#434c5e","editor.selectionHighlightBackground":"#434c5e","editor.rangeHighlightBackground":"#434c5e","editor.wordHighlightBackground":"#81a1c1","editor.wordHighlightStrongBackground":"#81a1c1","editorError.foreground":"#bf616a","editorError.border":"#bf616a","editorWarning.foreground":"#ebcb8b","editorWarning.border":"#ebcb8b","editorBracketMatch.background":"#2e3440","editorBracketMatch.border":"#88c0d0","editorCodeLens.foreground":"#4c566a","editorGroup.background":"#2e3440","editorGroup.border":"#3b4252","editorGroup.dropBackground":"#3b4252","editorGroupHeader.noTabsBackground":"#2e3440","editorGroupHeader.tabsBackground":"#2e3440","editorGroupHeader.tabsBorder":"#3b4252","editorGutter.background":"#2e3440","editorGutter.modifiedBackground":"#ebcb8b","editorGutter.addedBackground":"#a3be8c","editorGutter.deletedBackground":"#bf616a","editorHoverWidget.background":"#3b4252","editorHoverWidget.border":"#3b4252","editorLink.activeForeground":"#88c0d0","editorMarkerNavigation.background":"#5e81ac","editorMarkerNavigationError.background":"#bf616a","editorMarkerNavigationWarning.background":"#ebcb8b","editorOverviewRuler.border":"#3b4252","editorOverviewRuler.currentContentForeground":"#3b4252","editorOverviewRuler.incomingContentForeground":"#3b4252","editorOverviewRuler.findMatchForeground":"#88c0d0","editorOverviewRuler.rangeHighlightForeground":"#88c0d0","editorOverviewRuler.selectionHighlightForeground":"#88c0d0","editorOverviewRuler.wordHighlightForeground":"#88c0d0","editorOverviewRuler.wordHighlightStrongForeground":"#88c0d0","editorOverviewRuler.modifiedForeground":"#ebcb8b","editorOverviewRuler.addedForeground":"#a3be8c","editorOverviewRuler.deletedForeground":"#bf616a","editorOverviewRuler.errorForeground":"#bf616a","editorOverviewRuler.warningForeground":"#ebcb8b","editorOverviewRuler.infoForeground":"#81a1c1","editorRuler.foreground":"#434c5e","editorSuggestWidget.background":"#2e3440","editorSuggestWidget.border":"#3b4252","editorSuggestWidget.foreground":"#d8dee9","editorSuggestWidget.highlightForeground":"#88c0d0","editorSuggestWidget.selectedBackground":"#434c5e"}}},{name:"One-Dark",themeName:"one-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"abb2bf",token:"text"},{foreground:"abb2bf",token:"source"},{foreground:"adb7c9",token:"variable.parameter.function"},{foreground:"5f697a",fontStyle:" italic",token:"comment"},{foreground:"5f697a",fontStyle:" italic",token:"punctuation.definition.comment"},{foreground:"adb7c9",token:"none"},{foreground:"adb7c9",token:"keyword.operator"},{foreground:"cd74e8",token:"keyword"},{foreground:"eb6772",token:"variable"},{foreground:"5cb3fa",token:"entity.name.function"},{foreground:"5cb3fa",token:"meta.require"},{foreground:"5cb3fa",token:"support.function.any-method"},{foreground:"f0c678",token:"support.class"},{foreground:"f0c678",token:"entity.name.class"},{foreground:"f0c678",token:"entity.name.type.class"},{foreground:"adb7c9",token:"meta.class"},{foreground:"5cb3fa",token:"keyword.other.special-method"},{foreground:"cd74e8",token:"storage"},{foreground:"5ebfcc",token:"support.function"},{foreground:"9acc76",token:"string"},{foreground:"9acc76",token:"constant.other.symbol"},{foreground:"9acc76",token:"entity.other.inherited-class"},{foreground:"db9d63",token:"constant.numeric"},{foreground:"db9d63",token:"none"},{foreground:"db9d63",token:"none"},{foreground:"db9d63",token:"constant"},{foreground:"eb6772",token:"entity.name.tag"},{foreground:"db9d63",token:"entity.other.attribute-name"},{foreground:"db9d63",token:"entity.other.attribute-name.id"},{foreground:"db9d63",token:"punctuation.definition.entity"},{foreground:"cd74e8",token:"meta.selector"},{foreground:"db9d63",token:"none"},{foreground:"5cb3fa",token:"markup.heading punctuation.definition.heading"},{foreground:"5cb3fa",token:"entity.name.section"},{foreground:"db9d63",token:"keyword.other.unit"},{foreground:"f0c678",token:"markup.bold"},{foreground:"f0c678",token:"punctuation.definition.bold"},{foreground:"cd74e8",token:"markup.italic"},{foreground:"cd74e8",token:"punctuation.definition.italic"},{foreground:"9acc76",token:"markup.raw.inline"},{foreground:"eb6772",token:"string.other.link"},{foreground:"eb6772",token:"punctuation.definition.string.end.markdown"},{foreground:"db9d63",token:"meta.link"},{foreground:"eb6772",token:"markup.list"},{foreground:"db9d63",token:"markup.quote"},{foreground:"adb7c9",background:"515151",token:"meta.separator"},{foreground:"9acc76",token:"markup.inserted"},{foreground:"eb6772",token:"markup.deleted"},{foreground:"cd74e8",token:"markup.changed"},{foreground:"5ebfcc",token:"constant.other.color"},{foreground:"5ebfcc",token:"string.regexp"},{foreground:"5ebfcc",token:"constant.character.escape"},{foreground:"c94e42",token:"punctuation.section.embedded"},{foreground:"c94e42",token:"variable.interpolation"},{foreground:"ffffff",background:"e05252",token:"invalid.illegal"},{foreground:"2d2d2d",background:"f99157",token:"invalid.broken"},{foreground:"2c323d",background:"d27b53",token:"invalid.deprecated"},{foreground:"2c323d",background:"747369",token:"invalid.unimplemented"},{foreground:"eb6772",token:"source.json meta.structure.dictionary.json string.quoted.double.json"},{foreground:"9acc76",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"eb6772",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json string.quoted.double.json"},{foreground:"9acc76",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"cd74e8",token:"text.html.laravel-blade source.php.embedded.line.html entity.name.tag.laravel-blade"},{foreground:"cd74e8",token:"text.html.laravel-blade source.php.embedded.line.html support.constant.laravel-blade"},{foreground:"db9d63",token:"source.python meta.function.python meta.function.parameters.python variable.parameter.function.python"},{foreground:"5ebfcc",token:"source.python meta.function-call.python support.type.python"},{foreground:"cd74e8",token:"source.python keyword.operator.logical.python"},{foreground:"f0c678",token:"source.python meta.class.python punctuation.definition.inheritance.begin.python"},{foreground:"f0c678",token:"source.python meta.class.python punctuation.definition.inheritance.end.python"},{foreground:"db9d63",token:"source.python meta.function-call.python meta.function-call.arguments.python variable.parameter.function.python"},{foreground:"db9d63",token:"text.html.basic source.php.embedded.block.html support.constant.std.php"},{foreground:"f0c678",token:"text.html.basic source.php.embedded.block.html meta.namespace.php entity.name.type.namespace.php"},{foreground:"db9d63",token:"source.js meta.function.js support.constant.js"},{foreground:"cd74e8",token:"text.html.basic` source.php.embedded.block.html constant.other.php"},{foreground:"db9d63",token:"text.html.basic source.php.embedded.block.html support.other.namespace.php"},{foreground:"adb7c9",token:"text.tex.latex meta.function.environment.math.latex string.other.math.block.environment.latex meta.definition.label.latex variable.parameter.definition.label.latex"},{foreground:"cd74e8",fontStyle:" italic",token:"text.tex.latex meta.function.emph.latex markup.italic.emph.latex"},{foreground:"adb7c9",token:"source.js variable.other.readwrite.js"},{foreground:"adb7c9",token:"source.js meta.function-call.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.without-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly variable.other.object.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js string.unquoted.label.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js punctuation.separator.key-value.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.function-call.method.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.function-call.method.without-arguments.js variable.function.js"}],colors:{"editor.foreground":"#6c7079","editor.background":"#2B303B","editor.selectionBackground":"#bbccf51b","editor.inactiveSelectionBackground":"#bbccf51b","editor.lineHighlightBackground":"#8cc2fc0b","editorCursor.foreground":"#528bff","editorWhitespace.foreground":"#747369","editorIndentGuide.background":"#464c55","editorIndentGuide.activeBackground":"#464c55","editor.selectionHighlightBorder":"#bbccf51b"}}},{name:"Ros\xe9 Pine",themeName:"rose-pine",themeData:{base:"vs-dark",inherit:!0,rules:[{background:"#191724",foreground:"#e0def4",token:""},{background:"#191724",foreground:"#e0def4",token:"text"},{background:"#191724",foreground:"#e0def4",token:"source"},{foreground:"#c4a7e7",token:"pointsOfInterest"},{foreground:"#eb6f92",token:"invalid"},{fontStyle:"italic",token:"emphasis"},{fontStyle:"bold",token:"strong"},{foreground:"#e0def4",token:"variable"},{foreground:"#e0def4",token:"variable.predefined"},{foreground:"#ebbcba",token:"constant"},{foreground:"#6e6a86",token:"comment"},{foreground:"#ebbcba",token:"number"},{foreground:"#ebbcba",token:"number.hex"},{foreground:"#f6c177",token:"regexp"},{foreground:"#6e6a86",token:"annotation"},{foreground:"#e0def4",token:"type"},{foreground:"#908caa",token:"delimiter"},{foreground:"#908caa",token:"delimiter.html"},{foreground:"#908caa",token:"delimiter.xml"},{foreground:"#9ccfd8",token:"tag"},{foreground:"#9ccfd8",token:"tag.id.jade"},{foreground:"#9ccfd8",token:"tag.class.jade"},{foreground:"#9ccfd8",token:"meta.scss"},{foreground:"#9ccfd8",token:"metatag"},{foreground:"#9ccfd8",token:"metatag.content.html"},{foreground:"#9ccfd8",token:"metatag.html"},{foreground:"#9ccfd8",token:"metatag.xml"},{foreground:"#9ccfd8",token:"metatag.php"},{foreground:"#9ccfd8",token:"key"},{foreground:"#9ccfd8",token:"string.key.json"},{foreground:"#f6c177",token:"string.value.json"},{foreground:"#c4a7e7",token:"attribute.name"},{foreground:"#f6c177",token:"attribute.value"},{foreground:"#f6c177",token:"attribute.value.number"},{foreground:"#f6c177",token:"attribute.value.unit"},{foreground:"#f6c177",token:"attribute.value.html"},{foreground:"#f6c177",token:"attribute.value.xml"},{foreground:"#f6c177",token:"string"},{foreground:"#f6c177",token:"string.html"},{foreground:"#f6c177",token:"string.sql"},{foreground:"#f6c177",token:"string.yaml"},{foreground:"#31748f",token:"keyword"},{foreground:"#31748f",token:"keyword.json"},{foreground:"#31748f",token:"keyword.flow"},{foreground:"#31748f",token:"keyword.flow.scss"},{foreground:"#908caa",token:"operator.scss"},{foreground:"#908caa",token:"operator.sql"},{foreground:"#908caa",token:"operator.swift"},{foreground:"#908caa",token:"predefined.sql"},{foreground:"#ebbcba",token:"identifier"}],colors:{"activityBar.activeBorder":"#e0def4","activityBar.background":"#191724","activityBar.dropBorder":"#26233a","activityBar.foreground":"#e0def4","activityBar.inactiveForeground":"#908caa","activityBarBadge.background":"#ebbcba","activityBarBadge.foreground":"#191724","badge.background":"#ebbcba","badge.foreground":"#191724","banner.background":"#1f1d2e","banner.foreground":"#e0def4","banner.iconForeground":"#908caa","breadcrumb.activeSelectionForeground":"#ebbcba","breadcrumb.background":"#191724","breadcrumb.focusForeground":"#908caa","breadcrumb.foreground":"#6e6a86","breadcrumbPicker.background":"#1f1d2e","button.background":"#ebbcba","button.foreground":"#191724","button.hoverBackground":"#ebbcbae6","button.secondaryBackground":"#1f1d2e","button.secondaryForeground":"#e0def4","button.secondaryHoverBackground":"#26233a","charts.blue":"#9ccfd8","charts.foreground":"#e0def4","charts.green":"#31748f","charts.lines":"#908caa","charts.orange":"#ebbcba","charts.purple":"#c4a7e7","charts.red":"#eb6f92","charts.yellow":"#f6c177","checkbox.background":"#1f1d2e","checkbox.border":"#6e6a8633","checkbox.foreground":"#e0def4","debugExceptionWidget.background":"#1f1d2e","debugExceptionWidget.border":"#6e6a8633","debugIcon.breakpointCurrentStackframeForeground":"#908caa","debugIcon.breakpointDisabledForeground":"#908caa","debugIcon.breakpointForeground":"#908caa","debugIcon.breakpointStackframeForeground":"#908caa","debugIcon.breakpointUnverifiedForeground":"#908caa","debugIcon.continueForeground":"#908caa","debugIcon.disconnectForeground":"#908caa","debugIcon.pauseForeground":"#908caa","debugIcon.restartForeground":"#908caa","debugIcon.startForeground":"#908caa","debugIcon.stepBackForeground":"#908caa","debugIcon.stepIntoForeground":"#908caa","debugIcon.stepOutForeground":"#908caa","debugIcon.stepOverForeground":"#908caa","debugIcon.stopForeground":"#eb6f92","debugToolBar.background":"#1f1d2e","debugToolBar.border":"#26233a",descriptionForeground:"#908caa","diffEditor.border":"#26233a","diffEditor.diagonalFill":"#6e6a8666","diffEditor.insertedTextBackground":"#9ccfd826","diffEditor.removedTextBackground":"#eb6f9226","diffEditorOverview.insertedForeground":"#9ccfd880","diffEditorOverview.removedForeground":"#eb6f9280","dropdown.background":"#1f1d2e","dropdown.border":"#6e6a8633","dropdown.foreground":"#e0def4","dropdown.listBackground":"#1f1d2e","editor.background":"#191724","editor.findMatchBackground":"#6e6a8666","editor.findMatchHighlightBackground":"#6e6a8666","editor.findRangeHighlightBackground":"#6e6a8666","editor.findRangeHighlightBorder":"#0000","editor.focusedStackFrameHighlightBackground":"#6e6a8633","editor.foldBackground":"#1f1d2e","editor.foreground":"#e0def4","editor.hoverHighlightBackground":"#0000","editor.inactiveSelectionBackground":"#6e6a861a","editor.inlineValuesBackground":"#0000","editor.inlineValuesForeground":"#908caa","editor.lineHighlightBackground":"#6e6a861a","editor.lineHighlightBorder":"#0000","editor.linkedEditingBackground":"#1f1d2e","editor.rangeHighlightBackground":"#6e6a861a","editor.rangeHighlightBorder":"#0000","editor.selectionBackground":"#6e6a8633","editor.selectionForeground":"#e0def4","editor.selectionHighlightBackground":"#6e6a8633","editor.selectionHighlightBorder":"#0000","editor.snippetFinalTabstopHighlightBackground":"#6e6a8633","editor.snippetFinalTabstopHighlightBorder":"#1f1d2e","editor.snippetTabstopHighlightBackground":"#6e6a8633","editor.snippetTabstopHighlightBorder":"#1f1d2e","editor.stackFrameHighlightBackground":"#6e6a8633","editor.symbolHighlightBackground":"#6e6a8633","editor.symbolHighlightBorder":"#0000","editor.wordHighlightBackground":"#6e6a8633","editor.wordHighlightBorder":"#0000","editor.wordHighlightStrongBackground":"#6e6a8633","editor.wordHighlightStrongBorder":"#6e6a8633","editorBracketHighlight.foreground1":"#eb6f9280","editorBracketHighlight.foreground2":"#31748f80","editorBracketHighlight.foreground3":"#f6c17780","editorBracketHighlight.foreground4":"#9ccfd880","editorBracketHighlight.foreground5":"#ebbcba80","editorBracketHighlight.foreground6":"#c4a7e780","editorBracketMatch.background":"#0000","editorBracketMatch.border":"#908caa","editorBracketPairGuide.activeBackground1":"#31748f","editorBracketPairGuide.activeBackground2":"#ebbcba","editorBracketPairGuide.activeBackground3":"#c4a7e7","editorBracketPairGuide.activeBackground4":"#9ccfd8","editorBracketPairGuide.activeBackground5":"#f6c177","editorBracketPairGuide.activeBackground6":"#eb6f92","editorBracketPairGuide.background1":"#31748f80","editorBracketPairGuide.background2":"#ebbcba80","editorBracketPairGuide.background3":"#c4a7e780","editorBracketPairGuide.background4":"#9ccfd880","editorBracketPairGuide.background5":"#f6c17780","editorBracketPairGuide.background6":"#eb6f9280","editorCodeLens.foreground":"#ebbcba","editorCursor.background":"#e0def4","editorCursor.foreground":"#6e6a86","editorError.border":"#0000","editorError.foreground":"#eb6f92","editorGhostText.foreground":"#908caa","editorGroup.border":"#0000","editorGroup.dropBackground":"#1f1d2e","editorGroup.emptyBackground":"#0000","editorGroup.focusedEmptyBorder":"#0000","editorGroupHeader.noTabsBackground":"#0000","editorGroupHeader.tabsBackground":"#0000","editorGroupHeader.tabsBorder":"#0000","editorGutter.addedBackground":"#9ccfd8","editorGutter.background":"#0000","editorGutter.commentRangeForeground":"#908caa","editorGutter.deletedBackground":"#eb6f92","editorGutter.foldingControlForeground":"#c4a7e7","editorGutter.modifiedBackground":"#ebbcba","editorHint.border":"#0000","editorHint.foreground":"#908caa","editorHoverWidget.background":"#1f1d2e","editorHoverWidget.border":"#6e6a8680","editorHoverWidget.foreground":"#908caa","editorHoverWidget.highlightForeground":"#e0def4","editorHoverWidget.statusBarBackground":"#0000","editorIndentGuide.activeBackground":"#6e6a86","editorIndentGuide.background":"#6e6a8666","editorInfo.border":"#26233a","editorInfo.foreground":"#9ccfd8","editorInlayHint.background":"#26233a","editorInlayHint.foreground":"#908caa","editorInlayHint.parameterBackground":"#26233a","editorInlayHint.parameterForeground":"#c4a7e7","editorInlayHint.typeBackground":"#26233a","editorInlayHint.typeForeground":"#9ccfd8","editorLightBulb.foreground":"#31748f","editorLightBulbAutoFix.foreground":"#ebbcba","editorLineNumber.activeForeground":"#e0def4","editorLineNumber.foreground":"#908caa","editorLink.activeForeground":"#ebbcba","editorMarkerNavigation.background":"#1f1d2e","editorMarkerNavigationError.background":"#1f1d2e","editorMarkerNavigationInfo.background":"#1f1d2e","editorMarkerNavigationWarning.background":"#1f1d2e","editorOverviewRuler.addedForeground":"#9ccfd880","editorOverviewRuler.background":"#191724","editorOverviewRuler.border":"#6e6a8666","editorOverviewRuler.bracketMatchForeground":"#908caa","editorOverviewRuler.commonContentForeground":"#6e6a861a","editorOverviewRuler.currentContentForeground":"#6e6a8633","editorOverviewRuler.deletedForeground":"#eb6f9280","editorOverviewRuler.errorForeground":"#eb6f9280","editorOverviewRuler.findMatchForeground":"#6e6a8666","editorOverviewRuler.incomingContentForeground":"#c4a7e780","editorOverviewRuler.infoForeground":"#9ccfd880","editorOverviewRuler.modifiedForeground":"#ebbcba80","editorOverviewRuler.rangeHighlightForeground":"#6e6a8666","editorOverviewRuler.selectionHighlightForeground":"#6e6a8666","editorOverviewRuler.warningForeground":"#f6c17780","editorOverviewRuler.wordHighlightForeground":"#6e6a8633","editorOverviewRuler.wordHighlightStrongForeground":"#6e6a8666","editorPane.background":"#0000","editorRuler.foreground":"#6e6a8666","editorSuggestWidget.background":"#1f1d2e","editorSuggestWidget.border":"#0000","editorSuggestWidget.focusHighlightForeground":"#ebbcba","editorSuggestWidget.foreground":"#908caa","editorSuggestWidget.highlightForeground":"#ebbcba","editorSuggestWidget.selectedBackground":"#6e6a8633","editorSuggestWidget.selectedForeground":"#e0def4","editorSuggestWidget.selectedIconForeground":"#e0def4","editorUnnecessaryCode.border":"#0000","editorUnnecessaryCode.opacity":"#00000080","editorWarning.border":"#0000","editorWarning.foreground":"#f6c177","editorWhitespace.foreground":"#6e6a86","editorWidget.background":"#1f1d2e","editorWidget.border":"#26233a","editorWidget.foreground":"#908caa","editorWidget.resizeBorder":"#6e6a86",errorForeground:"#eb6f92","extensionBadge.remoteBackground":"#c4a7e7","extensionBadge.remoteForeground":"#191724","extensionButton.prominentBackground":"#ebbcba","extensionButton.prominentForeground":"#191724","extensionButton.prominentHoverBackground":"#ebbcbae6","extensionIcon.starForeground":"#ebbcba","extensionIcon.verifiedForeground":"#c4a7e7",focusBorder:"#6e6a8633",foreground:"#e0def4","gitDecoration.addedResourceForeground":"#9ccfd8","gitDecoration.conflictingResourceForeground":"#eb6f92","gitDecoration.deletedResourceForeground":"#908caa","gitDecoration.ignoredResourceForeground":"#6e6a86","gitDecoration.modifiedResourceForeground":"#ebbcba","gitDecoration.renamedResourceForeground":"#31748f","gitDecoration.stageDeletedResourceForeground":"#eb6f92","gitDecoration.stageModifiedResourceForeground":"#c4a7e7","gitDecoration.submoduleResourceForeground":"#f6c177","gitDecoration.untrackedResourceForeground":"#f6c177","icon.foreground":"#908caa","input.background":"#26233a80","input.border":"#6e6a8633","input.foreground":"#e0def4","input.placeholderForeground":"#908caa","inputOption.activeBackground":"#ebbcba","inputOption.activeBorder":"#0000","inputOption.activeForeground":"#191724","inputValidation.errorBackground":"#1f1d2e","inputValidation.errorBorder":"#6e6a8666","inputValidation.errorForeground":"#eb6f92","inputValidation.infoBackground":"#1f1d2e","inputValidation.infoBorder":"#6e6a8666","inputValidation.infoForeground":"#9ccfd8","inputValidation.warningBackground":"#1f1d2e","inputValidation.warningBorder":"#6e6a8666","inputValidation.warningForeground":"#9ccfd880","keybindingLabel.background":"#26233a","keybindingLabel.border":"#6e6a8666","keybindingLabel.bottomBorder":"#6e6a8666","keybindingLabel.foreground":"#c4a7e7","keybindingTable.headerBackground":"#26233a","keybindingTable.rowsBackground":"#1f1d2e","list.activeSelectionBackground":"#6e6a8633","list.activeSelectionForeground":"#e0def4","list.activeSelectionIconForeground":"#e0def4","list.deemphasizedForeground":"#908caa","list.dropBackground":"#1f1d2e","list.errorForeground":"#eb6f92","list.filterMatchBackground":"#1f1d2e","list.filterMatchBorder":"#ebbcba","list.focusBackground":"#6e6a8666","list.focusForeground":"#e0def4","list.focusOutline":"#6e6a8633","list.highlightForeground":"#ebbcba","list.hoverBackground":"#6e6a861a","list.hoverForeground":"#e0def4","list.inactiveFocusBackground":"#6e6a861a","list.inactiveSelectionBackground":"#1f1d2e","list.inactiveSelectionForeground":"#e0def4","list.inactiveSelectionIconForeground":"#908caa","list.invalidItemForeground":"#eb6f92","list.warningForeground":"#f6c177","listFilterWidget.background":"#1f1d2e","listFilterWidget.noMatchesOutline":"#eb6f92","listFilterWidget.outline":"#26233a","menu.background":"#1f1d2e","menu.border":"#6e6a861a","menu.foreground":"#e0def4","menu.selectionBackground":"#6e6a8633","menu.selectionBorder":"#26233a","menu.selectionForeground":"#e0def4","menu.separatorBackground":"#6e6a8666","menubar.selectionBackground":"#6e6a8633","menubar.selectionBorder":"#6e6a861a","menubar.selectionForeground":"#e0def4","merge.border":"#26233a","merge.commonContentBackground":"#6e6a8633","merge.commonHeaderBackground":"#6e6a8633","merge.currentContentBackground":"#f6c17780","merge.currentHeaderBackground":"#f6c17780","merge.incomingContentBackground":"#9ccfd880","merge.incomingHeaderBackground":"#9ccfd880","minimap.background":"#1f1d2e","minimap.errorHighlight":"#eb6f9280","minimap.findMatchHighlight":"#6e6a8633","minimap.selectionHighlight":"#6e6a8633","minimap.warningHighlight":"#f6c17780","minimapGutter.addedBackground":"#9ccfd8","minimapGutter.deletedBackground":"#eb6f92","minimapGutter.modifiedBackground":"#ebbcba","minimapSlider.activeBackground":"#6e6a8666","minimapSlider.background":"#6e6a8633","minimapSlider.hoverBackground":"#6e6a8633","notificationCenter.border":"#6e6a8633","notificationCenterHeader.background":"#1f1d2e","notificationCenterHeader.foreground":"#908caa","notificationLink.foreground":"#c4a7e7","notifications.background":"#1f1d2e","notifications.border":"#6e6a8633","notifications.foreground":"#e0def4","notificationsErrorIcon.foreground":"#eb6f92","notificationsInfoIcon.foreground":"#9ccfd8","notificationsWarningIcon.foreground":"#f6c177","notificationToast.border":"#6e6a8633","panel.background":"#1f1d2e","panel.border":"#0000","panel.dropBorder":"#26233a","panelInput.border":"#1f1d2e","panelSection.dropBackground":"#6e6a8633","panelSectionHeader.background":"#1f1d2e","panelSectionHeader.foreground":"#e0def4","panelTitle.activeBorder":"#6e6a8666","panelTitle.activeForeground":"#e0def4","panelTitle.inactiveForeground":"#908caa","peekView.border":"#26233a","peekViewEditor.background":"#1f1d2e","peekViewEditor.matchHighlightBackground":"#6e6a8666","peekViewResult.background":"#1f1d2e","peekViewResult.fileForeground":"#908caa","peekViewResult.lineForeground":"#908caa","peekViewResult.matchHighlightBackground":"#6e6a8666","peekViewResult.selectionBackground":"#6e6a8633","peekViewResult.selectionForeground":"#e0def4","peekViewTitle.background":"#26233a","peekViewTitleDescription.foreground":"#908caa","pickerGroup.border":"#6e6a8666","pickerGroup.foreground":"#c4a7e7","ports.iconRunningProcessForeground":"#ebbcba","problemsErrorIcon.foreground":"#eb6f92","problemsInfoIcon.foreground":"#9ccfd8","problemsWarningIcon.foreground":"#f6c177","progressBar.background":"#ebbcba","quickInput.background":"#1f1d2e","quickInput.foreground":"#908caa","quickInputList.focusBackground":"#6e6a8633","quickInputList.focusForeground":"#e0def4","quickInputList.focusIconForeground":"#e0def4","scrollbar.shadow":"#0000","scrollbarSlider.activeBackground":"#6e6a8666","scrollbarSlider.background":"#6e6a861a","scrollbarSlider.hoverBackground":"#6e6a8633","searchEditor.findMatchBackground":"#6e6a8633","selection.background":"#6e6a8666","settings.focusedRowBackground":"#1f1d2e","settings.headerForeground":"#e0def4","settings.modifiedItemIndicator":"#ebbcba","settings.focusedRowBorder":"#6e6a8633","settings.rowHoverBackground":"#1f1d2e","sideBar.background":"#191724","sideBar.dropBackground":"#1f1d2e","sideBar.foreground":"#908caa","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#6e6a8633","statusBar.background":"#191724","statusBar.debuggingBackground":"#c4a7e7","statusBar.debuggingForeground":"#191724","statusBar.foreground":"#908caa","statusBar.noFolderBackground":"#191724","statusBar.noFolderForeground":"#908caa","statusBarItem.activeBackground":"#6e6a8666","statusBarItem.hoverBackground":"#6e6a8633","statusBarItem.prominentBackground":"#26233a","statusBarItem.prominentForeground":"#e0def4","statusBarItem.prominentHoverBackground":"#6e6a8633","statusBarItem.remoteBackground":"#191724","statusBarItem.remoteForeground":"#f6c177","statusBarItem.errorBackground":"#191724","statusBarItem.errorForeground":"#eb6f92","symbolIcon.arrayForeground":"#908caa","symbolIcon.classForeground":"#908caa","symbolIcon.colorForeground":"#908caa","symbolIcon.constantForeground":"#908caa","symbolIcon.constructorForeground":"#908caa","symbolIcon.enumeratorForeground":"#908caa","symbolIcon.enumeratorMemberForeground":"#908caa","symbolIcon.eventForeground":"#908caa","symbolIcon.fieldForeground":"#908caa","symbolIcon.fileForeground":"#908caa","symbolIcon.folderForeground":"#908caa","symbolIcon.functionForeground":"#908caa","symbolIcon.interfaceForeground":"#908caa","symbolIcon.keyForeground":"#908caa","symbolIcon.keywordForeground":"#908caa","symbolIcon.methodForeground":"#908caa","symbolIcon.moduleForeground":"#908caa","symbolIcon.namespaceForeground":"#908caa","symbolIcon.nullForeground":"#908caa","symbolIcon.numberForeground":"#908caa","symbolIcon.objectForeground":"#908caa","symbolIcon.operatorForeground":"#908caa","symbolIcon.packageForeground":"#908caa","symbolIcon.propertyForeground":"#908caa","symbolIcon.referenceForeground":"#908caa","symbolIcon.snippetForeground":"#908caa","symbolIcon.stringForeground":"#908caa","symbolIcon.structForeground":"#908caa","symbolIcon.textForeground":"#908caa","symbolIcon.typeParameterForeground":"#908caa","symbolIcon.unitForeground":"#908caa","symbolIcon.variableForeground":"#908caa","tab.activeBackground":"#6e6a861a","tab.activeForeground":"#e0def4","tab.activeModifiedBorder":"#9ccfd8","tab.border":"#0000","tab.hoverBackground":"#6e6a8633","tab.inactiveBackground":"#0000","tab.inactiveForeground":"#908caa","tab.inactiveModifiedBorder":"#9ccfd880","tab.lastPinnedBorder":"#6e6a86","tab.unfocusedActiveBackground":"#0000","tab.unfocusedHoverBackground":"#0000","tab.unfocusedInactiveBackground":"#0000","tab.unfocusedInactiveModifiedBorder":"#9ccfd880","terminal.ansiBlack":"#26233a","terminal.ansiBlue":"#9ccfd8","terminal.ansiBrightBlack":"#908caa","terminal.ansiBrightBlue":"#9ccfd8","terminal.ansiBrightCyan":"#ebbcba","terminal.ansiBrightGreen":"#31748f","terminal.ansiBrightMagenta":"#c4a7e7","terminal.ansiBrightRed":"#eb6f92","terminal.ansiBrightWhite":"#e0def4","terminal.ansiBrightYellow":"#f6c177","terminal.ansiCyan":"#ebbcba","terminal.ansiGreen":"#31748f","terminal.ansiMagenta":"#c4a7e7","terminal.ansiRed":"#eb6f92","terminal.ansiWhite":"#e0def4","terminal.ansiYellow":"#f6c177","terminal.dropBackground":"#6e6a8633","terminal.foreground":"#e0def4","terminal.selectionBackground":"#6e6a8633","terminal.tab.activeBorder":"#e0def4","terminalCursor.background":"#e0def4","terminalCursor.foreground":"#6e6a86","textBlockQuote.background":"#1f1d2e","textBlockQuote.border":"#6e6a8633","textCodeBlock.background":"#1f1d2e","textLink.activeForeground":"#c4a7e7e6","textLink.foreground":"#c4a7e7","textPreformat.foreground":"#f6c177","textSeparator.foreground":"#908caa","titleBar.activeBackground":"#191724","titleBar.activeForeground":"#908caa","titleBar.inactiveBackground":"#1f1d2e","titleBar.inactiveForeground":"#908caa","toolbar.activeBackground":"#6e6a8666","toolbar.hoverBackground":"#6e6a8633","tree.indentGuidesStroke":"#908caa","walkThrough.embeddedEditorBackground":"#191724","welcomePage.background":"#191724","welcomePage.buttonBackground":"#1f1d2e","welcomePage.buttonHoverBackground":"#26233a","widget.shadow":"#0101011a","window.activeBorder":"#1f1d2e","window.inactiveBorder":"#1f1d2e"}}}],G=function(){return z},Y=n(50057),q=n.n(Y),X=n(36262),J=n(86278),K=n(28894),Q=n(71944),$=n(55760),ee=n(20914),te={shortcutBox:{padding:15,textAlign:"center"}},ne=function(e){var t=u.useState(""),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=u.useState(!1),s=(0,a.Z)(i,2),l=s[0],d=s[1],p=function(){l&&(r&&e.onSet(r),e.onClose())};return u.useEffect((function(){var e=function(e){e.preventDefault();var t=(0,$.oN)(e);"keyup"!==e.type&&(d(t.isValid),o(t.shortcutString))};return document.addEventListener("keyup",e),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[]),(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Set shortcut"}),open:!0,maxWidth:"xs",actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:e.onClose},"Cancel"),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Set shortcut"}),primary:!0,onClick:p,disabled:!l},"Set")],secondaryActions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Remove shortcut"}),onClick:function(){e.onSet(""),e.onClose()}},"Remove")],onRequestClose:e.onClose,onApply:p,children:[(0,f.jsx)(J.Z,{children:e.commandText}),(0,f.jsx)(ee.Z,{variant:"outlined",style:te.shortcutBox,background:"light",children:(0,f.jsx)(J.Z,{children:r?(0,$.$3)(r):(0,f.jsx)(c.Trans,{id:"Press a shortcut combination..."})})})]})},re=n(24830),oe=n(83141),ie=n(33620),ae=n(99415),se=n(61701),le=n(8511),ce=n(32072),ue=n(75779),de=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.79526 4.23503C10.0797 4.53617 10.0661 5.01085 9.76497 5.29526L5.8423 9L9.76497 12.7047C10.0661 12.9892 10.0797 13.4638 9.79526 13.765C9.51085 14.0661 9.03617 14.0797 8.73503 13.7953L4.23503 9.54526C4.08502 9.40358 4 9.20635 4 9C4 8.79366 4.08502 8.59642 4.23503 8.45474L8.73503 4.20474C9.03617 3.92033 9.51085 3.9339 9.79526 4.23503Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.75 9C4.75 8.58579 5.08579 8.25 5.5 8.25H15.25C17.8733 8.25 20 10.3767 20 13V19.25C20 19.6642 19.6642 20 19.25 20C18.8358 20 18.5 19.6642 18.5 19.25V13C18.5 11.2051 17.0449 9.75 15.25 9.75H5.5C5.08579 9.75 4.75 9.41422 4.75 9Z",fill:"currentColor"})]}))})),pe={shortcutChip:{borderRadius:3}},he=function(e){return(0,f.jsxs)(ie.Z,{children:[(0,f.jsx)(ae.Z,{primary:e.i18n._(ce.Z[e.commandName].displayText)}),(0,f.jsxs)(se.Z,{children:[e.isClashing&&(0,f.jsx)(A.Z,{tooltip:{id:"This shortcut clashes with another action."},children:(0,f.jsx)(ue.Z,{})}),(0,f.jsx)(le.Z,{style:pe.shortcutChip,label:e.shortcutString||(0,f.jsx)(c.Trans,{id:"No shortcut"}),onClick:e.onEditShortcut,color:e.shortcutString?"secondary":"default"}),!e.isDefault&&(0,f.jsx)(A.Z,{onClick:e.onResetShortcut,tooltip:{id:"Reset to default"},children:(0,f.jsx)(de,{})})]})]})},fe=function(e,t){return null==t?e:t},ge=function(e){var t=u.useState(null),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=function(e){var t={},n={};return Object.keys(ce.Z).filter((function(e){return!ce.Z[e].noShortcut})).forEach((function(r){var o=ce.Z[r].area;t[o]||(t[o]=[]),t[o].push(r);var i=e[r],a=oe.Z[r]||"",s=fe(a,i);""!==s&&(n[s]=(n[s]||[]).concat(r))})),[t,n]}(e.userShortcutMap),s=(0,a.Z)(i,2),l=s[0],d=s[1],p=(0,$.$3)(e.userShortcutMap.OPEN_COMMAND_PALETTE||oe.Z.OPEN_COMMAND_PALETTE);return(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(re.Z,{kind:"info",identifier:"command-palette-shortcut",children:(0,f.jsx)(c.Trans,{id:"You can open the command palette by pressing {commandPaletteShortcut}.",values:{commandPaletteShortcut:p}})}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset all shortcuts to default"}),onClick:function(){F.ZP.showConfirmDialog(e.i18n._({id:"Are you sure you want to reset all shortcuts to their default values?"}),"question")&&e.onReset()},fullWidth:!0}),(0,f.jsx)(Q.Z,{children:Object.keys(l).map((function(t){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{size:"block-title",children:e.i18n._(ce.R[t])}),l[t].map((function(t){var n=e.userShortcutMap[t],r=oe.Z[t]||"",i=fe(r,n),a=(0,$.$3)(i),s=d[i],l=s&&s.length>1;return(0,f.jsx)(he,{i18n:e.i18n,shortcutString:a,commandName:t,isDefault:i===r,isClashing:l,onEditShortcut:function(){return o(t)},onResetShortcut:function(){return function(t){e.onEdit(t,oe.Z[t])}(t)}},t)}))]},t)}))}),r&&(0,f.jsx)(ne,{commandText:e.i18n._(ce.Z[r].displayText),onClose:function(){return o(null)},onSet:function(t){e.onEdit(r,t)}})]})},me=n(60542),xe=n.n(me),ve=n(96591),be=xe().filter((function(e){return"en"!==e.languageCode&&("pseudo_LOCALE"!==e.languageCode||F.ZP.isDev())})),je=be.filter((function(e){return e.translationRatio>.5})),Ce=be.filter((function(e){return e.translationRatio<.5})),ye=function(e){var t=e.translationRatio||0,n=(100*e.translationRatio).toFixed(0),r=t>0;return(0,f.jsx)(U.Z,{value:e.languageCode,label:"".concat(e.languageNativeName," (").concat(e.languageName,")").concat(r?" - ~".concat(n,"%"):""),disabled:!r},e.languageCode)},Ze=function(e){var t=e.onLanguageChanged,n=(0,u.useContext)(X.ZP),r=n.values,o=n.setLanguage;return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose SpeXEngine language"}),value:r.language,onChange:function(e,n,r){o(r),t(r)},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"en",label:"English (default)"}),je.map((function(e){return ye(e)})),Ce.map((function(e){return ye(e)}))]})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can <0>help to translate SpeXEngine in your language</0>.",components:[(0,f.jsx)(ve.Z,{href:"https://crowdin.com/project/spexengine",onClick:function(){return F.ZP.openExternalURL("https://crowdin.com/project/spexengine")}})]})})]})},ke=n(67412),we=n(6403),Te=q()("electron"),Ee=function(e){var t=e.i18n,n=e.onClose,r="small"===(0,T.L)(),o=u.useState("preferences"),i=(0,a.Z)(o,2),s=i[0],l=i[1],d=u.useState(!1),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useContext(X.ZP),x=m.values,v=m.setThemeName,b=m.setCodeEditorThemeName,y=m.setAutoDownloadUpdates,Z=m.showAllAlertMessages,k=m.showAllTutorialHints,w=m.showAllAnnouncements,S=m.setAutoDisplayChangelog,P=m.setEventsSheetShowObjectThumbnails,I=m.setAutosaveOnPreview,D=m.setUseUndefinedVariablesInAutocompletion,A=m.setUseGDJSDevelopmentWatcher,M=m.setEventsSheetUseAssignmentOperators,O=m.getDefaultEditorMosaicNode,R=m.setDefaultEditorMosaicNode,z=m.setAutoOpenMostRecentProject,Y=m.resetShortcutsToDefault,q=m.setShortcutForCommand,Q=m.setIsMenuBarHiddenInPreview,ee=m.setBackdropClickBehavior,te=m.setIsAlwaysOnTopInPreview,ne=m.setEventsSheetCancelInlineParameter,re=m.setShowCommunityExtensions,ie=m.setShowEventBasedObjectsEditor,ae=m.setUse3DEditor,se=m.setNewProjectsDefaultFolder,le=m.setUseShortcutToClosePreviewWindow,ce=m.setAllowUsageOfUnicodeIdentifierNames,ue=u.useRef(x.use3DEditor);return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Preferences"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return n(h)}},"close")],onRequestClose:function(){return n(h)},open:!0,maxWidth:"sm",fixedContent:(0,f.jsx)(K.m,{value:s,onChange:l,options:[{value:"preferences",label:(0,f.jsx)(c.Trans,{id:"Preferences"})},{value:"shortcuts",label:(0,f.jsx)(c.Trans,{id:"Keyboard Shortcuts"})}].concat((0,j.Z)(Te?[{value:"folders",label:(0,f.jsx)(c.Trans,{id:"Folders"})}]:[])),variant:r?"scrollable":void 0}),children:["preferences"===s&&(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Language"})}),(0,f.jsx)(Ze,{onLanguageChanged:function(){g(!0)}}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Appearance"})}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"UI Theme"}),value:x.themeName,onChange:function(e,t,n){return v(n)},fullWidth:!0,children:Object.keys(W.n).map((function(e){return(0,f.jsx)(U.Z,{value:e,label:e},e)}))}),(0,f.jsx)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Code editor Theme"}),value:x.codeEditorThemeName,onChange:function(e,t,n){return b(n)},fullWidth:!0,children:G().map((function(e){return(0,f.jsx)(U.Z,{value:e.themeName,label:e.name},e.themeName)}))})]}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can contribute and <0>create your own themes</0>.",components:[(0,f.jsx)(ve.Z,{href:"https://github.com/SpaceXpanse/SpeXEngine/blob/master/newIDE/README-themes.md",onClick:function(){return F.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/blob/master/newIDE/README-themes.md")}})]})})}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Layouts"})}),(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset Scene Editor layout"}),onClick:function(){return R("scene-editor",null)},disabled:!O("scene-editor")}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset Scene Editor (small window) layout"}),onClick:function(){return R("scene-editor-small",null)},disabled:!O("scene-editor-small")}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset Debugger layout"}),onClick:function(){return R("debugger",null)},disabled:!O("debugger")}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset Resource Editor layout"}),onClick:function(){return R("resources-editor",null)},disabled:!O("resources-editor")}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset Extension Editor layout"}),onClick:function(){return R("events-functions-extension-editor",null)},disabled:!O("events-functions-extension-editor")})]}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Dialogs"})}),(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Dialog backdrop click behavior"}),value:x.backdropClickBehavior,onChange:function(e,t,n){return ee(n)},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"cancel",label:{id:"Cancel changes"}}),(0,f.jsx)(U.Z,{value:"apply",label:{id:"Apply changes"}}),(0,f.jsx)(U.Z,{value:"nothing",label:{id:"Do nothing"}})]}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Updates"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return y(t)},toggled:x.autoDownloadUpdates,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Auto download and install updates (recommended)"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return S(t)},toggled:x.autoDisplayChangelog,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Display What's New when a new version is launched (recommended)"})}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Events Sheet"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return P(t)},toggled:x.eventsSheetShowObjectThumbnails,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Display object thumbnails in Events Sheets"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return M(t)},toggled:x.eventsSheetUseAssignmentOperators,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Display assignment operators in Events Sheets"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return D(t)},toggled:x.useUndefinedVariablesInAutocompletion,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Suggest names of variables used in events but not declared in the list of variables"})}),(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Escape key behavior when editing an parameter inline"}),value:x.eventsSheetCancelInlineParameter,onChange:function(e,t,n){ne(n)},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"cancel",label:{id:"Cancel changes"}}),(0,f.jsx)(U.Z,{value:"apply",label:{id:"Apply changes"}})]}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Embedded help and tutorials"})}),(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset hidden embedded explanations"}),onClick:function(){return Z()},disabled:!Object.keys(x.hiddenAlertMessages).length})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset hidden embedded tutorials"}),onClick:function(){return k()},disabled:!Object.keys(x.hiddenTutorialHints).length})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Reset hidden announcements"}),onClick:function(){return w()},disabled:!Object.keys(x.hiddenAnnouncements).length})})]}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Advanced"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return I(t)},toggled:x.autosaveOnPreview,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Auto-save project on Preview"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return z(t)},toggled:x.autoOpenMostRecentProject,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Automatically re-open the project edited during last session"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return re(t)},toggled:x.showCommunityExtensions,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Show community (non reviewed) extensions in the list of extensions"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return ie(t)},toggled:x.showEventBasedObjectsEditor,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Show custom objects in the extension editor (experimental)"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return ce(t)},toggled:x.allowUsageOfUnicodeIdentifierNames,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Allow unicode characters (non English languages and emojis) in object, behavior and other names (experimental)"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return ae(t)},toggled:x.use3DEditor,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Show objects in 3D in the scene editor"})}),ue.current!==x.use3DEditor&&(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"For the 3D change to take effect, close and reopen all currently opened scenes."})}),Te&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(H.Z,{onToggle:function(e,t){return Q(t)},toggled:x.isMenuBarHiddenInPreview,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Hide the menu bar in the preview window"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return te(t)},toggled:x.isAlwaysOnTopInPreview,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Always display the preview window on top of the editor"})}),(0,f.jsx)(H.Z,{onToggle:function(e,t){return le(t)},toggled:x.useShortcutToClosePreviewWindow,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:'Enable "Close project" shortcut ( {0} ) to close preview window',values:{0:(0,ke.Q)((0,$.YK)(x.userShortcutMap.CLOSE_PROJECT||oe.Z.CLOSE_PROJECT))}})})]})}),F.ZP.isDev()&&(0,f.jsx)(H.Z,{onToggle:function(e,t){return A(t)},toggled:x.useGDJSDevelopmentWatcher,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Watch changes in game engine (GDJS) sources and auto import them (dev only)"})})]}),"shortcuts"===s&&(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(ge,{i18n:t,userShortcutMap:x.userShortcutMap,onEdit:q,onReset:Y})})}),Te&&"folders"===s&&(0,f.jsx)(C.ak,{noMargin:!0,children:(0,f.jsx)(N.Z,{fullWidth:!0,value:x.newProjectsDefaultFolder,onChange:se,type:"default-workspace"})})]})},Se=n(81666),Pe=n(65512),Ie=n(54168),De=n(3781),Ae=n(16792),Le=n(39631),Me=n(87622),Fe=n(61804),Oe=n(44634),Re=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 6.66663C8.13902 6.66663 8.27177 6.72452 8.36638 6.8264L10.533 9.15973C10.7209 9.36209 10.7092 9.67845 10.5069 9.86636C10.3045 10.0543 9.98815 10.0425 9.80025 9.84018L7.99998 7.90143L6.19971 9.84018C6.01181 10.0425 5.69544 10.0543 5.49309 9.86636C5.29073 9.67845 5.27902 9.36209 5.46692 9.15973L7.63358 6.8264C7.72819 6.72452 7.86095 6.66663 7.99998 6.66663Z",fill:"currentColor"})}))})),Be=n(25638),_e=n(72662),Ne=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.87165 2.83215C8.05638 3.0374 8.03974 3.35355 7.83449 3.53828L6.58076 4.66663L7.83449 5.79498C8.03974 5.97971 8.05638 6.29586 7.87165 6.50111C7.68692 6.70637 7.37078 6.72301 7.16552 6.53828L5.49886 5.03828C5.3935 4.94346 5.33334 4.80837 5.33334 4.66663C5.33334 4.52489 5.3935 4.3898 5.49886 4.29498L7.16552 2.79498C7.37078 2.61025 7.68692 2.62689 7.87165 2.83215Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00001 4.66663C6.00001 4.39049 6.22386 4.16663 6.50001 4.16663H8.83334C11.3186 4.16663 13.3333 6.18135 13.3333 8.66663V8.8333C13.3333 9.10944 13.1095 9.3333 12.8333 9.3333C12.5572 9.3333 12.3333 9.10944 12.3333 8.8333V8.66663C12.3333 6.73363 10.7663 5.16663 8.83334 5.16663H6.50001C6.22386 5.16663 6.00001 4.94277 6.00001 4.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.12836 9.49881C8.31309 9.29356 8.62923 9.27692 8.83449 9.46165L10.5012 10.9616C10.6065 11.0565 10.6667 11.1916 10.6667 11.3333C10.6667 11.475 10.6065 11.6101 10.5012 11.7049L8.83449 13.2049C8.62923 13.3897 8.31309 13.373 8.12836 13.1678C7.94363 12.9625 7.96027 12.6464 8.16552 12.4616L9.41925 11.3333L8.16552 10.2049C7.96027 10.0202 7.94363 9.70407 8.12836 9.49881Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16667 6.66663C3.44281 6.66663 3.66667 6.89049 3.66667 7.16663V7.3333C3.66667 9.26629 5.23367 10.8333 7.16667 10.8333H9.50001C9.77615 10.8333 10 11.0572 10 11.3333C10 11.6094 9.77615 11.8333 9.50001 11.8333H7.16667C4.68139 11.8333 2.66667 9.81857 2.66667 7.3333V7.16663C2.66667 6.89049 2.89053 6.66663 3.16667 6.66663Z",fill:"currentColor"})]}))})),Ue=n(1491),He=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 8.16663C3.33331 7.89048 3.55717 7.66663 3.83331 7.66663H12.1666C12.4428 7.66663 12.6666 7.89048 12.6666 8.16663C12.6666 8.44277 12.4428 8.66663 12.1666 8.66663H3.83331C3.55717 8.66663 3.33331 8.44277 3.33331 8.16663Z",fill:"currentColor"})}))})),Ve=!0,We={listItemText:{margin:"1px 0",wordBreak:"break-word"},listWithGap:{display:"flex",alignItems:"flex-start",gap:10,flexDirection:"column"},noLeftPaddingListItem:{paddingLeft:0}},ze=u.forwardRef((function(e,t){var n=u.useState(!!e.initiallyOpen),r=(0,a.Z)(n,2),o=r[0],s=r[1],l=u.useRef(null),c=u.useCallback((function(){l.current&&l.current.open()}),[l]),d=(0,Le.i)(c),p=function(){return e.displayReloadButton?(0,f.jsx)(se.Z,{children:(0,f.jsx)(De.ZP,{title:e.reloadButtonTooltip,children:(0,f.jsx)(Pe.Z,{size:"small",edge:"end","aria-label":"reload",onClick:e.onReload,children:(0,f.jsx)(Ne,{})})})}):e.buildMenuTemplate?e.displayMenuButton?(0,f.jsx)(se.Z,{children:(0,f.jsx)(Ie.Z,{ref:l,element:(0,f.jsx)(Pe.Z,{size:"small",edge:"end","aria-label":"menu",children:(0,f.jsx)(Fe.Z,{style:{color:e.rightIconColor}})}),buildMenuTemplate:e.buildMenuTemplate})}):(0,f.jsx)(Ie.Z,{ref:l,element:(0,f.jsx)("div",{}),buildMenuTemplate:e.buildMenuTemplate}):e.displayLinkButton?(0,f.jsx)(se.Z,{children:(0,f.jsx)(Pe.Z,{size:"small",edge:"end","aria-label":"open link",onClick:e.onOpenLink,children:(0,f.jsx)(Oe.Z,{style:{color:e.rightIconColor}})})}):e.displayRemoveButton?(0,f.jsx)(se.Z,{children:(0,f.jsx)(Pe.Z,{size:"small",edge:"end","aria-label":"remove",onClick:e.onRemove,children:(0,f.jsx)(He,{style:{color:e.rightIconColor}})})}):null},h=e.noPadding?We.noLeftPaddingListItem:void 0,g=e.renderNestedItems;if(g){var m=void 0===e.open?o:e.open,x=function(){s(!m),e.onClick&&e.onClick()};return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(ie.Z,(0,i.Z)((0,i.Z)({button:!e.disableButtonBehaviorForParentItem,dense:Ve,disableRipple:!0,onClick:x,disabled:e.disabled,style:(0,i.Z)((0,i.Z)({},h),e.style),ref:t,id:e.id},(0,Ae.Y)(e.data)),{},{children:[e.leftIcon&&(0,f.jsx)(Se.Z,{children:e.leftIcon}),(0,f.jsx)(ae.Z,{style:We.listItemText,primary:e.primaryText,secondary:e.secondaryText,className:e.disableAutoTranslate?"notranslate":""}),e.autoGenerateNestedIndicator?m?(0,f.jsx)(se.Z,{children:(0,f.jsx)(Pe.Z,{size:"small",edge:"end","aria-label":"collapse",onClick:x,children:(0,f.jsx)(Re,{})})}):(0,f.jsx)(se.Z,{children:(0,f.jsx)(Pe.Z,{size:"small",edge:"end","aria-label":"expand",onClick:x,children:(0,f.jsx)(Be.Z,{})})}):null,p()]})),(0,f.jsx)(Me.Z,{in:m,timeout:"auto",unmountOnExit:!0,children:(0,f.jsx)(Q.Z,{component:"div",disablePadding:!0,style:(0,i.Z)({paddingLeft:16},e.nestedListStyle),dense:Ve,children:g()})})]})}return(0,f.jsxs)(ie.Z,(0,i.Z)((0,i.Z)((0,i.Z)({button:!0,dense:Ve,disableRipple:!0,ContainerComponent:"div",onClick:e.onClick,onDoubleClick:e.onDoubleClick,disabled:e.disabled,selected:e.selected,style:(0,i.Z)((0,i.Z)({},h),e.style),onContextMenu:e.buildMenuTemplate?c:void 0},d),{},{alignItems:2===e.secondaryTextLines?"flex-start":void 0,ref:t,id:e.id},(0,Ae.Y)(e.data)),{},{children:[e.leftIcon&&(0,f.jsx)(Se.Z,{style:{marginTop:0},children:e.leftIcon}),(0,f.jsx)(ae.Z,{style:We.listItemText,primary:e.primaryText,secondary:e.secondaryText,className:e.disableAutoTranslate?"notranslate":""}),p(),e.displayAddIcon&&(0,f.jsx)(Ue.Z,{style:{color:e.rightIconColor}}),e.displaySearchIcon&&(0,f.jsx)(_e.Z,{style:{color:e.rightIconColor}})]}))})),Ge=function(e){var t=(0,i.Z)({},e.style);return e.useGap&&(t=(0,i.Z)((0,i.Z)({},t),We.listWithGap)),(0,f.jsx)(Q.Z,{style:t,dense:Ve,children:e.children})},Ye=function(e){return"not-installed"===e?(0,f.jsx)(c.Trans,{id:"Not installed as an app. No updates available."}):"installed"===e?(0,f.jsx)(c.Trans,{id:"Installed as an app. No updates available."}):"update-installing"===e?(0,f.jsx)(c.Trans,{id:"An update is installing."}):"update-ready"===e?(0,f.jsx)(c.Trans,{id:"An update is ready to be installed. Close ALL SpeXEngine apps or tabs in your browser, then open it again."}):(0,f.jsx)(c.Trans,{id:"Unknown status."})},qe=n(14446),Xe=n.n(qe),Je=n(45911),Ke=n(86578),Qe=n(78081),$e=n(32832),et=function(e){var t=e.releases,n=e.error,r=e.currentReleaseName,o=function(){return F.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/releases")};if(n)return(0,f.jsxs)(L.sg,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:"Please double check online the changes to make sure that you are aware of anything new in this version that would require you to adapt your project."})})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Unable to load the information about the latest SpeXEngine releases. Verify your internet connection or retry later."})})}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"See the releases notes online"}),onClick:o})})]});if(!t)return(0,f.jsx)(Qe.Z,{});var i=function(e,t){return e.find((function(e){return e.name===t}))}(t,r),a=!!i&&-1!==(i.description||"").toLowerCase().indexOf("breaking change");return(0,f.jsxs)(L.sg,{noMargin:!0,children:[a&&(0,f.jsx)(we.Z,{kind:"warning",children:"This version of SpeXEngine has a breaking change. Please make sure to read the changes below to understand if any change or adaptation must be made to your project."}),t.map((function(e){return e.name?(0,f.jsx)($e.r,{source:"# Version "+e.name+"\n---\n"+(e.description||"Changes and new features description will be available soon."),isStandaloneText:!0},e.name):null})),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"See all the release notes"}),onClick:o})})]})},tt=n(52578),nt=function(e){var t=e.onUpdated,n=u.useState(null),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=u.useState(null),l=(0,a.Z)(s,2),c=l[0],d=l[1];return u.useEffect((function(){Xe().get("".concat(Je.bw.baseUrl,"/release"),{params:{last:4}}).then((function(e){return e.data})).then((function(e){d(null),i(e),t&&t()})).catch((function(e){d(e),t&&t()}))}),[t]),(0,f.jsx)(et,{releases:o,error:c,currentReleaseName:(0,tt.r1)()})},rt=q()("electron"),ot={logo:{width:"100%",aspectRatio:"16 / 5",objectFit:"cover"}},it=[{name:"Cl\xe9ment Pasteau",description:"Core development team",link:"https://github.com/ClementPasteau"},{name:"AlexandreSi",description:"Core development team",link:"https://github.com/AlexandreSi"},{name:"Victor Levasseur",description:"Numerous code contributions to SpeXEngine and community moderation"},{name:"Lizard-13",description:"Numerous code contributions to SpeXEngine and community moderation"},{name:"Christina 'Castpixel' Antoinette Neofotistou",description:"Art and assets for the 8-bit Space Shooter example.",link:"https://www.patreon.com/castpixel"},{name:"ale26reg",description:"Contributions to SpeXEngine"},{name:"dos1",description:"Contributions to SpeXEngine"},{name:"Aur\xe9lien Vivet",description:"Numerous code contributions to SpeXEngine and community management",link:"https://www.witly.fr"},{name:"Todor Imreorov",description:"Numerous code contributions to SpeXEngine"},{name:"brylie",description:"Contributions to SpeXEngine"},{name:"Nnarol",description:"Contributions to SpeXEngine"},{name:"wild-master",description:"Contributions to SpeXEngine"},{name:"RandomShaper",description:"Contributions to SpeXEngine"},{name:"RyanNerd",description:"Contributions to SpeXEngine"},{name:"greater",description:"Contributions to SpeXEngine"},{name:"triptych",description:"Contributions to SpeXEngine"},{name:"Wend1go",description:"Contributions to SpeXEngine, Tutorials, Examples"},{name:"mattiascibien",description:"Contributions to SpeXEngine"},{name:"araujo921",description:"Contributions to SpeXEngine"},{name:"ronnystandtke",description:"Contributions to SpeXEngine"},{name:"Thomas Flecy",description:"Contributions to SpeXEngine (original sound object extension)"},{name:"Arthur Pacaud (arthuro555)",description:"Numerous code contributions to SpeXEngine and community moderation",link:"https://forum.engine.spacexpanse.org/u/arthuro555/summary"},{name:"The Gem Dev",description:"Code contributions to SpeXEngine and tutorials on Youtube",link:"https://www.youtube.com/channel/UCsZ4Ue8c94YLJDbGRafCI5Q"},{name:"D8H",description:"Numerous code contributions to SpeXEngine",link:"https://github.com/D8H"},{name:"Harsimran Singh Virk",description:"Numerous code contributions to SpeXEngine",link:"https://github.com/HarsimranVirk"},{name:"Nilay Majorwar",description:"Numerous code contributions to SpeXEngine",link:"https://github.com/nilaymaj"},{name:"ddabrahim",description:"Examples for SpeXEngine",link:"https://gametemplates.itch.io/"},{name:"Gametemplates",description:"Examples bundled with SpeXEngine",link:"https://gametemplates.itch.io/"},{name:"Mats",description:"Tutorials, Examples"},{name:"erdo",description:"Tutorials, Examples"},{name:"Jubileuksen3",description:"Tutorials, Examples"},{name:"LucaTexas",description:"Tutorials, Examples"},{name:"Kink",description:"Forum moderator, tutorials, Examples"},{name:"RicoTrooper",description:"Tutorials"},{name:"kalel",description:"Tutorials"},{name:"mtarzaim",description:"Tutorials"},{name:"Darkhog",description:"Examples"},{name:"Ricardo Graca",description:"Tutorials, Examples"},{name:"Diego Schiavon",description:"Indiegogo Ubuntu contributor"},{name:"conceptgame",description:"Indiegogo super contributor"},{name:"Jose David Cuartas Correa",description:"Author of Digitopolis (a book on how to make games with SpeXEngine 4)"},{name:"Fran\xe7ois Dumortier",description:"SpeXEngine logo design",link:"http://www.fdumortier.com"},{name:"Constantine Shvetsov",description:"Design of all the awesome icons"},{name:"MillionthVector",description:"Assets of various examples"},{name:"Tristan Rhodes (Victris Games)",description:"High quality extensions for SpeXEngine",link:"https://www.youtube.com/channel/UClbq1M-D83t_bYhfa1mfyEQ"},{name:"Entropy",description:"High quality extensions and art packs for SpeXEngine",link:"https://github.com/Entr0py404"},{name:"FlokiTV",description:"High quality extensions for SpeXEngine",link:"https://github.com/FlokiTV"},{name:"Silver-Streak",description:"Examples, bug reports, testing of new features, providing community support to users, community moderation",link:"https://github.com/Silver-Streak"},{name:"Jurfix",description:"Discord moderation",link:"https://github.com/Jurfix"},{name:"Wishforge Games",description:"Making high quality tutorials",link:"https://www.wishforge.games/"},{name:"Sleeper Games",description:"Making the game feel starter",link:"https://twitter.com/Sleeper_Games"},{name:"VegeTato",description:"Extensions for SpeXEngine",link:"https://twitter.com/VegeTato_"},{name:"Leo Red",description:"Reviewing examples submissions",link:"https://github.com/Midhil457"},{name:"add_",description:"Extensions for SpeXEngine",link:"https://github.com/add00"},{name:"HelperWesley",description:"Examples and youtube content that is relevant to SpeXEngine",link:"https://www.youtube.com/channel/UC8RsU74-hU1pfNKHNMfiFfw"},{name:"UlisesFreitas",description:"Numerous examples and making external services that integrate with SpeXEngine games",link:"https://ulisesfreitas.itch.io/"},{name:"IttaloXD",description:"The SpeXEngine embassador in Brazil",link:"https://twitter.com/ittaloxd"},{name:"PANDAKO",description:"Translations in Japanese, extensions and blog",link:"https://gdevelop-jp.blogspot.com"}];function at(e){var t,n=e.onClose,r=e.updateStatus,i=u.useCallback((function(){F.ZP.openExternalURL("https://engine.spacexpanse.org/page/contribute/")}),[]),s=u.useCallback((function(e){e&&F.ZP.openExternalURL(e)}),[]),d=u.useState("about"),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useContext(X.ZP).checkUpdates,x="checking-for-update"===(t=r.status)?"Checking for update...":"update-available"===t?"A new update is available!":"update-not-available"===t?"No update available. You're using the latest version!":"error"===t?"Error while checking update":"download-progress"===t?"A new update is being downloaded...":"update-downloaded"===t?"A new update will be installed after you quit and relaunch SpeXEngine":"",v=function(e){return"update-available"===e?"Update SpeXEngine to latest version":"Check again for new updates"}(r.status),b=function(){var e=u.useState("unknown"),t=(0,a.Z)(e,2),n=t[0],r=t[1];return u.useEffect((function(){(0,o.Z)(l().mark((function e(){var t,n,o,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.serviceWorker){e.next=8;break}return t=navigator,n=t.serviceWorker,o=!!n.controller,r(o?"installed":"not-installed"),e.next=6,n.getRegistration();case 6:(i=e.sent)&&(a=i.installing)&&("installed"===a.state?r("update-ready"):r("update-installing"));case 8:case"end":return e.stop()}}),e)})))()}),[]),n}();return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"About SpeXEngine"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"SpeXEngine Website"}),primary:!1,onClick:function(){return F.ZP.openExternalURL("https://engine.spacexpanse.org")}},"website"),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],secondaryActions:"changelog"===h?[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"See all release notes"}),primary:!1,onClick:function(){return F.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/releases")}},"see-all")]:void 0,onRequestClose:n,open:!0,maxWidth:"sm",fixedContent:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)("img",{src:"res/GD-logo.png",alt:"SpeXEngine logo",style:ot.logo}),(0,f.jsx)(K.m,{value:h,onChange:g,options:[{value:"about",label:(0,f.jsx)(c.Trans,{id:"About SpeXEngine"})},{value:"changelog",label:(0,f.jsx)(c.Trans,{id:"What's new?"})},{value:"contributors",label:(0,f.jsx)(c.Trans,{id:"Contributors"})}]})]}),children:["about"===h&&(0,f.jsx)(u.Fragment,{children:(0,f.jsx)(L.x1,{children:(0,f.jsxs)(C.ak,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"SpeXEngine is a full-featured, open-source game engine. Build and publish games for any mobile, desktop or web game store. It's super fast, easy to learn and powered by a community making it better every day."})}),(0,f.jsxs)(J.Z,{allowSelection:!0,children:[(0,f.jsx)(c.Trans,{id:"This version of SpeXEngine is:"})," ",(0,tt.r1)()," ","(editor full version: ",(0,tt.Us)(),", core version:"," ",(0,tt.Hf)(),")"]}),(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"Updates"})}),rt&&x?(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(J.Z,{children:x}),(0,f.jsx)(_.Z,{label:v,onClick:function(){return m(function(e){return"update-available"===e}(r.status))}})]}):(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"No information about available updates."})}),!rt&&(0,f.jsx)(J.Z,{children:Ye(b)})]})})}),"changelog"===h&&(0,f.jsx)(L.sg,{children:(0,f.jsx)(nt,{})}),"contributors"===h&&(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(L.sg,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:'SpeXEngine was created by Florian "4ian" Rival.'})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Contributors, in no particular order:"})})]}),(0,f.jsx)(Ge,{children:it.map((function(e){return(0,f.jsx)(ze,{primaryText:e.name,secondaryText:e.description,secondaryTextLines:e.description.length<30?1:2,displayLinkButton:!!e.link,onOpenLink:function(){return s(e.link||"")}},e.name)}))}),(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Thanks to all users of SpeXEngine! There must be missing tons of people, please send your name if you've contributed and you're not listed."})}),(0,f.jsx)(L.x1,{alignItems:"center",justifyContent:"center",children:(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Contribute to SpeXEngine"}),onClick:i})})]})]})]})}var st=n(15671),lt=n(43144),ct=n(97326),ut=n(60136),dt=n(29388),pt=n(64903),ht=function(e){return(0,f.jsx)(L.sg,{expand:!0,noMargin:e.noMargin,children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(E.Z,{primary:!0,onClick:e.onClick,label:e.primaryText,id:e.id,icon:"search"===e.kind?(0,f.jsx)(_e.Z,{}):(0,f.jsx)(Ue.Z,{}),fullWidth:!0})})})},ft=n(65056),gt=n.g.gd,mt=function(e){var t=e.serializableObject,n=e.useProjectToUnserialize,r=e.onCancel,i=u.useRef(null),a=u.useRef(0),s=(0,ft.Z)().showConfirmation,c=u.useContext(X.ZP).values.backdropClickBehavior;u.useEffect((function(){return i.current&&(i.current.delete(),i.current=null),i.current=new gt.SerializerElement,t.serializeTo(i.current),function(){i.current&&(i.current.delete(),i.current=null)}}),[t]);var d=u.useCallback((function(){a.current++}),[]),p=u.useCallback((function(){return a.current>0}),[]);return{onCancelChanges:u.useCallback((0,o.Z)(l().mark((function e(){var o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.current){e.next=3;break}return e.abrupt("return");case 3:if(u=!1,!(!("cancel"===c)&&a.current>=1)){e.next=13;break}return e.next=9,s({title:{id:"Cancel your changes?"},message:{id:"All your changes will be lost. Are you sure you want to cancel?"},confirmButtonLabel:{id:"Cancel"},dismissButtonLabel:{id:"Continue editing"}});case 9:e.sent&&(u=!0),e.next=14;break;case 13:u=!0;case 14:if(u){e.next=16;break}return e.abrupt("return");case 16:n?t.unserializeFrom(n,o):t.unserializeFrom(o),r();case 18:case"end":return e.stop()}}),e)}))),[t,n,r,s,c]),notifyOfChange:d,hasUnsavedChanges:p}};function xt(e){var t=e.launchProjectDataOnlyPreview,n=e.hasPreviewsRunning,r="small"===(0,T.L)(),o=n?(0,f.jsx)(Z,{}):(0,f.jsx)(y,{}),i=n?(0,f.jsx)(c.Trans,{id:"Apply changes to preview"}):(0,f.jsx)(c.Trans,{id:"Run a preview"});return r?(0,f.jsx)(A.Z,{onClick:t,size:"small",children:o}):(0,f.jsx)(_.Z,{leftIcon:o,label:i,onClick:t})}var vt,bt,jt,Ct=n(3429),yt=n(45987),Zt=n(50301),kt=n(40041),wt=n(15845),Tt=n(23125),Et=n(76737),St=n(17358),Pt=n(37571),It=n(84900),Dt=n(42986),At=n(62572),Lt=n(38589),Mt=n(65752),Ft=n(68196),Ot=n(2632),Rt=n(86268),Bt=n(72402),_t=n(38501),Nt=n(18455),Ut=n(79431),Ht=q()("electron"),Vt=Ht?Ht.clipboard:null,Wt="",zt=function(e){return"GDEVELOP_"+e+"_CLIPBOARD_KIND-jsBdHbLy912y8Rc"},Gt=function(){function e(){(0,st.Z)(this,e)}return(0,lt.Z)(e,null,[{key:"extractNumberProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"number"!==typeof n?null:n}},{key:"extractStringProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"string"!==typeof n?null:n}},{key:"extractBooleanProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"boolean"!==typeof n?null:n}},{key:"extractObjectProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return this.extractObject(n)}},{key:"extractArrayProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return this.extractArray(n)}},{key:"extractObject",value:function(e){return null===e||void 0===e||"object"!==typeof e||Array.isArray(e)?null:e}},{key:"extractArray",value:function(e){return null!==e&&void 0!==e&&"object"===typeof e&&Array.isArray(e)?e:null}}]),e}(),Yt=function(){function e(){(0,st.Z)(this,e)}return(0,lt.Z)(e,null,[{key:"set",value:function(e,t){var n=JSON.stringify({"000kind":zt(e),content:t});Vt?Vt.writeText(n):Wt=n}},{key:"has",value:function(e){return 12===(Vt?Vt.readText():Wt).indexOf(zt(e))}},{key:"get",value:function(t){if(!e.has(t))return null;var n="";n=Vt?Vt.readText():Wt;try{return JSON.parse(n).content}catch(r){return console.warn("The clipboard content is not valid JSON"),null}}}]),e}(),qt=n(41006),Xt=function(e,t){var n=t.historyMaxSize;return{previousActions:[],currentValue:(0,qt.XH)(e),futureActions:[],maxSize:n}},Jt=function(e){return!!e.futureActions.length},Kt=function(e){return!!e.previousActions.length},Qt=function(e,t,n,r){var o=(0,qt.XH)(t),a=[].concat((0,j.Z)(e.previousActions),[{type:n,valueBeforeChange:e.currentValue,changeContext:r}]);return a.length>e.maxSize&&a.splice(0,a.length-e.maxSize),(0,i.Z)((0,i.Z)({},e),{},{currentValue:o,previousActions:a,futureActions:[]})},$t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e.previousActions.length)return e;var r=e.previousActions[e.previousActions.length-1],o=r.valueBeforeChange;(0,qt.qx)(t,o,"unserializeFrom",n);var a=e.previousActions.slice(0,-1),s=[].concat((0,j.Z)(e.futureActions),[{type:r.type,changeContext:r.changeContext,valueAfterChange:e.currentValue}]);return(0,i.Z)((0,i.Z)({},e),{},{previousActions:a,futureActions:s,currentValue:o})},en=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e.futureActions.length)return e;var r=e.futureActions[e.futureActions.length-1],o=r.valueAfterChange;(0,qt.qx)(t,o,"unserializeFrom",n);var a=[].concat((0,j.Z)(e.previousActions),[{type:r.type,changeContext:r.changeContext,valueBeforeChange:e.currentValue}]),s=e.futureActions.slice(0,-1);return(0,i.Z)((0,i.Z)({},e),{},{previousActions:a,futureActions:s,currentValue:o})},tn=n.g.gd,nn=function(e,t,n,r){var o=(0,Ut.Z)(t,(function(t){return e.has(t)}),n?"CopyOf":void 0),i=new tn.Variable;n?(0,qt.qx)(i,n):i.setString("");var a=e.insert(o,i,r||e.count());return i.delete(),{name:o,variable:a}},rn=function(e){return(0,Nt.mapFor)(0,e.count(),(function(t){var n=e.getAt(t);return on(n)&&n.getChildrenCount()>0})).some(Boolean)},on=function(e){return!tn.Variable.isPrimitive(e.getType())},an=n(37762),sn=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},ln=n.g.gd,cn="$!",un="$.$",dn=function(e){return e[e.length-1]?e[e.length-1].variable:null},pn=function(e){return e[e.length-1]?e[e.length-1].nodeId:null},hn=function(e,t){return t.map((function(e){return e.variable})).includes(e)},fn=function(e,t){for(var n,r=e.split(un),o=null,i=null,a=null,s=[],l=-1;l<r.length-1;){if(a=r[l+=1],0===l&&a.startsWith(cn)&&(a=(n=a).slice(2,n.length)),o)if(o.getType()===ln.Variable.Array){var c=parseInt(a,10);if(c>=o.getChildrenCount())return{variable:null,lineage:s,depth:l,name:null};i=o.getAtIndex(c)}else{if(!o.hasChild(a))return{variable:null,lineage:s,depth:l,name:null};i=o.getChild(a)}else i=t.get(a);l<r.length-1&&s.push({nodeId:r.slice(0,l+1).join(un),name:a,variable:i}),o=i}return{variable:i,name:a,depth:l,lineage:s}},gn=function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[],a=(0,an.Z)(t);try{var s=function(){var t=r.value,n=t.name,a=t.variable,s=o?"".concat(o).concat(un).concat(n):n;if(!a.isFolded()&&a.getChildrenCount()>0&&i.push(s),a.getType()===ln.Variable.Array){var l=(0,Nt.mapFor)(0,a.getChildrenCount(),(function(e){return{name:e.toString(),variable:a.getAtIndex(e)}}));i=[].concat((0,j.Z)(i),(0,j.Z)(e(l,i,s)))}else if(a.getType()===ln.Variable.Structure){var c=a.getAllChildrenNames().toJSArray().map((function(e,t){return{variable:a.getChild(e),name:e}}));i=[].concat((0,j.Z)(i),(0,j.Z)(e(c,i,s)))}};for(a.s();!(r=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}return i},mn=function(e,t,n){var r=(0,j.Z)(e),o=r.indexOf(t),i=r.map((function(e,n){return e.startsWith("".concat(t).concat(un))?n:null})),a=t.split(un),s=a[a.length-1];return[o].concat((0,j.Z)(i)).forEach((function(e){if(!(null===e||e<0)){var t=r[e].split(un);t[t.indexOf(s)]=n,r.splice(e,1,t.join(un))}})),r},xn=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=0;r<e.count();r+=1)n.push({name:"".concat(t?cn:"").concat(e.getNameAt(r)),variable:e.getAt(r)});return gn(n,[])},vn=function(e,t,n){t.forEach((function(t){var r=fn(t,e).variable;r&&r.setFolded(n)}))},bn=function(e,t){var n=t.lineage,r=dn(n),o=e.lineage,i=dn(o);if(i&&r){if(r.getType()===ln.Variable.Structure&&i.getType()===ln.Variable.Structure&&i!==r)return"FromStructureToAnotherStructure";if(r.getType()===ln.Variable.Structure&&i===r)return"InsideSameStructure";if(r.getType()===ln.Variable.Array&&i.getType()===ln.Variable.Array&&i!==r)return"FromArrayToAnotherArray";if(r.getType()===ln.Variable.Array&&i===r)return"InsideSameArray";if(r.getType()===ln.Variable.Array&&i.getType()===ln.Variable.Structure)return"FromStructureToArray";if(r.getType()===ln.Variable.Structure&&i.getType()===ln.Variable.Array)return"FromArrayToStructure"}return i||r?!i&&r&&r.getType()===ln.Variable.Structure?"TopLevelToStructure":!i&&r&&r.getType()===ln.Variable.Array?"TopLevelToArray":i&&!r&&i.getType()===ln.Variable.Structure?"StructureToTopLevel":i&&!r&&i.getType()===ln.Variable.Array?"ArrayToTopLevel":null:"InsideTopLevel"},jn=function e(t){var n,r,o=t.variable,i=t.variableName,a=t.nodeId,s=t.searchText,l=t.acc;switch(o.getType()){case ln.Variable.Boolean:return sn(i).includes(s)?[a]:[];case ln.Variable.String:return sn(i).includes(s)||sn(o.getString()).includes(s)?[a]:[];case ln.Variable.Number:return sn(i).includes(s)||o.getValue().toString().includes(s)?[a]:[];case ln.Variable.Array:return n=(0,j.Z)(l),sn(i).includes(s)&&n.push(a),r=(0,Nt.mapFor)(0,o.getChildrenCount(),(function(t){var r=o.getAtIndex(t);return e({variable:r,variableName:"",nodeId:"".concat(a).concat(un).concat(t),searchText:s,acc:n})})).flat(),[].concat((0,j.Z)(n),(0,j.Z)(r));case ln.Variable.Structure:return n=(0,j.Z)(l),sn(i).includes(s)&&n.push(a),r=o.getAllChildrenNames().toJSArray().map((function(t){var n=o.getChild(t);return Array.from(new Set(e({variable:n,variableName:t,nodeId:"".concat(a).concat(un).concat(t),searchText:s,acc:l})))})).flat(),[].concat((0,j.Z)(n),(0,j.Z)(r));default:return[]}},Cn=function(e,t,n){return(0,Nt.mapFor)(0,e.count(),(function(r){var o=e.getAt(r),i=e.getNameAt(r);return jn({variable:o,variableName:i,nodeId:n?"".concat(n).concat(i):i,searchText:t,acc:[]})})).flat()},yn=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 12 8",children:[(0,f.jsx)("path",{d:"M0.0850851 6.76784L2.39304 1.55591C2.55395 1.19651 2.84708 0.978882 3.24447 0.978882H3.3296C3.72674 0.978882 4.01061 1.19647 4.17135 1.55591L6.47939 6.76784C6.52669 6.8719 6.55513 6.96645 6.55513 7.06109C6.55513 7.44889 6.25241 7.76103 5.86457 7.76103C5.52407 7.76103 5.29701 7.56242 5.16463 7.25966L4.7201 6.21925H1.80671L1.34321 7.30704C1.22021 7.59078 0.974341 7.76103 0.671625 7.76103C0.293126 7.76103 0 7.45835 0 7.07998C0 6.97592 0.0377881 6.8719 0.0850851 6.76784ZM4.1809 4.93281L3.26332 2.74776L2.34583 4.93281H4.1809Z"}),(0,f.jsx)("path",{d:"M7.24512 6.24762V6.22868C7.24512 5.122 8.08699 4.6112 9.28827 4.6112C9.79911 4.6112 10.1681 4.69633 10.5275 4.81932V4.7342C10.5275 4.13823 10.1586 3.80723 9.43967 3.80723C9.0424 3.80723 8.72079 3.86396 8.44648 3.94913C8.36139 3.97749 8.30458 3.98691 8.23827 3.98691C7.90732 3.98691 7.64247 3.73154 7.64247 3.4005C7.64247 3.14508 7.80321 2.92753 8.03019 2.84236C8.48422 2.67211 8.97617 2.57751 9.64775 2.57751C10.4328 2.57751 11.0004 2.7856 11.3599 3.14504C11.7382 3.52337 11.9085 4.08151 11.9085 4.76256V7.07052C11.9085 7.4584 11.5963 7.76104 11.2085 7.76104C10.7923 7.76104 10.518 7.46783 10.518 7.16511V7.15564C10.168 7.54344 9.6855 7.79882 8.98564 7.79882C8.03019 7.79891 7.24512 7.25036 7.24512 6.24762ZM10.5463 5.91654V5.66116C10.3004 5.54767 9.97879 5.47197 9.62882 5.47197C9.01392 5.47197 8.63562 5.71792 8.63562 6.17192V6.19085C8.63562 6.57869 8.95723 6.80567 9.42069 6.80567C10.0923 6.80571 10.5463 6.43685 10.5463 5.91654Z"})]}))})),Zn=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 18 7",children:[(0,f.jsx)("path",{d:"M0.699536 1.81574C0.732104 1.93193 0.822074 2.02812 0.943348 2.07632C1.06462 2.12452 1.20367 2.1194 1.32026 2.06245L1.66832 1.89235V5.68893C1.66832 5.9038 1.86075 6.07801 2.09809 6.07801H2.94248C3.17982 6.07801 3.37225 5.9038 3.37225 5.68893V0.47563C3.37225 0.26076 3.17982 0.0865479 2.94248 0.0865479H2.29848C2.17914 0.0865479 2.06158 0.113205 1.95637 0.16423L0.738721 0.754181C0.56458 0.838594 0.476394 1.0196 0.524949 1.19294L0.699536 1.81574Z"}),(0,f.jsx)("path",{d:"M10.8866 5.68902V5.01903C10.8866 4.80416 10.6941 4.62994 10.4568 4.62994H9.05518C10.0388 3.74152 10.7474 2.93461 10.7474 1.92481C10.7474 0.997814 10.0548 0 8.53425 0C7.8269 0 7.14796 0.221131 6.62264 0.622734L6.5923 0.64589C6.4456 0.758105 6.3989 0.944837 6.47794 1.1033L6.76629 1.68127C6.82154 1.79207 6.93084 1.87305 7.06171 1.90031C7.19257 1.92757 7.32991 1.89782 7.43311 1.82007L7.4862 1.78009C7.6506 1.65609 7.98491 1.44815 8.37773 1.44815C8.83219 1.44815 9.01749 1.61139 9.01749 2.00701C9.01079 2.59898 8.43573 3.18913 7.05888 4.37543L6.44285 4.91698C6.35949 4.99022 6.3125 5.09092 6.3125 5.19607V5.68902C6.3125 5.90389 6.50493 6.0781 6.74228 6.0781H10.4568C10.6941 6.0781 10.8866 5.90389 10.8866 5.68902Z"}),(0,f.jsx)("path",{d:"M12.776 5.72618L12.8104 5.74657C13.135 5.9395 13.7841 6.16473 14.5449 6.16473C16.2926 6.16473 17.0887 5.14242 17.0887 4.19267C17.0887 3.62951 16.8073 3.13588 16.3383 2.81088C16.681 2.50406 16.8712 2.10448 16.8712 1.65717C16.8712 0.858943 16.214 0 14.7711 0C13.9993 0 13.3383 0.257885 13.0067 0.478679L12.9752 0.499614C12.8219 0.601597 12.761 0.782675 12.8253 0.944703L13.0621 1.54125C13.1077 1.65596 13.21 1.74468 13.3385 1.78103C13.4669 1.81731 13.6069 1.79705 13.7164 1.72617L13.7729 1.68961C13.9708 1.56151 14.3105 1.43227 14.6231 1.43227C15.1324 1.43227 15.1324 1.66706 15.1324 1.76736C15.1324 2.11794 14.5556 2.19683 14.3535 2.19683H13.8748C13.6374 2.19683 13.445 2.37105 13.445 2.58592V3.20071C13.445 3.41558 13.6374 3.58979 13.8748 3.58979H14.3535C14.5815 3.58979 15.3258 3.6324 15.3325 4.18479C15.3338 4.25062 15.3217 4.41763 15.1809 4.54748C15.0154 4.70016 14.7389 4.7322 14.5362 4.7322C14.1296 4.7322 13.7199 4.58033 13.5438 4.47822L13.4879 4.44584C13.3774 4.38182 13.2406 4.36701 13.1166 4.40565C12.9925 4.44429 12.8947 4.53207 12.8511 4.64408L12.6066 5.27126C12.5408 5.44022 12.6107 5.62789 12.776 5.72618Z"})]}))})),kn=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 17 7",children:[(0,f.jsx)("path",{fill:"none",d:"M9.5 3.5L11.8824 6L16 1",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{fill:"none",d:"M1 1L6 6M6 1L1 6",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]}))})),wn=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 10 12",children:[(0,f.jsx)("path",{d:"M3.67764 2.0539V0.930176H0.61294C0.450378 0.930176 0.294474 0.989372 0.179526 1.09474C0.0645775 1.20011 0 1.34302 0 1.49204V10.4818C0 10.6308 0.0645775 10.7737 0.179526 10.8791C0.294474 10.9845 0.450378 11.0437 0.61294 11.0437H3.67764V9.91996H1.22588V2.0539H3.67764Z"}),(0,f.jsx)("path",{d:"M5.5167 9.91998L5.5167 11.0437L8.5814 11.0437C8.74396 11.0437 8.89986 10.9845 9.01481 10.8791C9.12976 10.7738 9.19434 10.6309 9.19434 10.4818L9.19434 1.49206C9.19434 1.34305 9.12976 1.20013 9.01481 1.09476C8.89986 0.989394 8.74396 0.9302 8.5814 0.9302L5.5167 0.930199L5.5167 2.05392L7.96846 2.05392L7.96846 9.91998L5.5167 9.91998Z"})]}))})),Tn=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 12 12",children:[(0,f.jsx)("path",{d:"M9.40063 5.29672L9.40063 5.29673L10.34 6.23611L9.40065 7.17549C9.29799 7.27815 9.2403 7.41741 9.2403 7.56259V9.80103C9.2403 10.1849 8.92798 10.4972 8.54415 10.4972H7.6322C7.32986 10.4972 7.08477 10.7423 7.08477 11.0446C7.08477 11.347 7.32986 11.592 7.6322 11.592H8.54415C9.53177 11.592 10.3352 10.7886 10.3352 9.80103V7.78934L11.5013 6.62319C11.7151 6.40941 11.7151 6.0628 11.5013 5.84901L11.466 5.88436L11.5013 5.84901L10.3352 4.68287V2.67118C10.3352 1.68359 9.53177 0.880176 8.54415 0.880176H7.6322C7.32986 0.880176 7.08477 1.12527 7.08477 1.42761C7.08477 1.72995 7.32986 1.97504 7.6322 1.97504H8.54415C8.92798 1.97504 9.2403 2.28736 9.2403 2.67118V4.90962C9.2403 5.05481 9.29799 5.19406 9.40063 5.29672Z",strokeWidth:"0.1"}),(0,f.jsx)("path",{d:"M3.21104 7.17549L3.21103 7.17549L2.27163 6.23611L3.21101 5.29673C3.31367 5.19406 3.37136 5.05481 3.37136 4.90962V2.67118C3.37136 2.28736 3.68368 1.97504 4.06751 1.97504H4.97946C5.28181 1.97504 5.5269 1.72995 5.5269 1.42761C5.5269 1.12527 5.28181 0.880176 4.97946 0.880176H4.06751C3.07989 0.880176 2.2765 1.68359 2.2765 2.67118V4.68287L1.11035 5.84901C0.896552 6.0628 0.896552 6.40939 1.11035 6.62319L2.2765 7.78934V9.80103C2.2765 10.7886 3.07989 11.592 4.06751 11.592H4.97946C5.28181 11.592 5.5269 11.347 5.5269 11.0446C5.5269 10.7423 5.28181 10.4972 4.97946 10.4972H4.06751C3.68368 10.4972 3.37136 10.1849 3.37136 9.80103V7.56259C3.37136 7.41741 3.31368 7.27816 3.21104 7.17549Z",strokeWidth:"0.1"})]}))})),En=n.g.gd,Sn=function(e){var t=u.useContext(m.Z),n=function(){var e;return bt||(e={},(0,r.Z)(e,En.Variable.String,yn),(0,r.Z)(e,En.Variable.Number,Zn),(0,r.Z)(e,En.Variable.Boolean,kn),(0,r.Z)(e,En.Variable.Array,wn),(0,r.Z)(e,En.Variable.Structure,Tn),bt=e),bt}()[e.variableType];return(0,f.jsxs)(L.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(n,{fontSize:"small",htmlColor:e.isHighlighted?t.listItem.selectedTextColor:void 0}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(B.Z,{value:e.variableType,margin:"none",stopPropagationOnClick:!0,onChange:function(t){return e.onChange(function(){var e;return jt||(e={},(0,r.Z)(e,En.Variable.String,"string"),(0,r.Z)(e,En.Variable.Number,"number"),(0,r.Z)(e,En.Variable.Boolean,"boolean"),(0,r.Z)(e,En.Variable.Array,"array"),(0,r.Z)(e,En.Variable.Structure,"structure"),jt=e),jt}()[t.target.value])},inputStyle:e.isHighlighted?{color:t.listItem.selectedTextColor}:void 0,disabled:e.disabled,id:e.id,children:(vt||(vt=[(0,f.jsx)(U.Z,{label:{id:"String"},value:En.Variable.String},"string"),(0,f.jsx)(U.Z,{label:{id:"Number"},value:En.Variable.Number},"number"),(0,f.jsx)(U.Z,{label:{id:"Boolean"},value:En.Variable.Boolean},"boolean"),(0,f.jsx)(U.Z,{label:{id:"Array"},value:En.Variable.Array},"array"),(0,f.jsx)(U.Z,{label:{id:"Structure"},value:En.Variable.Structure},"structure")]),vt)})]})},Pn="Variables",In=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2047 4.23503C14.4891 3.9339 14.9638 3.92033 15.265 4.20474L19.765 8.45474C19.915 8.59642 20 8.79366 20 9C20 9.20635 19.915 9.40358 19.765 9.54526L15.265 13.7953C14.9638 14.0797 14.4891 14.0661 14.2047 13.765C13.9203 13.4638 13.9339 12.9892 14.235 12.7047L18.1577 9L14.235 5.29526C13.9339 5.01085 13.9203 4.53617 14.2047 4.23503Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 13C4 10.3767 6.12664 8.25 8.75 8.25H19.25C19.6642 8.25 20 8.58579 20 9C20 9.41422 19.6642 9.75 19.25 9.75H8.75C6.95508 9.75 5.5 11.2051 5.5 13V19.25C5.5 19.6642 5.16421 20 4.75 20C4.33579 20 4 19.6642 4 19.25V13Z",fill:"currentColor"})]}))})),Dn=n(53162),An=n(90264),Ln=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 5.83329C3.33331 4.82077 4.15412 3.99996 5.16665 3.99996H5.99998C6.27612 3.99996 6.49998 4.22382 6.49998 4.49996C6.49998 4.7761 6.27612 4.99996 5.99998 4.99996H5.16665C4.70641 4.99996 4.33331 5.37305 4.33331 5.83329V11.5C4.33331 11.9602 4.7064 12.3333 5.16665 12.3333H10.8333C11.2936 12.3333 11.6666 11.9602 11.6666 11.5V5.83329C11.6666 5.37305 11.2936 4.99996 10.8333 4.99996H9.99998C9.72384 4.99996 9.49998 4.7761 9.49998 4.49996C9.49998 4.22382 9.72384 3.99996 9.99998 3.99996H10.8333C11.8459 3.99996 12.6666 4.82078 12.6666 5.83329V11.5C12.6666 12.5125 11.8459 13.3333 10.8333 13.3333H5.16665C4.15413 13.3333 3.33331 12.5125 3.33331 11.5V5.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66665 3.66663C6.5746 3.66663 6.49998 3.74125 6.49998 3.83329V4.83329C6.49998 4.92534 6.5746 4.99996 6.66665 4.99996H9.33331C9.42536 4.99996 9.49998 4.92534 9.49998 4.83329V3.83329C9.49998 3.74124 9.42536 3.66663 9.33331 3.66663H6.66665ZM5.49998 3.83329C5.49998 3.18896 6.02232 2.66663 6.66665 2.66663H9.33331C9.97766 2.66663 10.5 3.18897 10.5 3.83329V4.83329C10.5 5.47762 9.97766 5.99996 9.33331 5.99996H6.66665C6.02232 5.99996 5.49998 5.47762 5.49998 4.83329V3.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99998 8.16663C5.99998 7.89048 6.22384 7.66663 6.49998 7.66663H9.49998C9.77612 7.66663 9.99998 7.89048 9.99998 8.16663C9.99998 8.44277 9.77612 8.66663 9.49998 8.66663H6.49998C6.22384 8.66663 5.99998 8.44277 5.99998 8.16663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99998 10.1666C5.99998 9.89048 6.22384 9.66663 6.49998 9.66663H9.49998C9.77612 9.66663 9.99998 9.89048 9.99998 10.1666C9.99998 10.4428 9.77612 10.6666 9.49998 10.6666H6.49998C6.22384 10.6666 5.99998 10.4428 5.99998 10.1666Z",fill:"currentColor"})]}))})),Mn=function(e){var t=[{key:"copy",Icon:An.Z,label:(0,f.jsx)(c.Trans,{id:"Copy"}),tooltip:{id:"Copy"},onClick:e.onCopy,disabled:!e.canCopy,display:!0},{key:"paste",Icon:Ln,label:(0,f.jsx)(c.Trans,{id:"Paste"}),tooltip:{id:"Paste"},onClick:e.onPaste,disabled:!e.canPaste,display:!0},{key:"delete",Icon:Dn.Z,label:(0,f.jsx)(c.Trans,{id:"Delete"}),tooltip:{id:"Delete"},onClick:e.onDelete,disabled:!e.canDelete,display:!0},{key:"undo",Icon:de,label:(0,f.jsx)(c.Trans,{id:"Undo"}),tooltip:{id:"Undo"},onClick:e.onUndo,disabled:!e.canUndo,display:!e.hideHistoryChangeButtons},{key:"redo",Icon:In,label:(0,f.jsx)(c.Trans,{id:"Redo"}),tooltip:{id:"Redo"},onClick:e.onRedo,disabled:!e.canRedo,display:!e.hideHistoryChangeButtons}].filter((function(e){return e.display}));return(0,f.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(L.x1,{noMargin:!0,children:t.map((function(t,n){var r=t.key,o=t.Icon,i=t.label,a=t.tooltip,s=t.onClick,l=t.disabled;return(0,f.jsxs)(u.Fragment,{children:[n>0?(0,f.jsx)(L.LZ,{}):null,e.isNarrow?(0,f.jsx)(Pe.Z,{tooltip:a,onClick:s,size:"small",disabled:l,children:(0,f.jsx)(o,{})},r):(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(o,{}),disabled:l,label:i,onClick:s},r)]},r)}))})}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:e.searchText,onRequestSearch:e.onChangeSearchText,onChange:e.onChangeSearchText,placeholder:{id:"Search variables"}})}),(0,f.jsx)(L.sg,{noMargin:!0,children:e.isNarrow?(0,f.jsx)(Pe.Z,{tooltip:{id:"Add variable"},onClick:e.onAdd,size:"small",children:(0,f.jsx)(Ue.Z,{})},"add-variable"):(0,f.jsx)(_.Z,{primary:!0,onClick:e.onAdd,label:(0,f.jsx)(c.Trans,{id:"Add variable"}),leftIcon:(0,f.jsx)(Ue.Z,{})},"add-variable")})]})},Fn=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{d:"M10.8134 2.64645C11.0087 2.45118 11.3253 2.45118 11.5205 2.64645L13.5205 4.64645C13.6143 4.74021 13.667 4.86739 13.667 5C13.667 5.13261 13.6143 5.25979 13.5205 5.35355L11.5205 7.35355C11.3253 7.54882 11.0087 7.54882 10.8134 7.35355C10.6182 7.15829 10.6182 6.84171 10.8134 6.64645L11.9599 5.5H5.16699C4.89085 5.5 4.66699 5.27614 4.66699 5C4.66699 4.72386 4.89085 4.5 5.16699 4.5H11.9599L10.8134 3.35355C10.6182 3.15829 10.6182 2.84171 10.8134 2.64645Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.02055 9.35355C7.21581 9.15829 7.21581 8.84171 7.02055 8.64645C6.82528 8.45118 6.5087 8.45118 6.31344 8.64645L4.31344 10.6464C4.21967 10.7402 4.16699 10.8674 4.16699 11C4.16699 11.1326 4.21967 11.2598 4.31344 11.3536L6.31344 13.3536C6.5087 13.5488 6.82528 13.5488 7.02055 13.3536C7.21581 13.1583 7.21581 12.8417 7.02055 12.6464L5.8741 11.5L12.667 11.5C12.9431 11.5 13.167 11.2761 13.167 11C13.167 10.7239 12.9431 10.5 12.667 10.5L5.8741 10.5L7.02055 9.35355Z",fill:"currentColor"})]}))})),On=function(e){var t=u.useState(null),n=(0,a.Z)(t,2),r=n[0],o=n[1];return u.useEffect((function(){if(r){var t=e.current[r.identifier];t&&(t.focus({caretPosition:r.caretPosition}),o(null))}}),[r,e]),o},Rn=["onComputeAllVariableNames"],Bn=n.g.gd,_n=(0,Lt.x)("variable-editor"),Nn=function(e){return e.stopPropagation()},Un=function(e){return e.preventDefault()},Hn={inlineIcon:{padding:0},handlePlaceholder:{width:24}},Vn=(0,Et.Z)((function(e){return{group:{marginLeft:7,paddingLeft:15},iconContainer:{alignSelf:"stretch",alignItems:"center"},root:{"&:focus:not(.Mui-selected)":{"& > .MuiTreeItem-content":{filter:"brightness(1.15)"},"& > .MuiTreeItem-content > .MuiTreeItem-label":{backgroundColor:"unset"}},"&:hover:not(:focus)":{"& > .MuiTreeItem-content:hover":{filter:"brightness(1.07)"}},"&.Mui-selected:hover":{"& > .MuiTreeItem-content:hover":{filter:"brightness(1.07)"}}},label:{padding:0,"&:hover":{backgroundColor:"unset"}},content:{marginTop:5}}}))((function(e){return(0,f.jsx)(wt.Z,(0,i.Z)((0,i.Z)({},e),{},{TransitionProps:{timeout:0}}))})),Wn=function(e){var t=e.onComputeAllVariableNames,n=(0,yt.Z)(e,Rn),o=u.useState(xn(n.variablesContainer).concat(n.inheritedVariablesContainer?xn(n.inheritedVariablesContainer,!0):[])),s=(0,a.Z)(o,2),l=s[0],d=s[1],p=u.useState(Xt(n.variablesContainer,{historyMaxSize:50})),h=(0,a.Z)(p,2),g=h[0],x=h[1],v=u.useState(""),b=(0,a.Z)(v,2),y=b[0],Z=b[1],k=u.useMemo((function(){return t?t():null}),[t]),w=u.useState([]),T=(0,a.Z)(w,2),E=T[0],S=T[1],P=u.useState([]),I=(0,a.Z)(P,2),D=I[0],M=I[1],F=u.useState(null),O=(0,a.Z)(F,2),R=O[0],B=O[1],_=u.useState({}),N=(0,a.Z)(_,2),U=N[0],H=N[1],V=u.useRef({}),W=u.useRef({}),z=On(V),G=On(W),Y=u.useContext(m.Z),q=u.useRef(null),X=(0,_t.Z)(),J=u.useCallback((function(){var e=[],t=Cn(n.variablesContainer,sn(y));n.inheritedVariablesContainer&&(e=Cn(n.inheritedVariablesContainer,sn(y),cn)),M([].concat((0,j.Z)(t),(0,j.Z)(e)))}),[n.inheritedVariablesContainer,n.variablesContainer,y]);u.useEffect((function(){y?J():M([])}),[y,J]);var K=!rn(n.variablesContainer)&&(!n.inheritedVariablesContainer||!rn(n.inheritedVariablesContainer)),Q=(0,St.Z)((function(){return{root:{"& > .MuiTreeItem-content":{backgroundColor:Y.list.itemsBackgroundColor},"&.Mui-selected > .MuiTreeItem-content":{marginTop:5,backgroundColor:Y.listItem.selectedBackgroundColor},"&.Mui-selected > .MuiTreeItem-content > .MuiTreeItem-label":{backgroundColor:"unset"},"&.isCollection > .MuiTreeItem-content > .MuiTreeItem-iconContainer":{backgroundColor:Y.listItem.selectedBackgroundColor},"& > .MuiTreeItem-content > .MuiTreeItem-iconContainer":K?{display:"none"}:void 0},group:{borderLeft:"1px solid ".concat(Y.listItem.groupTextColor)}}}))(),$=u.useMemo((function(){return{minWidth:R?Math.round(.6*R):600,flexShrink:0}}),[R]),ee=u.useMemo((function(){return"small"===n.size||!!R&&R<650}),[R,n.size]),te=k?k.map((function(e){return n.variablesContainer.has(e)?null:{text:e,value:e}})).filter(Boolean):[],ne=function(){n.historyHandler?n.historyHandler.saveToHistory():x(Qt(g,n.variablesContainer)),n.onVariablesUpdated&&n.onVariablesUpdated()},re=function(){n.historyHandler?n.historyHandler.undo():x($t(g,n.variablesContainer)),S([])},oe=function(){n.historyHandler?n.historyHandler.redo():x(en(g,n.variablesContainer)),S([])},ie=new Rt.Z({isActive:function(){return!0},shortcutCallbacks:{onUndo:re,onRedo:oe}}),ae=function(e){if(e.startsWith(cn))return!1;var t=fn(e,n.variablesContainer),r=t.name,o=t.lineage;if(!r)return!1;var i=dn(o);return i?i.getType()===Bn.Variable.Array?i.removeAtIndex(parseInt(r,10)):i.removeChild(r):n.variablesContainer.remove(r),!0},se=function(e,t,r){S([]);var o=l.filter((function(e){return e.startsWith(cn)}));d([].concat((0,j.Z)(o),(0,j.Z)(xn(n.variablesContainer)))),y&&(J(),X())},le=function(){if(0===E.length||E.some((function(e){return e.startsWith(cn)}))){var e=nn(n.variablesContainer,"Variable",null,n.variablesContainer.count()),t=e.name,r=e.variable;return ne(),S([t]),void z({identifier:r.ptr})}var o=E[0],i=fn(o,n.variablesContainer),a=i.name,s=i.lineage;if(a){var l,c,u=(l=s).length?l[0]:null;c=u?n.variablesContainer.getPosition(u.name)+1:n.variablesContainer.getPosition(a)+1;var d=nn(n.variablesContainer,"Variable",null,c),p=d.name,h=d.variable;ne(),S([p]),z({identifier:h.ptr})}},ce=function e(t,r){var o,a=t.name,s=t.variable,u=t.parentNodeId,p=t.parentVariable,h=t.isInherited,g=t.index,m=on(s),x=s.getType(),v=u?u.split(un).length:0,b=0===v,Z=ee||!!R&&(R<=750?v>=5:R<=850?v>=6:R<=950?v>=7:v>=8),k=null;o=u?"".concat(u).concat(un).concat(a):h?"".concat(cn).concat(a):a,p&&(k=p.getType());var w=E.includes(o),T=b&&!h&&n.inheritedVariablesContainer&&n.inheritedVariablesContainer.has(a);if(y&&!(D.includes(o)||D.includes(u)||D.some((function(e){return e.startsWith(o)}))))return null;var P={};return x===Bn.Variable.String&&(P.padding=0),w&&(P.color=Y.listItem.selectedTextColor),(0,f.jsx)(_n,{beginDrag:function(){return q.current=o,{}},canDrag:function(){return!h},canDrop:function(){return function(e){if(e.startsWith(cn))return!1;var t=q.current;if(!t)return!1;var r=fn(e,n.variablesContainer),o=r.lineage,i=fn(t,n.variablesContainer),a=i.variable;if(!a)return!1;if(hn(a,o))return!1;switch(bn(i,r)){case"InsideTopLevel":case"TopLevelToStructure":case"StructureToTopLevel":case"FromStructureToAnotherStructure":case"FromArrayToAnotherArray":case"InsideSameArray":return!0;default:return!1}}(o)},drop:function(){!function(e){if(!e.startsWith(cn)){var t=q.current;if(t){var r=fn(e,n.variablesContainer),o=r.lineage,i=r.name,a=dn(o);if(i){var s=fn(t,n.variablesContainer),l=s.variable,c=s.lineage,u=s.name,d=dn(c);if(l&&u&&!hn(l,o)){var p,h,f,g=!0;switch(bn(s,r)){case"InsideTopLevel":h=n.variablesContainer.getPosition(u),f=n.variablesContainer.getPosition(i),n.variablesContainer.move(h,f>h?f-1:f);break;case"TopLevelToStructure":p=(0,Ut.Z)(u,(function(e){return a.hasChild(e)}),"CopyOf"),a.insertChild(p,l),n.variablesContainer.remove(u),pn(o)&&se();break;case"StructureToTopLevel":p=(0,Ut.Z)(u,(function(e){return n.variablesContainer.has(e)}),"CopyOf"),n.variablesContainer.insert(p,l,n.variablesContainer.getPosition(i)),d.removeChild(u),se();break;case"FromStructureToAnotherStructure":p=(0,Ut.Z)(u,(function(e){return a.hasChild(e)}),"CopyOf"),a.insertChild(p,l),d.removeChild(u),pn(o)&&se();break;case"FromArrayToAnotherArray":h=parseInt(u,10),f=parseInt(i,10),a.insertAtIndex(l,f),d.removeAtIndex(h),pn(o)&&se(0,0,f.toString());break;case"InsideSameArray":h=parseInt(u,10);var m=(f=parseInt(i,10))>h?f-1:f;a.moveChildInArray(h,m),pn(o)&&se(0,0,m.toString());break;default:g=!1}g&&(ne(),X())}}}}}(o)},children:function(t){var u=t.connectDragSource,p=t.connectDropTarget,y=t.isOver,E=t.canDrop;return(0,f.jsx)(Vn,{tabIndex:-1,nodeId:o,className:m&&s.getChildrenCount()>0?"isCollection":"",classes:Q,label:p((0,f.jsxs)("div",{children:[y&&(0,f.jsx)(Mt.Z,{canDrop:E}),(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:ee?"4px 4px 4px 0px":"6px 30px 6px 6px"},children:[h?(0,f.jsx)("span",{style:Hn.handlePlaceholder}):u((0,f.jsx)("span",{children:(0,f.jsx)(At.V,{color:w?Y.listItem.selectedTextColor:"#AAA"})})),(0,f.jsxs)(C.ep,{expand:!0,noMargin:!0,width:Z?"small":void 0,children:[(0,f.jsxs)(L.x1,{alignItems:"center",noMargin:!0,expand:!0,children:[Z?null:(0,f.jsx)(L.LZ,{}),(0,f.jsx)(Bt.ZP,{fullWidth:!0,ref:function(e){0===v&&e&&(V.current[s.ptr]=e)},commitOnInputChange:!n.commitChangesOnBlur,dataSource:b?te:[],margin:"none",disabled:h||k===Bn.Variable.Array,onClick:Nn,errorText:U[s.ptr],onChange:function(e){if(pe(o,e,v),U[s.ptr]){var t=(0,i.Z)({},U);delete t[s.ptr],H(t)}X()},inputStyle:{color:w?Y.listItem.selectedTextColor:Y.listItem.textColor,fontStyle:T?"italic":void 0},value:a,onBlur:function(e){if(pe(o,e.currentTarget.value,v),U[s.ptr]){var t=(0,i.Z)({},U);delete t[s.ptr],H(t)}X()},id:"variable-".concat(g,"-name")},"name"),(0,f.jsx)(L.LZ,{})]}),(0,f.jsx)("div",{style:Z?void 0:$,children:(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(Sn,{variableType:x,onChange:function(e){he(o,e),X()},isHighlighted:w,disabled:h,id:"variable-".concat(g,"-type")})}),(0,f.jsx)(L.sg,{expand:!0,children:x===Bn.Variable.Boolean?(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)("span",{style:w?{color:Y.listItem.selectedTextColor}:void 0,children:s.getBool()?(0,f.jsx)(c.Trans,{id:"True"}):(0,f.jsx)(c.Trans,{id:"False"})}),h&&!b?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(A.Z,{size:"small",style:Hn.inlineIcon,onClick:function(){fe(o,s.getBool()?"false":"true")},tooltip:s.getBool()?{id:"Set to false"}:{id:"Set to true"},children:(0,f.jsx)(Fn,{htmlColor:w?Y.listItem.selectedTextColor:void 0})})]})]}):(0,f.jsx)(Dt.Z,{margin:"none",ref:function(e){0===v&&e&&(W.current[s.ptr]=e)},type:x===Bn.Variable.Number?"number":"text",onClick:Nn,multiline:x===Bn.Variable.String,inputStyle:P,disabled:m||h&&!b,onChange:function(e){fe(o,e),X()},value:m?r._(0===s.getChildrenCount()?{id:"No children"}:1===s.getChildrenCount()?{id:"1 child"}:{id:"{0} children",values:{0:s.getChildrenCount()}}):x===Bn.Variable.String?s.getString():s.getValue().toString(),commitOnBlur:n.commitChangesOnBlur,id:"variable-".concat(g,"-text-value")},"value")}),m&&!h?(0,f.jsx)(A.Z,{size:"small",style:Hn.inlineIcon,tooltip:{id:"Add child"},onClick:function(e){Nn(e),function(e){if(!e.startsWith(cn)){var t=fn(e,n.variablesContainer).variable;if(t&&on(t)){var r=t.getType();if(r===Bn.Variable.Structure){var o=(0,Ut.Z)("ChildVariable",(function(e){return t.hasChild(e)}));t.getChild(o).setString("")}else r===Bn.Variable.Array&&t.pushNew();ne(),t.isFolded()&&t.setFolded(!1),d([].concat((0,j.Z)(l),[e]))}}}(o)},children:(0,f.jsx)(Ue.Z,{htmlColor:w?Y.listItem.selectedTextColor:void 0})}):null,m&&h&&b?(0,f.jsx)(A.Z,{size:"small",tooltip:{id:"Edit"},style:Hn.inlineIcon,onClick:function(e){Nn(e),function(e){if(n.inheritedVariablesContainer){var t=fn(e,n.inheritedVariablesContainer),r=t.variable,o=t.name;if(r&&o&&!n.variablesContainer.has(o)){var i=new Bn.Variable;(0,qt.qx)(i,(0,qt.XH)(r)),n.variablesContainer.insert(o,i,n.variablesContainer.count()),ne(),S([o]),d([].concat((0,j.Z)(l),[o])),i.delete()}}}(o)},children:(0,f.jsx)(Pt.Z,{htmlColor:w?Y.listItem.selectedTextColor:void 0})}):null,T&&b?(0,f.jsx)(A.Z,{size:"small",tooltip:{id:"Reset"},style:Hn.inlineIcon,onClick:function(e){Nn(e),function(e){ae(e)&&ne()}(o)},children:(0,f.jsx)(de,{htmlColor:w?Y.listItem.selectedTextColor:void 0})}):null]})})]})]})]})),onLabelClick:Un,children:m?x===Bn.Variable.Structure?s.getAllChildrenNames().toJSArray().map((function(t,n){var i=s.getChild(t);return e({name:t,variable:i,parentNodeId:o,parentVariable:s,isInherited:h,index:n},r)})):(0,Nt.mapFor)(0,s.getChildrenCount(),(function(t){var n=s.getAtIndex(t);return e({name:t.toString(),variable:n,parentNodeId:o,parentVariable:s,isInherited:h,index:t},r)})):null})}},s.ptr)},ue=function(e,t){var r=l.filter((function(e){return!e.startsWith(cn)})),o=t.filter((function(e){return!e.startsWith(cn)})),i=r.filter((function(e){return!o.includes(e)})),a=o.filter((function(e){return!r.includes(e)}));vn(n.variablesContainer,i,!0),vn(n.variablesContainer,a,!1),d(t)},pe=function(e,t,o){var a=fn(e,n.variablesContainer),s=a.variable,u=a.lineage,p=a.name;if(null!==p){if(s&&t){if(t.startsWith(cn)||t.includes(un))return void H((0,i.Z)((0,i.Z)({},U),{},(0,r.Z)({},s.ptr,(0,f.jsx)(c.Trans,{id:"Variables cannot have a name that includes {inheritedPrefix} or {separator}",values:{inheritedPrefix:cn,separator:un}}))));if(0===o&&!t.match(/^(?:[A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/))return void H((0,i.Z)((0,i.Z)({},U),{},(0,r.Z)({},s.ptr,(0,f.jsx)(c.Trans,{id:'Top variable names can contain letters from any alphabet, digits and "_" character and cannot start with a digit.'}))))}if(t){if(t!==p){var h=dn(u);(h?h.renameChild(p,t):n.variablesContainer.rename(p,t))?(ne(),function(e,t){d(mn(l,e,t)),S(mn(E,e,t)),y&&M(mn(D,e,t))}(e,t)):s&&H((0,i.Z)((0,i.Z)({},U),{},(0,r.Z)({},s.ptr,(0,f.jsx)(c.Trans,{id:"The variable name {newName} is already taken",values:{newName:t}}))))}}else s&&H((0,i.Z)((0,i.Z)({},U),{},(0,r.Z)({},s.ptr,(0,f.jsx)(c.Trans,{id:"Variables cannot have empty names"}))))}},he=function(e,t){var r=fn(e,n.variablesContainer).variable;r&&(r.castTo(t),ne())},fe=function(e,t){var r;if(e.startsWith(cn)&&n.inheritedVariablesContainer){var o=fn(e,n.inheritedVariablesContainer),i=o.variable,a=o.name,s=o.depth;if(!a||!i||s>0)return;switch(i.getType()){case Bn.Variable.String:if(i.getString()===t)return;break;case Bn.Variable.Number:if(parseFloat(t)===i.getValue())return;break;case Bn.Variable.Boolean:if("true"===t===i.getBool())return}var l=new Bn.Variable;(0,qt.qx)(l,(0,qt.XH)(i)),r=n.variablesContainer.insert(a,l,0);var c=(0,j.Z)(E);-1!==c.indexOf(e)?(c.splice(c.indexOf(e),1,a),S(c)):S([].concat((0,j.Z)(c),[a]));var u=W.current[i.ptr];G({identifier:r.ptr,caretPosition:u?u.getCaretPosition():null}),l.delete()}else{r=fn(e,n.variablesContainer).variable}if(r){switch(r.getType()){case Bn.Variable.String:if(r.getString()===t)return;r.setString(t);break;case Bn.Variable.Number:var d=parseFloat(t);if(d===r.getValue())return;r.setValue(d);break;case Bn.Variable.Boolean:var p="true"===t;if(p===r.getBool())return;r.setBool(p);break;default:console.error("Cannot set variable with type ".concat(r.getType()," - are you sure it's a primitive type?"))}ne(),X()}},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t&&n.inheritedVariablesContainer?n.inheritedVariablesContainer:n.variablesContainer;return(0,Nt.mapFor)(0,r.count(),(function(o){var i=r.getAt(o),a=r.getNameAt(o);return t&&n.variablesContainer.has(a)?null:ce({name:a,variable:i,isInherited:t,index:o},e)}))},me=(0,f.jsx)(Mn,{isNarrow:ee,onCopy:function(){Yt.set(Pn,E.map((function(e){var t=fn(e,e.startsWith(cn)&&n.inheritedVariablesContainer?n.inheritedVariablesContainer:n.variablesContainer),r=t.variable,o=t.name,i=t.lineage;if(!r||!o)return null;var a=!1,s=dn(i);return s&&s.getType()!==Bn.Variable.Structure||(a=!0),{nameOrIndex:o,serializedVariable:(0,qt.XH)(r),hasName:a}})).filter(Boolean)),X()},onPaste:function(){if(Yt.has(Pn)){var e=[],t=Yt.get(Pn),r=Gt.extractArray(t);if(r){var o=0;r.forEach((function(t){var r=Gt.extractStringProperty(t,"nameOrIndex"),i=Gt.extractObjectProperty(t,"serializedVariable"),a=Gt.extractBooleanProperty(t,"hasName");if(r&&i&&null!==a){var s=a?r:null;if(0===E.length||E.some((function(e){return e.startsWith(cn)}))){if(!s)return;var l=nn(n.variablesContainer,s,i).name;e.push(l)}else{var c=E[0];if(c.startsWith(cn))return;var u=fn(c,n.variablesContainer),d=u.name,p=u.lineage;if(!d)return;var h=dn(p);if(h){var f=h.getType();if(f===Bn.Variable.Structure&&!s||f===Bn.Variable.Array&&s)return;if(f===Bn.Variable.Array){var g=parseInt(d,10)+1;!function(e,t,n){var r=new tn.Variable;(0,qt.qx)(r,t),e.insertAtIndex(r,n),r.delete()}(h,i,g);var m=c.split(un);m.splice(m.length-1,1,(g+o).toString()),e.push(m.join(un)),o+=1}else{if(!s)return;var x=function(e,t,n){var r=(0,Ut.Z)(t,(function(t){return e.hasChild(t)}),"CopyOf"),o=new tn.Variable;return(0,qt.qx)(o,n),e.insertChild(r,o),o.delete(),r}(h,s,i),v=c.split(un);v.splice(v.length-1,1,x),e.push(v.join(un))}}else{if(!s)return;var b=nn(n.variablesContainer,s,i,n.variablesContainer.getPosition(d)+1).name;e.push(b)}}}})),ne(),S(e)}}},onDelete:function(){E.map(ae).some(Boolean)&&S([])},canCopy:E.length>0,canPaste:Yt.has(Pn),canDelete:E.length>0&&E.every((function(e){return!e.startsWith(cn)})),onUndo:re,onRedo:oe,canUndo:n.historyHandler?n.historyHandler.canUndo():Kt(g),canRedo:n.historyHandler?n.historyHandler.canRedo():Jt(g),hideHistoryChangeButtons:!!n.historyHandler,onAdd:le,searchText:y,onChangeSearchText:Z});return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(kt.Z,{onClickAway:function(){return S([])},children:(0,f.jsx)(Zt.Z,{bounds:!0,onResize:function(e){B(e.bounds.width)},children:function(e){e.contentRect;var r=e.measureRef;return(0,f.jsx)("div",{ref:r,style:{flex:1,display:"flex",minHeight:0},onKeyDown:ie.onKeyDown,onKeyUp:ie.onKeyUp,children:(0,f.jsxs)(L.sg,{expand:!0,useFullHeight:!0,noMargin:!0,children:[ee?null:me,0!==n.variablesContainer.count()||n.inheritedVariablesContainer&&0!==n.inheritedVariablesContainer.count()?(0,f.jsx)(Ot.Z,{autoHideScrollbar:!0,children:(0,f.jsxs)(Tt.Z,{multiSelect:!0,defaultExpandIcon:(0,f.jsx)(It.Z,{}),defaultCollapseIcon:(0,f.jsx)(Be.Z,{}),onNodeSelect:function(e,t){return S(t)},onNodeToggle:ue,selected:E,expanded:l,children:[n.inheritedVariablesContainer?ge(t,!0):null,ge(t)]})}):(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:n.emptyPlaceholderTitle&&n.emptyPlaceholderDescription?(0,f.jsx)(Ft.$,{title:n.emptyPlaceholderTitle,description:n.emptyPlaceholderDescription,actionLabel:(0,f.jsx)(c.Trans,{id:"Add a variable"}),helpPagePath:n.helpPagePath||void 0,tutorialId:"intermediate-advanced-variables",onAction:le,actionButtonId:"add-variable"}):null}),ee?me:null]})})}})})}})},zn=n(4076),Gn=function(e){var t=e.onCancel,n=e.onApply,r=e.open,o=e.onEditObjectVariables,a=e.title,s=e.emptyPlaceholderTitle,l=e.emptyPlaceholderDescription,u=e.variablesContainer,d=e.inheritedVariablesContainer,p=e.hotReloadPreviewButtonProps,h=e.onComputeAllVariableNames,g=e.helpPagePath,m=e.id,x=mt({serializableObject:u,onCancel:t}),v=x.onCancelChanges,b=x.notifyOfChange,j=(0,Ct.Z)("intro-variables").DismissableTutorialMessage;return(0,f.jsx)(V.ZP,{title:a,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:v},"Cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:n,id:"apply-button"},"Apply")],secondaryActions:[o?(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Edit Object Variables"}),primary:!1,onClick:o},"edit-object-variables"):null,p?(0,f.jsx)(xt,(0,i.Z)({},p),"hot-reload-preview-button"):null,g?(0,f.jsx)(zn.Z,{helpPagePath:g},"help"):null],onRequestClose:v,onApply:n,open:r,flexBody:!0,fullHeight:!0,id:m,children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[u.count()>0&&j&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:j})}),(0,f.jsx)(Wn,{commitChangesOnBlur:!0,variablesContainer:u,inheritedVariablesContainer:d,emptyPlaceholderTitle:s,emptyPlaceholderDescription:l,onComputeAllVariableNames:h,helpPagePath:g,onVariablesUpdated:b})]})})},Yn=n(21601),qn=n(32921),Xn=n(72611),Jn=n(94258);var Kn=function(e){for(var t=e.project,n=t.getCurrentPlatform().getAllPlatformExtensions(),r=[],o=function(e){var o=n.at(e),i=t.getExtensionProperties().getAllExtensionProperties(o.getName(),t);if(0===i.keys().size())return"continue";var a=(0,Jn.Z)(i,(function(e){return t.getExtensionProperties().getAllExtensionProperties(o.getName(),t)}),(function(e,n,r){"boolean"===t.getExtensionProperties().getAllExtensionProperties(o.getName(),t).get(n).getType()?t.getExtensionProperties().setValue(o.getName(),n,"1"===r?"true":"false"):t.getExtensionProperties().setValue(o.getName(),n,r)}));r.push((0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"block-title",children:o.getFullName()}),(0,f.jsx)(Xn.Z,{schema:a,instances:[o.getAllProperties()]})]},o.getName()))},i=0;i<n.size();i++)o(i);return r.length?(0,f.jsx)(Q.Z,{children:r}):null},Qn=n(79987),$n=n(90286),er=n(11858),tr=n(3115),nr=n(28641),rr={subscriptionContainer:{display:"flex",borderRadius:10,alignItems:"center"},diamondIcon:{width:50,height:50}},or=function(e){var t=u.useContext(nr.o).openSubscriptionDialog,n=u.useContext(m.Z),r=(0,i.Z)((0,i.Z)({},rr.subscriptionContainer),{},{border:"1px solid ".concat(n.palette.primary)});return(0,f.jsxs)("div",{style:r,children:[(0,f.jsx)("img",{src:"res/diamond.svg",style:rr.diamondIcon,alt:"diamond"}),(0,f.jsxs)(C.pJ,{alignItems:"center",expand:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:e.children}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(ve.Z,{href:"#",onClick:function(){t({reason:e.subscriptionDialogOpeningReason})},children:(0,f.jsx)(J.Z,{noMargin:!0,color:"inherit",children:(0,f.jsx)(c.Trans,{id:"Upgrade"})})})})]})]})},ir=n(71106),ar=n(68151),sr=[{value:"top",label:{id:"Top"}},{value:"top-left",label:{id:"Top left corner"}},{value:"top-right",label:{id:"Top right corner"}},{value:"bottom",label:{id:"Bottom"}},{value:"bottom-left",label:{id:"Bottom left corner"}},{value:"bottom-right",label:{id:"Bottom right corner"}}],lr=function(e){var t=e.loadingScreen,n=e.watermark,r=e.onLoadingScreenUpdated,o=e.onChangeSubscription,i=e.project,a=e.resourceManagementProps,s=u.useRef(null),l=u.useContext(ir.ZP),d=(0,_t.Z)(),p=!(0,ar.e_)(l.subscription),h=function(){d(),r()};return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"section-title",children:(0,f.jsx)(c.Trans,{id:"Branding"})}),(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Display SpeXEngine logo at startup (in exported game)"}),checked:t.isGDevelopLogoShownDuringLoadingScreen(),onCheck:function(e,r){(r||n.isGDevelopWatermarkShown()||!s.current||s.current.checkUserHasSubscription())&&(t.showGDevelopLogoDuringLoadingScreen(r),h())}})}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsxs)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"SpeXEngine logo style"}),value:t.getGDevelopLogoStyle(),onChange:function(e,n,r){t.getGDevelopLogoStyle()!==r&&(t.setGDevelopLogoStyle(r),h())},disabled:!t.isGDevelopLogoShownDuringLoadingScreen(),children:[(0,f.jsx)(U.Z,{value:"light",label:{id:"Light (plain)"}}),(0,f.jsx)(U.Z,{value:"light-colored",label:{id:"Light (colored)"}}),(0,f.jsx)(U.Z,{value:"dark",label:{id:"Dark (plain)"}}),(0,f.jsx)(U.Z,{value:"dark-colored",label:{id:"Dark (colored)"}})]})})]}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Display SpeXEngine watermark after the game is loaded (in exported game)"}),checked:n.isGDevelopWatermarkShown(),onCheck:function(e,r){(r||t.isGDevelopLogoShownDuringLoadingScreen()||!s.current||s.current.checkUserHasSubscription())&&(n.showGDevelopWatermark(r),h())}})}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"SpeXEngine watermark placement"}),value:n.getPlacement(),onChange:function(e,r,o){t.getGDevelopLogoStyle()!==o&&(n.setPlacement(o),h())},disabled:!n.isGDevelopWatermarkShown(),children:sr.map((function(e){return(0,f.jsx)(U.Z,{value:e.value,label:e.label},e.value)}))})})]}),p&&(0,f.jsx)(or,{subscriptionDialogOpeningReason:"Disable SpeXEngine splash at startup",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Get a silver or gold subscription to disable SpeXEngine branding."})})})]}),(0,f.jsx)(J.Z,{size:"section-title",children:(0,f.jsx)(c.Trans,{id:"Loading screen"})}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Background"})}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(tr.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Background image"}),project:i,resourceManagementProps:a,resourceKind:"image",resourceName:t.getBackgroundImageResourceName(),onChange:function(e){t.getBackgroundImageResourceName()!==e&&(t.setBackgroundImageResourceName(e),h())}})}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)($n.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Background color"}),disableAlpha:!0,color:(0,er.m0)(t.getBackgroundColor()),onChange:function(e){var n=t.getBackgroundColor(),r=(0,er.UQ)(e);n!==r&&(t.setBackgroundColor(r),h())}}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Background fade in duration (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getBackgroundFadeInDuration(),onChange:function(e){var n=t.getBackgroundFadeInDuration(),r=Math.max(0,parseFloat(e));n!==r&&(t.setBackgroundFadeInDuration(r),h())}})]}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Progress bar"})}),(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Show progress bar"}),checked:t.getShowProgressBar(),onCheck:function(e,n){t.setShowProgressBar(n),h()}}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Progress bar minimum width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarMinWidth(),onChange:function(e){var n=t.getProgressBarMinWidth(),r=Math.max(0,parseFloat(e));n!==r&&(t.setProgressBarMinWidth(r),h())},helperMarkdownText:r._({id:"In pixels. 0 to ignore."})}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Progress bar width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarWidthPercent(),onChange:function(e){var n=t.getProgressBarWidthPercent(),r=Math.min(100,Math.max(1,parseFloat(e)));n!==r&&(t.setProgressBarWidthPercent(r),h())},helperMarkdownText:r._({id:"As a percent of the game width."})}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Progress bar maximum width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarMaxWidth(),onChange:function(e){var n=t.getProgressBarMaxWidth(),r=Math.max(0,parseFloat(e));n!==r&&(t.setProgressBarMaxWidth(r),h())},helperMarkdownText:r._({id:"In pixels. 0 to ignore."})})]}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Progress bar height"}),fullWidth:!0,type:"number",value:""+t.getProgressBarHeight(),onChange:function(e){var n=t.getProgressBarHeight(),r=Math.max(1,parseFloat(e));n!==r&&(t.setProgressBarHeight(r),h())},helperMarkdownText:r._({id:"In pixels."})}),(0,f.jsx)($n.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Progress bar color"}),disableAlpha:!0,color:(0,er.m0)(t.getProgressBarColor()),onChange:function(e){var n=t.getProgressBarColor(),r=(0,er.UQ)(e);n!==r&&(t.setProgressBarColor(r),h())}})]}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{floatingLabelText:t.isGDevelopLogoShownDuringLoadingScreen()?(0,f.jsx)(c.Trans,{id:"Logo and progress fade in delay (in seconds)"}):(0,f.jsx)(c.Trans,{id:"Progress fade in delay (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getLogoAndProgressLogoFadeInDelay(),onChange:function(e){var n=t.getLogoAndProgressLogoFadeInDelay(),r=Math.max(0,parseFloat(e));n!==r&&(t.setLogoAndProgressLogoFadeInDelay(r),h())}}),(0,f.jsx)(Dt.Z,{floatingLabelText:t.isGDevelopLogoShownDuringLoadingScreen()?(0,f.jsx)(c.Trans,{id:"Logo and progress fade in duration (in seconds)"}):(0,f.jsx)(c.Trans,{id:"Progress fade in duration (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getLogoAndProgressFadeInDuration(),onChange:function(e){var n=t.getLogoAndProgressFadeInDuration(),r=Math.max(0,parseFloat(e));n!==r&&(t.setLogoAndProgressFadeInDuration(r),h())}})]}),t.isGDevelopLogoShownDuringLoadingScreen()?(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"Progress bar fade in delay and duration will be applied to SpeXEngine logo."})}):null,(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Duration"})}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Minimum duration of the screen (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getMinDuration(),onChange:function(e){var n=t.getMinDuration(),r=Math.max(0,parseFloat(e));n!==r&&(t.setMinDuration(r),h())},helperMarkdownText:r._({id:"When previewing the game in the editor, this duration is ignored (the game preview starts as soon as possible)."})}),(0,f.jsx)(Qn.Z,{ref:s,onChangeSubscription:o,mode:"mandatory",id:"Disable SpeXEngine splash at startup",title:(0,f.jsx)(c.Trans,{id:"Disable SpeXEngine splash at startup"})})]})}})},cr=n(12203);function ur(e,t,n){var r=n.gameResolutionWidth,o=n.gameResolutionHeight,i=n.adaptGameResolutionAtRuntime,a=n.name,s=n.description,l=n.authorIds,c=n.authorUsernames,u=n.author,d=n.version,p=n.packageName,h=n.orientation,f=n.scaleMode,g=n.pixelsRounding,m=n.sizeOnStartupMode,x=n.antialiasingMode,v=n.isAntialisingEnabledOnMobile,b=n.minFPS,j=n.maxFPS,C=n.isFolderProject,y=n.useDeprecatedZeroAsDefaultZOrder;e.setGameResolutionSize(r,o),e.setAdaptGameResolutionAtRuntime(i),e.setName(a),e.setDescription(s);var Z=e.getAuthorIds();Z.clear(),l.forEach((function(e){return Z.push_back(e)}));var k=e.getAuthorUsernames();return k.clear(),c.forEach((function(e){return k.push_back(e)})),e.setAuthor(u),e.setVersion(d),e.setPackageName(p),e.setOrientation(h),e.setScaleMode(f),e.setPixelsRounding(g),e.setSizeOnStartupMode(m),e.setAntialiasingMode(x),e.setAntialisingEnabledOnMobile(v),e.setMinimumFPS(b),e.setMaximumFPS(j),e.setFolderProject(C),e.setUseDeprecatedZeroAsDefaultZOrder(y),(0,qn.vv)(t,(0,qn.nu)(t,e))}var dr=function(e){var t=e.project,n=e.hotReloadPreviewButtonProps,r=u.useMemo((function(){return function(e){return{gameResolutionWidth:e.getGameResolutionWidth(),gameResolutionHeight:e.getGameResolutionHeight(),adaptGameResolutionAtRuntime:e.getAdaptGameResolutionAtRuntime(),name:e.getName(),description:e.getDescription(),author:e.getAuthor(),authorIds:e.getAuthorIds().toJSArray(),authorUsernames:e.getAuthorUsernames().toJSArray(),version:e.getVersion(),packageName:e.getPackageName(),orientation:e.getOrientation(),scaleMode:e.getScaleMode(),pixelsRounding:e.getPixelsRounding(),sizeOnStartupMode:e.getSizeOnStartupMode(),antialiasingMode:e.getAntialiasingMode(),isAntialisingEnabledOnMobile:e.isAntialisingEnabledOnMobile(),minFPS:e.getMinimumFPS(),maxFPS:e.getMaximumFPS(),isFolderProject:e.isFolderProject(),useDeprecatedZeroAsDefaultZOrder:e.getUseDeprecatedZeroAsDefaultZOrder()}}(t)}),[t]),i=u.useState(r.name),s=(0,a.Z)(i,2),d=s[0],p=s[1],h=u.useState(r.description),g=(0,a.Z)(h,2),m=g[0],x=g[1],v=u.useState(r.authorIds),b=(0,a.Z)(v,2),j=b[0],Z=b[1],k=u.useState(r.authorUsernames),w=(0,a.Z)(k,2),T=w[0],S=w[1],P=u.useState(r.gameResolutionWidth),I=(0,a.Z)(P,2),D=I[0],A=I[1],L=u.useState(r.gameResolutionHeight),M=(0,a.Z)(L,2),O=M[0],R=M[1],N=u.useState(r.adaptGameResolutionAtRuntime),H=(0,a.Z)(N,2),W=H[0],z=H[1],G=u.useState(r.author),Y=(0,a.Z)(G,2),q=Y[0],X=Y[1],Q=u.useState(r.version),$=(0,a.Z)(Q,2),ee=$[0],te=$[1],ne=u.useState(r.packageName),oe=(0,a.Z)(ne,2),ie=oe[0],ae=oe[1],se=u.useState(r.orientation),le=(0,a.Z)(se,2),ce=le[0],ue=le[1],de=u.useState(r.scaleMode),pe=(0,a.Z)(de,2),he=pe[0],fe=pe[1],ge=u.useState(r.pixelsRounding),me=(0,a.Z)(ge,2),xe=me[0],ve=me[1],be=u.useState(r.sizeOnStartupMode),je=(0,a.Z)(be,2),Ce=je[0],ye=je[1],Ze=u.useState(r.antialiasingMode),ke=(0,a.Z)(Ze,2),Te=ke[0],Ee=ke[1],Se=u.useState(r.isAntialisingEnabledOnMobile),Pe=(0,a.Z)(Se,2),Ie=Pe[0],De=Pe[1],Ae=u.useState(r.minFPS),Le=(0,a.Z)(Ae,2),Me=Le[0],Fe=Le[1],Oe=u.useState(r.maxFPS),Re=(0,a.Z)(Oe,2),Be=Re[0],_e=Re[1],Ne=u.useState(r.isFolderProject),Ue=(0,a.Z)(Ne,2),He=Ue[0],Ve=Ue[1],We=u.useState(r.useDeprecatedZeroAsDefaultZOrder),ze=(0,a.Z)(We,2),Ge=ze[0],Ye=ze[1],qe=u.useState(e.initialTab),Xe=(0,a.Z)(qe,2),Je=Xe[0],Ke=Xe[1],Qe=mt({serializableObject:t.getLoadingScreen(),onCancel:e.onClose}),$e=Qe.onCancelChanges,et=Qe.notifyOfChange,tt=mt({serializableObject:t.getExtensionProperties(),onCancel:$e}),nt=tt.onCancelChanges,rt=tt.notifyOfChange,ot=function(){var n=(0,o.Z)(l().mark((function n(){var o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=d!==r.name?{newName:d}:{},n.next=3,e.onApply(o);case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:ur(t,e.i18n,{gameResolutionWidth:D,gameResolutionHeight:O,adaptGameResolutionAtRuntime:W,name:d,description:m,author:q,authorIds:j,authorUsernames:T,version:ee,packageName:ie,orientation:ce,scaleMode:he,pixelsRounding:xe,antialiasingMode:Te,isAntialisingEnabledOnMobile:Ie,sizeOnStartupMode:Ce,minFPS:Me,maxFPS:Be,isFolderProject:He,useDeprecatedZeroAsDefaultZOrder:Ge})&&e.onPropertiesApplied(o);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,f.jsx)(c.I18n,{children:function(r){var o=r.i18n;return(0,f.jsx)(u.Fragment,{children:(0,f.jsxs)(V.ZP,{id:"project-properties-dialog",title:(0,f.jsx)(c.Trans,{id:"Game properties"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:nt},"cancel"),(0,f.jsx)(V.vF,{id:"apply-button",label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:ot},"apply")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/project-manager/properties"},"help"),n?(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(y,{}),label:(0,f.jsx)(c.Trans,{id:"Run a preview (with loading & branding)"}),onClick:n.launchProjectWithLoadingScreenPreview},"hot-reload-preview-button"):null],onRequestClose:nt,onApply:ot,open:e.open,fullHeight:!0,fixedContent:(0,f.jsx)(K.m,{value:Je,onChange:Ke,options:[{label:(0,f.jsx)(c.Trans,{id:"Properties"}),value:"properties"},{label:(0,f.jsx)(c.Trans,{id:"Branding and Loading screen"}),value:"loading-screen"}]}),children:["properties"===Je&&(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Game Info"})}),(0,f.jsx)(cr.ZP,{name:d,setName:function(e){e.trim()!==d&&(p(e.trim()),rt())},description:m,setDescription:function(e){e!==m&&(x(e.trim()),rt())},project:t,authorIds:j,setAuthorIds:function(e){Z(e),rt()},setAuthorUsernames:function(e){S(e),rt()},orientation:ce,setOrientation:function(e){e!==ce&&(ue(e),rt())}}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Packaging"})}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Package name (for iOS and Android)"}),fullWidth:!0,hintText:"com.example.mygame",type:"text",value:ie,onChange:function(e){e!==ie&&(ae(e),rt())},errorText:(0,qn.O8)(ie)?void 0:(0,f.jsx)(c.Trans,{id:'The package name is containing invalid characters or not following the convention "xxx.yyy.zzz" (numbers allowed after a letter only).'})}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Version number (X.Y.Z)"}),fullWidth:!0,hintText:"1.0.0",type:"text",value:ee,onChange:function(e){e!==ee&&(te(e),rt())}}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Publisher name"}),fullWidth:!0,translatableHintText:{id:"Your name"},helperMarkdownText:o._({id:"This will be used when packaging and submitting your application to the stores."}),type:"text",value:q,onChange:function(e){e!==q&&(X(e),rt())}}),Ge?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Z Order of objects created from events"})}),(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"When you create an object using an action, SpeXEngine now sets the Z order of the object to the maximum value that was found when starting the scene for each layer. This allow to make sure that objects that you create are in front of others. This game was created before this change, so SpeXEngine maintains the old behavior: newly created objects Z order is set to 0. It's recommended that you switch to the new behavior by clicking the following button."})}),(0,f.jsx)(E.Z,{onClick:function(){F.ZP.showConfirmDialog(o._({id:"Make sure to verify all your events creating objects, and optionally add an action to set the Z order back to 0 if it's important for your game. Do you want to continue (recommended)?"}))&&(Ye(!1),rt())},label:(0,f.jsx)(c.Trans,{id:"Switch to create objects with the highest Z order of the layer"})})]}):null,(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Resolution and rendering"})}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{id:"game-resolution-width",floatingLabelText:(0,f.jsx)(c.Trans,{id:"Game resolution width"}),fullWidth:!0,type:"number",value:""+D,onChange:function(e){var t=Math.max(1,parseInt(e,10));t!==D&&(A(t),rt())}}),(0,f.jsx)(Dt.Z,{id:"game-resolution-height",floatingLabelText:(0,f.jsx)(c.Trans,{id:"Game resolution height"}),fullWidth:!0,type:"number",value:""+O,onChange:function(e){var t=Math.max(1,parseInt(e,10));t!==O&&(R(t),rt())}})]}),(0,f.jsxs)(B.Z,{id:"game-resolution-resize-mode",fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Game resolution resize mode (fullscreen or window)"}),value:Ce,onChange:function(e,t,n){n!==Ce&&(ye(n),rt())},children:[(0,f.jsx)(U.Z,{value:"",label:{id:"No changes to the game size"}}),(0,f.jsx)(U.Z,{value:"adaptWidth",label:{id:"Change width to fit the screen or window size"}}),(0,f.jsx)(U.Z,{value:"adaptHeight",label:{id:"Change height to fit the screen or window size"}})]}),(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Update resolution during the game to fit the screen or window size"}),disabled:""===Ce,checked:W,onCheck:function(e,t){z(t),rt()}}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Minimum FPS"}),fullWidth:!0,type:"number",value:""+Me,onChange:function(e){var t=Math.max(0,parseInt(e,10));t!==Me&&(Fe(t),rt())}}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Maximum FPS (0 for unlimited)"}),fullWidth:!0,type:"number",value:""+Be,onChange:function(e){var t=Math.max(0,parseInt(e,10));t!==Be&&(_e(t),rt())}})]}),Be>0&&Be<60&&(0,f.jsx)(re.Z,{identifier:"maximum-fps-too-low",kind:"warning",children:(0,f.jsx)(c.Trans,{id:"Most monitors have a refresh rate of 60 FPS. Setting a maximum number of FPS under 60 will force the game to skip frames, and the real number of FPS will be way below 60, making the game laggy and impacting the gameplay negatively. Consider putting 60 or more for the maximum number or FPS, or disable it by setting 0."})}),Me<20&&(0,f.jsx)(re.Z,{identifier:"minimum-fps-too-low",kind:"warning",children:(0,f.jsx)(c.Trans,{id:"Setting the minimum number of FPS below 20 will increase a lot the time that is allowed between the simulation of two frames of the game. If case of a sudden slowdown, or on slow computers, this can create buggy behaviors like objects passing beyond a wall. Consider setting 20 as the minimum FPS."})}),(0,f.jsxs)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:'Scale mode (also called "Sampling")'}),value:he,onChange:function(e,t,n){n!==he&&(fe(n),rt())},children:[(0,f.jsx)(U.Z,{value:"linear",label:{id:"Linear (antialiased rendering, good for most games)"}}),(0,f.jsx)(U.Z,{value:"nearest",label:{id:"Nearest (no antialiasing, good for pixel perfect games)"}})]}),(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Round pixels when rendering, useful for pixel perfect games."}),checked:xe,onCheck:function(e,t){ve(t),rt()}}),"nearest"===he&&(0,f.jsx)(re.Z,{identifier:"use-non-smoothed-textures",kind:"info",children:(0,f.jsx)(c.Trans,{id:"To obtain the best pixel-perfect effect possible, go in the resources editor and disable the Smoothing for all images of your game. It will be done automatically for new images added from now."})}),xe&&(0,f.jsx)(re.Z,{identifier:"use-pixel-rounding",kind:"info",children:(0,f.jsx)(c.Trans,{id:"To avoid flickering on objects followed by the camera, use sprites with even dimensions."})}),(0,f.jsxs)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Antialising for 3D"}),value:"none"===Te?"never":Ie?"always":"notOnMobile",onChange:function(e,t,n){n!==he&&(Ee("never"===n?"none":"MSAA"),De("always"===n),rt())},children:[(0,f.jsx)(U.Z,{value:"notOnMobile",label:{id:"Not on mobile"}}),(0,f.jsx)(U.Z,{value:"always",label:{id:"Always"}}),(0,f.jsx)(U.Z,{value:"never",label:{id:"Never"}})]}),(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Project files"})}),(0,f.jsxs)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Project file type"}),value:He?"folder-project":"single-file",onChange:function(e,t,n){var r="folder-project"===n;r!==He&&(Ve(r),rt())},helperMarkdownText:o._({id:"Note that this option will only have an effect when saving your project on your computer's filesystem from the desktop app. Read about [using Git or GitHub with projects in multiple files](https://wiki.engine.spacexpanse.org/spexengine5/tutorials/using-github-desktop/)."}),children:[(0,f.jsx)(U.Z,{value:"single-file",label:{id:"Single file (default)"}}),(0,f.jsx)(U.Z,{value:"folder-project",label:{id:"Multiple files, saved in folder next to the main file"}})]}),(0,f.jsx)(Kn,{project:t})]}),"loading-screen"===Je&&(0,f.jsx)(lr,{loadingScreen:t.getLoadingScreen(),watermark:t.getWatermark(),onLoadingScreenUpdated:et,onChangeSubscription:nt,project:t,resourceManagementProps:e.resourceManagementProps})]})})}})},pr=function(e){return(0,Nt.mapFor)(0,e.getLayoutsCount(),(function(t){return e.getLayoutAt(t)}))},hr=function(e){return(0,Nt.mapFor)(0,e.getExternalEventsCount(),(function(t){return e.getExternalEventsAt(t)}))},fr=function(e){return(0,Nt.mapFor)(0,e.getExternalLayoutsCount(),(function(t){return e.getExternalLayoutAt(t)}))},gr=function(e){return(0,Nt.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(t){return e.getEventsFunctionsExtensionAt(t)}))},mr=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))},xr=n(48210),vr=n(75383),br=n(61651),jr=n(38509),Cr={container:{flex:1},grid:{overflowX:"hidden",scrollbarWidth:"thin"}},yr=function(e){var t=e.disableAutoTranslate,n=e.searchItems,r=e.getSearchItemUniqueId,o=e.renderSearchItem,i=e.error,a=e.onRetry,s=u.useRef(null),l=u.useRef(0),d=u.useRef({}),p=u.useCallback((function(e,t){return d.current[r(e)]!==t&&(d.current[r(e)]=t,!0)}),[r]),h=u.useCallback((function(e){var t=e.index;if(!n||!n[t])return 90;var o=n[t];return d.current[r(o)]||90}),[n,r]),g=u.useCallback((function(e){var t=e.key,r=e.rowIndex,i=e.style;if(!n)return null;var a=n[r];return a?(0,f.jsx)("div",{style:i,children:o(a,(function(e){p(a,e)&&s.current&&s.current.recomputeGridSize(0,r)}))},t):null}),[n,p,o]);return n?0===n.length?(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"No results returned for your search. Try something else or typing at least 2 characters."})}):(0,f.jsx)(br.C,{title:"An error occurred when displaying search results",scope:"list-search-result",children:(0,f.jsx)("div",{style:Cr.container,className:t?"notranslate":"",children:(0,f.jsx)(jr.qj,{children:function(e){var t=e.width,r=e.height;return l.current!==t&&(d.current={},l.current=t),(0,f.jsx)(jr.rj,{ref:function(e){e&&e.recomputeGridSize(0,0),s.current=e},width:t,height:r,columnCount:1,columnWidth:t,rowHeight:h,rowCount:n.length,cellRenderer:g,style:Cr.grid})}})})}):i?(0,f.jsx)(vr.Z,{onRetry:a,children:(0,f.jsx)(c.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}):(0,f.jsx)(Qe.Z,{})},Zr=n(3798),kr=n(33133),wr=n(56596),Tr=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.66663C7.07953 3.66663 6.33333 4.41282 6.33333 5.33329C6.33333 6.25377 7.07953 6.99996 8 6.99996C8.92048 6.99996 9.66667 6.25377 9.66667 5.33329C9.66667 4.41282 8.92048 3.66663 8 3.66663ZM5.33333 5.33329C5.33333 3.86053 6.52724 2.66663 8 2.66663C9.47276 2.66663 10.6667 3.86053 10.6667 5.33329C10.6667 6.80605 9.47276 7.99996 8 7.99996C6.52724 7.99996 5.33333 6.80605 5.33333 5.33329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.70925 9.61877C5.50186 9.14565 6.5698 8.83329 8 8.83329C9.4302 8.83329 10.4981 9.14565 11.2908 9.61877C12.0838 10.0921 12.5719 10.709 12.8693 11.272C13.1451 11.7943 13.0548 12.3392 12.741 12.7333C12.4405 13.1107 11.954 13.3333 11.435 13.3333H4.565C4.04603 13.3333 3.55953 13.1107 3.25898 12.7333C2.94516 12.3392 2.85485 11.7943 3.1307 11.2721C3.42807 10.709 3.91625 10.0921 4.70925 9.61877ZM5.2218 10.4774C4.60995 10.8427 4.24054 11.3119 4.01495 11.7391C3.93529 11.8899 3.96043 12.0089 4.04125 12.1104C4.13534 12.2285 4.32269 12.3333 4.565 12.3333H11.435C11.6773 12.3333 11.8646 12.2285 11.9587 12.1104C12.0396 12.0089 12.0647 11.8899 11.9851 11.7391C11.7595 11.3119 11.39 10.8427 10.7782 10.4774C10.166 10.112 9.2818 9.83329 8 9.83329C6.7182 9.83329 5.83404 10.112 5.2218 10.4774Z",fill:"currentColor"})]}))})),Er={chip:{marginRight:2,marginLeft:2,marginBottom:2}},Sr=function(e){var t=e.user,n=e.isClickable,r=void 0!==n&&n,o=e.variant,i=u.useContext(wr.Z).openUserPublicProfile;return(0,f.jsx)(le.Z,{icon:(0,f.jsx)(Tr,{}),size:"small",style:Er.chip,variant:o,label:t.username,onClick:r?function(){return i(t.id)}:null,disableAutoTranslate:!0},t.username)},Pr=function(e,t,n,r,o){var i=t[0],a=t[1]+1,s=e.slice(n,i),l=e.slice(i,a),c=e.slice(a,r||e.length);return[s,(0,f.jsx)("span",{style:o,children:l},"".concat(l).concat(i)),c]},Ir=function(e){var t=e.text,n=e.matchesCoordinates,r=u.useContext(m.Z);if(0===n.length)return[t];for(var o=[],i=0;i<n.length;i++){var a=n[i+1]?n[i+1][0]:void 0,s=0===i?0:n[i][0];o.push(Pr(t,n[i],s,a,r.text.highlighted))}return o.map((function(e,t){return(0,f.jsx)(u.Fragment,{children:e},t)}))},Dr={button:{width:"100%"},container:{display:"flex",textAlign:"left",overflow:"hidden",padding:8,width:"100%"}},Ar=function(e){var t=e.id,n=e.project,r=e.extensionShortHeader,o=e.matches,i=e.onChoose,a=e.onHeightComputed,s=n.hasEventsFunctionsExtensionNamed(r.name),l=!!s&&"gdevelop-extension-store"===n.getEventsFunctionsExtension(r.name).getOriginName(),d=u.useRef(null);u.useLayoutEffect((function(){d.current&&a(d.current.getBoundingClientRect().height)}));var p=function(e){var t=r[e];if(!o)return t;var n=o.filter((function(t){return t.key===e}));return 0===n.length?t:(0,f.jsx)(Ir,{text:t,matchesCoordinates:n[0].indices})};return(0,f.jsx)(Zr.Z,{id:t,onClick:i,focusRipple:!0,style:Dr.button,children:(0,f.jsx)("div",{style:Dr.container,ref:d,children:(0,f.jsxs)(C.pJ,{children:[(0,f.jsx)(kr.q,{alt:r.fullName,src:r.previewIconUrl,size:64}),(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"baseline",children:[(0,f.jsx)(J.Z,{noMargin:!0,allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:p("fullName")}),s&&(0,f.jsx)(le.Z,{size:"small",label:l?(0,f.jsx)(c.Trans,{id:"Already installed"}):(0,f.jsx)(c.Trans,{id:"Already in project"}),color:"secondary",variant:"outlined"}),"community"===r.tier&&(0,f.jsx)(le.Z,{size:"small",label:(0,f.jsx)(c.Trans,{id:"Community extension"}),color:"primary"})]}),r.authors&&(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:{flexWrap:"wrap"},children:r.authors.map((function(e){return(0,f.jsx)(Sr,{user:e},e.id)}))})}),(0,f.jsx)(J.Z,{noMargin:!0,size:"body2",allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:p("shortDescription")})]})]})})})},Lr=n(39126),Mr=n(63854),Fr=n(18930),Or=n(81439),Rr=function(e,t){return(0,u.useMemo)((function(){var n=t.extensionName||t.name;return e.hasEventsFunctionsExtensionNamed(n)?function(e,t){try{var n=(0,Or.diff)(e,t);if(["patch","minor","major"].includes(n))return{type:n,currentVersion:e,newestVersion:t}}catch(r){if(e!==t)return{type:"minor",currentVersion:e,newestVersion:t}}return null}(e.getEventsFunctionsExtension(n).getVersion(),t.version):null}),[e,t])},Br=function(e){return e.description.substr(0,e.shortDescription.length)===e.shortDescription?e.description.substr(e.shortDescription.length):e.description},_r=function(e){var t=e.extensionShortHeader,n=e.isInstalling,r=e.onClose,i=e.onInstall,s=e.onEdit,d=e.project,p=d.hasEventsFunctionsExtensionNamed(t.name),h=!!p&&"gdevelop-extension-store"===d.getEventsFunctionsExtension(t.name).getOriginName(),g=Rr(d,t),m=u.useState(null),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useState(null),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=u.useCallback((function(){b(null),(0,Lr.Fk)(t).then((function(e){k(e)}),(function(e){b(e)}))}),[t]);u.useEffect((function(){return w()}),[w]);var T=(0,Lr.a2)((0,tt.r1)(),t),E=!n&&T,S=u.useCallback((function(){if(E&&i)if(p){var e="This extension is already in your project, this will install the latest version. You may have to do some adaptations to make sure your game still works. Do you want to continue?";if(h||(e="An other extension with the same name is already in your project. Installing this extension will overwrite your current extension. Do you want to continue?"),!F.ZP.showConfirmDialog(e))return;i()}else i()}),[i,E,p,h]),P=function(){var e=(0,ft.Z)().showConfirmation;return(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Outdated extension"},message:{id:"The extension installed in this project is not up to date. Consider upgrading it before reporting any issue."},confirmButtonLabel:{id:"Close"},dismissButtonLabel:{id:"Report anyway"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}(),I=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=6;break}return e.next=3,P();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:F.ZP.openExternalURL("https://github.com/SpeXEngineApp/GDevelop-extensions/issues/new"+"?assignees=&labels=&template=bug-report.md&title=[".concat(t.name,"] Issue short description"));case 7:case"end":return e.stop()}}),e)}))),[t.name,g,P]);return(0,f.jsx)(V.ZP,{title:t.fullName,id:"install-extension-dialog",actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Back"}),primary:!1,onClick:r,disabled:n},"close"),i?(0,f.jsx)(Mr.Z,{isLoading:n,children:(0,f.jsx)(V.vF,{id:"install-extension-button",label:T?p?h?g?"community"===t.tier?(0,f.jsx)(c.Trans,{id:"Update (could break the project)"}):(0,f.jsx)(c.Trans,{id:"Update"}):(0,f.jsx)(c.Trans,{id:"Re-install"}):(0,f.jsx)(c.Trans,{id:"Replace existing extension"}):(0,f.jsx)(c.Trans,{id:"Install in project"}):(0,f.jsx)(c.Trans,{id:"Not compatible"}),primary:!0,onClick:S,disabled:!E})},"install"):null],secondaryActions:[s?(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Open in editor"}),onClick:s},"edit-extension"):void 0,p?(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Report an issue"}),onClick:function(){return I()}},"report-extension"):void 0,Z&&Z.helpPath?(0,f.jsx)(zn.Z,{helpPagePath:Z.helpPath},"help-button"):void 0].filter(Boolean),open:!0,cannotBeDismissed:n,onRequestClose:r,onApply:i?S:r,children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(L.x1,{alignItems:"flex-start",noMargin:!0,children:[(0,f.jsx)(kr.q,{alt:t.fullName,src:t.previewIconUrl,size:64}),(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,size:"body2",children:(0,f.jsx)(c.Trans,{id:"Version {0}",values:{0:" "+t.version}})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:{flexWrap:"wrap"},children:t.authors&&t.authors.map((function(e){return(0,f.jsx)(Sr,{user:e,isClickable:!0},e.id)}))})})]})]}),(0,f.jsx)(J.Z,{noMargin:!0,children:Z?Z.shortDescription:t.shortDescription||""}),(0,f.jsx)(Fr.Z,{}),Z&&(0,f.jsx)($e.r,{source:Br(Z),isStandaloneText:!0}),"community"===t.tier&&(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:"This is an extension made by a community member \u2014 but not reviewed by the SpeXEngine extension team. As such, we can't guarantee it meets all the quality standards of official extensions. It could also not be compatible with older SpeXEngine versions. In case of doubt, contact the author to know more about what the extension does or inspect its content before using it."})}),!T&&(0,f.jsx)(we.Z,{kind:"error",children:(0,f.jsx)(c.Trans,{id:"Unfortunately, this extension requires a newer version of SpeXEngine to work. Update SpeXEngine to be able to use this extension in your project."})}),!Z&&!v&&(0,f.jsx)(Qe.Z,{}),!Z&&v&&(0,f.jsx)(vr.Z,{onRetry:w,children:(0,f.jsx)(c.Trans,{id:"Can't load the extension registry. Verify your internet connection or try again later."})})]})})},Nr=n(67724),Ur=n(39173),Hr=n(69186),Vr=function(e){return e.stopPropagation()},Wr={root:{height:30,display:"flex",justifyContent:"space-between"},input:{width:"100%"},searchContainer:{position:"relative",margin:"auto 8px",width:"100%"}},zr=u.forwardRef((function(e,t){var n=u.useRef(null),r=u.useCallback((function(){n.current&&n.current.focus()}),[n]);u.useImperativeHandle(t,(function(){return{focus:r}}));var o,i=(o=e.textAlign,(0,Hr.Z)({root:{textAlign:o||"left",cursor:"default"}})()),a=e.onChange||void 0,s=!0,l=u.Children.map(e.children,(function(e){return null!==e&&e.props?e.props.value:null}));l?s=0!==l.filter((function(t){return t===e.value})).length:console.error("SelectField has been passed no or invalid children. Only SelectOption and null are supported.");var d=s?e.value:"";return(0,f.jsx)(c.I18n,{children:function(t){var r=t.i18n;return(0,f.jsx)(ee.Z,{style:Wr.root,background:"light",children:(0,f.jsx)("div",{style:Wr.searchContainer,children:(0,f.jsxs)(Ur.Z,{select:!0,color:"secondary",disabled:e.disabled,fullWidth:e.fullWidth,value:d,onClick:e.stopPropagationOnClick?Vr:void 0,onChange:a?function(e){a(e,-1,e.target.value)}:void 0,InputProps:{style:Wr.input,disableUnderline:!0},InputLabelProps:{shrink:!0},SelectProps:{native:!0,classes:i},margin:"none",style:Wr.input,inputRef:n,children:[s?null:(0,f.jsx)("option",{value:"",disabled:!0,children:e.translatableHintText?r._(e.translatableHintText):r._({id:"Choose an option"})}),e.children]})})})}})})),Gr=function(e){return e.name},Yr=function(e){var t=e.isInstalling,n=e.project,r=e.onInstall,i=e.showOnlyWithBehaviors,s=u.useContext(X.ZP),d=u.useState(null),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useContext(xr.H),x=m.filters,v=m.searchResults,b=m.error,j=m.fetchExtensionsAndFilters,y=m.filtersState,Z=m.searchText,k=m.setSearchText,w=m.allCategories,T=m.chosenCategory,E=m.setChosenCategory;u.useEffect((function(){j()}),[j]);var S=v?v.filter((function(e){var t=e.item;return!i||t.eventsBasedBehaviorsCount>0})):null,P=u.useMemo((function(){return{add:y.addFilter,remove:y.removeFilter,chosenTags:y.chosenFilters}}),[y]),I=function(e){if(!v)return[];var t=v.find((function(t){return t.item.name===e.name}));return t?t.matches:[]},D=(0,Ct.Z)("intro-behaviors-and-functions").DismissableTutorialMessage;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsxs)(zr,{value:T,onChange:function(e,t,n){E(n)},children:[(0,f.jsx)(U.Z,{value:"",label:{id:"All categories"}}),w.map((function(e){return(0,f.jsx)(U.Z,{value:e,label:e},e)}))]}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(pt.Z,{id:"extension-search-bar",value:Z,onChange:k,onRequestSearch:function(){},tagsHandler:P,tags:x&&x.allTags,placeholder:{id:"Search extensions"},autoFocus:"desktop"})})]}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(H.Z,{onToggle:function(e,t){return s.setShowCommunityExtensions(t)},toggled:s.values.showCommunityExtensions,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Show community extensions (not officially reviewed)"})})}),D]}),(0,f.jsx)(yr,{disableAutoTranslate:!0,onRetry:j,error:b,searchItems:S&&S.map((function(e){return e.item})),getSearchItemUniqueId:Gr,renderSearchItem:function(e,t){return(0,f.jsx)(Ar,{id:"extension-list-item-".concat(e.name),project:n,onHeightComputed:t,extensionShortHeader:e,matches:I(e),onChoose:function(){(0,Nr.pk)(e.name),g(e)}},e.name)}})]}),!!h&&(0,f.jsx)(_r,{project:n,isInstalling:t,extensionShortHeader:h,onInstall:(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,Nr.ix)(h.name),e.next=3,r(h);case 3:e.sent&&g(null);case 5:case"end":return e.stop()}}),e)}))),onClose:function(){return g(null)}})]})},qr=n(28923),Xr=n(30141),Jr=n(87706),Kr=function(){var e=(0,o.Z)(l().mark((function e(t,n,r,o){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Lr.RT)(o);case 3:return i=e.sent,e.next=6,(0,Jr.An)(r,n,[i]);case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),(0,Xr.gR)({message:t._({id:"Unable to download and install the extension. Verify that your internet connection is working or try again later."}),rawError:e.t0,errorId:"download-extension-error"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r,o){return e.apply(this,arguments)}}(),Qr=function(){var e=(0,o.Z)(l().mark((function e(t,n,r){var o,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.getEventsFunctionsExtensionOpener()){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,o.chooseEventsFunctionExtensionFile();case 6:if(i=e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,o.readEventsFunctionExtensionFile(i);case 11:if(a=e.sent,!r.hasEventsFunctionsExtensionNamed(a.name)){e.next=16;break}if(F.ZP.showConfirmDialog(t._({id:"An extension with this name already exists in the project. Importing this extension will replace it: are you sure you want to continue?"}))){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,(0,Jr.An)(n,r,[a],!1);case 18:return e.abrupt("return",!0);case 21:return e.prev=21,e.t0=e.catch(3),(0,Xr.gR)({message:t._({id:"An error happened while loading this extension. Please check that it is a proper extension file and compatible with this version of SpeXEngine"}),rawError:e.t0,errorId:"extension-loading-error"}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t,n,r){return e.apply(this,arguments)}}(),$r=n(51535),eo=n(65570),to=n(3550),no=function(e){var t=e.identifier,n=e.show,r=e.touchScreenMessage,o=e.message,i=u.useContext(to.Z).currentlyRunningInAppTutorial,a=u.useContext(X.ZP),s=u.useContext(m.Z),l=(0,eo.BF)();return i?null:(0,f.jsx)(p.Z,{open:n&&!a.values.hiddenAlertMessages[t],message:"touch"===l&&r?r:o,action:(0,f.jsx)($r.Z,{color:"light"===s.palette.type?"secondary":"primary",size:"small",onClick:function(){a.showAlertMessage(t,!1)},children:(0,f.jsx)(c.Trans,{id:"Got it"})})})},ro=n(2861),oo=n(17361);function io(e){var t=e.project,n=e.onClose,r=e.onInstallExtension,i=e.onExtensionInstalled,s=e.onCreateNew,d="small"===(0,T.L)(),p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useState(!1),v=(0,a.Z)(x,2),b=v[0],j=v[1],C=u.useContext(qr.Z),y=u.useContext(ir.ZP),Z=(0,ro.zi)(y,ro.Ch,Kr),k=function(){var e=(0,o.Z)(l().mark((function e(n,o){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(!0),e.prev=1,!o){e.next=9;break}return r(o),e.next=6,Z(n,t,C,o);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,Qr(n,C,t);case 11:a=e.sent;case 12:if(!a){e.next=16;break}return j(!0),i&&i(),e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:return e.prev=17,m(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),w=C.getEventsFunctionsExtensionOpener();return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Search for New Extensions"}),id:"extension-search-dialog",fullHeight:!0,actions:[(0,f.jsx)(_.Z,{id:"close-button",label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:n,disabled:g},"close")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/extensions/search"},"help"),w?(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(oo.Z,{}),label:d?(0,f.jsx)(c.Trans,{id:"Import"}):(0,f.jsx)(c.Trans,{id:"Import extension"}),onClick:function(){k(r)},disabled:g},"import"):null,s?(0,f.jsx)(_.Z,{onClick:s,label:d?(0,f.jsx)(c.Trans,{id:"Create"}):(0,f.jsx)(c.Trans,{id:"Create a new extension"}),leftIcon:(0,f.jsx)(Ue.Z,{})},"create-new"):null],flexBody:!0,open:!0,cannotBeDismissed:g,onRequestClose:n,children:[(0,f.jsx)(Yr,{isInstalling:g,onInstall:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k(r,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),project:t,showOnlyWithBehaviors:!1}),(0,f.jsx)(no,{identifier:"extension-installed-explanation",message:(0,f.jsx)(c.Trans,{id:"The extension was added to the project. You can now use it in the list of actions/conditions and, if it's a behavior, in the list of behaviors for an object."}),show:b})]})}})}var ao=n(47498),so=n(11461),lo=n(58017),co=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{children:(0,f.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"})}))})),uo=n(23666),po=n(29277),ho=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props.behaviorSharedData,t=(0,Jn.Z)(e.getProperties(),(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n)}));return(0,f.jsx)(L.sg,{expand:!0,children:t.length?(0,f.jsx)(Xn.Z,{schema:t,instances:[e],resourceManagementProps:this.props.resourceManagementProps}):(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"There is nothing to configure for this behavior. You can still use events to interact with the object and this behavior."})})})}}]),n}(u.Component),fo=n(83306),go=n.n(fo),mo=n(14932),xo=n(95644),vo=n(3108),bo=n(94446),jo=n.g.gd,Co=function(e){var t=e.open,n=e.layout,r=e.project,o=e.onApply,i=e.onClose,s=e.onOpenMoreSettings,l=e.onEditVariables,d=e.resourceManagementProps,p=u.useState(n.getWindowDefaultTitle()),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useState(n.stopSoundsOnStartup()),v=(0,a.Z)(x,2),b=v[0],j=v[1],y=u.useState({r:n.getBackgroundColorRed(),g:n.getBackgroundColorGreen(),b:n.getBackgroundColorBlue(),a:1}),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1];u.useEffect((function(){t&&n&&(m(n.getWindowDefaultTitle()),j(n.stopSoundsOnStartup()),w({r:n.getBackgroundColorRed(),g:n.getBackgroundColorGreen(),b:n.getBackgroundColorBlue(),a:1}))}),[t,n]);var T=function(){n.setWindowDefaultTitle(g),n.setStopSoundsOnStartup(b),n.setBackgroundColor(k?k.r:0,k?k.g:0,k?k.b:0),o()},S=[(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Ok"}),primary:!0,onClick:T},"ok")],P=n.getAllBehaviorSharedDataNames().toJSArray().map((function(e){var t=n.getBehaviorSharedData(e);if(function(e,t){return 0===e.getPointer(t)}(jo,t))return null;var o=t.getProperties(),i=(0,Jn.Z)(o,(function(e){return t.getProperties()}),(function(e,n,r){t.updateProperty(n,r)})),a=t.getTypeName(),s=jo.MetadataProvider.getBehaviorMetadata(jo.JsPlatform.get(),a),l=((0,bo.r1)(a),s.getIconFilename());return!!i.length&&(0,f.jsxs)(vo.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(e),children:[(0,f.jsxs)(vo._m,{actions:[(0,f.jsx)(mo.Z,{size:"small",helpPagePath:s.getHelpPath()},"help")],children:[l?(0,f.jsx)(kr.q,{src:l,alt:s.getFullName(),size:20}):null,(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(po.ZP,{value:e,margin:"none",fullWidth:!0,disabled:!0,onChange:function(e,t){},id:"behavior-".concat(e,"-name-text-field")})})]}),(0,f.jsx)(vo.X1,{children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[null,(0,f.jsx)(L.x1,{children:(0,f.jsx)(ho,{behaviorSharedData:t,project:r,resourceManagementProps:d},e)})]})})]},e)})).filter(Boolean);return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"{0} properties",values:{0:n.getName()}}),actions:S,secondaryActions:[(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Edit scene variables"}),fullWidth:!0,onClick:function(){l(),i()}},"edit-scene-variables")],onRequestClose:i,onApply:T,open:t,maxWidth:"sm",children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Window title"}),fullWidth:!0,type:"text",value:g,onChange:function(e,t){return m(t)}}),(0,f.jsx)(Yn.Z,{checked:b,label:(0,f.jsx)(c.Trans,{id:"Stop music and sounds on startup"}),onCheck:function(e,t){return j(t)}}),(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Scene background color"}),fullWidth:!0,disableAlpha:!0,color:(0,er.KC)(k),onChange:function(e){return w((0,er.A0)(e))}}),!go()(P)&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Any additional properties will appear here if you add behaviors to objects, like Physics behavior."})}),P,s&&(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Open advanced settings"}),fullWidth:!0,onClick:function(){s&&s(),i()}})]})})},yo=n.g.gd,Zo=function(e){return!e.includes(".")&&!e.includes("[")&&e.length>0},ko=function(){function e(){(0,st.Z)(this,e)}return(0,lt.Z)(e,null,[{key:"findAllGlobalVariables",value:function(e,t){return yo.EventsVariablesFinder.findAllGlobalVariables(e,t).toNewVectorString().toJSArray().filter(Zo)}},{key:"findAllLayoutVariables",value:function(e,t,n){return yo.EventsVariablesFinder.findAllLayoutVariables(t.getCurrentPlatform(),t,n).toNewVectorString().toJSArray().filter(Zo)}},{key:"findAllObjectVariables",value:function(e,t,n,r){return yo.EventsVariablesFinder.findAllObjectVariables(t.getCurrentPlatform(),t,n,r).toNewVectorString().toJSArray().filter(Zo)}}]),e}(),wo=function(e){return(0,f.jsx)(Gn,{open:e.open,variablesContainer:e.layout.getVariables(),onCancel:e.onClose,onApply:e.onApply,title:(0,f.jsx)(c.Trans,{id:"{0} variables",values:{0:e.layout.getName()}}),emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first scene variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"These variables hold additional information on a scene."}),helpPagePath:"/all-features/variables/scene-variables",hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps,onComputeAllVariableNames:function(){return ko.findAllLayoutVariables(e.project.getCurrentPlatform(),e.project,e.layout)},id:"scene-variables-dialog"})};function To(e,t){for(var n=t.getCurrentPlatform().getAllPlatformExtensions(),r=0;r<n.size();r++)if(n.at(r).getName()===e)return!0;return t.hasEventsFunctionsExtensionNamed(e)}var Eo=n(76288),So=function(e){return(0,Eo.YZ)("OPEN_PROJECT_PROPERTIES",!!e.project,{handler:e.onOpenProjectProperties}),(0,Eo.YZ)("OPEN_PROJECT_LOADING_SCREEN",!!e.project,{handler:e.onOpenProjectLoadingScreen}),(0,Eo.YZ)("OPEN_PROJECT_VARIABLES",!!e.project,{handler:e.onOpenProjectVariables}),(0,Eo.YZ)("OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG",!!e.project,{handler:e.onOpenPlatformSpecificAssetsDialog}),(0,Eo.YZ)("OPEN_PROJECT_RESOURCES",!!e.project,{handler:e.onOpenResourcesDialog}),(0,Eo.YZ)("OPEN_SEARCH_EXTENSIONS_DIALOG",!!e.project,{handler:e.onOpenSearchExtensionDialog}),null};var Po=function(e){var t=e.project,n=e.onClose,r=e.extensionShortHeader,i=e.extensionName,s=e.onInstallExtension,d=e.onOpenEventsFunctionsExtension,p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useContext(qr.Z),v=function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,s(r),e.next=5,Kr(n,t,x,r);case 5:return e.prev=5,m(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,f.jsx)(_r,{project:t,isInstalling:g,onClose:n,onInstall:function(){return v(o)},extensionShortHeader:r,onEdit:function(){d(i),n()}})}})},Io=n(65111),Do=n(31318),Ao=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.54743 2.00012C7.86298 1.68064 8.29227 1.5 8.74123 1.5C9.19019 1.5 9.61948 1.68064 9.93502 2.00012C10.2504 2.3194 10.4264 2.75112 10.4264 3.2V3.3H12.5338C12.7627 3.3 12.981 3.39214 13.141 3.55409C13.3007 3.71584 13.3894 3.93391 13.3894 4.16V6.3H13.482C13.9309 6.3 14.3602 6.48064 14.6758 6.80012C14.9911 7.1194 15.1672 7.55112 15.1672 8C15.1672 8.44888 14.9911 8.8806 14.6758 9.19988C14.3602 9.51936 13.9309 9.7 13.482 9.7H13.3894V11.84C13.3894 12.0661 13.3007 12.2842 13.141 12.4459C12.981 12.6079 12.7627 12.7 12.5338 12.7H10.4264V12.8C10.4264 13.2489 10.2504 13.6806 9.93502 13.9999C9.61948 14.3194 9.19019 14.5 8.74123 14.5C8.29227 14.5 7.86298 14.3194 7.54743 13.9999C7.2321 13.6806 7.05604 13.2489 7.05604 12.8V12.7H4.35604C4.12712 12.7 3.90884 12.6079 3.74889 12.4459C3.58914 12.2842 3.50049 12.0661 3.50049 11.84V9.2C3.50049 8.92386 3.72435 8.7 4.00049 8.7H4.59308C4.77278 8.7 4.9464 8.62778 5.07539 8.49718C5.20459 8.36637 5.27827 8.18764 5.27827 8C5.27827 7.81236 5.20459 7.63363 5.07539 7.50282C4.9464 7.37222 4.77278 7.3 4.59308 7.3H4.00049C3.72435 7.3 3.50049 7.07614 3.50049 6.8V4.16C3.50049 3.9339 3.58914 3.71584 3.74889 3.55409C3.90884 3.39214 4.12712 3.3 4.35604 3.3H7.05604V3.2C7.05604 2.75112 7.2321 2.3194 7.54743 2.00012ZM8.74123 2.5C8.56153 2.5 8.38791 2.57222 8.25892 2.70282C8.12972 2.83363 8.05604 3.01236 8.05604 3.2V3.8C8.05604 4.07614 7.83219 4.3 7.55604 4.3H4.50049V6.3H4.59308C5.04204 6.3 5.47133 6.48064 5.78688 6.80012C6.10221 7.1194 6.27827 7.55112 6.27827 8C6.27827 8.44888 6.10221 8.8806 5.78688 9.19988C5.47133 9.51936 5.04204 9.7 4.59308 9.7H4.50049V11.7H7.55604C7.83219 11.7 8.05604 11.9239 8.05604 12.2V12.8C8.05604 12.9876 8.12972 13.1664 8.25892 13.2972C8.38791 13.4278 8.56153 13.5 8.74123 13.5C8.92093 13.5 9.09455 13.4278 9.22354 13.2972C9.35274 13.1664 9.42641 12.9876 9.42641 12.8V12.2C9.42641 11.9239 9.65027 11.7 9.92641 11.7H12.3894V9.2C12.3894 8.92386 12.6132 8.7 12.8894 8.7H13.482C13.6617 8.7 13.8353 8.62778 13.9643 8.49718C14.0935 8.36637 14.1672 8.18764 14.1672 8C14.1672 7.81236 14.0935 7.63363 13.9643 7.50282C13.8353 7.37222 13.6617 7.3 13.482 7.3H12.8894C12.6132 7.3 12.3894 7.07614 12.3894 6.8V4.3H9.92641C9.65027 4.3 9.42641 4.07614 9.42641 3.8V3.2C9.42641 3.01236 9.35274 2.83363 9.22354 2.70282C9.09455 2.57222 8.92093 2.5 8.74123 2.5Z",fill:"currentColor"})}))})),Lo={noIndentNestedList:{padding:0},itemTextField:{top:po.B2},dragAndDropItemContainer:{display:"flex",flexDirection:"column"},draggableIcon:{display:"flex"},extensionPlaceholderIconContainer:(0,i.Z)((0,i.Z)({},kr.b),{},{display:"flex",color:"#1D1D26"})},Mo=function(e){var t=e.id,n=e.error,r=e.onRefresh,o=(e.autoGenerateNestedIndicator,e.open),i=e.primaryText,a=e.renderNestedItems;return(0,f.jsx)(ze,{id:t,open:o,primaryText:(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:i}),initiallyOpen:!0,autoGenerateNestedIndicator:!0,renderNestedItems:a,onReload:r,noPadding:!0,nestedListStyle:Lo.noIndentNestedList,leftIcon:n?(0,f.jsx)(ue.Z,{}):void 0,displayReloadButton:!!n,reloadButtonTooltip:(0,f.jsx)(c.Trans,{id:"An error has occurred in functions. Click to reload them."})})},Fo=function(e){var t=e.id,n=e.data,r=e.primaryText,o=e.textEndAdornment,i=e.editingName,a=e.leftIcon,s=e.onEdit,l=e.onDelete,d=e.addLabel,p=e.onAdd,h=e.onRename,g=e.onEditName,x=e.onCopy,v=e.onCut,b=e.onPaste,C=e.onDuplicate,y=e.canPaste,Z=e.canMoveUp,k=e.onMoveUp,w=e.canMoveDown,T=e.onMoveDown,E=e.buildExtraMenuTemplate,S=e.isLastItem,P=e.dragAndDropProps,I=P.DragSourceAndDropTarget,D=P.onBeginDrag,A=P.onDrop,L=u.useRef(null),M=u.useRef(!1),F=u.useContext(m.Z);u.useEffect((function(){if(i){M.current=!1;var e=setTimeout((function(){L.current&&L.current.focus()}),100);return function(){return clearTimeout(e)}}}),[i]);var O=i?(0,f.jsx)(po.ZP,{id:"rename-item-field",margin:"none",ref:L,defaultValue:r,onBlur:function(e){return h(M.current?r:e.currentTarget.value)},onKeyPress:function(e){(0,Io.ph)(e)&&L.current&&L.current.blur()},onKeyUp:function(e){if((0,Io.W$)(e)){var t=L.current;t&&(M.current=!0,t.blur())}},onKeyDown:function(e){(0,Io.W$)(e)&&(e.preventDefault(),e.stopPropagation())},fullWidth:!0,style:Lo.itemTextField}):(0,f.jsxs)("div",{style:{display:"inline-flex",width:"100%",alignItems:"center"},children:[(0,f.jsx)("span",{style:Do.t,title:r,className:"notranslate",children:r}),o&&(0,f.jsx)("span",{style:{marginLeft:5,display:"flex"},children:o})]});return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsx)(I,{beginDrag:function(){return D(),{}},canDrag:function(){return!i},canDrop:function(){return!0},drop:A,children:function(e){var r=e.connectDragSource,o=e.connectDropTarget,c=e.isOver,u=e.canDrop;return o((0,f.jsxs)("div",{style:Lo.dragAndDropItemContainer,children:[c&&(0,f.jsx)(Mt.Z,{canDrop:u,zIndex:1}),(0,f.jsx)(ze,{id:t,data:n,style:S?void 0:{borderBottom:"1px solid ".concat(F.listItem.separatorColor)},noPadding:!0,primaryText:O,leftIcon:r((0,f.jsx)("div",{style:Lo.draggableIcon,children:a})),displayMenuButton:!0,buildMenuTemplate:function(e){return[{label:e._({id:"Edit"}),click:s}].concat((0,j.Z)(E?E(e):[]),[{type:"separator"},{label:e._({id:"Rename"}),click:g},{label:e._({id:"Delete"}),click:l},{label:e._(d),visible:!!p,click:p},{type:"separator"},{label:e._({id:"Copy"}),click:x},{label:e._({id:"Cut"}),click:v},{label:e._({id:"Paste"}),enabled:y(),click:b},{label:e._({id:"Duplicate"}),click:C},{type:"separator"},{label:e._({id:"Move up"}),enabled:Z,click:k},{label:e._({id:"Move down"}),enabled:w,click:T}])},onClick:function(){i||s()}})]}))}})}})},Oo=function(e){var t=e.eventsFunctionsExtension,n=e.onEdit,r=e.onRename,o=e.onEditName,i=e.isEditingName,a=e.onDelete,s=e.onAdd,l=e.onCopy,c=e.onCut,d=e.onPaste,p=e.onDuplicate,h=e.canPaste,g=e.canMoveUp,m=e.onMoveUp,x=e.canMoveDown,v=e.onMoveDown,b=e.isLastItem,j=e.dragAndDropProps,C=t.getName(),y=t.getIconUrl(),Z=u.useContext(xr.H).extensionShortHeadersByName;return(0,f.jsx)(Fo,{leftIcon:y?(0,f.jsx)(kr.q,{size:24,alt:t.getFullName(),src:y}):(0,f.jsx)("div",{style:Lo.extensionPlaceholderIconContainer,children:(0,f.jsx)(Ao,{})}),primaryText:C,editingName:i,onEdit:function(){return n(Z)},onDelete:a,addLabel:{id:"Add a New Extension"},onAdd:s,onRename:r,onEditName:o,onCopy:l,onCut:c,onPaste:d,onDuplicate:p,canPaste:h,canMoveUp:g,onMoveUp:m,canMoveDown:x,onMoveDown:v,isLastItem:b,dragAndDropProps:j})},Ro=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66669C4.03978 3.66669 3.66669 4.03978 3.66669 4.50002V11.5C3.66669 11.9603 4.03978 12.3334 4.50002 12.3334H11.5C11.9603 12.3334 12.3334 11.9603 12.3334 11.5V4.50002C12.3334 4.03978 11.9603 3.66669 11.5 3.66669H4.50002ZM2.66669 4.50002C2.66669 3.4875 3.4875 2.66669 4.50002 2.66669H11.5C12.5126 2.66669 13.3334 3.4875 13.3334 4.50002V11.5C13.3334 12.5126 12.5126 13.3334 11.5 13.3334H4.50002C3.4875 13.3334 2.66669 12.5126 2.66669 11.5V4.50002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16669 2.83335C5.44283 2.83335 5.66669 3.05721 5.66669 3.33335V12.6667C5.66669 12.9428 5.44283 13.1667 5.16669 13.1667C4.89054 13.1667 4.66669 12.9428 4.66669 12.6667V3.33335C4.66669 3.05721 4.89054 2.83335 5.16669 2.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 2.83335C11.1095 2.83335 11.3334 3.05721 11.3334 3.33335V12.6667C11.3334 12.9428 11.1095 13.1667 10.8334 13.1667C10.5572 13.1667 10.3334 12.9428 10.3334 12.6667V3.33335C10.3334 3.05721 10.5572 2.83335 10.8334 2.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 5.83335C2.83335 5.55721 3.05721 5.33335 3.33335 5.33335H5.00002C5.27616 5.33335 5.50002 5.55721 5.50002 5.83335C5.50002 6.1095 5.27616 6.33335 5.00002 6.33335H3.33335C3.05721 6.33335 2.83335 6.1095 2.83335 5.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 5.83335C10.8334 5.55721 11.0572 5.33335 11.3334 5.33335H12.6667C12.9428 5.33335 13.1667 5.55721 13.1667 5.83335C13.1667 6.1095 12.9428 6.33335 12.6667 6.33335H11.3334C11.0572 6.33335 10.8334 6.1095 10.8334 5.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 8.00002C2.83335 7.72388 3.05721 7.50002 3.33335 7.50002H12.6667C12.9428 7.50002 13.1667 7.72388 13.1667 8.00002C13.1667 8.27616 12.9428 8.50002 12.6667 8.50002H3.33335C3.05721 8.50002 2.83335 8.27616 2.83335 8.00002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 10.1667C2.83335 9.89054 3.05721 9.66669 3.33335 9.66669H5.00002C5.27616 9.66669 5.50002 9.89054 5.50002 10.1667C5.50002 10.4428 5.27616 10.6667 5.00002 10.6667H3.33335C3.05721 10.6667 2.83335 10.4428 2.83335 10.1667Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 10.1667C10.8334 9.89054 11.0572 9.66669 11.3334 9.66669H12.6667C12.9428 9.66669 13.1667 9.89054 13.1667 10.1667C13.1667 10.4428 12.9428 10.6667 12.6667 10.6667H11.3334C11.0572 10.6667 10.8334 10.4428 10.8334 10.1667Z",fill:"currentColor"})]}))})),Bo=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_686_2068)",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 1.83337C4.59423 1.83337 1.83331 4.59429 1.83331 8.00004C1.83331 11.4058 4.59423 14.1667 7.99998 14.1667C11.4058 14.1667 14.1666 11.4058 14.1666 8.00004C14.1666 4.59429 11.4058 1.83337 7.99998 1.83337ZM0.833313 8.00004C0.833313 4.042 4.04194 0.833374 7.99998 0.833374C11.9581 0.833374 15.1666 4.04201 15.1666 8.00004C15.1666 11.9581 11.9581 15.1667 7.99998 15.1667C4.04194 15.1667 0.833313 11.9581 0.833313 8.00004Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.92591 5.83337C5.87477 5.83337 5.83331 5.87483 5.83331 5.92597V10.0741C5.83331 10.1253 5.87477 10.1667 5.92591 10.1667H10.0741C10.1252 10.1667 10.1666 10.1253 10.1666 10.0741V5.92597C10.1666 5.87483 10.1252 5.83337 10.0741 5.83337H5.92591ZM4.83331 5.92597C4.83331 5.32254 5.32248 4.83337 5.92591 4.83337H10.0741C10.6775 4.83337 11.1666 5.32254 11.1666 5.92597V10.0741C11.1666 10.6775 10.6775 11.1667 10.0741 11.1667H5.92591C5.32248 11.1667 4.83331 10.6775 4.83331 10.0741V5.92597Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.83331 7.33337C4.83331 7.05723 5.05717 6.83337 5.33331 6.83337H10.6666C10.9428 6.83337 11.1666 7.05723 11.1666 7.33337C11.1666 7.60952 10.9428 7.83337 10.6666 7.83337H5.33331C5.05717 7.83337 4.83331 7.60952 4.83331 7.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33331 6.83337C7.60946 6.83337 7.83331 7.05723 7.83331 7.33337V10.6667C7.83331 10.9428 7.60946 11.1667 7.33331 11.1667C7.05717 11.1667 6.83331 10.9428 6.83331 10.6667V7.33337C6.83331 7.05723 7.05717 6.83337 7.33331 6.83337Z",fill:"currentColor"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_686_2068",children:(0,f.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}))})),_o=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_686_2047)",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 1.83337C4.59423 1.83337 1.83331 4.59429 1.83331 8.00004C1.83331 11.4058 4.59423 14.1667 7.99998 14.1667C11.4058 14.1667 14.1666 11.4058 14.1666 8.00004C14.1666 4.59429 11.4058 1.83337 7.99998 1.83337ZM0.833313 8.00004C0.833313 4.042 4.04194 0.833374 7.99998 0.833374C11.9581 0.833374 15.1666 4.04201 15.1666 8.00004C15.1666 11.9581 11.9581 15.1667 7.99998 15.1667C4.04194 15.1667 0.833313 11.9581 0.833313 8.00004Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.59135 6.85555L4.59135 5.89663C4.59137 5.4166 4.98051 5.02743 5.46055 5.02741L9.93634 5.02741L9.94345 5.02717C9.95612 5.02683 9.97264 5.0266 9.99247 5.02676C10.0319 5.02707 10.0856 5.02895 10.1488 5.0349C10.2725 5.04654 10.4475 5.07506 10.6303 5.14738C10.8139 5.22005 11.0234 5.34433 11.187 5.55699C11.3551 5.77555 11.4471 6.052 11.4471 6.37679C11.4471 6.70156 11.355 6.97803 11.1868 7.19655C11.0231 7.40916 10.8135 7.53325 10.6297 7.6057C10.4469 7.6778 10.2718 7.70609 10.1481 7.71757C10.0849 7.72344 10.0313 7.72524 9.99179 7.7255C9.97197 7.72564 9.95545 7.72538 9.94278 7.72503L9.93603 7.72479L5.46059 7.72479C4.98054 7.72479 4.59135 7.3356 4.59135 6.85555ZM9.96992 6.02653C9.9619 6.02692 9.95345 6.02712 9.94543 6.02712L5.59106 6.02712L5.59106 6.72507L9.94543 6.72508C9.95368 6.72508 9.96192 6.72528 9.97016 6.72569M9.97016 6.72569C9.97216 6.72574 9.9776 6.72586 9.98516 6.72581C10.0005 6.72571 10.0251 6.72497 10.0558 6.72213C10.12 6.71618 10.1954 6.70234 10.263 6.67569C10.3297 6.64939 10.3705 6.61807 10.3946 6.58669C10.4142 6.56122 10.4474 6.50511 10.4474 6.37676C10.4474 6.24842 10.4143 6.19213 10.3945 6.16644C10.3702 6.13485 10.3292 6.1034 10.2625 6.07697C10.1948 6.05019 10.1193 6.03626 10.0551 6.03022C10.0245 6.02733 9.9998 6.02656 9.98449 6.02644C9.97693 6.02638 9.97192 6.02648 9.96992 6.02653",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.44141 11.0472C4.96121 11.0472 4.57192 10.6579 4.57193 10.1777L4.57192 9.21853C4.57194 8.73835 4.9612 8.34907 5.44137 8.34906L9.91252 8.34906C9.92533 8.3484 9.94278 8.34772 9.96279 8.3474C10.0026 8.34678 10.0567 8.34744 10.1205 8.35209C10.2451 8.36118 10.4222 8.38656 10.6074 8.4575C10.7941 8.529 11.0061 8.6536 11.1709 8.86989C11.3395 9.09126 11.4297 9.37096 11.4297 9.69881C11.4297 10.0267 11.3395 10.3064 11.1707 10.5277C11.0058 10.744 10.7937 10.8684 10.6069 10.9397C10.4216 11.0104 10.2445 11.0355 10.1198 11.0444C10.056 11.049 10.0019 11.0496 9.96212 11.0489C9.94211 11.0486 9.92544 11.0479 9.91263 11.0472L5.44141 11.0472ZM9.96867 10.0489L9.96748 10.0488L9.96618 10.0487L9.96497 10.0486C9.96685 10.0487 9.9717 10.0489 9.9791 10.0491C9.99408 10.0493 10.0183 10.0491 10.0484 10.047C10.1117 10.0425 10.1851 10.0303 10.2503 10.0054C10.3141 9.98104 10.3524 9.9516 10.3755 9.92141C10.3946 9.8963 10.4297 9.83697 10.4297 9.69881C10.4297 9.56066 10.3946 9.50114 10.3753 9.4758C10.3522 9.44539 10.3136 9.41581 10.2498 9.39137C10.1845 9.36636 10.111 9.35406 10.0478 9.34944C10.0176 9.34725 9.99341 9.34705 9.97843 9.34728C9.97103 9.3474 9.96618 9.34762 9.9643 9.34771M9.96497 10.0486C9.95262 10.0477 9.93994 10.0472 9.92755 10.0472L5.57192 10.0472L5.57192 9.34905L9.92755 9.34906C9.93972 9.34906 9.95217 9.3486 9.9643 9.34771",fill:"currentColor"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_686_2047",children:(0,f.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}))})),No=q()("electron"),Uo={shortcutReminders:{opacity:.7}},Ho=[{label:(0,f.jsx)(c.Trans,{id:"Save"}),shortcutMapKey:"SAVE_PROJECT"},{label:(0,f.jsx)(c.Trans,{id:"Save as..."}),shortcutMapKey:"SAVE_PROJECT_AS"},{label:(0,f.jsx)(c.Trans,{id:"Export"}),shortcutMapKey:"EXPORT_GAME"},{label:(0,f.jsx)(c.Trans,{id:"Close"}),shortcutMapKey:"CLOSE_PROJECT"}],Vo=function(e){var t=e.shortcutMap;return"small"===(0,T.L)()||No?null:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"Find these actions on the Menu close to the \u201cHome\u201d tab."})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)("div",{style:Uo.shortcutReminders,children:Ho.map((function(e,n){var r=e.label,o=e.shortcutMapKey;return(0,f.jsxs)(L.x1,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsx)(J.Z,{size:"body2",noMargin:!0,children:r}),(0,f.jsx)(J.Z,{size:"body2",noMargin:!0,children:(0,ke.Q)((0,$.YK)(t[o]))})]},n)}))}),(0,f.jsx)(L.LZ,{})]})},Wo="Layout",zo="External layout",Go="External events",Yo="Events Functions Extension",qo=(0,Lt.x)("project-manager-items-scenes"),Xo=(0,Lt.x)("project-manager-items-external-layouts"),Jo=(0,Lt.x)("project-manager-items-external-events"),Ko=(0,Lt.x)("project-manager-items-external-events"),Qo={container:{flex:1,display:"flex",flexDirection:"column",overflowY:"scroll",scrollbarWidth:"thin",marginTop:16,padding:"0 16px 16px 16px",position:"relative"},searchBarContainer:{position:"sticky",top:0,zIndex:1},searchBarPaper:{paddingBottom:8}},$o=function(e){return"project-manager-tab-".concat(e)},ei=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._draggedLayoutIndex=null,e._draggedExternalLayoutIndex=null,e._draggedExternalEventsIndex=null,e._draggedExtensionIndex=null,e.state={editedPropertiesLayout:null,editedVariablesLayout:null,renamedItemKind:null,renamedItemName:"",searchText:"",projectPropertiesDialogOpen:!1,projectPropertiesDialogInitialTab:"properties",projectVariablesEditorOpen:!1,extensionsSearchDialogOpen:!1,openedExtensionShortHeader:null,openedExtensionName:null,isInstallingExtension:!1,layoutPropertiesDialogOpen:!1,layoutVariablesDialogOpen:!1},e._openProjectProperties=function(){e.setState({projectPropertiesDialogOpen:!0,projectPropertiesDialogInitialTab:"properties"})},e._openProjectLoadingScreen=function(){e.setState({projectPropertiesDialogOpen:!0,projectPropertiesDialogInitialTab:"loading-screen"})},e._openProjectVariables=function(){e.setState({projectVariablesEditorOpen:!0})},e._openSearchExtensionDialog=function(){e.setState({extensionsSearchDialogOpen:!0})},e._onEditName=function(t,n){e.setState({renamedItemKind:t,renamedItemName:n})},e._copyLayout=function(e){Yt.set(Wo,{layout:(0,qt.XH)(e),name:e.getName()})},e._cutLayout=function(t){e._copyLayout(t),e.props.onDeleteLayout(t)},e._pasteLayout=function(t){if(Yt.has(Wo)){var n=Yt.get(Wo),r=Gt.extractObjectProperty(n,"layout"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props.project,a=(0,Ut.Z)(o,(function(e){return i.hasLayoutNamed(e)})),s=i.insertNewLayout(a,t);(0,qt.qx)(s,r,"unserializeFrom",i),s.setName(a),s.updateBehaviorsSharedData(i),e._onProjectItemModified()}}},e._duplicateLayout=function(t,n){var r=e.props.project,o=(0,Ut.Z)(t.getName(),(function(e){return r.hasLayoutNamed(e)})),i=r.insertNewLayout(o,n);(0,qt.qx)(i,(0,qt.XH)(t),"unserializeFrom",r),i.setName(o),i.updateBehaviorsSharedData(r),e._onProjectItemModified()},e._addLayout=function(t,n){var r=e.props.project,o=(0,Ut.Z)(n._({id:"Untitled scene"}),(function(e){return r.hasLayoutNamed(e)})),i=r.insertNewLayout(o,t+1);i.setName(o),i.updateBehaviorsSharedData(r),e._onProjectItemModified(),e._onEditName("layout",o)},e._onOpenLayoutProperties=function(t){e.setState({editedPropertiesLayout:t})},e._onOpenLayoutVariables=function(t){e.setState({editedVariablesLayout:t})},e._addExternalEvents=function(t,n){var r=e.props.project,o=(0,Ut.Z)(n._({id:"Untitled external events"}),(function(e){return r.hasExternalEventsNamed(e)}));r.insertNewExternalEvents(o,t+1),e._onProjectItemModified(),e._onEditName("external-events",o)},e._addExternalLayout=function(t,n){var r=e.props.project,o=(0,Ut.Z)(n._({id:"Untitled external layout"}),(function(e){return r.hasExternalLayoutNamed(e)}));r.insertNewExternalLayout(o,t+1),e._onProjectItemModified(),e._onEditName("external-layout",o)},e._addEventsFunctionsExtension=function(t,n){var r=e.props.project,o=(0,Ut.Z)(n._({id:"UntitledExtension"}),(function(e){return To(e,r)}));return r.insertNewEventsFunctionsExtension(o,t+1),e._onProjectItemModified(),o},e._moveUpLayout=function(t){var n=e.props.project;t<=0||(n.swapLayouts(t,t-1),e._onProjectItemModified())},e._moveDownLayout=function(t){var n=e.props.project;t>=n.getLayoutsCount()-1||(n.swapLayouts(t,t+1),e._onProjectItemModified())},e._dropOnLayout=function(t){var n=(0,ct.Z)(e)._draggedLayoutIndex;null!==n&&(t!==n&&(e.props.project.moveLayout(n,t>n?t-1:t),e._onProjectItemModified()),e._draggedLayoutIndex=null)},e._dropOnExternalLayout=function(t){var n=(0,ct.Z)(e)._draggedExternalLayoutIndex;null!==n&&(t!==n&&(e.props.project.moveExternalLayout(n,t>n?t-1:t),e._onProjectItemModified()),e._draggedExternalLayoutIndex=null)},e._dropOnExternalEvents=function(t){var n=(0,ct.Z)(e)._draggedExternalEventsIndex;null!==n&&(t!==n&&(e.props.project.moveExternalEvents(n,t>n?t-1:t),e._onProjectItemModified()),e._draggedExternalEventsIndex=null)},e._dropOnExtension=function(t){var n=(0,ct.Z)(e)._draggedExtensionIndex;null!==n&&(t!==n&&(e.props.project.moveEventsFunctionsExtension(n,t>n?t-1:t),e._onProjectItemModified()),e._draggedExtensionIndex=null)},e._copyExternalEvents=function(e){Yt.set(Go,{externalEvents:(0,qt.XH)(e),name:e.getName()})},e._cutExternalEvents=function(t){e._copyExternalEvents(t),e.props.onDeleteExternalEvents(t)},e._pasteExternalEvents=function(t){if(Yt.has(Go)){var n=Yt.get(Go),r=Gt.extractObjectProperty(n,"externalEvents"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props.project,a=(0,Ut.Z)(o,(function(e){return i.hasExternalEventsNamed(e)})),s=i.insertNewExternalEvents(a,t);(0,qt.qx)(s,r,"unserializeFrom",i),s.setName(a),e._onProjectItemModified()}}},e._duplicateExternalEvents=function(t,n){e._copyExternalEvents(t),e._pasteExternalEvents(n)},e._moveUpExternalEvents=function(t){var n=e.props.project;t<=0||(n.swapExternalEvents(t,t-1),e._onProjectItemModified())},e._moveDownExternalEvents=function(t){var n=e.props.project;t>=n.getExternalEventsCount()-1||(n.swapExternalEvents(t,t+1),e._onProjectItemModified())},e._copyExternalLayout=function(e){Yt.set(zo,{externalLayout:(0,qt.XH)(e),name:e.getName()})},e._cutExternalLayout=function(t){e._copyExternalLayout(t),e.props.onDeleteExternalLayout(t)},e._pasteExternalLayout=function(t){if(Yt.has(zo)){var n=Yt.get(zo),r=Gt.extractObjectProperty(n,"externalLayout"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props.project,a=(0,Ut.Z)(o,(function(e){return i.hasExternalLayoutNamed(e)})),s=i.insertNewExternalLayout(a,t);(0,qt.qx)(s,r),s.setName(a),e._onProjectItemModified()}}},e._duplicateExternalLayout=function(t,n){e._copyExternalLayout(t),e._pasteExternalLayout(n)},e._moveUpExternalLayout=function(t){var n=e.props.project;t<=0||(n.swapExternalLayouts(t,t-1),e._onProjectItemModified())},e._moveDownExternalLayout=function(t){var n=e.props.project;t>=n.getExternalLayoutsCount()-1||(n.swapExternalLayouts(t,t+1),e._onProjectItemModified())},e._copyEventsFunctionsExtension=function(e){Yt.set(Yo,{eventsFunctionsExtension:(0,qt.XH)(e),name:e.getName()})},e._cutEventsFunctionsExtension=function(t){e._copyEventsFunctionsExtension(t),e.props.onDeleteEventsFunctionsExtension(t)},e._duplicateEventsFunctionsExtension=function(t,n){e._copyEventsFunctionsExtension(t),e._pasteEventsFunctionsExtension(n)},e._pasteEventsFunctionsExtension=function(t){if(Yt.has(Yo)){var n=Yt.get(Yo),r=Gt.extractObjectProperty(n,"eventsFunctionsExtension"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props.project,a=(0,Ut.Z)(o,(function(e){return To(e,i)})),s=i.insertNewEventsFunctionsExtension(a,t);(0,qt.qx)(s,r,"unserializeFrom",i),s.setName(a),e._onProjectItemModified(),e.props.onReloadEventsFunctionsExtensions()}}},e._moveUpEventsFunctionsExtension=function(t){var n=e.props.project;t<=0||(n.swapEventsFunctionsExtensions(t,t-1),e._onProjectItemModified())},e._moveDownEventsFunctionsExtension=function(t){var n=e.props.project;t>=n.getEventsFunctionsExtensionsCount()-1||(n.swapEventsFunctionsExtensions(t,t+1),e._onProjectItemModified())},e._onEditEventsFunctionExtensionOrSeeDetails=function(t,n,r){if("gdevelop-extension-store"===n.getOriginName()){var o=n.getOriginIdentifier(),i=t[o];if(!i)return console.warn("This extension was downloaded from the store but its reference ".concat(o," couldn't be found in the store. Opening the extension in the editor...")),void e.props.onOpenEventsFunctionsExtension(r);e.setState({openedExtensionShortHeader:i,openedExtensionName:r})}else e.props.onOpenEventsFunctionsExtension(r)},e._onProjectPropertiesApplied=function(t){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),t.newName&&e.props.onChangeProjectName(t.newName),e.setState({projectPropertiesDialogOpen:!1})},e._onSearchChange=function(t){return e.setState({searchText:t})},e._onRequestSearch=function(){},e._onProjectItemModified=function(){e.forceUpdate(),e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges()},e._setProjectFirstLayout=function(t){e.props.project.setFirstLayout(t),e.forceUpdate()},e._onCreateNewExtension=function(t,n){var r=e._addEventsFunctionsExtension(t.getEventsFunctionsExtensionsCount(),n);e.props.onOpenEventsFunctionsExtension(r),e.setState({extensionsSearchDialogOpen:!1})},e}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return t.projectPropertiesDialogOpen!==this.state.projectPropertiesDialogOpen||t.projectVariablesEditorOpen!==this.state.projectVariablesEditorOpen||t.extensionsSearchDialogOpen!==this.state.extensionsSearchDialogOpen||t.openedExtensionShortHeader!==this.state.openedExtensionShortHeader||!e.freezeUpdate}},{key:"componentDidUpdate",value:function(e){!this.props.freezeUpdate&&e.freezeUpdate&&"normal"===(0,eo.BF)()&&this._searchBar&&this._searchBar.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsFunctionsExtensionsError,o=t.onReloadEventsFunctionsExtensions,i=t.onInstallExtension,a=t.shortcutMap,s=this.state,l=s.renamedItemKind,u=s.renamedItemName,d=s.searchText,p=s.openedExtensionShortHeader,h=s.openedExtensionName,g=n.getFirstLayout(),m=mr(pr(n),d),x=mr(gr(n),d),v=mr(hr(n),d),b=mr(fr(n),d);return(0,f.jsx)(c.I18n,{children:function(t){var s=t.i18n;return(0,f.jsxs)("div",{style:Qo.container,id:"project-manager",children:[(0,f.jsx)(So,{project:e.props.project,onOpenProjectProperties:e._openProjectProperties,onOpenProjectLoadingScreen:e._openProjectLoadingScreen,onOpenProjectVariables:e._openProjectVariables,onOpenResourcesDialog:e.props.onOpenResources,onOpenPlatformSpecificAssetsDialog:e.props.onOpenPlatformSpecificAssets,onOpenSearchExtensionDialog:e._openSearchExtensionDialog}),(0,f.jsx)("div",{style:Qo.searchBarContainer,children:(0,f.jsx)(ee.Z,{background:"dark",square:!0,style:Qo.searchBarPaper,children:(0,f.jsx)(pt.Z,{ref:function(t){return e._searchBar=t},value:d,onRequestSearch:e._onRequestSearch,onChange:e._onSearchChange,placeholder:{id:"Search in project"}})})}),(0,f.jsx)(Vo,{shortcutMap:a}),(0,f.jsxs)(Ge,{children:[(0,f.jsx)(Mo,{id:$o("game-settings"),primaryText:(0,f.jsx)(c.Trans,{id:"Game settings"}),renderNestedItems:function(){return[(0,f.jsx)(ze,{id:$o("game-properties"),primaryText:(0,f.jsx)(c.Trans,{id:"Properties"}),leftIcon:(0,f.jsx)(so.Z,{}),onClick:e._openProjectProperties,noPadding:!0},"properties"),(0,f.jsx)(ze,{id:$o("global-variables"),primaryText:(0,f.jsx)(c.Trans,{id:"Global variables"}),leftIcon:(0,f.jsx)(co,{}),onClick:e._openProjectVariables,noPadding:!0},"global-variables"),(0,f.jsx)(ze,{id:$o("game-icons"),primaryText:(0,f.jsx)(c.Trans,{id:"Icons and thumbnail"}),leftIcon:(0,f.jsx)(lo.Z,{}),onClick:e.props.onOpenPlatformSpecificAssets,noPadding:!0},"icons"),(0,f.jsx)(ze,{id:$o("game-resources"),primaryText:(0,f.jsx)(c.Trans,{id:"Resources"}),leftIcon:(0,f.jsx)(uo.Z,{}),onClick:e.props.onOpenResources,noPadding:!0},"resources")]}}),(0,f.jsx)(Mo,{id:$o("scenes"),primaryText:(0,f.jsx)(c.Trans,{id:"Scenes"}),renderNestedItems:function(){return[].concat((0,j.Z)(m.map((function(t,r){var o=t.getName();return(0,f.jsx)(Fo,{id:"scene-item-".concat(r),isLastItem:r===m.length-1,data:{scene:o,default:o===g?"true":void 0},leftIcon:(0,f.jsx)(Ro,{}),primaryText:o,textEndAdornment:o===g?(0,f.jsx)(De.ZP,{title:s._({id:"This scene will be used as the start scene."}),children:(0,f.jsx)(ao.Z,{color:"disabled",fontSize:"small"})}):void 0,editingName:"layout"===l&&u===o,onEdit:function(){return e.props.onOpenLayout(o)},onDelete:function(){return e.props.onDeleteLayout(t)},addLabel:{id:"Add a new scene"},onAdd:function(){return e._addLayout(r,s)},onRename:function(t){e.props.onRenameLayout(o,t),e._onEditName(null,"")},onEditName:function(){return e._onEditName("layout",o)},onCopy:function(){return e._copyLayout(t)},onCut:function(){return e._cutLayout(t)},onPaste:function(){return e._pasteLayout(r)},onDuplicate:function(){return e._duplicateLayout(t,r)},canPaste:function(){return Yt.has(Wo)},canMoveUp:0!==r,onMoveUp:function(){return e._moveUpLayout(r)},canMoveDown:r!==n.getLayoutsCount()-1,onMoveDown:function(){return e._moveDownLayout(r)},dragAndDropProps:{DragSourceAndDropTarget:qo,onBeginDrag:function(){e._draggedLayoutIndex=r},onDrop:function(){e._dropOnLayout(r)}},buildExtraMenuTemplate:function(n){return[{label:n._({id:"Edit scene properties"}),enabled:!0,click:function(){return e._onOpenLayoutProperties(t)}},{label:n._({id:"Edit scene variables"}),enabled:!0,click:function(){return e._onOpenLayoutVariables(t)}},{label:n._({id:"Set as start scene"}),enabled:o!==g,click:function(){return e._setProjectFirstLayout(o)}}]}},r)}))),(0,j.Z)(d?[]:[(0,f.jsx)(ht,{noMargin:!0,id:"add-new-scene-button",onClick:function(){return e._addLayout(n.getLayoutsCount(),s)},primaryText:(0,f.jsx)(c.Trans,{id:"Add scene"})},"add-scene")]))}}),(0,f.jsx)(Mo,{id:$o("extensions"),primaryText:(0,f.jsx)(c.Trans,{id:"Extensions"}),error:r,onRefresh:o,renderNestedItems:function(){return[].concat((0,j.Z)(x.map((function(t,r){var o=t.getName();return(0,f.jsx)(Oo,{isLastItem:r===x.length-1,eventsFunctionsExtension:t,isEditingName:"events-functions-extension"===l&&u===o,onEdit:function(n){return e._onEditEventsFunctionExtensionOrSeeDetails(n,t,o)},onDelete:function(){return e.props.onDeleteEventsFunctionsExtension(t)},onAdd:function(){e._addEventsFunctionsExtension(r,s)},onRename:function(t){e.props.onRenameEventsFunctionsExtension(o,t),e._onEditName(null,"")},onEditName:function(){return e._onEditName("events-functions-extension",o)},onCopy:function(){return e._copyEventsFunctionsExtension(t)},onCut:function(){return e._cutEventsFunctionsExtension(t)},onPaste:function(){return e._pasteEventsFunctionsExtension(r)},onDuplicate:function(){return e._duplicateEventsFunctionsExtension(t,r)},canPaste:function(){return Yt.has(Yo)},canMoveUp:0!==r,onMoveUp:function(){return e._moveUpEventsFunctionsExtension(r)},canMoveDown:r!==n.getEventsFunctionsExtensionsCount()-1,onMoveDown:function(){return e._moveDownEventsFunctionsExtension(r)},dragAndDropProps:{DragSourceAndDropTarget:Ko,onBeginDrag:function(){e._draggedExtensionIndex=r},onDrop:function(){e._dropOnExtension(r)}}},r)}))),(0,j.Z)(d?[]:[(0,f.jsx)(ht,{noMargin:!0,id:"project-manager-extension-search-or-create",kind:"search",primaryText:(0,f.jsx)(c.Trans,{id:"Create or search for new extensions"}),onClick:e._openSearchExtensionDialog},"extensions-search")]))}}),(0,f.jsx)(Mo,{id:$o("external-events"),primaryText:(0,f.jsx)(c.Trans,{id:"External events"}),renderNestedItems:function(){return[].concat((0,j.Z)(v.map((function(t,r){var o=t.getName();return(0,f.jsx)(Fo,{isLastItem:r===v.length-1,leftIcon:(0,f.jsx)(_o,{}),primaryText:o,editingName:"external-events"===l&&u===o,onEdit:function(){return e.props.onOpenExternalEvents(o)},onDelete:function(){return e.props.onDeleteExternalEvents(t)},addLabel:{id:"Add new external events"},onAdd:function(){return e._addExternalEvents(r,s)},onRename:function(t){e.props.onRenameExternalEvents(o,t),e._onEditName(null,"")},onEditName:function(){return e._onEditName("external-events",o)},onCopy:function(){return e._copyExternalEvents(t)},onCut:function(){return e._cutExternalEvents(t)},onPaste:function(){return e._pasteExternalEvents(r)},onDuplicate:function(){return e._duplicateExternalEvents(t,r)},canPaste:function(){return Yt.has(Go)},canMoveUp:0!==r,onMoveUp:function(){return e._moveUpExternalEvents(r)},canMoveDown:r!==n.getExternalEventsCount()-1,onMoveDown:function(){return e._moveDownExternalEvents(r)},dragAndDropProps:{DragSourceAndDropTarget:Jo,onBeginDrag:function(){e._draggedExternalEventsIndex=r},onDrop:function(){e._dropOnExternalEvents(r)}}},r)}))),(0,j.Z)(d?[]:[(0,f.jsx)(ht,{noMargin:!0,primaryText:(0,f.jsx)(c.Trans,{id:"Add external events"}),onClick:function(){return e._addExternalEvents(n.getExternalEventsCount(),s)}},"add-external-events")]))}}),(0,f.jsx)(Mo,{id:$o("external-layouts"),primaryText:(0,f.jsx)(c.Trans,{id:"External layouts"}),renderNestedItems:function(){return[].concat((0,j.Z)(b.map((function(t,r){var o=t.getName();return(0,f.jsx)(Fo,{isLastItem:r===b.length-1,leftIcon:(0,f.jsx)(Bo,{}),primaryText:o,editingName:"external-layout"===l&&u===o,onEdit:function(){return e.props.onOpenExternalLayout(o)},onDelete:function(){return e.props.onDeleteExternalLayout(t)},addLabel:{id:"Add a new external layout"},onAdd:function(){return e._addExternalLayout(r,s)},onRename:function(t){e.props.onRenameExternalLayout(o,t),e._onEditName(null,"")},onEditName:function(){return e._onEditName("external-layout",o)},onCopy:function(){return e._copyExternalLayout(t)},onCut:function(){return e._cutExternalLayout(t)},onPaste:function(){return e._pasteExternalLayout(r)},onDuplicate:function(){return e._duplicateExternalLayout(t,r)},canPaste:function(){return Yt.has(zo)},canMoveUp:0!==r,onMoveUp:function(){return e._moveUpExternalLayout(r)},canMoveDown:r!==n.getExternalLayoutsCount()-1,onMoveDown:function(){return e._moveDownExternalLayout(r)},dragAndDropProps:{DragSourceAndDropTarget:Xo,onBeginDrag:function(){e._draggedExternalLayoutIndex=r},onDrop:function(){e._dropOnExternalLayout(r)}}},r)}))),(0,j.Z)(d?[]:[(0,f.jsx)(ht,{noMargin:!0,primaryText:(0,f.jsx)(c.Trans,{id:"Add external layout"}),onClick:function(){return e._addExternalLayout(n.getExternalLayoutsCount(),s)}},"add-external-layout")]))}})]}),e.state.projectVariablesEditorOpen&&(0,f.jsx)(Gn,{title:(0,f.jsx)(c.Trans,{id:"Global Variables"}),open:!0,variablesContainer:n.getVariables(),onCancel:function(){return e.setState({projectVariablesEditorOpen:!1})},onApply:function(){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),e.setState({projectVariablesEditorOpen:!1})},emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first global variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"These variables hold additional information on a project."}),helpPagePath:"/all-features/variables/global-variables",hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onComputeAllVariableNames:function(){return ko.findAllGlobalVariables(n.getCurrentPlatform(),n)}}),e.state.projectPropertiesDialogOpen&&(0,f.jsx)(dr,{open:!0,initialTab:e.state.projectPropertiesDialogInitialTab,project:n,onClose:function(){return e.setState({projectPropertiesDialogOpen:!1})},onApply:e.props.onSaveProjectProperties,onPropertiesApplied:e._onProjectPropertiesApplied,resourceManagementProps:e.props.resourceManagementProps,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,i18n:s}),!!e.state.editedPropertiesLayout&&(0,f.jsx)(Co,{open:!0,layout:e.state.editedPropertiesLayout,project:e.props.project,onApply:function(){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),e._onOpenLayoutProperties(null)},onClose:function(){return e._onOpenLayoutProperties(null)},onEditVariables:function(){e._onOpenLayoutVariables(e.state.editedPropertiesLayout),e._onOpenLayoutProperties(null)},resourceManagementProps:e.props.resourceManagementProps}),!!e.state.editedVariablesLayout&&(0,f.jsx)(wo,{open:!0,project:n,layout:e.state.editedVariablesLayout,onClose:function(){return e._onOpenLayoutVariables(null)},onApply:function(){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),e._onOpenLayoutVariables(null)},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps}),e.state.extensionsSearchDialogOpen&&(0,f.jsx)(io,{project:n,onClose:function(){return e.setState({extensionsSearchDialogOpen:!1})},onInstallExtension:i,onCreateNew:function(){e._onCreateNewExtension(n,s)}}),p&&h&&(0,f.jsx)(Po,{project:n,onClose:function(){return e.setState({openedExtensionShortHeader:null,openedExtensionName:null})},onOpenEventsFunctionsExtension:e.props.onOpenEventsFunctionsExtension,extensionShortHeader:p,extensionName:h,onInstallExtension:i})]})}})}}]),n}(u.Component),ti=n(72410),ni=(0,n(20049).Z)("jimp"),ri=function(e,t,n){var r=n.width,o=n.height,i=n.transparentBorderSize,a=ni();return a?a.read(e).then((function(e){return i?new Promise((function(n,s){new a(r,o,(function(a,l){a&&s(a),n(l.composite(e.contain(r-2*i,o-2*i),i,i).write(t))}))})):e.contain(r,o).write(t)})).then((function(){return!0})).catch((function(e){return console.error(e),!1})):Promise.resolve(!1)},oi=q()("path"),ii=n.g.gd,ai=[512],si=[192,144,96,72,48,36],li=[1024,180,167,152,144,120,114,100,87,80,76,72,60,58,57,50,40,29,20],ci=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(e){var r;return(0,st.Z)(this,n),(r=t.call(this,e))._generateFromFile=function(){var e=r.props,t=e.project,n=e.resourceManagementProps,o=n.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){return e.name.startsWith("local-file-opener")}))[0];if(!o)throw new Error("No supported resource source - only local files are supported.");n.onChooseResource({initialSourceName:o.name,multiSelection:!1,resourceKind:"image"}).then((function(e){if(e.length&&oi){var n=t.getResourcesManager(),o=oi.dirname(t.getProjectFile()),i=oi.resolve(o,e[0].getFile());e.forEach((function(e){return e.delete()})),Promise.all([].concat((0,j.Z)(ai.map((function(e){return ri(i,oi.join(o,"desktop-icon-".concat(e,".png")),{width:e,height:e})}))),(0,j.Z)(si.map((function(e){return ri(i,oi.join(o,"android-icon-".concat(e,".png")),{width:e,height:e})}))),[ri(i,oi.join(o,"android-windowSplashScreenAnimatedIcon.png"),{width:864,height:864,transparentBorderSize:144})],(0,j.Z)(li.map((function(e){return ri(i,oi.join(o,"ios-icon-".concat(e,".png")),{width:e,height:e})}))))).then((function(e){if(-1===e.indexOf(!1)){var o=[].concat((0,j.Z)(ai.map((function(e){return"desktop-icon-".concat(e,".png")}))),(0,j.Z)(si.map((function(e){return"android-icon-".concat(e,".png")}))),["android-windowSplashScreenAnimatedIcon.png"],(0,j.Z)(li.map((function(e){return"ios-icon-".concat(e,".png")}))));o.forEach((function(e){if(n.hasResource(e))n.getResource(e).setFile(e);else{var t=new ii.ImageResource;t.setFile(e),t.setName(e),n.addResource(t),t.delete()}})),ti.Z.burstUrlsCacheForResources(t,o),setTimeout((function(){r.setState({desktopIconResourceNames:ai.map((function(e){return"desktop-icon-".concat(e,".png")})),androidIconResourceNames:si.map((function(e){return"android-icon-".concat(e,".png")})),androidWindowSplashScreenAnimatedIconResourceName:"android-windowSplashScreenAnimatedIcon.png",iosIconResourceNames:li.map((function(e){return"ios-icon-".concat(e,".png")}))})}),200)}else(0,Xr.gR)({message:"Some icons could not be generated!",rawError:void 0,errorId:"icon-generation-error",doNotReport:!0})}))}}))},r.onApply=function(){var e=r.props.project,t=r.state,n=t.thumbnailResourceName,o=t.desktopIconResourceNames,i=t.androidIconResourceNames,a=t.androidWindowSplashScreenAnimatedIconResourceName,s=t.iosIconResourceNames,l=e.getPlatformSpecificAssets();l.set("liluo","thumbnail",n),ai.forEach((function(e,t){l.set("desktop","icon-".concat(e),o[t])})),si.forEach((function(e,t){l.set("android","icon-".concat(e),i[t])})),l.set("android","windowSplashScreenAnimatedIcon",a),li.forEach((function(e,t){l.set("ios","icon-".concat(e),s[t])})),r.props.onApply()},r.state=r._loadFrom(e.project),r}return(0,lt.Z)(n,[{key:"_loadFrom",value:function(e){var t=e.getPlatformSpecificAssets();return{thumbnailResourceName:t.get("liluo","thumbnail"),desktopIconResourceNames:ai.map((function(e){return t.get("desktop","icon-".concat(e))})),androidIconResourceNames:si.map((function(e){return t.get("android","icon-".concat(e))})),androidWindowSplashScreenAnimatedIconResourceName:e.getPlatformSpecificAssets().get("android","windowSplashScreenAnimatedIcon"),iosIconResourceNames:li.map((function(e){return t.get("ios","icon-".concat(e))})),displayGamesPlatformThumbnailWarning:!1}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(!this.props.open&&e.open||e.open&&this.props.project!==e.project)&&this.setState(this._loadFrom(e.project))}},{key:"render",value:function(){var e=this,t=[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:this.props.onClose},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:this.onApply},"apply")],n=this.props,r=n.project,o=n.resourceManagementProps,i=this.state,a=i.thumbnailResourceName,s=i.desktopIconResourceNames,l=i.androidIconResourceNames,u=i.androidWindowSplashScreenAnimatedIconResourceName,d=i.iosIconResourceNames,p=i.displayGamesPlatformThumbnailWarning;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Project icons"}),actions:t,open:this.props.open,onRequestClose:this.props.onClose,onApply:this.onApply,children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(L.x1,{justifyContent:"center",noMargin:!0,children:ni()?(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Generate icons from a file"}),onClick:this._generateFromFile}):(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Download SpeXEngine desktop version to generate the Android and iOS icons of your game."})})}),(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"games.engine.spacexpanse.org thumbnail"})}),(0,f.jsx)(tr.Z,{floatingLabelText:"games.engine.spacexpanse.org thumbnail (1920x1080 px)",project:r,resourceManagementProps:o,resourceKind:"image",resourceName:a,onChange:function(t){e.setState({thumbnailResourceName:t,displayGamesPlatformThumbnailWarning:t!==e.state.thumbnailResourceName})}}),p?(0,f.jsx)(L.x1,{children:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:"You're about to change the thumbnail displayed on games.engine.spacexpanse.org for your game. Once you have applied changes here, you will then need to publish a new version of your game on games.engine.spacexpanse.org so that this new thumbnail is used."})})}):null,(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"Desktop (Windows, macOS and Linux) icon"})}),ai.map((function(t,n){return(0,f.jsx)(tr.Z,{floatingLabelText:"Desktop icon (".concat(t,"x").concat(t," px)"),project:r,resourceManagementProps:o,resourceKind:"image",resourceName:s[n],onChange:function(t){var r=(0,j.Z)(s);r[n]=t,e.setState({desktopIconResourceNames:r})}},t)})),(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"Android icons and Android 12+ splashscreen"})}),(0,f.jsx)(c.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(tr.Z,{floatingLabelText:"Android 12+ splashscreen icon (576x576 px)",project:r,resourceManagementProps:o,resourceKind:"image",resourceName:u,onChange:function(t){e.setState({androidWindowSplashScreenAnimatedIconResourceName:t})},helperMarkdownText:n._({id:"The image should be at least 864x864px, and the logo must fit [within a circle of 576px](https://developer.android.com/guide/topics/ui/splash-screen#splash_screen_dimensions). Transparent borders are automatically added when generated to help ensuring this."})})}}),si.map((function(t,n){return(0,f.jsx)(tr.Z,{floatingLabelText:"Android icon (".concat(t,"x").concat(t," px)"),project:r,resourceManagementProps:o,resourceKind:"image",resourceName:l[n],onChange:function(t){var r=(0,j.Z)(l);r[n]=t,e.setState({androidIconResourceNames:r})}},t)})),(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"iOS (iPhone and iPad) icons"})}),li.map((function(t,n){return(0,f.jsx)(tr.Z,{floatingLabelText:"iOS icon (".concat(t,"x").concat(t," px)"),project:r,resourceManagementProps:o,resourceKind:"image",resourceName:d[n],onChange:function(t){var r=(0,j.Z)(d);r[n]=t,e.setState({iosIconResourceNames:r})}},t)}))]})})}}]),n}(u.Component),ui=n(37477),di=n(97865),pi=n(66789),hi={dialogContent:{padding:10,overflow:"hidden",display:"flex",flexDirection:"row"}},fi={enter:0,exit:150},gi=function(e){var t=null===e.progress||void 0===e.progress;return(0,f.jsx)(c.I18n,{children:function(n){var r=n.i18n;return(0,f.jsx)(ui.Z,{open:e.show,transitionDuration:fi,children:(0,f.jsx)(di.Z,{style:hi.dialogContent,children:(0,f.jsx)("div",{style:{width:e.message?250:void 0},children:(0,f.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsx)(pi.Z,{size:50,disableShrink:t,value:t?void 0:e.progress,variant:t?"indeterminate":"determinate"}),e.message&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{noMargin:!0,align:"center",children:r._(e.message)})]})]})})})})}})},mi=n(42132),xi=n(12924),vi=n(38295),bi=n(23198),ji=n(84361),Ci={appBar:{height:32,minHeight:32},toolbar:{height:32,minHeight:32,paddingLeft:15,paddingRight:15},title:{fontSize:"15px",flexGrow:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},yi=function(e){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(V.pi,{backgroundColor:"transparent"}),(0,f.jsx)(mi.Z,{position:"static",style:Ci.appBar,className:"safe-area-aware-top-margin",color:"primary",elevation:0,children:(0,f.jsxs)(xi.Z,{style:Ci.toolbar,children:[(0,f.jsx)(De.ZP,{title:e.title,placement:"bottom",enterDelay:ji.K,children:(0,f.jsx)(vi.Z,{variant:"h6",style:Ci.title,children:e.title})}),(0,f.jsx)(Pe.Z,{onClick:e.onClose,edge:"end",color:"inherit",size:"small",id:"".concat(e.id,"-close"),children:(0,f.jsx)(bi.Z,{})})]})})]})},Zi=n(48409),ki=q()("electron"),wi=q()("@electron/remote"),Ti=u.memo((function(e){var t=e.shouldPrompt,n=e.i18n,r=e.language,o=e.hasUnsavedChanges,i=u.useRef(!0);return u.useEffect((function(){if(!F.ZP.isDev()){var e=[n._({id:"Are you sure you want to quit SpeXEngine?"}),o?n._({id:"Any unsaved changes in the project will be lost."}):""].filter(Boolean).join("\n");ki?window.onbeforeunload=function(n){if(i.current&&t)return setTimeout((function(){F.ZP.showConfirmDialog(e)&&(i.current=!1,wi.getCurrentWindow().close())}),10),n.returnValue=!0,!1}:window&&!(0,Zi._F)()&&(window.onbeforeunload=t?function(){return e}:null)}}),[t,n,r,o]),null})),Ei=n(48853),Si=function(e){var t=e.onEditProfile,n=e.onChangeEmail,r=e.authenticatedUser,o=r.profile,a=r.firebaseUser,s=u.useCallback((function(){r.onOpenEmailVerificationDialog({sendEmailAutomatically:!0,showSendEmailButton:!1})}),[r]);return a&&o?(0,f.jsxs)(C.ak,{noMargin:!0,children:[a&&!a.emailVerified&&(0,f.jsx)(we.Z,{kind:"info",renderRightButton:function(){return(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Send it again"}),onClick:s,primary:!0})},children:(0,f.jsx)(c.Trans,{id:"You are missing out on asset store discounts and other benefits! Verify your email address. Didn't receive it?"})}),(0,f.jsx)(Ei.Z,{profile:r.profile?(0,i.Z)((0,i.Z)({},r.profile),{},{email:a.email}):null,isAuthenticatedUserProfile:!0,onChangeEmail:n,onEditProfile:t})]}):(0,f.jsx)(Qe.Z,{})},Pi=n(5880),Ii={diamondIcon:{width:90,height:90,flexShrink:0,objectFit:"contain"},paper:{paddingRight:6}},Di=function(e){var t=e.subscription,n=e.isManageSubscriptionLoading,r=e.onManageSubscription,o=e.simulateNativeMobileApp,i=u.useContext(nr.o).openSubscriptionDialog,a=(0,ft.Z)().showAlert,s=u.useMemo((function(){return t?(0,ar.Hm)().concat((0,ar.oI)()).find((function(e){return t.planId===e.planId})):null}),[t]),l=t&&t.redemptionCodeValidUntil,d=!!l&&l<Date.now();if(!t)return(0,f.jsx)(Qe.Z,{});var p=(0,Zi._F)()||o;return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{alignItems:"center",children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"My online services subscription"})})}),s&&s.planId&&!d?p?(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Manage subscription"}),primary:!0,onClick:function(){(0,ar.rq)(t)||a({title:{id:"Subscription outside the app store"},message:{id:"The subscription of this account comes from outside the app store. Connect with your account on engine.spacexpanse.org from your web-browser to manage it."}})}}):(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(Pi.Z,{plan:s,hidePrice:!!l||(0,ar.rq)(t)||!!t.benefitsFromEducationPlan,actions:t.benefitsFromEducationPlan?null:[l||(0,ar.rq)(t)||(0,ar.mX)(t)?null:(0,f.jsx)(_.Z,{label:(0,f.jsx)(Mr.Z,{isLoading:n,children:(0,f.jsx)(c.Trans,{id:"Manage online"})}),primary:!0,onClick:r,disabled:n},"manage-online"),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Manage subscription"}),primary:!0,onClick:function(){return i({reason:"Consult profile"})},disabled:n},"manage")].filter(Boolean),isHighlighted:!1,background:"medium"}),!!l&&(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(ee.Z,{background:"dark",variant:"outlined",children:(0,f.jsxs)(C.pJ,{alignItems:"center",children:[(0,f.jsx)("img",{src:"res/diamond.svg",style:Ii.diamondIcon,alt:""}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Thanks to the redemption code you've used, you have this subscription enabled until {0}.",values:{0:n.date(t.redemptionCodeValidUntil)}})})})]})})}})]}):(0,f.jsx)(ee.Z,{background:"medium",variant:"outlined",style:Ii.paper,children:(0,f.jsxs)(C.pJ,{alignItems:"center",children:[(0,f.jsx)("img",{src:"res/diamond.svg",style:Ii.diamondIcon,alt:""}),(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)(L.x1,{children:d?(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Oh no! Your subscription from the redemption code has expired. You can renew it by redeeming a new code or getting a new subscription."})}):p?(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Unlock full access to SpeXEngine to create without limits!"})})}):(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Unlock more one-click exports, cloud projects, leaderboards and remove the SpeXEngine splashscreen."})}),(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"With a subscription, you\u2019re also supporting the improvement of SpeXEngine."})})]})}),(0,f.jsx)(L.x1,{justifyContent:"flex-end",children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Choose a subscription"}),primary:!0,onClick:function(){return i({reason:"Consult profile"})}})})]})]})})]})},Ai=n(69197),Li=n(1589),Mi=function(e){var t=e.fullName,n=e.previewIconUrl,r=e.shortDescription;return(0,f.jsxs)(L.x1,{children:[n&&(0,f.jsx)(kr.q,{alt:t,src:n,size:64}),(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:t}),(0,f.jsx)(J.Z,{noMargin:!0,size:"body2",children:r})]})]})},Fi=function(e){var t=e.examples;return e.exampleError?(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{alignItems:"center",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Error retrieving the examples"})})})}):(0,f.jsxs)(vo.UQ,{children:[(0,f.jsx)(vo._m,{children:(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,children:(0,f.jsx)(c.Trans,{id:"Examples ({0})",values:{0:t.length}})})}),(0,f.jsx)(vo.X1,{disableGutters:!0,children:0===t.length?(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"You haven't contributed any examples"})}):(0,f.jsx)(L.sg,{children:t.map((function(e){return(0,f.jsx)(Mi,{shortDescription:e.shortDescription,fullName:e.name,previewIconUrl:e.previewImageUrls?e.previewImageUrls[0]:""},e.name)}))})})]})},Oi=function(e){var t=e.extensions;return e.extensionError?(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{alignItems:"center",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Error retrieving the extensions"})})})}):(0,f.jsxs)(vo.UQ,{children:[(0,f.jsx)(vo._m,{children:(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,children:(0,f.jsx)(c.Trans,{id:"Extensions ({0})",values:{0:t.length}})})}),(0,f.jsx)(vo.X1,{disableGutters:!0,children:0===t.length?(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"You haven't contributed any extensions"})}):(0,f.jsx)(L.sg,{children:t.map((function(e){return(0,f.jsx)(Mi,{shortDescription:e.shortDescription,fullName:e.fullName,previewIconUrl:e.previewIconUrl},e.name)}))})})]})},Ri=function(e){e.examples;return(0,f.jsx)(vo.UQ,{disabled:!0,children:(0,f.jsx)(vo._m,{children:(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,children:(0,f.jsx)(c.Trans,{id:"Assets (coming soon!)"})})})})},Bi=function(e){var t=e.userId,n=u.useState(null),r=(0,a.Z)(n,2),i=r[0],s=r[1],d=u.useState(null),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useState(null),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useState(null),C=(0,a.Z)(j,2),y=C[0],Z=C[1],k=u.useCallback((function(){(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Lr.y7)(t);case 5:n=e.sent,s(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading extensions:",e.t0),b(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[t]);u.useEffect((function(){k()}),[k]);var w=u.useCallback((function(){(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Ai.Ex)(t);case 5:n=e.sent,g(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading examples:",e.t0),Z(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[t]);return u.useEffect((function(){w()}),[w]),(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{alignItems:"center",children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Contributions"})})}),h&&i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Oi,{extensions:i,extensionError:v}),(0,f.jsx)(Fi,{examples:h,exampleError:y}),(0,f.jsx)(Ri,{examples:h}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"Missing some contributions? If you are the author, create a Pull Request on the corresponding GitHub repository after adding your username in the authors of the example or the extension - or directly ask the original author to add your username."})})})]}):(0,f.jsx)(Qe.Z,{})]})},_i=n(64881),Ni=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16667 7.66663C5.07462 7.66663 5 7.74124 5 7.83329V11.5C5 11.9602 5.37309 12.3333 5.83333 12.3333H11.5C11.9603 12.3333 12.3333 11.9602 12.3333 11.5V7.83329C12.3333 7.74124 12.2587 7.66663 12.1667 7.66663H5.16667ZM4 7.83329C4 7.18894 4.52234 6.66663 5.16667 6.66663H12.1667C12.811 6.66663 13.3333 7.18895 13.3333 7.83329V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H5.83333C4.82082 13.3333 4 12.5125 4 11.5V7.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66667 3.66663C7.70522 3.66663 7.16755 3.97865 6.85548 4.29844C6.59324 4.56717 6.45446 4.92749 6.38761 5.38368C6.3293 5.7816 6.33095 6.20398 6.33271 6.65637C6.33302 6.73503 6.33333 6.81459 6.33333 6.89509V6.99996C6.33333 7.2761 6.10948 7.49996 5.83333 7.49996C5.55719 7.49996 5.33333 7.2761 5.33333 6.99996V6.89509C5.33333 6.82347 5.33298 6.74973 5.33261 6.67429C5.33045 6.22589 5.328 5.71754 5.39817 5.23869C5.48174 4.66839 5.67512 4.07618 6.1398 3.60002C6.65683 3.0702 7.46078 2.66663 8.66667 2.66663C9.87255 2.66663 10.6765 3.0702 11.1935 3.60002C11.6582 4.07619 11.8516 4.66838 11.9351 5.23869C12.0053 5.71755 12.0029 6.22593 12.0007 6.67435C12.0004 6.74977 12 6.82349 12 6.89509V6.99996C12 7.2761 11.7761 7.49996 11.5 7.49996C11.2239 7.49996 11 7.2761 11 6.99996V6.89509C11 6.81462 11.0003 6.73508 11.0006 6.65644C11.0024 6.20403 11.004 5.78163 10.9457 5.38369C10.8789 4.9275 10.7401 4.56717 10.4778 4.29844C10.1658 3.97866 9.62811 3.66663 8.66667 3.66663Z",fill:"currentColor"})]}))})),Ui=n(42061),Hi=function(e){return(0,f.jsx)(Ui.Z,(0,i.Z)({color:"secondary",variant:"dot"},e))},Vi={achievementsContainer:{maxHeight:250},lockedAchievement:{opacity:.4},unlockedAchievement:{}},Wi=function(e){var t=e.badges,n=e.achievements,r=e.displayUnclaimedAchievements,o=e.displayNotifications,s=u.useState([]),l=(0,a.Z)(s,2),d=l[0],p=l[1];return u.useEffect((function(){var e=t.reduce((function(e,t){return e[t.achievementId]=t,e}),{}),o=n.reduce((function(t,n){var o=e[n.id],a=!!o;return(a||!a&&r)&&t.push((0,i.Z)((0,i.Z)({},n),{},{seen:a?o.seen:void 0,unlockedAt:a?(0,_i.Z)(o.unlockedAt):null})),t}),[]);o.sort(ro.tP),p(o)}),[t,n,r]),(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(Ot.Z,{style:Vi.achievementsContainer,children:d.map((function(e){return(0,f.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,f.jsxs)(L.sg,{justifyContent:"center",alignItems:"flex-start",children:[(0,f.jsx)(Hi,{invisible:!(o&&!1===e.seen),children:(0,f.jsx)(J.Z,{noMargin:!0,size:"sub-title",style:e.unlockedAt?Vi.unlockedAchievement:Vi.lockedAchievement,children:e.name})}),r&&(0,f.jsx)(J.Z,{noMargin:!0,style:e.unlockedAt?Vi.unlockedAchievement:Vi.lockedAchievement,size:"body2",children:e.description})]}),(0,f.jsx)(L.sg,{children:e.unlockedAt?(0,f.jsx)(J.Z,{children:t.date(e.unlockedAt)}):(0,f.jsx)(Ni,{style:Vi.lockedAchievement})})]},e.id)}))})}})})},zi=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 528.9 511.62",children:(0,f.jsx)("g",{id:"Calque_2","data-name":"Calque 2",children:(0,f.jsxs)("g",{id:"Calque_4","data-name":"Calque 4",children:[(0,f.jsx)("path",{d:"M144 60.33S80.75-18.31 35.82 21s-17.56 93.4-17.56 93.4 32.3 82.85 35.81 109.53S77 279.4 77 279.4s16.42 21.77 52.94 13.35 66-34.41 66-34.41ZM385 60.33S448.14-18.31 493.08 21s17.55 93.39 17.55 93.39-32.29 82.85-35.81 109.53-22.9 55.47-22.9 55.47-16.42 21.78-52.92 13.36-66-34.41-66-34.41Z",style:{fill:"none",stroke:"currentColor",strokeWidth:"20px",strokeMiterlimit:10}}),(0,f.jsx)("path",{d:"M395.53 429.67H352s-46.34-34.41-44.94-61.09C455.92 297 434.85 63.14 434.85 63.14H88.1S67 297 215.89 368.58c1.41 26.68-44.89 61.09-44.89 61.09h-43.58v24.57h-23.87v56.88h315.86v-56.88h-23.88Z",style:{fill:"inherit",strokeMiterlimit:10}})]})})}))})),Gi={summary:{textAlign:"center"},leftContainer:{flex:1,margin:"20px",display:"flex",alignItems:"center",justifyContent:"center"},rightContainer:{flex:2}},Yi=function(e){var t=e.badges,n=e.displayUnclaimedAchievements,r=e.displayNotifications,s=(0,u.useState)(null),d=(0,a.Z)(s,2),p=d[0],h=d[1],g=(0,u.useState)(!1),m=(0,a.Z)(g,2),x=m[0],v=m[1],b="small"===(0,T.L)(),j=(0,u.useCallback)((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!1),e.next=4,(0,ro.jy)();case 4:t=e.sent,h(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error when fetching achievements: ".concat(e.t0)),v(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]);return(0,u.useEffect)((function(){j()}),[j]),(0,f.jsx)(C.ep,{children:x?(0,f.jsx)(L.x1,{children:(0,f.jsxs)(we.Z,{kind:"error",children:[(0,f.jsx)(c.Trans,{id:"Unable to display your achievements for now."})," ",(0,f.jsx)(c.Trans,{id:"Please check your internet connection or try again later."})]})}):t&&p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:Gi.leftContainer,children:(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},Gi.summary),{},{padding:b?"0 20":"20"}),children:[(0,f.jsx)(zi,{color:"secondary",fontSize:"large"}),(0,f.jsxs)(J.Z,{size:"block-title",children:[(0,f.jsx)(c.Trans,{id:"{0}/{1} achievements",values:{0:t.length,1:p.length}}),0===t.length&&(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(c.Trans,{id:"(yet!)"})]})]})]})}),t.length>0&&(0,f.jsx)("div",{style:Gi.rightContainer,children:t&&p&&(0,f.jsx)(Wi,{badges:t,achievements:p,displayUnclaimedAchievements:n,displayNotifications:r})})]}):(0,f.jsx)(Qe.Z,{})})},qi=n(16999),Xi=n(33028),Ji=n(20851),Ki=n(1879),Qi=n(65911),$i=n(75087),ea=n(78966),ta=function(e){var t=e.game,n=e.onClose,r=u.useState(!1),o=(0,a.Z)(r,2),i=o[0],s=o[1],l=(0,qi.IH)(t);return l?(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Share your game"}),open:!0,id:"game-card-share-dialog",actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),onClick:n},"close")],onRequestClose:n,children:[(0,f.jsxs)(L.sg,{children:[(0,f.jsx)($i.Z,{url:l}),navigator.share?(0,f.jsx)(ea.Z,{url:l}):(0,f.jsx)(Qi.Z,{url:l})]}),i&&(0,f.jsx)(we.Z,{kind:"error",onHide:function(){return s(!1)},children:(0,f.jsx)(c.Trans,{id:"An error occurred while generating the game url with the currently set game slug."})})]}):null},na=n(87284),ra=n(83689),oa={discoverable:{true:{id:"You are about to make this game discoverable on games.engine.spacexpanse.org categories pages. Do you want to continue?"},false:{id:"You are about to hide this game from games.engine.spacexpanse.org categories pages. Do you want to continue?"}},acceptsBuildComments:{true:{id:"You are about to activate a feedback banner on all builds of this game. By doing this you're allowing feedback from any player who has access to your games.engine.spacexpanse.org build URLs. Do you want to continue?"},false:{id:"You are about to de-activate the feedback banner on all your games.engine.spacexpanse.org build pages. Do you want to continue ?"}},acceptsGameComments:{true:{id:"You are about to activate a feedback banner on your games.engine.spacexpanse.org game page. By doing this you will receive feedback from any games.engine.spacexpanse.org visitor. Do you want to continue?"},false:{id:"You are about to de-activate the feedback banner on your games.engine.spacexpanse.org game page. Do you want to continue ?"}}},ia=function(e){var t=e.game,n=e.isCurrentGame,i=e.onOpenGameManager,s=e.onUpdateGame,d=function(){var e=(0,qi.IH)(t);e&&F.ZP.openExternalURL(e)},p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useState(null),v=(0,a.Z)(x,2),b=v[0],j=v[1],y=u.useState(!1),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=u.useContext(ir.ZP),S=T.getAuthorizationHeader,P=T.profile,I=function(){var e=(0,o.Z)(l().mark((function e(n,o,i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:if(F.ZP.showConfirmDialog(n._(oa[o][i.toString()]))){e.next=5;break}return e.abrupt("return");case 5:return j(o),e.prev=6,e.next=9,(0,qi.Bi)(S,P.id,t.id,(0,r.Z)({},o,i));case 9:return e.next=11,s();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("Unable to update property ".concat(o),e.t0),(0,Xr.gR)({message:n._({id:"Unable to update game."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-dashboard-update-game-error"});case 17:j(null);case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(){var e=(0,o.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F.ZP.showConfirmDialog(n._({id:"Are you sure you want to unregister this game?"})+"\n\n"+n._({id:"It will disappear from your games dashboard and you won't get access to analytics, unless you register it again."}))){e.next=3;break}return e.abrupt("return");case 3:if(P){e.next=5;break}return e.abrupt("return");case 5:return r=P.id,w(!0),e.prev=7,e.next=10,(0,qi.TT)(S,r,t.id);case 10:return e.next=12,s();case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),console.error("Unable to delete the game:",e.t0),e.t0.response&&e.t0.response.data&&"game-deletion/leaderboards-exist"===e.t0.response.data.code?(0,Xr.gR)({message:n._({id:"You cannot unregister a game that has active leaderboards. To delete them, go in the Leaderboards tab, and delete them one by one."}),rawError:e.t0,errorId:"game-dashboard-unregister-game-active-leaderboards-error"}):(0,Xr.gR)({message:n._({id:"Unable to delete the game."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-dashboard-unregister-game-active-leaderboards-error"}),w(!1);case 19:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(na.Z,{background:n?"dark":"medium",cardCornerAction:(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",disabled:k,children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Game details"}),click:function(){return i("details")}},{label:e._({id:"Game builds"}),click:function(){return i("builds")}},{label:e._({id:"Game feedbacks"}),click:function(){return i("feedback")}},{label:e._({id:"Game analytics"}),click:function(){return i("analytics")}},{label:e._({id:"Game leaderboards"}),click:function(){return i("leaderboards")}},{type:"separator"},{label:e._({id:"Unregister game"}),click:function(){D(e)}}]}}),header:(0,f.jsxs)(L.x1,{children:[t.publicWebBuildId&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{size:"body2",noMargin:!0,displayInlineAsSpan:!0,children:t.discoverable?(0,f.jsx)(c.Trans,{id:"Public on games.engine.spacexpanse.org"}):(0,f.jsx)(c.Trans,{id:"Not visible on games.engine.spacexpanse.org"})}),(0,f.jsx)(L.LZ,{})]}),(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"Created on {0}",values:{0:r.date(1e3*t.createdAt)}})})]}),children:(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,alignItems:"center",children:(0,f.jsx)(Ki.J,{gameName:t.gameName,thumbnailUrl:t.thumbnailUrl,background:n?"medium":"light"})}),(0,f.jsx)(L.LZ,{}),(0,f.jsxs)(L.sg,{expand:!0,justifyContent:"space-between",children:[(0,f.jsxs)(C.ep,{noMargin:!0,alignItems:"flex-start",children:[(0,f.jsx)(Ji.Z,{title:t.gameName,subheader:n&&(0,f.jsx)(Xi.Z,{size:"small",label:(0,f.jsx)(c.Trans,{id:"Currently edited"}),color:"primary"})}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsxs)(C.ep,{justifyContent:"flex-end",noColumnMargin:!0,children:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Manage game"}),onClick:function(){return i("details")}}),(0,f.jsxs)(C.pJ,{noMargin:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Open in browser"}),onClick:d,primary:!0,disabled:!t.publicWebBuildId||k})}),(0,f.jsx)(A.Z,{size:"small",disabled:!t.publicWebBuildId||k,onClick:function(){return m(!0)},tooltip:{id:"Share"},children:(0,f.jsx)(ra.Z,{})})]})]})})]}),(0,f.jsxs)(L.sg,{noMargin:!0,justifyContent:"flex-start",children:[(0,f.jsx)(H.Z,{labelPosition:"left",onToggle:function(){I(r,"discoverable",!t.discoverable)},toggled:!!t.discoverable,label:(0,f.jsx)(c.Trans,{id:"Make discoverable on games.engine.spacexpanse.org"}),disabled:"discoverable"===b||k}),(0,f.jsx)(H.Z,{labelPosition:"left",onToggle:function(){I(r,"acceptsGameComments",!t.acceptsGameComments)},toggled:!!t.acceptsGameComments,label:(0,f.jsx)(c.Trans,{id:"Show feedback banner on games.engine.spacexpanse.org game page"}),disabled:"acceptsGameComments"===b||k}),(0,f.jsx)(H.Z,{labelPosition:"left",onToggle:function(){I(r,"acceptsBuildComments",!t.acceptsBuildComments)},toggled:!!t.acceptsBuildComments,label:(0,f.jsx)(c.Trans,{id:"Ask for feedback on all build pages"}),disabled:"acceptsBuildComments"===b||k})]})]})]})},t.id),g&&(0,f.jsx)(ta,{game:t,onClose:function(){return m(!1)}})]})}})},aa=n(40790),sa=n(60149),la=n(78196),ca=n(40470),ua=n(37579),da=n(86128),pa=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{children:(0,f.jsx)("path",{d:"M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5M19 19C19 19.6 18.6 20 18 20H6C5.4 20 5 19.6 5 19V18H19V19Z"})}))})),ha=n(46538),fa=n(29858),ga=n(36052),ma=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33374 4.49996C3.33374 3.48744 4.15455 2.66663 5.16707 2.66663H9.33374C9.46635 2.66663 9.59353 2.7193 9.68729 2.81307L11.0206 4.14641C11.2159 4.34167 11.2159 4.65825 11.0206 4.85351C10.8254 5.04877 10.5088 5.04877 10.3135 4.85351L9.12663 3.66663H5.16707C4.70684 3.66663 4.33374 4.03972 4.33374 4.49996V11.5C4.33374 11.9602 4.70683 12.3333 5.16707 12.3333H10.8337C11.294 12.3333 11.6671 11.9602 11.6671 11.5V10.3333C11.6671 10.0572 11.8909 9.83329 12.1671 9.83329C12.4432 9.83329 12.6671 10.0572 12.6671 10.3333V11.5C12.6671 12.5125 11.8463 13.3333 10.8337 13.3333H5.16707C4.15456 13.3333 3.33374 12.5125 3.33374 11.5V4.49996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33374 2.83329C9.60988 2.83329 9.83374 3.05715 9.83374 3.33329V5.33329C9.83374 5.60944 9.60988 5.83329 9.33374 5.83329C9.0576 5.83329 8.83374 5.60944 8.83374 5.33329V3.33329C8.83374 3.05715 9.0576 2.83329 9.33374 2.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6064 3.78754C12.9898 3.4041 13.6115 3.4041 13.995 3.78755L14.8795 4.67209C15.2629 5.05552 15.2629 5.67718 14.8795 6.06062L10.4018 10.5383C10.336 10.6041 10.2533 10.6502 10.1628 10.6715L8.11493 11.1533C7.94637 11.193 7.76929 11.1426 7.64685 11.0202C7.52441 10.8977 7.47404 10.7207 7.5137 10.5521L7.99554 8.50428C8.01684 8.41377 8.06295 8.33099 8.1287 8.26524L12.6064 3.78754C12.6064 3.78753 12.6064 3.78754 12.6064 3.78754ZM13.2878 4.49465C13.2878 4.49464 13.2878 4.49465 13.2878 4.49465V4.49465ZM13.3007 4.50749L14.1596 5.36636L9.79526 9.73065L8.67211 9.99492L8.93638 8.87177L13.3007 4.50749Z",fill:"currentColor"})]}))})),xa=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{d:"M10.6668 6.66663C11.035 6.66663 11.3334 6.36815 11.3334 5.99996C11.3334 5.63177 11.035 5.33329 10.6668 5.33329C10.2986 5.33329 10.0001 5.63177 10.0001 5.99996C10.0001 6.36815 10.2986 6.66663 10.6668 6.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.32027 2.80616C8.41341 2.71663 8.53758 2.66663 8.66677 2.66663H13.5001C13.7762 2.66663 14.0001 2.89048 14.0001 3.16663V7.99996C14.0001 8.1329 13.9472 8.26037 13.853 8.35419L9.38864 12.8014C8.65615 13.531 7.46558 13.5111 6.758 12.7572L3.82881 9.63613C3.14175 8.90408 3.1713 7.75557 3.89511 7.05982L8.32027 2.80616ZM8.86811 3.66663L4.58811 7.78076C4.25911 8.09701 4.24567 8.61904 4.55797 8.95179L7.48713 12.0728C7.80876 12.4155 8.34992 12.4246 8.6829 12.0929L13.0001 7.79229V3.66663H8.86811Z",fill:"currentColor"})]}))})),va=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66679 6.33337C7.74631 6.33337 7.00012 7.07957 7.00012 8.00004C7.00012 8.92052 7.74631 9.66671 8.66679 9.66671C9.58726 9.66671 10.3335 8.92052 10.3335 8.00004C10.3335 7.07957 9.58726 6.33337 8.66679 6.33337ZM6.00012 8.00004C6.00012 6.52728 7.19403 5.33337 8.66679 5.33337C10.1395 5.33337 11.3335 6.52728 11.3335 8.00004C11.3335 9.4728 10.1395 10.6667 8.66679 10.6667C7.19403 10.6667 6.00012 9.4728 6.00012 8.00004Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66671 3.66663C6.27348 3.66663 4.33337 5.60673 4.33337 7.99996C4.33337 10.3932 6.27347 12.3333 8.66671 12.3333C8.94285 12.3333 9.16671 12.5572 9.16671 12.8333C9.16671 13.1094 8.94285 13.3333 8.66671 13.3333C5.72119 13.3333 3.33337 10.9455 3.33337 7.99996C3.33337 5.05444 5.72119 2.66663 8.66671 2.66663C11.0525 2.66663 12.4446 3.44102 13.2036 4.58875C13.9334 5.69247 14 7.03683 14 7.99996V8.83329C14 9.84583 13.1792 10.6666 12.1667 10.6666C11.1542 10.6666 10.3334 9.84583 10.3334 8.83329V5.83329C10.3334 5.55715 10.5572 5.33329 10.8334 5.33329C11.1095 5.33329 11.3334 5.55715 11.3334 5.83329V8.83329C11.3334 9.29355 11.7064 9.66663 12.1667 9.66663C12.627 9.66663 13 9.29355 13 8.83329V7.99996C13 7.04642 12.9208 5.97411 12.3694 5.14034C11.8472 4.35057 10.8225 3.66663 8.66671 3.66663Z",fill:"currentColor"})]}))})),ba=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16707 4.99996C4.70684 4.99996 4.33374 5.37305 4.33374 5.83329V11.5C4.33374 11.9602 4.70683 12.3333 5.16707 12.3333H12.1671C12.6273 12.3333 13.0004 11.9602 13.0004 11.5V5.83329C13.0004 5.37305 12.6273 4.99996 12.1671 4.99996H5.16707ZM3.33374 5.83329C3.33374 4.82077 4.15455 3.99996 5.16707 3.99996H12.1671C13.1796 3.99996 14.0004 4.82078 14.0004 5.83329V11.5C14.0004 12.5125 13.1796 13.3333 12.1671 13.3333H5.16707C4.15456 13.3333 3.33374 12.5125 3.33374 11.5V5.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00041 2.66663C6.27655 2.66663 6.50041 2.89048 6.50041 3.16663V5.49996C6.50041 5.7761 6.27655 5.99996 6.00041 5.99996C5.72426 5.99996 5.50041 5.7761 5.50041 5.49996V3.16663C5.50041 2.89048 5.72426 2.66663 6.00041 2.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3337 2.66663C11.6099 2.66663 11.8337 2.89048 11.8337 3.16663V5.49996C11.8337 5.7761 11.6099 5.99996 11.3337 5.99996C11.0576 5.99996 10.8337 5.7761 10.8337 5.49996V3.16663C10.8337 2.89048 11.0576 2.66663 11.3337 2.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33374 7.16663C5.33374 6.89048 5.5576 6.66663 5.83374 6.66663H11.5004C11.7765 6.66663 12.0004 6.89048 12.0004 7.16663C12.0004 7.44277 11.7765 7.66663 11.5004 7.66663H5.83374C5.5576 7.66663 5.33374 7.44277 5.33374 7.16663Z",fill:"currentColor"})]}))})),ja=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{d:"M13.2153 2.97488C13.0212 2.78621 12.7123 2.78621 12.5182 2.97488L10.7182 4.72488C10.5202 4.91737 10.5158 5.23392 10.7083 5.43191C10.9007 5.62991 11.2173 5.63436 11.4153 5.44187L12.3667 4.51684V11.4832L11.4153 10.5582C11.2173 10.3657 10.9007 10.3702 10.7083 10.5682C10.5158 10.7662 10.5202 11.0827 10.7182 11.2752L12.5182 13.0252C12.7123 13.2139 13.0212 13.2139 13.2153 13.0252L15.0153 11.2752C15.2133 11.0827 15.2177 10.7662 15.0252 10.5682C14.8328 10.3702 14.5162 10.3657 14.3182 10.5582L13.3667 11.4832V4.51684L14.3182 5.44187C14.5162 5.63436 14.8328 5.62991 15.0252 5.43191C15.2177 5.23392 15.2133 4.91737 15.0153 4.72488L13.2153 2.97488Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M2.66675 4.00004C2.39061 4.00004 2.16675 4.2239 2.16675 4.50004C2.16675 4.77618 2.39061 5.00004 2.66675 5.00004H5.06675C5.34289 5.00004 5.56675 4.77618 5.56675 4.50004C5.56675 4.2239 5.34289 4.00004 5.06675 4.00004H2.66675Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M2.66675 6.33337C2.39061 6.33337 2.16675 6.55723 2.16675 6.83337C2.16675 7.10952 2.39061 7.33337 2.66675 7.33337H6.26675C6.54289 7.33337 6.76675 7.10952 6.76675 6.83337C6.76675 6.55723 6.54289 6.33337 6.26675 6.33337H2.66675Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M2.66675 8.66671C2.39061 8.66671 2.16675 8.89056 2.16675 9.16671C2.16675 9.44285 2.39061 9.66671 2.66675 9.66671H7.46675C7.74289 9.66671 7.96675 9.44285 7.96675 9.16671C7.96675 8.89056 7.74289 8.66671 7.46675 8.66671H2.66675Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M2.66675 11C2.39061 11 2.16675 11.2239 2.16675 11.5C2.16675 11.7762 2.39061 12 2.66675 12H8.66675C8.94289 12 9.16675 11.7762 9.16675 11.5C9.16675 11.2239 8.94289 11 8.66675 11H2.66675Z",fill:"currentColor"})]}))})),Ca=n(72392),ya=n(57588),Za=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.53835 7.25138C4.38004 7.65209 4.33374 7.92666 4.33374 7.99996C4.33374 8.09327 4.40313 8.4621 4.63006 8.9653C4.84866 9.45004 5.19082 10.0073 5.68305 10.4879C5.88063 10.6809 5.8844 10.9974 5.69148 11.195C5.49857 11.3926 5.18201 11.3964 4.98443 11.2034C4.38472 10.6179 3.97688 9.94942 3.71847 9.3764C3.46838 8.82185 3.33374 8.30091 3.33374 7.99996C3.33374 7.73992 3.43327 7.32699 3.6083 6.88395C3.78993 6.4242 4.07284 5.88084 4.48165 5.35847C5.30589 4.30529 6.64947 3.33329 8.66707 3.33329C9.97539 3.33329 11.009 3.74324 11.8015 4.32924C12.0236 4.49341 12.0705 4.8065 11.9063 5.02854C11.7421 5.25058 11.4291 5.29749 11.207 5.13332C10.5786 4.6687 9.75169 4.33329 8.66707 4.33329C7.01801 4.33329 5.94493 5.1113 5.26916 5.97478C4.92797 6.41074 4.69005 6.86739 4.53835 7.25138ZM12.8637 6.21755C13.1117 6.09613 13.4112 6.19877 13.5326 6.44678C13.6917 6.77165 13.8063 7.07737 13.8819 7.3364C13.9544 7.5847 14.0004 7.82139 14.0004 7.99996C14.0004 8.26 13.9009 8.67292 13.7259 9.11596C13.5442 9.57572 13.2613 10.1191 12.8525 10.6414C12.0283 11.6946 10.6847 12.6666 8.66707 12.6666C8.13669 12.6666 7.64929 12.5993 7.20307 12.4784C6.93652 12.4063 6.77895 12.1317 6.85112 11.8652C6.92329 11.5986 7.19787 11.441 7.46441 11.5132C7.82286 11.6103 8.22225 11.6666 8.66707 11.6666C10.3161 11.6666 11.3892 10.8886 12.065 10.0251C12.4062 9.58918 12.6441 9.13253 12.7958 8.74854C12.9541 8.34783 13.0004 8.07325 13.0004 7.99996C13.0004 7.96153 12.9846 7.83109 12.922 7.61674C12.8625 7.41312 12.7687 7.16067 12.6345 6.88647C12.513 6.63845 12.6157 6.33896 12.8637 6.21755Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.854 2.81307C14.0492 3.00833 14.0492 3.32492 13.854 3.52018L4.18729 13.1868C3.99203 13.3821 3.67545 13.3821 3.48019 13.1868C3.28492 12.9916 3.28492 12.675 3.48019 12.4797L13.1469 2.81307C13.3421 2.61781 13.6587 2.61781 13.854 2.81307Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37419 7.29285C8.98365 6.90231 8.3505 6.90231 7.95997 7.29284C7.95996 7.29284 7.95997 7.29284 7.95997 7.29284M7.95997 7.29284C7.56945 7.68338 7.56944 8.31654 7.95997 8.70708C8.15523 8.90234 8.15522 9.21893 7.95995 9.41418C7.76469 9.60944 7.44811 9.60944 7.25285 9.41417C6.47181 8.63311 6.47181 7.36681 7.25285 6.58575C8.03391 5.80468 9.30023 5.80468 10.0813 6.58574C10.2766 6.781 10.2766 7.09758 10.0813 7.29285C9.88603 7.48811 9.56945 7.48811 9.37419 7.29285",fill:"currentColor"})]}))})),ka=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16691 7.66663C5.07486 7.66663 5.00024 7.74124 5.00024 7.83329V11.5C5.00024 11.9602 5.37333 12.3333 5.83358 12.3333H11.5002C11.9605 12.3333 12.3336 11.9602 12.3336 11.5V7.83329C12.3336 7.74124 12.259 7.66663 12.1669 7.66663H5.16691ZM4.00024 7.83329C4.00024 7.18894 4.52259 6.66663 5.16691 6.66663H12.1669C12.8113 6.66663 13.3336 7.18895 13.3336 7.83329V11.5C13.3336 12.5125 12.5128 13.3333 11.5002 13.3333H5.83358C4.82106 13.3333 4.00024 12.5125 4.00024 11.5V7.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66691 3.66663C7.52676 3.66663 6.97342 4.10514 6.68719 4.49816C6.51299 4.73736 6.41931 5.03154 6.37339 5.38803C6.33198 5.70961 6.33265 6.0462 6.33338 6.41357C6.33348 6.46257 6.33358 6.51212 6.33358 6.56225V6.99996C6.33358 7.2761 6.10972 7.49996 5.83358 7.49996C5.55744 7.49996 5.33358 7.2761 5.33358 6.99996V6.56225C5.33358 6.51517 5.33344 6.46707 5.33331 6.41811C5.33232 6.05826 5.3312 5.65155 5.38159 5.2603C5.43986 4.80784 5.5709 4.33229 5.87884 3.90946C6.35856 3.25076 7.21613 2.66663 8.66691 2.66663C9.46147 2.66663 10.0987 2.96465 10.5276 3.2506C10.743 3.39423 10.9109 3.53802 11.0264 3.6474C11.0843 3.70227 11.1296 3.74899 11.1616 3.78343C11.1776 3.80067 11.1903 3.81488 11.1997 3.82555L11.2112 3.83887L11.2151 3.84343L11.2165 3.84517L11.2172 3.8459C11.2173 3.84605 11.2177 3.84653 10.8482 4.1544L11.2177 3.84653C11.3945 4.05867 11.3658 4.37395 11.1537 4.55074C10.9421 4.72701 10.6281 4.69902 10.451 4.48855M10.451 4.48855L10.4481 4.48524C10.4446 4.48126 10.4382 4.47399 10.4288 4.46388C10.41 4.44364 10.3797 4.41224 10.3387 4.37335C10.2562 4.29524 10.1325 4.18902 9.97289 4.08265C9.65182 3.8686 9.20569 3.66663 8.66691 3.66663",fill:"currentColor"})]}))})),wa=n(83297),Ta=n(14737),Ea={leaderboards:null,currentLeaderboard:null,displayOnlyBestEntry:!1,browsing:{entries:null,goToNextPage:null,goToPreviousPage:null,goToFirstPage:null},createLeaderboard:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listLeaderboards:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),selectLeaderboard:function(){},setDisplayOnlyBestEntry:function(){},updateLeaderboard:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),resetLeaderboard:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLeaderboard:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLeaderboardEntry:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchLeaderboardEntries:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Sa=u.createContext(Ea),Pa=n(21676),Ia=function(e){return"PREFER_UNIQUE"===e.playerUnicityDisplayChoice},Da=function(e,t){switch(t.type){case"SET_LEADERBOARDS":var n=t.payload;if(!n)return(0,i.Z)((0,i.Z)({},e),{},{leaderboardsByIds:null,currentLeaderboardId:null,currentLeaderboard:null});var o=n.reduce((function(e,t){return e[t.id]=t,e}),{}),s=!e.currentLeaderboard&&n&&n.length>0,l=n.find((function(e){return e.primary})),c=(e.currentLeaderboard?o[e.currentLeaderboard.id]:void 0)||e.currentLeaderboard,u=s?l||n[0]:c;return(0,i.Z)((0,i.Z)({},e),{},{leaderboardsByIds:o,displayOnlyBestEntry:!!u&&Ia(u),currentLeaderboardId:u?u.id:null,currentLeaderboard:u});case"SET_ENTRIES":return(0,i.Z)((0,i.Z)({},e),{},{entries:t.payload});case"PURGE_NAVIGATION":return(0,i.Z)((0,i.Z)({},e),{},{entries:null,pageIndex:0,mapPageIndexToUri:{}});case"SET_NEXT_PAGE_URI":var d=e.pageIndex+1;return(0,i.Z)((0,i.Z)({},e),{},{mapPageIndexToUri:(0,i.Z)((0,i.Z)({},e.mapPageIndexToUri),{},(0,r.Z)({},d,t.payload))});case"SET_PAGE_INDEX":return(0,i.Z)((0,i.Z)({},e),{},{pageIndex:t.payload});case"SELECT_LEADERBOARD":if(!e.leaderboardsByIds)return e;var p=e.leaderboardsByIds[t.payload];return(0,i.Z)((0,i.Z)({},e),{},{displayOnlyBestEntry:Ia(p),currentLeaderboardId:p.id,currentLeaderboard:p});case"CHANGE_DISPLAY_ONLY_BEST_ENTRY":return(0,i.Z)((0,i.Z)({},e),{},{displayOnlyBestEntry:t.payload});case"UPDATE_OR_CREATE_LEADERBOARD":var h={};return e.leaderboardsByIds&&Object.entries(e.leaderboardsByIds).forEach((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1];h[r]=(0,i.Z)((0,i.Z)({},o),{},{primary:t.payload.primary?void 0:o.primary})})),h[t.payload.id]=t.payload,(0,i.Z)((0,i.Z)({},e),{},{displayOnlyBestEntry:Ia(t.payload),leaderboardsByIds:h,currentLeaderboardId:t.payload.id,currentLeaderboard:t.payload});case"REMOVE_LEADERBOARD":var f=(0,i.Z)({},e.leaderboardsByIds);delete f[t.payload];var g=Object.keys(f);return 0===g.length?(0,i.Z)((0,i.Z)({},e),{},{displayOnlyBestEntry:!1,leaderboardsByIds:f,currentLeaderboard:null,currentLeaderboardId:null}):(0,i.Z)((0,i.Z)({},e),{},{displayOnlyBestEntry:Ia(f[g[0]]),leaderboardsByIds:f,currentLeaderboard:f[g[0]],currentLeaderboardId:g[0]});default:return(0,i.Z)({},e)}},Aa=function(e){var t=e.gameId,n=e.children,r=u.useContext(ir.ZP),i=u.useRef(!1),s=u.useReducer(Da,{currentLeaderboardId:null,currentLeaderboard:null,leaderboardsByIds:null,displayOnlyBestEntry:!1,entries:null,mapPageIndexToUri:{},pageIndex:0}),c=(0,a.Z)(s,2),d=c[0],p=d.currentLeaderboardId,h=d.currentLeaderboard,g=d.leaderboardsByIds,m=d.displayOnlyBestEntry,x=d.entries,v=d.mapPageIndexToUri,b=d.pageIndex,j=c[1],C=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.current){e.next=14;break}return i.current=!0,e.prev=2,n&&n.shouldClearBeforeFetching&&j({type:"SET_LEADERBOARDS",payload:null}),e.next=6,(0,Ta.mf)(r,t);case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:o.sort((function(e,t){return e.name.localeCompare(t.name)})),j({type:"SET_LEADERBOARDS",payload:o});case 11:return e.prev=11,i.current=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[t,r]),y=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:"SET_ENTRIES",payload:null}),e.next=3,(0,Ta.Rc)(r,t,n);case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return");case 6:j({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,r]),Z=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var r,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return r=n&&n.uri?n.uri:null,j({type:"SET_ENTRIES",payload:null}),e.next=6,(0,Ta.YJ)(t,p,{pageSize:10,onlyBestEntry:m,forceUri:r});case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return");case 9:i=o.entries,o.nextPageUri&&j({type:"SET_NEXT_PAGE_URI",payload:o.nextPageUri}),j({type:"SET_ENTRIES",payload:i});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,m,t]),k=u.useCallback((function(e){j({type:"SELECT_LEADERBOARD",payload:e})}),[]),w=u.useCallback((function(e){j({type:"CHANGE_DISPLAY_ONLY_BEST_ENTRY",payload:e})}),[]),T=function(){var e=(0,o.Z)(l().mark((function e(n){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return n.sort&&j({type:"PURGE_NAVIGATION"}),e.next=5,(0,Ta.RE)(r,t,p,n);case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(j({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:o}),!n.sort){e.next=12;break}return e.next=12,Z();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return j({type:"PURGE_NAVIGATION"}),e.next=5,(0,Ta.Wk)(r,t,p);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:j({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:n}),Z();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&g){e.next=2;break}return e.abrupt("return");case 2:return j({type:"PURGE_NAVIGATION"}),e.next=5,(0,Ta.QN)(r,t,p);case 5:j({type:"REMOVE_LEADERBOARD",payload:p});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,Ta.nI)(r,t,p,n);case 4:Z({uri:b>0?v[b]:null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=u.useCallback((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v[b+1]){e.next=3;break}return e.abrupt("return");case 3:return j({type:"SET_PAGE_INDEX",payload:b+1}),e.next=6,Z({uri:t});case 6:case"end":return e.stop()}}),e)}))),[Z,v,b]),D=u.useCallback((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==b){e.next=6;break}return j({type:"SET_PAGE_INDEX",payload:0}),e.next=4,Z();case 4:e.next=12;break;case 6:if(t=v[b-1]){e.next=9;break}return e.abrupt("return");case 9:return j({type:"SET_PAGE_INDEX",payload:b-1}),e.next=12,Z({uri:t});case 12:case"end":return e.stop()}}),e)}))),[Z,v,b]),A=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j({type:"SET_PAGE_INDEX",payload:0}),e.next=3,Z();case 3:case"end":return e.stop()}}),e)}))),[Z]);u.useEffect((function(){j({type:"SET_LEADERBOARDS",payload:null}),j({type:"PURGE_NAVIGATION"})}),[t]),u.useEffect((function(){p&&t&&(j({type:"PURGE_NAVIGATION"}),Z())}),[p,m,Z,t]);var L=u.useRef(null),M=u.useRef(null);return u.useEffect((function(){L.current===p&&M.current&&h&&!h.resetLaunchedAt&&Z(),L.current=p,M.current=h?h.resetLaunchedAt:null}),[h,p,Z]),(0,Pa.Y)((function(){C({shouldClearBeforeFetching:!1})}),!g||Object.values(g).every((function(e){return!e.resetLaunchedAt}))?null:5e3),(0,f.jsx)(Sa.Provider,{value:{leaderboards:g?Object.values(g):null,currentLeaderboard:h,displayOnlyBestEntry:m,browsing:{entries:x,goToNextPage:v[b+1]?I:null,goToPreviousPage:1===b||v[b-1]?D:null,goToFirstPage:0===b?null:A},setDisplayOnlyBestEntry:w,createLeaderboard:y,listLeaderboards:C,selectLeaderboard:k,updateLeaderboard:T,resetLeaderboard:E,deleteLeaderboard:S,deleteLeaderboardEntry:P,fetchLeaderboardEntries:Z},children:n})},La=n(33114),Ma=n(38962),Fa=n(79337),Oa=n(98470),Ra=n(9940),Ba=n(96355),_a=["hour","minute","second","millisecond"],Na={hour:36e5,minute:6e4,second:1e3,millisecond:1},Ua={hour:":",minute:":",second:".",millisecond:""},Ha=function(e,t){return"time"===t.type?function(e,t){for(var n="",r=Math.round(1e3*e),o=_a.indexOf(t.biggestUnit),i=_a.indexOf(t.smallestUnit),a=o;a<=i;a++){var s=_a[a],l=Na[s],c=r%l;n+="".concat(((r-c)/l).toString().padStart("millisecond"===s?3:2,"0")).concat(a===i?"":Ua[s]),r=c}return n}(e,t):function(e,t){var n=(0,Ba.R)(e,t.precision);return"".concat(t.prefix).concat(n.toFixed(Math.max(0,t.precision))).concat(t.suffix)}(e,t)},Va=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.19973 5.49315C9.38763 5.69551 9.37591 6.01187 9.17356 6.19977L7.23481 8.00004L9.17356 9.80031C9.37591 9.98821 9.38763 10.3046 9.19973 10.5069C9.01183 10.7093 8.69546 10.721 8.49311 10.5331L6.15977 8.36644C6.05789 8.27183 6 8.13908 6 8.00004C6 7.86101 6.05789 7.72825 6.15977 7.63365L8.49311 5.46698C8.69546 5.27908 9.01183 5.2908 9.19973 5.49315Z",fill:"currentColor"})}))})),Wa=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0591 3.38717C13.2273 3.47228 13.3333 3.64478 13.3333 3.83332V12.1666C13.3333 12.3552 13.2273 12.5277 13.0591 12.6128C12.8908 12.6979 12.689 12.6812 12.5371 12.5695L6.87047 8.40281C6.74233 8.30859 6.66667 8.15903 6.66667 7.99998C6.66667 7.84093 6.74233 7.69137 6.87047 7.59716L12.5371 3.43049C12.689 3.3188 12.8908 3.30205 13.0591 3.38717ZM8.0107 7.99998L12.3333 11.1784V4.82158L8.0107 7.99998Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 3.33332C4.77614 3.33332 5 3.55717 5 3.83332V12.1666C5 12.4428 4.77614 12.6666 4.5 12.6666C4.22386 12.6666 4 12.4428 4 12.1666V3.83332C4 3.55717 4.22386 3.33332 4.5 3.33332Z",fill:"currentColor"})]}))})),za=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.14644 6.14641C6.3417 5.95114 6.65828 5.95114 6.85354 6.14641L9.85354 9.14641C10.0488 9.34167 10.0488 9.65825 9.85354 9.85351C9.65828 10.0488 9.3417 10.0488 9.14644 9.85351L6.14644 6.85351C5.95117 6.65825 5.95117 6.34167 6.14644 6.14641Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.85354 6.14641C10.0488 6.34167 10.0488 6.65825 9.85354 6.85351L6.85354 9.85351C6.65828 10.0488 6.3417 10.0488 6.14644 9.85351C5.95117 9.65825 5.95117 9.34167 6.14644 9.14641L9.14644 6.14641C9.3417 5.95114 9.65828 5.95114 9.85354 6.14641Z",fill:"currentColor"})]}))})),Ga=function(e){var t=e.entries,n=e.customizationSettings,r=e.onDeleteEntry,o=e.isLoading,a=e.erroredEntry,s=e.navigation;return t?(0,f.jsx)(c.I18n,{children:function(e){var l=e.i18n;return(0,f.jsxs)(L.sg,{expand:!0,justifyContent:"space-between",children:[(0,f.jsxs)(La.Z,{size:"small",children:[(0,f.jsx)(Oa.Z,{children:(0,f.jsxs)(Ra.Z,{children:[(0,f.jsx)(Fa.Z,{style:{width:"20%"},align:"center",children:n?n.scoreTitle:(0,f.jsx)(c.Trans,{id:"Score"})}),(0,f.jsx)(Fa.Z,{style:{width:"50%"},children:(0,f.jsx)(c.Trans,{id:"Player"})}),(0,f.jsx)(Fa.Z,{style:{width:"15%"},children:(0,f.jsx)(c.Trans,{id:"Date"})}),(0,f.jsx)(Fa.Z,{style:{width:"15%"},children:(0,f.jsx)(c.Trans,{id:"Action"})})]})}),(0,f.jsx)(Ma.Z,{children:t.map((function(e){return(0,f.jsxs)(Ra.Z,{children:[(0,f.jsx)(Fa.Z,{align:"center",children:n?Ha(e.score,n.scoreFormatting):e.score}),(0,f.jsx)(Fa.Z,{style:(0,i.Z)((0,i.Z)({},Do.t),{},{maxWidth:0}),children:(0,f.jsx)(De.ZP,{title:e.playerName,children:(0,f.jsx)("span",{children:e.playerName})})}),(0,f.jsx)(Fa.Z,{children:(0,f.jsx)(De.ZP,{title:l.date(e.createdAt,{dateStyle:"short",timeStyle:"short"}),children:(0,f.jsx)("span",{children:l.date(e.createdAt)})})}),(0,f.jsx)(Fa.Z,{children:(0,f.jsxs)(L.x1,{children:[(0,f.jsx)(A.Z,{size:"small",onClick:function(){return r(e)},disabled:o,tooltip:{id:"Remove entry"},children:(0,f.jsx)(Dn.Z,{size:20})}),a&&a.entryId===e.id?(0,f.jsx)(A.Z,{size:"small",onClick:function(){},tooltip:a.message,children:(0,f.jsx)(za,{size:20,color:"error"})}):null]})})]},e.id)}))})]}),0===t.length?(0,f.jsx)(L.sg,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,f.jsx)(J.Z,{size:"body2",children:(0,f.jsx)(c.Trans,{id:"No entries"})})}):(0,f.jsxs)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:[(0,f.jsx)(A.Z,{tooltip:{id:"Go to first page"},disabled:!s.goToFirstPage,onClick:function(){s.goToFirstPage&&s.goToFirstPage()},children:(0,f.jsx)(Wa,{})}),(0,f.jsx)(A.Z,{tooltip:{id:"Previous page"},disabled:!s.goToPreviousPage,onClick:function(){s.goToPreviousPage&&s.goToPreviousPage()},children:(0,f.jsx)(Va,{})}),(0,f.jsx)(A.Z,{tooltip:{id:"Next page"},disabled:!s.goToNextPage,onClick:function(){s.goToNextPage&&s.goToNextPage()},children:(0,f.jsx)(It.Z,{})})]})]})}}):(0,f.jsx)(Qe.Z,{})},Ya=function(){return(0,f.jsxs)(C.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"space-around",children:[(0,f.jsx)(L.sg,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Experiment with the leaderboard colors using the playground"})})}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(ve.Z,{href:"https://games.engine.spacexpanse.org/playground/test-leaderboard",onClick:function(){return F.ZP.openExternalURL("https://games.engine.spacexpanse.org/playground/test-leaderboard")},children:(0,f.jsx)(J.Z,{noMargin:!0,color:"inherit",children:(0,f.jsx)(c.Trans,{id:"Playground"})})})})]})},qa={hour:"HH",minute:"MM",second:"SS",millisecond:"ms"},Xa=function(e){return!isNaN(e)&&Number.isInteger(e)},Ja=function(e){for(var t=_a.indexOf(e.biggestUnit),n=_a.indexOf(e.smallestUnit),r="",o=t;o<=n;o++){var i=_a[o];r+="".concat(qa[i]).concat(o===n?"":Ua[i])}return r},Ka=_a.reduce((function(e,t,n){for(var r=n;r<_a.length;r++){var o={biggestUnit:_a[n],smallestUnit:_a[r]};e[Ja(o)]=o}return e}),{}),Qa=999999999;var $a=function(e){var t=e.open,n=e.onClose,r=e.onSave,s=e.leaderboardCustomizationSettings,d=u.useState(!1),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useContext(ir.ZP),x=(0,Ta.VE)(m),v=x.canUseTheme,b=x.canUseCustomCss,j=(0,Ta.YO)(s),y=u.useState(null),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=u.useState(s&&s.defaultDisplayedEntriesNumber||20),E=(0,a.Z)(T,2),S=E[0],P=E[1],I=u.useState(j.backgroundColor),D=(0,a.Z)(I,2),A=D[0],M=D[1],O=u.useState(j.textColor),R=(0,a.Z)(O,2),N=R[0],H=R[1],W=u.useState(j.highlightBackgroundColor),z=(0,a.Z)(W,2),G=z[0],Y=z[1],q=u.useState(j.highlightTextColor),X=(0,a.Z)(q,2),K=X[0],Q=X[1],$=u.useState(null),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],re=u.useState(s&&s.customCss||""),oe=(0,a.Z)(re,2),ie=oe[0],ae=oe[1],se=u.useState(!(!s||!s.useCustomCss)),le=(0,a.Z)(se,2),ce=le[0],ue=le[1],de=u.useState(s?s.scoreTitle:"Score"),pe=(0,a.Z)(de,2),he=pe[0],fe=pe[1],ge=u.useState(s?s.scoreFormatting.type:"custom"),me=(0,a.Z)(ge,2),xe=me[0],be=me[1],je=u.useState(s&&"custom"===s.scoreFormatting.type?s.scoreFormatting.prefix:""),Ce=(0,a.Z)(je,2),ye=Ce[0],Ze=Ce[1],ke=u.useState(s&&"custom"===s.scoreFormatting.type?s.scoreFormatting.suffix:""),Te=(0,a.Z)(ke,2),Ee=Te[0],Se=Te[1],Pe=u.useState(s&&"custom"===s.scoreFormatting.type?s.scoreFormatting.precision:0),Ie=(0,a.Z)(Pe,2),De=Ie[0],Ae=Ie[1],Le=u.useState(null),Me=(0,a.Z)(Le,2),Fe=Me[0],Oe=Me[1],Re=u.useState(s&&"time"===s.scoreFormatting.type?Ja({smallestUnit:s.scoreFormatting.smallestUnit,biggestUnit:s.scoreFormatting.biggestUnit}):Ja({biggestUnit:"second",smallestUnit:"millisecond"})),Be=(0,a.Z)(Re,2),_e=Be[0],Ne=Be[1],Ue=u.useState(15.2659),He=(0,a.Z)(Ue,2),Ve=He[0],We=He[1],ze=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he){e.next=3;break}return w(t._({id:"Title cannot be empty."})),e.abrupt("return");case 3:if(Xa(S)){e.next=6;break}return ne(t._({id:"The number of displayed entries must be a whole value between {displayedEntriesMinNumber} and {displayedEntriesMaxNumber}",values:{displayedEntriesMinNumber:1,displayedEntriesMaxNumber:50}})),e.abrupt("return");case 6:if(Xa(De)){e.next=9;break}return Oe(t._({id:"The number of decimal places must be a whole value between {precisionMinValue} and {precisionMaxValue}",values:{precisionMinValue:-3,precisionMaxValue:3}})),e.abrupt("return");case 9:return g(!0),n={defaultDisplayedEntriesNumber:S,scoreTitle:he,scoreFormatting:"custom"===xe?{type:xe,prefix:ye,suffix:Ee,precision:De}:(0,i.Z)({type:xe},Ka[_e]),theme:v?{backgroundColor:(0,er.Zn)(A),textColor:(0,er.Zn)(N),highlightBackgroundColor:(0,er.Zn)(G),highlightTextColor:(0,er.Zn)(K)}:void 0,useCustomCss:ce,customCss:ie},e.next=13,r(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Leaderboard appearance"}),open:t,maxWidth:"sm",secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration",anchor:"change_the_appearance_of_a_leaderboard"},"help")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),disabled:h,onClick:n},"cancel"),(0,f.jsx)(V.vF,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Save"}),disabled:h,onClick:function(){return ze(r)}},"save")],cannotBeDismissed:h,onRequestClose:n,onApply:function(){ze(r)},children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Table settings"})}),(0,f.jsx)(po.ZP,{fullWidth:!0,type:"number",floatingLabelText:(0,f.jsx)(c.Trans,{id:"Number of entries to display"}),value:isNaN(S)?"":S,errorText:te,min:1,max:50,onChange:function(e,t){te&&t&&ne(null),P(Math.max(1,Math.min(50,parseFloat(t))))},disabled:h}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Visual appearance"})}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Background color"}),disableAlpha:!0,fullWidth:!0,color:A,onChange:M,disabled:!v||h}),(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Text color"}),disableAlpha:!0,fullWidth:!0,color:N,onChange:H,disabled:!v||h})]}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Highlight background color"}),disableAlpha:!0,fullWidth:!0,color:G,onChange:Y,disabled:!v||h}),(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Highlight text color"}),disableAlpha:!0,fullWidth:!0,color:K,onChange:Q,disabled:!v||h})]}),v?(0,f.jsx)(Ya,{}):(0,f.jsx)(or,{subscriptionDialogOpeningReason:"Leaderboard customization",children:(0,f.jsx)(L.x1,{children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Get a silver or gold subscription to unlock color customization."})}),(0,f.jsx)(ve.Z,{href:"https://games.engine.spacexpanse.org/playground/test-leaderboard",onClick:function(){return F.ZP.openExternalURL("https://games.engine.spacexpanse.org/playground/test-leaderboard")},children:(0,f.jsx)(J.Z,{noMargin:!0,color:"inherit",children:(0,f.jsx)(c.Trans,{id:"Test it out!"})})})]})})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Visual appearance (advanced)"})}),(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Use custom CSS for the leaderboard"}),disabled:!b&&!ce||h,checked:ce,onCheck:function(e,t){return ue(t)}}),(0,f.jsx)(Dt.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Custom CSS"}),multiline:!0,rows:4,rowsMax:15,value:ie,onChange:ae,disabled:!ce||h}),b?(0,f.jsx)(Ya,{}):(0,f.jsx)(or,{subscriptionDialogOpeningReason:"Leaderboard customization",children:(0,f.jsx)(L.x1,{children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Get a business subscription to unlock custom CSS or contact us."})}),(0,f.jsx)(ve.Z,{href:"https://games.engine.spacexpanse.org/playground/test-leaderboard",onClick:function(){return F.ZP.openExternalURL("https://games.engine.spacexpanse.org/playground/test-leaderboard")},children:(0,f.jsx)(J.Z,{noMargin:!0,color:"inherit",children:(0,f.jsx)(c.Trans,{id:"Test it out!"})})})]})})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Score column settings"})}),(0,f.jsx)(po.ZP,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Column title"}),maxLength:20,errorText:k,value:he,onChange:function(e,t){k&&t&&w(null),fe(t)},disabled:h}),(0,f.jsxs)(B.Z,{fullWidth:!0,value:xe,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Score display"}),onChange:function(e,t,n){return be(n)},disabled:h,children:[(0,f.jsx)(U.Z,{value:"custom",label:{id:"Custom display"}},"custom"),(0,f.jsx)(U.Z,{value:"time",label:{id:"Display as time"}},"time")]}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Settings"})}),"custom"===xe?(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(po.ZP,{fullWidth:!0,floatingLabelFixed:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Prefix"}),maxLength:10,value:ye,translatableHintText:{id:"Ex: $"},onChange:function(e,t){Ze(t)},disabled:h}),(0,f.jsx)(po.ZP,{fullWidth:!0,floatingLabelFixed:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Suffix"}),maxLength:10,value:Ee,translatableHintText:{id:"Ex: coins"},onChange:function(e,t){Se(t)},disabled:h})]}),(0,f.jsx)(po.ZP,{fullWidth:!0,type:"number",floatingLabelText:(0,f.jsx)(c.Trans,{id:"Round to X decimal point"}),errorText:Fe,value:isNaN(De)?"":De,min:-3,max:3,onChange:function(e,t){Fe&&t&&Oe(null),Ae(Math.max(-3,Math.min(3,parseFloat(t))))},disabled:h})]}):(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(B.Z,{fullWidth:!0,value:_e,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Time format"}),onChange:function(e,t,n){return Ne(n)},disabled:h,children:Object.keys(Ka).map((function(e){return(0,f.jsx)(U.Z,{value:e,label:e},e)}))}),(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"To use this formatting, you must send a score expressed in seconds"})})]}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Preview"})}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(po.ZP,{fullWidth:!0,floatingLabelText:"custom"===xe?(0,f.jsx)(c.Trans,{id:"Test value"}):(0,f.jsx)(c.Trans,{id:"Test value (in second)"}),max:Qa,min:0,type:"number",value:isNaN(Ve)?"":Ve,onChange:function(e,t){return We(Math.max(0,Math.min(Qa,parseFloat(t))))},disabled:h}),(0,f.jsx)(po.ZP,{disabled:!0,fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Displayed score"}),value:Ha(Ve||0,"time"===xe?(0,i.Z)({type:xe},Ka[_e]):{type:xe,prefix:ye,suffix:Ee,precision:De||0})})]})]})})}})},es=n(66733),ts=Number.MAX_SAFE_INTEGER,ns=Number.MIN_SAFE_INTEGER;var rs=function(e){var t=e.open,n=e.onClose,r=e.onSave,i=e.sort,s=e.extremeAllowedScore,d=u.useState(!1),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useState(null),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useState(void 0!==s),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=u.useState(s||0),T=(0,a.Z)(w,2),E=T[0],S=T[1],P=u.useState(i||"ASC"),I=(0,a.Z)(P,2),D=I[0],A=I[1],M=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=7;break}if(!(E>ts)){e.next=4;break}return b(t._({id:"Extreme score must be lower than {extremeAllowedScoreMax}.",values:{extremeAllowedScoreMax:ts}})),e.abrupt("return");case 4:if(!(E<ns)){e.next=7;break}return b(t._({id:"Extreme score must be equal or higher than {extremeAllowedScoreMin}.",values:{extremeAllowedScoreMin:ns}})),e.abrupt("return");case 7:if(!isNaN(E)){e.next=10;break}return b(t._({id:"Limit cannot be empty, uncheck or fill a value between {extremeAllowedScoreMin} and {extremeAllowedScoreMax}.",values:{extremeAllowedScoreMin:ns,extremeAllowedScoreMax:ts}})),e.abrupt("return");case 10:return g(!0),n={sort:D,extremeAllowedScore:Z?E:null},e.next=14,r(n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Leaderboard options"}),open:t,maxWidth:"sm",secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration",anchor:"change_the_appearance_of_a_leaderboard"},"help")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),disabled:h,onClick:n},"cancel"),(0,f.jsx)(V.vF,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Save"}),disabled:h,onClick:function(){return M(r)}},"save")],cannotBeDismissed:h,onRequestClose:n,onApply:function(){M(r)},children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Sort order"})}),(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsxs)(B.Z,{fullWidth:!0,value:D,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Scores sort order"}),onChange:function(e,t,n){A(n)},children:[(0,f.jsx)(U.Z,{value:"ASC",label:{id:"Lower is better"}},"ASC"),(0,f.jsx)(U.Z,{value:"DESC",label:{id:"Higher is better"}},"DESC")]}),(0,f.jsx)(Yn.Z,{label:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Limit scores"})}),(0,f.jsx)(es.Z,{style:{display:"inline"},children:(0,f.jsx)($e.r,{source:r._("ASC"===D?{id:"Any submitted score that is lower than the set value will not be saved in the leaderboard."}:{id:"Any submitted score that is higher than the set value will not be saved in the leaderboard."})})})]}),checked:Z,onCheck:function(){return k(!Z)}})]}),Z&&(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsxs)(L.x1,{children:[(0,f.jsx)(L.hS,{}),(0,f.jsx)(po.ZP,{fullWidth:!0,type:"number",floatingLabelText:"ASC"===D?(0,f.jsx)(c.Trans,{id:"Minimum score"}):(0,f.jsx)(c.Trans,{id:"Maximum score"}),value:E,errorText:v,min:ns,max:ts,onChange:function(e,t){v&&b(null),S(parseFloat(t))}})]})})]})}})},os=function(e){var t=e.onUpgrade,n=e.onClose,r=e.limits.capabilities.leaderboards;return r?(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsxs)(we.Z,{kind:"warning",onHide:n,renderRightButton:r.canMaximumCountPerGameBeIncreased?function(){return(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Check our premiums plans"}),onClick:t})}:void 0,children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"You've reached your maximum of {0} leaderboards for your game",values:{0:r.maximumCountPerGame}})}),(0,f.jsx)(J.Z,{children:r.canMaximumCountPerGameBeIncreased?(0,f.jsx)(c.Trans,{id:"Update to SpeXEngine Premium to get more leaderboards, storage, and one-click packagings!"}):(0,f.jsx)(c.Trans,{id:"To keep using SpeXEngine leaderboards, consider deleting old, unused leaderboards."})})]})})}):null},is=["gameId"],as=function(e){var t=e.children;return(0,f.jsx)(L.sg,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,f.jsx)(L.x1,{children:t})})},ss={leftColumn:{display:"flex",flexDirection:"column",flex:1,paddingRight:5},rightColumn:{display:"flex",flexDirection:"column",flex:2},leaderboardConfigurationPaper:{padding:5,margin:5},leaderboardNameText:(0,i.Z)((0,i.Z)({},Do.t),{},{width:150}),leaderboardNameTextField:{width:125,fontSize:14}},ls=function(e){return{action:e.name?"leaderboardNameUpdate":e.sort?"leaderboardSortUpdate":e.visibility?"leaderboardVisibilityUpdate":void 0!==e.ignoreCustomPlayerNames?"leaderboardIgnoreCustomPlayerNamesUpdate":void 0!==e.autoPlayerNamePrefix?"leaderboardAutoPlayerNamePrefixUpdate":e.primary?"leaderboardPrimaryUpdate":e.customizationSettings?"leaderboardAppearanceUpdate":"leaderboardPlayerUnicityDisplayChoiceUpdate",message:e.name?(0,f.jsx)(c.Trans,{id:"An error occurred when updating the name of the leaderboard, please close the dialog, come back and try again."}):e.sort?(0,f.jsx)(c.Trans,{id:"An error occurred when updating the sort direction of the leaderboard, please close the dialog, come back and try again."}):e.visibility?(0,f.jsx)(c.Trans,{id:"An error occurred when updating the visibility of the leaderboard, please close the dialog, come back and try again."}):void 0!==e.ignoreCustomPlayerNames||void 0!==e.autoPlayerNamePrefix?(0,f.jsx)(c.Trans,{id:"An error occurred when updating the handling of player names of the leaderboard, please close the dialog, come back and try again."}):e.primary?(0,f.jsx)(c.Trans,{id:"An error occurred when setting the leaderboard as default, please close the dialog, come back and try again."}):e.customizationSettings?(0,f.jsx)(c.Trans,{id:"An error occurred when updating the appearance of the leaderboard, please close the dialog, come back and try again."}):(0,f.jsx)(c.Trans,{id:"An error occurred when updating the display choice of the leaderboard, please close the dialog, come back and try again."})}},cs=function(e){if(void 0!==e.extremeAllowedScore){var t=e.customizationSettings?Ha(e.extremeAllowedScore,e.customizationSettings.scoreFormatting):e.extremeAllowedScore;return"ASC"===e.sort?(0,f.jsx)(c.Trans,{id:"Lower is better (min: {formattedScore})",values:{formattedScore:t}}):(0,f.jsx)(c.Trans,{id:"Higher is better (max: {formattedScore})",values:{formattedScore:t}})}return"ASC"===e.sort?(0,f.jsx)(c.Trans,{id:"Lower is better"}):(0,f.jsx)(c.Trans,{id:"Higher is better"})},us=function(e){var t=e.onLoading,n=e.project,r=e.leaderboardIdToSelectAtOpening,s=(0,wa.k)(),d="small"===(0,T.L)(),p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=(0,ft.Z)(),v=x.showConfirmation,b=x.showDeleteConfirmation,j=u.useState(!1),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=u.useContext(ir.ZP).limits,S=u.useState(!1),P=(0,a.Z)(S,2),I=P[0],M=P[1],F=u.useState(!1),O=(0,a.Z)(F,2),R=O[0],N=O[1],V=u.useState(!1),W=(0,a.Z)(V,2),z=W[0],G=W[1],Y=u.useState(!1),q=(0,a.Z)(Y,2),X=q[0],K=q[1],$=u.useState(""),te=(0,a.Z)($,2),ne=te[0],re=te[1],oe=u.useState(null),le=(0,a.Z)(oe,2),ce=le[0],ue=le[1],de=u.useState(""),pe=(0,a.Z)(de,2),he=pe[0],fe=pe[1],ge=u.useRef(null),me=u.useRef(null),xe=u.useState(null),ve=(0,a.Z)(xe,2),be=ve[0],je=ve[1],Ce=u.useState(!1),ye=(0,a.Z)(Ce,2),Ze=ye[0],ke=ye[1],Te=u.useContext(Sa),Ee=Te.leaderboards,Se=Te.listLeaderboards,Pe=Te.currentLeaderboard,Ie=Te.createLeaderboard,Ae=Te.selectLeaderboard,Le=Te.updateLeaderboard,Me=Te.resetLeaderboard,Fe=Te.deleteLeaderboard,Oe=Te.deleteLeaderboardEntry,Re=Te.displayOnlyBestEntry,Be=Te.setDisplayOnlyBestEntry,_e=Te.fetchLeaderboardEntries,He=Te.browsing,Ve=He.entries,We=He.goToNextPage,ze=He.goToPreviousPage,Ge=He.goToFirstPage,Ye=u.useContext(nr.o).openSubscriptionDialog,qe=u.useCallback((function(e){K(e),t(e)}),[t]),Xe=function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(null),void 0===n.name||0!==n.name.length){e.next=4;break}return ue(t._({id:"Please enter a name that is at least one character long and 50 at most."})),e.abrupt("return");case 4:return qe(!0),je(null),e.prev=6,e.next=9,Le(n);case 9:n.name&&N(!1),void 0!==n.autoPlayerNamePrefix&&G(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("An error occurred when updating leaderboard",e.t0),je(ls(n));case 17:return e.prev=17,qe(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,13,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),Je=u.useCallback((function(){var e=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),je(null),e.prev=2,e.next=5,Se();case 5:e.next=14;break;case 7:if(e.prev=7,e.t0=e.catch(2),!e.t0.response||404!==e.t0.response.status){e.next=12;break}return ke(!0),e.abrupt("return");case 12:console.error("An error occurred when fetching leaderboards",e.t0),je({action:"leaderboardsFetching",message:(0,f.jsx)(c.Trans,{id:"An error occurred when fetching the leaderboards, please close the dialog and reopen it."})});case 14:return e.prev=14,K(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,7,14,17]])})));return function(){return e.apply(this,arguments)}}();e()}),[Se]),Ke=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe(!0),je(null),e.prev=2,e.next=5,_e();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred when fetching leaderboard entries",e.t0),je({action:"entriesFetching",message:(0,f.jsx)(c.Trans,{id:"An error occurred when fetching the entries of the leaderboard, please try again."})});case 11:return e.prev=11,qe(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,7,11,14]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe(!0),je(null),e.prev=2,!w||!Ee){e.next=8;break}if(!((t=w.capabilities.leaderboards)&&t.maximumCountPerGame>0&&Ee.length>=t.maximumCountPerGame)){e.next=8;break}return k(!0),e.abrupt("return");case 8:return e.next=10,Ie({name:"New leaderboard",sort:"ASC"});case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("An error occurred when creating leaderboard",e.t0),je({action:"leaderboardCreation",message:(0,f.jsx)(c.Trans,{id:"An error occurred when creating a new leaderboard, please close the dialog, come back and try again."})});case 16:return e.prev=16,qe(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v({title:{id:"Reset leaderboard {0}",values:{0:Pe.name}},message:{id:"All current entries will be deleted, are you sure you want to reset this leaderboard? This can't be undone."},confirmButtonLabel:{id:"Reset leaderboard"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return qe(!0),je(null),e.prev=9,e.next=12,Me();case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when resetting leaderboard",e.t0),je({action:"leaderboardReset",message:e.t0.status&&409===e.t0.status?(0,f.jsx)(c.Trans,{id:"This leaderboard is already resetting, please wait a bit, close the dialog, come back and try again."}):(0,f.jsx)(c.Trans,{id:"An error occurred when resetting the leaderboard, please close the dialog, come back and try again."})});case 18:return e.prev=18,qe(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,14,18,21]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b({title:{id:"Delete leaderboard {0}",values:{0:Pe.name}},message:{id:"Are you sure you want to delete this leaderboard and all of its entries? This can't be undone."},confirmButtonLabel:{id:"Delete Leaderboard"},confirmText:Pe.name,fieldMessage:{id:"Type the name of the leaderboard:"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return qe(!0),je(null),e.prev=9,e.next=12,Fe();case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when deleting leaderboard",e.t0),je({action:"leaderboardDeletion",message:(0,f.jsx)(c.Trans,{id:"An error occurred when deleting the leaderboard, please close the dialog, come back and try again."})});case 18:return e.prev=18,qe(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,14,18,21]])})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=(0,o.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v({title:{id:"Delete score {0} from {1}",values:{0:n.score,1:n.playerName}},message:{id:"Are you sure you want to delete this entry? This can't be undone."},confirmButtonLabel:{id:"Delete Entry"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return qe(!0),je(null),e.prev=9,e.next=12,Oe(n.id);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when deleting entry",e.t0),je({action:"entryDeletion",message:(0,f.jsx)(c.Trans,{id:"An error occurred when deleting the entry, please try again."}),itemId:n.id});case 18:return e.prev=18,qe(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}();u.useEffect((function(){R&&ge.current&&ge.current.focus()}),[R]),u.useEffect((function(){null===Ee&&Je()}),[Ee,Je]),u.useEffect((function(){Pe&&Ke()}),[]),u.useEffect((function(){r&&Ae(r)}),[r,Ae]);var rt=u.useCallback((function(){Pe&&navigator.clipboard.writeText(Pe.id)}),[Pe]);if(!s)return(0,f.jsx)(as,{children:(0,f.jsx)(vr.Z,{children:(0,f.jsx)(c.Trans,{id:"An internet connection is required to administrate your game's leaderboards."})})});if(Ze)return(0,f.jsx)(as,{children:(0,f.jsx)(aa.C,{project:n,onGameRegistered:function(){ke(!1),Je()}})});if(be&&"leaderboardCreation"===be.action)return(0,f.jsx)(as,{children:(0,f.jsx)(we.Z,{kind:"error",children:be.message})});if(be&&"leaderboardsFetching"===be.action)return(0,f.jsx)(as,{children:(0,f.jsx)(vr.Z,{onRetry:Je,children:be.message})});if(null===Ee)return X?(0,f.jsx)(Qe.Z,{}):(0,f.jsx)(as,{children:(0,f.jsx)(vr.Z,{onRetry:Je,children:(0,f.jsx)(c.Trans,{id:"An error occurred when retrieving leaderboards, please try again later."})})});if(Ee&&0===Ee.length)return(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"Create your game's first leaderboard"}),description:(0,f.jsx)(c.Trans,{id:"Leaderboards help retain your players"}),actionLabel:(0,f.jsx)(c.Trans,{id:"Create a leaderboard"}),onAction:function(){$e()},actionButtonId:"add-new-leaderboard-button",isLoading:X})});var ot=function(e,t){return[{key:"name",avatar:(0,f.jsx)(xa,{}),text:R?(0,f.jsxs)(L.x1,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,f.jsx)(po.ZP,{id:"edit-name-field",ref:ge,margin:"none",style:ss.leaderboardNameTextField,maxLength:50,value:ne,errorText:ce,onChange:function(e,t){return re(t)},onKeyPress:function(t){(0,Io.ph)(t)&&!X&&Xe(e,{name:ne})},disabled:X}),!X&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(A.Z,{tooltip:{id:"Cancel"},style:{padding:0},onClick:function(){N(!1)},children:(0,f.jsx)(bi.Z,{})})]})]}):(0,f.jsx)(De.ZP,{title:t.name,children:(0,f.jsx)(J.Z,{size:"body2",style:ss.leaderboardNameText,children:t.name})}),secondaryText:be&&"leaderboardNameUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:function(){R?Xe(e,{name:ne}):(re(t.name),N(!0))},tooltip:R?{id:"Save"}:{id:"Rename"},disabled:X,edge:"end",id:R?"save-name-button":"edit-name-button",children:R?X?(0,f.jsx)(pi.Z,{size:20}):(0,f.jsx)(D,{}):(0,f.jsx)(Pt.Z,{})})},{key:"id",avatar:(0,f.jsx)(va,{}),text:(0,f.jsx)(De.ZP,{title:t.id,children:(0,f.jsx)(J.Z,{size:"body2",children:(0,Ta.GA)(t.id)})}),secondaryText:null,secondaryAction:(0,f.jsx)(A.Z,{onClick:rt,tooltip:{id:"Copy"},edge:"end",children:(0,f.jsx)(An.Z,{})})},{key:"startDatetime",avatar:(0,f.jsx)(ba,{}),text:t.resetLaunchedAt?(0,f.jsx)(J.Z,{size:"body2",children:(0,f.jsx)(c.Trans,{id:"Reset requested the {0} . Please wait a few minutes...",values:{0:e.date(t.resetLaunchedAt,{dateStyle:"short",timeStyle:"short"})}})}):(0,f.jsx)(De.ZP,{title:e._({id:"Date from which entries are taken into account: {0}",values:{0:e.date(t.startDatetime,{dateStyle:"short",timeStyle:"short"})}}),children:(0,f.jsx)(J.Z,{size:"body2",children:e.date(t.startDatetime)})}),secondaryText:be&&"leaderboardReset"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:function(){return et(e)},tooltip:{id:"Reset leaderboard"},edge:"end",disabled:X||R||!!t.resetLaunchedAt,children:(0,f.jsx)(Ne,{})})},{key:"sort",avatar:(0,f.jsx)(ja,{}),text:(0,f.jsx)(J.Z,{size:"body2",children:cs(t)}),secondaryText:be&&"leaderboardSortUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:function(){return M(!0)},tooltip:{id:"Edit"},edge:"end",disabled:X||R,children:(0,f.jsx)(Pt.Z,{})})},{key:"visibility",avatar:"HIDDEN"===t.visibility?(0,f.jsx)(Za,{}):(0,f.jsx)(ya.Z,{}),text:(0,f.jsx)(De.ZP,{title:e._("HIDDEN"===t.visibility?{id:"Anyone with the link can see it, but it is not listed in your game's leaderboards."}:{id:"Anyone can access it."}),children:(0,f.jsx)(J.Z,{size:"body2",children:"HIDDEN"===t.visibility?(0,f.jsx)(c.Trans,{id:"Not visible"}):(0,f.jsx)(c.Trans,{id:"Public"})})}),secondaryText:be&&"leaderboardVisibilityUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:(0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xe(e,{visibility:"HIDDEN"===t.visibility?"PUBLIC":"HIDDEN"});case 2:case"end":return n.stop()}}),n)}))),tooltip:"HIDDEN"===t.visibility?{id:"Make the leaderboard public"}:{id:"Hide the leaderboard"},edge:"end",disabled:X||R,children:(0,f.jsx)(Fn,{})})},{key:"ignoreCustomPlayerNames",avatar:t.ignoreCustomPlayerNames?(0,f.jsx)(Ni,{}):(0,f.jsx)(ka,{}),text:(0,f.jsx)(De.ZP,{title:e._(t.ignoreCustomPlayerNames?{id:"Even if the action is used to send a score with a custom player username, this name will be ignored by the leaderboard."}:{id:"The player name sent in the action to send a score will be used."}),children:(0,f.jsx)(J.Z,{size:"body2",children:t.ignoreCustomPlayerNames?(0,f.jsx)(c.Trans,{id:"Ignore unauthenticated player usernames"}):(0,f.jsx)(c.Trans,{id:"Allow unauthenticated player usernames"})})}),secondaryText:be&&"leaderboardIgnoreCustomPlayerNamesUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:(0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xe(e,{ignoreCustomPlayerNames:!t.ignoreCustomPlayerNames});case 2:case"end":return n.stop()}}),n)}))),tooltip:t.ignoreCustomPlayerNames?{id:"Change to allow custom player usernames"}:{id:"Change to ignore custom player usernames"},edge:"end",disabled:X||R,children:(0,f.jsx)(Fn,{})})},{key:"autoPlayerNamePrefix",avatar:(0,f.jsx)(xa,{}),text:z?(0,f.jsxs)(L.x1,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,f.jsx)(po.ZP,{id:"edit-autoPlayerNamePrefix-field",ref:me,margin:"none",style:ss.leaderboardNameTextField,maxLength:40,value:he,onChange:function(e,t){return fe(t)},onKeyPress:function(t){(0,Io.ph)(t)&&!X&&Xe(e,{autoPlayerNamePrefix:he})},disabled:X}),!X&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(A.Z,{tooltip:{id:"Cancel"},style:{padding:0},onClick:function(){G(!1)},children:(0,f.jsx)(bi.Z,{})})]})]}):(0,f.jsx)(De.ZP,{title:t.autoPlayerNamePrefix||e._("No custom prefix for auto-generated player names"),children:(0,f.jsx)(J.Z,{size:"body2",style:ss.leaderboardNameText,children:t.autoPlayerNamePrefix||e._("No custom prefix for auto-generated player names")})}),secondaryText:be&&"leaderboardAutoPlayerNamePrefixUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:function(){z?Xe(e,{autoPlayerNamePrefix:he}):(fe(t.autoPlayerNamePrefix||""),G(!0))},tooltip:z?{id:"Save"}:{id:"Change the default prefix for player names"},disabled:X,edge:"end",id:z?"save-autoPlayerNamePrefix-button":"edit-autoPlayerNamePrefix-button",children:z?X?(0,f.jsx)(pi.Z,{size:20}):(0,f.jsx)(D,{}):(0,f.jsx)(Pt.Z,{})})},{key:"appearance",avatar:(0,f.jsx)(ga.Z,{}),text:(0,f.jsx)(J.Z,{size:"body2",children:(0,f.jsx)(c.Trans,{id:"Leaderboard appearance"})}),secondaryText:be&&"leaderboardAppearanceUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:(0,f.jsx)(A.Z,{onClick:function(){return m(!0)},tooltip:{id:"Edit"},edge:"end",disabled:X||R,children:(0,f.jsx)(ma,{})})},{key:"playerUnicityDisplayChoice",avatar:(0,f.jsx)(Ca.Z,{}),text:(0,f.jsxs)(B.Z,{fullWidth:!0,margin:"none",value:t.playerUnicityDisplayChoice,onChange:function(t,n,r){Xe(e,{playerUnicityDisplayChoice:r})},disabled:X||R,inputStyle:{fontSize:14},helperMarkdownText:"FREE"===t.playerUnicityDisplayChoice?e._({id:"Users can chose to see only players' best entries or not."}):"PREFER_UNIQUE"===t.playerUnicityDisplayChoice?e._({id:"Only player's best entries are displayed."}):e._({id:"All entries are displayed."}),children:[(0,f.jsx)(U.Z,{value:"FREE",label:{id:"Let the user select"}},"free"),(0,f.jsx)(U.Z,{value:"PREFER_UNIQUE",label:{id:"Only best entry"}},"prefer-unique"),(0,f.jsx)(U.Z,{value:"PREFER_NON_UNIQUE",label:{id:"All entries"}},"prefer-non-unique")]}),secondaryText:be&&"leaderboardPlayerUnicityDisplayChoiceUpdate"===be.action?(0,f.jsx)(J.Z,{color:"error",size:"body2",children:be.message}):null,secondaryAction:null}]};return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[Z&&w&&(0,f.jsx)(os,{onUpgrade:function(){return Ye({reason:"Leaderboard count per game limit reached"})},onClose:function(){return k(!1)},limits:w}),(0,f.jsxs)(C.ep,{noMargin:!0,expand:!0,noColumnMargin:!0,id:"leaderboard-administration-panel",children:[(0,f.jsx)("div",{style:ss.leftColumn,children:(0,f.jsx)(ee.Z,{elevation:3,style:ss.leaderboardConfigurationPaper,background:"light",children:(0,f.jsxs)(L.sg,{children:[(0,f.jsxs)(L.x1,{noMargin:!0,children:[Pe&&Ee?(0,f.jsx)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Leaderboard name"}),value:Pe.id,onChange:function(e,t,n){Ae(n)},children:Ee.map((function(e){return(0,f.jsx)(U.Z,{value:e.id,label:e.primary?{id:"{0} (default)",values:{0:e.name}}:e.name,shouldNotTranslate:!e.primary},e.id)}))}):null,(0,f.jsx)(A.Z,{onClick:$e,disabled:R||X,children:(0,f.jsx)(Ue.Z,{})})]}),Pe?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Q.Z,{children:ot(t,Pe).map((function(e,t){return(0,f.jsxs)(u.Fragment,{children:[t>0?(0,f.jsx)(Fr.Z,{component:"li"},"divider-".concat(e.key)):null,(0,f.jsxs)(ie.Z,{disableGutters:!0,children:[(0,f.jsx)(fa.Z,{children:(0,f.jsx)(ha.Z,{children:e.avatar})}),(0,f.jsx)(ae.Z,{disableTypography:!0,secondary:e.secondaryText,children:e.text}),e.secondaryAction?(0,f.jsx)(se.Z,{children:e.secondaryAction}):null]},e.key)]},"fragment-".concat(e.key))}))}),(0,f.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(Dn.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Delete"}),disabled:X||R,onClick:function(){return tt(t)}}),(0,f.jsx)(E.Z,{label:Pe.primary?(0,f.jsx)(c.Trans,{id:"Default"}):(0,f.jsx)(c.Trans,{id:"Set as default"}),disabled:X||R||Pe.primary,onClick:function(){return Xe(t,{primary:!0})}})]}),!be||"leaderboardDeletion"!==be.action&&"leaderboardPrimaryUpdate"!==be.action?null:(0,f.jsx)(vr.Z,{children:be.message})]}):null]})})}),(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},ss.rightColumn),{},{paddingLeft:d?0:20}),children:[(0,f.jsxs)(L.x1,{alignItems:"center",justifyContent:"flex-end",children:[(0,f.jsx)(H.Z,{labelPosition:"left",toggled:Re,onToggle:function(e,t){return Be(t)},label:(0,f.jsx)(De.ZP,{title:t._({id:"When checked, will only display the best score of each player (only for the display below)."}),children:(0,f.jsx)(J.Z,{size:"body2",children:(0,f.jsx)(c.Trans,{id:"Player best entry"})})})}),(0,f.jsx)(L.hS,{}),(0,f.jsx)(Fr.Z,{orientation:"vertical"}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(A.Z,{onClick:Ke,disabled:X||R,tooltip:{id:"Refresh"},size:"small",children:(0,f.jsx)(Ne,{})}),(0,f.jsx)(L.LZ,{})]}),be&&"entriesFetching"===be.action?(0,f.jsx)(as,{children:(0,f.jsx)(vr.Z,{onRetry:Ke,children:be.message})}):(0,f.jsx)(Ga,{entries:Ve,customizationSettings:Pe?Pe.customizationSettings:null,onDeleteEntry:function(e){return nt(t,e)},isLoading:X||R,navigation:{goToNextPage:We,goToPreviousPage:ze,goToFirstPage:Ge},erroredEntry:be&&"entryDeletion"===be.action&&be.itemId?{entryId:be.itemId,message:be.message}:void 0})]})]})]}),g?(0,f.jsx)($a,{open:!0,leaderboardCustomizationSettings:Pe?Pe.customizationSettings:void 0,onClose:function(){return m(!1)},onSave:function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe(t,{customizationSettings:n});case 3:return e.prev=3,m(!1),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(t){return e.apply(this,arguments)}}()}):null,I&&Pe?(0,f.jsx)(rs,{open:!0,onClose:function(){return M(!1)},onSave:function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe(t,(0,i.Z)({},n));case 3:return e.prev=3,M(!1),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(t){return e.apply(this,arguments)}}(),sort:Pe.sort,extremeAllowedScore:Pe.extremeAllowedScore}):null]})}})},ds=function(e){var t=e.gameId,n=(0,yt.Z)(e,is);return(0,f.jsx)(Aa,{gameId:t,children:(0,f.jsx)(us,(0,i.Z)({},n))})},ps=n(71039),hs=n(7374),fs=function(){var e=(0,o.Z)(l().mark((function e(t,n,r,o){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,Xe().get("".concat(Je.Jv.baseUrl,"/game-metrics"),{params:{userId:n,gameId:r,firstDayIsoDate:o},headers:{Authorization:i},validateStatus:function(e){return e>=200&&e<300||404===e}});case 5:if(404!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),gs=n(9159),ms=n(28648),xs=n(83013),vs=n(38465),bs=n(51111),js=n(70958),Cs=n(7627),ys=n(43770),Zs=n(68707),ks=n(25779),ws=n(96522),Ts={overview:{viewersCount:0,playersCount:0,bounceRatePercent:0,meanPlayedDurationInMinutes:0,nearestToMedianDuration:{playersCount:0,playersPercent:0,durationInMinutes:0},greaterDurationPlayerSurface:{playersCount:0,playersPercent:0,durationInMinutes:0}},overTime:[],overPlayedDuration:[]},Es={for1Minute:0,for3Minutes:1,for5Minutes:2,for10Minutes:3,for15Minutes:4},Ss=[1,3,5,10,15],Ps=function(e){return{date:(0,ps.Z)(e),sessions:{d0Sessions:0,d0SessionsDurationTotal:0},players:{d0Players:0,d0NewPlayers:0,d0PlayersBelow60s:0,d0PlayersBelow180s:0,d0PlayersBelow300s:0,d0PlayersBelow600s:0,d0PlayersBelow900s:0},retention:null}},Is=function(e){for(var t,n,r=[],o=0;o<e.length;o+=7){for(var i=e[o],a=o+1;a<o+7&&a<e.length;a++)t=i,n=e[a],i={date:t.date,startDate:n.date,sessions:t.sessions&&n.sessions&&{d0Sessions:t.sessions.d0Sessions+n.sessions.d0Sessions,d0SessionsDurationTotal:null!=t.sessions.d0SessionsDurationTotal&&null!=n.sessions.d0SessionsDurationTotal?t.sessions.d0SessionsDurationTotal+n.sessions.d0SessionsDurationTotal:void 0},players:t.players&&n.players&&{d0Players:t.players.d0Players+n.players.d0Players,d0NewPlayers:t.players.d0NewPlayers+n.players.d0NewPlayers,d0PlayersBelow60s:null!=t.players.d0PlayersBelow60s&&null!=n.players.d0PlayersBelow60s?t.players.d0PlayersBelow60s+n.players.d0PlayersBelow60s:void 0,d0PlayersBelow180s:null!=t.players.d0PlayersBelow180s&&null!=n.players.d0PlayersBelow180s?t.players.d0PlayersBelow180s+n.players.d0PlayersBelow180s:void 0,d0PlayersBelow300s:null!=t.players.d0PlayersBelow300s&&null!=n.players.d0PlayersBelow300s?t.players.d0PlayersBelow300s+n.players.d0PlayersBelow300s:void 0,d0PlayersBelow600s:null!=t.players.d0PlayersBelow600s&&null!=n.players.d0PlayersBelow600s?t.players.d0PlayersBelow600s+n.players.d0PlayersBelow600s:void 0,d0PlayersBelow900s:null!=t.players.d0PlayersBelow900s&&null!=n.players.d0PlayersBelow900s?t.players.d0PlayersBelow900s+n.players.d0PlayersBelow900s:void 0},retention:null};r.push(i)}return r},Ds=function(e,t){return null!=e&&t>0?100*(t-e)/t:0},As=function(e,t,n){return null!=e&&null!=t&&n>0?100*(e-t)/n:0},Ls=function(e,t){return null!=e&&null!=t?e-t:0},Ms=function(e){var t=[0,0,0,0,0],n=0,r=0,o=0;e.forEach((function(e){var i=e.sessions&&null!==e.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal:void 0,a=e.players?e.players.d0Players:0,s=e.players&&null!==e.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s:void 0,l=e.players&&null!==e.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s:void 0,c=e.players&&null!==e.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s:void 0,u=e.players&&null!==e.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s:void 0,d=e.players&&null!==e.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s:void 0;t[Es.for1Minute]+=s||0,t[Es.for3Minutes]+=l||0,t[Es.for5Minutes]+=c||0,t[Es.for10Minutes]+=u||0,t[Es.for15Minutes]+=d||0,o+=i||0,n+=a,r+=void 0!==s?a:0})),o/=60;var i=r,a=r-t[Es.for1Minute],s=function(e,t){var n=e.findIndex((function(e,n){return n>0&&e>t/2})),r=e[n],o=e[n+1];return o&&Math.abs(r-t/2)<Math.abs(o-t/2)?n:n+1}(t,a),l=function(e,t){for(var n=0,r=0,o=0;o<e.length;o++){var i=(t-e[o])*Ss[o];i>=n&&(n=i,r=o)}return r}(t,i),c={month:"short",day:"numeric"},u={day:"numeric"},d=function(e){var t=e.startDate,n=(0,_i.Z)(e.date),r=n.toLocaleDateString(void 0,c);if(!t)return r;var o=(0,_i.Z)(t);return o.toLocaleDateString(void 0,n.getMonth()===o.getMonth()?u:c)+"-"+r};return{overview:{viewersCount:n,playersCount:a,bounceRatePercent:i>0?100*t[Es.for1Minute]/i:0,meanPlayedDurationInMinutes:i>0?o/i:0,nearestToMedianDuration:{playersCount:i-t[s],playersPercent:i>0?100*(i-t[s])/i:0,durationInMinutes:Ss[s]},greaterDurationPlayerSurface:{playersCount:i-t[l],playersPercent:i>0?100*(i-t[l])/i:0,durationInMinutes:Ss[l]}},overTime:e.map((function(e){var t=e.sessions&&null!==e.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal:void 0,n=e.players?e.players.d0Players:0,r=e.players&&null!==e.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s:void 0,o=e.players&&null!==e.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s:void 0,i=e.players&&null!==e.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s:void 0,a=e.players&&null!==e.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s:void 0,s=e.players&&null!==e.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s:void 0;return{timestamp:(0,_i.Z)(e.date).getTime(),date:d(e),meanPlayedDurationInMinutes:t?t/60/n:0,bounceRatePercent:As(r,0,n),viewersCount:n,playersCount:Ls(n,r),over60sPlayersCount:Ls(n,r),over180sPlayersCount:Ls(n,o),over300sPlayersCount:Ls(n,i),over600sPlayersCount:Ls(n,a),over900sPlayersCount:Ls(n,s),below60sPlayersCount:Ls(r,0),from60sTo180sPlayersCount:Ls(o,r),from180sTo300sPlayersCount:Ls(i,o),from300sTo600sPlayersCount:Ls(a,i),from600sTo900sPlayersCount:Ls(s,a),from900sToInfinityPlayersCount:Ls(n,s),over0sPlayersPercent:100,over60sPlayersPercent:Ds(r,n),over180sPlayersPercent:Ds(o,n),over300sPlayersPercent:Ds(i,n),over600sPlayersPercent:Ds(a,n),over900sPlayersPercent:Ds(s,n),below60sPlayersPercent:As(r,0,n),from60sTo180sPlayersPercent:As(o,r,n),from180sTo300sPlayersPercent:As(i,o,n),from300sTo600sPlayersPercent:As(a,i,n),from600sTo900sPlayersPercent:As(s,a,n),from900sToInfinityPlayersPercent:As(n,s,n)}})).sort((function(e,t){return e.timestamp-t.timestamp})),overPlayedDuration:[{duration:0,playersCount:r}].concat(Object.keys(Es).map((function(e){var n=Es[e];return{duration:Ss[n],playersCount:r-t[n]}})))}},Fs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return{yearChartData:Ts,monthChartData:Ts};var n=function(e,t){var n,r=[],o=(0,ks.Z)(t,1),i=(0,an.Z)(e);try{for(i.s();!(n=i.n()).done;){for(var a=n.value,s=(0,_i.Z)(a.date);(0,ws.Z)((0,_i.Z)(a.date),o)<-1;){var l=(0,hs.Z)(o,1);r.push(Ps(l)),o=l}r.push(a),o=s}}catch(u){i.e(u)}finally{i.f()}for(;r.length<364;){var c=(0,hs.Z)(o,1);r.push(Ps(c)),o=c}return r}(e.sort((function(e,t){return(0,_i.Z)(t.date).getTime()-(0,_i.Z)(e.date).getTime()})),t);return{yearChartData:Ms(Is(n)),monthChartData:Ms(n.slice(0,30).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{startDate:null})})))}},Os={top:5,bottom:5,right:25,left:0},Rs="99%",Bs=300,_s=function(e){return e.toFixed(2)},Ns=function(e){return e.toFixed(2)},Us=function(e){var t=e.payload,n=e.label,r=e.customStyle;return t?(0,f.jsx)(ee.Z,{style:r,background:"light",children:(0,f.jsxs)(C.ak,{children:[(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:n}),t.length>0&&t.map((function(e,t){var n=e.name,r=e.unit,o=e.value;return(0,f.jsx)(J.Z,{noMargin:!0,children:"".concat(n,": ").concat(Number.isInteger(o)?o.toString():o.toFixed(2)).concat(r?" ".concat(r):"")},t)}))]})}):null},Hs=function(e){var t=e.game,n=u.useContext(ir.ZP),r=n.getAuthorizationHeader,s=n.profile,d=u.useState(null),p=(0,a.Z)(d,2),h=p[0],g=p[1],x=u.useMemo((function(){return Fs(h)}),[h]),v=x.yearChartData,b=x.monthChartData,j=u.useState("month"),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w="year"===Z?v:b,T=u.useState(null),E=(0,a.Z)(T,2),S=E[0],P=E[1],I=u.useState(!1),D=(0,a.Z)(I,2),A=D[0],M=D[1],F=(0,ps.Z)((0,hs.Z)(new Date,364),{representation:"date"}),O=u.useCallback((0,o.Z)(l().mark((function e(){var n,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return n=s.id,M(!0),P(null),e.prev=5,e.next=8,fs(r,n,t.id,F);case 8:o=e.sent,g(o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Unable to load game rolling metrics:",e.t0),P(e.t0);case 16:M(!1);case 17:case"end":return e.stop()}}),e,null,[[5,12]])}))),[r,s,t,F]);u.useEffect((function(){O()}),[O]);var R=u.useContext(m.Z),_={tableRowStatColumn:{width:100},tooltipContent:{color:R.chart.textColor,padding:10},tickLabel:{fontFamily:R.chart.fontFamily},chartLineDot:{fill:R.chart.dataColor1,strokeWidth:0}};return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return S?(0,f.jsxs)(vr.Z,{onRetry:function(){O()},children:[(0,f.jsx)(c.Trans,{id:"There was an issue getting the game analytics."})," ",(0,f.jsx)(c.Trans,{id:"Verify your internet connection or try again later."})]}):(0,f.jsxs)(C.ak,{expand:!0,children:[A&&(0,f.jsx)(Qe.Z,{}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsxs)(B.Z,{value:Z,onChange:function(e,t,n){k(n)},disableUnderline:!0,children:[(0,f.jsx)(U.Z,{value:"month",label:{id:"Month"}},"month"),(0,f.jsx)(U.Z,{value:"year",label:{id:"Year"}},"year")]})}),A||h&&0!==h.length?null:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:"There were no players or stored metrics for this period. Be sure to publish your game and get players to try it to see the collected anonymous analytics."})}),(0,f.jsxs)(C.ep,{expand:!0,noMargin:!0,justifyContent:"center",children:[(0,f.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsx)(J.Z,{size:"block-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"{0} sessions",values:{0:w.overview.playersCount}})}),(0,f.jsx)(gs.h,{width:Rs,height:Bs,children:(0,f.jsxs)(ms.T,{data:w.overTime,margin:Os,children:[(0,f.jsx)(xs.u,{name:t._({id:"Viewers"}),type:"monotone",dataKey:"viewersCount",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.125,yAxisId:0}),(0,f.jsx)(xs.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"playersCount",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.25,yAxisId:0}),(0,f.jsx)(vs.q,{stroke:R.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(bs.K,{dataKey:"date",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(js.B,{dataKey:"viewersCount",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(Cs.u,{content:function(e){return Us((0,i.Z)((0,i.Z)({},e),{},{customStyle:_.tooltipContent}))}})]})})]}),(0,f.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsx)(J.Z,{size:"block-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"{0}% bounce rate",values:{0:Math.round(w.overview.bounceRatePercent)}})}),(0,f.jsx)(gs.h,{width:Rs,height:Bs,children:(0,f.jsxs)(ys.w,{data:w.overTime,margin:Os,children:[(0,f.jsx)(Zs.x,{name:t._({id:"Bounce rate"}),unit:"%",formatter:_s,type:"monotone",dataKey:"bounceRatePercent",stroke:R.chart.dataColor1,dot:_.chartLineDot,yAxisId:0}),(0,f.jsx)(vs.q,{stroke:R.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(bs.K,{dataKey:"date",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(js.B,{dataKey:"bounceRatePercent",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(Cs.u,{content:function(e){return Us((0,i.Z)((0,i.Z)({},e),{},{customStyle:_.tooltipContent}))}})]})})]})]}),(0,f.jsxs)(C.ep,{expand:!0,noMargin:!0,justifyContent:"center",children:[(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{size:"block-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"{0} minutes per player",values:{0:Math.round(w.overview.meanPlayedDurationInMinutes)}})}),(0,f.jsx)(gs.h,{width:Rs,height:Bs,children:(0,f.jsxs)(ys.w,{data:w.overTime,margin:Os,children:[(0,f.jsx)(Zs.x,{name:t._({id:"Mean played time"}),unit:" "+t._({id:"minutes"}),formatter:_s,type:"monotone",dataKey:"meanPlayedDurationInMinutes",stroke:R.chart.dataColor1,dot:_.chartLineDot,yAxisId:0}),(0,f.jsx)(vs.q,{stroke:R.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(bs.K,{dataKey:"date",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(js.B,{dataKey:"meanPlayedDurationInMinutes",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(Cs.u,{content:function(e){return Us((0,i.Z)((0,i.Z)({},e),{},{customStyle:_.tooltipContent}))}})]})})]}),(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{size:"block-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"{0} players with more than {1} minutes",values:{0:w.overview.greaterDurationPlayerSurface.playersCount,1:w.overview.greaterDurationPlayerSurface.durationInMinutes}})}),(0,f.jsx)(gs.h,{width:Rs,height:Bs,children:(0,f.jsxs)(ms.T,{data:w.overPlayedDuration,margin:Os,children:[(0,f.jsx)(xs.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"playersCount",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.25,yAxisId:0}),(0,f.jsx)(bs.K,{name:t._({id:"Played time"}),dataKey:"duration",type:"number",domain:[0,Ss[Ss.length-1]],ticks:Ss,stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(js.B,{dataKey:"playersCount",stroke:"#f5f5f5",style:_.tickLabel,domain:[0,"dataMax"]}),(0,f.jsx)(vs.q,{stroke:R.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(Cs.u,{content:function(e){return Us((0,i.Z)((0,i.Z)({},e),{},{customStyle:_.tooltipContent}))}})]})})]})]}),(0,f.jsx)(C.ep,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{size:"block-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"{0} % of players with more than {1} minutes",values:{0:Math.round(w.overview.nearestToMedianDuration.playersPercent),1:w.overview.nearestToMedianDuration.durationInMinutes}})}),(0,f.jsx)(gs.h,{width:Rs,height:Bs,children:(0,f.jsxs)(ms.T,{data:w.overTime,margin:Os,children:[(0,f.jsx)(xs.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"over60sPlayersPercent",formatter:Ns,unit:" %",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(xs.u,{name:t._({id:"Played > 3 minutes"}),type:"monotone",dataKey:"over180sPlayersPercent",formatter:Ns,unit:" %",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(xs.u,{name:t._({id:"Played > 5 minutes"}),type:"monotone",dataKey:"over300sPlayersPercent",formatter:Ns,unit:" %",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(xs.u,{name:t._({id:"Played > 10 minutes"}),type:"monotone",dataKey:"over600sPlayersPercent",formatter:Ns,unit:" %",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(xs.u,{name:t._({id:"Played > 15 minutes"}),type:"monotone",dataKey:"over900sPlayersPercent",formatter:Ns,unit:" %",stroke:R.chart.dataColor1,fill:R.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(vs.q,{stroke:R.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(bs.K,{dataKey:"date",stroke:R.chart.textColor,style:_.tickLabel}),(0,f.jsx)(js.B,{dataKey:"over60sPlayersPercent",stroke:R.chart.textColor,style:_.tickLabel,unit:" %"}),(0,f.jsx)(Cs.u,{content:function(e){return Us((0,i.Z)((0,i.Z)({},e),{},{customStyle:_.tooltipContent}))}})]})})]})})]})]})}})},Vs=n(64480),Ws=function(e){var t=e.value,n=e.label;return(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,f.jsx)(J.Z,{size:"body2",children:n}),(0,f.jsx)(J.Z,{size:"body2",children:(0,Ba.R)(t,1)})]}),(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(Vs.Z,{variant:"determinate",value:10*t,style:{height:8,borderRadius:8}})})]})},zs=n(68009),Gs=n(86778),Ys=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,f.jsx)("path",{d:"M2.66699 12C2.66699 6.47716 7.14415 2 12.667 2C18.1899 2 22.667 6.47716 22.667 12C22.667 17.5229 18.1899 22 12.667 22C7.14415 22 2.66699 17.5229 2.66699 12Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.4149 8.88269C15.8939 9.15755 16.0595 9.7687 15.7846 10.2477L13.491 14.245C12.6854 15.6487 10.6332 15.5644 9.94566 14.0993L9.51192 13.1748C9.27734 12.6748 9.49249 12.0793 9.99248 11.8447C10.4925 11.6102 11.088 11.8253 11.3225 12.3253L11.7562 13.2496L14.0499 9.25237C14.3247 8.77334 14.9359 8.60783 15.4149 8.88269Z",fill:"#32323B"})]}))})),qs=n(82422),Xs={textComment:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},backgroundText:{padding:0,textAlign:"left"}},Js=function(e){return e?1===e.version?[{key:"rating-sound",label:(0,f.jsx)(c.Trans,{id:"Sound"}),value:e.sound},{key:"rating-visuals",label:(0,f.jsx)(c.Trans,{id:"Visuals"}),value:e.visuals},{key:"rating-fun",label:(0,f.jsx)(c.Trans,{id:"Fun"}),value:e.fun},{key:"rating-ease-of-use",label:(0,f.jsx)(c.Trans,{id:"Ease of use"}),value:e.easeOfUse}]:void 0:null},Ks=function(e){var t=e.comment,n=e.buildProperties,r=e.authenticatedUser,i=e.onCommentUpdated,s=r.getAuthorizationHeader,d=r.profile,p=Js(t.ratings),h=u.useContext(m.Z),g=u.useState(!1),x=(0,a.Z)(g,2),v=x[0],b=x[1],j=function(){var e=(0,o.Z)(l().mark((function e(n,r){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Ta.uA)(s,d.id,{gameId:t.gameId,commentId:t.id,processed:n});case 5:o=e.sent,i(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update comment: ",e.t0),(0,Xr.gR)({message:r._({id:"Unable to change read status of feedback."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"feedback-card-set-processed-error"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e,t){var n=u.useState(null),r=(0,a.Z)(n,2),i=r[0],s=r[1],c=(0,zs.N)(function(){var e=(0,o.Z)(l().mark((function e(n){var r,o,i,a=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,r=a.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=a[i];return e.next=4,t.apply(void 0,[n].concat(o));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error while updating optimistic state: ",e.t0);case 9:return e.prev=9,s(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),500);return[null!==i?i:e,function(e,t){s(e),c(e,t)}]}(!!t.processedAt,j),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1];return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(na.Z,{disabled:k,cardCornerAction:(0,f.jsx)(A.Z,{size:"small",tooltip:k?{id:"Mark as unread"}:{id:"Mark as read"},onClick:function(){return w(!k,r)},children:k?(0,f.jsx)(Ys,{htmlColor:h.message.valid}):(0,f.jsx)(qs.Z,{})}),header:(0,f.jsx)(Li.Z,{style:Xs.backgroundText,children:(0,f.jsx)(c.Trans,{id:"{0}",values:{0:r.date(t.createdAt)}})}),children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"start",children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[n&&(0,f.jsxs)(J.Z,{color:"primary",children:[n.name||(0,Ta.GA)(n.id),n.isDeleted&&(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(c.Trans,{id:"(deleted)"})]})]}),t.playerId?(0,f.jsx)(ve.Z,{onClick:function(){return b(!0)},href:"#",children:(0,f.jsx)(J.Z,{noMargin:!0,color:"inherit",children:t.playerName||"Anonymous player"})}):(0,f.jsx)(Li.Z,{style:Xs.backgroundText,children:t.playerName||"Anonymous player"}),t.contact&&(0,f.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Li.Z,{style:Xs.backgroundText,children:(0,f.jsx)(c.Trans,{id:"Contact:"})}),(0,f.jsx)(J.Z,{allowSelection:!0,children:t.contact})]})]})}),(0,f.jsx)(L.LZ,{}),p&&(0,f.jsx)(C.ep,{noColumnMargin:!0,expand:!0,children:p.map((function(e){return(0,f.jsxs)(L.x1,{expand:!0,noMargin:!0,children:[(0,f.jsx)(Ws,{label:e.label,value:e.value}),(0,f.jsx)(L.LZ,{})]},e.key)}))}),(0,f.jsx)(L.hS,{}),(0,f.jsx)(J.Z,{style:Xs.textComment,allowSelection:!0,children:t.text})]})}),t.playerId&&v&&(0,f.jsx)(Gs.Z,{userId:t.playerId,onClose:function(){return b(!1)}})]})}})},Qs=n(10959),$s=function(e){var t=e.feedbacks;if(0===t.length)return null;var n=t.map((function(e){return e.ratings})).filter(Boolean),r=n.reduce((function(e,t){return t?{sound:e.sound+t.sound,visuals:e.visuals+t.visuals,fun:e.fun+t.fun,easeOfUse:e.easeOfUse+t.easeOfUse,version:1}:e}),{sound:0,visuals:0,fun:0,easeOfUse:0,version:1}),o={sound:r.sound/n.length,visuals:r.visuals/n.length,fun:r.fun/n.length,easeOfUse:r.easeOfUse/n.length,version:1},i=Js(o);return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsx)(na.Z,{background:"dark",children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"start",children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{color:"primary",size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Average user feedback"})})})}),(0,f.jsx)(L.LZ,{}),i&&(0,f.jsx)(C.ep,{noColumnMargin:!0,expand:!0,children:i.map((function(e){return(0,f.jsxs)(L.x1,{expand:!0,noMargin:!0,children:[(0,f.jsx)(Ws,{label:e.label,value:e.value}),(0,f.jsx)(L.LZ,{})]},e.key)}))})]})})}})},el=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3C0 2.58579 0.335786 2.25 0.75 2.25H3.25C3.66421 2.25 4 2.58579 4 3C4 3.41421 3.66421 3.75 3.25 3.75H0.75C0.335786 3.75 0 3.41421 0 3Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3C8 2.58579 8.33579 2.25 8.75 2.25H15.25C15.6642 2.25 16 2.58579 16 3C16 3.41421 15.6642 3.75 15.25 3.75H8.75C8.33579 3.75 8 3.41421 8 3Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 1.5C5.17157 1.5 4.5 2.17157 4.5 3C4.5 3.82843 5.17157 4.5 6 4.5C6.82843 4.5 7.5 3.82843 7.5 3C7.5 2.17157 6.82843 1.5 6 1.5ZM3 3C3 1.34315 4.34315 0 6 0C7.65685 0 9 1.34315 9 3C9 4.65685 7.65685 6 6 6C4.34315 6 3 4.65685 3 3Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11C0 10.5858 0.335786 10.25 0.75 10.25H8.25C8.66421 10.25 9 10.5858 9 11C9 11.4142 8.66421 11.75 8.25 11.75H0.75C0.335786 11.75 0 11.4142 0 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 11C13 10.5858 13.3358 10.25 13.75 10.25H15.25C15.6642 10.25 16 10.5858 16 11C16 11.4142 15.6642 11.75 15.25 11.75H13.75C13.3358 11.75 13 11.4142 13 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 9.5C10.1716 9.5 9.5 10.1716 9.5 11C9.5 11.8284 10.1716 12.5 11 12.5C11.8284 12.5 12.5 11.8284 12.5 11C12.5 10.1716 11.8284 9.5 11 9.5ZM8 11C8 9.34315 9.34315 8 11 8C12.6569 8 14 9.34315 14 11C14 12.6569 12.6569 14 11 14C9.34315 14 8 12.6569 8 11Z",fill:"currentColor"})]}))})),tl=n(32628),nl={selectFieldContainer:{minWidth:200,maxWidth:350,width:"100%"}},rl=function(e,t,n){return n[e]?n[e].push(t):n[e]=[t],n},ol=function(e,t,n){var r=n.build;n.date;return t.reduce((function(t,n){if(r)return n.buildId?rl(n.buildId,n,t):rl("game-only",n,t);var o=e.date(n.createdAt,{month:"long",year:"numeric"});return rl(o,n,t)}),{})},il=function(e){var t=e.i18n,n=e.authenticatedUser,r=e.game,i=u.useRef(null),s=n.getAuthorizationHeader,d=n.profile,p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useState(!0),v=(0,a.Z)(x,2),b=v[0],y=v[1],Z=u.useState(null),k=(0,a.Z)(Z,2),w=k[0],T=k[1],E=u.useState(null),S=(0,a.Z)(E,2),P=S[0],I=S[1],D=u.useState(""),M=(0,a.Z)(D,2),F=M[0],O=M[1],R=u.useState(!1),N=(0,a.Z)(R,2),H=N[0],V=N[1],W=u.useState(!1),z=(0,a.Z)(W,2),G=z[0],Y=z[1],q=function(e,t,n,r,o){if(!t)return null;var i=t;"game-only"===o?i=t.filter((function(e){return!e.buildId})):o&&(i=t.filter((function(e){return e.buildId===o})));var a=n?i.filter((function(e){return!e.processedAt})):i;return ol(e,a,r?{build:!1,date:!0}:{build:!0,date:!1})}(t,w,g,b,F),X=q?Object.values(q).filter(Boolean).flat():[],K=function(e){var t=(0,Ta.GA)(e);if(!P)return t;var n=P[e].name;return n?"".concat(n.substring(0,15)).concat(n.length>=15?"...":""," (").concat(t,")"):t},Q=u.useCallback((0,o.Z)(l().mark((function e(){var t,o,i,s,c,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(!1),t=n.getAuthorizationHeader,o=n.profile){e.next=5;break}return V(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,Promise.all([(0,Ta.BM)(t,o.id,{gameId:r.id,type:"FEEDBACK"}),(0,Qs.BY)(t,o.id,r.id)]);case 8:i=e.sent,s=(0,a.Z)(i,2),c=s[0],u=s[1],T(c),d=u.reduce((function(e,t){return e[t.id]=t,e}),{}),I(d),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),V(!0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),[n,r]),$=function(e){w&&T((function(t){if(!t)return t;var n=(0,j.Z)(t),r=n.findIndex((function(t){return t.id===e.id}));return-1!==r?(n[r]=e,n):void 0}))},ee=function(e){if(e.buildId){if(!P)return{id:e.buildId};var t=P[e.buildId];return t?{id:t.id,name:t.name,isDeleted:!1}:{id:e.buildId,isDeleted:!0}}};u.useEffect((function(){Q()}),[Q]);var te=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&!G){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Y(!0),e.next=6,Promise.all(X.filter((function(e){return!e.processedAt})).map((function(e){return(0,Ta.uA)(s,d.id,{gameId:e.gameId,commentId:e.id,processed:!0})})));case 6:Q(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update one of the comments: ",e.t0),(0,Xr.gR)({message:t._({id:"Unable to mark one of the feedback as read."})+" "+t._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"all-feedback-card-set-processed-error"});case 13:return e.prev=13,Y(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(L.x1,{children:[!n.authenticated&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"You need to login first to see your game feedbacks."})}),n.authenticated&&!q&&!H&&(0,f.jsx)(Qe.Z,{}),n.authenticated&&H&&(0,f.jsx)(vr.Z,{onRetry:Q,children:(0,f.jsx)(c.Trans,{id:"An error occurred while retrieving feedbacks for this game."})}),n.authenticated&&q&&(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(C.ep,{justifyContent:"space-between",children:[(0,f.jsx)(L.sg,{justifyContent:"center",children:(0,f.jsx)(C.pJ,{noMargin:!0,alignItems:"center",children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"This is all the feedback received on {0} coming from games.engine.spacexpanse.org.",values:{0:r.gameName}})})})}),P&&(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:nl.selectFieldContainer,children:(0,f.jsxs)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Show"}),value:F,onChange:function(e,t,n){O(n)},children:[(0,f.jsx)(U.Z,{value:"",label:{id:"All builds"}},"all"),(0,f.jsx)(U.Z,{value:"game-only",label:{id:"On game page only"}},"game-only"),Object.keys(P).map((function(e){return(0,f.jsx)(U.Z,{value:e,label:K(e)},e)}))]})})})})]}),(0,f.jsx)(C.ak,{expand:!0,noMargin:!0,children:!!w&&w.length>0&&(0,f.jsx)($s,{feedbacks:w})}),0===X.length&&(0,f.jsx)(f.Fragment,{children:g?(0,f.jsxs)(C.pJ,{alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You don't have any unread feedback for this game."})}),(0,f.jsx)(_.Z,{onClick:function(){return m(!1)},label:(0,f.jsx)(c.Trans,{id:"Show all feedbacks"})})]}):(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You don't have any feedback for this game."})})}),0!==X.length&&(0,f.jsx)(C.ak,{expand:!0,noMargin:!0,children:Object.keys(q).map((function(e,t){var r=b?e:function(e){if("game-only"===e)return"";var t=(0,Ta.GA)(e);if(!P)return t;var n=P[e];return n?n.name?"".concat(n.name," (").concat(t,")"):t:(0,f.jsxs)(f.Fragment,{children:["".concat(t," "),(0,f.jsx)(c.Trans,{id:"(deleted)"})]})}(e);return(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(L.sg,{children:(0,f.jsxs)(J.Z,{size:"block-title",children:[r,r?" - ":" ",(0,f.jsx)(c.Trans,{id:"{0} feedback cards",values:{0:q[e].length}})]})}),0===t&&(0,f.jsx)(L.sg,{justifyContent:"center",children:(0,f.jsx)(A.Z,{disabled:G,onClick:function(e){return function(e){i.current&&i.current.open(e.clientX,e.clientY)}(e)},children:G?(0,f.jsx)(pi.Z,{size:20}):(0,f.jsx)(el,{fontSize:"small"})})})]}),q[e].map((function(e,t){return(0,f.jsx)(Ks,{comment:e,buildProperties:ee(e),authenticatedUser:n,onCommentUpdated:$},e.id)}))]},e)}))})]})]})}),(0,f.jsx)(tl.Z,{ref:i,buildMenuTemplate:function(e){return[{label:e._({id:"Sort by most recent"}),click:function(){return y(!b)},checked:b,type:"checkbox"},{label:e._({id:"Show unread feedback only"}),click:function(){return m(!g)},checked:g,type:"checkbox"},{type:"separator"},{label:e._({id:"Mark all as solved"}),click:function(){return te(e)}}]}})]})},al=n(73693),sl=function(e){var t=e.game,n=e.onGameUpdated,r=u.useContext(ir.ZP),s=r.getAuthorizationHeader,d=r.profile,p=u.useState(null),h=(0,a.Z)(p,2),g=h[0],m=h[1];return d?(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:'In the future, games that generate enough revenue will be able to opt-in into "revenue share", so that as a creator you can start earning from your game sessions.'})}),(0,f.jsx)(al.Z,{checked:null!==g?g:!!t.displayAdsOnGamePage,onCheck:function(){var e=(0,o.Z)(l().mark((function e(o,a){var c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(a),c=(0,i.Z)((0,i.Z)({},t),{},{displayAdsOnGamePage:a}),e.prev=2,e.next=5,(0,qi.Bi)(s,d.id,t.id,{displayAdsOnGamePage:a});case 5:n(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),(0,Xr.gR)({message:r._({id:"Unable to update game."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-monetization-update-game-error"});case 11:return e.prev=11,m(null),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),label:(0,f.jsx)(c.Trans,{id:"Allow to display advertisements on the game page on games.engine.spacexpanse.org."}),tooltipOrHelperText:(0,f.jsx)(c.Trans,{id:"This is recommended as this allows to maintain free publishing on games.engine.spacexpanse.org and allow to analyze if you could benefit from revenue sharing."})})]})}}):null},ll=n(30609),cl=[{value:"details",label:(0,f.jsx)(c.Trans,{id:"Details"})},{value:"builds",label:(0,f.jsx)(c.Trans,{id:"Builds"})},{value:"feedback",label:(0,f.jsx)(c.Trans,{id:"Feedback"})},{value:"analytics",label:(0,f.jsx)(c.Trans,{id:"Analytics"})},{value:"leaderboards",label:(0,f.jsx)(c.Trans,{id:"Leaderboards"})},{value:"monetization",label:(0,f.jsx)(c.Trans,{id:"Monetization"})}],ul=function(e){var t=e.game,n=e.project,r=e.onClose,i=e.onGameUpdated,s=e.onGameDeleted,d=u.useContext(ll.Z),p=d.routeArguments,h=d.removeRouteArguments,g=u.useContext(ir.ZP),m=g.getAuthorizationHeader,x=g.profile,v=u.useState("details"),b=(0,a.Z)(v,2),j=b[0],y=b[1],Z=u.useState(!1),k=(0,a.Z)(Z,2),w=k[0],T=k[1],S=u.useState(null),P=(0,a.Z)(S,2),I=P[0],D=P[1],A=u.useState(!1),M=(0,a.Z)(A,2),O=M[0],R=M[1],N=u.useContext(ir.ZP),H=u.useState(null),W=(0,a.Z)(H,2),z=W[0],G=W[1],Y=u.useState(null),q=(0,a.Z)(Y,2),X=q[0],Q=q[1],$=u.useState(!1),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1];u.useEffect((function(){if(p["games-dashboard-tab"]){var e=cl.find((function(e){return e.value===p["games-dashboard-tab"]}));e&&y(e.value),h(["games-dashboard-tab"])}}),[p,h]);var re=u.useCallback((0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(null),e.prev=1,e.next=4,(0,qi.Pv)(t.id);case 4:n=e.sent,G(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Unable to load the game:",e.t0),Q(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[t]);u.useEffect((function(){re()}),[re]);var oe=u.useCallback((function(e){G(null),i(e)}),[i]),ie=function(){var e=(0,o.Z)(l().mark((function e(t,r){var o,i,a,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&x){e.next=2;break}return e.abrupt("return",!1);case 2:if(o=x.id,(i=t.ownerIds)&&i.length){e.next=7;break}return(0,Xr.T4)(r._({id:"You must select at least one user to be the owner of the game."}),{delayToNextTick:!0}),e.abrupt("return",!1);case 7:return e.prev=7,R(!0),a=n.getProjectUuid(),e.next=12,(0,qi.Bi)(m,o,a,{authorName:n.getAuthor()||"Unspecified publisher",gameName:n.getName()||"Untitled game",categories:n.getCategories().toJSArray()||[],description:n.getDescription()||"",playWithKeyboard:n.isPlayableWithKeyboard(),playWithGamepad:n.isPlayableWithGamepad(),playWithMobile:n.isPlayableWithMobile(),orientation:n.getOrientation(),discoverable:t.discoverable});case 12:if(s=e.sent,!t.userSlug||!t.gameSlug||t.userSlug!==x.username){e.next=25;break}return e.prev=14,e.next=17,(0,qi.b)(m,o,a,t.userSlug,t.gameSlug);case 17:e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(14),console.error("Unable to update the game slug:",e.t0.response||e.t0.message),(0,Xr.gR)({message:r._({id:"Unable to update the game slug. A slug must be 6 to 30 characters long and only contains letters, digits or dashes."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-slug-update-error"}),R(!1),e.abrupt("return",!1);case 25:return e.prev=25,c=(0,qi.WO)(n.getAuthorIds().toJSArray()),u=(0,qi.WO)(i),e.next=30,(0,qi.wC)(m,o,a,{ownership:u,author:c});case 30:e.next=38;break;case 32:return e.prev=32,e.t1=e.catch(25),console.error("Unable to update the game owners or authors:",e.t1.response||e.t1.message),(0,Xr.gR)({message:r._({id:"Unable to update the game owners or authors. Have you removed yourself from the owners?"})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t1,errorId:"game-acls-update-error"}),R(!1),e.abrupt("return",!1);case 38:oe(s),e.next=47;break;case 41:return e.prev=41,e.t2=e.catch(7),console.error("Unable to update the game:",e.t2.response||e.t2.message),(0,Xr.gR)({message:r._({id:"Unable to update the game details."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t2,errorId:"game-details-update-error"}),R(!1),e.abrupt("return",!1);case 47:return R(!1),e.abrupt("return",!0);case 49:case"end":return e.stop()}}),e,null,[[7,41],[14,19],[25,32]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,o.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return r=x.id,D(null),T(!0),e.prev=5,R(!0),e.next=9,(0,qi.TT)(m,r,t.id);case 9:s(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Unable to delete the game:",e.t0),e.t0.response&&e.t0.response.data&&"game-deletion/leaderboards-exist"===e.t0.response.data.code&&D(n._({id:"You cannot unregister a game that has active leaderboards. To delete them, go in the Leaderboards tab, and delete them one by one."}));case 16:return e.prev=16,R(!1),T(!1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[5,12,16,20]])})));return function(t){return e.apply(this,arguments)}}(),se=u.useCallback((0,o.Z)(l().mark((function e(){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return n=x.id,e.prev=3,R(!0),e.next=7,(0,qi.Bi)(m,n,t.id,{publicWebBuildId:null});case 7:r=e.sent,oe(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Unable to update the game",e.t0);case 14:return e.prev=14,R(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])}))),[t,m,x,oe]),le=z&&z.authors.map((function(e){return e.username})).filter(Boolean),ce=z&&z.owners.map((function(e){return e.username})).filter(Boolean),ue=!!n&&n.getProjectUuid()===t.id;return(0,f.jsx)(c.I18n,{children:function(e){var a=e.i18n;return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"{0} Dashboard",values:{0:t.gameName}}),open:!0,flexColumnBody:!0,fullHeight:!0,maxWidth:"lg",actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),disabled:w,onClick:r},"close")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"leaderboards"===j?"/interface/games-dashboard/leaderboard-administration":"/interface/games-dashboard"},"help")],onRequestClose:r,cannotBeDismissed:w,fixedContent:(0,f.jsx)(K.m,{value:j,onChange:y,options:cl}),children:[(0,f.jsxs)(L.x1,{expand:!0,noMargin:!0,children:["leaderboards"===j?(0,f.jsx)(ds,{gameId:t.id,onLoading:T}):null,"details"===j?X?(0,f.jsxs)(vr.Z,{onRetry:re,children:[(0,f.jsx)(c.Trans,{id:"There was an issue getting the game details."})," ",(0,f.jsx)(c.Trans,{id:"Verify your internet connection or try again later."})]}):z?(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[!ue&&(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"In order to update these details you have to open the game's project."})}),(0,f.jsxs)(L.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(L.x1,{expand:!0,justifyContent:"flex-start",alignItems:"center",noMargin:!0,children:le&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Authors:"})}),(0,f.jsx)(L.x1,{noMargin:!0,children:le.map((function(e,t){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(Xi.Z,{size:"small",icon:ce&&ce.includes(e)?(0,f.jsx)(pa,{}):void 0,className:"notranslate",label:e,color:0===t?"primary":"default"})]},e)}))})]})}),(0,f.jsx)(L.x1,{expand:!0,justifyContent:"flex-end",noMargin:!0,children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Created on {0}",values:{0:a.date(1e3*t.createdAt)}})})})]}),(z.playWithKeyboard||z.playWithGamepad||z.playWithMobile||z.categories)&&(0,f.jsxs)(L.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(L.x1,{expand:!0,justifyContent:"flex-start",alignItems:"center",noMargin:!0,children:z.categories&&!!z.categories.length&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Genres:"})}),(0,f.jsx)(L.x1,{noMargin:!0,children:z.categories.map((function(e,t){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(Xi.Z,{size:"small",label:(0,qi.Oo)(e,a),color:0===t?"primary":"default"})]},e)}))})]})}),(0,f.jsxs)(L.x1,{expand:!0,justifyContent:"flex-end",noMargin:!0,children:[z.playWithKeyboard&&(0,f.jsx)(ca.Z,{}),z.playWithGamepad&&(0,f.jsx)(ua.Z,{}),z.playWithMobile&&(0,f.jsx)(da.Z,{})]})]}),(0,f.jsx)(po.ZP,{value:z.gameName,readOnly:!0,fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Game name"}),floatingLabelFixed:!0}),(0,f.jsx)(po.ZP,{value:z.description||"",readOnly:!0,fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Game description"}),floatingLabelFixed:!0,translatableHintText:{id:"No description set."},multiline:!0,rows:5}),(0,f.jsxs)(B.Z,{disabled:!0,fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Device orientation (for mobile)"}),value:z.orientation,children:[(0,f.jsx)(U.Z,{value:"default",label:{id:"Platform default"}}),(0,f.jsx)(U.Z,{value:"landscape",label:{id:"Landscape"}}),(0,f.jsx)(U.Z,{value:"portrait",label:{id:"Portrait"}})]}),(0,f.jsxs)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:[(0,f.jsx)(_.Z,{onClick:function(){F.ZP.showConfirmDialog(a._({id:"Are you sure you want to unregister this game?"})+"\n\n"+a._({id:"It will disappear from your games dashboard and you won't get access to analytics, unless you register it again."}))&&ae(a)},label:(0,f.jsx)(c.Trans,{id:"Unregister this game"}),disabled:O}),(0,f.jsx)(L.LZ,{}),z.publicWebBuildId&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E.Z,{onClick:function(){F.ZP.showConfirmDialog("Are you sure you want to unpublish this game? \n\nThis will make your games.engine.spacexpanse.org unique game URL not accessible anymore. \n\nYou can decide at any time to publish it again.")&&se()},label:(0,f.jsx)(c.Trans,{id:"Unpublish from games.engine.spacexpanse.org"}),disabled:O}),(0,f.jsx)(L.LZ,{})]}),(0,f.jsx)(E.Z,{primary:!0,onClick:function(){return ne(!0)},label:(0,f.jsx)(c.Trans,{id:"Edit game details"}),disabled:!ue||O})]}),I?(0,f.jsx)(vr.Z,{children:I}):null]}):(0,f.jsx)(Qe.Z,{}):null,"builds"===j?(0,f.jsx)(sa.Z,{game:t,authenticatedUser:N,onGameUpdated:i}):null,"analytics"===j?(0,f.jsx)(Hs,{game:t}):null,"feedback"===j?(0,f.jsx)(il,{i18n:a,authenticatedUser:N,game:t}):null,"monetization"===j?(0,f.jsx)(C.ak,{noMargin:!0,children:(0,f.jsx)(sl,{game:t,onGameUpdated:oe})}):null]}),z&&n&&te&&(0,f.jsx)(la.X,{project:n,publicGame:z,onApply:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t,a);case 2:e.sent&&ne(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClose:function(){return ne(!1)},isLoading:O,i18n:a})]})}})},dl=n(91),pl=function(e){var t=e.project,n=u.useContext(ll.Z),r=n.routeArguments,i=n.addRouteArguments,s=n.removeRouteArguments,d=u.useState(null),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useState(null),x=(0,a.Z)(m,2),v=x[0],b=x[1],y=u.useContext(ir.ZP),Z=y.authenticated,k=y.firebaseUser,w=y.getAuthorizationHeader,T=y.profile,E=u.useState(null),S=(0,a.Z)(E,2),P=S[0],I=S[1],D=(0,ft.Z)(),A=D.showAlert,L=D.showConfirmation,M=u.useState(!1),F=(0,a.Z)(M,2),O=F[0],R=F[1],B=u.useCallback((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z&&k){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,g(null),e.next=6,(0,qi.m7)(w,k.uid);case 6:t=e.sent,b(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error while loading user games.",e.t0),g(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])}))),[Z,k,w]),_=u.useCallback((0,o.Z)(l().mark((function e(){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T&&t){e.next=2;break}return e.abrupt("return");case 2:return n=T.id,e.prev=3,R(!0),e.next=7,(0,qi.r$)(w,n,{gameId:t.getProjectUuid(),authorName:t.getAuthor()||"Unspecified publisher",gameName:t.getName()||"Untitled game",templateSlug:t.getTemplateSlug()});case 7:return e.next=9,B();case 9:case 18:e.next=22;break;case 11:if(e.prev=11,e.t0=e.catch(3),console.error("Unable to register the game.",e.t0),!(r=(0,dl.T)(e.t0))||403!==r.status){e.next=20;break}return e.next=18,A({title:{id:"Game already registered"},message:{id:"The project currently opened is registered online but you don't have access to it. Ask the original owner of the game to share it with you to be able to manage it."}});case 20:return e.next=22,A({title:{id:"Unable to register the game"},message:{id:"An error happened while registering the game. Verify your internet connection or retry later."}});case 22:return e.prev=22,R(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,11,22,25]])}))),[w,T,t,A,B]);if(u.useEffect((function(){var e=function(){var e=(0,o.Z)(l().mark((function e(){var n,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r["game-id"],!v||!n){e.next=20;break}if(o=v.find((function(e){return e.id===n})),s(["game-id"]),!o){e.next=8;break}I(o),e.next=20;break;case 8:if(!t||t.getProjectUuid()!==n){e.next=18;break}return e.next=11,L({title:{id:"Game not found"},message:{id:"This project is not registered online. Register it now to get access to leaderboards, player accounts, analytics and more!"},confirmButtonLabel:{id:"Register"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,_();case 16:e.next=20;break;case 18:return e.next=20,A({title:{id:"Game not found"},message:{id:"The game you're trying to open is not registered online. Open the project file, then register it before continuing."}});case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[v,r,s,_,L,A,t]),u.useEffect((function(){B()}),[B]),!Z)return null;if(!v&&h)return(0,f.jsx)(vr.Z,{onRetry:function(){B()},children:(0,f.jsx)(c.Trans,{id:"Can't load the games. Verify your internet connection or retry later."})});if(!v)return(0,f.jsx)(Qe.Z,{});var N=t?t.getProjectUuid():null,U=v.find((function(e){return!!N&&e.id===N})),H=[U].concat((0,j.Z)(v.filter((function(e){return e!==U})))).filter(Boolean);return(0,f.jsxs)(C.ak,{noMargin:!0,children:[!O&&(0,f.jsx)(aa.C,{project:t,hideLoader:!0,onGameRegistered:B}),H.map((function(e){return(0,f.jsx)(ia,{isCurrentGame:!!N&&e.id===N,game:e,onOpenGameManager:function(t){i({"games-dashboard-tab":t}),I(e)},onUpdateGame:B},e.id)})),P&&(0,f.jsx)(ul,{game:P,project:N&&P.id===N?t:null,onClose:function(){I(null)},onGameUpdated:function(e){b(v.map((function(t){return t===P?e:t}))),I(e)},onGameDeleted:function(){I(null),B()}})]})},hl=n(54458),fl=function(e,t,n){var r=(0,u.useRef)(null);(0,u.useEffect)((function(){if(e)return r.current=new IntersectionObserver(t,(0,i.Z)({root:null,threshold:.8},n)),r.current.observe(e),function(){r.current&&r.current.disconnect()}}),[e,t,n])},gl=function(e){var t=e.currentProject,n=e.open,r=e.onClose,i=u.useContext(ll.Z),s=i.routeArguments,d=i.removeRouteArguments,p=u.useRef(null),h=u.useRef(!1),g=u.useState("profile"),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useContext(ir.ZP),j="done"!==b.loginState,C=u.useRef(null);u.useEffect((function(){"games-dashboard"===s["initial-dialog"]&&(v("games-dashboard"),d(["initial-dialog"]))}),[s,d]);var y=u.useCallback((function(e){if(b.authenticated&&b.profile&&!h.current){if(!e[0].isIntersecting&&p.current)return clearTimeout(p.current),void(p.current=null);if(e[0].isIntersecting){if(p.current)return;p.current=setTimeout((function(){(0,ro.M7)(b),h.current=!0}),5e3)}}}),[b]);fl(C.current,y);var Z=u.useState(!1),k=(0,a.Z)(Z,2),w=k[0],T=k[1],E=u.useCallback((0,o.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.getAuthorizationHeader,n=b.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,T(!0),e.next=7,(0,ar.jj)(t,n.uid);case 7:r=e.sent,F.ZP.openExternalURL(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),(0,Xr.gR)({message:"Unable to load the portal to manage your subscription. Please contact us on billing@engine.spacexpanse.org",rawError:e.t0,errorId:"subscription-portal-error"});case 14:return e.prev=14,T(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])}))),[b]);u.useEffect((function(){n&&b.onRefreshUserProfile()}),[b.onRefreshUserProfile,n]);var S=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onLogout();case 2:r();case 3:case"end":return e.stop()}}),e)}))),[b,r]),P=b.authenticated&&b.profile;return(0,f.jsx)(V.ZP,{title:P?(0,f.jsx)(c.Trans,{id:"My profile"}):null,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:r},"close")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"games-dashboard"===x?"/interface/games-dashboard":"/interface/profile"},"help"),P&&(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Logout"}),onClick:S,disabled:j},"logout")],onRequestClose:r,open:n,fullHeight:!!P,maxWidth:P?"md":"sm",flexColumnBody:!0,fixedContent:P?(0,f.jsx)(K.m,{value:x,onChange:v,options:[{value:"profile",label:(0,f.jsx)(c.Trans,{id:"My Profile"})},{value:"games-dashboard",label:(0,f.jsx)(c.Trans,{id:"Games Dashboard"})}]}):null,children:"loggingIn"===b.loginState?(0,f.jsx)(Qe.Z,{}):b.authenticated&&b.profile?(0,f.jsxs)(f.Fragment,{children:["profile"===x&&(0,f.jsx)(L.x1,{children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsx)(Si,{authenticatedUser:b,onEditProfile:b.onEdit,onChangeEmail:b.onChangeEmail}),(0,f.jsx)(Di,{subscription:b.subscription,onManageSubscription:E,isManageSubscriptionLoading:w}),(0,f.jsx)(Bi,{userId:b.profile.id}),P&&(0,f.jsx)("div",{ref:C,children:(0,f.jsx)(Yi,{badges:b.badges,displayUnclaimedAchievements:!0,displayNotifications:!0})})]})}),"games-dashboard"===x&&(0,f.jsx)(pl,{project:t})]}):(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(hl.Z,{onLogin:b.onLogin,onCreateAccount:b.onCreateAccount,message:(0,f.jsx)(c.Trans,{id:"Create an account to register your games and to get access to metrics collected anonymously, like the number of daily players and retention of the players after a few days."})})})})},ml={tabContentContainer:{width:"100%",position:"relative",textAlign:"initial",minHeight:0,display:"flex",flex:1},tabLabel:{maxWidth:360,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"15px"},tabLabelAndIcon:{display:"flex",alignItems:"center",marginLeft:10,marginRight:10},closeButton:{marginRight:5,marginLeft:5}},xl=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.active||e.active}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.active;return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},ml.tabContentContainer),n?void 0:{display:"none"}),children:t})}}]),n}(u.Component),vl=function(e){var t=e.hideLabels,n=e.children,r=u.useRef(null),o={maxWidth:"100%",display:t?"none":"flex",flexWrap:"nowrap",overflowX:"overlay",overflowY:"hidden",marginTop:6},i=u.useCallback((function(e){var t=r.current;t&&(t.scrollLeft+=e.deltaY)}),[]);return(0,f.jsx)("div",{ref:r,className:"almost-invisible-scrollbar",style:o,onWheel:i,children:n})};function bl(e){var t=e.id,n=e.data,r=e.active,o=e.onClose,a=e.onCloseOthers,s=e.onCloseAll,l=e.label,c=e.icon,d=e.closable,p=e.onClick,h=e.onActivated;u.useEffect((function(){r&&h()}),[r,h]);var g=u.useRef(null),x=function(e){e.stopPropagation(),g.current&&g.current.open(e.clientX,e.clientY)},v=u.useCallback((function(e){e.nativeEvent&&1===e.nativeEvent.button&&o()}),[o]),b=(0,Le.i)(u.useCallback((function(e){g.current&&g.current.open(e.clientX,e.clientY)}),[g])),j=u.useContext(m.Z),C=r?j.closableTabs.selectedTextColor:j.closableTabs.textColor;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)("span",{id:t,style:{flexShrink:0,position:"relative",display:"inline-block",marginRight:2,borderTopRightRadius:8,borderTopLeftRadius:8,borderTop:"1px solid black",borderRight:"1px solid black",borderLeft:"1px solid black",borderBottom:"none",borderColor:r?j.closableTabs.selectedBorderColor:j.closableTabs.backgroundColor,backgroundColor:r?j.closableTabs.selectedBackgroundColor:j.closableTabs.backgroundColor},children:[(0,f.jsx)(Zr.Z,(0,i.Z)((0,i.Z)((0,i.Z)({onClick:p,onAuxClick:d?v:void 0,onContextMenu:x,"data-active":r?"true":void 0,id:t?"".concat(t,"-button"):void 0},(0,Ae.Y)(n)),b),{},{focusRipple:!0,disableTouchRipple:!0,children:(0,f.jsxs)("span",{style:(0,i.Z)((0,i.Z)({},ml.tabLabelAndIcon),{},{height:j.closableTabs.height,color:C,fontFamily:j.closableTabs.fontFamily}),children:[c,c&&l?(0,f.jsx)(L.LZ,{}):null,l&&(0,f.jsx)("span",{style:ml.tabLabel,children:l})]})})),d&&(0,f.jsx)(Zr.Z,(0,i.Z)((0,i.Z)({onClick:o,onAuxClick:v,onContextMenu:x},b),{},{focusRipple:!0,children:(0,f.jsx)(bi.Z,{style:(0,i.Z)((0,i.Z)({},ml.closeButton),{},{width:j.closableTabs.height/2,height:j.closableTabs.height}),htmlColor:C})}))]}),(0,f.jsx)(tl.Z,{ref:g,buildMenuTemplate:function(e){return[{label:e._({id:"Close"}),click:o,enabled:d},{label:e._({id:"Close others"}),click:a},{label:e._({id:"Close all"}),click:s}]}})]})}var jl={columnDropIndicator:{borderRight:"1px solid",borderLeft:"1px solid",width:8,marginLeft:"-1px",height:"100%",boxSizing:"border-box"}};function Cl(){var e=u.useContext(m.Z);return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},jl.columnDropIndicator),{},{backgroundColor:e.dropIndicator.canDrop,borderColor:e.dropIndicator.border})})}var yl=n(92402),Zl=n.n(yl),kl=n(97230),wl=n(50394),Tl=n.n(wl),El=function(e){return e.selectedEvents.map((function(e){return e.event}))},Sl=function(e){return e.selectedEvents.length?e.selectedEvents[e.selectedEvents.length-1]:null},Pl=function(e){var t=e.selectedEvents.filter((function(e){return e.event.canHaveSubEvents()}));return t.length?t[t.length-1]:null},Il=function(e){var t=Tl()(e.selectedEvents);return t.filter((function(e){return!t.some((function(t){return t!==e&&(!!t.event.canHaveSubEvents()&&t.event.getSubEvents().contains(e.event,!0))}))}))},Dl=function(e){var t=Il(e);return t.length?t[t.length-1]:null},Al=function(e){return e.selectedInstructions.map((function(e){return e.instruction}))},Ll=function(e){return e.selectedInstructions.map((function(e){return e.eventContext.event}))},Ml=function(e){return e.selectedInstructions},Fl=function(e){return e.selectedInstructions[e.selectedInstructions.length-1]||null},Ol=function(e){var t=e.selectedInstructions.filter((function(e){return e.eventContext.event.canHaveSubEvents()}));return t.length?t[t.length-1].eventContext:null},Rl=function(e,t){return e.selectedEvents.some((function(e){return e.event.ptr===t.ptr}))},Bl=function(e,t){return e.selectedInstructions.some((function(e){return e.instruction.ptr===t.ptr}))},_l=function(e){return!!e.selectedEvents.length},Nl=function(e){return!!e.selectedInstructions.length},Ul=function(e){return!!e.selectedInstructionsLists.length},Hl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.event;if(Rl(e,r))return e;var o=n?e:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return(0,i.Z)((0,i.Z)({},o),{},{selectedEvents:[].concat((0,j.Z)(o.selectedEvents),[t])})},Vl=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.instruction;if(Bl(t,o))return t;var a=r?t:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return(0,i.Z)((0,i.Z)({},a),{},{selectedInstructions:[].concat((0,j.Z)(a.selectedInstructions),[(0,i.Z)((0,i.Z)({},n),{},{eventContext:e})])})},Wl=function(e){var t={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return e.forEach((function(e){t.selectedEvents.push(e)})),t},zl=n(82954),Gl=n.n(zl),Yl="selectable",ql="icon",Xl="large-selectable",Jl="large-selected",Kl="executable-event-container",Ql="actions-container",$l="conditions-container",ec="small-width-container",tc="instruction-parameter",nc="instruction-invalid-parameter",rc="disabled-text",oc="drop-indicator",ic="cant-drop-indicator",ac="name-and-icon-container",sc=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e;return(0,f.jsx)("p",{className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),e)),children:"Unknown event of type "+this.props.event.getType()})}}]),n}(u.Component),lc=n(65522),cc=n.n(lc);function uc(e){var t=e.canDrop;return(0,f.jsx)("div",{className:t?oc:ic})}var dc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=o?o.getDescription():void 0;return(0,f.jsx)(Dt.Z,{margin:e.isInline?"none":"dense",commitOnBlur:!0,value:e.value,floatingLabelText:i,helperMarkdownText:o?o.getLongDescription():void 0,onChange:function(t){return e.onChange(t)},ref:n,fullWidth:!0})})),pc={"=":{id:"= (equal to)"},"<":{id:"< (less than)"},">":{id:"> (greater than)"},"<=":{id:"\u2264 (less or equal to)"},">=":{id:"\u2265 (greater or equal to)"},"!=":{id:"\u2260 (not equal to)"}},hc={unknown:Object.keys(pc),number:["=","<",">","<=",">=","!="],time:["<",">","<=",">="],string:["=","!="],color:["=","!="]},fc={number:"=",time:">=",string:"=",color:"="},gc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=o?o.getDescription():void 0,a=o?o.getExtraInfo():"unknown",s=hc[a]||hc.unknown;if(!e.value){var l=fc[a];l&&e.onChange(l)}return(0,f.jsx)(B.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:i,helperMarkdownText:o?o.getLongDescription():void 0,value:e.value,onChange:function(t,n,r){return e.onChange(r)},ref:n,translatableHintText:{id:"Choose an operator"},children:s.map((function(e){return(0,f.jsx)(U.Z,{value:e,label:pc[e]},e)}))})})),mc={"=":{id:"= (set to)"},"+":{id:"+ (add)"},"-":{id:"- (subtract)"},"*":{id:"* (multiply by)"},"/":{id:"/ (divide by)"}},xc={unknown:Object.keys(mc),number:["=","+","-","*","/"],string:["=","+"],color:["=","+"]},vc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=e.value,a=e.onChange,s=o?o.getDescription():void 0,l=o?o.getExtraInfo():"unknown",c=xc[l]||xc.unknown;return u.useEffect((function(){i||"unknown"===l||a("=")}),[i,a,l]),(0,f.jsx)(B.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:s,helperMarkdownText:o?o.getLongDescription():void 0,value:i,onChange:function(e,t,n){return a(n)},ref:n,translatableHintText:{id:"Choose an operator"},id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-operator-field"):void 0,children:c.map((function(e){return(0,f.jsx)(U.Z,{value:e,label:mc[e]},e)}))})})),bc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=e.value,a=o?o.getDescription():void 0;return(0,f.jsxs)(B.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:a,helperMarkdownText:o?o.getLongDescription():void 0,value:i,ref:n,onChange:function(t,n,r){return e.onChange(r)},translatableHintText:{id:"Choose a mouse button"},children:[(0,f.jsx)(U.Z,{value:"Left",label:{id:"Left (primary)"}}),(0,f.jsx)(U.Z,{value:"Right",label:{id:"Right (secondary)"}}),(0,f.jsx)(U.Z,{value:"Middle",label:{id:"Middle (Auxiliary button, usually the wheel button)"}}),(0,f.jsx)(U.Z,{value:"Back",label:{id:"Back (Additional button, typically the Browser Back button)"}}),(0,f.jsx)(U.Z,{value:"Forward",label:{id:"Forward (Additional button, typically the Browser Forward button)"}})]})})),jc=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","LShift","RShift","LControl","RControl","LAlt","RAlt","LSystem","RSystem","SemiColon","Comma","Period","Quote","Slash","BackSlash","Tilde","Equal","Dash","Space","Back","Tab","Delete","Insert","Escape","PageUp","PageDown","End","Home","Return","NumpadPageUp","NumpadPageDown","NumpadEnd","NumpadHome","NumpadReturn","Add","Subtract","Multiply","Divide","NumpadAdd","NumpadSubtract","NumpadMultiply","NumpadDivide","Left","Up","Right","Down","NumpadLeft","NumpadUp","NumpadRight","NumpadDown","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Pause"],Cc=function(e){return-1!==jc.indexOf(e)},yc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.value,i=e.onChange,a=e.isInline,s=e.parameterMetadata,l=e.onRequestClose,d=e.onApply;return(0,f.jsx)(Bt.ZP,{margin:e.isInline?"none":"dense",floatingLabelText:s?s.getDescription():void 0,helperMarkdownText:s?s.getLongDescription():void 0,fullWidth:!0,value:o,onChange:i,dataSource:jc.map((function(e){return{text:e,value:e}})),openOnFocus:!a,onRequestClose:l,onApply:d,ref:n,errorText:o?Cc(o)?void 0:(0,f.jsx)(c.Trans,{id:'You must select a valid key. "{value}" is not valid.',values:{value:o}}):(0,f.jsx)(c.Trans,{id:"You must select a key."})})})),Zc=n(10952),kc=n.n(Zc),wc=n(10684),Tc=n.g.gd,Ec=function(e,t,n){var r=n&&n.type||null,o=n&&n.names||null,i=r?function(n){return Tc.getTypeOfObject(e,t,n.getName(),!1)===r}:null,a=o?function(e){return o.includes(e.getName())}:null,s=(0,Nt.mapFor)(0,t.getObjectsCount(),(function(e){var n=t.getObjectAt(e);return i&&!i(n)||a&&!a(n)?null:n})).filter(Boolean).map((function(e){return{object:e,global:!1}})),l=e===t?[]:(0,Nt.mapFor)(0,e.getObjectsCount(),(function(t){var n=e.getObjectAt(t);return i&&!i(n)||a&&!a(n)?null:n})).filter(Boolean).map((function(e){return{object:e,global:!0}})),c=s.concat(l);return{containerObjectsList:s,projectObjectsList:l,allObjectsList:c}},Sc=function(e){var t=e.getCurrentPlatform().getAllPlatformExtensions();return kc()((0,Nt.mapFor)(0,t.size(),(function(e){var n=t.at(e);return n.getExtensionObjectsTypes().toJSArray().map((function(e){return n.getObjectMetadata(e)})).filter((function(e){return!e.isHidden()})).map((function(e){return{extension:n,objectMetadata:e,name:e.getName(),fullName:e.getFullName(),description:e.getDescription(),iconFilename:e.getIconFilename(),categoryFullName:e.getCategoryFullName()}}))})))},Pc=function(e,t){if(!t.length)return!0;var n=e.object.getTags();return(0,wc.ej)(n,t)},Ic=function(e,t){var n=t.searchText,r=t.selectedTags,o=t.hideExactMatches;return n||r.length?e.filter((function(e){return Pc(e,r)})).filter((function(e){var t=e.object.getName();if(!o||n!==t)return-1!==t.toLowerCase().indexOf(n.toLowerCase())})):e},Dc=function(e,t){var n=t.searchText,r=t.hideExactMatches;return n?e.filter((function(e){var t=e.group.getName();if(!r||t!==n)return-1!==t.toLowerCase().indexOf(n.toLowerCase())})):e},Ac=function(e){return(0,Nt.mapFor)(0,e.count(),(function(t){return e.getAt(t)}))},Lc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=function(r){return!n||Tc.getTypeOfObject(e,t,r.getName(),!1)===n},o=function(r){return!n||Tc.getTypeOfObject(e,t,r.getName(),!0)===n},i=(0,Nt.mapFor)(0,t.getObjectsCount(),(function(e){return t.getObjectAt(e)})).filter(r).map((function(e){return{object:e,global:!1}})),a=t.getObjectGroups(),s=Ac(a).filter(o).map((function(e){return{group:e,global:!1}})),l=e===t?[]:(0,Nt.mapFor)(0,e.getObjectsCount(),(function(t){return e.getObjectAt(t)})).filter(r).map((function(e){return{object:e,global:!0}})),c=e.getObjectGroups(),u=e===t?[]:Ac(c).filter(o).map((function(e){return{group:e,global:!0}})),d=i.concat(l),p=s.concat(u);return{containerObjectsList:i,projectObjectsList:l,allObjectsList:d,containerGroupsList:s,projectGroupsList:u,allGroupsList:p}},Mc=n(74044);function Fc(e,t,n){return t&&t.hasObjectNamed(n)?t.getObject(n):e.hasObjectNamed(n)?e.getObject(n):null}var Oc=n(90505),Rc=["value","onChange","onChoose","project","globalObjectsContainer","objectsContainer","allowedObjectType","requiredObjectCapability","noGroups","errorTextIfInvalid","margin","onRequestClose","onApply","id","excludedObjectOrGroupNames","hintText"],Bc=n.g.gd,_c=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)},o=(0,eo.bX)();u.useImperativeHandle(t,(function(){return{focus:r}}));var a=e.value,s=e.onChange,l=e.onChoose,d=e.project,p=e.globalObjectsContainer,h=e.objectsContainer,g=e.allowedObjectType,m=e.requiredObjectCapability,x=e.noGroups,v=e.errorTextIfInvalid,b=e.margin,C=e.onRequestClose,y=e.onApply,Z=e.id,k=e.excludedObjectOrGroupNames,w=e.hintText,T=(0,yt.Z)(e,Rc),E=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,o=e.noGroups,i=e.allowedObjectType,a=e.excludedObjectOrGroupNames,s=Lc(n,r,i||void 0),l=s.allObjectsList.map((function(e){var n=e.object;return{text:n.getName(),value:n.getName(),renderIcon:t?function(){return(0,f.jsx)(Mc.Z,{iconSize:24,src:Oc.Z.getThumbnail(t,n.getConfiguration())})}:void 0}})),c=o?[]:s.allGroupsList.map((function(e){var t=e.group;return{text:t.getName(),value:t.getName()}})),u=0===c.length?l:[].concat((0,j.Z)(l),[{type:"separator"}],(0,j.Z)(c));return a?u.filter((function(e){var t=e.value;return!a.includes(t)})):u}({project:d,globalObjectsContainer:p,objectsContainer:h,noGroups:x,allowedObjectType:g,excludedObjectOrGroupNames:k}),S=0!==E.filter((function(e){return void 0!==e.text&&a===e.text})).length,P=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,o=e.requiredObjectCapability,i=e.objectName;if(!o)return!0;if(!t)return!0;var a=Fc(n,r,i);return!a||!Bc.MetadataProvider.getObjectMetadata(t.getCurrentPlatform(),a.getType()).isUnsupportedBaseObjectCapability(o)}({project:d,requiredObjectCapability:m,globalObjectsContainer:p,objectsContainer:h,objectName:a}),I=P?S?void 0:v:(0,f.jsx)(c.Trans,{id:"This object exists, but can't be used here."});return o?(0,f.jsx)(Bt.ZP,(0,i.Z)({margin:b,hintText:w||{id:"Choose an object"},value:a,onChange:s,onChoose:l,onRequestClose:C,onApply:y,dataSource:E,errorText:I,ref:n,id:Z},T)):(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(B.Z,{margin:b,value:a,onChange:function(e,t,n){s(n),l&&l(n),y&&y()},translatableHintText:w||{id:"Choose an object"},style:{flex:T.fullWidth?1:void 0},errorText:I,helperMarkdownText:T.helperMarkdownText,floatingLabelText:T.floatingLabelText,id:Z,children:E.map((function(e,n){return"separator"===e.type?(0,f.jsx)("optgroup",{label:t._({id:"Groups"})},"group-divider"):(0,f.jsx)(U.Z,{label:e.value,value:e.value,shouldNotTranslate:!0},e.value)}))})}})})),Nc=_c,Uc=u.forwardRef((function(e,t){var n=u.useContext(to.Z).currentlyRunningInAppTutorial,r=u.useRef(null),o=function(e){r.current&&!n&&r.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:o}}));var i=e.parameterMetadata,a=i?i.getDescription():void 0,s=i?i.getLongDescription():void 0,l=i?i.getExtraInfo():void 0;return(0,f.jsx)(Nc,{margin:e.isInline?"none":"dense",project:e.project,value:e.value,onChange:e.onChange,onRequestClose:e.onRequestClose,onApply:e.onApply,allowedObjectType:l,requiredObjectCapability:e.instructionMetadata?e.instructionMetadata.getRequiredBaseObjectCapability():e.expressionMetadata?e.expressionMetadata.getRequiredBaseObjectCapability():void 0,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,floatingLabelText:a,helperMarkdownText:s,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-selector"):void 0,fullWidth:!0,errorTextIfInvalid:l?(0,f.jsx)(c.Trans,{id:"The object does not exist or can't be used here."}):(0,f.jsx)(c.Trans,{id:"Enter the name of an object."}),openOnFocus:!e.value,ref:r})})),Hc=function(e,t){return e||(t&&t.isOptional()?t.getDefaultValue():"")},Vc=n(1412),Wc=function(e){var t=Vc.findDOMNode(e);if(t instanceof HTMLButtonElement)t.focus();else if(t instanceof HTMLElement){var n=t.getElementsByTagName("button");n&&n.length&&n[0]instanceof HTMLButtonElement&&n[0].focus()}},zc=n(89267),Gc={description:{marginRight:5}},Yc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&Wc(n.current)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=e.value,a=o?o.getDescription():null,s=o?o.getLongDescription():null,l="yes"===Hc(i,o);return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsxs)(L.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(J.Z,{style:Gc.description,displayInlineAsSpan:!0,children:a}),(0,f.jsxs)(zc.Z,{children:[(0,f.jsx)($r.Z,{id:"yes-button","data-effective":l?"true":void 0,variant:l?"contained":"outlined",color:l?"secondary":"default",onClick:function(){return e.onChange("yes")},ref:n,children:(0,f.jsx)(c.Trans,{id:"Yes"})}),(0,f.jsx)($r.Z,{id:"no-button","data-effective":l?void 0:"true",variant:l?"outlined":"contained",color:l?"default":"secondary",onClick:function(){return e.onChange("no")},children:(0,f.jsx)(c.Trans,{id:"No"})})]})]}),s?(0,f.jsx)(es.Z,{variant:"filled",margin:"dense",children:(0,f.jsx)($e.r,{source:s})}):null]})})),qc={description:{marginRight:5}},Xc=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&Wc(n.current)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=e.value,a=o?o.getDescription():void 0,s=o?o.getLongDescription():null,l=Hc(i,o);return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsxs)(L.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(J.Z,{style:qc.description,displayInlineAsSpan:!0,children:a}),(0,f.jsxs)(zc.Z,{children:[(0,f.jsx)($r.Z,{variant:"True"===l?"contained":"outlined",color:"True"===l?"secondary":"default",onClick:function(){return e.onChange("True")},ref:n,children:(0,f.jsx)(c.Trans,{id:"True"})}),(0,f.jsx)($r.Z,{variant:"True"!==l?"contained":"outlined",color:"True"!==l?"secondary":"default",onClick:function(){return e.onChange("False")},children:(0,f.jsx)(c.Trans,{id:"False"})})]})]}),s?(0,f.jsx)(es.Z,{variant:"filled",margin:"dense",children:(0,f.jsx)($e.r,{source:s})}):null]})})),Jc=n(16973),Kc=n(80845),Qc=n(15979),$c=function(e,t){if(!t)return e;switch(e){case"Ads":return t._({id:"Ads"});case"Visual effect":return t._({id:"Visual effect"});case"Text":return t._({id:"Text"});case"Audio":return t._({id:"Audio"});case"Advanced":return t._({id:"Advanced"});case"Camera":return t._({id:"Camera"});case"Input":return t._({id:"Input"});case"Game mechanic":return t._({id:"Game mechanic"});case"Movement":return t._({id:"Movement"});case"Network":return t._({id:"Network"});case"Third-party":return t._({id:"Third-party"});case"User interface":return t._({id:"User interface"});case"General":return t._({id:"General"});default:return e}},eu=n.g.gd,tu={BuiltinObject:{"":["AjoutHasard","Create","AjoutObjConcern"]}},nu={BuiltinObject:{"":["AjoutHasard","AjoutObjConcern","CollisionNP","SceneInstancesCount","PickedInstancesCount","PickNearest","Distance","SeDirige","EstTourne","SourisSurObjet"]}},ru={},ou={Physics2:{"Physics2::Physics2Behavior":["Physics2::Collision","Physics2::CollisionStarted","Physics2::CollisionStopped"]}},iu={BuiltinObject:(0,j.Z)(nu.BuiltinObject[""]),Physics2:(0,j.Z)(ou.Physics2["Physics2::Physics2Behavior"])},au=function(e){return e.getCategory()+"/"+e.getFullName()},su=function(e,t){var n=t;return n?e.filter((function(e){return-1===n.indexOf(e.type)})):e},lu=function(e,t,n,r,o){var i=t.getName(),a=e?ou[i]:ru[i];if(!a)return[];var s=a[n];if(!s)return[];var l=e?t.getAllConditions():t.getAllActions();return s.map((function(e){return uu(r,e,l.get(e),o)}))},cu=function(e,t,n,r,o){var i=t.getName(),a=e?nu[i]:tu[i];if(!a)return[];var s=a[n];if(!s)return[];var l=e?t.getAllConditions():t.getAllActions();return s.map((function(e){return uu(r,e,l.get(e),o)}))},uu=function(e,t,n,r){var o=n.getFullName(),i=n.getGroup(),a=n.getIconFilename();return{type:t,metadata:n,iconFilename:a,displayedName:o,fullGroupName:[e,i].filter(Boolean).join("/"),scope:r,isPrivate:n.isPrivate(),isRelevantForLayoutEvents:n.isRelevantForLayoutEvents(),isRelevantForFunctionEvents:n.isRelevantForFunctionEvents(),isRelevantForAsynchronousFunctionEvents:n.isRelevantForAsynchronousFunctionEvents(),isRelevantForCustomObjectEvents:n.isRelevantForCustomObjectEvents()}},du=function(e,t,n){for(var r=t.keys(),o=[],i=0;i<r.size();++i){var a=r.at(i),s=t.get(a);s.isHidden()||(n.objectMetadata&&n.objectMetadata.isUnsupportedBaseObjectCapability(s.getRequiredBaseObjectCapability())||o.push(uu(e,a,s,n)))}return o},pu=function(e){for(var t=[],n=eu.asPlatform(eu.JsPlatform.get()).getAllPlatformExtensions(),r=0;r<n.size();++r){var o=n.at(r),i=o.getName(),a=o.getExtensionObjectsTypes(),s=o.getBehaviorsTypes(),l=au(o),c=du(l,e?o.getAllConditions():o.getAllActions(),{extension:o,objectMetadata:void 0,behaviorMetadata:void 0});t=[].concat((0,j.Z)(t),(0,j.Z)(su(c,iu[i])));for(var u=0;u<a.size();++u){var d=a.at(u),p=o.getObjectMetadata(d),h={extension:o,objectMetadata:p};t=[].concat((0,j.Z)(t),(0,j.Z)(du(l,e?o.getAllConditionsForObject(d):o.getAllActionsForObject(d),h)),(0,j.Z)(cu(e,o,d,l,h)))}for(var f=0;f<s.size();++f){var g=s.at(f),m=o.getBehaviorMetadata(g),x={extension:o,behaviorMetadata:m};t=[].concat((0,j.Z)(t),(0,j.Z)(du(l,e?o.getAllConditionsForBehavior(g):o.getAllActionsForBehavior(g),x)),(0,j.Z)(lu(e,o,g,l,x)))}}return t},hu=function(e,t,n,r){var o=[],i=eu.getTypeOfObject(t,n,r,!0),a=eu.getBehaviorsOfObject(t,n,r,!0).toJSArray(),s=new Set(a.map((function(e){return eu.getTypeOfBehavior(t,n,e,!1)}))),l=eu.MetadataProvider.getExtensionAndObjectMetadata(eu.JsPlatform.get(),i),c=l.getExtension(),u={extension:c,objectMetadata:l.getMetadata()},d="";o=[].concat((0,j.Z)(o),(0,j.Z)(du(d,e?c.getAllConditionsForObject(i):c.getAllActionsForObject(i),u)),(0,j.Z)(cu(e,c,i,d,u)));if(""!==i){var p=eu.MetadataProvider.getExtensionAndObjectMetadata(eu.JsPlatform.get(),"").getExtension();o=[].concat((0,j.Z)(o),(0,j.Z)(du(d,e?p.getAllConditionsForObject(""):p.getAllActionsForObject(""),u)),(0,j.Z)(cu(e,p,"",d,u)))}for(var h=eu.asPlatform(eu.JsPlatform.get()).getAllPlatformExtensions(),f=function(t){var n=h.at(t);n.getBehaviorsTypes().toJSArray().filter((function(e){return s.has(e)})).forEach((function(t){var r=n.getBehaviorMetadata(t),i={extension:n,behaviorMetadata:r};o=[].concat((0,j.Z)(du(d,e?n.getAllConditionsForBehavior(t):n.getAllActionsForBehavior(t),i)),(0,j.Z)(lu(e,n,t,d,i)),(0,j.Z)(o))}))},g=0;g<h.size();++g)f(g);return function(e){var t=e.filter((function(e){return 0===e.fullGroupName.length})),n=e.filter((function(e){return 0!==e.fullGroupName.length}));return[].concat((0,j.Z)(t),(0,j.Z)(n))}(o)},fu=function(e,t){return gu(e,(function(e){return function(e,t){return $c(e.getCategory(),t)+"/"+e.getFullName()}(e,t)}))},gu=function(e,t){for(var n=[],r=eu.asPlatform(eu.JsPlatform.get()).getAllPlatformExtensions(),o=0;o<r.size();++o){var i=r.at(o),a=i.getName(),s=t(i),l=du(s,e?i.getAllConditions():i.getAllActions(),{extension:i,objectMetadata:void 0,behaviorMetadata:void 0});n=[].concat((0,j.Z)(n),(0,j.Z)(su(l,iu[a])))}return n},mu=function(e){var t=e.getParametersCount();if(t>=1){var n=e.getParameter(0).getType();if("object"===n)return 0;if(eu.ParameterMetadata.isObject(n))return 0;if(("objectsContext"===n||"currentScene"===n)&&t>=2){var r=e.getParameter(1).getType();if(eu.ParameterMetadata.isObject(r))return 1}}return-1},xu=n.g.gd,vu=function(e){return"number"===e},bu=function(e,t,n){return(0,Nt.mapVector)(t.keys(),(function(r){var o=t.get(r);if(!o.isShown())return null;if(n.objectMetadata&&n.objectMetadata.isUnsupportedBaseObjectCapability(o.getRequiredBaseObjectCapability()))return null;for(var i=[],a=0;a<o.getParametersCount();a++)n.objectMetadata&&0===a||n.behaviorMetadata&&a<=1||o.getParameter(a).isCodeOnly()||i.push(o.getParameter(a));var s=o.getGroup();return{type:r,name:r,displayedName:o.getFullName(),fullGroupName:[e,s].filter(Boolean).join("/"),iconFilename:o.getSmallIconFilename(),metadata:o,parameters:i,scope:n,isPrivate:o.isPrivate(),isRelevantForLayoutEvents:o.isRelevantForLayoutEvents(),isRelevantForFunctionEvents:o.isRelevantForFunctionEvents(),isRelevantForAsynchronousFunctionEvents:o.isRelevantForAsynchronousFunctionEvents(),isRelevantForCustomObjectEvents:o.isRelevantForCustomObjectEvents()}})).filter(Boolean)},ju=function(e){var t=xu.asPlatform(xu.JsPlatform.get()).getAllPlatformExtensions();return kc()((0,Nt.mapVector)(t,(function(t){var n=au(t),r={extension:t,objectMetadata:void 0,behaviorMetadata:void 0};return[].concat((0,j.Z)(vu(e)?[]:bu(n,t.getAllStrExpressions(),r)),(0,j.Z)(bu(n,t.getAllExpressions(),r)))})))},Cu=function(e,t){var n=xu.MetadataProvider.getExtensionAndBehaviorMetadata(xu.JsPlatform.get(),t),r=n.getExtension(),o={extension:r,behaviorMetadata:n.getMetadata()};return[].concat((0,j.Z)(vu(e)?[]:bu("",r.getAllStrExpressionsForBehavior(t),o)),(0,j.Z)(bu("",r.getAllExpressionsForBehavior(t),o)))},yu=function(e,t){if(!t)return e;var n=t.toLowerCase();return function(e){if(!t)return e;for(var r=0;r<e.length;++r)if(e[r].type.toLowerCase()===n){var o=e[r];e.splice(r,1),e.unshift(o)}return e}(e.filter((function(e){return-1!==e.type.toLowerCase().indexOf(n)})))},Zu=n(40755),ku=n(79266),wu=n.n(ku),Tu=n(32319),Eu=n.n(Tu),Su=function(e){var t={};return e.forEach((function(e){var n=Eu()(e.fullGroupName.split("/"));n.length||(n=[""]),wu()(t,n,(function(t){var n=t||{};return(0,i.Z)((0,i.Z)({},n),{},(0,r.Z)({},e.type,e))}))})),t},Pu=function e(t,n){if(!n)return null;for(var r=Object.keys(t),o=0;o<r.length;++o){var i=r[o],a=t[i];if(!a)return null;if("string"===typeof a.type){if(a.type===n)return[]}else{var s=e(a,n);if(s)return[i].concat((0,j.Z)(s))}}return null},Iu=function(e){return"object-or-object-group-value-".concat(e)},Du=function(e){return"instruction-value-".concat(e)},Au=function(e){var t,n=e.id,r=e.instructionOrExpressionMetadata,o=e.iconSize,i=e.onClick,a=e.selectedValue,s=e.matches,l=function(e){var t=r[e];if(s&&s.length){var n=s.filter((function(t){return t.key===e}));n.length&&(t=(0,f.jsx)(Ir,{text:t,matchesCoordinates:n[0].indices}))}return t};return(0,f.jsx)(ze,{id:n,selected:a===Du(r.type),primaryText:l("displayedName"),secondaryText:l("fullGroupName"),leftIcon:(0,f.jsx)(Mc.Z,{iconSize:o,src:r.iconFilename}),onClick:i,disableAutoTranslate:!0},"instruction-key-".concat((t=r).fullGroupName).concat(t.scope.objectMetadata?"-"+t.scope.objectMetadata.getName():"","-").concat(t.type))},Lu=n(84506),Mu=n(36607),Fu=function e(t){var n=t.instructionTreeNode,r=t.onChoose,o=t.iconSize,i=t.useSubheaders,a=t.selectedValue,s=t.selectedItemRef,l=t.initiallyOpenedPath,c=t.getGroupIconSrc,u=t.parentGroupIconSrc,d=l||[],p=(0,Lu.Z)(d),h=p[0],g=p.slice(1);return kc()(Object.keys(n).map((function(t){var l=n[t];if(!l)return null;if("string"===typeof l.type){var d=l,p=Du(l.type),m=a===p;return(0,f.jsx)(ze,{primaryText:d.displayedName,selected:m,id:"instruction-item-"+d.type.replace(/:/g,"-"),leftIcon:(0,f.jsx)(Mc.Z,{iconSize:o,src:d.iconFilename}),onClick:function(){r(d.type,d)},ref:m?s:void 0},p)}var x=l;if(i){var v=c(t)||u;return[(0,f.jsx)(Mu.Z,{children:t},(b=t,"subheader-key-".concat(b)))].concat(e({instructionTreeNode:x,onChoose:r,iconSize:o,useSubheaders:!1,selectedValue:a,selectedItemRef:s,initiallyOpenedPath:g,getGroupIconSrc:c,parentGroupIconSrc:v}))}var b,j=h===t,C=c(t)||u;return(0,f.jsx)(ze,{primaryText:t,autoGenerateNestedIndicator:!0,initiallyOpen:j,leftIcon:C?(0,f.jsx)(Mc.Z,{iconSize:o,src:C}):null,renderNestedItems:function(){return e({instructionTreeNode:x,onChoose:r,iconSize:o,selectedValue:a,selectedItemRef:s,initiallyOpenedPath:j?g:void 0,getGroupIconSrc:c,parentGroupIconSrc:C})}},t)})))},Ou=n(82069),Ru=n.g.gd,Bu=function(e){return Ru.JsPlatform.get().getInstructionOrExpressionGroupMetadata(e).getIcon()},_u=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchText:"",searchResults:[]},e._scrollView=u.createRef(),e._selectedItem=u.createRef(),e.searchApi=null,e.initialInstructionTypePath=Pu(e.props.instructionsInfoTree,e.props.selectedType),e.focus=function(){e._searchBar&&e._searchBar.focus()},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this._selectedItem.current&&this._scrollView.current&&this._scrollView.current.scrollTo(this._selectedItem.current),this.searchApi=new Zu.Z(this.props.instructionsInfo,(0,i.Z)((0,i.Z)({},Ou.KE),{},{keys:[{name:"displayedName",weight:2},{name:"fullGroupName",weight:1}]}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedType,r=t.iconSize,o=t.instructionsInfoTree,a=t.onChoose,s=t.searchPlaceholderObjectName,l=t.searchPlaceholderIsCondition,u=t.useSubheaders,d=t.helpPagePath,p=t.style,h=t.onClickMore,g=t.id,m=this.state.searchText,x=m&&this.searchApi?this.searchApi.search((0,Ou.G9)(m,["displayedName","fullGroupName"])).map((function(e){return{item:e.item,matches:(0,Ou.zi)(e,m)}})):[],v=!m||!!x.length;return(0,f.jsxs)("div",{style:(0,i.Z)({minHeight:0},p),id:g,children:[(0,f.jsx)(pt.Z,{value:m,onChange:function(t){return e.setState({searchText:t})},onRequestSearch:function(){x.length&&a(x[0].item.type,x[0].item)},placeholder:s?l?{id:"Search {searchPlaceholderObjectName} conditions",values:{searchPlaceholderObjectName:s}}:{id:"Search {searchPlaceholderObjectName} actions",values:{searchPlaceholderObjectName:s}}:void 0,helpPagePath:d,ref:function(t){return e._searchBar=t},autoFocus:this.props.focusOnMount?"desktop":void 0}),(0,f.jsxs)(Ot.Z,{autoHideScrollbar:!0,ref:this._scrollView,children:[v&&(0,f.jsx)(Ge,{children:m?x.map((function(e){var t,o=e.item,i=e.matches;return Au({instructionOrExpressionMetadata:o,id:(t=o,"instruction-or-expression-".concat(t.scope.objectMetadata?t.scope.objectMetadata.getName().replace(/:/g,"-")+"-":"").concat(t.type.replace(/:/g,"-"))),iconSize:r,onClick:function(){return a(o.type,o)},matches:i,selectedValue:Du(n)})})):(0,f.jsxs)(f.Fragment,{children:[Fu({instructionTreeNode:o,iconSize:r,onChoose:a,useSubheaders:u,selectedValue:Du(n),initiallyOpenedPath:this.initialInstructionTypePath,selectedItemRef:this._selectedItem,getGroupIconSrc:Bu}),h&&(0,f.jsx)(C.ep,{justifyContent:"center",children:(0,f.jsx)(E.Z,{primary:!0,icon:(0,f.jsx)(Ue.Z,{}),onClick:h,label:(0,f.jsx)(c.Trans,{id:"Add a new behavior to the object"})})})]})}),!v&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Nothing corresponding to your search. Try browsing the list instead."})})})]})]})}}]),n}(u.PureComponent),Nu=n.g.gd,Uu=function(e,t){return e.filter((function(e){return Hu(e,t)}))},Hu=function(e,t){var n=e.scope,r=n.behaviorMetadata,o=n.extension,i=t.eventsBasedBehavior,a=t.eventsFunctionsExtension;return!(!(e.isRelevantForLayoutEvents&&(t.layout||t.externalEvents)||e.isRelevantForFunctionEvents&&t.eventsFunction||e.isRelevantForAsynchronousFunctionEvents&&t.eventsFunction&&t.eventsFunction.isAsync()||e.isRelevantForCustomObjectEvents&&t.eventsBasedObject)||(e.isPrivate||r&&r.isPrivate())&&!(r&&i&&a&&Nu.PlatformExtension.getBehaviorFullType(a.getName(),i.getName())===r.getName())&&(!a||a.getName()!==o.getName()||e.isPrivate&&r))},Vu=["expressionType","scope"],Wu={flex:1,display:"flex",flexDirection:"column"},zu=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).instructionsInfo=Uu(function(e){var t=[],n=[],r=ju(e),o=xu.asPlatform(xu.JsPlatform.get()).getAllPlatformExtensions();return(0,Nt.mapVector)(o,(function(r){var o=au(r);(0,Nt.mapVector)(r.getExtensionObjectsTypes(),(function(n){var i=r.getObjectMetadata(n),a={extension:r,objectMetadata:i};vu(e)||t.push.apply(t,bu(o,r.getAllStrExpressionsForObject(n),a)),t.push.apply(t,bu(o,r.getAllExpressionsForObject(n),a))})),(0,Nt.mapVector)(r.getBehaviorsTypes(),(function(t){var i=r.getBehaviorMetadata(t),a={extension:r,behaviorMetadata:i};vu(e)||n.push.apply(n,bu(o,r.getAllStrExpressionsForBehavior(t),a)),n.push.apply(n,bu(o,r.getAllExpressionsForBehavior(t),a))}))})),[].concat((0,j.Z)(r),t,n)}(e.props.expressionType),e.props.scope),e.instructionsInfoTree=Su(e.instructionsInfo),e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.expressionType,e.scope,(0,yt.Z)(e,Vu));return(0,f.jsx)(_u,(0,i.Z)({id:"expression-selector",style:Wu,instructionsInfo:this.instructionsInfo,instructionsInfoTree:this.instructionsInfoTree,iconSize:16,useSubheaders:!0,helpPagePath:"/all-features/expressions-reference"},t))}}]),n}(u.Component),Gu=function(e){return 0!==(0,Nt.mapFor)(0,e.getParametersCount(),(function(t){return!e.getParameter(t).isCodeOnly()})).filter((function(e){return e})).length},Yu=function(e){var t=e.expressionMetadata,n=e.parameterValues,r=e.project,o=e.scope,i=e.globalObjectsContainer,a=e.objectsContainer,s=e.parameterRenderingService,l=e.onChangeParameter;if(!s)return console.error("Missing parameterRenderingService for ExpressionParametersEditor"),null;var d=t.getParametersCount(),p={getParametersCount:function(){return d},getParameter:function(e){return n[e]||""}};return(0,f.jsxs)(C.ak,{children:[(0,Nt.mapFor)(0,t.getParametersCount(),(function(e){var c=t.getParameter(e),d=s.getParameterComponent(c.getType());return c.isCodeOnly()?null:(0,f.jsx)(u.Fragment,{children:(0,f.jsx)(d,{expressionMetadata:t,expression:p,parameterMetadata:c,parameterIndex:e,value:n[e],onChange:function(t){return l(e,t)},project:r,scope:o,globalObjectsContainer:i,objectsContainer:a,parameterRenderingService:s})},e)})),!Gu(t)&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"There is nothing to configure."})})]})},qu={minHeightContainer:{minHeight:300,flex:1,flexDirection:"column"}},Xu=function(e){var t=e.project,n=e.scope,r=e.onDone,o=e.onRequestClose,i=e.globalObjectsContainer,s=e.objectsContainer,l=e.expressionMetadata,d=e.parameterRenderingService,p=u.useState(Array(l.getParametersCount()).fill("")),h=(0,a.Z)(p,2),g=h[0],m=h[1];return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Enter the expression parameters"}),id:"expression-parameters-editor-dialog",open:!0,actions:[(0,f.jsx)(V.vF,{id:"apply-button",label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:function(){return r(g)}},"apply")],secondaryActions:l.getHelpPath()?[(0,f.jsx)(zn.Z,{helpPagePath:l.getHelpPath()},"help-button")]:[],onRequestClose:o,onApply:function(){return r(g)},children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsxs)("div",{style:qu.minHeightContainer,children:[(0,f.jsx)(J.Z,{children:l.getDescription()}),(0,f.jsx)(Yu,{project:t,scope:n,globalObjectsContainer:i,objectsContainer:s,expressionMetadata:l,parameterValues:g,onChangeParameter:function(e,t){m(g.map((function(n,r){return r===e?t:n})))},parameterRenderingService:d})]})})})},Ju=function(e,t,n){var r=t.getParametersCount();return e.filter((function(e,o){return!(o<n)&&(o<r&&!t.getParameter(o).isCodeOnly())}))},Ku=function(e,t,n){var r=-1,o=-1,i=e.map((function(e,n){var i=t.getParameter(n);return i.isOptional()||(r=n),e.length>0?(o=n,e):i.getDefaultValue()})),a=Math.max(r,o,0);return i.filter((function(e,r){return n<=r&&r<=a&&!t.getParameter(r).isCodeOnly()}))},Qu=function(e){var t=(0,Nt.mapVector)(e.metadata.getParameters(),(function(e){return e.getType()}));return e.scope.objectMetadata?Ju(t,e.metadata,1):e.scope.behaviorMetadata?Ju(t,e.metadata,2):Ju(t,e.metadata,0)},$u={width:"100%",position:"absolute",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"transparent"},ed={backgroundColor:"rgba(244, 67, 54, 0.15)",borderSizing:"border-box",borderBottom:"3px solid rgba(244, 67, 54, 0.7)"},td=function(e){var t=e.value,n=e.style,r=e.highlights.slice().sort((function(e,t){return e.begin-t.begin})),o=[],a=0;return r.forEach((function(e,n){var r=Math.max(e.begin,a);r!==a&&o.push((0,f.jsx)("span",{children:t.substring(a,r)},"defaultText-".concat(n))),a<e.end&&(o.push((0,f.jsx)("span",{style:ed,children:t.substring(r,e.end)},"highlightedText-".concat(n))),a=e.end)})),a<t.length&&o.push((0,f.jsx)("span",{children:t.substring(a)},"defaultText-end")),(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},$u),n),children:o})},nd=n(71046),rd=n.n(nd),od=n(51029),id=n.n(od),ad=n.g.gd,sd=function(e){for(var t=0;t<e.length;++t)if(-1!==",.\"()[]{}()[],+-<>?^=:!+-/* '".indexOf(e[t]))return!1;return!0},ld=function(e){if(!e)return[];var t=function e(t,n,r,o){var i=r?sd(t):o,a={name:t,isValidName:i};return n.getType()===ad.Variable.Structure?[a].concat((0,j.Z)(id()(n.getAllChildrenNames().toJSArray(),(function(r){return e(sd(r)?"".concat(t,".").concat(r):"".concat(t,"[").concat('"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"',"]"),n.getChild(r),!1,i)})))):n.getType()===ad.Variable.Array?[a].concat((0,j.Z)(id()(new Array(n.getChildrenCount()).fill(""),(function(r,o){return e("".concat(t,"[").concat(o,"]"),n.getAtIndex(o),!1,i)})))):[a]};return kc()((0,Nt.mapFor)(0,e.count(),(function(n){return t(e.getNameAt(n),e.getAt(n),!0,!0)})))},cd=n.g.gd,ud=function(e){var t=e.instructionMetadata,n=e.instruction,r=e.expressionMetadata,o=e.expression,i=e.parameterIndex;if(void 0===i||null==i)return null;var a=null;if(t&&n){var s=cd.ParameterMetadataTools.getObjectParameterIndexFor(t.getParameters(),i);s>=0&&s<n.getParametersCount()&&(a=n.getParameter(s).getPlainString())}else if(r&&o){var l=cd.ParameterMetadataTools.getObjectParameterIndexFor(r.getParameters(),i);l>=0&&l<o.getParametersCount()&&(a=o.getParameter(l))}return a},dd=function(e){var t=e.instruction,n=e.expression,r=e.parameterIndex;if(void 0===r||null==r)return null;if(t){if(r>=1&&r<t.getParametersCount())return t.getParameter(r-1).getPlainString()}else if(n&&r>=1&&r<n.getParametersCount())return n.getParameter(r-1);return null},pd=function(e){if(!e)return null;var t=e.trim();return t.length>=2&&'"'===t[0]&&'"'===t[t.length-1]?t.substr(1,t.length-2):null},hd=function(e){if(!e)return[];try{return JSON.parse(e.getExtraInfo()).map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}catch(t){console.error("The parameter seems misconfigured, as an array of choices could not be extracted - verify that your properly wrote a list of choices in JSON format. Full exception is:",t)}return[]},fd=n(8278),gd=n.g.gd,md=function(e,t,n){return(0,Nt.mapVector)(t.getParametersForEvents(e),(function(e){return e.isCodeOnly()||gd.ParameterMetadata.isObject(e.getType())||gd.ParameterMetadata.isBehavior(e.getType())||0!==n.length&&!n.includes(gd.ValueTypeMetadata.getPrimitiveValueType(e.getType()))?null:e})).filter(Boolean)},xd=n.g.gd,vd=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.toLowerCase().indexOf(n)}))},bd=function(e,t,n,r,o,i){return e.filter((function(e){return!o||e.type===t})).map((function(e){return e.name&&e.parameters?{kind:"Expression",completion:e.name,replacementStartPosition:n,replacementEndPosition:r,enumeratedExpressionMetadata:e,addParenthesis:!0,hasVisibleParameters:0!==Qu(e).length,isExact:o,shouldConvertToString:"string"===i&&"number"===e.metadata.getReturnType()}:null})).filter(Boolean)},jd=function(e,t){var n=t.getPrefix(),r=t.getType(),o=t.getObjectName(),i=t.isExact(),a=e.gd,s=e.globalObjectsContainer,l=e.objectsContainer,c=a.getTypeOfObject(s,l,o,!0),u=function(e,t){var n=xu.MetadataProvider.getExtensionAndObjectMetadata(xu.JsPlatform.get(),t),r=n.getExtension(),o={extension:r,objectMetadata:n.getMetadata()},i=[].concat((0,j.Z)(vu(e)?[]:bu("",r.getAllStrExpressionsForObject(t),o)),(0,j.Z)(bu("",r.getAllExpressionsForObject(t),o)));if(""!==t){var a=xu.MetadataProvider.getExtensionAndObjectMetadata(xu.JsPlatform.get(),"").getExtension();i=[].concat((0,j.Z)(i),(0,j.Z)(vu(e)?[]:bu("",a.getAllStrExpressionsForObject(""),o)),(0,j.Z)(bu("",a.getAllExpressionsForObject(""),o)))}return i}(r,c),d=Uu(yu(u,n),e.scope),p=bd(d,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),i,r),h=a.getBehaviorsOfObject(s,l,o,!0);return(0,Nt.mapVector)(h,(function(c){var u=a.getTypeOfBehaviorInObjectOrGroup(s,l,o,c,!0);if(u){var d=Cu(r,u),h=Uu(yu(d,n),e.scope),f=bd(h,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),i,r);f.forEach((function(e){e.completion=c+a.PlatformExtension.getNamespaceSeparator()+e.completion})),p.push.apply(p,f)}})),p},Cd=function(e,t){var n=e.gd;return kc()((0,Nt.mapVector)(t,(function(t){var r=t.getCompletionKind();if(r===n.ExpressionCompletionDescription.Expression){var o=t.getObjectName();return t.getBehaviorName()?function(e,t){var n=t.getPrefix(),r=t.getType(),o=t.getBehaviorName(),i=t.isExact(),a=e.gd,s=e.globalObjectsContainer,l=e.objectsContainer,c=a.getTypeOfBehavior(s,l,o,!0),u=Cu(r,c),d=Uu(yu(u,n),e.scope);return bd(d,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),i,r)}(e,t):o?jd(e,t):function(e,t){var n=t.getPrefix(),r=t.getType(),o=t.isExact(),i=ju(r),a=Uu(yu(i,n),e.scope);return bd(a,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),o,r)}(e,t)}return r===n.ExpressionCompletionDescription.Object?function(e,t){var n=t.getPrefix(),r=t.getType(),o=e.gd,i=e.globalObjectsContainer,a=e.objectsContainer,s=Lc(i,a),l=s.allObjectsList,c=s.allGroupsList,u=Ic(l,{searchText:n,selectedTags:[],hideExactMatches:!0}),d=Dc(c,{searchText:n,hideExactMatches:!0}),p=!o.ParameterMetadata.isObject(r);return[].concat((0,j.Z)(u.map((function(e){var n=e.object;return{kind:"Object",completion:n.getName(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),object:n,addDot:p}}))),(0,j.Z)(d.map((function(e){return{kind:"Object",completion:e.group.getName(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addDot:p}}))))}(e,t):r===n.ExpressionCompletionDescription.Behavior?function(e,t){var n=t.getPrefix(),r=t.isExact(),o=t.getObjectName(),i=e.gd,a=e.globalObjectsContainer,s=e.objectsContainer;return i.getBehaviorsOfObject(a,s,o,!0).toJSArray().filter((function(e){return-1!==e.indexOf(n)})).map((function(e){var n=i.getTypeOfBehaviorInObjectOrGroup(a,s,o,e,!0);return{kind:"Behavior",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addNamespaceSeparator:!0,isExact:r,behaviorType:n}}))}(e,t):r===n.ExpressionCompletionDescription.Text?function(e,t){var n=t.getPrefix(),r=t.getType(),o=e.project,i=e.scope,a=[];if("layer"===r){var s=i.layout;if(s)for(var l=0;l<s.getLayersCount();l++)a.push('"'.concat(s.getLayerAt(l).getName(),'"'))}else if("sceneName"===r){if(o)for(var c=0;c<o.getLayoutsCount();c++)a.push('"'.concat(o.getLayoutAt(c).getName(),'"'))}else if("stringWithSelector"===r)a=hd(t.getParameterMetadata()).map((function(e){return e.completion}));else if("objectPointName"===r){var u=t.getObjectName();if(!u)return[];var d=Fc(o,i.layout,u);if(!d)return[];if("Sprite"!==d.getType())return[];var p=xd.asSpriteConfiguration(d.getConfiguration());a=(0,fd.ge)(p).map((function(e){return e.length>0?'"'.concat(e,'"'):null})).filter(Boolean)}else if("objectAnimationName"===r){var h=t.getObjectName();if(!h)return[];var f=Fc(o,i.layout,h);if(!f)return[];if("Sprite"!==f.getType())return[];var g=xd.asSpriteConfiguration(f.getConfiguration());a=(0,Nt.mapFor)(0,g.getAnimationsCount(),(function(e){var t=g.getAnimation(e).getName();return t.length>0?'"'.concat(t,'"'):null})).filter(Boolean)}else if("functionParameterName"===r){var m=i.eventsBasedBehavior||i.eventsBasedObject,x=m?m.getEventsFunctions():i.eventsFunctionsExtension,v=i.eventsFunction;if(v&&x){var b=t.getParameterMetadata().getExtraInfo().split(",");a=md(x,v,b).map((function(e){return'"'.concat(e.getName(),'"')}))}}var j=vd(a,n).sort(),C=t.isLastParameter();return j.map((function(e){return{kind:"Text",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addParameterSeparator:!C}}))}(e,t):r===n.ExpressionCompletionDescription.Variable?function(e,t){var n,r=t.getPrefix(),o=t.getType(),i=t.getObjectName(),a=e.project,s=e.scope.layout;if("globalvar"===o){if(!a)return[];n=a.getVariables()}else if("scenevar"===o){if(!s)return[];n=s.getVariables()}else if("objectvar"===o){var l=Fc(a,s,i);if(!l)return[];n=l.getVariables()}var c=ld(n).map((function(e){var t=e.name;return e.isValidName?t:null})).filter(Boolean);return vd(c,r).map((function(e){return{kind:"Variable",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition()}}))}(e,t):[]})))},yd=function(e){var t=e.expression,n=e.wordStartPosition,r=e.wordEndPosition,o=e.insertedWord,i=function(e){for(var t,n=[],r=new RegExp(/[^\w\d.:]/g);t=r.exec(e);)n.push(t.index);return Math.max.apply(Math,n)}(t.substring(0,n)),a=t.substring(0,i+1),s=t.substring(i+1,n);return{expression:a+"ToString("+s+o+")"+t.substring(r),caretLocation:a.length+s.length+o.length+9}},Zd=function(e){return e.renderEverything?0:Math.max(0,e.autocompletions.length-7)},kd=function(e,t){var n=e.autocompletions.length!==t.length;return{autocompletions:t,selectedCompletionIndex:n?0:e.selectedCompletionIndex,renderEverything:!n&&e.renderEverything}},wd=n.g.gd,Td={overflow:"hidden",overflowWrap:"break-word"},Ed=u.memo((function(e){var t=e.src,n="dark"===u.useContext(m.Z).palette.type&&(t.startsWith("data:image/svg+xml")||t.includes("_black"));return(0,f.jsx)("img",{src:t,alt:"",style:{maxWidth:16,maxHeight:16,filter:n?"grayscale(1) invert(1)":void 0}})})),Sd=function(e,t,n){return Qu(n).map((function(n){var r=e.getUserFriendlyTypeName(n);return r?t._(r):n})).join(", ")},Pd=u.forwardRef((function(e,t){var n=e.expressionAutocompletion,r=e.isSelected,o=e.onClick;return(0,f.jsx)(Zr.Z,{style:Md.button,onPointerDown:function(e){return e.preventDefault()},onClick:o,ref:t,children:(0,f.jsx)(J.Z,{style:Td,noMargin:!0,align:"left",children:r?(0,f.jsx)("b",{children:n.completion}):n.completion})})})),Id=u.forwardRef((function(e,t){var n=e.expressionAutocompletion,r=e.isSelected,o=e.onClick,i=e.i18n,a=e.parameterRenderingService;if(!n.enumeratedExpressionMetadata)return null;var s=r?(0,f.jsx)("b",{children:n.completion}):n.completion;return(0,f.jsxs)(Zr.Z,{style:Md.button,onPointerDown:function(e){return e.preventDefault()},onClick:o,ref:t,children:[(0,f.jsx)(Ed,{src:n.enumeratedExpressionMetadata.iconFilename}),(0,f.jsx)(L.LZ,{}),(0,f.jsxs)(J.Z,{style:Td,noMargin:!0,align:"left",children:[s,"(",(0,f.jsx)("i",{children:Sd(a,i,n.enumeratedExpressionMetadata)}),")"]})]})})),Dd=u.forwardRef((function(e,t){var n=e.project,r=e.expressionAutocompletion,o=e.isSelected,i=e.onClick,a=n&&r.object?Oc.Z.getThumbnail(n,r.object.getConfiguration()):"res/types/object.png",s=o?(0,f.jsx)("b",{children:r.completion}):r.completion;return(0,f.jsxs)(Zr.Z,{style:Md.button,onPointerDown:function(e){return e.preventDefault()},onClick:i,ref:t,children:[(0,f.jsx)(Ed,{src:a}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{style:Td,noMargin:!0,align:"left",children:s})]})})),Ad=u.forwardRef((function(e,t){var n=e.project,r=e.expressionAutocompletion,o=e.isSelected,i=e.onClick,a=o?(0,f.jsx)("b",{children:r.completion}):r.completion,s=r.behaviorType||null,l=n&&s?wd.MetadataProvider.getBehaviorMetadata(n.getCurrentPlatform(),s).getIconFilename():"res/types/behavior.png";return(0,f.jsxs)(Zr.Z,{style:Md.button,onPointerDown:function(e){return e.preventDefault()},onClick:i,ref:t,children:[(0,f.jsx)(Ed,{src:l}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{style:Td,noMargin:!0,align:"left",children:a})]})})),Ld=function(e){var t=e.expressionMetadata,n=e.i18n,r=e.parameterRenderingService;return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{style:Td,size:"body2",children:t.getDescription()}),(0,Nt.mapVector)(t.getParameters(),(function(e,o){return function(e,t){var n=e.getParameter(t);return!n.isCodeOnly()&&(0!==t||"object"!==n.getType())&&(1!==t||"behavior"!==n.getType())}(t,o)&&(0,f.jsxs)(J.Z,{style:Td,size:"body2",children:[(0,f.jsx)("i",{children:n._(r.getUserFriendlyTypeName(e.getType()))})," \uff0d "+e.getDescription()]},o)}))]})},Md={container:{width:370,maxHeight:150,display:"flex",overflowX:"hidden"},button:{width:"100%",paddingLeft:8,paddingRight:8,justifyContent:"flex-start"},tooManyTextContainer:{width:"100%"},popperStyle:{zIndex:Kc.default.tooltip+100,flex:1,display:"flex",flexDirection:"row"}};function Fd(e){var t=e.project,n=e.expressionAutocompletions,r=e.remainingCount,o=e.selectedCompletionIndex,i=e.anchorEl,a=e.onChoose,s=e.onScroll,l=e.parameterRenderingService,d=u.useRef(null),p=u.useRef(null);return u.useEffect((function(){d.current&&p.current&&d.current.scrollTo(p.current)}),[d,p,o]),0===n.length?null:(0,f.jsx)(c.I18n,{children:function(e){var u=e.i18n;return(0,f.jsxs)(Jc.Z,{style:Md.popperStyle,open:!0,anchorEl:i,placement:"bottom-start",disablePortal:!1,children:[(0,f.jsx)(ee.Z,{variant:"outlined",square:!0,style:Md.container,background:"light",children:(0,f.jsxs)(Ot.Z,{ref:d,onScroll:s,children:[n.map((function(e,n){var r=o===n,i=r?p:void 0;return"Text"===e.kind||"FullExpression"===e.kind||"Variable"===e.kind?(0,f.jsx)(Pd,{expressionAutocompletion:e,isSelected:r,onClick:function(){return a(e)},ref:i},n):"Expression"===e.kind?!e.isExact&&(0,f.jsx)(Id,{expressionAutocompletion:e,onClick:function(){return a(e)},isSelected:r,i18n:u,parameterRenderingService:l,ref:i},n):"Object"===e.kind?(0,f.jsx)(Dd,{project:t,expressionAutocompletion:e,onClick:function(){return a(e)},isSelected:r,ref:i},n):"Behavior"===e.kind?(0,f.jsx)(Ad,{project:t,expressionAutocompletion:e,onClick:function(){return a(e)},isSelected:r,ref:i},n):null})),r>0&&(0,f.jsx)(L.sg,{justifyContent:"flex-start",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"And others..."})})})]})}),null!==o&&"Expression"===n[o].kind&&!n[o].isExact&&(0,f.jsx)(ee.Z,{variant:"outlined",square:!0,style:Md.container,background:"light",children:(0,f.jsx)(Ot.Z,{autoHideScrollbar:!0,children:(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(Ld,{expressionMetadata:n[o].enumeratedExpressionMetadata.metadata,i18n:u,parameterRenderingService:l})})})})})]})}})}var Od=n.g.gd,Rd={container:{display:"flex",alignItems:"flex-start"},textFieldContainer:{flex:1,minWidth:200},textFieldAndHighlightContainer:{position:"relative"},expressionSelectorPopoverContentSmall:{display:"flex",maxHeight:250},expressionSelectorPopoverContent:{display:"flex",maxHeight:350},input:{fontFamily:'"Lucida Console", Monaco, monospace',lineHeight:1.4},backgroundHighlightingWithFloatingLabel:{marginTop:22,paddingLeft:12,paddingRight:12,boxSizing:"border-box"},backgroundHighlightingInline:{marginTop:0,paddingLeft:0,paddingRight:0},backgroundHighlightingInlineWithFloatingLabel:{marginTop:22,paddingLeft:0,paddingRight:0}},Bd=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o)))._field=null,e._fieldElementWidth=null,e._inputElement=null,e.state={popoverOpen:!1,parametersDialogOpen:!1,selectedExpressionInfo:null,validatedValue:e.props.value,errorText:null,errorHighlights:[],autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}},e.focus=function(t){e._field&&(e._field.focus(t),t&&t.selectAll&&e._inputElement&&e._inputElement.setSelectionRange(0,e.props.value.toString().length),e._enqueueValidation())},e._openExpressionPopover=function(){e.setState({popoverOpen:!0})},e._handleFocus=function(e){e.preventDefault()},e._handleRequestClose=function(){e.setState({popoverOpen:!1})},e._handleChange=function(t){e.setState({validatedValue:t},(function(){return e._enqueueValidation()}))},e._handleBlur=function(t){var n=t.currentTarget.value;e.props.onChange&&e.props.onChange(n),e.setState({validatedValue:n},(function(){e._enqueueValidation.cancel(),e._doValidation(),e.setState({autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}})}))},e._shouldOpenParametersDialog=function(e){return Gu(e.metadata)},e._handleExpressionChosen=function(t){var n={popoverOpen:!1};e._shouldOpenParametersDialog(t)?n=(0,i.Z)((0,i.Z)({},n),{},{parametersDialogOpen:!0,selectedExpressionInfo:t}):e.insertExpression(t,[]),e.setState(n)},e.insertExpression=function(t,n){if(e._inputElement){var r=e.props,o=r.globalObjectsContainer,i=r.objectsContainer,a=r.expressionType,s=r.value,l=e._inputElement.selectionStart,c=new Od.ExpressionParser2,u=c.parseExpression(s.substr(0,l)+"fakeIdentifier"+s.substr(l)).get(),d=Od.ExpressionNodeLocationFinder.getNodeAtPosition(u,l+14-1),p=Od.ExpressionTypeFinder.getType(Od.JsPlatform.get(),o,i,a,d),h="number"===t.metadata.getReturnType()&&"string"===p,f=function(e,t,n){var r=e.name||"",o="";if(e.scope.objectMetadata){var i=t[0],a=Ku(t,e.metadata,1).join(", ");o="".concat(i,".").concat(r,"(").concat(a,")")}else if(e.scope.behaviorMetadata){var s=t[0],l=t[1],c=Ku(t,e.metadata,2).join(", ");o="".concat(s,".").concat(l,"::").concat(r,"(").concat(c,")")}else{var u=Ku(t,e.metadata,0).join(", ");o="".concat(r,"(").concat(u,")")}return n.shouldConvertToString?"ToString(".concat(o,")"):o}(t,n,{shouldConvertToString:h});c.delete();var g=s.substr(0,l)+f+s.substr(l);e.props.onChange&&e.props.onChange(g),e.setState({validatedValue:g},(function(){return e._enqueueValidation()})),setTimeout((function(){e._field&&e._field.focus(),setTimeout((function(){e._inputElement&&e._inputElement.setSelectionRange(l,l+f.length)}),5)}),5)}},e._onExpressionAutocompletionsScroll=function(){var t;e.state.autocompletions.renderEverything||e.setState({autocompletions:(t=e.state.autocompletions,(0,i.Z)((0,i.Z)({},t),{},{renderEverything:!0}))})},e._insertAutocompletion=function(t){if(!t.isExact){var n=e._inputElement?e._inputElement.selectionStart:0,r=e.state.validatedValue,o="FullExpression"===t.kind?{expression:t.completion,caretLocation:t.completion.length}:function(e,t){var n=e.expression,r=e.caretLocation,o=t.addDot,i=t.addParameterSeparator,a=t.addNamespaceSeparator,s=t.addParenthesis,l=t.completion,c=t.shouldConvertToString,u=t.replacementStartPosition,d=t.replacementEndPosition,p=t.hasVisibleParameters,h=function(e){var t=o?".":i?", ":a?"::":s?"()":"",n=!e||!t||e[0]!==t[0];return l+(n?t:"")};if(r>n.length&&(r=n.length),0===r||!n){var f=h(void 0)+n;return{caretLocation:f.length,expression:c?"ToString(".concat(f,")"):f}}var g=u||0,m=d||n.length,x=h(n[m]),v=c?yd({expression:n,insertedWord:x,wordEndPosition:m,wordStartPosition:g}):function(e){var t=e.expression,n=e.wordStartPosition,r=e.wordEndPosition,o=e.insertedWord,i=t.substring(0,n);return{expression:i+o+t.substring(r),caretLocation:i.length+o.length}}({expression:n,insertedWord:x,wordEndPosition:m,wordStartPosition:g});return s&&p&&(v.caretLocation=v.caretLocation-1),v}({expression:r,caretLocation:n},{completion:t.completion,replacementStartPosition:t.replacementStartPosition,replacementEndPosition:t.replacementEndPosition,addParenthesis:t.addParenthesis,addDot:t.addDot,addParameterSeparator:t.addParameterSeparator,addNamespaceSeparator:t.addNamespaceSeparator,hasVisibleParameters:t.hasVisibleParameters,shouldConvertToString:"Expression"===t.kind?t.shouldConvertToString:null}),i=o.expression,a=o.caretLocation;e._field&&e._field.forceSetValue(i),e.props.onChange&&e.props.onChange(i),e.setState({validatedValue:i},(function(){e._enqueueValidation(),e._field&&e._field.forceSetSelection(a,a)}))}},e._enqueueValidation=rd()((function(){e._doValidation()}),250),e._doValidation=function(){var t=e.props,n=t.project,r=t.globalObjectsContainer,o=t.objectsContainer,i=t.expressionType,a=t.scope,s=t.onGetAdditionalAutocompletions,l=t.onExtractAdditionalErrors;if(!n)return null;var c=e.state.validatedValue,u=new Od.ExpressionParser2,d=u.parseExpression(c).get(),p=function(e,t,n,r,o){var i=new Od.ExpressionValidator(Od.JsPlatform.get(),t,n,r);o.visit(i);var a=i.getAllErrors(),s=(0,Nt.mapVector)(a,(function(e){return{begin:e.getStartPosition(),end:e.getEndPosition()+1,message:e.getMessage(),type:"error"}})),l=Math.max(0,s.length-10),c=s.length>1,u=(l>0?s.slice(0,10):s).map((function(e,t){return(c?"[".concat(t+1,"] "):"")+e.message})).join(" ");return i.delete(),{errorText:u,errorHighlights:s}}(Od.JsPlatform.get(),r,o,i,d),h=p.errorText,f=p.errorHighlights,g=[l?l(c,d):null,h].filter(Boolean).join(" - ");if(c.length>0&&" "===c.charAt(c.length-1))e.setState((function(e){return{errorText:g,errorHighlights:f,autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}}}));else{var m=e._inputElement?e._inputElement.selectionStart:0,x=Od.ExpressionCompletionFinder.getCompletionDescriptionsFor(Od.JsPlatform.get(),r,o,i,d,m-1),v=Cd({gd:Od,project:n,globalObjectsContainer:r,objectsContainer:o,scope:a},x),b=s?s(c).concat(v):v;u.delete(),e.setState((function(e){return{errorText:g,errorHighlights:f,autocompletions:kd(e.autocompletions,b)}}))}},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this._field&&(this._fieldElementWidth=this._field.getFieldWidth(),this._inputElement=this._field?this._field.getInputNode():null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.expressionType,o=t.parameterMetadata,a=t.project,s=t.scope,l=t.globalObjectsContainer,c=t.objectsContainer,d=t.parameterRenderingService,p=o?o.getDescription():this.props.isInline?void 0:"-",h=o?o.getLongDescription():void 0,g={width:this._fieldElementWidth||"auto",marginLeft:-5,zIndex:Kc.default.tooltip+100},m=this.props.isInline?p?Rd.backgroundHighlightingInlineWithFloatingLabel:Rd.backgroundHighlightingInline:Rd.backgroundHighlightingWithFloatingLabel;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(C.ad,{margin:this.props.isInline?"none":"dense",renderTextField:function(){return(0,f.jsxs)("div",{style:Rd.textFieldContainer,children:[(0,f.jsxs)("div",{style:Rd.textFieldAndHighlightContainer,children:[(0,f.jsx)(td,{value:e.state.validatedValue,style:(0,i.Z)((0,i.Z)({},Rd.input),m),highlights:e.state.errorHighlights}),(0,f.jsx)(Dt.Z,{id:e.props.id,margin:e.props.isInline?"none":"dense",value:n,floatingLabelText:p,helperMarkdownText:h,hintText:"string"===r?'""':void 0,inputStyle:Rd.input,onChange:e._handleChange,onBlur:e._handleBlur,ref:function(t){return e._field=t},onFocus:e._handleFocus,errorText:e.state.errorText,onClick:function(){return e._enqueueValidation()},onKeyDown:function(t){var n=function(e,t){var n=t.event,r=t.onUpdateAutocompletions,o=t.onInsertAutocompletion;if("ArrowDown"!==n.key&&"ArrowUp"!==n.key&&"ArrowLeft"!==n.key&&"ArrowRight"!==n.key||r(),!e.autocompletions.length)return e;if("ArrowDown"===n.key)return n.preventDefault(),(0,i.Z)((0,i.Z)({},e),{},{renderEverything:!0,selectedCompletionIndex:(e.selectedCompletionIndex+1)%e.autocompletions.length});if("ArrowUp"===n.key)return n.preventDefault(),(0,i.Z)((0,i.Z)({},e),{},{renderEverything:!0,selectedCompletionIndex:(e.autocompletions.length+e.selectedCompletionIndex-1)%e.autocompletions.length});if((0,Io.W$)(n))return n.preventDefault(),n.stopPropagation(),{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1};if((0,Io.ph)(n)||(0,Io.xj)(n)){var a=e.autocompletions[e.selectedCompletionIndex];if(a){if(a.isExact)return e;o(a),n.stopPropagation()}n.preventDefault()}return e}(e.state.autocompletions,{event:t,onUpdateAutocompletions:e._enqueueValidation,onInsertAutocompletion:e._insertAutocompletion});if(e.setState({autocompletions:n}),(0,Io.W$)(t)||(0,Io.Fc)(t)||(0,Io.ph)(t)){var r=t.currentTarget.value;e.props.onChange&&e.props.onChange(r)}},multiline:!0,fullWidth:!0})]}),e._inputElement&&e.state.popoverOpen&&(0,f.jsx)(kt.Z,{onClickAway:e._handleRequestClose,children:(0,f.jsx)(Jc.Z,{style:g,open:e.state.popoverOpen,anchorEl:e._inputElement,placement:"bottom",disablePortal:!0,children:(0,f.jsx)(T.I,{children:function(t){return(0,f.jsx)(ee.Z,{style:"small"===t?Rd.expressionSelectorPopoverContentSmall:Rd.expressionSelectorPopoverContent,background:"light",children:(0,f.jsx)(zu,{selectedType:"",onChoose:function(t,n){e._handleExpressionChosen(n)},expressionType:r,focusOnMount:!0,scope:s})})}})})}),e._inputElement&&!e.state.popoverOpen&&d&&(0,f.jsx)(Fd,{project:a,anchorEl:e._inputElement,expressionAutocompletions:(t=e.state.autocompletions,0===Zd(t)?t.autocompletions:t.autocompletions.slice(0,7)),remainingCount:Zd(e.state.autocompletions),selectedCompletionIndex:e.state.autocompletions.selectedCompletionIndex,onScroll:e._onExpressionAutocompletionsScroll,onChoose:function(t){e._insertAutocompletion(t),setTimeout((function(){return e.focus()}),50)},parameterRenderingService:d})]});var t},renderButton:function(t){return(0,f.jsxs)(u.Fragment,{children:[!e.props.isInline&&e.props.renderExtraButton&&e.props.renderExtraButton({style:t}),!e.props.isInline&&(0,f.jsx)(E.Z,{id:"open-".concat(r,"-expression-popover-button"),icon:(0,f.jsx)(Qc.Z,{}),label:"string"===r?'"ABC"':"number"===r?"123":"",primary:!0,style:t,onClick:e._openExpressionPopover})]})}}),this.state.parametersDialogOpen&&this.state.selectedExpressionInfo&&(0,f.jsx)(Xu,{project:a,scope:s,globalObjectsContainer:l,objectsContainer:c,expressionMetadata:this.state.selectedExpressionInfo.metadata,onDone:function(t){e.state.selectedExpressionInfo&&(e.insertExpression(e.state.selectedExpressionInfo,t),e.setState({parametersDialogOpen:!1,selectedExpressionInfo:null}))},onRequestClose:function(){e.setState({parametersDialogOpen:!1,selectedExpressionInfo:null})},parameterRenderingService:d})]})}}]),n}(u.Component),_d=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(Bd,(0,i.Z)({expressionType:"number",ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-expression-field"):void 0},e))})),Nd=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({expressionType:"string",ref:n},e),{},{id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-string-field"):void 0}))})),Ud=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(Bd,(0,i.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(t){return hd(e.parameterMetadata).filter((function(e){return 0===e.completion.indexOf(t)}))},ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-string-with-selector"):void 0},e))})),Hd=n.g.gd,Vd=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=u.useState(null),s=(0,a.Z)(i,2),l=s[0],d=s[1],p=u.useState([]),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=o?o.getDescription():void 0,v=o?o.getLongDescription():void 0,b=o?o.getExtraInfo():void 0,j=u.useCallback((function(){var t=e.instructionMetadata,n=e.instruction,r=e.expressionMetadata,o=e.expression,i=e.parameterIndex,a=e.globalObjectsContainer,s=e.objectsContainer,l=ud({instructionMetadata:t,instruction:n,expressionMetadata:r,expression:o,parameterIndex:i});if(l){var c=Hd.getBehaviorsOfObject(a,s,l,!0).toJSArray().filter((function(e){return!b||Hd.getTypeOfBehavior(a,s,e,!1)===b}));m(c),e.value&&0===c.length&&e.onChange("")}}),[e,b]),C=function(t){d(function(t){return t||e.value?0!==g.filter((function(t){return e.value===t})).length?null:"This behavior is not attached to the object":null}(t))},y=u.useCallback((function(){1===g.length&&e.value!==g[0]&&e.onChange(g[0])}),[g,e]);u.useEffect((function(){y()}),[y]),u.useEffect((function(){j()}),[j]);var Z=""!==b?(0,f.jsx)(c.Trans,{id:"The behavior is not attached to this object. Please select another object or add this behavior."}):(0,f.jsx)(c.Trans,{id:"This object has no behaviors: please add this behavior to the object first."});return(0,f.jsx)(Bt.ZP,{margin:e.isInline?"none":"dense",floatingLabelText:x,helperMarkdownText:v,fullWidth:!0,errorText:g.length?l:Z,value:e.value,onChange:e.onChange,onRequestClose:e.onRequestClose,onApply:e.onApply,onBlur:function(e){C(e.currentTarget.value)},dataSource:g.map((function(e){return{text:e,value:e}})),openOnFocus:!e.isInline,disabled:g.length<=1,ref:n})})),Wd=n(60575),zd=n.n(Wd),Gd=0,Yd=1,qd=2,Xd=3,Jd=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("["===n)return Gd;if(" "===n)return qd;if('"'===n)return Yd;if("("===n||"+"===n||"-"===n||"/"===n||"*"===n)return Xd}return Gd},Kd=u.forwardRef((function(e,t){var n=e.onComputeAllVariableNames,r=e.variablesContainer,o=e.value,i=e.onChange,s=e.isInline,l=e.onOpenDialog,d=e.parameterMetadata,p=e.onRequestClose,h=e.onApply,g=e.id,m=u.useRef(null),x=u.useContext(X.ZP),v=u.useState([]),b=(0,a.Z)(v,2),y=b[0],Z=b[1],k=u.useCallback((function(){var e=ld(r).map((function(e){var t=e.name;return e.isValidName?t:null})).filter(Boolean),t=x.values.useUndefinedVariablesInAutocompletion?zd()([].concat((0,j.Z)(e),(0,j.Z)(n()))):e;Z(t.map((function(e){return{text:e,value:e}})))}),[r,n,x]),w=function(e){m.current&&m.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:w,updateAutocompletions:k}})),u.useEffect((function(){r&&k()}),[r,k]);var T=d?d.getDescription():void 0,S=Jd(o),P=S===Yd?(0,f.jsx)(c.Trans,{id:"It seems you entered a name with a quote. Variable names should not be quoted."}):S===qd?(0,f.jsx)(c.Trans,{id:"The variable name contains a space - this is not recommended. Prefer to use underscores or uppercase letters to separate words."}):S===Xd?(0,f.jsx)(c.Trans,{id:"The variable name looks like you're building an expression or a formula. You can only use this for structure or arrays. For example: Score[3]."}):null;return(0,f.jsx)(C.ad,{renderTextField:function(){return(0,f.jsx)(Bt.ZP,{margin:s?"none":"dense",floatingLabelText:T,helperMarkdownText:d?d.getLongDescription():void 0,errorText:P,fullWidth:!0,value:o,onChange:i,onRequestClose:p,onApply:h,dataSource:y,openOnFocus:!s,ref:m,id:g})},renderButton:function(e){return l&&!s?(0,f.jsx)(E.Z,{icon:(0,f.jsx)(Oe.Z,{}),disabled:!r,primary:!0,style:e,onClick:l}):null}})})),Qd=function(e,t,n){var o,i=e.value,a=e.parameterMetadata,s=e.expressionIsValid,l=e.InvalidParameterValue,c=e.MissingParameterValue;return i||a.isOptional()?(0,f.jsxs)("span",{title:n,className:Gl()((o={},(0,r.Z)(o,ac,!0),(0,r.Z)(o,"instruction-warning-parameter",Jd(i)!==Gd),o)),children:[(0,f.jsx)("img",{className:Gl()((0,r.Z)({},ql,!0)),src:t,alt:""}),s?i:(0,f.jsx)(l,{children:i})]}):(0,f.jsx)(c,{})},$d=u.forwardRef((function(e,t){var n=u.useRef(null),r=u.useState(!1),o=(0,a.Z)(r,2),i=o[0],s=o[1],l=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:l}}));var d=e.project,p=e.scope,h=p.layout,g=u.useCallback((function(){return d&&h?ko.findAllLayoutVariables(d.getCurrentPlatform(),d,h):[]}),[d,h]);return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Kd,{variablesContainer:h?h.getVariables():null,onComputeAllVariableNames:g,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:function(){return s(!0)},globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,scope:p,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-variable-field"):void 0}),i&&h&&(0,f.jsx)(Gn,{title:(0,f.jsx)(c.Trans,{id:"{0} variables",values:{0:h.getName()}}),open:!0,variablesContainer:h.getVariables(),onCancel:function(){return s(!1)},onApply:function(){s(!1),n.current&&n.current.updateAutocompletions()},emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first scene variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"These variables hold additional information on a scene."}),helpPagePath:"/all-features/variables/scene-variables",onComputeAllVariableNames:g})]})})),ep=u.forwardRef((function(e,t){var n=u.useRef(null),r=u.useState(!1),o=(0,a.Z)(r,2),i=o[0],s=o[1],l=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:l}}));var d=e.project,p=e.scope,h=function(){return d?ko.findAllGlobalVariables(d.getCurrentPlatform(),d):[]};return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Kd,{variablesContainer:d?d.getVariables():null,onComputeAllVariableNames:h,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:function(){return s(!0)},globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,scope:p}),i&&d&&(0,f.jsx)(Gn,{title:(0,f.jsx)(c.Trans,{id:"Global Variables"}),open:i,variablesContainer:d.getVariables(),onCancel:function(){return s(!1)},onApply:function(){s(!1),n.current&&n.current.updateAutocompletions()},emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first global variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"These variables hold additional information on a project."}),helpPagePath:"/all-features/variables/global-variables",onComputeAllVariableNames:h})]})})),tp=u.forwardRef((function(e,t){var n=u.useRef(null),r=u.useState(!1),o=(0,a.Z)(r,2),i=o[0],s=o[1],l=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:l}}));var d=e.project,p=e.scope,h=e.instructionMetadata,g=e.instruction,m=e.expressionMetadata,x=e.expression,v=e.parameterIndex,b=ud({instructionMetadata:h,instruction:g,expressionMetadata:m,expression:x,parameterIndex:v}),j=p.layout,C=null,y=null;b&&(j&&j.hasObjectNamed(b)?y=(C=j.getObject(b)).getVariables():d&&d.hasObjectNamed(b)&&(y=(C=d.getObject(b)).getVariables()));var Z=function(){return d&&j&&C?ko.findAllObjectVariables(d.getCurrentPlatform(),d,j,C):[]};return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Kd,{variablesContainer:y,onComputeAllVariableNames:Z,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:function(){return s(!0)},globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,scope:p,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-variable-field"):void 0}),i&&y&&(0,f.jsx)(Gn,{title:(0,f.jsx)(c.Trans,{id:"Object Variables"}),open:i,variablesContainer:y,emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first object variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"These variables hold additional information on an object."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:Z,onCancel:function(){return s(!1)},onApply:function(){s(!1),n.current&&n.current.updateAutocompletions()}})]})})),np=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,f.jsx)("path",{d:"M2.70396 4.03697C3.04778 3.69315 3.5141 3.5 4.00033 3.5H13.3337C13.8199 3.5 14.2862 3.69315 14.63 4.03697C14.9738 4.38079 15.167 4.8471 15.167 5.33333V8.66667C15.167 8.94281 14.9431 9.16667 14.667 9.16667C14.3909 9.16667 14.167 8.94281 14.167 8.66667V5.33333C14.167 5.11232 14.0792 4.90036 13.9229 4.74408C13.7666 4.5878 13.5547 4.5 13.3337 4.5H4.00033C3.77931 4.5 3.56735 4.5878 3.41107 4.74408C3.25479 4.90036 3.16699 5.11232 3.16699 5.33333V9.33333C3.16699 9.55435 3.25479 9.76631 3.41107 9.92259C3.56735 10.0789 3.77931 10.1667 4.00033 10.1667H8.66699C8.94313 10.1667 9.16699 10.3905 9.16699 10.6667C9.16699 10.9428 8.94313 11.1667 8.66699 11.1667H4.00033C3.5141 11.1667 3.04778 10.9735 2.70396 10.6297C2.36015 10.2859 2.16699 9.81956 2.16699 9.33333V5.33333C2.16699 4.8471 2.36015 4.38079 2.70396 4.03697Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M6.34333 6.96269C6.54766 7.14844 6.56272 7.46466 6.37697 7.669L6.3703 7.67633C6.18455 7.88066 5.86833 7.89573 5.664 7.70998C5.45967 7.52423 5.4446 7.208 5.63035 7.00367L5.63702 6.99634C5.82277 6.792 6.13899 6.77694 6.34333 6.96269Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M9.00999 6.96269C9.21433 7.14844 9.22939 7.46466 9.04364 7.669L9.03697 7.67633C8.85122 7.88066 8.535 7.89573 8.33067 7.70998C8.12633 7.52423 8.11127 7.208 8.29702 7.00367L8.30369 6.99634C8.48944 6.792 8.80566 6.77694 9.00999 6.96269Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M11.6767 6.96269C11.881 7.14844 11.8961 7.46466 11.7103 7.669L11.7036 7.67633C11.5179 7.88066 11.2017 7.89573 10.9973 7.70998C10.793 7.52423 10.7779 7.208 10.9637 7.00367L10.9704 6.99634C11.1561 6.792 11.4723 6.77694 11.6767 6.96269Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9266 8.8887C11.7927 8.81037 11.6396 8.77063 11.4842 8.7742C11.3288 8.77777 11.1781 8.82444 11.0483 8.90799C10.9185 8.99148 10.8146 9.10851 10.7465 9.24564C10.6785 9.38273 10.6484 9.53559 10.6593 9.68809L10.6617 9.72044L11.5142 13.9045C11.6008 14.6744 12.6114 14.9468 13.0556 14.2738L13.8563 13.0609L15.2702 12.8494C16.0593 12.7315 16.2578 11.6868 15.5859 11.2793L11.9373 8.89497L11.9266 8.8887ZM14.7357 11.9183L11.7298 9.95395L12.4324 13.4026L13.2674 12.1378L14.7357 11.9183Z",fill:"currentColor"})]}))})),rp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.scope.layout,s=o?(0,Nt.mapFor)(0,o.getLayersCount(),(function(e){return o.getLayerAt(e).getName()})):[],l=!!s.find((function(t){return'"'.concat(t,'"')===e.value})),d=u.useState(!!e.value&&!l||e.scope.eventsFunctionsExtension),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=function(){'""'===e.value&&e.onChange(""),g(!h)},x=function(t,n){e.onChange(t.target.value)},v=function(t){e.onChange(t)},b=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,j=s.map((function(e){var t=""===e;return(0,f.jsx)(U.Z,{value:t?"":'"'.concat(e,'"'),label:t?{id:"Base layer"}:e,shouldNotTranslate:!t},t?"Base layer":e)}));return(0,f.jsx)(C.ad,{renderTextField:function(){return h?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-field"):void 0,expressionType:"string"},e),{},{onChange:v})):(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-field"):void 0,value:e.value,onChange:x,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:b,translatableHintText:{id:"Choose a layer"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:j})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:h?(0,f.jsx)(_.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(np,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Select a Layer"}),onClick:m}):(0,f.jsx)(E.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Qc.Z,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Use an Expression"}),onClick:m})}})})),op=n(74661),ip=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"image",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the image file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for ImageResourceField"),null)})),ap=ip,sp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"audio",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the audio file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-audio-field"):void 0}):(console.error("Missing project or resourceManagementProps for AudioResourceField"),null)})),lp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"video",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the video file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for VideoResourceField"),null)})),cp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the json file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for JsonResourceField"),null)})),up=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"bitmapFont",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the bitmap font file (.fnt, .xml) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for BitmapFontResourceField"),null)})),dp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"font",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the font file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for FontResourceField"),null)})),pp=n(37237),hp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(Bd,(0,i.Z)({expressionType:"string",ref:n,renderExtraButton:function(t){var n=t.style;return(0,f.jsx)(pp.Z,{style:n,disableAlpha:!0,color:(0,er.A0)(e.value),onChangeComplete:function(t){e.onChange('"'+t.rgb.r+";"+t.rgb.g+";"+t.rgb.b+'"')}})},onExtractAdditionalErrors:function(e,t){return e.trim().startsWith('"\\"')?"A color is a text in the format R;G;B, like 100;200;180 (numbers going from 0 to 255). You need to surround the text with quotes, but the text itself should not contain a quote inside.":null}},e))})),fp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&Wc(n.current)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=""!==e.value&&"1"!==e.value&&"0"!==e.value;return(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(L.x1,{expand:!0,alignItems:"center",children:[(0,f.jsx)(L.sg,{children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Instant"}),primary:""===e.value||"0"===e.value,onClick:function(){return e.onChange("0")},ref:n})}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"The force will only push the object during the time of one frame. Typically used in an event with no conditions or with conditions that stay valid for a certain amount of time."})})})]}),(0,f.jsxs)(L.x1,{expand:!0,alignItems:"center",children:[(0,f.jsx)(L.sg,{children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Permanent"}),primary:"1"===e.value,onClick:function(){return e.onChange("1")}})}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:'The force will push the object forever, unless you use the action "Stop the object". Typically used in an event with conditions that are only true once, or with a "Trigger Once" condition.'})})})]}),o&&(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"or"})}),(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(Bd,(0,i.Z)({expressionType:"number"},e))})}),(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:'The usage of a number or expression is deprecated. Please now use only "Permanent" or "Instant" for configuring forces.'})})]})]})})),gp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.project?pr(e.project).map((function(e){return e.getName()})):[],s=!!o.find((function(t){return'"'.concat(t,'"')===e.value})),l=u.useState(!!e.value&&!s||e.scope.eventsFunctionsExtension),d=(0,a.Z)(l,2),p=d[0],h=d[1],g=function(){h(!p)},m=function(t,n){e.onChange(t.target.value)},x=function(t){e.onChange(t)},v=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,b=o.map((function(e){return(0,f.jsx)(U.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(C.ad,{renderTextField:function(){return p?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-field"):void 0,expressionType:"string"},e),{},{onChange:x})):(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-field"):void 0,value:e.value,onChange:m,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:v,translatableHintText:{id:"Choose a scene"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:b})},renderButton:function(e){return p?(0,f.jsx)(_.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(np,{}),style:e,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Select a Scene"}),onClick:g}):(0,f.jsx)(E.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Qc.Z,{}),style:e,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Use an Expression"}),onClick:g})}})})),mp=function(e){return(0,Nt.mapFor)(0,e.getEffectsCount(),(function(t){return e.getEffectAt(t).getName()}))},xp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.scope,s=e.instruction,l=e.expression,d=e.parameterIndex,p=function(){var e=o.layout;if(!e)return[];var t=pd(dd({instruction:s,expression:l,parameterIndex:d}))||"";if(!e.hasLayerNamed(t))return[];var n=e.getLayer(t);return mp(n.getEffects()).sort()}(),h=!!p.find((function(t){return'"'.concat(t,'"')===e.value})),g=u.useState(!!e.value&&!h||e.scope.eventsFunctionsExtension),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=function(){v(!x)},j=function(t,n){e.onChange(t.target.value)},y=function(t){e.onChange(t)},Z=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,k=p.map((function(e){return(0,f.jsx)(U.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(C.ad,{renderTextField:function(){return x?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-name-field"):void 0,expressionType:"string"},e),{},{onChange:y})):(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-name-field"):void 0,value:e.value,onChange:j,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:Z,translatableHintText:{id:"Choose an effect"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:k})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:x?(0,f.jsx)(_.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(np,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Select an Effect"}),onClick:b}):(0,f.jsx)(E.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Qc.Z,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Use an Expression"}),onClick:b})}})})),vp=n.g.gd,bp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.project,s=e.scope,l=e.instruction,d=e.expression,p=e.parameterIndex,h=function(){var e=s.layout;if(!e||!o)return[];var t=pd(dd({instruction:l,expression:d,parameterIndex:p?p-1:null}))||"";if(!e.hasLayerNamed(t))return[];var n=e.getLayer(t),r=pd(dd({instruction:l,expression:d,parameterIndex:p}));if(!r||!n.getEffects().hasEffectNamed(r))return[];var i=n.getEffects().getEffect(r).getEffectType();return vp.MetadataProvider.getEffectMetadata(o.getCurrentPlatform(),i).getProperties().keys().toJSArray().sort()}(),g=!!h.find((function(t){return'"'.concat(t,'"')===e.value})),m=u.useState(!!e.value&&!g||e.scope.eventsFunctionsExtension),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=function(){b(!v)},y=function(t,n){e.onChange(t.target.value)},Z=function(t){e.onChange(t)},k=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,w=h.map((function(e){return(0,f.jsx)(U.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(C.ad,{renderTextField:function(){return v?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,expressionType:"string"},e),{},{onChange:Z})):(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,value:e.value,onChange:y,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:k,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:w})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:v?(0,f.jsx)(_.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(np,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Select an Effect Parameter"}),onClick:j}):(0,f.jsx)(E.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Qc.Z,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Use an Expression"}),onClick:j})}})})),jp=n(63348),Cp=n.n(jp);function yp(e,t,n){return t&&t.getObjectGroups().has(n)?t.getObjectGroups().get(n):e.getObjectGroups().has(n)?e.getObjectGroups().get(n):null}var Zp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.project,a=e.scope,s=e.instructionMetadata,l=e.instruction,c=e.expressionMetadata,d=e.expression,p=e.parameterIndex,h=function(){var e=ud({instructionMetadata:s,instruction:l,expressionMetadata:c,expression:d,parameterIndex:p});if(!e||!o)return[];var t=Fc(o,a.layout,e);if(t)return mp(t.getEffects()).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}));var n=yp(o,a.layout,e);if(n){var r=(0,Nt.mapVector)(n.getAllObjectsNames(),(function(e){var t=Fc(o,a.layout,e);return t?mp(t.getEffects()):null})).filter(Boolean);return Cp().apply(void 0,(0,j.Z)(r)).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}return[]};return(0,f.jsx)(Bd,(0,i.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(e){return h().filter((function(t){return 0===t.completion.indexOf(e)}))},ref:n},e))})),kp=n.g.gd,wp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));return(0,f.jsx)(Bd,(0,i.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(t){return function(){var t=e.project,n=e.scope,r=e.instructionMetadata,o=e.instruction,i=e.expressionMetadata,a=e.expression,s=e.parameterIndex,l=ud({instructionMetadata:r,instruction:o,expressionMetadata:i,expression:a,parameterIndex:s}),c=pd(dd({instruction:o,expression:a,parameterIndex:s}));if(!l||!t||!c)return[];var u=null,d=Fc(t,n.layout,l);if(d&&d.getEffects().hasEffectNamed(c)&&(u=d.getEffects().getEffect(c).getEffectType()),!u){var p=yp(t,n.layout,l);if(p){var h=(0,Nt.mapVector)(p.getAllObjectsNames(),(function(e){var r=Fc(t,n.layout,e);return r&&r.getEffects().hasEffectNamed(c)?r.getEffects().getEffect(c).getEffectType():null}));h.every((function(e){return!!e}))&&1===zd()(h).length&&(u=h[0])}}return u?kp.MetadataProvider.getEffectMetadata(t.getCurrentPlatform(),u).getProperties().keys().toJSArray().sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}})):[]}().filter((function(e){return 0===e.completion.indexOf(t)}))},ref:n},e))})),Tp=n.g.gd,Ep=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));return(0,f.jsx)(Bd,(0,i.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(t){return function(){var t=e.project,n=e.scope,r=e.instructionMetadata,o=e.instruction,i=e.expressionMetadata,a=e.expression,s=e.parameterIndex,l=ud({instructionMetadata:r,instruction:o,expressionMetadata:i,expression:a,parameterIndex:s});if(!l||!t)return[];var c=Fc(t,n.layout,l);if(c&&"Sprite"===c.getType()){var u=Tp.asSpriteConfiguration(c.getConfiguration());return(0,fd.ge)(u).map((function(e){return e.length>0?e:null})).filter(Boolean).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}var d=yp(t,n.layout,l);if(d){var p=(0,Nt.mapVector)(d.getAllObjectsNames(),(function(e){var r=Fc(t,n.layout,e);if(!r||"Sprite"!==r.getType())return null;var o=Tp.asSpriteConfiguration(r.getConfiguration());return(0,fd.ge)(o).map((function(e){return e.length>0?e:null})).filter(Boolean)}));return p.some((function(e){return!e}))?[]:Cp().apply(void 0,(0,j.Z)(p)).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}return[]}().filter((function(e){return 0===e.completion.indexOf(t)}))},ref:n},e))})),Sp=n.g.gd,Pp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.project,s=e.scope,l=e.instructionMetadata,d=e.instruction,p=e.expressionMetadata,h=e.expression,g=e.parameterIndex,m=function(){var e=ud({instructionMetadata:l,instruction:d,expressionMetadata:p,expression:h,parameterIndex:g});if(!e||!o)return[];var t=Fc(o,s.layout,e);if(!t)return[];if("Sprite"===t.getType()){var n=Sp.asSpriteConfiguration(t.getConfiguration());return(0,Nt.mapFor)(0,n.getAnimationsCount(),(function(e){var t=n.getAnimation(e).getName();return t.length>0?t:null})).filter(Boolean).sort()}if("Scene3D::Model3DObject"===t.getType()){var r=Sp.asModel3DConfiguration(t.getConfiguration());return(0,Nt.mapFor)(0,r.getAnimationsCount(),(function(e){var t=r.getAnimation(e).getName();return t.length>0?t:null})).filter(Boolean).sort()}return[]}(),x=!!m.find((function(t){return'"'.concat(t,'"')===e.value})),v=u.useState(!!e.value&&!x||e.scope.eventsFunctionsExtension),b=(0,a.Z)(v,2),j=b[0],y=b[1],Z=function(){y(!j)},k=function(t,n){e.onChange(t.target.value)},w=function(t){e.onChange(t)},T=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,S=m.map((function(e){return(0,f.jsx)(U.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(C.ad,{renderTextField:function(){return j?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-animation-name-field"):void 0,expressionType:"string"},e),{},{onChange:w})):(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-animation-name-field"):void 0,value:e.value,onChange:k,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:T,translatableHintText:{id:"Choose an animation"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:S})},renderButton:function(t){return e.scope.eventsFunctionsExtension?null:j?(0,f.jsx)(_.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(np,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Select an Animation"}),onClick:Z}):(0,f.jsx)(E.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Qc.Z,{}),style:t,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Use an Expression"}),onClick:Z})}})})),Ip=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.parameterMetadata,i=o&&o.getExtraInfo()?o.getExtraInfo().split(","):[],a=e.scope.eventsBasedBehavior||e.scope.eventsBasedObject,s=a?a.getEventsFunctions():e.scope.eventsFunctionsExtension,l=(e.scope.eventsFunction&&s?md(s,e.scope.eventsFunction,i):[]).map((function(e){var t=e.getName();return(0,f.jsx)(U.Z,{value:'"'.concat(t,'"'),label:t,shouldNotTranslate:!0},t)})),c=e.parameterMetadata?e.parameterMetadata.getDescription():void 0;return(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-function-parameter-field"):void 0,value:e.value,onChange:function(t,n){e.onChange(t.target.value)},margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:c,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:l})})),Dp=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:r}}));var o=e.project?fr(e.project).map((function(e){return e.getName()})):[],s=!!o.find((function(t){return'"'.concat(t,'"')===e.value})),l=u.useState(!!e.value&&!s||e.scope.eventsFunctionsExtension),d=(0,a.Z)(l,2),p=d[0],h=d[1],g=function(){h(!p)},m=function(t,n){e.onChange(t.target.value)},x=function(t){e.onChange(t)},v=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,b=o.map((function(e){return(0,f.jsx)(U.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(C.ad,{renderTextField:function(){return p?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-external-layout-field"):void 0,expressionType:"string"},e),{},{onChange:x})):(0,f.jsx)(B.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-external-layout-field"):void 0,value:e.value,onChange:m,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:v,translatableHintText:{id:"Choose an external layout"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:b})},renderButton:function(e){return p?(0,f.jsx)(_.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(np,{}),style:e,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Select an External Layout"}),onClick:g}):(0,f.jsx)(E.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Qc.Z,{}),style:e,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Use an Expression"}),onClick:g})}})})),Ap=function(e){var t=e.onClose,n=e.open,r=e.project,o=e.leaderboardId,i=u.useState(!1),s=(0,a.Z)(i,2),l=s[0],d=s[1];return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Leaderboards"}),id:"leaderboard-admin-dialog",actions:[(0,f.jsx)(_.Z,{id:"close-button",label:(0,f.jsx)(c.Trans,{id:"Close"}),disabled:l,onClick:t},"Close")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration"},"help")],open:n,cannotBeDismissed:l,onRequestClose:t,flexBody:!0,fullHeight:!0,children:(0,f.jsx)(us,{onLoading:d,project:r,leaderboardIdToSelectAtOpening:o})})},Lp=function(e,t){if(!e)return t;var n=e.find((function(e){return'"'.concat(e.id,'"')===t}));return n?n.name:t},Mp=function(){var e=u.useContext(Sa),t=e.leaderboards,n=e.listLeaderboards,r=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))),[n]);return u.useEffect((function(){t||r()}),[r,t]),t},Fp=u.forwardRef((function(e,t){var n=(0,wa.k)(),r=Mp(),o=u.useState(!1),s=(0,a.Z)(o,2),l=s[0],d=s[1],p=u.useRef(null),h=function(e){p.current&&p.current.focus(e)};u.useImperativeHandle(t,(function(){return{focus:h}}));var g=r&&!!r.find((function(t){return'"'.concat(t.id,'"')===e.value})),m=u.useState(!r||!!e.value&&!g),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=function(t,n){e.onChange(t.target.value)},y=function(t){e.onChange(t)},Z=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,k=r&&r.length>0,T=u.useMemo((function(){return r&&k?r.map((function(e){return(0,f.jsx)(U.Z,{value:'"'.concat(e.id,'"'),label:"".concat(e.name," ").concat(e.id?"(".concat((0,Ta.GA)(e.id),")"):""),shouldNotTranslate:!0},e.id)})):[(0,f.jsx)(U.Z,{disabled:!0,value:"empty",label:""},"empty")]}),[r,k]);return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(C.ad,{renderTextField:function(){return v?(0,f.jsx)(Bd,(0,i.Z)((0,i.Z)({ref:p,expressionType:"string"},e),{},{onChange:y,onExtractAdditionalErrors:function(e,t){if(!r)return n?"Your game may not be registered, create one in the leaderboard manager.":"Unable to fetch leaderboards as you are offline."}})):(0,f.jsx)(B.Z,{ref:p,value:e.value,onChange:j,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:Z,translatableHintText:k?e.parameterMetadata&&e.parameterMetadata.isOptional()?{id:"Choose a leaderboard (optional)"}:{id:"Choose a leaderboard"}:{id:"No leaderboards"},helperMarkdownText:k?e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null:o._({id:"There are currently no leaderboards created for this game. Open the leaderboards manager to create one."}),children:T})},renderButton:function(e){return(0,f.jsx)(w.Z,{id:"open-leaderboard-admin-button",icon:(0,f.jsx)(Oe.Z,{}),style:e,primary:!0,onClick:function(){return d(!0)},buildMenuTemplate:function(e){return[{label:v?e._({id:"Select the leaderboard from a list"}):e._({id:"Enter the leaderboard id as a text or an expression"}),disabled:!r,click:function(){return b(!v)}}]}})}}),l&&!!e.project&&(0,f.jsx)(Ap,{onClose:function(){return d(!1)},open:l,project:e.project,leaderboardId:g?e.value.replace(/"/g,""):void 0})]})}})})),Op=function(e){var t=e.value,n=e.parameterMetadata,r=e.InvalidParameterValue,o=Mp();return t?(0,f.jsx)("span",{children:Lp(o,t)}):n.isOptional()?(0,f.jsx)("span",{children:(0,f.jsx)(c.Trans,{id:"No leaderboard chosen"})}):(0,f.jsx)(r,{isEmpty:!0,children:(0,f.jsx)(c.Trans,{id:"Choose a leaderboard"})})},Rp=n.g.gd,Bp=u.forwardRef((function(e,t){var n=e.project,r=e.scope,o=e.instructionMetadata,a=e.instruction,s=e.expressionMetadata,l=e.expression,c=e.parameterIndex,d=r.layout,p=ud({instructionMetadata:o,instruction:a,expressionMetadata:s,expression:l,parameterIndex:c})||"",h=u.useMemo((function(){if(!c)return[];var e=o?o.getParameter(c):s?s.getParameter(c):null,t=e?e.getExtraInfo():"";return(n&&d?Rp.EventsIdentifiersFinder.findAllIdentifierExpressions(n.getCurrentPlatform(),n,d,t,p).toNewVectorString().toJSArray():[]).map((function(e){return{kind:"FullExpression",completion:e}}))}),[n,d,s,o,c,p]),g=u.useRef(null),m=function(e){g.current&&g.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:m}})),u.useEffect((function(){m()}),[]),(0,f.jsx)(Bd,(0,i.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(e){return h.filter((function(t){return 0===t.completion.indexOf(e)}))},id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-identifier"):void 0,ref:g},e))})),_p=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"tilemap",fallbackResourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the JSON/LDtk file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for TilemapResourceField"),null)})),Np=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"tileset",fallbackResourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the tileset to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for TilesetResourceField"),null)})),Up=u.forwardRef((function(e,t){var n=u.useRef(null),r=function(e){n.current&&n.current.focus(e)};return u.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(op.Z,{margin:e.isInline?"none":"dense",project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:ti.Z,resourceKind:"model3D",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Choose the 3D model file (.glb) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for Model3DResourceField"),null)})),Hp=n.g.gd,Vp={default:dc,mouse:bc,object:Uc,relationalOperator:gc,operator:vc,yesorno:Yc,trueorfalse:Xc,number:_d,expression:_d,string:Nd,stringWithSelector:Ud,behavior:Vd,scenevar:$d,globalvar:ep,objectvar:tp,layer:rp,key:yc,file:dc,musicfile:sp,soundfile:sp,imageResource:ap,videoResource:lp,jsonResource:cp,bitmapFontResource:up,fontResource:dp,model3DResource:Up,color:hp,police:dc,forceMultiplier:fp,sceneName:gp,layerEffectName:xp,layerEffectParameterName:bp,objectEffectName:Zp,objectEffectParameterName:wp,objectPointName:Ep,objectAnimationName:Pp,functionParameterName:Ip,externalLayoutName:Dp,leaderboardId:Fp,identifier:Bp,tilemapResource:_p,tilesetResource:Np},Wp={default:function(e){var t=e.value,n=e.expressionIsValid,r=e.parameterMetadata,o=e.InvalidParameterValue,i=e.MissingParameterValue;return t||r.isOptional()?n?t:(0,f.jsx)(o,{children:t}):(0,f.jsx)(i,{})},forceMultiplier:function(e){var t=e.value;return"1"===t?(0,f.jsx)(c.Trans,{id:"a permanent"}):"0"===t||""===t?(0,f.jsx)(c.Trans,{id:"an instant"}):"a (multiplier: "+t+")"},globalvar:function(e){return Qd(e,"res/types/globalvar.png","global variable")},scenevar:function(e){return Qd(e,"res/types/scenevar.png","scene variable")},objectvar:function(e){return Qd(e,"res/types/objectvar.png","object variable")},key:function(e){var t=e.value,n=e.InvalidParameterValue;return t?Cc(t)?t:(0,f.jsx)(n,{children:t}):(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(c.Trans,{id:"Choose a key"})})},mouse:function(e){var t=e.value,n=e.InvalidParameterValue;return t||(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(c.Trans,{id:"Choose a mouse button"})})},object:function(e){var t=e.value,n=e.parameterMetadata,o=e.renderObjectThumbnail,i=e.expressionIsValid,a=e.InvalidParameterValue,s=e.MissingParameterValue;return t||n.isOptional()?(0,f.jsxs)("span",{title:t,className:Gl()((0,r.Z)({},ac,!0)),children:[o(t),i?t:(0,f.jsx)(a,{children:t})]}):(0,f.jsx)(s,{})},yesorno:function(e){var t=e.value,n=e.parameterMetadata;return"yes"===Hc(t,n)?(0,f.jsx)(c.Trans,{id:"yes"}):(0,f.jsx)(c.Trans,{id:"no"})},trueorfalse:function(e){var t=e.value,n=e.parameterMetadata;return"True"===Hc(t,n)?(0,f.jsx)(c.Trans,{id:"true"}):(0,f.jsx)(c.Trans,{id:"false"})},operator:function(e){var t=e.value,n=e.InvalidParameterValue,r=e.useAssignmentOperators;if(!t)return(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(c.Trans,{id:"Choose an operator"})});if(r){if("="===t)return"=";if("+"===t)return"+=";if("-"===t)return"-=";if("/"===t)return"/=";if("*"===t)return"*="}else{if("="===t)return(0,f.jsx)(c.Trans,{id:"set to"});if("+"===t)return(0,f.jsx)(c.Trans,{id:"add"});if("-"===t)return(0,f.jsx)(c.Trans,{id:"subtract"});if("/"===t)return(0,f.jsx)(c.Trans,{id:"divide by"});if("*"===t)return(0,f.jsx)(c.Trans,{id:"multiply by"})}return(0,f.jsx)(n,{children:t})},relationalOperator:function(e){var t=e.value,n=e.InvalidParameterValue;return t?"="!==t&&"<"!==t&&">"!==t&&"<="!==t&&">="!==t&&"!="!==t?(0,f.jsx)(n,{children:t}):"<="===t?"\u2264":">="===t?"\u2265":"!="===t?"\u2260":t:(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(c.Trans,{id:"Choose an operator"})})},leaderboardId:function(e){return(0,f.jsx)(Op,(0,i.Z)({},e))}},zp={mouse:{id:"Mouse button"},object:{id:"Object"},relationalOperator:{id:"Relational operator"},operator:{id:"Operator"},yesorno:{id:"Yes or No"},trueorfalse:{id:"True or False"},expression:{id:"Number"},number:{id:"Number"},string:{id:"String"},stringWithSelector:{id:"String"},behavior:{id:"Behavior"},scenevar:{id:"Scene variable"},globalvar:{id:"Global variable"},objectvar:{id:"Object variable"},layer:{id:"Layer"},key:{id:"Keyboard key"},musicfile:{id:"Audio resource"},soundfile:{id:"Audio resource"},imageResource:{id:"Image resource"},videoResource:{id:"Video resource"},bitmapFontResource:{id:"Bitmap font resource"},fontResource:{id:"Font resource"},jsonResource:{id:"JSON resource"},tilemapResource:{id:"Tile map resource"},model3DResource:{id:"3D model resource"},color:{id:"Color"},forceMultiplier:{id:"Instant or permanent force"},sceneName:{id:"Scene name"},layerEffectName:{id:"Layer effect name"},layerEffectParameterName:{id:"Layer effect parameter name"},objectEffectName:{id:"Object effect name"},objectEffectParameterName:{id:"Object effect parameter name"},objectPointName:{id:"Object point name"},objectAnimationName:{id:"Object animation name"},functionParameterName:{id:"Parameter name"},externalLayoutName:{id:"Name of the external layout"},identifier:{id:"Identifier"}},Gp={components:Vp,getParameterComponent:function(e){var t=Hp.ParameterMetadata.isObject(e)?"object":e;return Vp.hasOwnProperty(t)?Vp[t]:Vp.default},renderInlineParameter:function(e){var t=e.parameterMetadata.getType(),n=Hp.ParameterMetadata.isObject(t)?"object":t;return(Wp[n]||Wp.default)(e)},getUserFriendlyTypeName:function(e){var t=Hp.ParameterMetadata.isObject(e)?"object":e;return zp[t]||null}},Yp=function(e){var t=e.children;return e.isEmpty?(0,f.jsxs)("span",{className:nc,children:["< ",t," >"]}):(0,f.jsx)("span",{className:nc,children:t})},qp=function(){return(0,f.jsx)("span",{className:"instruction-missing-parameter",children:"\xa0"})},Xp=u.memo(u.forwardRef((function(e,t){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({viewBox:"10 10 54 54"},e),{},{ref:t,children:[(0,f.jsx)("path",{d:"M30.5461 30.5034L28.3521 34.288C30.0252 35.8147 31.6363 36.9026 34.934 37.9129L36.1222 33.5573C33.9641 32.8388 31.7827 31.6259 30.5461 30.5034Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M24.4035 30.8975C24.4035 30.8975 25.544 32.6156 26.0043 32.2051L27.8585 28.4191C25.9976 26.5822 24.4035 23.6184 24.4035 19.5989C24.4035 32.6265 24.4035 26.5737 24.4035 30.8975Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M44.9316 26.7094L55.9031 36.8682L44.9316 47.0269L44.9316 39.357C42.7099 39.3063 40.7076 39.1539 38.9796 38.8745L39.8706 34.288C41.1872 34.4658 43.2036 34.8111 44.9316 34.8365L44.9316 26.7094Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M20.4015 51.1301L24.4035 51.1301C24.758 37.0402 24.4035 22.938 24.4035 8.84436L20.4015 8.84435L20.4015 19.6497C20.4015 29.4361 20.669 40.0776 20.4015 51.1301Z",fill:"#2B3990"}),(0,f.jsx)("path",{d:"M22.4813 59.5759C26.4597 59.5759 29.6848 56.3507 29.6848 52.3723C29.6848 48.3939 26.4597 45.1688 22.4813 45.1688C18.5029 45.1688 15.2777 48.3939 15.2777 52.3723C15.2777 56.3507 18.5029 59.5759 22.4813 59.5759Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M22.4813 55.9741C24.4705 55.9741 26.083 54.3615 26.083 52.3723C26.083 50.3831 24.4705 48.7706 22.4813 48.7706C20.4921 48.7706 18.8795 50.3831 18.8795 52.3723C18.8795 54.3615 20.4921 55.9741 22.4813 55.9741Z",fill:"white"})]}))}))),Jp=n(51458),Kp=n.g.gd,Qp={container:{whiteSpace:"normal",wordWrap:"break-word",cursor:"pointer",marginBottom:1}},$p="GD_DRAGGED_INSTRUCTION",eh=(0,Lt.x)($p),th=function(e){var t=u.useContext(xr.H).hasExtensionNamed,n=(0,Jp._u)(e.instructionType),r=n.name,o=n.behaviorName,i=n.extensionName,a=t(i)?(0,f.jsx)(c.Trans,{id:"Try installing it from the extension store."}):"",s=(0,f.jsx)("span",{className:"function-name",children:r}),l=(0,f.jsx)("span",{className:"behavior-name",children:o}),d=(0,f.jsx)("span",{className:"extension-name",children:i});return o?e.isCondition?(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(c.Trans,{id:"{functionNode} condition on behavior {behaviorNode} from {extensionNode} extension is missing.",values:{functionNode:s,behaviorNode:l,extensionNode:d}})," ",a]}):(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(c.Trans,{id:"{functionNode} action on behavior {behaviorNode} from {extensionNode} extension is missing.",values:{functionNode:s,behaviorNode:l,extensionNode:d}})," ",a]}):e.isCondition?(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(c.Trans,{id:"{functionNode} condition from {extensionNode} extension is missing.",values:{functionNode:s,extensionNode:d}})," ",a]}):(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(c.Trans,{id:"{functionNode} action from {extensionNode} extension is missing.",values:{functionNode:s,extensionNode:d}})," ",a]})},nh=function(e){var t=e.instruction,n=e.isCondition,o=e.onClick,a=e.onMoveToInstruction,s=e.onContextMenu,l=e.globalObjectsContainer,d=e.objectsContainer,p=e.id,h=e.resourcesManager,g=u.useMemo((function(){return Kp.InstructionSentenceFormatter.get()}),[]),x=u.useContext(X.ZP),v=u.useContext(m.Z).palette.type,b=x.values.eventsSheetUseAssignmentOperators,j=function(t,o){var i=e.instruction,a=e.disabled,s=e.renderObjectThumbnail,c=g.getAsFormattedText(i,t),u=t.getParametersCount();return(0,f.jsx)("span",{className:Gl()((0,r.Z)({},rc,a)),"data-instruction":i.getType(),"data-instruction-inverted":i.isInverted()?"true":void 0,children:(0,Nt.mapFor)(0,c.size(),(function(a){var p,g=c.getTextFormatting(a),m=c.getString(a),x=g.getUserData();if(!(x>=0&&x<u))return"Unknown or unsupported instruction"===m?(0,f.jsx)(th,{instructionType:i.getType(),isCondition:n},"unknown-behavior-instruction-".concat(a)):(0,f.jsx)("span",{children:0===a?cc()(m):m},a);var v=t.getParameter(x),j="expression"===v.getType()?"number":v.getType(),C=!0;if(!function(e){var t=e.value;return"layer"===e.parameterType&&""===t}({value:m,parameterType:j})){if(Kp.ParameterMetadata.isExpression("number",j)||Kp.ParameterMetadata.isExpression("string",j)||Kp.ParameterMetadata.isExpression("variable",j)){var y=i.getParameter(x).getRootNode(),Z=new Kp.ExpressionValidator(Kp.JsPlatform.get(),l,d,j);y.visit(Z),C=0===Z.getAllErrors().size(),Z.delete()}else if(Kp.ParameterMetadata.isObject(j)){var k=i.getParameter(x).getPlainString();C=(l.hasObjectNamed(k)||d.hasObjectNamed(k)||l.getObjectGroups().has(k)||d.getObjectGroups().has(k))&&(!v.getExtraInfo()||Kp.getTypeOfObject(l,d,k,!0)===v.getExtraInfo())}else if(Kp.ParameterMetadata.isExpression("resource",j)){var w=i.getParameter(x).getPlainString();C=h.hasResource(w)}if(C&&"functionParameterName"===j){var T=e.scope.eventsFunction;if(T){var E=e.scope.eventsBasedBehavior||e.scope.eventsBasedObject,S=E?E.getEventsFunctions():e.scope.eventsFunctionsExtension;if(S){var P=v.getExtraInfo().split(","),I=md(S,T,P),D=i.getParameter(x).getPlainString(),A=D.substring(1,D.length-1);C=I.some((function(e){return e.getName()===A}))}}else C=!1}}var L=function(e){var t=e.value,n=e.parameterType,r=e.i18n;return""!==t&&'""'!==t||"layer"!==n?t:r._({id:"Base layer"})}({value:m,parameterType:j,i18n:o});return(0,f.jsx)("span",{className:Gl()((p={},(0,r.Z)(p,Yl,!0),(0,r.Z)(p,tc,!0),(0,r.Z)(p,j,!0),p)),onClick:function(t){e.onParameterClick(t,x),"touch"===e.screenType&&t.stopPropagation()},onKeyPress:function(t){(0,Io._x)(t)&&(e.onParameterClick(t,x),t.stopPropagation(),t.preventDefault())},tabIndex:0,children:Gp.renderInlineParameter({value:L,expressionIsValid:C,parameterMetadata:v,renderObjectThumbnail:s,InvalidParameterValue:Yp,MissingParameterValue:qp,useAssignmentOperators:b})},a)}))})},C="touch"!==(0,eo.BF)(),y=(0,Le.i)(u.useCallback((function(e){s(e.clientX,e.clientY)}),[s]),"events-tree-event-component");return(0,f.jsx)(c.I18n,{children:function(l){var d=l.i18n;return(0,f.jsx)(eh,{beginDrag:function(){return o(),{isCondition:n}},canDrag:function(){return C},canDrop:function(e){return e.isCondition===n},drop:function(){a()},children:function(o){var a,l=o.connectDragSource,h=o.connectDropTarget,g=o.isOver,m=o.canDrop,x=n?Kp.MetadataProvider.getConditionMetadata(Kp.JsPlatform.get(),t.getType()):Kp.MetadataProvider.getActionMetadata(Kp.JsPlatform.get(),t.getType()),b=x.getSmallIconFilename(),C=b.startsWith("data:image/svg+xml")||b.includes("_black"),Z=l((0,f.jsxs)("div",(0,i.Z)((0,i.Z)({style:Qp.container,className:Gl()((a={},(0,r.Z)(a,Yl,!0),(0,r.Z)(a,"selected",e.selected),a)),onClick:function(t){t.stopPropagation(),"touch"===e.screenType&&e.selected?e.onDoubleClick():e.onClick()},onDoubleClick:function(t){t.stopPropagation(),e.onDoubleClick()},onContextMenu:function(e){e.stopPropagation(),s(e.clientX,e.clientY)}},y),{},{onKeyPress:function(t){(0,Io.ph)(t)?(e.onDoubleClick(),t.stopPropagation(),t.preventDefault()):(0,Io._x)(t)&&(e.onClick(),t.stopPropagation(),t.preventDefault())},tabIndex:0,id:p,children:[t.isInverted()&&(0,f.jsx)("img",{className:Gl()((0,r.Z)({},ql,!0)),src:"res/contraire.png",alt:"Condition is negated"}),x.isAsync()&&(!x.isOptionallyAsync()||t.isAwaited())&&(0,f.jsx)(De.ZP,{title:(0,f.jsx)(c.Trans,{id:"Next actions (and sub-events) will wait for this action to be finished before running."}),placement:"top",children:(0,f.jsx)(Xp,{className:Gl()((0,r.Z)({},ql,!0))})}),(0,f.jsx)("img",{className:Gl()((0,r.Z)({},ql,!0)),src:b,alt:"",style:{filter:"dark"===v&&C?"grayscale(1) invert(1)":void 0}}),j(x,d)]}))),k=Z?h(Z):null;return(0,f.jsxs)(u.Fragment,{children:[g&&(0,f.jsx)(uc,{canDrop:m}),k,x.canHaveSubInstructions()&&(0,f.jsx)(fh,{style:{},className:"sub-instructions-container",instrsList:t.getSubInstructions(),areConditions:e.isCondition,selection:e.selection,onAddNewInstruction:e.onAddNewSubInstruction,onPasteInstructions:e.onPasteSubInstructions,onMoveToInstruction:e.onMoveToSubInstruction,onMoveToInstructionsList:e.onMoveToSubInstructionsList,onInstructionClick:e.onSubInstructionClick,onInstructionDoubleClick:e.onSubInstructionDoubleClick,onInstructionContextMenu:e.onSubInstructionContextMenu,onAddInstructionContextMenu:e.onAddSubInstructionContextMenu,onParameterClick:e.onSubParameterClick,addButtonLabel:(0,f.jsx)(c.Trans,{id:"Add a sub-condition"}),addButtonId:"add-sub-condition-button",disabled:e.disabled,renderObjectThumbnail:e.renderObjectThumbnail,screenType:e.screenType,windowWidth:e.windowWidth,scope:e.scope,resourcesManager:e.resourcesManager,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,idPrefix:e.id})]})}})}})},rh=n.g.gd,oh="EventsAndInstructions",ih=function(){if(!Yt.has(oh))return!1;var e=Yt.get(oh),t=Gt.extractNumberProperty(e,"eventsCount");return null!==t&&t>0},ah=function(){if(!Yt.has(oh))return!1;var e=Yt.get(oh),t=Gt.extractNumberProperty(e,"conditionsCount");return null!==t&&t>0},sh=function(){if(!Yt.has(oh))return!1;var e=Yt.get(oh),t=Gt.extractNumberProperty(e,"actionsCount");return null!==t&&t>0},lh=n(17777),ch=function(e){var t=(0,lh.DropTarget)(e,{canDrop:function(e,t){var n=t.getItem();return n&&e.canDrop(n)},hover:function(e,t){e.hover&&e.hover(t)},drop:function(e,t){t.didDrop()||e.drop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),isOverLazy:t.isOver({shallow:!1}),canDrop:t.canDrop()}}))((function(e){return(0,e.children)({connectDropTarget:e.connectDropTarget,isOver:e.isOver,isOverLazy:e.isOverLazy,canDrop:e.canDrop})}));return function(e){return(0,f.jsx)(t,(0,i.Z)({},e))}},uh={addButton:{cursor:"pointer"},pasteButtonContainer:{marginLeft:"4px"}},dh=ch($p),ph={id:"Right-click for quick menu"},hh={id:"Long press for quick menu"};function fh(e){var t=e.addButtonId,n=e.addButtonLabel,r=e.areConditions,o=e.className,s=e.instrsList,l=e.onAddNewInstruction,d=e.onPasteInstructions,p=e.onMoveToInstruction,h=e.onMoveToInstructionsList,g=e.onInstructionClick,m=e.onInstructionContextMenu,x=e.onInstructionDoubleClick,v=e.onAddInstructionContextMenu,b=e.onParameterClick,j=e.selection,C=e.style,y=e.disabled,Z=e.renderObjectThumbnail,k=e.screenType,w=e.windowWidth,T=e.scope,E=e.resourcesManager,S=e.globalObjectsContainer,P=e.objectsContainer,I=e.idPrefix,D=u.useState(!1),A=(0,a.Z)(D,2),L=A[0],M=A[1],F=u.useCallback((function(){l&&l({instrsList:s,isCondition:r})}),[l,s,r]),O=u.useCallback((function(){d({instrsList:s,isCondition:r})}),[d,s,r]),R=(0,Nt.mapFor)(0,s.size(),(function(e){var t=s.get(e),n={isCondition:r,instrsList:s,instruction:t,indexInList:e};return(0,f.jsx)(nh,{instruction:t,isCondition:r,selected:Bl(j,t),onMoveToInstruction:function(){return p(n)},onClick:function(){return g(n)},onDoubleClick:function(){return x(n)},onContextMenu:function(e,t){return m(e,t,n)},onParameterClick:function(e,t){return b({isCondition:n.isCondition,instrsList:n.instrsList,instruction:n.instruction,indexInList:n.indexInList,parameterIndex:t,domEvent:e})},selection:j,onAddNewSubInstruction:l,onPasteSubInstructions:d,onMoveToSubInstruction:p,onMoveToSubInstructionsList:h,onSubInstructionClick:g,onSubInstructionDoubleClick:x,onSubInstructionContextMenu:m,onAddSubInstructionContextMenu:v,onSubParameterClick:b,disabled:y,renderObjectThumbnail:Z,screenType:k,windowWidth:w,scope:T,resourcesManager:E,globalObjectsContainer:S,objectsContainer:P,id:"".concat(I,"-").concat(r?"condition":"action","-").concat(e)},t.ptr)})),B={instrsList:s,isCondition:r},_=u.useRef(null),N=r?(0,f.jsx)(c.Trans,{id:"Add condition"}):(0,f.jsx)(c.Trans,{id:"Add action"}),U="touch"===k?hh:ph,H=(0,Le.i)(u.useCallback((function(e){_.current&&v(_.current,B)}),[v,B,_]));return(0,f.jsx)(c.I18n,{children:function(e){var a=e.i18n;return(0,f.jsx)(dh,{canDrop:function(e){return e.isCondition===r},drop:function(){h({isCondition:r,instrsList:s})},children:function(e){var s=e.connectDropTarget,l=e.isOver,u=e.canDrop;return s((0,f.jsxs)("div",{className:o,style:C,id:"".concat(I,"-").concat(r?"conditions":"actions"),children:[R,l&&(0,f.jsx)(uc,{canDrop:u}),(0,f.jsxs)("span",{onPointerEnter:function(){M(r&&ah()||!r&&sh())},onPointerLeave:function(){M(!1)},children:[(0,f.jsx)("button",(0,i.Z)((0,i.Z)({style:uh.addButton,className:"add-link",onClick:F,onContextMenu:function(e){e.stopPropagation(),v(e.currentTarget,B)}},H),{},{ref:_,id:t||"".concat(r?"add-condition-button":"add-action-button").concat(0===R.length?"-empty":""),title:a._(U),children:n||N})),L&&(0,f.jsx)("span",{style:uh.pasteButtonContainer,children:(0,f.jsx)("button",{style:uh.addButton,className:"add-link",onClick:O,children:r?(0,f.jsx)(c.Trans,{id:"(or paste conditions)"}):(0,f.jsx)(c.Trans,{id:"(or paste actions)"})})})]})]}))}})}})}var gh={oneColumnContainer:{display:"flex",flexDirection:"column"},twoColumnsContainer:{display:"flex"}},mh=function(e){return"small"===e.windowWidth?(0,f.jsxs)("div",{style:gh.oneColumnContainer,className:e.className,children:[e.renderConditionsList({style:{},className:"".concat($l," ").concat(ec)}),e.renderActionsList({style:{},className:"".concat(Ql," ").concat(ec)})]}):(0,f.jsxs)("div",{style:gh.twoColumnsContainer,className:e.className,children:[e.renderConditionsList({style:{width:"calc(35vw - ".concat(e.leftIndentWidth,"px)")},className:$l}),e.renderActionsList({className:Ql})]})},xh=n.g.gd,vh={flex:1},bh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t=this,n=xh.asStandardEvent(this.props.event);return(0,f.jsx)(mh,{leftIndentWidth:this.props.leftIndentWidth,windowWidth:this.props.windowWidth,className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),(0,r.Z)(e,Kl,!0),e)),renderConditionsList:function(e){var r=e.style,o=e.className;return(0,f.jsx)(fh,{instrsList:n.getConditions(),style:r,className:o,selection:t.props.selection,areConditions:!0,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowWidth:t.props.windowWidth,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})},renderActionsList:function(e){var r=e.className;return(0,f.jsx)(fh,{instrsList:n.getActions(),style:(0,i.Z)({},vh),className:r,selection:t.props.selection,areConditions:!1,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowWidth:t.props.windowWidth,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})}})}}]),n}(u.Component),jh=n.g.gd,Ch={container:{height:"2.5em",display:"flex",alignItems:"center",padding:5,overflow:"hidden"},title:{fontSize:"1.3em",width:"100%"}},yh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={editing:!1,editingPreviousValue:null},e._textField=null,e.edit=function(){if(!e.state.editing){var t=jh.asGroupEvent(e.props.event);e.state.editingPreviousValue||e.setState({editingPreviousValue:t.getName()}),e.setState({editing:!0},(function(){e._textField&&e._textField.focus()}))}},e.endEditing=function(){e.setState({editing:!1}),jh.asGroupEvent(e.props.event).getName()!==e.state.editingPreviousValue&&(e.props.onEndEditingEvent(),e.setState({editingPreviousValue:null}))},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t,n=this,o=jh.asGroupEvent(this.props.event),a=o.getBackgroundColorR(),s=o.getBackgroundColorG(),l=o.getBackgroundColorB(),u=(a+s+l)/3>200?"black":"white";return(0,f.jsx)("div",{className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),e)),style:(0,i.Z)((0,i.Z)({},Ch.container),{},{backgroundColor:"rgb(".concat(a,", ").concat(s,", ").concat(l,")")}),onClick:this.edit,onKeyUp:function(e){(0,Io._x)(e)&&n.edit()},tabIndex:0,id:"".concat(this.props.idPrefix,"-group-").concat(o.isFolded()?"folded":"unfolded"),children:this.state.editing?(0,f.jsx)(po.ZP,{margin:"none",ref:function(e){return n._textField=e},value:o.getName(),translatableHintText:{id:"<Enter group name>"},onBlur:this.endEditing,onChange:function(e,t){o.setName(t),n.forceUpdate()},style:Ch.title,inputStyle:{color:u,WebkitTextFillColor:u},fullWidth:!0,onKeyUp:function(e){(0,Io.W$)(e)&&n.endEditing()},onKeyDown:function(e){((0,Io.ph)(e)||(0,Io.Fc)(e))&&n.endEditing()},underlineShow:!1}):(0,f.jsx)("span",(0,i.Z)((0,i.Z)({className:Gl()((t={},(0,r.Z)(t,Yl,!0),(0,r.Z)(t,rc,this.props.disabled),t)),style:(0,i.Z)((0,i.Z)({},Ch.title),{},{color:u})},(0,Ae.Y)({editableText:"true"})),{},{children:o.getName()?o.getName():(0,f.jsx)(c.Trans,{id:"<Enter group name>"})}))})}}]),n}(u.Component),Zh=n.g.gd,kh={width:"100%"},wh={container:{display:"flex",flexWrap:"wrap",padding:5,overflow:"hidden",minHeight:"2.1em"},commentTextField:(0,i.Z)((0,i.Z)({},kh),{},{fontSize:"inherit"}),commentSpan:(0,i.Z)((0,i.Z)({},kh),{},{alignItems:"center",height:"100%",whiteSpace:"pre-wrap"})},Th=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={editing:!1,editingPreviousValue:null},e.edit=function(){if(!e.state.editing){var t=Zh.asCommentEvent(e.props.event);e.setState({editing:!0,editingPreviousValue:t.getComment()},(function(){e._textField&&e._textField.focus({caretPosition:"end"})}))}},e.onChange=function(t,n){Zh.asCommentEvent(e.props.event).setComment(n),e.props.onUpdate(),e.forceUpdate()},e.endEditing=function(){if(e._textField){var t=Zh.asCommentEvent(e.props.event);e.state.editingPreviousValue!==t.getComment()&&e.props.onEndEditingEvent(),e.setState({editing:!1,editingPreviousValue:null},(function(){return e.props.onUpdate()}))}},e._getCommentHTML=function(){return Zh.asCommentEvent(e.props.event).getComment().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t,n=this,o=Zh.asCommentEvent(this.props.event),a="#".concat((0,er.vq)(o.getBackgroundColorRed(),o.getBackgroundColorGreen(),o.getBackgroundColorBlue())),s="#".concat((0,er.vq)(o.getTextColorRed(),o.getTextColorGreen(),o.getTextColorBlue()));return(0,f.jsx)("div",{className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),e)),style:(0,i.Z)((0,i.Z)({},wh.container),{},{backgroundColor:a}),onClick:this.edit,onKeyUp:function(e){!n.state.editing&&(0,Io._x)(e)&&n.edit()},tabIndex:0,id:"".concat(this.props.idPrefix,"-comment"),children:this.state.editing?(0,f.jsx)(po.ZP,{multiline:!0,margin:"none",ref:function(e){return n._textField=e},value:o.getComment(),translatableHintText:{id:"<Enter comment>"},onBlur:this.endEditing,onChange:this.onChange,style:wh.commentTextField,inputStyle:{color:s,padding:0},fullWidth:!0,id:"comment-title",onKeyDown:function(e){((0,Io.W$)(e)||(0,Io.Fc)(e))&&n.endEditing()},underlineShow:!1}):(0,f.jsx)("span",(0,i.Z)({ref:function(e){return n._selectable=e},className:Gl()((t={},(0,r.Z)(t,Yl,!0),(0,r.Z)(t,rc,this.props.disabled),t)),style:(0,i.Z)((0,i.Z)({},wh.commentSpan),{},{color:s}),dangerouslySetInnerHTML:{__html:this._getCommentHTML()}},(0,Ae.Y)({editableText:"true"})))})}}]),n}(u.Component),Eh={container:{display:"flex",flexDirection:"column"},maxWidth:{maxWidth:"100%"}},Sh=function(e){return(0,f.jsx)(ee.Z,{square:!0,style:(0,i.Z)((0,i.Z)({},Eh.container),{},{height:e.noFullHeight?void 0:"100%",width:e.width?e.width:void 0,flex:e.noExpand?void 0:1},e.maxWidth?Eh.maxWidth:void 0),background:"dark",children:e.children})},Ph=n(64207),Ih={paddingBottom:10,overflowY:"auto",scrollbarWidth:"thin",overflowX:"hidden",minHeight:30,maxHeight:400,zIndex:5};function Dh(e){var t=u.useRef(null),n=u.useRef(null),r="small"===(0,T.L)();return(0,f.jsx)(kt.Z,{mouseEvent:"onMouseUp",onClickAway:function(t){(0,Ph.le)(t.composedPath())||(t instanceof MouseEvent?e.onApply():setTimeout((function(){e.onApply()}),50))},children:(0,f.jsx)(Jc.Z,{open:e.open,anchorEl:e.anchorEl,style:(0,i.Z)((0,i.Z)({},Ih),{},{width:r?"100%":"auto",minWidth:r?"auto":320,maxWidth:r?320:600}),placement:"bottom-start",onKeyDown:function(r){(0,Io.W$)(r)?e.onRequestClose():(0,Io.Fc)(r)?e.onApply():(0,Io.ph)(r)&&(r.stopPropagation(),r.preventDefault(),e.onApply()),(0,Io.xj)(r)?r.target&&r.target===n.current&&(r.stopPropagation(),r.preventDefault(),t.current&&t.current.focus()):(0,Io.bo)(r)&&r.target&&r.target===t.current&&(r.stopPropagation(),r.preventDefault(),n.current&&n.current.focus())},children:(0,f.jsxs)(Sh,{children:[(0,f.jsx)("div",{tabIndex:0,ref:t}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(L.x1,{children:e.children})}),(0,f.jsx)("div",{tabIndex:0,ref:n})]})})})}var Ah=n.g.gd,Lh={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},Mh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._objectField=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=Ah.asForEachEvent(e.props.event).getObjectToPick(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._objectField&&e._objectField.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=Ah.asForEachEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setObjectToPick(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t,n=this,o=Ah.asForEachEvent(this.props.event),a=o.getObjectToPick();return(0,f.jsxs)("div",{style:Lh.container,className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),(0,r.Z)(e,Kl,!0),e)),children:[(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:Gl()((t={},(0,r.Z)(t,Yl,!0),(0,r.Z)(t,rc,this.props.disabled),t)),onClick:this.edit,onKeyPress:function(e){(0,Io._x)(e)&&n.edit(e)},tabIndex:0,children:a?(0,f.jsx)(c.Trans,{id:"Repeat for each instance of {objectName}:",values:{objectName:a}}):(0,f.jsx)("i",{children:(0,f.jsx)(c.Trans,{id:"Click to choose for which objects this event will be repeated"})})})}),(0,f.jsx)(mh,{leftIndentWidth:this.props.leftIndentWidth,windowWidth:this.props.windowWidth,renderConditionsList:function(e){var t=e.style,r=e.className;return(0,f.jsx)(fh,{instrsList:o.getConditions(),style:t,className:r,selection:n.props.selection,areConditions:!0,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowWidth:n.props.windowWidth,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,f.jsx)(fh,{instrsList:o.getActions(),style:(0,i.Z)({},Lh.actionsList),className:t,selection:n.props.selection,areConditions:!1,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowWidth:n.props.windowWidth,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})}}),(0,f.jsx)(Dh,{open:this.state.editing,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(Uc,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:a,onChange:function(e){o.setObjectToPick(e),n.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return n._objectField=e}})})]})}}]),n}(u.Component),Fh=n.g.gd,Oh={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1},variableContainer:{marginLeft:"3px",marginRight:"2px"},eventLabel:{marginLeft:"5px",whiteSpace:"normal",wordWrap:"break-word"}},Rh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._valueIteratorField=null,e._keyIteratorField=null,e._iterableField=null,e.state={editingValueIteratorVariableName:!1,editingKeyIteratorVariableName:!1,editingIterableVariableName:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t,n){var r=Fh.asForEachChildVariableEvent(e.props.event),o=r.getValueIteratorVariableName(),i=r.getKeyIteratorVariableName(),a=r.getIterableVariableName();setTimeout((function(){return e.setState({editingValueIteratorVariableName:"iteratorValue"===t,editingKeyIteratorVariableName:"iteratorKey"===t,editingIterableVariableName:"iterable"===t,editingPreviousValue:"iterable"===t?a:"iteratorValue"===t?o:i,anchorEl:n},(function(){setTimeout((function(){var n="iterable"===t?e._iterableField:"iteratorValue"===t?e._valueIteratorField:e._keyIteratorField;n&&n.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=Fh.asForEachChildVariableEvent(e.props.event),n=e.state,r=n.editingPreviousValue,o=n.editingIterableVariableName,i=n.editingValueIteratorVariableName,a=n.editingKeyIteratorVariableName;null!=r&&(o?t.setIterableVariableName(r):i?t.setValueIteratorVariableName(r):a&&t.setKeyIteratorVariableName(r),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editingKeyIteratorVariableName:!1,editingValueIteratorVariableName:!1,editingIterableVariableName:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t,n,o,a=this,s=Fh.asForEachChildVariableEvent(this.props.event),l=s.getValueIteratorVariableName(),u=s.getKeyIteratorVariableName(),d=s.getIterableVariableName();return(0,f.jsxs)("div",{style:Oh.container,className:Gl()((e={},(0,r.Z)(e,Kl,!0),(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),e)),children:[(0,f.jsx)("div",{style:Oh.eventLabel,children:(0,f.jsx)(c.Trans,{id:"<0>For every child in<1><2/>{0}</1>, store the child in variable<3><4/>{1}</3>, the child name in<5><6/>{2}</5>and do:</0>",values:{0:0!==d.length?(0,f.jsx)("span",{children:d}):(0,f.jsx)("span",{className:"instruction-missing-parameter",children:(0,f.jsx)(c.Trans,{id:"<Select a variable>"})}),1:0!==l.length?(0,f.jsx)("span",{children:l}):(0,f.jsx)("span",{children:(0,f.jsx)(c.Trans,{id:"<Select a variable> (optional)"})}),2:0!==u.length?(0,f.jsx)("span",{children:u}):(0,f.jsx)("span",{children:(0,f.jsx)(c.Trans,{id:"<Select a variable> (optional)"})})},components:[(0,f.jsx)("span",{className:Gl()((0,r.Z)({},rc,this.props.disabled))}),(0,f.jsx)("span",{className:Gl()((t={},(0,r.Z)(t,Yl,!0),(0,r.Z)(t,tc,!0),(0,r.Z)(t,ac,!0),(0,r.Z)(t,"scenevar",!0),t)),style:Oh.variableContainer,onClick:function(e){return a.edit("iterable",e.currentTarget)},onKeyPress:function(e){(0,Io._x)(e)&&a.edit("iterable",e.currentTarget)},tabIndex:0}),(0,f.jsx)("img",{className:ql,src:"res/types/scenevar.png",alt:"Scene variable"}),(0,f.jsx)("span",{className:Gl()((n={},(0,r.Z)(n,Yl,!0),(0,r.Z)(n,tc,!0),(0,r.Z)(n,ac,!0),(0,r.Z)(n,"scenevar",!0),n)),style:Oh.variableContainer,onClick:function(e){return a.edit("iteratorValue",e.currentTarget)},onKeyPress:function(e){(0,Io._x)(e)&&a.edit("iteratorValue",e.currentTarget)},tabIndex:0}),(0,f.jsx)("img",{className:ql,src:"res/types/scenevar.png",alt:"Scene variable"}),(0,f.jsx)("span",{className:Gl()((o={},(0,r.Z)(o,Yl,!0),(0,r.Z)(o,tc,!0),(0,r.Z)(o,ac,!0),(0,r.Z)(o,"scenevar",!0),o)),style:Oh.variableContainer,onClick:function(e){return a.edit("iteratorKey",e.currentTarget)},onKeyPress:function(e){(0,Io._x)(e)&&a.edit("iteratorKey",e.currentTarget)},tabIndex:0}),(0,f.jsx)("img",{className:ql,src:"res/types/scenevar.png",alt:"Scene variable"})]})}),(0,f.jsx)(mh,{leftIndentWidth:this.props.leftIndentWidth,windowWidth:this.props.windowWidth,renderConditionsList:function(e){var t=e.style,n=e.className;return(0,f.jsx)(fh,{instrsList:s.getConditions(),style:t,className:n,selection:a.props.selection,areConditions:!0,onAddNewInstruction:a.props.onAddNewInstruction,onPasteInstructions:a.props.onPasteInstructions,onMoveToInstruction:a.props.onMoveToInstruction,onMoveToInstructionsList:a.props.onMoveToInstructionsList,onInstructionClick:a.props.onInstructionClick,onInstructionDoubleClick:a.props.onInstructionDoubleClick,onInstructionContextMenu:a.props.onInstructionContextMenu,onAddInstructionContextMenu:a.props.onAddInstructionContextMenu,onParameterClick:a.props.onParameterClick,disabled:a.props.disabled,renderObjectThumbnail:a.props.renderObjectThumbnail,screenType:a.props.screenType,windowWidth:a.props.windowWidth,scope:a.props.scope,resourcesManager:a.props.project.getResourcesManager(),globalObjectsContainer:a.props.globalObjectsContainer,objectsContainer:a.props.objectsContainer,idPrefix:a.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,f.jsx)(fh,{instrsList:s.getActions(),style:(0,i.Z)({},Oh.actionsList),className:t,selection:a.props.selection,areConditions:!1,onAddNewInstruction:a.props.onAddNewInstruction,onPasteInstructions:a.props.onPasteInstructions,onMoveToInstruction:a.props.onMoveToInstruction,onMoveToInstructionsList:a.props.onMoveToInstructionsList,onInstructionClick:a.props.onInstructionClick,onInstructionDoubleClick:a.props.onInstructionDoubleClick,onInstructionContextMenu:a.props.onInstructionContextMenu,onAddInstructionContextMenu:a.props.onAddInstructionContextMenu,onParameterClick:a.props.onParameterClick,disabled:a.props.disabled,renderObjectThumbnail:a.props.renderObjectThumbnail,screenType:a.props.screenType,windowWidth:a.props.windowWidth,scope:a.props.scope,resourcesManager:a.props.project.getResourcesManager(),globalObjectsContainer:a.props.globalObjectsContainer,objectsContainer:a.props.objectsContainer,idPrefix:a.props.idPrefix})}}),(0,f.jsx)(Dh,{open:this.state.editingValueIteratorVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)($d,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:l,onChange:function(e){s.setValueIteratorVariableName(e),a.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return a._valueIteratorField=e}})}),(0,f.jsx)(Dh,{open:this.state.editingKeyIteratorVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)($d,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:u,onChange:function(e){s.setKeyIteratorVariableName(e),a.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return a._keyIteratorField=e}})}),(0,f.jsx)(Dh,{open:this.state.editingIterableVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)($d,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:d,onChange:function(e){s.setIterableVariableName(e),a.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return a._iterableField=e}})})]})}}]),n}(u.Component),Bh=n.g.gd,_h={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},Nh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._field=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=Bh.asRepeatEvent(e.props.event).getRepeatExpression(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._field&&e._field.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=Bh.asRepeatEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setRepeatExpression(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t,n=this,o=Bh.asRepeatEvent(this.props.event),a=o.getRepeatExpression();return(0,f.jsxs)("div",{style:_h.container,className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),(0,r.Z)(e,Kl,!0),e)),children:[(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:Gl()((t={},(0,r.Z)(t,Yl,!0),(0,r.Z)(t,rc,this.props.disabled),t)),onClick:this.edit,onKeyPress:function(e){(0,Io._x)(e)&&n.edit(e)},tabIndex:0,children:a?(0,f.jsx)(c.Trans,{id:"Repeat {expression} times:",values:{expression:a}}):(0,f.jsx)("i",{children:(0,f.jsx)(c.Trans,{id:"Click to choose how many times will be repeated"})})})}),(0,f.jsx)(mh,{leftIndentWidth:this.props.leftIndentWidth,windowWidth:this.props.windowWidth,renderConditionsList:function(e){var t=e.style,r=e.className;return(0,f.jsx)(fh,{instrsList:o.getConditions(),style:t,className:r,selection:n.props.selection,areConditions:!0,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowWidth:n.props.windowWidth,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,f.jsx)(fh,{instrsList:o.getActions(),style:(0,i.Z)({},_h.actionsList),className:t,selection:n.props.selection,areConditions:!1,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowWidth:n.props.windowWidth,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,idPrefix:n.props.idPrefix})}}),(0,f.jsx)(Dh,{open:this.state.editing,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(_d,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,value:a,onChange:function(e){o.setRepeatExpression(e),n.props.onUpdate()},parameterRenderingService:Gp,isInline:!0,ref:function(e){return n._field=e}})})]})}}]),n}(u.Component),Uh=n.g.gd,Hh={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},Vh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e,t=this,n=Uh.asWhileEvent(this.props.event);return(0,f.jsxs)("div",{style:Hh.container,className:Gl()((e={},(0,r.Z)(e,Xl,!0),(0,r.Z)(e,Jl,this.props.selected),(0,r.Z)(e,Kl,!0),e)),children:[(0,f.jsx)("div",{className:Gl()((0,r.Z)({},rc,this.props.disabled)),children:(0,f.jsx)(c.Trans,{id:"While these conditions are true:"})}),(0,f.jsx)(fh,{instrsList:n.getWhileConditions(),style:{},className:$l,selection:this.props.selection,areConditions:!0,onAddNewInstruction:this.props.onAddNewInstruction,onPasteInstructions:this.props.onPasteInstructions,onMoveToInstruction:this.props.onMoveToInstruction,onMoveToInstructionsList:this.props.onMoveToInstructionsList,onInstructionClick:this.props.onInstructionClick,onInstructionDoubleClick:this.props.onInstructionDoubleClick,onInstructionContextMenu:this.props.onInstructionContextMenu,onAddInstructionContextMenu:this.props.onAddInstructionContextMenu,onParameterClick:this.props.onParameterClick,disabled:this.props.disabled,renderObjectThumbnail:this.props.renderObjectThumbnail,screenType:this.props.screenType,windowWidth:this.props.windowWidth,scope:this.props.scope,resourcesManager:this.props.project.getResourcesManager(),globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,idPrefix:this.props.idPrefix}),(0,f.jsx)("div",{className:Gl()((0,r.Z)({},rc,this.props.disabled)),children:(0,f.jsx)(c.Trans,{id:"Repeat these:"})}),(0,f.jsx)(mh,{leftIndentWidth:this.props.leftIndentWidth,windowWidth:this.props.windowWidth,renderConditionsList:function(e){var r=e.style,o=e.className;return(0,f.jsx)(fh,{instrsList:n.getConditions(),style:r,className:o,selection:t.props.selection,areConditions:!0,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowWidth:t.props.windowWidth,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})},renderActionsList:function(e){var r=e.className;return(0,f.jsx)(fh,{instrsList:n.getActions(),style:(0,i.Z)({},Hh.actionsList),className:r,selection:t.props.selection,areConditions:!1,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowWidth:t.props.windowWidth,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,idPrefix:t.props.idPrefix})}})]})}}]),n}(u.Component),Wh=function(e,t,n){if(!n||!e)return[];var r=hr(n).filter((function(e){return e.getName()!==t})).map((function(e){return{text:e.getName(),value:e.getName()}})),o=pr(n).filter((function(t){return t.getName()!==e})).map((function(e){return{text:e.getName(),value:e.getName()}}));return[].concat((0,j.Z)(r),[{type:"separator"}],(0,j.Z)(o))},zh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"focus",value:function(){this._field&&this._field.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,o=t.onRequestClose,i=t.onApply,a=t.isInline,s=t.project,l=t.sceneName,c=t.externalEventsName;return(0,f.jsx)(Bt.ZP,{margin:this.props.isInline?"none":"dense",fullWidth:!0,id:"external-events-field",value:n,onChange:r,onRequestClose:o,onApply:i,dataSource:Wh(l,c,s),openOnFocus:!a,ref:function(t){return e._field=t}})}}]),n}(u.Component),Gh=n.g.gd,Yh={container:{height:"4em",display:"flex",alignItems:"center",padding:5},title:{fontSize:"1.2em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},openInNewIcon:{fontSize:"1.5em"}},qh=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._externalEventsAutoComplete=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=Gh.asLinkEvent(e.props.event).getTarget(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._externalEventsAutoComplete&&e._externalEventsAutoComplete.focus()}),10)}))}),10)},e.openTarget=function(t){var n=e.props,r=n.project,o=n.event,i=n.onOpenLayout,a=n.onOpenExternalEvents,s=Gh.asLinkEvent(o).getTarget();r.hasExternalEventsNamed(s)?a(s):r.hasLayoutNamed(s)?i(s):(0,Xr.T4)(t._({id:"The specified external events do not exist in the game. Be sure that the name is correctly spelled or create them using the project manager."}))},e.cancelEditing=function(){e.endEditing();var t=Gh.asLinkEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setTarget(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl,n=Gh.asLinkEvent(e.props.event);t&&t.focus(),e.state.editingPreviousValue!==n.getTarget()&&e.props.onEndEditingEvent(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=Gh.asLinkEvent(this.props.event),n=t.getTarget();return(0,f.jsx)(c.I18n,{children:function(o){var i,a=o.i18n;return(0,f.jsxs)("div",{className:Gl()((i={},(0,r.Z)(i,Xl,!0),(0,r.Z)(i,Jl,e.props.selected),(0,r.Z)(i,"link-container",!0),i)),style:Yh.container,id:"".concat(e.props.idPrefix,"-link"),children:[(0,f.jsx)("span",{style:Yh.title,className:Gl()((0,r.Z)({},rc,e.props.disabled)),children:e.props.scope.layout?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Trans,{id:"Include events from"})," ",(0,f.jsx)("i",{className:Gl()((0,r.Z)({},Yl,!0)),onClick:e.edit,onKeyPress:function(t){(0,Io._x)(t)&&e.edit(t)},tabIndex:0,children:n||(0,f.jsx)(c.Trans,{id:"<Enter the name of external events>"})})," "]}):(0,f.jsx)(c.Trans,{id:"Links can't be used outside of a scene."})}),(0,f.jsx)(A.Z,{onClick:function(){return e.openTarget(a)},disabled:!n,children:(0,f.jsx)(Oe.Z,{style:Yh.openInNewIcon})}),(0,f.jsx)(Dh,{open:e.state.editing,anchorEl:e.state.anchorEl,onRequestClose:e.cancelEditing,onApply:e.endEditing,children:(0,f.jsx)(zh,{project:e.props.project,value:n,sceneName:e.props.scope.layout?e.props.scope.layout.getName():void 0,externalEventsName:e.props.scope.externalEvents?e.props.scope.externalEvents.getName():void 0,onChange:function(n){t.setTarget(n),e.props.onUpdate()},isInline:!0,onRequestClose:e.cancelEditing,onApply:e.endEditing,ref:function(t){return e._externalEventsAutoComplete=t}})})]})}})}}]),n}(u.Component),Xh=n(39949),Jh=n(74149),Kh=q()("fs"),Qh=q()("path"),$h={scrollBeyondLastLine:!1,minimap:{enabled:!1}},ef=!1,tf=!1,nf=function(e){(0,ut.Z)(r,e);var t=(0,dt.Z)(r);function r(){var e;(0,st.Z)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={MonacoEditor:null,error:null},e.setupEditorThemes=function(e){tf||(tf=!0,G().forEach((function(t){t.themeData&&e.editor.defineTheme(t.themeName,t.themeData)})))},e.setUpSaveOnEditorBlur=function(t){t.onDidBlurEditorText(e.props.onBlur)},e.setUpEditorFocus=function(t){t.onDidFocusEditorText(e.props.onFocus)},e.setupEditorCompletions=function(t,n){e.setUpEditorFocus(t),e.setUpSaveOnEditorBlur(t),ef||(ef=!0,n.languages.typescript.javascriptDefaults.setCompilerOptions({target:n.languages.typescript.ScriptTarget.ES6,allowNonTsExtensions:!0,allowJs:!0,checkJs:!0}),function(e){var t=function(t){return Kh.readdir(t,(function(n,r){n?console.error("Unable to read GDJS files for setting up autocompletions:",n):r.forEach((function(n){if(n.endsWith(".ts")||n.endsWith(".js")){var r=Qh.join(t,n);Kh.readFile(r,"utf8",(function(t,n){t?console.error("Unable to read ".concat(r," for setting up autocompletions:"),t):e.languages.typescript.javascriptDefaults.addExtraLib(n,r)}))}}))}))};(0,Jh.findGDJS)().then((function(n){var r=n.gdjsRoot,o=Qh.join(r,"Runtime-sources"),i=Qh.join(o,"types"),a=Qh.join(o,"libs"),s=Qh.join(o,"pixi-renderers"),l=Qh.join(o,"cocos-renderers"),c=Qh.join(o,"howler-sound-manager"),u=Qh.join(o,"cocos-sound-manager"),d=Qh.join(o,"fontfaceobserver-font-manager"),p=Qh.join(o,"Extensions"),h=Qh.join(o,"events-tools");t(o),t(i),t(a),t(s),t(l),t(c),t(u),t(d),t(h),Kh.readdir(p,(function(e,n){e?console.error("Unable to read Extensions folders for setting up autocompletions:",e):n.filter((function(e){return!e.endsWith(".txt")&&!e.endsWith(".md")&&!e.endsWith(".flow.js")&&!e.endsWith(".gitignore")})).forEach((function(e){return t(Qh.join(p,e))}))})),e.languages.typescript.javascriptDefaults.addExtraLib("\n/** Represents the scene being played. */\nvar runtimeScene = new gdjs.RuntimeScene();\n\n/**\n * The instances of objects that are passed to your JavaScript function.\n * @type {gdjs.RuntimeObject[]}\n */\nvar objects = [];\n\n/**\n * @type {EventsFunctionContext}\n */\nvar eventsFunctionContext = {};\n","this-mock-the-context-of-events.js")}))}(n)),e.props.onEditorMounted&&e.props.onEditorMounted()},e._handleContextMenu=function(e){e.preventDefault(),e.stopPropagation()},e}return(0,lt.Z)(r,[{key:"componentDidMount",value:function(){this.loadMonacoEditor()}},{key:"handleLoadError",value:function(e){this.setState({error:e})}},{key:"loadMonacoEditor",value:function(){var e=this;this.setState({error:null}),window.MonacoEnvironment={getWorkerUrl:function(e,t){return"external/monaco-editor-min/vs/base/worker/workerMain.js"}},n.e(2462).then(n.bind(n,37848)).then((function(t){return e.setState({MonacoEditor:t.default})})).catch(this.handleLoadError)}},{key:"render",value:function(){var e=this,t=this.state,n=t.MonacoEditor;return t.error?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Unable to load the code editor"})}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Retry"}),onClick:this.loadMonacoEditor})]}):n?(0,f.jsx)("div",{onContextMenu:this._handleContextMenu,children:(0,f.jsx)(X.ZP.Consumer,{children:function(t){var r=t.values;return(0,f.jsx)(n,{width:e.props.width||600,height:e.props.height||200,language:"javascript",theme:r.codeEditorThemeName,value:e.props.value,onChange:e.props.onChange,editorWillMount:e.setupEditorThemes,editorDidMount:e.setupEditorCompletions,options:(0,i.Z)((0,i.Z)({},$h),{},{fontSize:r.eventsSheetZoomLevel,wordWrap:"on"})})}})}):(0,f.jsx)(Qe.Z,{})}}]),r}(u.Component),rf=n.g.gd,of={container:{minHeight:30,display:"flex",flexDirection:"column",backgroundColor:"#1e1e1e"},wrappingText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:"0.95em",paddingLeft:5,paddingRight:5,paddingTop:2,paddingBottom:2,margin:0,backgroundColor:"#1e1e1e",color:"#d4d4d4",overflowX:"hidden",maxWidth:"100%",whiteSpace:"normal",wordBreak:"normal",overflowWrap:"anywhere"},comment:{color:"#777"},commentLink:{cursor:"pointer",color:"#777",textDecoration:"underline"},expandIcon:{color:"#d4d4d4"}},af=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._objectField=null,e.state={editingObject:!1,editingPreviousValue:null,anchorEl:null},e.onFocus=function(){var t=rf.asJsCodeEvent(e.props.event);e._inlineCodeBeforeChanges=t.getInlineCode()},e.onBlur=function(){var t=rf.asJsCodeEvent(e.props.event).getInlineCode();e._inlineCodeBeforeChanges!==t&&e.props.onEndEditingEvent()},e.onChange=function(t){rf.asJsCodeEvent(e.props.event).setInlineCode(t)},e.editObject=function(t){var n=rf.asJsCodeEvent(e.props.event).getParameterObjects(),r=t.currentTarget;setTimeout((function(){return e.setState({editingObject:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._objectField&&e._objectField.focus()}),10)}))}),10)},e.cancelObjectEditing=function(){e.endObjectEditing();var t=rf.asJsCodeEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setParameterObjects(n),e.forceUpdate())},e.endObjectEditing=function(){var t=e.state.anchorEl;t&&t.focus();var n=rf.asJsCodeEvent(e.props.event);e.state.editingPreviousValue!==n.getParameterObjects()&&e.props.onEndEditingEvent(),e.setState({editingObject:!1,editingPreviousValue:null,anchorEl:null})},e.toggleExpanded=function(){var t=rf.asJsCodeEvent(e.props.event);t.setEventsSheetExpanded(!t.isEventsSheetExpanded())},e._getCodeEditorHeight=function(){if(!rf.asJsCodeEvent(e.props.event).isEventsSheetExpanded())return 200;var t=e.props.eventsSheetHeight-100;return Math.max(200,t)},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=rf.asJsCodeEvent(this.props.event),n=t.getParameterObjects(),o=this.props.disabled?of.comment:void 0,i=(0,f.jsx)("span",{className:Gl()((0,r.Z)({},Yl,!0)),onClick:this.editObject,onKeyPress:function(t){(0,Io._x)(t)&&e.editObject(t)},tabIndex:0,style:o,children:n?(0,f.jsx)(c.Trans,{id:", objects /*{parameterObjects}*/",values:{parameterObjects:n}}):(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(c.Trans,{id:"/* Click here to choose objects to pass to JavaScript */"})]})}),a=this.props.scope.eventsFunction?(0,f.jsx)("span",{style:o,children:", eventsFunctionContext"}):null,s=(0,f.jsxs)("p",{style:of.wrappingText,children:[(0,f.jsxs)("span",{style:o,children:[this.props.disabled?"/*":"","(function(runtimeScene"]}),i,a,(0,f.jsx)("span",{style:o,children:") {"})]}),l=(0,f.jsxs)("p",{style:of.wrappingText,children:[(0,f.jsx)("span",{style:o,children:"})(runtimeScene"}),i,a,(0,f.jsxs)("span",{style:o,children:[");",this.props.disabled?"*/":""]}),(0,f.jsxs)("span",{style:of.comment,children:[" // ",(0,f.jsx)("a",{href:(0,Xh.vA)("/events/js-code"),target:"_blank",rel:"noopener noreferrer",style:of.commentLink,children:"Read the documentation and help"})]})]}),u=(0,f.jsx)("div",{style:of.expandIcon,children:t.isEventsSheetExpanded()?(0,f.jsx)(Re,{fontSize:"small",color:"inherit"}):(0,f.jsx)(Be.Z,{fontSize:"small",color:"inherit"})});return(0,f.jsx)(Zt.Z,{bounds:!0,children:function(o){var i,a=o.measureRef,c=o.contentRect;return(0,f.jsxs)("div",{style:of.container,className:Gl()((i={},(0,r.Z)(i,Xl,!0),(0,r.Z)(i,Jl,e.props.selected),i)),ref:a,id:"".concat(e.props.idPrefix,"-js-code"),children:[s,(0,f.jsx)(nf,{value:t.getInlineCode(),onChange:e.onChange,width:c.bounds.width-5,height:e._getCodeEditorHeight(),onEditorMounted:function(){e.props.onUpdate()},onFocus:e.onFocus,onBlur:e.onBlur}),l,(0,f.jsx)($r.Z,{onClick:e.toggleExpanded,fullWidth:!0,size:"small",children:u}),(0,f.jsx)(Dh,{open:e.state.editingObject,anchorEl:e.state.anchorEl,onRequestClose:e.cancelObjectEditing,onApply:e.endObjectEditing,children:(0,f.jsx)(Uc,{project:e.props.project,scope:e.props.scope,globalObjectsContainer:e.props.globalObjectsContainer,objectsContainer:e.props.objectsContainer,value:n,onChange:function(n){t.setParameterObjects(n),e.props.onUpdate()},isInline:!0,onRequestClose:e.cancelObjectEditing,onApply:e.endObjectEditing,ref:function(t){return e._objectField=t}})})]})}})}}]),n}(u.Component),sf={components:{unknownEvent:sc,"BuiltinCommonInstructions::Standard":bh,"BuiltinCommonInstructions::Group":yh,"BuiltinCommonInstructions::Comment":Th,"BuiltinCommonInstructions::ForEach":Mh,"BuiltinCommonInstructions::ForEachChildVariable":Rh,"BuiltinCommonInstructions::Repeat":Nh,"BuiltinCommonInstructions::While":Vh,"BuiltinCommonInstructions::Link":qh,"BuiltinCommonInstructions::JsCode":af},getEventComponent:function(e){return this.components.hasOwnProperty(e.getType())?this.components[e.getType()]:this.components.unknownEvent},registerEvent:function(e,t){this.components.hasOwnProperty(e)?this.components[e]=t:console.warn('Tried to register renderer for events "'+e+'", but a renderer already exists.')}},lf=function(){function e(t){(0,st.Z)(this,e),this.eventHeights={},this.updateTimeoutId=null,this.component=null,this.component=t}return(0,lt.Z)(e,[{key:"_notifyComponent",value:function(){var e=this;this.updateTimeoutId||(this.updateTimeoutId=setTimeout((function(){e.component?e.component.onHeightsChanged((function(){return e.updateTimeoutId=null})):e.updateTimeoutId=null}),0))}},{key:"setEventHeight",value:function(e,t){var n=this.eventHeights[e.ptr];void 0!==n&&n===t||this._notifyComponent(),this.eventHeights[e.ptr]=t}},{key:"getEventHeight",value:function(e){return this.eventHeights[e.ptr]||60}}]),e}(),cf=(n(90791),n.g.gd),uf=function(){var e=cf.asPlatform(cf.JsPlatform.get()).getAllPlatformExtensions();return kc()((0,Nt.mapFor)(0,e.size(),(function(t){var n=e.at(t).getAllEvents();return n.keys().toJSArray().filter((function(e){return"BuiltinAsync::Async"!==e})).map((function(e){var t=n.get(e);return{type:e,fullName:t.getFullName(),description:t.getDescription()}}))})))},df=function(e){var t=e.targetEventsList,n=e.movingEvent,r=e.initialEventsList,o=e.toIndex;r.moveEventToAnotherEventsList(n,t,o)},pf=function(e){var t=e.targetNode,n=e.node;t.event&&n.event&&df({targetEventsList:t.event.getSubEvents(),movingEvent:n.event,initialEventsList:n.eventsList,toIndex:0})},hf=function(e){var t=e.targetNode,n=e.node;if(t.event&&n.event){var r=n.depth===t.depth&&n.indexInList<t.indexInList?t.indexInList:t.indexInList+1;df({targetEventsList:t.eventsList,movingEvent:n.event,initialEventsList:n.eventsList,toIndex:r})}},ff=function(e){var t=e.targetNode,n=e.node;if(t.event&&n.event){var r=n.depth===t.depth&&n.indexInList<t.indexInList?t.indexInList-1:t.indexInList;df({targetEventsList:t.eventsList,movingEvent:n.event,initialEventsList:n.eventsList,toIndex:r})}},gf={addButton:{cursor:"pointer"},dropIndicator:{border:"2px solid black",outline:"1px solid white"}},mf=function(e){return function(){return uf().map((function(t){return{label:t.fullName,click:function(){return e(t.type)}}}))}},xf={id:"Right-click for more events"},vf={id:"Long press for more events"};function bf(e){var t=e.onAddEvent,n=e.DnDComponent,r=e.draggedNode,o=e.rootEventsList,a=(0,eo.BF)(),s=u.useContext(m.Z),l=function(){r&&df({targetEventsList:o,movingEvent:r.event,initialEventsList:r.eventsList,toIndex:-1})};return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(n,{canDrop:function(){return!0},drop:l,children:function(e){var n=e.connectDropTarget,o=e.isOver;return n((0,f.jsxs)("div",{children:[o&&(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},gf.dropIndicator),{},{borderColor:s.dropIndicator.canDrop,outlineColor:s.dropIndicator.border})}),(0,f.jsx)(L.sg,{children:(0,f.jsxs)(L.x1,{justifyContent:"space-between",children:[(0,f.jsx)(Ie.Z,{openMenuWithSecondaryClick:!0,element:(0,f.jsx)("button",{style:gf.addButton,className:"add-link",onClick:function(){return t("BuiltinCommonInstructions::Standard")},title:r._("touch"===a?vf:xf),children:(0,f.jsx)(c.Trans,{id:"Add a new event"})}),buildMenuTemplate:mf(t)}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)("button",{style:gf.addButton,className:"add-link",children:(0,f.jsx)(c.Trans,{id:"Add..."})}),buildMenuTemplate:mf(t)})]})})]}))}})}})}var jf=n(23818),Cf=n(4346),yf=n(32515),Zf={dropArea:{zIndex:1,position:"absolute"},dropIndicator:{position:"absolute",zIndex:2,border:"2px solid black",outline:"1px solid white"},autoScroll:{width:"100%",position:"absolute",height:"10%",zIndex:2}};function kf(e){var t=e.DnDComponent,n=e.canDrop,r=e.onDrop,o=e.style,a=u.useContext(m.Z);return(0,f.jsx)(t,{canDrop:n,drop:r,children:function(e){var t=e.isOver,n=e.connectDropTarget,r=e.canDrop;return n((0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},Zf.dropArea),o.dropArea)}),r&&t&&(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)((0,i.Z)({},Zf.dropIndicator),o.dropIndicator),{},{borderColor:a.dropIndicator.canDrop,outlineColor:a.dropIndicator.border})})]}))}})}function wf(e){var t=e.DnDComponent,n=e.onDrop,r=(e.activateTargets,e.getNodeAtPath),o=e.node,i=e.draggedNode,a=e.indentWidth,s=e.draggedNodeHeight,l=o.depth;return(0,f.jsx)(f.Fragment,{children:new Array(l).fill(0).map((function(e,c){return c===i.depth?null:(0,f.jsx)(kf,{DnDComponent:t,onDrop:function(){return n(hf,r(o.nodePath.slice(0,c+1)))},canDrop:function(){return!0},style:{dropArea:{top:"100%",bottom:"-".concat(s,"px"),left:"-".concat(a*(l-c),"px"),width:a},dropIndicator:{left:"-".concat(a*(l-c),"px"),right:"0px",bottom:"-2px"}}},c)}))})}function Tf(e){var t=e.node,n=e.draggedNode,r=e.DnDComponent,o=e.onDrop,a=e.activateTargets,s=e.windowWidth,l=e.draggedNodeHeight,c=e.getNodeAtPath,u=function(e,t){if(e.depth!==t.depth)return!1;var n=e.nodePath,r=t.nodePath;return n.slice(0,-1).every((function(e,t){return e===r[t]}))}(t,n),d=function(e,t){var n=t.nodePath,r=e.nodePath;return 0!==n[n.length-1]&&n[n.length-1]-1===r[r.length-1]}(t,n),p=!!t.event&&t.event.canHaveSubEvents(),h=Lf(s),g=function(e,t,n){return{"bottom-left":{left:"0px",bottom:"0px",top:"50%",width:e},"bottom-right":{left:"".concat(e,"px"),right:"0px",bottom:"0px",top:"50%"},top:{left:"0px",right:"0px",top:"0px",bottom:"50%"},bottom:{left:"0px",right:"0px",top:"50%",bottom:"0px"},"below-left":{left:n?"10px":"0px",top:"100%",height:t,width:e},"below-right":{left:"".concat(n?e:e+10,"px"),right:"0px",top:"100%",height:t}}}(h,l,u),m=function(e){return{bottom:{left:"0px",right:"0px",bottom:"-2px"},"bottom-right":{left:"".concat(e,"px"),right:"0px",bottom:"-2px"},top:{left:"0px",right:"0px",top:"-2px"}}}(h),x={DnDComponent:r,canDrop:function(){return!0}};return(0,f.jsxs)("div",{style:{visibility:a?"visible":"hidden"},children:[(0,f.jsx)(kf,(0,i.Z)({style:{dropIndicator:m.top,dropArea:g.top},onDrop:function(){return o(ff,t)}},x)),p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(kf,(0,i.Z)({style:{dropIndicator:m["bottom-right"],dropArea:g["bottom-right"]},onDrop:function(){return o(pf,t)}},x)),(0,f.jsx)(kf,(0,i.Z)({style:{dropIndicator:m.bottom,dropArea:g["bottom-left"]},onDrop:function(){return o(hf,t)}},x)),d&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(kf,(0,i.Z)({style:{dropIndicator:m.bottom,dropArea:g["below-left"]},onDrop:function(){return o(hf,t)}},x)),(0,f.jsx)(kf,(0,i.Z)({style:{dropIndicator:m["bottom-right"],dropArea:g["below-right"]},onDrop:function(){return o(pf,t)}},x))]})]}):(0,f.jsx)(kf,(0,i.Z)({style:{dropIndicator:m.bottom,dropArea:g.bottom},onDrop:function(){return o(hf,t)}},x)),d&&(0,f.jsx)(wf,{node:t,draggedNode:n,DnDComponent:r,activateTargets:a,onDrop:o,indentWidth:h,draggedNodeHeight:l,getNodeAtPath:c})]})}function Ef(e){var t=e.direction,n=e.DnDComponent,r=e.activateTargets,o=e.onHover,s=u.useRef(null),l=u.useState(!1),c=(0,a.Z)(l,2),d=c[0],p=c[1];return u.useEffect((function(){return r?s.current=setTimeout((function(){p(!0)}),100):(p(!1),clearTimeout(s.current),s.current=null),function(){s.current&&clearTimeout(s.current)}}),[r]),(0,f.jsx)(n,{canDrop:function(){return!0},drop:function(){},children:function(e){var n=e.isOverLazy,r=e.connectDropTarget;n&&o();var a=(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},Zf.autoScroll),"top"===t?{top:0}:{bottom:0})});return d?r(a):null}})}var Sf=["className"],Pf=n.g.gd,If="events-sheet-events-dnd-type",Df=Oc.Z.getThumbnail.bind(Oc.Z),Af={container:{flex:1,position:"relative"},defaultEventContainer:{marginRight:10,position:"relative"},smallEventContainer:{marginRight:0,position:"relative"},eventComponentContainer:{display:"flex",flexDirection:"row",justifyContent:"stretch",position:"relative"}},Lf=function(e){return"small"===e?11:22},Mf=function(e){var t=e.event,n=e.project,r=e.scope,o=e.disabled,a=e.eventsHeightsCache,s=e.onEventContextMenu,l=(0,_t.Z)(),c=u.useRef(null),d=c.current?c.current.offsetHeight:0;u.useEffect((function(){a.setEventHeight(t,d)}),[t,a,d]);var p=u.useCallback((function(e){e.preventDefault(),s(e.clientX,e.clientY)}),[s]),h=(0,Le.i)(u.useCallback((function(e){s(e.clientX,e.clientY)}),[s]),"events-tree-event-component"),g=sf.getEventComponent(t);return(0,f.jsx)("div",(0,i.Z)((0,i.Z)({ref:c,onClick:e.onEventClick,onContextMenu:p},h),{},{children:!!g&&(0,f.jsxs)("div",{style:Af.eventComponentContainer,children:[e.connectDragSource((0,f.jsx)("div",{className:"move-handle"})),(0,f.jsx)("div",{style:Af.container,children:(0,f.jsx)(g,{project:n,scope:r,event:t,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,selected:Rl(e.selection,t),selection:e.selection,leftIndentWidth:e.leftIndentWidth,onUpdate:l,onAddNewInstruction:e.onAddNewInstruction,onPasteInstructions:e.onPasteInstructions,onMoveToInstruction:e.onMoveToInstruction,onMoveToInstructionsList:e.onMoveToInstructionsList,onInstructionClick:e.onInstructionClick,onInstructionDoubleClick:e.onInstructionDoubleClick,onInstructionContextMenu:e.onInstructionContextMenu,onAddInstructionContextMenu:e.onAddInstructionContextMenu,onEndEditingEvent:e.onEndEditingEvent,onParameterClick:e.onParameterClick,onOpenExternalEvents:e.onOpenExternalEvents,onOpenLayout:e.onOpenLayout,disabled:o,renderObjectThumbnail:e.renderObjectThumbnail,screenType:e.screenType,eventsSheetHeight:e.eventsSheetHeight,windowWidth:e.windowWidth,idPrefix:e.idPrefix})})]})}))},Ff=function(e){var t=e.className,n=(0,yt.Z)(e,Sf),r=u.useContext(m.Z);return(0,f.jsx)(kl.oP,(0,i.Z)({className:"".concat("events-tree"," ").concat(r.eventsSheetRootClassName," ").concat(t)},n))},Of=function(){},Rf=function(e){return e.treeIndex},Bf=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(e){var o;return(0,st.Z)(this,n),(o=t.call(this,e)).DragSourceAndDropTarget=(0,Lt.x)(If),o.DropTarget=ch(If),o._eventsToTreeData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=(0,Nt.mapFor)(0,e.getEventsCount(),(function(s){var l=e.getEventAt(s);t.push(l);var c=r||l.isDisabled(),u=t.length-1,d=i.concat(t.length-1),p=[].concat((0,j.Z)(a||[]),[s]);return{title:o._renderEvent,event:l,eventsList:e,indexInList:s,rowIndex:u,expanded:!l.isFolded(),disabled:c,depth:n,key:l.ptr,children:o._eventsToTreeData(l.getSubEvents(),l.isFolded()?[]:t,n+1,c,d,p).treeData,nodePath:d,relativeNodePath:p}})),l=(0,yf.Z)(o.props.preferences,o.props.tutorials,"intro-event-system"),u=[0===n?{title:function(){return(0,f.jsx)(bf,{onAddEvent:function(e){return o.props.onAddNewEvent(e,o.props.events)},DnDComponent:o.DropTarget,draggedNode:o.state.draggedNode,rootEventsList:e})},event:null,indexInList:e.getEventsCount(),disabled:!1,depth:0,fixedHeight:40,children:[]}:null,0===n&&0!==e.getEventsCount()&&l?{title:function(){return(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(Cf.Z,{tutorial:l})})},event:null,indexInList:e.getEventsCount()+1,disabled:!1,depth:0,fixedHeight:150,children:[],key:"eventstree-tutorial-node"}:null,0===n&&0===e.getEventsCount()?{title:function(){return(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"Add your first event"}),description:(0,f.jsx)(c.Trans,{id:"Events define the rules of a game."}),actionLabel:(0,f.jsx)(c.Trans,{id:"Add an event"}),helpPagePath:"/events",tutorialId:"intro-event-system",actionButtonId:"add-event-button",onAction:function(){return o.props.onAddNewEvent("BuiltinCommonInstructions::Standard",o.props.events)}})},event:null,indexInList:e.getEventsCount()+1,disabled:!1,depth:0,fixedHeight:300,children:[]}:null].filter(Boolean);return{treeData:u.length?s.concat(u):s,flatData:t}},o._canDrag=function(e){return!!e&&!!e.event},o._canDrop=function(e){return!0},o._onDrop=function(e,t){var n=o.state.draggedNode;if(n){e({node:n,targetNode:t});var r=n.nodePath,i=n.event;if(o._onEndDrag(),!i)return void console.warn("EventsSheet: No event found in dragged node.");var a=o.getEventRow(i);o.props.onEventMoved(r[r.length-1],a)}},o._onVisibilityToggle=function(e){var t=e.node.event;t&&(t.setFolded(!t.isFolded()),o.forceEventsUpdate())},o._renderObjectThumbnail=function(e){var t=o.props,n=t.project,i=t.scope;if(!t.showObjectThumbnails)return null;var a=Fc(n,i.layout,e);return a?(0,f.jsx)(jf.W,{className:Gl()((0,r.Z)({},ql,!0)),alt:"",src:Df(n,a.getConfiguration())}):null},o._temporaryUnfoldNode=function(e,t){var n=t.event;if(n){var r=o.temporaryUnfoldedNodes.some((function(e){return t.key===e.key}));e?o._hoverTimerId||t.expanded||r||(o._hoverTimerId=window.setTimeout((function(){n.setFolded(!1),o.temporaryUnfoldedNodes.push(t),o.forceEventsUpdate()}),1e3)):(window.clearTimeout(o._hoverTimerId),o._hoverTimerId=null)}},o._restoreFoldedNodes=function(){o.temporaryUnfoldedNodes.forEach((function(e){return e.event&&e.event.setFolded(!0)})),o.temporaryUnfoldedNodes=[],o.forceEventsUpdate()},o._getRowHeight=function(e){var t=e.node;return t?t.event?o.eventsHeightsCache.getEventHeight(t.event):t.fixedHeight||0:0},o._onEndDrag=function(){o.state.draggedNode&&(o.setState({draggedNode:null}),o._restoreFoldedNodes(),o.forceEventsUpdate())},o._renderEvent=function(e){var t=e.node,n=t.event,r=t.depth,a=t.disabled;if(!n)return null;var s=(0,ct.Z)(o),l=s.DragSourceAndDropTarget,c=s.DropTarget,u=!!o.state.draggedNode&&(function(e,t){if(t.depth<=e.depth)return!1;var n=e.nodePath,r=t.nodePath;return n.every((function(e,t){return e===r[t]}))}(o.state.draggedNode,t)||t.key===o.state.draggedNode.key);return(0,f.jsx)(l,{beginDrag:function(){return o.setState({draggedNode:t}),t},canDrag:function(){return o._canDrag(t)},canDrop:function(){return o._canDrop(t)},drop:function(){},endDrag:o._onEndDrag,children:function(e){var s=e.connectDragSource,l=e.connectDropTarget,d=e.isOverLazy;o._temporaryUnfoldNode(d,t);var p,h={eventsList:t.eventsList,event:n,indexInList:t.indexInList},g=(0,f.jsxs)("div",(0,i.Z)((0,i.Z)({style:(0,i.Z)({opacity:u?.5:1},(p=o.props.windowWidth,"small"===p?Af.smallEventContainer:Af.defaultEventContainer))},(0,Ae.Y)({rowIndex:t.rowIndex.toString()})),{},{children:[(0,f.jsx)(Mf,{project:o.props.project,scope:o.props.scope,globalObjectsContainer:o.props.globalObjectsContainer,objectsContainer:o.props.objectsContainer,event:n,eventsHeightsCache:o.eventsHeightsCache,selection:o.props.selection,leftIndentWidth:r*Lf(o.props.windowWidth),onAddNewInstruction:function(e){return o.props.onAddNewInstruction(h,e)},onPasteInstructions:function(e){return o.props.onPasteInstructions(h,e)},onMoveToInstruction:function(e){return o.props.onMoveToInstruction(h,e)},onMoveToInstructionsList:function(e){return o.props.onMoveToInstructionsList(h,e)},onInstructionClick:function(e){return o.props.onInstructionClick(h,e)},onInstructionDoubleClick:function(e){return o.props.onInstructionDoubleClick(h,e)},onParameterClick:function(e){return o.props.onParameterClick(h,e)},onEventClick:function(){return o.props.onEventClick({eventsList:t.eventsList,event:n,indexInList:t.indexInList})},onEndEditingEvent:function(){return o.props.onEndEditingEvent(n)},onEventContextMenu:function(e,r){return o.props.onEventContextMenu(e,r,{eventsList:t.eventsList,event:n,indexInList:t.indexInList})},onInstructionContextMenu:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.props).onInstructionContextMenu.apply(e,[h].concat(n))},onAddInstructionContextMenu:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.props).onAddInstructionContextMenu.apply(e,[h].concat(n))},onOpenExternalEvents:o.props.onOpenExternalEvents,onOpenLayout:function(e){o.props.onOpenLayout(e)},disabled:a,renderObjectThumbnail:o._renderObjectThumbnail,screenType:o.props.screenType,eventsSheetHeight:o.props.eventsSheetHeight,connectDragSource:s,windowWidth:o.props.windowWidth,idPrefix:"event-".concat(t.relativeNodePath.join("-"))},n.ptr),o.state.draggedNode&&(0,f.jsx)(Tf,{node:t,draggedNode:o.state.draggedNode,draggedNodeHeight:o._getRowHeight({node:o.state.draggedNode}),DnDComponent:c,onDrop:o._onDrop,activateTargets:!u&&!!o.state.draggedNode,windowWidth:o.props.windowWidth,getNodeAtPath:function(e){return(0,kl.PC)({path:e,treeData:o.state.treeData,getNodeKey:Rf}).node}})]}));return u?g:l(g)}})},o._isNodeHighlighted=function(e){var t=e.node,n=e.searchQuery;if(!n)return!1;var r=t.event;return!!r&&n.find((function(e){return Pf.compare(e,r)}))},o._scrollUp=function(){o._list&&o._list.container.scrollBy({top:-5})},o._scrollDown=function(){o._list&&o._list.container.scrollBy({top:5})},o.temporaryUnfoldedNodes=[],o.eventsHeightsCache=new lf((0,ct.Z)(o)),o.state=(0,i.Z)((0,i.Z)({},o._eventsToTreeData(e.events)),{},{draggedNode:null,isScrolledTop:!0,isScrolledBottom:!1}),o}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this.onHeightsChanged()}},{key:"componentDidUpdate",value:function(e){var t=this.props.preferences.values.hiddenTutorialHints,n=e.preferences.values.hiddenTutorialHints;t["intro-event-system"]!==n["intro-event-system"]&&this.setState((0,i.Z)((0,i.Z)({},this.state),{},{treeData:this.state.treeData.filter((function(e){return"eventstree-tutorial-node"!==e.key}))}))}},{key:"componentWillUnmount",value:function(){this._hoverTimerId&&clearTimeout(this._hoverTimerId)}},{key:"onHeightsChanged",value:function(e){var t=this;this.forceUpdate((function(){t._list&&t._list.wrappedInstance.current&&t._list.wrappedInstance.current.recomputeRowHeights(),e&&e()}))}},{key:"forceEventsUpdate",value:function(e){var t=this;this.setState(this._eventsToTreeData(this.props.events),(function(){t._list&&t._list.wrappedInstance.current&&t._list.wrappedInstance.current.recomputeRowHeights(),e&&e()}))}},{key:"scrollToRow",value:function(e){if(-1!==e){var t=this._list;if(t){var n=t.wrappedInstance.current;n&&n.scrollToRow(e)}}}},{key:"unfoldForEvent",value:function(e){Pf.EventsListUnfolder.unfoldWhenContaining(this.props.events,e),this.forceEventsUpdate()}},{key:"foldAll",value:function(){Pf.EventsListUnfolder.foldAll(this.props.events),this.forceEventsUpdate()}},{key:"unfoldToLevel",value:function(e){Pf.EventsListUnfolder.unfoldToLevel(this.props.events,e),this.forceEventsUpdate()}},{key:"getEventRow",value:function(e){return Zl()(this.state.flatData,(function(t){return t.ptr===e.ptr}))}},{key:"getEventContextAtRowIndexes",value:function(e){var t=(0,kl.Pg)({treeData:this.state.treeData,getNodeKey:Rf,ignoreCollapsed:!0});return e.map((function(e){if(!t[e])return null;var n=t[e].node,r=n.event,o=n.eventsList,i=n.indexInList;return r?{event:r,eventsList:o,indexInList:i}:null})).filter(Boolean)}},{key:"render",value:function(){var e=this,t=this.state.treeData?(0,j.Z)(this.state.treeData):null,n=this.props.fontSize||14;return(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},Af.container),{},{fontSize:"".concat(n,"px"),"--icon-size":"".concat(Math.round(1.14*n),"px"),"--instruction-missing-parameter-min-height":"".concat(Math.round(1.1*n),"px"),"--instruction-missing-parameter-min-width":"".concat(Math.round(3*n),"px")}),children:["touch"!==this.props.screenType&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ef,{DnDComponent:this.DropTarget,direction:"top",activateTargets:!!this.state.draggedNode&&!this.state.isScrolledTop,onHover:this._scrollUp}),(0,f.jsx)(Ef,{DnDComponent:this.DropTarget,direction:"bottom",activateTargets:!!this.state.draggedNode&&!this.state.isScrolledBottom,onHover:this._scrollDown})]}),(0,f.jsx)(Ff,{treeData:t,scaffoldBlockPxWidth:Lf(this.props.windowWidth),onChange:Of,onVisibilityToggle:this._onVisibilityToggle,canDrag:!1,rowHeight:this._getRowHeight,searchMethod:this._isNodeHighlighted,searchQuery:this.props.searchResults,searchFocusOffset:this.props.searchFocusOffset,className:this.props.searchResults?"with-search-results":"",reactVirtualizedListProps:{ref:function(t){return e._list=t},onScroll:function(t){e.props.onScroll&&e.props.onScroll(),e.setState({isScrolledTop:0===t.scrollTop,isScrolledBottom:t.clientHeight+t.scrollTop>=t.scrollHeight})},scrollToAlignment:"center"},slideRegionSize:-10})]})}}]),n}(u.Component);Bf.defaultProps={selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]}};var _f=n.g.gd,Nf=function(e){var t=e.instructionType,n=e.isCondition,r=e.project;return t?n?_f.MetadataProvider.getConditionMetadata(r.getCurrentPlatform(),t):_f.MetadataProvider.getActionMetadata(r.getCurrentPlatform(),t):null},Uf=function(e,t){return e.find((function(e){return e.type===t}))},Hf=function(e){var t=e.instruction,n=e.isCondition,r=(e.project,e.isNewInstruction),o=e.scope,s=e.globalObjectsContainer,l=e.objectsContainer,c=function(e,r){var i=Uu(hu(n,s,l,e),o);t.getType()&&r&&(Uf(i,t.getType())||t.setType(""));return{chosenObjectName:e,chosenObjectInstructionsInfo:i,chosenObjectInstructionsInfoTree:Su(i)}},d=u.useState((function(){if(!r){var e=pu(n),o=t.getType(),i=Uf(e,o);if(i&&(i.scope.objectMetadata||i.scope.behaviorMetadata)){var a=mu(i.metadata);if(-1!==a)return c(t.getParameter(a).getPlainString(),!1)}}return{chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null}})),p=(0,a.Z)(d,2),h=p[0],f=p[1];return[h,{chooseInstruction:function(e){t.setType(e);return f({chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null}),(0,i.Z)({instruction:t},{chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null})},chooseObject:function(e){var n=c(e,!0);return f(n),(0,i.Z)({instruction:t},n)},chooseObjectInstruction:function(e){if(t.setType(e),h.chosenObjectName){var n=c(h.chosenObjectName,!0);return f(n),(0,i.Z)({instruction:t},n)}return(0,i.Z)({instruction:t},h)}}]},Vf=n(44397),Wf=n.g.gd,zf=function(e,t,n,r,o){if(n.setParametersCount(r.getParametersCount()),o){var i=mu(r);if(-1!==i){n.setParameter(i,o);var a=i+1;if(a<r.getParametersCount()){var s=r.getParameter(a);if(!Wf.ParameterMetadata.isBehavior(s.getType()))return;var l=s.getExtraInfo(),c=Wf.getBehaviorsOfObject(e,t,o,!0).toJSArray().filter((function(n){return!l||Wf.getTypeOfBehavior(e,t,n,!1)===l}));if(c.length>0){var u=n.getParameter(a).getPlainString();c.some((function(e){return u===e}))||n.setParameter(a,c[0])}}}else console.error('Instruction "'.concat(r.getFullName(),'" is used for an object, but does not have an object as first parameter'))}},Gf=n.g.gd,Yf={emptyContainer:{display:"flex",alignItems:"center",justifyContent:"center"},parametersContainer:{flex:1},icon:{width:24,height:24,marginRight:8,paddingTop:6,flexShrink:0},invertToggle:{marginTop:8},description:{whiteSpace:"pre-wrap"}},qf=function(e,t,n){return!e.isCodeOnly()&&t!==n},Xf=u.forwardRef((function(e,t){var n=e.instruction,r=e.project,o=e.globalObjectsContainer,s=e.objectsContainer,l=e.noHelpButton,d=e.objectName,p=e.isCondition,h=e.scope,g=e.focusOnMount,x=e.style,v=e.openInstructionOrExpression,b=e.resourceManagementProps,j=u.useRef(null),y=u.useState(!1),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=u.useContext(m.Z).palette.type,E=(0,_t.Z)(),S=u.useCallback((function(e){0!==P(Nf({instructionType:n.getType(),isCondition:p,project:r}),d)&&j.current&&j.current.focus&&j.current.focus(e)}),[r,d,n,p]);u.useImperativeHandle(t,(function(){return{focus:S}}));var P=function(e,t){if(!e)return 0;var n=t?mu(e):-1;return(0,Nt.mapFor)(0,e.getParametersCount(),(function(t){if(!e)return!1;var r=e.getParameter(t);return qf(r,t,n)})).filter((function(e){return e})).length};u.useEffect((function(){if(g){var e=setTimeout((function(){S()}),300);return function(){return clearTimeout(e)}}}),[S,g]);var I=n.getType(),D=Nf({instructionType:I,isCondition:p,project:r});if(!D)return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},Yf.emptyContainer),x)});var A=D.getHelpPath(),M=(0,Vf.zZ)(I),O=(0,bo.cT)(I),R=d?mu(D):-1;zf(o,s,n,D,d);var B=D.getIconFilename(),N="dark"===T&&(B.startsWith("data:image/svg+xml")||B.includes("_black")),U=0;return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(Ot.Z,{autoHideScrollbar:!0,children:(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsxs)(L.x1,{alignItems:"flex-start",children:[(0,f.jsx)("img",{src:D.getIconFilename(),alt:"",style:(0,i.Z)((0,i.Z)({},Yf.icon),{},{filter:N?"grayscale(1) invert(1)":void 0})}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(J.Z,{style:Yf.description,children:D.getDescription()})})]}),M&&(0,f.jsx)(L.x1,{children:void 0===M.identifier?(0,f.jsx)(we.Z,{kind:M.kind,children:t._(M.message)}):(0,f.jsx)(re.Z,{kind:M.kind,identifier:M.identifier,children:t._(M.message)})}),O.length?(0,f.jsx)(L.x1,{children:(0,f.jsx)(C.ak,{expand:!0,children:O.map((function(e){return(0,f.jsx)(xo.Z,{tutorialId:e},e)}))})}):null,(0,f.jsx)(L.LZ,{}),(0,f.jsxs)("div",{style:Yf.parametersContainer,id:"instruction-parameters-container",children:[(0,f.jsx)(C.ak,{noMargin:!0,children:(0,Nt.mapFor)(0,D.getParametersCount(),(function(e){var t=D.getParameter(e);if(!qf(t,e,R))return null;var i=t.getType(),a=Gp.getParameterComponent(i),l=0===U;return U++,(0,f.jsx)(a,{instructionMetadata:D,instruction:n,parameterMetadata:t,parameterIndex:e,value:n.getParameter(e).getPlainString(),onChange:function(t){n.getParameter(e).getPlainString()!==t&&(n.setParameter(e,t),w(!0),E())},project:r,scope:h,globalObjectsContainer:o,objectsContainer:s,parameterRenderingService:Gp,resourceManagementProps:b,ref:function(e){l&&(j.current=e)}},e)}))}),0===P(D,d)&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"There is nothing to configure."})}),p&&(0,f.jsx)(H.Z,{label:(0,f.jsx)(c.Trans,{id:"Invert condition"}),labelPosition:"right",toggled:n.isInverted(),style:Yf.invertToggle,onToggle:function(e,t){n.setInverted(t),E()}}),D.isOptionallyAsync()&&(0,f.jsx)(H.Z,{label:(0,f.jsx)(c.Trans,{id:"Wait for the action to end before executing the actions (and subevents) following it"}),labelPosition:"right",toggled:n.isAwaited(),style:Yf.invertToggle,onToggle:function(e,t){n.setAwaited(t),E()}}),(0,Jp.xo)(D)&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(_.Z,{label:p?(0,f.jsx)(c.Trans,{id:"Edit this condition events"}):(0,f.jsx)(c.Trans,{id:"Edit this action events"}),onClick:function(){!function(e){if(k&&!F.ZP.showConfirmDialog(e._({id:"You've made some changes here. Are you sure you want to discard them and open the function?"})))return;var t=n.getType();if(!t)return null;var o=p?Gf.MetadataProvider.getExtensionAndConditionMetadata(r.getCurrentPlatform(),t).getExtension():Gf.MetadataProvider.getExtensionAndActionMetadata(r.getCurrentPlatform(),t).getExtension();v(o,t)}(t)},leftIcon:(0,f.jsx)(Pt.Z,{})},"open-extension")})]},I),(0,f.jsx)(L.x1,{children:!l&&A&&(0,f.jsx)(zn.Z,{helpPagePath:D.getHelpPath(),label:p?(0,f.jsx)(c.Trans,{id:"Help for this condition"}):(0,f.jsx)(c.Trans,{id:"Help for this action"})})})]})})}})})),Jf=Xf,Kf=n(31595),Qf=n.g.gd,$f=function(e){return Qf.JsPlatform.get().getInstructionOrExpressionGroupMetadata(e).getIcon()},eg=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchText:"",selectedObjectTags:[],searchResults:{objects:[],groups:[],instructions:[],tags:[]}},e._searchBar=u.createRef(),e._scrollView=u.createRef(),e._selectedItem=u.createRef(),e.freeInstructionsInfo=Uu(fu(e.props.isCondition,e.props.i18n),e.props.scope),e.freeInstructionsInfoTree=Su(e.freeInstructionsInfo),e.initialInstructionTypePath=Pu(e.freeInstructionsInfoTree,e.props.chosenInstructionType),e.instructionSearchApi=null,e.objectSearchApi=null,e.groupSearchApi=null,e.tagSearchApi=null,e.reEnumerateInstructions=function(t){e.freeInstructionsInfo=Uu(fu(e.props.isCondition,t),e.props.scope),e.freeInstructionsInfoTree=Su(e.freeInstructionsInfo),e.forceUpdate()},e.allInstructionsInfo=Uu(pu(e.props.isCondition),e.props.scope),e._search=function(t){if(""!==t){var n=(0,Ou.dr)(t);e.setState({searchResults:{objects:e.objectSearchApi?e.objectSearchApi.search(n).map((function(e){return{item:e.item,matches:(0,Ou.zi)(e,t)}})):[],groups:e.groupSearchApi?e.groupSearchApi.search(n).map((function(e){return{item:e.item,matches:(0,Ou.zi)(e,t)}})):[],instructions:e.instructionSearchApi?e.instructionSearchApi.search((0,Ou.G9)(t,["displayedName","fullGroupName"])).map((function(e){return{item:e.item,matches:(0,Ou.zi)(e,t)}})):[],tags:e.tagSearchApi?e.tagSearchApi.search(n).map((function(e){return{item:e.item,matches:(0,Ou.zi)(e,t)}})):[]}})}},e._selectTag=function(t){e.setState({selectedObjectTags:[].concat((0,j.Z)(e.state.selectedObjectTags),[t]),searchText:""}),e._searchBar.current&&e._searchBar.current.focus()},e._getAllObjectTags=function(){var t=e.props,n=t.globalObjectsContainer,r=t.objectsContainer,o=new Set;return Ec(n,r).allObjectsList.forEach((function(e){var t=e.object;(0,wc.zJ)(t.getTags()).forEach((function(e){return o.add(e)}))})),Array.from(o)},e._buildObjectTagsMenuTemplate=function(t){var n=e.state.selectedObjectTags;return(0,wc.it)({noTagLabel:t._({id:"No tags - add a tag to an object first"}),getAllTags:e._getAllObjectTags,selectedTags:n,onChange:function(t){e.setState({selectedObjectTags:t})}})},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this._selectedItem.current&&this._scrollView.current&&this._scrollView.current.scrollTo(this._selectedItem.current);var e=Lc(this.props.globalObjectsContainer,this.props.objectsContainer),t=e.allObjectsList,n=e.allGroupsList;this.instructionSearchApi=new Zu.Z(function(e){var t=!1;return e.filter((function(e){if("Create"===e.type){if(t)return!1;t=!0}return!0}))}(this.allInstructionsInfo),(0,i.Z)((0,i.Z)({},Ou.KE),{},{keys:[{name:"displayedName",weight:5},{name:"fullGroupName",weight:1}]})),this.objectSearchApi=new Zu.Z(t,(0,i.Z)((0,i.Z)({},Ou.KE),{},{getFn:function(e,t){return e.object.getName()},keys:["name"]})),this.groupSearchApi=new Zu.Z(n,(0,i.Z)((0,i.Z)({},Ou.KE),{},{getFn:function(e,t){return e.group.getName()},keys:["name"]})),this.tagSearchApi=new Zu.Z(this._getAllObjectTags(),(0,i.Z)({},Ou.KE))}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.globalObjectsContainer,o=t.objectsContainer,a=t.project,s=t.chosenInstructionType,l=t.onChooseInstruction,d=t.chosenObjectName,p=t.onChooseObject,h=t.isCondition,g=t.currentTab,m=t.onChangeTab,x=t.onSearchStartOrReset,v=t.onClickMore,b=this.state,j=b.searchText,y=b.selectedObjectTags,Z=b.searchResults,k=r!==a,w=Lc(r,o),T=w.allObjectsList,S=w.allGroupsList,P=!!j,I=[],D=[],A=[],M=[];P?(I=Z.objects,D=Z.groups,A=Z.instructions,M=Z.tags):(I=T.map((function(e){return{item:e,matches:[]}})),D=S.map((function(e){return{item:e,matches:[]}})));var F=I.filter((function(e){return Pc(e.item,y)})),O=A.slice(0,20),R=P?Math.max(A.length-20,0):0,B=!P||!!F.length||!!D.length||!!O.length||!!M.length,_=function(){P&&(F.length>0?p(F[0].item.object.getName()):D.length>0?p(D[0].item.group.getName()):M.length>0?e._selectTag(M[0].item):O.length>0&&l(O[0].item.type,O[0].item))};return(0,f.jsx)(c.I18n,{children:function(t){var r=t.i18n;return(0,f.jsxs)("div",{id:"instruction-or-object-selector",style:(0,i.Z)({minHeight:0},n),children:[(0,f.jsx)(pt.Z,{id:"search-bar",value:j,onChange:function(t){var n=e.state.searchText;t&&e._search(t),e.setState({searchText:t}),(!n&&t||n&&!t)&&x&&x()},onRequestSearch:_,buildMenuTemplate:function(){return e._buildObjectTagsMenuTemplate(r)},ref:e._searchBar,autoFocus:e.props.focusOnMount?"desktop":void 0,placeholder:h?{id:"Search objects or conditions"}:{id:"Search objects or actions"}}),!P&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(K.m,{value:g,onChange:m,options:[{label:(0,f.jsx)(c.Trans,{id:"Objects"}),value:"objects"},{label:h?(0,f.jsx)(c.Trans,{id:"Other conditions"}):(0,f.jsx)(c.Trans,{id:"Other actions"}),value:"free-instructions"}]})})}),(0,f.jsxs)(Ot.Z,{ref:e._scrollView,autoHideScrollbar:!0,children:[!P&&"objects"===g&&(0,f.jsx)(Kf.Z,{tags:y,onChange:function(t){return e.setState({selectedObjectTags:t})}}),B&&(0,f.jsxs)(Ge,{children:[(P||"objects"===g)&&(0,f.jsxs)(u.Fragment,{children:[F.map((function(e,t){var n=e.item,r=e.matches;return function(e){var t=e.project,n=e.objectWithContext,r=e.iconSize,o=e.onClick,i=e.selectedValue,a=e.matchesCoordinates,s=e.id,l=e.data,c=n.object.getName();return(0,f.jsx)(ze,{id:s,data:l,selected:i===Iu(c),primaryText:(0,f.jsx)(Ir,{text:c,matchesCoordinates:a}),leftIcon:(0,f.jsx)(Mc.Z,{iconSize:r,src:Oc.Z.getThumbnail(t,n.object.getConfiguration())}),onClick:o,disableAutoTranslate:!0},function(e){return"object-key-".concat(e.object.getName(),"-").concat(e.global?"-global":"")}(n))}({project:a,objectWithContext:n,iconSize:24,onClick:function(){return p(n.object.getName())},matchesCoordinates:r.length?r[0].indices:[],selectedValue:d?Iu(d):void 0,id:"object-item-"+t,data:{objectName:n.object.getName()}})})),D.length>0&&(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Object groups"})}),D.map((function(e){var t=e.item,n=e.matches;return function(e){var t=e.groupWithContext,n=e.iconSize,r=e.onClick,o=e.selectedValue,i=e.matchesCoordinates,a=t.group.getName();return(0,f.jsx)(ze,{selected:o===Iu(a),primaryText:(0,f.jsx)(Ir,{text:a,matchesCoordinates:i}),leftIcon:(0,f.jsx)(Mc.Z,{iconSize:n,src:"res/ribbon_default/objectsgroups64.png"}),onClick:r,disableAutoTranslate:!0},function(e){return"object-group-key-".concat(e.group.getName(),"-").concat(e.global?"-global":"")}(t))}({groupWithContext:t,iconSize:24,onClick:function(){return p(t.group.getName())},matchesCoordinates:n.length?n[0].indices:[],selectedValue:d?Iu(d):void 0})}))]}),P&&"objects"===g&&M.length>0&&(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Object tags"})}),"objects"===g&&M.map((function(t){var n=t.item;t.matches;return(0,f.jsx)(ze,{primaryText:(0,f.jsx)(Xi.Z,{label:n}),onClick:function(){e._selectTag(n)},disableAutoTranslate:!0},n)})),P&&O.length>0&&(0,f.jsx)(Mu.Z,{children:h?(0,f.jsx)(c.Trans,{id:"Conditions"}):(0,f.jsx)(c.Trans,{id:"Actions"})}),P&&O.map((function(e){var t=e.item,n=e.matches;return Au({instructionOrExpressionMetadata:t,iconSize:24,id:"instruction-item-".concat(t.type.replace(/:/g,"-")),onClick:function(){return l(t.type,t)},selectedValue:s?Du(s):void 0,matches:n})})),!P&&"free-instructions"===g&&(0,f.jsxs)(f.Fragment,{children:[Fu({instructionTreeNode:e.freeInstructionsInfoTree,onChoose:l,iconSize:24,useSubheaders:!0,selectedValue:s?Du(s):void 0,initiallyOpenedPath:e.initialInstructionTypePath,selectedItemRef:e._selectedItem,getGroupIconSrc:$f}),v&&(0,f.jsx)(C.ep,{justifyContent:"center",children:(0,f.jsx)(E.Z,{primary:!0,icon:(0,f.jsx)(Ue.Z,{}),onClick:v,label:h?(0,f.jsx)(c.Trans,{id:"Search for new conditions in extensions"}):(0,f.jsx)(c.Trans,{id:"Search for new actions in extensions"})})})]}),R>0&&(0,f.jsx)(ze,{primaryText:(0,f.jsx)(c.Trans,{id:"And {remainingResultsCount} more results.",values:{remainingResultsCount:R}}),disabled:!0,secondaryText:(0,f.jsx)(c.Trans,{id:"Refine your search with more specific keyword to see them."})})]}),!P&&"objects"===g&&!T.length&&(0,f.jsx)(Ke.Z,{children:k?(0,f.jsx)(c.Trans,{id:"There are no objects. Objects will appear if you add some as parameters."}):(0,f.jsx)(c.Trans,{id:"There is no object in your game or in this scene. Start by adding an new object in the scene editor, using the objects list."})}),!B&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Nothing corresponding to your search. Choose an object first or browse the list of actions/conditions."})})]})]})}},"tags")}}]),n}(u.PureComponent),tg={display:"flex"},ng=function(e){var t=e.columnsRenderer,n=e.getColumns,r=u.useContext(m.Z),o=n();return(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,children:o.map((function(e,n){var a=e.columnName,s=t[a],l=o[n].ratio||1;if(!s)return null;var c=0===n,u=n===o.length-1,d=c?0:l>1?4*(l+1):4,p=u?0:l>1?4*(l+1):4;return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},tg),{},{flex:l,paddingLeft:d,paddingRight:p,borderRight:u?void 0:"2px solid ".concat(r.dialog.separator)}),children:s()},a)}))})},rg=function(e,t,n){var r=e.getAllPlatformExtensions();return kc()((0,Nt.mapFor)(0,r.size(),(function(e){var t=r.at(e);return t.getBehaviorsTypes().toJSArray().map((function(e){return{behaviorType:e,behaviorMetadata:t.getBehaviorMetadata(e)}})).filter((function(e){return!e.behaviorMetadata.isPrivate()||n&&t.getName()===n.getName()})).map((function(e){var n=e.behaviorType,r=e.behaviorMetadata;return{extension:t,behaviorMetadata:r,type:n,defaultName:r.getDefaultName(),fullName:r.getFullName(),description:r.getDescription(),previewIconUrl:r.getIconFilename(),objectType:r.getObjectType(),category:t.getCategory(),tags:t.getTags().toJSArray()}}))})))},og=n(8162),ig=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"22",height:"22",viewBox:"-2 -2 20 20",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 7.99996C8.36818 7.99996 8.66666 8.29844 8.66666 8.66663V9.99996C8.66666 10.3681 8.36818 10.6666 7.99999 10.6666C7.6318 10.6666 7.33332 10.3681 7.33332 9.99996V8.66663C7.33332 8.29844 7.6318 7.99996 7.99999 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.99999 6.66663C8.36818 6.66663 8.66666 6.36815 8.66666 5.99996C8.66666 5.63177 8.36818 5.33329 7.99999 5.33329C7.6318 5.33329 7.33332 5.63177 7.33332 5.99996C7.33332 6.36815 7.6318 6.66663 7.99999 6.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05444 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05447 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"})]}))})),ag={button:{width:"100%"},container:{display:"flex",textAlign:"left",overflow:"hidden",width:"100%"}},sg=function(e){var t=e.id,n=e.objectType,r=e.objectBehaviorsTypes,o=e.behaviorShortHeader,a=e.matches,s=e.onChoose,l=e.onShowDetails,d=e.onHeightComputed,p=r.includes(o.type),h=o.objectType&&n!==o.objectType,g=u.useRef(null);u.useLayoutEffect((function(){g.current&&d(g.current.getBoundingClientRect().height)}));var m=function(e){var t=o[e];if(!a)return t;var n=a.filter((function(t){return t.key===e}));return 0===n.length?t:(0,f.jsx)(Ir,{text:t,matchesCoordinates:n[0].indices})},x=!p&&!h,v=u.useCallback((function(){x&&s()}),[x,s]),b=p||h||"community"===o.tier||o.isDeprecated||!1,j={paddingTop:o.authors||!1?10:b?6:4};return(0,f.jsx)(Zr.Z,{id:t,onClick:v,focusRipple:!0,style:ag.button,children:(0,f.jsx)("div",{style:x?ag.container:(0,i.Z)((0,i.Z)({},ag.container),{},{opacity:.384}),ref:g,children:(0,f.jsxs)(C.pJ,{children:[(0,f.jsx)("div",{style:j,children:(0,f.jsx)(kr.q,{alt:o.fullName,src:o.previewIconUrl,size:32})}),(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{noMargin:!0,allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:m("fullName")}),p&&(0,f.jsx)(le.Z,{size:"small",label:(0,f.jsx)(c.Trans,{id:"Already added"}),color:"secondary",variant:"outlined"}),h&&(0,f.jsx)(le.Z,{size:"small",label:(0,f.jsx)(c.Trans,{id:"Incompatible with the object"}),color:"secondary",variant:"outlined"}),"community"===o.tier&&(0,f.jsx)(le.Z,{size:"small",label:(0,f.jsx)(c.Trans,{id:"Community-made"}),color:"primary"}),o.isDeprecated&&(0,f.jsx)(le.Z,{size:"small",label:(0,f.jsx)(c.Trans,{id:"Deprecated"}),color:"primary"}),o.authors&&(0,f.jsx)(De.ZP,{title:o.authors.length>0?(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:{flexWrap:"wrap"},children:o.authors.map((function(e){return(0,f.jsx)(Sr,{user:e,variant:"outlined"},e.id)}))})}):"",children:(0,f.jsx)(A.Z,{size:"small",onClick:function(e){e.stopPropagation(),l()},children:(0,f.jsx)(ig,{})})})]}),(0,f.jsx)(J.Z,{noMargin:!0,size:"body2",allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:m("description")})]})]})})})},lg=function(e){return e.type},cg=function(e){var t=e.isInstalling,n=e.project,r=e.objectType,i=e.objectBehaviorsTypes,s=e.installedBehaviorMetadataList,c=e.deprecatedBehaviorMetadataList,d=e.onInstall,p=e.onChoose,h=u.useContext(X.ZP),g=u.useState(null),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useContext(og.y),y=b.filters,Z=b.searchResults,k=b.error,w=b.fetchBehaviors,T=b.filtersState,E=b.searchText,S=b.setSearchText,P=b.allCategories,I=b.chosenCategory,D=b.setChosenCategory,M=b.setInstalledBehaviorMetadataList,F=u.useState(!1),O=(0,a.Z)(F,2),R=O[0],B=O[1];u.useEffect((function(){M(R?[].concat((0,j.Z)(s),(0,j.Z)(c)):s)}),[c,s,M,R]),u.useEffect((function(){w()}),[w]);var _=Z||null,N=u.useMemo((function(){return{add:T.addFilter,remove:T.removeFilter,chosenTags:T.chosenFilters}}),[T]),H=u.useCallback((function(e){if(!Z)return[];var t=Z.find((function(t){return t.item.type===e.type}));return t?t.matches:[]}),[Z]),V=(0,Ct.Z)("intro-behaviors-and-functions").DismissableTutorialMessage,W=function(){var e=(0,ft.Z)().showConfirmation;return(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Extension update"},message:{id:"This behavior needs an extension update. You may have to do some adaptations to make sure your game still works.{0}Do you want to update it now ?",values:{0:"\n\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Cancel"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}(),z=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.extensionName&&n.hasEventsFunctionsExtensionNamed(t.extensionName))){e.next=7;break}return e.next=4,W();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:if(!t.url){e.next=15;break}return(0,Nr.ix)(t.name),e.next=11,d(t);case 11:e.sent&&p(t.type),e.next=16;break;case 15:p(t.type);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,p,W,d]);return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsxs)(zr,{value:I,onChange:function(e,t,n){D(n)},children:[(0,f.jsx)(U.Z,{value:"",label:{id:"All categories"}}),P.map((function(e){return(0,f.jsx)(U.Z,{value:e,label:e},e)}))]}),(0,f.jsxs)(L.x1,{expand:!0,noMargin:!0,children:[(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(pt.Z,{id:"extension-search-bar",value:E,onChange:S,onRequestSearch:function(){},tagsHandler:N,tags:y&&y.allTags,placeholder:{id:"Search behaviors"},autoFocus:"desktop"})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(e){return[{label:h.values.showCommunityExtensions?e._({id:"Hide community behaviors (not officially reviewed)"}):e._({id:"Show community behaviors (not officially reviewed)"}),click:function(){h.setShowCommunityExtensions(!h.values.showCommunityExtensions)}},{label:R?e._({id:"Hide deprecated behaviors (prefer not to use anymore)"}):e._({id:"Show deprecated behaviors (prefer not to use anymore)"}),click:function(){B(!R)}}]}},"menu")]})]}),V]}),(0,f.jsx)(yr,{disableAutoTranslate:!0,onRetry:w,error:k,searchItems:_&&_.map((function(e){return e.item})),getSearchItemUniqueId:lg,renderSearchItem:function(e,t){return(0,f.jsx)(sg,{id:"behavior-item-"+e.type.replace(/:/g,"-"),objectType:r,objectBehaviorsTypes:i,onHeightComputed:t,behaviorShortHeader:e,matches:H(e),onChoose:function(){z(e)},onShowDetails:function(){e.headerUrl&&v(e)}},e.type)}})]}),!!x&&(0,f.jsx)(_r,{project:n,isInstalling:t,extensionShortHeader:x,onClose:function(){return v(null)}})]})},ug=n.g.gd;function dg(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.open,i=e.onClose,s=e.onChoose,d=e.objectType,p=e.objectBehaviorsTypes,h=u.useState(!1),g=(0,a.Z)(h,2),m=g[0],x=g[1],v=u.useContext(qr.Z),b=u.useContext(ir.ZP),j=(0,ro.zi)(b,ro.Ch,Kr),C=u.useMemo((function(){return(0,Vf.du)()}),[]),y=u.useMemo((function(){var e=t.getCurrentPlatform();return(t&&e?rg(e,t,n):[]).map((function(e){return{type:e.type,fullName:e.fullName,description:e.description,previewIconUrl:e.previewIconUrl,objectType:e.objectType,category:e.category,tags:e.tags}}))}),[t,n]),Z=u.useMemo((function(){return y.filter((function(e){return!C[e.type]}))}),[y,C]),k=u.useMemo((function(){var e=y.filter((function(e){return C[e.type]}));return e.forEach((function(e){return e.isDeprecated=!0})),e}),[y,C]);if(!r||!t)return null;var w=(0,ro.zi)(b,ro.Ey,(function(e,n){C[n]&&(0,Xr.N0)(e._(C[n].warning));var r=ug.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),n);return s(n,r.getDefaultName())})),T=function(){var e=(0,o.Z)(l().mark((function e(n,r){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,j(n,t,v,r);case 4:return o=e.sent,e.abrupt("return",o);case 6:return e.prev=6,x(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Add a new behavior to the object"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:i},"close")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/behaviors"},"help")],open:!0,onRequestClose:i,flexBody:!0,fullHeight:!0,id:"new-behavior-dialog",children:(0,f.jsx)(cg,{project:t,objectType:d,objectBehaviorsTypes:p,isInstalling:m,onInstall:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(n,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChoose:function(e){return w(n,e)},installedBehaviorMetadataList:Z,deprecatedBehaviorMetadataList:k})})}})}var pg=n.g.gd,hg=function(e,t,n,r){if(function(e,t){return e.getAllBehaviorNames().toJSArray().filter((function(n){return e.getBehavior(n).getTypeName()===t})).length}(t,n)&&!F.ZP.showConfirmDialog("There is already a behavior of this type attached to the object. It's possible to add this behavior again, but it's unusual and may not always be supported properly. Are you sure you want to add this behavior again?"))return!1;var o=(0,Ut.Z)(r,(function(e){return t.hasBehaviorNamed(e)}));return pg.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors(e,t,n,o),!0},fg=function(e){return e.getAllBehaviorNames().toJSArray().map((function(t){return e.getBehavior(t).getTypeName()}))},gg={fullHeightSelector:{flex:1,display:"flex",flexDirection:"column"}};function mg(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,o=e.onCancel,i=e.open,s=e.instruction,l=e.isCondition,d=e.isNewInstruction,p=e.scope,h=e.onSubmit,g=e.resourceManagementProps,m=e.openInstructionOrExpression,x=(0,_t.Z)(),v=Hf({instruction:s,isCondition:l,project:t,isNewInstruction:d,scope:p,globalObjectsContainer:n,objectsContainer:r}),b=(0,a.Z)(v,2),j=b[0],C=b[1],y=j.chosenObjectName,Z=j.chosenObjectInstructionsInfo,k=j.chosenObjectInstructionsInfoTree,w=C.chooseInstruction,E=C.chooseObject,S=C.chooseObjectInstruction,P=!!Z&&!!k,I=y?Fc(t,p.layout,y):null,D=u.useRef(null),A=u.useState((function(){return function(e){return e?"object-or-free-instructions":"parameters"}(d)})),L=(0,a.Z)(A,2),M=L[0],F=L[1],O=u.useState((function(){return function(e,t){return e||t?"objects":"free-instructions"}(d,P)})),R=(0,a.Z)(O,2),B=R[0],N=R[1],U=(0,T.L)(),H="small"===U,W="medium"===U,z="large"===U||"xlarge"===U,G=s.getType(),Y=u.useState(!1),q=(0,a.Z)(Y,2),X=q[0],J=q[1],K=u.useState(!1),Q=(0,a.Z)(K,2),$=Q[0],ee=Q[1],te=(0,eo.bX)(),ne=u.useRef(null);u.useEffect((function(){te&&"parameters"===M&&ne.current&&ne.current.focus()}),[M,te]);var re=Nf({instructionType:G,isCondition:l,project:t}),oe=re?re.getHelpPath():void 0;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(V.ZP,{title:l?(0,f.jsx)(c.Trans,{id:"Condition"}):(0,f.jsx)(c.Trans,{id:"Action"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:o},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Ok"}),primary:!0,disabled:!G,onClick:h,id:"ok-button"},"ok")],secondaryActions:[(H||W)&&"object-or-free-instructions"!==M?(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Back"}),primary:!1,onClick:function(){F("parameters"===M&&y?W?"object-or-free-instructions":"object-instructions":"object-or-free-instructions")}},"back"):null,(0,f.jsx)(zn.Z,{helpPagePath:oe||"/events",label:!oe||H||"object-or-free-instructions"===M?(0,f.jsx)(c.Trans,{id:"Help"}):l?(0,f.jsx)(c.Trans,{id:"Help for this condition"}):(0,f.jsx)(c.Trans,{id:"Help for this action"})},"help")],open:i,onRequestClose:o,onApply:G?h:null,maxWidth:!1,flexBody:!0,fullHeight:!0,id:"instruction-editor-dialog",children:(0,f.jsx)(ng,{columnsRenderer:{"instruction-or-object-selector":function(){return(0,f.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,f.jsx)(eg,{style:gg.fullHeightSelector,project:t,scope:p,ref:D,currentTab:B,onChangeTab:N,globalObjectsContainer:n,objectsContainer:r,isCondition:l,chosenInstructionType:y?void 0:G,onChooseInstruction:function(e){w(e),F("parameters")},chosenObjectName:y,onChooseObject:function(e){E(e),F("object-instructions")},focusOnMount:te&&!G,onSearchStartOrReset:x,onClickMore:function(){return ee(!0)},i18n:o},"instruction-or-object-selector")}})},"object-instruction-selector":function(){return k&&Z?(0,f.jsx)(_u,{style:gg.fullHeightSelector,instructionsInfo:Z,instructionsInfoTree:k,iconSize:24,onChoose:function(e){S(e),F("parameters")},selectedType:G,useSubheaders:!0,focusOnMount:te&&!G,searchPlaceholderObjectName:y,searchPlaceholderIsCondition:l,onClickMore:function(){return J(!0)},id:"object-instruction-selector"},"object-instruction-selector"):null},parameters:function(){return(0,f.jsx)(Jf,{project:t,scope:p,globalObjectsContainer:n,objectsContainer:r,objectName:y,isCondition:l,instruction:s,resourceManagementProps:g,openInstructionOrExpression:m,ref:ne,focusOnMount:te&&!!G,noHelpButton:!0},"parameters")}},getColumns:function(){return z?[{columnName:"instruction-or-object-selector"},y?{columnName:"object-instruction-selector"}:null,{columnName:"parameters",ratio:y?1:2}].filter(Boolean):W?"object-or-free-instructions"===M?[{columnName:"instruction-or-object-selector",ratio:1}]:[y?{columnName:"object-instruction-selector"}:null,{columnName:"parameters"}].filter(Boolean):"object-or-free-instructions"===M?[{columnName:"instruction-or-object-selector"}]:"object-instructions"===M?[{columnName:"object-instruction-selector"}]:[{columnName:"parameters"}]}})}),X&&I&&(0,f.jsx)(dg,{project:t,eventsFunctionsExtension:p.eventsFunctionsExtension,open:X,objectType:I.getType(),objectBehaviorsTypes:fg(I),onClose:function(){return J(!1)},onChoose:function(e,n){I&&(hg(t,I,e,n)&&(J(!1),(0,Nr.qH)({behaviorType:e,parentEditor:"instruction-editor-dialog"})),E(I.getName()))}}),$&&(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(io,{project:t,onClose:function(){return ee(!1)},onInstallExtension:function(){},onExtensionInstalled:function(){return function(e){ee(!1),D.current&&D.current.reEnumerateInstructions(e)}(n)}})}})]})}var xg=n(64684),vg=n(42699),bg=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{children:(0,f.jsx)("path",{d:"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"})}))})),jg={fullHeightSelector:{flex:1,display:"flex",flexDirection:"column",height:"400px",width:"400px"}},Cg=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,o=e.onCancel,i=e.open,s=e.instruction,l=e.isCondition,d=e.isNewInstruction,p=e.anchorEl,h=e.scope,g=e.onSubmit,m=e.canPasteInstructions,x=e.onPasteInstructions,v=(0,_t.Z)(),b=Hf({instruction:s,isCondition:l,project:t,isNewInstruction:d,scope:h,globalObjectsContainer:n,objectsContainer:r}),j=(0,a.Z)(b,2),C=j[0],y=j[1],Z=C.chosenObjectName,k=C.chosenObjectInstructionsInfo,w=C.chosenObjectInstructionsInfoTree,T=y.chooseInstruction,E=y.chooseObject,S=y.chooseObjectInstruction,P=u.useState("object-or-free-instructions"),I=(0,a.Z)(P,2),D=I[0],A=I[1],M=u.useState("objects"),F=(0,a.Z)(M,2),O=F[0],R=F[1],B=s.getType(),_=function(e){var o=e.instruction,i=e.chosenObjectName,a=Nf({instructionType:o.getType(),isCondition:l,project:t});a&&zf(n,r,o,a,i),g()};return(0,f.jsx)(xg.ZP,{open:i,onClose:o,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,f.jsxs)(L.sg,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(ng,{columnsRenderer:{"instruction-or-object-selector":function(){return(0,f.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,f.jsx)(eg,{style:jg.fullHeightSelector,project:t,scope:h,currentTab:O,onChangeTab:R,globalObjectsContainer:n,objectsContainer:r,isCondition:l,chosenInstructionType:Z?void 0:B,onChooseInstruction:function(e){var t=T(e),n=t.instruction,r=t.chosenObjectName;_({instruction:n,chosenObjectName:r})},chosenObjectName:Z,onChooseObject:function(e){E(e),A("object-instructions")},focusOnMount:!B,onSearchStartOrReset:v,i18n:o},"instruction-or-object-selector")}})},"object-instruction-selector":function(){return w&&k?(0,f.jsx)(_u,{style:jg.fullHeightSelector,instructionsInfo:k,instructionsInfoTree:w,iconSize:24,onChoose:function(e){var t=S(e),n=t.instruction,r=t.chosenObjectName;_({instruction:n,chosenObjectName:r})},selectedType:B,useSubheaders:!0,focusOnMount:!B,searchPlaceholderObjectName:Z,searchPlaceholderIsCondition:l},"object-instruction-selector"):null}},getColumns:function(){return"object-or-free-instructions"===D?[{columnName:"instruction-or-object-selector"}]:[{columnName:"object-instruction-selector"}]}})}),(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(vg.Z,{label:l?(0,f.jsx)(c.Trans,{id:"Paste condition(s)"}):(0,f.jsx)(c.Trans,{id:"Paste action(s)"}),icon:(0,f.jsx)(bg,{}),disabled:!m,onClick:function(){return x()}})})]})})},yg=n(94854),Zg=n.g.gd,kg={sizeTextField:{width:90}},wg={r:255,g:255,b:255},Tg={r:0,g:0,b:0},Eg=function(e){return e.filter((function(e){return["BuiltinCommonInstructions::Group","BuiltinCommonInstructions::Comment"].includes(e.getType())}))},Sg=function(e){var t=e.event,n=e.onClose,r=u.useState(""),o=(0,a.Z)(r,2),i=o[0],s=o[1],l=u.useState(Tg),d=(0,a.Z)(l,2),p=d[0],h=d[1],g=u.useState(Tg),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=t.getType();u.useEffect((function(){if("BuiltinCommonInstructions::Comment"===b){var e=Zg.asCommentEvent(t);h({r:e.getTextColorRed(),g:e.getTextColorGreen(),b:e.getTextColorBlue()}),v({r:e.getBackgroundColorRed(),g:e.getBackgroundColorGreen(),b:e.getBackgroundColorBlue()}),s(Zg.asCommentEvent(t).getComment())}else if("BuiltinCommonInstructions::Group"===b){var n=Zg.asGroupEvent(t),r=n.getBackgroundColorR(),o=n.getBackgroundColorG(),i=n.getBackgroundColorB();h((function(){return(r+o+i)/3>200?Tg:wg})),v({r:n.getBackgroundColorR(),g:n.getBackgroundColorG(),b:n.getBackgroundColorB()}),s(Zg.asGroupEvent(t).getName())}else console.error("Dialog was opened for an unsupported event type: "+b)}),[t,b]);var j=u.useCallback((function(){"BuiltinCommonInstructions::Comment"===b?(Zg.asCommentEvent(t).setComment(i),Zg.asCommentEvent(t).setTextColor(p.r,p.g,p.b),Zg.asCommentEvent(t).setBackgroundColor(x.r,x.g,x.b)):"BuiltinCommonInstructions::Group"===b&&(Zg.asGroupEvent(t).setName(i),Zg.asGroupEvent(t).setBackgroundColor(x.r,x.g,x.b)),e.onApply()}),[e,t,b,i,p,x]);return(0,f.jsx)(V.ZP,{title:"BuiltinCommonInstructions::Comment"===b?(0,f.jsx)(c.Trans,{id:"Edit comment"}):(0,f.jsx)(c.Trans,{id:"Edit group"}),open:!0,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:n},"close"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:j},"Apply")],onRequestClose:n,onApply:j,children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsxs)(yg.Z,{noPadding:!0,children:[(0,f.jsx)(yg.c,{firstChild:!0,children:(0,f.jsx)(c.Trans,{id:"Background color:"})}),(0,f.jsx)(pp.Z,{style:kg.sizeTextField,disableAlpha:!0,color:x,onChangeComplete:function(e){v(e.rgb)}}),"BuiltinCommonInstructions::Comment"===b&&(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(yg.c,{children:(0,f.jsx)(c.Trans,{id:"Text color:"})}),(0,f.jsx)(pp.Z,{style:kg.sizeTextField,disableAlpha:!0,color:p,onChangeComplete:function(e){h(e.rgb)}})]})]}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,translatableHintText:{id:"Enter the text to be displayed"},fullWidth:!0,multiline:!0,rows:8,rowsMax:30,value:i,onChange:function(e){s(e)}})})})})]})})},Pg=function(){var e=u.useContext(m.Z);return(0,f.jsx)("span",{style:{height:32,marginLeft:3,marginRight:3,borderLeftStyle:"solid",borderLeftWidth:1,borderColor:e.toolbar.separatorColor}})},Ig=function(e){var t=e.onAddEvent;return(0,Eo.YZ)("ADD_STANDARD_EVENT",!0,{handler:e.onAddStandardEvent}),(0,Eo.YZ)("ADD_SUBEVENT",e.canAddSubEvent,{handler:e.onAddSubEvent}),(0,Eo.YZ)("ADD_COMMENT_EVENT",!0,{handler:e.onAddCommentEvent}),(0,Eo.YZ)("TOGGLE_EVENT_DISABLED",e.canToggleEventDisabled,{handler:e.onToggleDisabledEvent}),(0,Eo.YZ)("TOGGLE_CONDITION_INVERTED",e.canToggleInstructionInverted,{handler:e.onToggleInvertedCondition}),(0,Eo.gT)("CHOOSE_AND_ADD_EVENT",!0,{generateOptions:u.useCallback((function(){return e.allEventsMetadata.map((function(e){return{text:e.fullName,handler:function(){t(e.type)}}}))}),[e.allEventsMetadata,t])}),(0,Eo.YZ)("DELETE_SELECTION",e.canRemove,{handler:e.onRemove}),(0,Eo.YZ)("EVENTS_EDITOR_UNDO",e.canUndo,{handler:e.undo}),(0,Eo.YZ)("EVENTS_EDITOR_REDO",e.canRedo,{handler:e.redo}),(0,Eo.YZ)("SEARCH_EVENTS",!0,{handler:e.onToggleSearchPanel}),(0,Eo.YZ)("OPEN_EXTENSION_SETTINGS",!!e.onOpenSettings,{handler:e.onOpenSettings||function(){}}),null},Dg=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.86269 16.5425V16.5425L2.86268 13.9464C2.86272 12.9799 3.64619 12.1964 4.61266 12.1964H8.99999C9.4142 12.1964 9.74999 12.5322 9.74999 12.9464C9.74999 13.3606 9.4142 13.6964 8.99999 13.6964H4.61271V13.6964C4.47466 13.6964 4.3627 13.8083 4.36268 13.9464V13.9464L4.36269 16.5426C4.36269 16.6806 4.47462 16.7926 4.61266 16.7926L8 16.7926C8.41422 16.7926 8.75 17.1283 8.75 17.5426C8.75 17.9568 8.41422 18.2926 8 18.2926L4.61271 18.2926V18.2926C3.64623 18.2926 2.86268 17.509 2.86269 16.5425Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.6127 9.34224C3.6462 9.34228 2.86265 8.55873 2.86268 7.59222L2.86267 4.99606C2.86271 4.02959 3.64618 3.24608 4.61265 3.24605L16.7304 3.24605C16.7355 3.24576 16.741 3.24545 16.747 3.24515C16.7751 3.24371 16.8131 3.24223 16.8596 3.24151C16.9524 3.24005 17.0808 3.24156 17.2332 3.25267C17.5335 3.27457 17.9502 3.33538 18.3792 3.49966C18.8104 3.66478 19.2795 3.94472 19.64 4.41799C20.0062 4.89887 20.2171 5.52306 20.2171 6.29597C20.2171 7.06887 20.0062 7.69299 19.6398 8.17368C19.2791 8.64675 18.8097 8.92619 18.3784 9.09077C17.9493 9.25452 17.5325 9.31477 17.2322 9.33627C17.0797 9.34718 16.9514 9.34851 16.8586 9.34693C16.8121 9.34614 16.7741 9.34462 16.746 9.34314C16.7402 9.34284 16.7349 9.34254 16.7299 9.34225L4.6127 9.34224ZM16.8163 7.84477C16.7958 7.84309 16.7753 7.84225 16.7548 7.84225L4.61268 7.84224C4.47464 7.84225 4.36268 7.73032 4.36269 7.59228L4.36267 4.99608C4.36268 4.85801 4.47461 4.74607 4.61268 4.74605V4.74605L16.7548 4.74605C16.7751 4.74605 16.7953 4.74523 16.8155 4.74359L16.8128 4.74381L16.8235 4.74319C16.8352 4.7426 16.8555 4.74176 16.8831 4.74132C16.9386 4.74045 17.0222 4.74127 17.1241 4.7487C17.3323 4.76388 17.5937 4.80508 17.8428 4.90046C18.0896 4.99501 18.2986 5.13239 18.4467 5.32685C18.589 5.51369 18.7171 5.80762 18.7171 6.29597C18.7171 6.78434 18.589 7.07788 18.4469 7.26423C18.299 7.4582 18.0903 7.59518 17.8436 7.68934C17.5946 7.78435 17.3333 7.82519 17.1251 7.8401C17.0232 7.84739 16.9396 7.84809 16.8841 7.84715C16.8565 7.84668 16.8362 7.84581 16.8245 7.8452L16.8138 7.84457V7.84457M16.8138 7.84457L16.8163 7.84477Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M13 16.75C13 16.3358 13.3358 16 13.75 16H15V14.75C15 14.3358 15.3358 14 15.75 14C16.1642 14 16.5 14.3358 16.5 14.75V16H17.75C18.1642 16 18.5 16.3358 18.5 16.75C18.5 17.1642 18.1642 17.5 17.75 17.5H16.5V18.75C16.5 19.1642 16.1642 19.5 15.75 19.5C15.3358 19.5 15 19.1642 15 18.75V17.5H13.75C13.3358 17.5 13 17.1642 13 16.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 16.75C10 13.5744 12.5744 11 15.75 11C18.9257 11 21.5 13.5744 21.5 16.75C21.5 19.9257 18.9257 22.5 15.75 22.5C12.5744 22.5 10 19.9257 10 16.75ZM15.75 12.5C13.4028 12.5 11.5 14.4028 11.5 16.75C11.5 19.0972 13.4028 21 15.75 21C18.0972 21 20 19.0972 20 16.75C20 14.4028 18.0972 12.5 15.75 12.5Z",fill:"currentColor"})]}))})),Ag=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.86268 16.5425V16.5425L6.86267 13.9464C6.86271 12.9799 7.64618 12.1964 8.61265 12.1964H9.99998C10.4142 12.1964 10.75 12.5321 10.75 12.9464C10.75 13.3606 10.4142 13.6964 9.99998 13.6964H8.6127V13.6964C8.47465 13.6964 8.36269 13.8083 8.36267 13.9464V13.9464L8.36268 16.5426C8.36268 16.6806 8.47461 16.7926 8.61265 16.7926H8.99999C9.41421 16.7926 9.74999 17.1283 9.74999 17.5426C9.74999 17.9568 9.4142 18.2926 8.99999 18.2926H8.6127V18.2926C7.64622 18.2926 6.86267 17.509 6.86268 16.5425Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.6127 9.34224C4.6462 9.34228 3.86265 8.55873 3.86268 7.59222L3.86267 4.99606C3.86271 4.02959 4.64618 3.24608 5.61265 3.24605L17.7304 3.24605C17.7355 3.24576 17.741 3.24545 17.747 3.24515C17.7751 3.24371 17.8131 3.24223 17.8596 3.24151C17.9524 3.24005 18.0808 3.24156 18.2332 3.25267C18.5335 3.27457 18.9502 3.33538 19.3792 3.49966C19.8104 3.66478 20.2795 3.94472 20.64 4.41799C21.0062 4.89887 21.2171 5.52306 21.2171 6.29597C21.2171 7.06887 21.0062 7.69299 20.6398 8.17368C20.2791 8.64675 19.8097 8.92619 19.3784 9.09077C18.9493 9.25452 18.5325 9.31477 18.2322 9.33627C18.0797 9.34718 17.9514 9.34851 17.8586 9.34693C17.8121 9.34614 17.7741 9.34462 17.746 9.34314C17.7402 9.34284 17.7349 9.34254 17.7299 9.34225L5.6127 9.34224ZM17.8163 7.84477C17.7958 7.84309 17.7753 7.84225 17.7548 7.84225L5.61268 7.84224C5.47464 7.84225 5.36268 7.73032 5.36269 7.59228L5.36267 4.99608C5.36268 4.85801 5.47461 4.74607 5.61268 4.74605V4.74605L17.7548 4.74605C17.7751 4.74605 17.7953 4.74523 17.8155 4.74359L17.8128 4.74381L17.8235 4.74319C17.8352 4.7426 17.8555 4.74176 17.8831 4.74132C17.9386 4.74045 18.0222 4.74127 18.1241 4.7487C18.3323 4.76388 18.5937 4.80508 18.8428 4.90046C19.0896 4.99501 19.2986 5.13239 19.4467 5.32685C19.589 5.51369 19.7171 5.80762 19.7171 6.29597C19.7171 6.78434 19.589 7.07788 19.4469 7.26423C19.299 7.4582 19.0903 7.59518 18.8436 7.68934C18.5946 7.78435 18.3333 7.82519 18.1251 7.8401C18.0232 7.84739 17.9396 7.84809 17.8841 7.84715C17.8565 7.84668 17.8362 7.84581 17.8245 7.8452L17.8138 7.84457V7.84457M17.8138 7.84457L17.8163 7.84477Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.75 12.5C14.4028 12.5 12.5 14.4028 12.5 16.75C12.5 19.0972 14.4028 21 16.75 21C19.0972 21 21 19.0972 21 16.75C21 14.4028 19.0972 12.5 16.75 12.5ZM11 16.75C11 13.5744 13.5744 11 16.75 11C19.9257 11 22.5 13.5744 22.5 16.75C22.5 19.9257 19.9257 22.5 16.75 22.5C13.5744 22.5 11 19.9257 11 16.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 16.75C14 16.3358 14.3358 16 14.75 16H18.75C19.1642 16 19.5 16.3358 19.5 16.75C19.5 17.1642 19.1642 17.5 18.75 17.5H14.75C14.3358 17.5 14 17.1642 14 16.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.75 14C17.1642 14 17.5 14.3358 17.5 14.75V18.75C17.5 19.1642 17.1642 19.5 16.75 19.5C16.3358 19.5 16 19.1642 16 18.75V14.75C16 14.3358 16.3358 14 16.75 14Z",fill:"currentColor"})]}))})),Lg=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 5.5C6.05964 5.5 5.5 6.05964 5.5 6.75V14.25C5.5 14.9404 6.05964 15.5 6.75 15.5H9.375C9.59127 15.5 9.79702 15.5934 9.93943 15.7561L12 18.1111L14.0606 15.7561C14.203 15.5934 14.4087 15.5 14.625 15.5H17.25C17.9404 15.5 18.5 14.9404 18.5 14.25V6.75C18.5 6.05964 17.9404 5.5 17.25 5.5H6.75ZM4 6.75C4 5.23122 5.23122 4 6.75 4H17.25C18.7688 4 20 5.23122 20 6.75V14.25C20 15.7688 18.7688 17 17.25 17H14.9653L12.5644 19.7439C12.422 19.9066 12.2163 20 12 20C11.7837 20 11.578 19.9066 11.4356 19.7439L9.03467 17H6.75C5.23122 17 4 15.7688 4 14.25V6.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11C8 10.4478 8.44769 10 9 10C9.55231 10 10 10.4478 10 11C10 11.5522 9.55231 12 9 12C8.44769 12 8 11.5522 8 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11C11 10.4478 11.4478 10 12 10C12.5522 10 13 10.4478 13 11C13 11.5522 12.5522 12 12 12C11.4478 12 11 11.5522 11 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 11C14 10.4478 14.4478 10 15 10C15.5522 10 16 10.4478 16 11C16 11.5522 15.5522 12 15 12C14.4478 12 14 11.5522 14 11Z",fill:"currentColor"})]}))})),Mg=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5C8.41015 5.5 5.5 8.41015 5.5 12C5.5 15.5899 8.41015 18.5 12 18.5C15.5899 18.5 18.5 15.5899 18.5 12C18.5 8.41015 15.5899 5.5 12 5.5ZM4 12C4 7.58173 7.58173 4 12 4C16.4183 4 20 7.58173 20 12C20 16.4183 16.4183 20 12 20C7.58173 20 4 16.4183 4 12Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.00003C12.4142 8.00003 12.75 8.33582 12.75 8.75003V15.25C12.75 15.6642 12.4142 16 12 16C11.5858 16 11.25 15.6642 11.25 15.25V8.75003C11.25 8.33582 11.5858 8.00003 12 8.00003Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.5858 8.33579 11.25 8.75 11.25H15.25C15.6642 11.25 16 11.5858 16 12C16 12.4142 15.6642 12.75 15.25 12.75H8.75C8.33579 12.75 8 12.4142 8 12Z",fill:"currentColor"})]}))})),Fg=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 5.5C7.96243 5.5 5.5 7.96243 5.5 11C5.5 14.0376 7.96243 16.5 11 16.5C14.0376 16.5 16.5 14.0376 16.5 11C16.5 7.96243 14.0376 5.5 11 5.5ZM4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9697 14.9697C15.2626 14.6768 15.7374 14.6768 16.0303 14.9697L19.7803 18.7197C20.0732 19.0126 20.0732 19.4874 19.7803 19.7803C19.4874 20.0732 19.0126 20.0732 18.7197 19.7803L14.9697 16.0303C14.6768 15.7374 14.6768 15.2626 14.9697 14.9697Z",fill:"currentColor"})]}))})),Og=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75 5.5C5.05964 5.5 4.5 6.05964 4.5 6.75V17.25C4.5 17.9404 5.05964 18.5 5.75 18.5H16.25C16.9404 18.5 17.5 17.9404 17.5 17.25V16C17.5 15.5858 17.8358 15.25 18.25 15.25C18.6642 15.25 19 15.5858 19 16V17.25C19 18.7688 17.7688 20 16.25 20H5.75C4.23122 20 3 18.7688 3 17.25V6.75C3 5.23122 4.23122 4 5.75 4H16.25C16.7321 4 17.1874 4.12471 17.5829 4.3442C17.9451 4.54518 18.0758 5.00171 17.8748 5.3639C17.6738 5.72609 17.2173 5.85678 16.8551 5.6558C16.6765 5.55671 16.471 5.5 16.25 5.5H5.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 4.25C15.4142 4.25 15.75 4.58579 15.75 5V7C15.75 7.41421 15.4142 7.75 15 7.75C14.5858 7.75 14.25 7.41421 14.25 7V5C14.25 4.58579 14.5858 4.25 15 4.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 17.25C15.4142 17.25 15.75 17.5858 15.75 18V19C15.75 19.4142 15.4142 19.75 15 19.75C14.5858 19.75 14.25 19.4142 14.25 19V18C14.25 17.5858 14.5858 17.25 15 17.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 4.25C7.16421 4.25 7.5 4.58579 7.5 5V19C7.5 19.4142 7.16421 19.75 6.75 19.75C6.33579 19.75 6 19.4142 6 19V5C6 4.58579 6.33579 4.25 6.75 4.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 8.75C3.25 8.33579 3.58579 8 4 8H6.5C6.91421 8 7.25 8.33579 7.25 8.75C7.25 9.16421 6.91421 9.5 6.5 9.5H4C3.58579 9.5 3.25 9.16421 3.25 8.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H10C10.4142 11.25 10.75 11.5858 10.75 12C10.75 12.4142 10.4142 12.75 10 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 15.25C3.25 14.8358 3.58579 14.5 4 14.5H6.5C6.91421 14.5 7.25 14.8358 7.25 15.25C7.25 15.6642 6.91421 16 6.5 16H4C3.58579 16 3.25 15.6642 3.25 15.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.909 5.68137C19.4841 5.1062 20.4167 5.10621 20.9918 5.68139L22.3186 7.0082C22.8938 7.58335 22.8938 8.51584 22.3187 9.09099L15.6021 15.8076C15.5035 15.9062 15.3793 15.9754 15.2435 16.0073L12.1718 16.7301C11.9189 16.7896 11.6533 16.714 11.4697 16.5303C11.286 16.3467 11.2104 16.0811 11.2699 15.8282L11.9927 12.7565C12.0246 12.6207 12.0938 12.4965 12.1924 12.3979L18.909 5.68137C18.909 5.68137 18.909 5.68136 18.909 5.68137ZM19.9311 6.74203C19.9312 6.74204 19.9311 6.74202 19.9311 6.74203V6.74203ZM19.9504 6.76129L21.2387 8.0496L14.6923 14.596L13.0076 14.9924L13.404 13.3077L19.9504 6.76129Z",fill:"currentColor"})]}))})),Rg=function(e){var t=e.onAddStandardEvent,n=e.onAddSubEvent,r=e.canAddSubEvent,o=e.onAddCommentEvent,i=e.allEventsMetadata,a=e.onAddEvent,s=e.onToggleInvertedCondition,l=e.onToggleDisabledEvent,c=e.canToggleEventDisabled,u=e.canToggleInstructionInverted,d=e.onRemove,p=e.canRemove,h=e.undo,g=e.canUndo,m=e.redo,x=e.canRedo,v=e.onToggleSearchPanel,j=e.onOpenSettings,C=e.settingsIcon;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ig,{onAddCommentEvent:o,onAddSubEvent:n,canAddSubEvent:r,onAddStandardEvent:t,onAddEvent:a,allEventsMetadata:i,onToggleInvertedCondition:s,onToggleDisabledEvent:l,canToggleEventDisabled:c,canToggleInstructionInverted:u,onRemove:d,canRemove:p,undo:h,canUndo:g,redo:m,canRedo:x,onToggleSearchPanel:v,onOpenSettings:j}),(0,f.jsxs)(b,{lastChild:!0,children:[(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:t,id:"toolbar-add-event-button",tooltip:{id:"Add a new empty event"},children:(0,f.jsx)(Dg,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:n,disabled:!r,id:"toolbar-add-sub-event-button",tooltip:{id:"Add a sub-event to the selected event"},children:(0,f.jsx)(Ag,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:o,id:"toolbar-add-comment-button",tooltip:{id:"Add a comment"},children:(0,f.jsx)(Lg,{})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",color:"default",tooltip:{id:"Choose and add an event"},children:(0,f.jsx)(Mg,{})}),buildMenuTemplate:function(){return i.map((function(e){return{label:e.fullName,click:function(){a(e.type)}}}))}}),(0,f.jsx)(Pg,{}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:d,disabled:!p,tooltip:{id:"Delete the selected event(s)"},children:(0,f.jsx)(Dn.Z,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:h,disabled:!g,tooltip:{id:"Undo the last changes"},children:(0,f.jsx)(de,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:m,disabled:!x,tooltip:{id:"Redo the last changes"},children:(0,f.jsx)(In,{})}),(0,f.jsx)(Pg,{}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:function(){return v()},tooltip:{id:"Search in events"},acceleratorString:"CmdOrCtrl+F",children:(0,f.jsx)(Fg,{})}),j&&(0,f.jsx)(Pg,{}),j&&(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:j,tooltip:{id:"Open settings"},children:C||(0,f.jsx)(Og,{})})]})]})},Bg=n.g.gd,_g=function(e){var t=e.project,n=e.scope,r=e.globalObjectsContainer,o=e.objectsContainer,i=e.open,s=e.onRequestClose,l=e.onApply,c=e.onChange,d=e.instruction,p=e.isCondition,h=e.parameterIndex,g=e.anchorEl,m=e.resourceManagementProps,x=u.useState(null),v=(0,a.Z)(x,2),b=v[0],j=v[1],C=u.useState(null),y=(0,a.Z)(C,2),Z=y[0],k=y[1],w=u.useState(null),T=(0,a.Z)(w,2),E=T[0],S=T[1],P=u.useRef(null),I=function(){j(null),k(null),S(null)},D=u.useCallback((function(){if(!d)return I();var e=d.getType(),n=p?Bg.MetadataProvider.getConditionMetadata(t.getCurrentPlatform(),e):Bg.MetadataProvider.getActionMetadata(t.getCurrentPlatform(),e);if(h>=n.getParametersCount())return I();var r=n.getParameter(h),o=Gp.getParameterComponent(r.getType());S(o),j(r),k(n),setTimeout((function(){P.current&&P.current.focus({selectAll:!0})}),10)}),[d,p,h,t]);u.useEffect((function(){i&&d&&D()}),[i,d,D]);var A=u.useCallback((function(){if(d&&Z){var e=mu(Z);zf(r,o,d,Z,-1!==e?d.getParameter(e).getPlainString():null)}l()}),[d,Z,l,o,r]);return E&&i&&d&&b&&Z?(0,f.jsx)(Dh,{open:i,anchorEl:g,onRequestClose:s,onApply:A,children:(0,f.jsx)(E,{instruction:d,instructionMetadata:Z,parameterMetadata:b,parameterIndex:h,value:d.getParameter(h).getPlainString(),onChange:c,onRequestClose:s,onApply:A,project:t,scope:n,globalObjectsContainer:r,objectsContainer:o,ref:P,parameterRenderingService:Gp,isInline:!0,resourceManagementProps:m},d.ptr)}):null},Ng=n.g.gd,Ug=function(e){var t=e.getObjectNames().toNewVectorString().toJSArray(),n=e.getReferencedObjectOrGroupNames().toNewVectorString().toJSArray(),r={};return n.forEach((function(t){var n=e.getBehaviorNamesOfObjectOrGroup(t).toNewVectorString().toJSArray();n.length&&(r[t]=n)})),{objectsNames:t,objectOrGroupNames:n,objectOrGroupBehaviorNames:r}},Hg=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.eventsContextResult,r=[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:this.props.onClose},"close")];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Events analysis"}),actions:r,open:!0,onRequestClose:t,children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Objects or groups being directly referenced in the events: {0}",values:{0:n.objectOrGroupNames.join(", ")}})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"All objects potentially used in events: {0}",values:{0:n.objectsNames.join(", ")}})}),(0,f.jsxs)(J.Z,{children:[(0,f.jsx)(c.Trans,{id:"All behaviors being directly referenced in the events:"})," ",Object.keys(n.objectOrGroupBehaviorNames).map((function(e){return(0,f.jsx)(c.Trans,{id:"Behaviors of {objectOrGroupName}: {0} ;",values:{0:n.objectOrGroupBehaviorNames[e].join(", "),objectOrGroupName:e}},e)}))]})]})}}]),n}(u.Component),Vg=function(e,t){var n=e.onSearchInEvents,r=e.onReplaceInEvents,o=e.onCloseSearchPanel,i=e.resultsCount,s=e.hasEventSelected,l=e.onGoToPreviousSearchResult,d=e.onGoToNextSearchResult,p=e.searchFocusOffset,h="small"===(0,T.L)(),g=u.useRef(null),m=u.useRef(null),x=u.useState(""),v=(0,a.Z)(x,2),b=v[0],j=v[1],y=u.useState(""),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],S=u.useState(!1),P=(0,a.Z)(S,2),I=P[0],D=P[1],M=u.useState(!0),F=(0,a.Z)(M,2),O=F[0],R=F[1],B=u.useState(!0),N=(0,a.Z)(B,2),U=N[0],H=N[1],V=u.useState(!0),W=(0,a.Z)(V,2),z=W[0],G=W[1],Y=u.useState(!1),q=(0,a.Z)(Y,2),X=q[0],Q=(q[1],u.useState(!1)),$=(0,a.Z)(Q,2),ee=$[0],te=$[1],ne=u.useState("search-and-replace"),re=(0,a.Z)(ne,2),oe=re[0],ie=re[1],ae=u.useCallback((function(){return!!b&&!ee}),[b,ee]),se=(0,eo.bX)(),le=u.useCallback((function(){g.current&&g.current.focus()}),[]),ce=u.useCallback((function(){m.current&&m.current.focus()}),[]),ue=u.useCallback((function(){te(!0)}),[]);u.useImperativeHandle(t,(function(){return{isSearchOngoing:ae,focus:le,markSearchResultsDirty:ue}})),u.useEffect((function(){te(!0)}),[b,O,U,z,I]),u.useEffect((function(){se&&le()}),[oe,le,se]),u.useEffect(ue,[oe,ue]);var de=function(){r({searchInSelection:X,searchText:b,replaceText:k,matchCase:I,searchInActions:O,searchInConditions:U,searchInEventStrings:z})},pe=function(){ee&&(n({searchInSelection:X,searchText:b,matchCase:I,searchInActions:O,searchInConditions:U,searchInEventStrings:z,searchInEventSentences:!he()}),te(!1))},he=u.useCallback((function(){return"search-and-replace"===oe}),[oe]),fe=!b,ge=!b||!s&&X;return(0,f.jsx)(Sh,{noFullHeight:!0,noExpand:!0,children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,noOverflowParent:!0,children:(0,f.jsx)(K.m,{value:oe,onChange:ie,options:[{value:"search-and-replace",label:(0,f.jsx)(c.Trans,{id:"Search and replace in parameters"})},{value:"search-in-event-sentences",label:(0,f.jsx)(c.Trans,{id:"Search in event sentences"})}],variant:h?"scrollable":void 0})})}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsxs)(C.ak,{expand:!0,children:[(0,f.jsxs)(C.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,f.jsx)(po.ZP,{ref:g,margin:"dense",endAdornment:b?(0,f.jsx)(A.Z,{onClick:function(){j(""),se&&le()},edge:"end",children:(0,f.jsx)(bi.Z,{fontSize:"small"})}):null,translatableHintText:he()?{id:"Text to search in parameters"}:{id:"Text to search in event sentences"},onChange:function(e,t){j(t)},onKeyPress:function(e){(0,Io.Zq)(e)?l():(0,Io.ph)(e)&&(ee?fe||pe():d())},onKeyUp:function(e){(0,Io.W$)(e)&&o()},value:b,fullWidth:!0}),(0,f.jsx)(E.Z,{disabled:fe,primary:!0,label:(0,f.jsx)(c.Trans,{id:"Search"}),onClick:function(){ee?pe():d()}})]}),he()&&(0,f.jsxs)(C.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,f.jsx)(po.ZP,{margin:"dense",ref:m,endAdornment:k?(0,f.jsx)(A.Z,{onClick:function(){w(""),se&&ce()},edge:"end",children:(0,f.jsx)(bi.Z,{fontSize:"small"})}):null,translatableHintText:{id:"Text to replace in parameters"},onChange:function(e,t){w(t)},onKeyPress:function(e){(0,Io.ph)(e)&&(ge||de())},onKeyUp:function(e){(0,Io.W$)(e)&&o()},value:k,fullWidth:!0}),(0,f.jsx)(E.Z,{disabled:ge,label:(0,f.jsx)(c.Trans,{id:"Replace"}),onClick:de})]}),(0,f.jsxs)(C.ep,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(C.ep,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(al.Z,{label:(0,f.jsx)(c.Trans,{id:"Case insensitive"}),checked:!I,onCheck:function(e,t){D(!t)}}),!h&&(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Search in:"})}),(0,f.jsx)(al.Z,{label:(0,f.jsx)(c.Trans,{id:"Conditions"}),checked:U,onCheck:function(e,t){H(t)}})]}),(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(al.Z,{label:(0,f.jsx)(c.Trans,{id:"Actions"}),checked:O,onCheck:function(e,t){R(t)}}),(0,f.jsx)(al.Z,{label:(0,f.jsx)(c.Trans,{id:"Texts"}),checked:z,onCheck:function(e,t){G(t)}})]})]}),(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:[(0,f.jsx)(J.Z,{children:null===i||void 0===i?"":0===i?(0,f.jsx)(c.Trans,{id:"No results"}):null===p||void 0===p?(0,f.jsx)(c.Trans,{id:"{resultsCount} results",values:{resultsCount:i}}):(0,f.jsx)(c.Trans,{id:"Showing {0} of {resultsCount}",values:{0:p+1,resultsCount:i}})}),(0,f.jsx)(A.Z,{disabled:!i,onClick:function(){l()},children:(0,f.jsx)(Va,{})}),(0,f.jsx)(A.Z,{disabled:!i,onClick:function(){d()},children:(0,f.jsx)(It.Z,{})}),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:function(){o()}},"close")]})]})]})})]})})},Wg=u.forwardRef(Vg),zg=n(29118),Gg=n.n(zg),Yg=n.g.gd,qg=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={eventsSearchResults:null,searchFocusOffset:null},e._resultEvents=null,e.reset=function(){e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e._resultEvents=null,e.setState({eventsSearchResults:null,searchFocusOffset:null})},e._deduplicateEventSearchResults=function(e){var t=(0,Nt.mapFor)(0,e.size(),(function(t){var n=e.at(t);return n.isEventValid()?n.getEvent():null})).filter(Boolean);return Gg()(t,(function(e){return e.ptr}))},e._doReplaceInEvents=function(t,n){var r=t.searchInSelection,o=t.searchText,i=t.replaceText,a=t.matchCase,s=t.searchInConditions,l=t.searchInActions,c=t.searchInEventStrings,u=e.props,d=u.globalObjectsContainer,p=u.objectsContainer,h=u.events;r&&console.error("Replace in selection is not implemented yet");var f=Yg.EventsRefactorer.replaceStringInEvents(d,p,h,o,i,a,s,l,c);return e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e.setState({eventsSearchResults:f.clone(),searchFocusOffset:null},(function(){e._updateListOfResultEvents(),n()})),e._deduplicateEventSearchResults(f)},e._doSearchInEvents=function(t,n){var r=t.searchInSelection,o=t.searchText,i=t.matchCase,a=t.searchInConditions,s=t.searchInActions,l=t.searchInEventStrings,c=t.searchInEventSentences,u=e.props.events;r&&console.error("Search in selection is not implemented yet");var d=Yg.EventsRefactorer.searchInEvents(e.props.project.getCurrentPlatform(),u,o,i,a,s,l,c);e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e.setState({eventsSearchResults:d.clone(),searchFocusOffset:null},(function(){e._updateListOfResultEvents(),n()}))},e._updateListOfResultEvents=function(){var t=e.state.eventsSearchResults;e._resultEvents=t?e._deduplicateEventSearchResults(t):null},e._goToSearchResults=function(t){if(e._updateListOfResultEvents(),!e._resultEvents||0===e._resultEvents.length)return e.setState({searchFocusOffset:null}),null;var n=e.state.searchFocusOffset,r=null===n||void 0===n?function(e,t,n){var r=El(n);if(!r.length)return 0;var o=[r[0]].concat((0,j.Z)(t)),i=new Yg.EventsPositionFinder;o.forEach((function(e){return i.addEventToSearch(e)})),i.launch(e);var a=i.getPositions().toJSArray(),s=(0,Lu.Z)(a),l=s[0],c=s.slice(1);i.delete();for(var u=0;u<c.length;u++)if(c[u]>=l)return u;return 0}(e.props.events,e._resultEvents,e.props.selection):(n+t)%e._resultEvents.length;r<0&&(r+=e._resultEvents.length);var o=e._resultEvents[r];return setTimeout((function(){return e.setState({searchFocusOffset:r})}),0),o},e._goToPreviousSearchResult=function(){return e._goToSearchResults(-1)},e._goToNextSearchResult=function(){return e._goToSearchResults(1)},e}return(0,lt.Z)(n,[{key:"componentWillUnmount",value:function(){this.reset()}},{key:"render",value:function(){return this.props.children({eventsSearchResultEvents:this._resultEvents,searchFocusOffset:this.state.searchFocusOffset,searchInEvents:this._doSearchInEvents,replaceInEvents:this._doReplaceInEvents,goToNextSearchResult:this._goToNextSearchResult,goToPreviousSearchResult:this._goToPreviousSearchResult,clearSearchResults:this.reset})}}]),n}(u.Component),Xg=n.g.gd,Jg=function e(t,n){var r=t.getSubInstructions();if(Xg.compare(r,n))return!0;for(var o=0;o<r.size();++o){if(e(r.get(o),n))return!0}return!1},Kg=n.g.gd,Qg=function(e){return Kg.Project.isNameSafe(e)},$g=function(e){return Kg.Project.isNameSafe(e)},em=function(e,t){return!e.hasEventsFunctionsExtensionNamed(t)},tm=function(e,t,n){return!e.hasEventsFunctionsExtensionNamed(t)||!e.getEventsFunctionsExtension(t).hasEventsFunctionNamed(n.getName())},nm=function(e,t,n){return""!==t&&$g(t)&&""!==n.getName()&&Qg(n.getName())&&tm(e,t,n)&&""!==n.getFullName()&&""!==n.getSentence()},rm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={objectMetadata:Sc(e.props.project)},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.value,r=e.onChange,o=e.floatingLabelText,i=e.allowedObjectTypes,a=this.state.objectMetadata,s=function(e){return!!i&&-1===i.indexOf(e)};return(0,f.jsxs)(B.Z,{floatingLabelText:o||(0,f.jsx)(c.Trans,{id:"Object type"}),value:n,onChange:function(e,t,n){r(n)},disabled:t,fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"",label:{id:"Any object"},disabled:s("")}),a.map((function(e){return""===e.name?null:(0,f.jsx)(U.Z,{value:e.name,label:e.fullName,disabled:s(e.name)},e.name)}))]})}}]),n}(u.Component),om=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={behaviorMetadata:rg(e.props.project.getCurrentPlatform(),e.props.project,e.props.eventsFunctionsExtension)},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.objectType,r=e.value,o=e.onChange,i=this.state.behaviorMetadata,a=!!i.find((function(e){return e.type===r}));return(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Behavior type"}),value:r,onChange:function(e,t,n){o(n)},disabled:t,fullWidth:!0,children:[i.map((function(e){return(0,f.jsx)(U.Z,{value:e.type,label:e.fullName,disabled:""!==e.objectType&&e.objectType!==n},e.type)})),!a&&r&&(0,f.jsx)(U.Z,{value:r,label:r})]})}}]),n}(u.Component),im=function(e){var t=e.extraInfo,n=e.setExtraInfo,r=e.disabled,o=function(){return n(t)};return(0,f.jsx)(C.ep,{children:(0,f.jsxs)(L.sg,{justifyContent:"flex-end",expand:!0,noMargin:!0,children:[t.map((function(e,n){return(0,f.jsxs)(L.x1,{justifyContent:"flex-end",expand:!0,alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Dt.Z,{disabled:r,commitOnBlur:!0,value:e,onChange:function(e){t[n]=e,o()},fullWidth:!0}),(0,f.jsx)(Pe.Z,{disabled:r,tooltip:{id:"Delete option"},onClick:function(){t.splice(n,1),o()},children:(0,f.jsx)(Dn.Z,{})})]},n)})),(0,f.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(E.Z,{disabled:r,primary:!0,onClick:function(){t.push("New Option"),o()},label:(0,f.jsx)(c.Trans,{id:"Add a new option"}),icon:(0,f.jsx)(Ue.Z,{})})})]})})},am=function(e){var t=e.getExtraInfo(),n=[];try{""!==t&&(n=JSON.parse(t)),Array.isArray(n)||(n=[])}catch(r){console.error("Cannot parse parameter extraInfo: ",r)}return n},sm=function(e){return e.startsWith("object")?"object":"scene"},lm=function(e){return e.startsWith("object")?e.substring(6):e.substring(5)};function cm(e){var t=e.project,n=e.valueTypeMetadata,r=e.disabled,o=e.isTypeSelectorShown,i=e.onTypeUpdated,a=e.getLastObjectParameterObjectType,s=e.isExpressionType,l=(0,_t.Z)();return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[o&&(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Type"}),value:n.getName(),onChange:function(e,t,r){n.setName(r),n.setOptional(!1),n.setDefaultValue(""),l(),i()},disabled:r,fullWidth:!0,children:[!s&&(0,f.jsx)(U.Z,{value:"objectList",label:{id:"Objects"}}),!s&&(0,f.jsx)(U.Z,{value:"behavior",label:{id:"Behavior (for the previous object)"}}),(0,f.jsx)(U.Z,{value:"expression",label:{id:"Number"}}),(0,f.jsx)(U.Z,{value:"string",label:{id:"String (text)"}}),(0,f.jsx)(U.Z,{value:"stringWithSelector",label:{id:"String from a list of options (text)"}}),(0,f.jsx)(U.Z,{value:"key",label:{id:"Keyboard Key (text)"}}),(0,f.jsx)(U.Z,{value:"mouse",label:{id:"Mouse button (text)"}}),(0,f.jsx)(U.Z,{value:"color",label:{id:"Color (text)"}}),(0,f.jsx)(U.Z,{value:"layer",label:{id:"Layer (text)"}}),(0,f.jsx)(U.Z,{value:"sceneName",label:{id:"Scene name (text)"}}),!s&&(0,f.jsx)(U.Z,{value:"yesorno",label:{id:"Yes or No (boolean)"}}),!s&&(0,f.jsx)(U.Z,{value:"trueorfalse",label:{id:"True or False (boolean)"}}),(0,f.jsx)(U.Z,{value:"objectPointName",label:{id:"Object point (text)"}}),(0,f.jsx)(U.Z,{value:"objectAnimationName",label:{id:"Object animation (text)"}}),(0,f.jsx)(U.Z,{value:"identifier",label:{id:"Identifier (text)"}}),(0,f.jsx)(U.Z,{value:"scenevar",label:{id:"Scene variable"}}),!s&&(0,f.jsx)(U.Z,{value:"objectListOrEmptyIfJustDeclared",label:{id:"Created objects"}}),!s&&(0,f.jsx)(U.Z,{value:"imageResource",label:{id:"Image resource (JavaScript only)"}}),!s&&(0,f.jsx)(U.Z,{value:"audioResource",label:{id:"Audio resource (JavaScript only)"}}),!s&&(0,f.jsx)(U.Z,{value:"jsonResource",label:{id:"JSON resource (JavaScript only)"}}),!s&&(0,f.jsx)(U.Z,{value:"fontResource",label:{id:"Font resource (JavaScript only)"}}),!s&&(0,f.jsx)(U.Z,{value:"bitmapFontResource",label:{id:"Bitmap font resource (JavaScript only)"}})]}),n.isObject()&&(0,f.jsx)(rm,{project:t,value:n.getExtraInfo(),onChange:function(e){n.setExtraInfo(e),l(),i()},disabled:r}),n.isBehavior()&&(0,f.jsx)(om,{project:t,objectType:a(),value:n.getExtraInfo(),onChange:function(e){n.setExtraInfo(e),l(),i()},disabled:r}),"yesorno"===n.getName()&&(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),value:"yes"===n.getDefaultValue()?"yes":"no",onChange:function(e,t,r){n.setOptional(!0),n.setDefaultValue(r),l(),i()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"yes",label:{id:"Yes"}}),(0,f.jsx)(U.Z,{value:"no",label:{id:"No"}})]}),"trueorfalse"===n.getName()&&(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),value:"True"===n.getDefaultValue()?"True":"False",onChange:function(e,t,r){n.setOptional(!0),n.setDefaultValue(r),l(),i()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"True",label:{id:"True"}}),(0,f.jsx)(U.Z,{value:"False",label:{id:"False"}})]}),"identifier"===n.getName()&&(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Scope"}),value:sm(n.getExtraInfo()),onChange:function(e,t,r){var o=lm(n.getExtraInfo());n.setExtraInfo(r+o),l(),i()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"scene",label:{id:"Scene"}}),(0,f.jsx)(U.Z,{value:"object",label:{id:"Object"}})]}),"identifier"===n.getName()&&(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Identifier name"}),floatingLabelFixed:!0,value:lm(n.getExtraInfo()),onChange:function(e){var t=sm(n.getExtraInfo());n.setExtraInfo(t+e),l(),i()},fullWidth:!0})]}),"stringWithSelector"===n.getName()&&(0,f.jsx)(im,{disabled:r,extraInfo:am(n),setExtraInfo:function(e){n.setExtraInfo(JSON.stringify(e)),l(),i()}})]})}})}var um=n.g.gd,dm={parametersContainer:{flex:1}},pm=function(e){var t=e.project,n=e.eventsFunction,o=e.eventsBasedBehavior,s=e.eventsBasedObject,l=e.eventsFunctionsContainer,d=e.onParametersUpdated,p=e.helpPagePath,h=e.freezeParameters,g=e.onMoveFreeEventsParameter,m=e.onMoveBehaviorEventsParameter,x=e.onMoveObjectEventsParameter,v=u.useState({}),b=(0,a.Z)(v,2),j=b[0],y=b[1],Z=(0,_t.Z)(),k=u.useCallback((function(e){var t=n.getParameters(),r=(0,Nt.mapVector)(t,(function(e){return e.getName()})),o=new um.ParameterMetadata;o.setType("objectList");var i=(0,Ut.Z)("Parameter",(function(e){return r.includes(e)}));o.setName(i),t.insertIntoVectorParameterMetadata(e,o),o.delete(),Z(),d()}),[n,Z,d]),w=u.useCallback((function(){var e=n.getParameters();k(e.size())}),[k,n]),T=u.useCallback((function(e){var t=n.getParameters();um.removeFromVectorParameterMetadata(t,e),Z(),d()}),[n,Z,d]),S=u.useCallback((function(e){y((0,i.Z)((0,i.Z)({},j),{},(0,r.Z)({},e,!0)))}),[j]),P=u.useCallback((function(e){n.getParameters().at(e).setLongDescription(""),y((0,i.Z)((0,i.Z)({},j),{},(0,r.Z)({},e,!1)))}),[n,j]),I=u.useCallback((function(e,t){var r=n.getParameters();o?m&&m(o,n,e,t,(function(n){n&&(um.swapInVectorParameterMetadata(r,e,t),Z(),d())})):s?x&&x(s,n,e,t,(function(n){n&&(um.swapInVectorParameterMetadata(r,e,t),Z(),d())})):g&&g(n,e,t,(function(n){n&&(um.swapInVectorParameterMetadata(r,e,t),Z(),d())}))}),[o,s,n,Z,m,g,x,d]),D=l&&n.getFunctionType()===um.EventsFunction.ActionWithOperator?n.getParametersForEvents(l):n.getParameters(),M=o?2:s?1:0,F=function(e){return n.getFunctionType()===um.EventsFunction.ActionWithOperator||h||e<M},O=M,R=M+(n.getFunctionType()===um.EventsFunction.ActionWithOperator?1:0),B=u.useCallback((function(e){return e>=R}),[R]),_=u.useCallback((function(e,t){return B(t)&&(!!e.getLongDescription()||!!j[t])}),[B,j]),N=o?Jp.mK.BehaviorFunction:s?Jp.mK.ObjectFunction:Jp.mK.FreeFunction;return!!o&&um.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(n.getName())?(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine and has two parameters: "Object" (the object the behavior is acting on) and "Behavior" (the behavior itself).'})}):!o&&um.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(n.getName())?(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(re.Z,{kind:"info",identifier:"lifecycle-events-function-included-only-if-extension-used",children:(0,f.jsx)(c.Trans,{id:"For the lifecycle functions to be executed, you need the extension to be used in the game, either by having at least one action, condition or expression used, or a behavior of the extension added to an object. Otherwise, the extension won't be included in the game."})}),(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:'This is a "lifecycle function". It will be called automatically by the game engine. It has no parameters. Only global objects can be used as the events will be run for all scenes in your game.'})})]}):(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsxs)("div",{style:dm.parametersContainer,children:[(0,Nt.mapVector)(D,(function(e,n){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(yg.Z,{noPadding:!0,children:[(0,f.jsx)(yg.c,{firstChild:!0,children:(0,f.jsx)(c.Trans,{id:"Parameter #{0}:",values:{0:n+N}})}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,margin:"none",translatableHintText:{id:"Enter the parameter name (mandatory)"},value:e.getName(),onChange:function(t){e.setName(um.Project.getSafeName(t)),Z(),d()},disabled:F(n),fullWidth:!0})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Delete"}),enabled:!F(n),click:function(){return T(n)}},{label:t._({id:"Add a parameter below"}),enabled:!F(n),click:function(){return k(n+1)}},{type:"separator"},{label:t._({id:"Add a Long Description"}),enabled:!F(n),visible:!_(e,n),click:function(){return S(n)}},{label:t._({id:"Remove the Long Description"}),enabled:!F(n),visible:_(e,n),click:function(){return P(n)}},{label:t._({id:"Move up"}),click:function(){return I(n,n-1)},enabled:!F(n)&&n-1>=0&&!F(n-1)},{label:t._({id:"Move down"}),click:function(){return I(n,n+1)},enabled:!F(n)&&n+1<D.size()&&!F(n+1)}]}})]}),(0,f.jsx)(L.x1,{children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(cm,{project:t,valueTypeMetadata:e.getValueTypeMetadata(),disabled:F(n),isTypeSelectorShown:(r=n,r>=O),onTypeUpdated:function(){return d()},getLastObjectParameterObjectType:function(){return function(e,t){var n=cd.ParameterMetadataTools.getObjectParameterIndexFor(e,t);return n<0||n>=e.size()?"":e.at(n).getExtraInfo()}(D,n)}}),B(n)&&(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Label"}),floatingLabelFixed:!0,value:e.getDescription(),onChange:function(t){e.setDescription(t),Z()},fullWidth:!0,disabled:F(n)&&!h}),_(e,n)&&(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Long description"}),floatingLabelFixed:!0,value:e.getLongDescription(),onChange:function(t){e.setLongDescription(t),Z()},multiline:!0,fullWidth:!0,disabled:F(n)&&!h})]})})]},n);var r})),0===D.size()?(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"No parameters for this function."})}):null,(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:!h&&(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Add a parameter"}),onClick:w,icon:(0,f.jsx)(Ue.Z,{}),disabled:n.getFunctionType()===um.EventsFunction.ActionWithOperator})})})]})}),p?(0,f.jsx)(L.x1,{children:(0,f.jsx)(zn.Z,{helpPagePath:p})}):(0,f.jsx)(L.LZ,{})]})}})},hm=n.g.gd,fm=function(e,t,n,r){var o=r.getSentence();if(!o)return e._({id:"Enter the sentence that will be displayed in the events sheet"});var i,a=t?Jp.mK.BehaviorFunction:n?Jp.mK.ObjectFunction:Jp.mK.FreeFunction,s=r.getFunctionType(),l=(t||n)&&s===hm.EventsFunction.ExpressionAndCondition,c=(0,Nt.mapVector)(r.getParameters(),(function(e,t){if(e.getValueTypeMetadata().isBehavior())return null;if(0===t&&l)return null;var n="_PARAM".concat(t+a,"_");return-1===o.indexOf(n)?n:null})).filter(Boolean),u=r.getParameters().size(),d=o.matchAll(/_PARAM(\d+)_/g),p=[],h=(0,an.Z)(d);try{for(h.s();!(i=h.n()).done;){var f=i.value,g=parseInt(f[1],10);(g-a>=u||g-a<0)&&p.push(f[0])}}catch(m){h.e(m)}finally{h.f()}return c.length||p.length?[c.length?e._({id:"The sentence is probably missing this/these parameter(s):"})+" "+c.join(", "):null,p.length?e._({id:"The sentence displays one or more wrongs parameters:"})+" "+p.join(", "):null].filter(Boolean).join(" - "):void 0},gm=function(e,t){return e===hm.EventsFunction.Condition?{id:"Example: Is flashing"}:e===hm.EventsFunction.Expression?t.isNumber()?{id:"Example: Remaining life"}:{id:"Example: Equipped shield name"}:{id:"Example: Flash the object"}},mm=function(e,t){return e===hm.EventsFunction.Condition?{id:"Example: Check if the object is flashing."}:e===hm.EventsFunction.Expression?t.isNumber()?{id:"Example: Return the number of remaining lives for the player."}:{id:"Example: Return the name of the shield equipped by the player."}:{id:"Example: Make the object flash for 5 seconds."}},xm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsFunction,o=t.freezeEventsFunctionType,i=t.onConfigurationUpdated,a=t.helpPagePath,s=t.renderConfigurationHeader,l=t.eventsBasedBehavior,u=t.eventsBasedObject,d=t.getFunctionGroupNames,p=t.eventsFunctionsContainer,h=r.getFunctionType();if(!!l&&!u&&hm.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(r.getName()))return(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine for each instance living on the scene having the behavior.'})});if(!!u&&!l&&hm.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(r.getName()))return(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine for each instance living on the scene.'})});if(!l&&!u&&hm.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(r.getName()))return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(re.Z,{kind:"info",identifier:"lifecycle-events-function-included-only-if-extension-used",children:(0,f.jsx)(c.Trans,{id:"For the lifecycle functions to be executed, you need the extension to be used in the game, either by having at least one action, condition or expression used, or a behavior of the extension added to an object. Otherwise, the extension won't be included in the game."})}),(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:'This is a "lifecycle function". It will be called automatically by the game engine. It has no parameters. Only global objects can be used as the events will be run for all scenes in your game.'})})]});var g=p&&h===hm.EventsFunction.ActionWithOperator&&p.hasEventsFunctionNamed(r.getGetterName())?p.getEventsFunction(r.getGetterName()):null;return(0,f.jsx)(c.I18n,{children:function(t){var m=t.i18n;return(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[s?s():null,(0,f.jsxs)(C.ep,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(L.x1,{alignItems:"center",noMargin:!0,children:(0,f.jsxs)(B.Z,{value:h,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Function type"}),fullWidth:!0,disabled:!!o,onChange:function(t,n,o){var a=o;r.setFunctionType(a),i&&i("type"),e.forceUpdate()},children:[(0,f.jsx)(U.Z,{value:hm.EventsFunction.Action,label:{id:"Action"}}),(0,f.jsx)(U.Z,{value:hm.EventsFunction.Condition,label:{id:"Condition"}}),(0,f.jsx)(U.Z,{value:hm.EventsFunction.Expression,label:{id:"Expression"}}),(0,f.jsx)(U.Z,{value:hm.EventsFunction.ExpressionAndCondition,label:{id:"Expression and condition"}}),(0,f.jsx)(U.Z,{value:hm.EventsFunction.ActionWithOperator,label:{id:"Action with operator"}})]})}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:h===hm.EventsFunction.ActionWithOperator?(0,f.jsx)(B.Z,{value:g&&g.getName()||"",floatingLabelText:(0,f.jsx)(c.Trans,{id:"Related expression and condition"}),fullWidth:!0,onChange:function(t,n,o){r.setGetterName(o),i&&i(),e.forceUpdate()},children:p?(0,Nt.mapFor)(0,p.getEventsFunctionsCount(),(function(e){var t=p.getEventsFunctionAt(e);return t.getFunctionType()===hm.EventsFunction.ExpressionAndCondition&&(0,f.jsx)(U.Z,{value:t.getName(),label:t.getFullName()||t.getName()},t.getName())})):[]}):(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Full name displayed in editor"}),translatableHintText:gm(h,r.getExpressionType()),value:r.getFullName(),onChange:function(t){r.setFullName(t),i&&i(),e.forceUpdate()},fullWidth:!0})}),(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:h===hm.EventsFunction.ActionWithOperator?(0,f.jsx)(Dt.Z,{disabled:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Group name"}),fullWidth:!0,value:g?g.getGroup():"",onChange:function(e){}}):(0,f.jsx)(Bt.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group for this extension."},fullWidth:!0,value:r.getGroup(),onChange:function(t){r.setGroup(t),i&&i(),e.forceUpdate()},dataSource:d?d().map((function(e){return{text:e,value:e}})):[],openOnFocus:!0})})]}),(0,f.jsx)(L.x1,{noMargin:!0,children:h===hm.EventsFunction.ActionWithOperator?(0,f.jsx)(Dt.Z,{disabled:!0,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Description, displayed in editor"}),fullWidth:!0,multiline:!0,value:g?"Change "+g.getDescription():"",onChange:function(e){}}):(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:h===hm.EventsFunction.ExpressionAndCondition?(0,f.jsx)(c.Trans,{id:'Description, displayed in editor (automatically prefixed by "Compare" or "Return")'}):(0,f.jsx)(c.Trans,{id:"Description, displayed in editor"}),translatableHintText:mm(h,r.getExpressionType()),fullWidth:!0,multiline:!0,value:r.getDescription(),onChange:function(t){r.setDescription(t),i&&i(),e.forceUpdate()}})}),h===hm.EventsFunction.ActionWithOperator?(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(Dt.Z,{disabled:!0,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Sentence in Events Sheet"}),fullWidth:!0,value:g?"Change "+g.getSentence()+" of _PARAM0_":"",onChange:function(e){}})}):(h===hm.EventsFunction.Action||h===hm.EventsFunction.Condition||h===hm.EventsFunction.ExpressionAndCondition)&&(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:l&&h===hm.EventsFunction.ExpressionAndCondition?(0,f.jsx)(c.Trans,{id:'Sentence in Events Sheet (automatically suffixed by "of _PARAM0_")'}):(0,f.jsx)(c.Trans,{id:"Sentence in Events Sheet"}),translatableHintText:{id:"Note: write _PARAMx_ for parameters, e.g: Flash _PARAM1_ for 5 seconds"},fullWidth:!0,value:r.getSentence(),onChange:function(t){r.setSentence(t),i&&i(),e.forceUpdate()},errorText:fm(m,l,u,r)})}),r.isExpression()&&(0,f.jsx)(cm,{isExpressionType:!0,project:n,valueTypeMetadata:r.getExpressionType(),isTypeSelectorShown:!0,onTypeUpdated:function(){i&&i()},getLastObjectParameterObjectType:function(){return""}}),r.isAsync()&&(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:'This is an asynchronous action, meaning that the actions and sub-events following it will wait for it to end. Don\'t forget to use the action "End asynchronous function" to mark the end of the action.'})}),a?(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(zn.Z,{helpPagePath:a})}):(0,f.jsx)(L.LZ,{})]})}})}}]),n}(u.Component),vm=n.g.gd,bm="<create a new extension>",jm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={eventsFunction:null,extensionName:"",createNewExtension:!1},e._getFunctionGroupNames=function(){var t=e.state,n=t.createNewExtension,r=t.extensionName;if(n||!r)return[];for(var o=new Set,i=e.props.project.getEventsFunctionsExtension(r),a=0;a<i.getEventsFunctionsCount();a++){var s=i.getEventsFunctionAt(a).getGroup();s&&o.add(s)}return(0,j.Z)(o).sort((function(e,t){return e.localeCompare(t)}))},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,o=e.serializedEvents,i=new vm.EventsFunction;!function(e){var t=e.globalObjectsContainer,n=e.objectsContainer,r=e.serializedEvents,o=e.project,i=e.eventsFunction;i.setName("MyFunction"),i.setFunctionType(Kg.EventsFunction.Action),(0,qt.qx)(i.getEvents(),r,"unserializeFrom",o);var a=new Kg.EventsContextAnalyzer(Kg.JsPlatform.get(),t,n);a.launch(i.getEvents());var s=a.getEventsContext(),l=s.getReferencedObjectOrGroupNames().toNewVectorString().toJSArray(),c=s.getObjectNames().toNewVectorString().toJSArray(),u=l.filter((function(e){return-1===c.indexOf(e)})).map((function(e){return yp(t,n,e)})).filter(Boolean),d=u.filter((function(e){return!l.some((function(t){return e.find(t)}))})),p=d.map((function(e){return e.getName()})),h=c.filter((function(e){return!d.some((function(t){return t.find(e)}))})),f=i.getParameters();f.clear(),[].concat((0,j.Z)(p),(0,j.Z)(h)).forEach((function(e){var r=new Kg.ParameterMetadata;r.setType("objectList"),r.setName(e),r.setExtraInfo(Kg.getTypeOfObject(t,n,e,!0)),f.push_back(r),s.getBehaviorNamesOfObjectOrGroup(e).toNewVectorString().toJSArray().forEach((function(e){var r=new Kg.ParameterMetadata;r.setType("behavior"),r.setName(e),r.setExtraInfo(Kg.getTypeOfBehavior(t,n,e,!1)),f.push_back(r)}))})),u.filter((function(e){return!p.includes(e.getName())})).forEach((function(e){e&&i.getObjectGroups().insert(e,0)})),a.delete()}({project:t,globalObjectsContainer:n,objectsContainer:r,serializedEvents:o,eventsFunction:i}),this.setState({eventsFunction:i}),0===gr(t).length&&this.setState({createNewExtension:!0})}},{key:"componentWillUnmount",value:function(){var e=this.state.eventsFunction;e&&e.delete()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.onClose,o=t.onCreate,i=this.state,a=i.eventsFunction,s=i.extensionName,l=i.createNewExtension;if(!a)return null;var u=gr(n),d=function(e){return e.getParameters().size()>7}(a),p=function(){nm(n,s,a)?o(s,a):r()};return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Extract the events in a function"}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/events/functions/extract-events"},"help")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:r},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Create"}),primary:!0,disabled:!nm(n,s,a),onClick:p},"create")],open:!0,cannotBeDismissed:!0,onRequestClose:r,onApply:p,children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(re.Z,{identifier:"function-extractor-explanation",kind:"info",children:"After creating a function, it will be usable in the events sheet. Functions are grouped by extensions. Choose, or enter the name of a new extension, and a function name, then configure the function and its parameters."}),(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Extension (storing the function)"}),value:l?bm:s,onChange:function(t,n,r){r===bm?e.setState({createNewExtension:!0,extensionName:""}):e.setState({createNewExtension:!1,extensionName:r})},fullWidth:!0,children:[u.map((function(e){return(0,f.jsx)(U.Z,{value:e.getName(),label:e.getFullName()||e.getName()},e.getName())})),(0,f.jsx)(U.Z,{value:bm,label:{id:"<Create a New Extension>"}})]}),l?(0,f.jsx)(Dt.Z,{commitOnBlur:!0,value:s,floatingLabelText:(0,f.jsx)(c.Trans,{id:"New extension name"}),onChange:function(t){return e.setState({extensionName:t})},fullWidth:!0,errorText:em(n,s)?$g(s)?void 0:(0,f.jsx)(c.Trans,{id:"This name is not valid. Only use alphanumeric characters (0-9, a-z) and underscores."}):(0,f.jsx)(c.Trans,{id:"This name is already taken by another extension."})}):null]}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,value:a.getName(),floatingLabelText:(0,f.jsx)(c.Trans,{id:"Function name"}),onChange:function(t){a.setName(t),e.forceUpdate()},fullWidth:!0,errorText:tm(n,s,a)?Qg(a.getName())?void 0:(0,f.jsx)(c.Trans,{id:"This name is not valid. Only use alphanumeric characters (0-9, a-z) and underscores."}):(0,f.jsx)(c.Trans,{id:"This name is already taken by another function. Choose another name."})})}),d?(0,f.jsx)(L.x1,{children:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:"This function will have a lot of parameters. Consider creating groups or functions for a smaller set of objects so that the function is easier to reuse."})})}):null]}),(0,f.jsx)(xm,{project:n,eventsFunction:a,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunctionsContainer:null,onConfigurationUpdated:function(){e.forceUpdate()},freezeEventsFunctionType:!0,getFunctionGroupNames:this._getFunctionGroupNames}),(0,f.jsx)(pm,{project:n,eventsFunction:a,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunctionsContainer:null,onParametersUpdated:function(){e.forceUpdate()},freezeParameters:!0})]})})}}]),n}(u.Component),Cm=n(72291),ym=n.g.gd,Zm=1,km=50,wm={container:{display:"flex",width:"100%",flexDirection:"column",flex:1,position:"relative"}},Tm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(e){var r;return(0,st.Z)(this,n),(r=t.call(this,e))._containerDiv=u.createRef(),r._keyboardShortcuts=new Rt.Z({isActive:function(){return!r.state.inlineEditing&&!r.state.editedInstruction.instruction&&!r.state.analyzedEventsContextResult&&!r.state.serializedEventsToExtract},shortcutCallbacks:{onDelete:function(){return r.deleteSelection()},onCopy:function(){return r.copySelection()},onCut:function(){return r.cutSelection()},onPaste:function(){return r.pasteEventsOrInstructions()},onSearch:function(){return r._toggleSearchPanel()},onEscape:function(){return r._closeSearchPanel()},onUndo:function(){return r.undo()},onRedo:function(){return r.redo()},onZoomIn:function(e){return r.onZoomEvent("IN")(e)},onZoomOut:function(e){return r.onZoomEvent("OUT")(e)}}}),r.state={eventsHistory:Xt(r.props.events,{historyMaxSize:100}),editedInstruction:{isCondition:!0,instruction:null,instrsList:null,indexInList:0,eventContext:null},editedParameter:{isCondition:!0,instruction:null,instrsList:null,parameterIndex:0,eventContext:null},selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null,inlineInstructionEditorAnchorEl:null,inlineEditingPreviousValue:null,analyzedEventsContextResult:null,serializedEventsToExtract:null,showSearchPanel:!1,searchResults:null,searchFocusOffset:null,allEventsMetadata:[],textEditedEvent:null,fontSize:14},r._addStandardEvent=function(){r.addNewEvent("BuiltinCommonInstructions::Standard")},r._addCommentEvent=function(){r.addNewEvent("BuiltinCommonInstructions::Comment")},r._toggleSearchPanel=function(){r.setState((function(e){if(!(e.showSearchPanel&&r._searchPanel&&r._searchPanel.isSearchOngoing())){var t=!e.showSearchPanel;return t||r._eventSearcher&&r._eventSearcher.reset(),{showSearchPanel:t}}r._searchPanel.focus()}),(function(){r.state.showSearchPanel&&r._searchPanel&&r._searchPanel.focus()}))},r._closeSearchPanel=function(){r._eventSearcher&&r._eventSearcher.reset(),r.setState({showSearchPanel:!1})},r.addSubEvent=function(){var e=r.props.project,t=Pl(r.state.selection)||Ol(r.state.selection);if(t){var n=t.event.getSubEvents().insertNewEvent(e,"BuiltinCommonInstructions::Standard",t.event.getSubEvents().getEventsCount());r._eventsTree&&r._eventsTree.forceEventsUpdate((function(){var e=r._getChangedEventRows([n]);r._saveChangesToHistory("ADD",{positionsBeforeAction:e,positionAfterAction:e})}))}},r._selectionCanHaveSubEvents=function(){return!!(Pl(r.state.selection)||Ol(r.state.selection))},r._selectionCanToggleDisabled=function(){return El(r.state.selection).some((function(e){return e.isExecutable()}))},r._addNewEvent=function(e,t){var n,o=r.props.project,i=Sl(r.state.selection),a=Fl(r.state.selection),s=!1;if("BuiltinCommonInstructions::Comment"!==e&&"BuiltinCommonInstructions::Group"!==e||(s=!0),t)n=t;else if(i)n={eventsList:i.eventsList,indexInList:s?i.indexInList-1:i.indexInList};else if(a){var l=a.eventContext;n={eventsList:l.eventsList,indexInList:s?l.indexInList-1:l.indexInList}}else n={eventsList:r.props.events,indexInList:r.props.events.getEventsCount()};var c=n.eventsList.insertNewEvent(o,e,n.indexInList+1),u=r._eventsTree;return u&&u.forceEventsUpdate((function(){var n=r._getChangedEventRows([c]);if(r._saveChangesToHistory("ADD",{positionsBeforeAction:n,positionAfterAction:n},(function(){t||i||u.scrollToRow(u.getEventRow(c))})),"touch"!==(0,eo.BF)()&&("BuiltinCommonInstructions::Comment"===e||"BuiltinCommonInstructions::Group"===e)){var o=u.getEventRow(c),a=document.querySelector('[data-row-index="'.concat(o,'"] [data-editable-text="true"]'));a&&a.click()}})),[c]},r.openEventTextDialog=function(){var e=Eg(El(r.state.selection));if(e.length){var t=e[e.length-1];r.setState({textEditedEvent:t})}},r.closeEventTextDialog=function(){if(r.state.textEditedEvent){var e=r._getChangedEventRows([r.state.textEditedEvent]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:e,positionAfterAction:e})}r.setState({textEditedEvent:null})},r._buildInstructionContextMenu=function(e){return[{label:e._({id:"Copy"}),click:function(){return r.copySelection()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return r.cutSelection()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return r.pasteInstructions()},enabled:ah()||sh(),accelerator:"CmdOrCtrl+V"},{type:"separator"},{label:e._({id:"Delete"}),click:function(){return r.deleteSelection()},accelerator:"Delete"},{type:"separator"},{label:e._({id:"Undo"}),click:r.undo,enabled:Kt(r.state.eventsHistory),accelerator:"CmdOrCtrl+Z"},{label:e._({id:"Redo"}),click:r.redo,enabled:Jt(r.state.eventsHistory),accelerator:"CmdOrCtrl+Shift+Z"},{label:e._({id:"Invert Condition"}),click:function(){return r._invertSelectedConditions()},visible:(t=r.state.selection,Ml(t).some((function(e){return e.isCondition}))),accelerator:(0,$.$3)(r.props.preferences.values.userShortcutMap.TOGGLE_CONDITION_INVERTED||"KeyJ")},{label:e._({id:"Toggle Wait the Action to End"}),click:function(){return r._toggleAwaitingActions()},visible:r._hasSelectedOptionallyAsyncActions()}];var t},r.openAddInstructionContextMenu=function(e,t,n){r.openInstructionEditor(e,n,t)},r.openInstructionEditor=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r.state.editedInstruction.instruction&&(r.state.editedInstruction.instruction.delete(),console.warn("state.editedInstruction.instruction was containing an instruction - deleting it. Verify the logic handling the state in EventsSheet because that should not happen.")),r.setState({inlineInstructionEditorAnchorEl:n,editedInstruction:{instrsList:t.instrsList,isCondition:t.isCondition,instruction:t.instruction?t.instruction.clone():new ym.Instruction,indexInList:void 0!==t.indexInList?t.indexInList:void 0,eventContext:e}})},r.moveSelectionToInstruction=function(e,t){r.moveSelectionToInstructionsList(e,{instrsList:t.instrsList,isCondition:t.isCondition},t.indexInList)},r.moveSelectionToInstructionsList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=Al(r.state.selection),i=void 0===n||null===n?t.instrsList.size():n;if(!!!o.filter((function(e){return Jg(e,t.instrsList)})).length){o.forEach((function(e,n){return t.instrsList.insert(e,i+n)}));var a=Ll(r.state.selection),s=r._getChangedEventRows(a),l=r._getChangedEventRows([e.event]);r._keyboardShortcuts.shouldCloneInstances()||r.deleteSelection({deleteEvents:!1,shouldSaveInHistory:!1}),r._saveChangesToHistory("EDIT",{positionsBeforeAction:s,positionAfterAction:l})}},r.selectEvent=function(e){var t=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:Hl(r.state.selection,e,t)},(function(){return r.updateToolbar()}))},r.collapseAll=function(){r._eventsTree&&r._eventsTree.foldAll()},r.expandToLevel=function(e){r._eventsTree&&r._eventsTree.unfoldToLevel(e)},r._buildEventContextMenu=function(e){return[{label:e._({id:"Edit"}),click:function(){return r.openEventTextDialog()},visible:Eg(El(r.state.selection)).length>0},{label:e._({id:"Copy"}),click:function(){return r.copySelection()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return r.cutSelection()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return r.pasteEvents()},enabled:ih(),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Delete"}),click:function(){return r.deleteSelection()},accelerator:"Delete"},{label:e._({id:"Toggle disabled"}),click:function(){return r.toggleDisabled()},enabled:r._selectionCanToggleDisabled(),accelerator:(0,$.$3)(r.props.preferences.values.userShortcutMap.TOGGLE_EVENT_DISABLED||"KeyD")},{type:"separator"},{label:e._({id:"Add New Event Below"}),click:function(){r.addNewEvent("BuiltinCommonInstructions::Standard")}},{label:e._({id:"Add Sub Event"}),click:function(){return r.addSubEvent()},enabled:r._selectionCanHaveSubEvents()},{label:e._({id:"Add Other"}),submenu:r.state.allEventsMetadata.map((function(e){return{label:e.fullName,click:function(){r.addNewEvent(e.type)}}}))},{type:"separator"},{label:e._({id:"Undo"}),click:r.undo,enabled:Kt(r.state.eventsHistory),accelerator:"CmdOrCtrl+Z"},{label:e._({id:"Redo"}),click:r.redo,enabled:Jt(r.state.eventsHistory),accelerator:"CmdOrCtrl+Shift+Z"},{type:"separator"},{label:e._({id:"Collapse all"}),click:r.collapseAll},{label:e._({id:"Expand all to level"}),submenu:[{label:e._({id:"All"}),click:function(){return r.expandToLevel(-1)}},{type:"separator"}].concat((0,j.Z)([0,1,2,3,4,5,6,7,8].map((function(t){return{label:e._({id:"Level {0}",values:{0:t+1}}),click:function(){return r.expandToLevel(t)}}}))))},{type:"separator"},{label:e._({id:"Extract Events to a Function"}),click:function(){return r.extractEventsToFunction()}},{label:e._({id:"Move Events into a Group"}),click:function(){return r.moveEventsIntoNewGroup()}},{label:e._({id:"Analyze Objects Used in this Event"}),click:r._openEventsContextAnalyzer},{type:"separator"},{label:e._({id:"Zoom In"}),click:function(){return r.onZoomEvent("IN")()},accelerator:"CmdOrCtrl+=",enabled:r.props.preferences.values.eventsSheetZoomLevel<km},{label:e._({id:"Zoom Out"}),click:function(){return r.onZoomEvent("OUT")()},accelerator:"CmdOrCtrl+-",enabled:r.props.preferences.values.eventsSheetZoomLevel>Zm}]},r.openEventContextMenu=function(e,t,n){var o=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:Hl(r.state.selection,n,o)},(function(){r.updateToolbar(),r.eventContextMenu&&r.eventContextMenu.open(e,t)}))},r.openInstructionContextMenu=function(e,t,n,o){var i=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:Vl(e,r.state.selection,o,i)},(function(){r.updateToolbar(),r.instructionContextMenu&&r.instructionContextMenu.open(t,n)}))},r.selectInstruction=function(e,t){var n=r._keyboardShortcuts.shouldMultiSelect();r.setState({selection:Vl(e,r.state.selection,t,n)},(function(){return r.updateToolbar()}))},r.openParameterEditor=function(e,t){var n=t.instruction,o=t.parameterIndex;r.setState({editedParameter:(0,i.Z)({eventContext:e},t),inlineEditing:!0,inlineEditingAnchorEl:t.domEvent?t.domEvent.currentTarget:null,inlineEditingPreviousValue:n.getParameter(o).getPlainString()})},r.closeParameterEditor=function(e){var t=r.state.editedParameter,n=t.instruction,o=t.parameterIndex,i=t.eventContext;if(n&&(e&&"string"===typeof r.state.inlineEditingPreviousValue&&n.setParameter(o,r.state.inlineEditingPreviousValue),!e&&r.state.inlineEditingPreviousValue!==n.getParameter(o)&&i)){var a=r._getChangedEventRows([i.event]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:a,positionAfterAction:a})}var s=r.state.inlineEditingAnchorEl;r.setState({editedParameter:{isCondition:!0,instruction:null,instrsList:null,parameterIndex:0,eventContext:null},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){s&&s.focus()}))},r.toggleDisabled=function(){var e=!1,t=El(r.state.selection);if(t.forEach((function(t){t.isExecutable()&&(t.setDisabled(!t.isDisabled()),e=!0)})),e){var n=r._getChangedEventRows(t);r._saveChangesToHistory("DELETE",{positionsBeforeAction:n,positionAfterAction:n},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r.deleteSelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteInstructions,n=void 0===t||t,o=e.deleteEvents,i=void 0===o||o,a=e.shouldSaveInHistory,s=void 0===a||a,l=r.props.events,c=new ym.EventsRemover,u=[];if(i){var d=El(r.state.selection);d.forEach((function(e){return c.addEventToRemove(e)})),u=u.concat(d)}n&&(Al(r.state.selection).forEach((function(e){return c.addInstructionToRemove(e)})),u=u.concat(Ll(r.state.selection)));var p=r._getChangedEventRows(u);c.launch(l),c.delete(),r._eventsTree&&r._eventsTree.forceEventsUpdate(),r.setState({selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){s&&r._saveChangesToHistory("DELETE",{positionsBeforeAction:p,positionAfterAction:p}),r._ensureFocused()}))},r.copySelection=function(){!function(e){var t=new rh.EventsList,n=new rh.InstructionsList,r=new rh.InstructionsList;El(e).forEach((function(e){return t.insertEvent(e,t.getEventsCount())})),Ml(e).forEach((function(e){e.isCondition?r.insert(e.instruction,r.size()):n.insert(e.instruction,n.size())})),Yt.set(oh,{eventsList:(0,qt.XH)(t),eventsCount:t.getEventsCount(),actionsList:(0,qt.XH)(n),actionsCount:n.size(),conditionsList:(0,qt.XH)(r),conditionsCount:r.size()}),t.delete(),n.delete(),r.delete()}(r.state.selection)},r.cutSelection=function(){r.copySelection(),r.deleteSelection()},r.pasteEvents=function(){if(function(e,t){var n=Sl(t);if(!n||!ih())return!1;var r=Yt.get(oh),o=Gt.extractArrayProperty(r,"eventsList");if(!o)return!1;var i=new rh.EventsList;return(0,qt.qx)(i,o,"unserializeFrom",e),n.eventsList.insertEvents(i,0,i.getEventsCount(),n.indexInList),i.delete(),!0}(r.props.project,r.state.selection)){var e=r._getChangedEventRows(El(r.state.selection));r._saveChangesToHistory("ADD",{positionsBeforeAction:e,positionAfterAction:e},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r.pasteInstructions=function(){if(function(e,t){if(!Nl(t)&&!Ul(t)||!ah()&&!sh())return!1;var n=Yt.get(oh),r=Gt.extractArrayProperty(n,"actionsList"),o=Gt.extractArrayProperty(n,"conditionsList");if(!r||!o)return!1;var i=new rh.InstructionsList,a=new rh.InstructionsList;(0,qt.qx)(i,r,"unserializeFrom",e),(0,qt.qx)(a,o,"unserializeFrom",e);var s=Fl(t);s&&(s.isCondition?s.instrsList.insertInstructions(a,0,a.size(),s.indexInList):s.instrsList.insertInstructions(i,0,i.size(),s.indexInList));var l=function(e){return e.selectedInstructionsLists[e.selectedInstructionsLists.length-1]||null}(t);return l&&(l.isCondition?l.instrsList.insertInstructions(a,0,a.size(),l.instrsList.size()):l.instrsList.insertInstructions(i,0,i.size(),l.instrsList.size())),a.delete(),i.delete(),!0}(r.props.project,r.state.selection)){var e=Ll(r.state.selection),t=r._getChangedEventRows(e);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r.pasteEventsOrInstructions=function(){_l(r.state.selection)?r.pasteEvents():(Nl(r.state.selection)||Ul(r.state.selection))&&r.pasteInstructions()},r.pasteInstructionsInInstructionsList=function(e,t){if(function(e,t){if(!ah()&&!sh())return!1;var n=Yt.get(oh),r=Gt.extractArrayProperty(n,"actionsList"),o=Gt.extractArrayProperty(n,"conditionsList");if(r&&o){var i=new rh.InstructionsList,a=new rh.InstructionsList;return(0,qt.qx)(i,r,"unserializeFrom",e),(0,qt.qx)(a,o,"unserializeFrom",e),t.isCondition?t.instrsList.insertInstructions(a,0,a.size(),t.instrsList.size()):t.instrsList.insertInstructions(i,0,i.size(),t.instrsList.size()),a.delete(),i.delete(),!0}}(r.props.project,t)){var n=r._getChangedEventRows([e.event]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:n,positionAfterAction:n},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}},r._invertSelectedConditions=function(){Ml(r.state.selection).forEach((function(e){e.isCondition&&e.instruction.setInverted(!e.instruction.isInverted())}));var e=Ll(r.state.selection),t=r._getChangedEventRows(e);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))},r._hasSelectedOptionallyAsyncActions=function(){return Ml(r.state.selection).some((function(e){if(!e.isCondition){var t=Nf({instructionType:e.instruction.getType(),project:r.props.project,isCondition:!1});if(t&&t.isOptionallyAsync())return!0}return!1}))},r._toggleAwaitingActions=function(){Ml(r.state.selection).forEach((function(e){if(!e.isCondition){var t=Nf({instructionType:e.instruction.getType(),project:r.props.project,isCondition:!1});t&&t.isOptionallyAsync()&&e.instruction.setAwaited(!e.instruction.isAwaited())}}));var e=Ll(r.state.selection),t=r._getChangedEventRows(e);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))},r._onEndEditingStringEvent=function(e){var t=r._getChangedEventRows([e]);r._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t})},r._getChangedEventRows=function(e){var t=r._eventsTree;return t?e.map((function(e){return t.getEventRow(e)})):[]},r._saveChangesToHistory=function(e,t,n){r.setState({eventsHistory:Qt(r.state.eventsHistory,r.props.events,e,{positions:t})},(function(){r.updateToolbar(),n&&n()})),r._searchPanel&&r._searchPanel.markSearchResultsDirty()},r.undo=function(){if(Kt(r.state.eventsHistory)){var e=r.props,t=e.events,n=e.project,o=$t(r.state.eventsHistory,t,n),i=(0,ct.Z)(r)._eventsTree;i&&i.forceEventsUpdate((function(){var e=o.futureActions[o.futureActions.length-1],t=e.changeContext.positions,n=e.type;i.scrollToRow(t.positionsBeforeAction[0]);var a={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};if("ADD"===n)a={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};else{var s=i.getEventContextAtRowIndexes(t.positionsBeforeAction);a=Wl(s)}r.setState({selection:a,eventsHistory:o},(function(){return r.updateToolbar()}))}))}},r.redo=function(){if(Jt(r.state.eventsHistory)){var e=r.props,t=e.events,n=e.project,o=en(r.state.eventsHistory,t,n),i=(0,ct.Z)(r)._eventsTree;i&&i.forceEventsUpdate((function(){var e=o.previousActions[o.previousActions.length-1],t=e.changeContext.positions,n=e.type;i.scrollToRow(t.positionAfterAction);var a={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};if("DELETE"===n)a={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};else{var s=i.getEventContextAtRowIndexes(t.positionAfterAction);a=Wl(s)}r.setState({selection:a,eventsHistory:o},(function(){return r.updateToolbar()}))}))}},r.onZoomEvent=function(e){var t="IN"===e?1:-1;return function(e){e&&(e.preventDefault(),e.stopPropagation()),r.props.preferences.setEventsSheetZoomLevel(Math.min(Math.max(r.props.preferences.values.eventsSheetZoomLevel+1*t,Zm),km))}},r._openEventsContextAnalyzer=function(){var e=r.props,t=e.globalObjectsContainer,n=e.objectsContainer,o=new ym.EventsContextAnalyzer(ym.JsPlatform.get(),t,n),i=new ym.EventsList;El(r.state.selection).forEach((function(e){return i.insertEvent(e,i.getEventsCount())})),o.launch(i),i.delete(),r.setState({analyzedEventsContextResult:Ug(o.getEventsContext())}),o.delete()},r._closeEventsContextAnalyzer=function(){r.setState({analyzedEventsContextResult:null})},r.extractEventsToFunction=function(){var e=new ym.EventsList;Il(r.state.selection).forEach((function(t){var n=t.event;return e.insertEvent(n,e.getEventsCount())})),r.props.onBeginCreateEventsFunction(),r.setState({serializedEventsToExtract:(0,qt.XH)(e)}),e.delete()},r.moveEventsIntoNewGroup=function(){var e=new ym.EventsList;Il(r.state.selection).forEach((function(t){var n=t.event;return e.insertEvent(n,e.getEventsCount())})),r._replaceSelectionByGroupOfEvents(e),e.delete()},r._replaceSelectionByEventsFunction=function(e,t){var n=Dl(r.state.selection);if(n){var o=r.props.project,i=n.eventsList.insertNewEvent(o,"BuiltinCommonInstructions::Standard",n.indexInList),a=ym.asStandardEvent(i),s=function(e,t){var n=new Kg.Instruction;return n.setType((0,Jp.Op)(e,t)),n.setParametersCount(t.getParameters().size()+1+1),(0,Nt.mapVector)(t.getParameters(),(function(e,t){n.setParameter(1+t,e.getName())})),n}(e,t);a.getActions().push_back(s),s.delete(),r.deleteSelection({deleteInstructions:!1})}},r._replaceSelectionByGroupOfEvents=function(e){var t=Dl(r.state.selection);if(t){var n=r.props.project,o=t.eventsList.insertNewEvent(n,"BuiltinCommonInstructions::Group",t.indexInList),i=ym.asGroupEvent(o);i.setName("Grouped events"),i.setFolded(!0),i.getSubEvents().insertEvents(e,0,e.getEventsCount(),0),r.deleteSelection({deleteInstructions:!1})}},r._ensureEventUnfolded=function(e){var t=e();t&&r._eventsTree&&r._eventsTree.unfoldForEvent(t)},r._replaceInEvents=function(e,t){var n=e(t,(function(){r.forceUpdate((function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}));if(n.length){var o=r._getChangedEventRows(n);r._saveChangesToHistory("EDIT",{positionsBeforeAction:o,positionAfterAction:o})}},r._searchInEvents=function(e,t){e(t,(function(){r.forceUpdate((function(){r._eventsTree&&r._eventsTree.forceEventsUpdate()}))}))},r._onEventMoved=function(e,t){r._saveChangesToHistory("EDIT",{positionsBeforeAction:[e],positionAfterAction:[t]})},r._renderInstructionEditorDialog=function(){var e=r.props,t=e.project,n=e.scope,o=e.globalObjectsContainer,i=e.objectsContainer,a=r.state.inlineInstructionEditorAnchorEl?Cg:mg;return r.state.editedInstruction.instruction?(0,f.jsx)(a,{project:t,scope:n,globalObjectsContainer:o,objectsContainer:i,instruction:r.state.editedInstruction.instruction,isCondition:r.state.editedInstruction.isCondition,isNewInstruction:void 0===r.state.editedInstruction.indexInList,anchorEl:r.state.inlineInstructionEditorAnchorEl,open:!0,onCancel:function(){return r.closeInstructionEditor()},onSubmit:function(){var e=r.state.editedInstruction,t=e.instrsList,n=e.instruction,o=e.indexInList;t&&n&&(void 0!==o&&null!==o?t.set(o,n):t.insert(n,t.size()),r.closeInstructionEditor(!0),function(e){for(var t=!1,n=!1,r=e.size()-1;r>=0;--r){var o=e.get(r);r===e.size()-1?"BuiltinCommonInstructions::Once"===o.getType()&&(t=!0):"BuiltinCommonInstructions::Once"===o.getType()&&(e.removeAt(r),n=!0)}if(n&&!t){var i=new Ng.Instruction;i.setType("BuiltinCommonInstructions::Once"),e.insert(i,e.size()),i.delete()}}(t),r._eventsTree&&r._eventsTree.forceEventsUpdate())},resourceManagementProps:r.props.resourceManagementProps,openInstructionOrExpression:function(e,t){r.closeInstructionEditor(),r.props.openInstructionOrExpression(e,t)},canPasteInstructions:r.state.editedInstruction.isCondition?ah():sh(),onPasteInstructions:function(){var e=r.state.editedInstruction,t=e.instrsList,n=e.isCondition,o=e.eventContext;t&&o&&r.pasteInstructionsInInstructionsList(o,{instrsList:t,isCondition:n})}}):void 0},r._ensureFocused=function(){if(r._containerDiv&&document){var e=r._containerDiv.current;if(document.activeElement!==e&&e){if(document.activeElement!==document.body&&e.contains(document.activeElement))return;e.focus()}}},r.addNewEvent=(0,ro.zi)(r.props.authenticatedUser,ro.l8,r._addNewEvent),r}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this.setState({allEventsMetadata:uf()})}},{key:"componentDidUpdate",value:function(e,t){this.addNewEvent=(0,ro.zi)(this.props.authenticatedUser,ro.l8,this._addNewEvent),this.state.eventsHistory!==t.eventsHistory&&this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),!e.isActive&&this.props.isActive&&this._ensureFocused()}},{key:"updateToolbar",value:function(){if(this.props.setToolbar){var e,t=this._selectionCanHaveSubEvents();this.props.setToolbar((0,f.jsx)(Rg,{allEventsMetadata:this.state.allEventsMetadata,onAddStandardEvent:this._addStandardEvent,onAddSubEvent:this.addSubEvent,canAddSubEvent:t,canToggleEventDisabled:_l(this.state.selection)&&this._selectionCanToggleDisabled(),canToggleInstructionInverted:Nl(this.state.selection),onAddCommentEvent:this._addCommentEvent,onAddEvent:this.addNewEvent,onToggleInvertedCondition:this._invertSelectedConditions,onToggleDisabledEvent:this.toggleDisabled,canRemove:(e=this.state.selection,Nl(e)||Ul(e)||_l(e)),onRemove:this.deleteSelection,canUndo:Kt(this.state.eventsHistory),canRedo:Jt(this.state.eventsHistory),undo:this.undo,redo:this.redo,onOpenSettings:this.props.onOpenSettings,settingsIcon:this.props.settingsIcon,onToggleSearchPanel:this._toggleSearchPanel}))}}},{key:"closeInstructionEditor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state.editedInstruction,r=n.instruction,o=n.eventContext;this.setState({editedInstruction:{isCondition:!0,instruction:null,instrsList:null,indexInList:0,eventContext:null}},(function(){if(r&&r.delete(),t&&o){var n=e._getChangedEventRows([o.event]);e._saveChangesToHistory("EDIT",{positionsBeforeAction:n,positionAfterAction:n})}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,r=t.project,o=t.scope,i=t.events,a=t.onOpenExternalEvents,s=t.onOpenLayout,l=t.globalObjectsContainer,u=t.objectsContainer,d=t.preferences,p=t.resourceManagementProps,h=t.onCreateEventsFunction,g=t.tutorials;if(!r)return null;var m=(0,eo.BF)(),x=o.eventsFunctionsExtension&&o.eventsFunction&&(!o.eventsBasedBehavior&&!o.eventsBasedObject&&ym.EventsFunctionSelfCallChecker.isFreeFunctionOnlyCallingItself(r,o.eventsFunctionsExtension,o.eventsFunction)||o.eventsBasedBehavior&&ym.EventsFunctionSelfCallChecker.isBehaviorFunctionOnlyCallingItself(r,o.eventsFunctionsExtension,o.eventsBasedBehavior,o.eventsFunction)||o.eventsBasedObject&&ym.EventsFunctionSelfCallChecker.isObjectFunctionOnlyCallingItself(r,o.eventsFunctionsExtension,o.eventsBasedObject,o.eventsFunction));return(0,f.jsx)(T.I,{children:function(t){return(0,f.jsx)(qg,{ref:function(t){return e._eventSearcher=t},events:i,globalObjectsContainer:l,objectsContainer:u,selection:e.state.selection,project:r,children:function(v){var b=v.eventsSearchResultEvents,j=v.searchFocusOffset,C=v.searchInEvents,y=v.replaceInEvents,Z=v.goToPreviousSearchResult,k=v.goToNextSearchResult;return(0,f.jsxs)("div",{id:"events-editor","data-active":n?"true":void 0,className:"gd-events-sheet",style:wm.container,onKeyDown:e._keyboardShortcuts.onKeyDown,onKeyUp:e._keyboardShortcuts.onKeyUp,onDragOver:e._keyboardShortcuts.onDragOver,ref:e._containerDiv,tabIndex:0,children:[x&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:'This function calls itself (it is "recursive"). Ensure this is expected and there is a proper condition to stop it if necessary.'})})})}),(0,f.jsx)(Bf,{ref:function(t){return e._eventsTree=t},onScroll:e._ensureFocused,events:i,project:r,scope:o,globalObjectsContainer:l,objectsContainer:u,selection:e.state.selection,onInstructionClick:e.selectInstruction,onInstructionDoubleClick:e.openInstructionEditor,onInstructionContextMenu:e.openInstructionContextMenu,onAddInstructionContextMenu:e.openAddInstructionContextMenu,onAddNewInstruction:e.openInstructionEditor,onPasteInstructions:e.pasteInstructionsInInstructionsList,onMoveToInstruction:e.moveSelectionToInstruction,onMoveToInstructionsList:e.moveSelectionToInstructionsList,onParameterClick:e.openParameterEditor,onEventClick:e.selectEvent,onEventContextMenu:e.openEventContextMenu,onAddNewEvent:function(t,n){e.addNewEvent(t,{eventsList:n,indexInList:n.getEventsCount()})},onOpenExternalEvents:a,onOpenLayout:s,searchResults:b,searchFocusOffset:j,onEventMoved:e._onEventMoved,onEndEditingEvent:e._onEndEditingStringEvent,showObjectThumbnails:d.values.eventsSheetShowObjectThumbnails,screenType:m,windowWidth:t,eventsSheetHeight:e._containerDiv.current?e._containerDiv.current.clientHeight:0,fontSize:d.values.eventsSheetZoomLevel,preferences:d,tutorials:g},i.ptr),e.state.showSearchPanel&&(0,f.jsx)(Wg,{ref:function(t){return e._searchPanel=t},onSearchInEvents:function(t){return e._searchInEvents(C,t)},onReplaceInEvents:function(t){e._replaceInEvents(y,t)},resultsCount:b?b.length:null,hasEventSelected:_l(e.state.selection),onGoToPreviousSearchResult:function(){return e._ensureEventUnfolded(Z)},onCloseSearchPanel:function(){e._closeSearchPanel()},onGoToNextSearchResult:function(){return e._ensureEventUnfolded(k)},searchFocusOffset:j}),(0,f.jsx)(_g,{open:e.state.inlineEditing,anchorEl:e.state.inlineEditingAnchorEl,onRequestClose:function(){e.closeParameterEditor("cancel"===d.values.eventsSheetCancelInlineParameter)},onApply:function(){e.closeParameterEditor(!1)},project:r,scope:o,globalObjectsContainer:l,objectsContainer:u,isCondition:e.state.editedParameter.isCondition,instruction:e.state.editedParameter.instruction,parameterIndex:e.state.editedParameter.parameterIndex,onChange:function(t){var n=e.state.editedParameter,r=n.instruction,o=n.parameterIndex;r&&e.state.inlineEditing&&(r.setParameter(o,t),e.forceUpdate(),e._searchPanel&&e._searchPanel.markSearchResultsDirty())},resourceManagementProps:p}),(0,f.jsx)(tl.Z,{ref:function(t){return e.eventContextMenu=t},buildMenuTemplate:e._buildEventContextMenu}),(0,f.jsx)(tl.Z,{ref:function(t){return e.instructionContextMenu=t},buildMenuTemplate:e._buildInstructionContextMenu}),e._renderInstructionEditorDialog(),e.state.analyzedEventsContextResult&&(0,f.jsx)(Hg,{onClose:e._closeEventsContextAnalyzer,eventsContextResult:e.state.analyzedEventsContextResult}),e.state.serializedEventsToExtract&&(0,f.jsx)(jm,{project:r,globalObjectsContainer:l,objectsContainer:u,onClose:function(){return e.setState({serializedEventsToExtract:null})},serializedEvents:e.state.serializedEventsToExtract,onCreate:function(t,n){h(t,n),e._replaceSelectionByEventsFunction(t,n),e.setState({serializedEventsToExtract:null})}}),e.state.textEditedEvent&&(0,f.jsx)(Sg,{event:e.state.textEditedEvent,onApply:function(){e.closeEventTextDialog()},onClose:e.closeEventTextDialog})]})}},i.ptr)}})}}]),n}(u.Component),Em=function(e,t){u.useImperativeHandle(t,(function(){return{updateToolbar:r}}));var n=u.useRef(null),r=function(){n.current&&n.current.updateToolbar()},o=u.useContext(ir.ZP),a=u.useContext(X.ZP),s=u.useContext(Cm.n).tutorials,l=u.useContext(Sa);return(0,f.jsx)(Tm,(0,i.Z)({ref:n,authenticatedUser:o,preferences:a,tutorials:s,leaderboardsManager:l},e))},Sm=u.forwardRef(Em),Pm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onBeginCreateEventsFunction=function(){(0,Nr.cc)({step:"begin",parentEditor:"scene-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"scene-events-editor")},e}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){if(this.props.isActive){var e=this.getLayout();this.props.setPreviewedLayout(e?e.getName():null)}}},{key:"componentDidUpdate",value:function(e){if(!e.isActive&&this.props.isActive){var t=this.getLayout();this.props.setPreviewedLayout(t?t.getName():null)}}},{key:"getProject",value:function(){return this.props.project}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"getLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasLayoutNamed(n)?t.getLayout(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,o=this.getLayout();return o&&n?(0,f.jsx)(Sm,{ref:function(t){return e.editor=t},setToolbar:this.props.setToolbar,onOpenLayout:this.props.onOpenLayout,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.onCreateEventsFunction,onBeginCreateEventsFunction:this.onBeginCreateEventsFunction,unsavedChanges:this.props.unsavedChanges,project:n,scope:{layout:o},globalObjectsContainer:n,objectsContainer:o,events:o.getEvents(),onOpenExternalEvents:this.props.onOpenExternalEvents,isActive:this.props.isActive}):(0,f.jsxs)("div",{children:["No layout called ",r," found!"]})}}]),n}(u.Component),Im=function(e){return(0,f.jsx)(Pm,(0,i.Z)({},e))},Dm=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.25 5.75C8.66015 5.75 5.75 8.66015 5.75 12.25C5.75 15.8399 8.66015 18.75 12.25 18.75C15.8399 18.75 18.75 15.8399 18.75 12.25C18.75 8.66015 15.8399 5.75 12.25 5.75ZM4.25 12.25C4.25 7.83172 7.83172 4.25 12.25 4.25C16.6683 4.25 20.25 7.83172 20.25 12.25C20.25 16.6683 16.6683 20.25 12.25 20.25C7.83172 20.25 4.25 16.6683 4.25 12.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5303 8.46967C14.8232 8.76256 14.8232 9.23744 14.5303 9.53033L10.5303 13.5303C10.2374 13.8232 9.76256 13.8232 9.46967 13.5303C9.17678 13.2374 9.17678 12.7626 9.46967 12.4697L13.4697 8.46967C13.7626 8.17678 14.2374 8.17678 14.5303 8.46967Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 13C5.25 12.5858 5.58579 12.25 6 12.25H18.5C18.9142 12.25 19.25 12.5858 19.25 13C19.25 13.4142 18.9142 13.75 18.5 13.75H6C5.58579 13.75 5.25 13.4142 5.25 13Z",fill:"currentColor"})]}))})),Am=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 5.5C6.05964 5.5 5.5 6.05964 5.5 6.75V17.25C5.5 17.9404 6.05964 18.5 6.75 18.5H17.25C17.9404 18.5 18.5 17.9404 18.5 17.25V6.75C18.5 6.05964 17.9404 5.5 17.25 5.5H6.75ZM4 6.75C4 5.23122 5.23122 4 6.75 4H17.25C18.7688 4 20 5.23122 20 6.75V17.25C20 18.7688 18.7688 20 17.25 20H6.75C5.23122 20 4 18.7688 4 17.25V6.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.19253 10.2483C8.46962 9.94039 8.94384 9.91543 9.25172 10.1925L11.7517 12.4425C11.9098 12.5848 12 12.7874 12 13C12 13.2126 11.9098 13.4152 11.7517 13.5575L9.25172 15.8075C8.94384 16.0846 8.46962 16.0596 8.19253 15.7517C7.91543 15.4438 7.94039 14.9696 8.24828 14.6925L10.1289 13L8.24828 11.3075C7.94039 11.0304 7.91543 10.5562 8.19253 10.2483Z",fill:"currentColor"})]}))})),Lm=n(58758),Mm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onPlay,n=e.onPause,r=e.canPlay,o=e.canPause,i=e.onToggleProfiler,a=e.canOpenProfiler,s=e.onToggleConsole,l=e.canOpenConsole,u=e.isProfilerShown,d=e.isConsoleShown;return(0,f.jsxs)(b,{lastChild:!0,children:[(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:i,disabled:!a,selected:u,tooltip:{id:"Open the performance profiler"},children:(0,f.jsx)(Dm,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:s,disabled:!l,selected:d,tooltip:{id:"Open the console"},children:(0,f.jsx)(Am,{})}),o?(0,f.jsx)(_.Z,{primary:!0,onClick:n,leftIcon:(0,f.jsx)(Lm.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Pause"})}):(0,f.jsx)(E.Z,{primary:!0,onClick:t,icon:(0,f.jsx)(y,{}),label:(0,f.jsx)(c.Trans,{id:"Play"}),disabled:!r})]})}}]),n}(u.PureComponent),Fm=Mm,Om=n(59936),Rm=n(36502),Bm=n.n(Rm),_m={container:{flex:1,display:"flex"},list:{overflowY:"scroll",scrollbarWidth:"thin",flex:1}},Nm=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"_renderInspectorList",value:function(e,t,n){var r=this;return t(e).map((function(t){if(!t)return null;var o=n.concat(t.key),i=t.getSubInspectors;return(0,f.jsx)(ze,{primaryText:t.label,initiallyOpen:!!t.initiallyOpen,onClick:function(){return r.props.onChooseInspector(t,o)},renderNestedItems:i?function(){return r._renderInspectorList(Bm()(e,t.key,null),i,o)}:void 0},o.join("."))}))}},{key:"render",value:function(){return this.props.gameData?(0,f.jsx)(Ge,{style:_m.list,children:this._renderInspectorList(this.props.gameData,this.props.getInspectorDescriptions,[])}):null}}]),n}(u.Component),Um=n(54122),Hm=n.n(Um),Vm=n(73529),Wm=n.n(Vm),zm=function e(t){if(!t)return null;var n={type:t._type,value:null};return"string"===t._type?n.value=t._str:"number"===t._type?n.value=t._value:"boolean"===t._type?n.value=t._bool:"structure"===t._type?n.value=Wm()(t._children,e):"array"===t._type&&(n.value=t._childrenArray.map(e)),n},Gm=function(e,t){var n=t.onCall,r=(t.onEdit,t.variablesContainer);if(r){var o=function(e,t){var n,r=e.shift(),o=["_variables","items",r],i=t._variables.items[r],a=!1,s=(0,an.Z)(e);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(!(a=!a))if("structure"===i._type)o.push("_children",l),i=i._children[l];else{if("array"!==i._type)return{path:null,variable:null};o.push("_childrenArray",l),i=i._childrenArray[parseInt(l,10)]}}}catch(c){s.e(c)}finally{s.f()}return{path:o,variable:i}}(e.namespace,r),i=o.path,a=o.variable;if(!i)return console.error("Invalid path passed to the debugger: ",e),!1;if(!a)return console.error("Variable doesn't exist: ",e),!1;if("type"===e.name){if(i.push("castTo"),"string"!==e.new_value&&"number"!==e.new_value&&"boolean"!==e.new_value&&"structure"!==e.new_value&&"array"!==e.new_value)return console.error("Invalid type name: "+e.new_value),!1;e.new_value!==a._type&&n(i,[e.new_value])}else if("value"===e.name){if("string"===a._type&&"string"!==typeof e.new_value)e.new_value=""+e.new_value;else if("number"===a._type&&"number"!==typeof e.new_value){if(e.new_value=parseFloat(e.new_value),isNaN(e.new_value))return console.error("Cannot set variable of type number to NaN!"),!1}else if("boolean"===a._type&&"boolean"!==typeof e.new_value)e.new_value="string"===typeof e.new_value?"false"!==e.new_value.toLowerCase()&&"0"!==e.new_value:!!e.new_value;else if("structure"===a._type||"array"===a._type)return console.error("Cannot set the value of a collection."),!1;i.push("setValue"),n(i,[e.new_value])}return!0}},Ym=function(e){return(0,f.jsx)(Hm(),{collapsed:!1,name:!1,src:e.variablesContainer?(t=e.variablesContainer,t&&t._variables&&t._variables.items?Wm()(t._variables.items,zm):null):null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return Gm(t,e)},groupArraysAfterLength:50,theme:"monokai",validationMessage:"Invalid value"});var t},qm=function(e){return(0,f.jsx)(Hm(),{collapsed:!1,name:!1,src:e.timers?(t=e.timers,t?Object.entries(t.items).map((function(e){var t=(0,a.Z)(e,2),n=(t[0],t[1]);return{"Timer name":n._name,"Time (in seconds)":n._time/1e3,"Is paused":n._paused}})):null):null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,groupArraysAfterLength:50,theme:"monokai"});var t},Xm=function(e){if(!e)return null;var t={"X position":e.x,"Y position":e.y,Angle:e.angle,Layer:e.layer,"Z order":e.zOrder,"Is hidden?":e.hidden};return"undefined"!==typeof e._z&&(t["Z position"]=e._z,t["Rotation around X axis"]=e._rotationX,t["Rotation around Y axis"]=e._rotationY,t["Rotation around Z axis (Angle)"]=t.Angle,delete t.Angle),t},Jm=function(e){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"General:"})}),(0,f.jsx)(Hm(),{collapsed:!1,name:!1,src:Xm(e.runtimeObject),enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return function(e,t){var n=t.onCall;if(t.onEdit,"X position"===e.name)n(["setX"],[parseFloat(e.new_value)]);else if("Y position"===e.name)n(["setY"],[parseFloat(e.new_value)]);else if("Z position"===e.name)n(["setZ"],[parseFloat(e.new_value)]);else if("Rotation around X axis"===e.name)n(["setRotationX"],[parseFloat(e.new_value)]);else if("Rotation around Y axis"===e.name)n(["setRotationY"],[parseFloat(e.new_value)]);else if("Angle"===e.name||"Rotation around Z axis (Angle)"===e.name)n(["setAngle"],[parseFloat(e.new_value)]);else if("Layer"===e.name)n(["setLayer"],[e.new_value]);else if("Z order"===e.name)n(["setZOrder"],[parseFloat(e.new_value)]);else{if("Is hidden?"!==e.name)return!1;n(["hide"],[!!e.new_value])}return!0}(t,e)},groupArraysAfterLength:50,theme:"monokai"}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Instance variables:"})}),(0,f.jsx)(Ym,{variablesContainer:e.runtimeObject?e.runtimeObject._variables:null,onEdit:function(t,n){return e.onEdit(["_variables"].concat(t),n)},onCall:function(t,n){return e.onCall(["_variables"].concat(t),n)}}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Timers:"})}),(0,f.jsx)(qm,{timers:e.runtimeObject?e.runtimeObject._timers:null})]})},Km=function(e){return e?{"Camera rotation (in deg)":e._cameraRotation,"Camera zoom":e._zoomFactor,"Layer is hidden":!!e._hidden,"Camera X position":e._cameraX,"Camera Y position":e._cameraY,"Time scale":e._timeScale}:null},Qm=function(e){return e?{"Time scale":e._timeManager?e._timeManager._timeScale:null,Layers:e._layers&&e._layers.items?Wm()(e._layers.items,Km):null,"Actions waiting to be finished":e._asyncTasksManager.tasksWithCallback.length}:null},$m=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={newObjectName:""},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.runtimeScene,r=t.onCall;return n?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Layers:"})}),(0,f.jsx)(Hm(),{collapsed:!1,name:!1,src:Qm(n),enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return function(e,t){var n=t.onCall;if(t.onEdit,0===e.namespace.length&&"Time scale"===e.name)n(["_timeManager","setTimeScale"],[parseFloat(e.new_value)]);else{if(!(e.namespace.length>=2))return!1;"Layers"===e.namespace[0]&&("Camera rotation (in deg)"===e.name?n(["_layers","items",e.namespace[1],"setCameraRotation"],[parseFloat(e.new_value)]):"Camera zoom"===e.name?n(["_layers","items",e.namespace[1],"setCameraZoom"],[parseFloat(e.new_value)]):"Layer is hidden"===e.name?n(["_layers","items",e.namespace[1],"show"],[!e.new_value]):"Camera X position"===e.name?n(["_layers","items",e.namespace[1],"setCameraX"],[parseFloat(e.new_value)]):"Camera Y position"===e.name?n(["_layers","items",e.namespace[1],"setCameraY"],[parseFloat(e.new_value)]):"Time scale"===e.name&&n(["_layers","items",e.namespace[1],"setTimeScale"],[parseFloat(e.new_value)]))}return!0}(t,e.props)},groupArraysAfterLength:50,theme:"monokai"}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Timers:"})}),(0,f.jsx)(qm,{timers:n._timeManager._timers}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Create a new instance on the scene (will be at position 0;0):"})}),n._objects&&n._objects.items&&(0,f.jsx)(C.ad,{noFloatingLabelText:!0,renderTextField:function(){return(0,f.jsx)(Bt.ZP,{hintText:{id:"Enter the name of the object"},value:e.state.newObjectName,onChange:function(t){e.setState({newObjectName:t})},dataSource:Object.keys(n._objects.items).map((function(e){return{text:e,value:e}})),openOnFocus:!0,fullWidth:!0})},renderButton:function(t){return(0,f.jsx)(E.Z,{style:t,label:(0,f.jsx)(c.Trans,{id:"Create"}),primary:!0,onClick:function(){r(["createObject"],[e.state.newObjectName])}})}})]}):null}}]),n}(u.Component),ex=function(e){return[{label:"Global variables",key:"_variables",renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Ym,{variablesContainer:e,onCall:n,onEdit:r})}},{label:"Scenes",key:["_sceneStack","_stack"],renderInspector:function(){return null},initiallyOpen:!0,getSubInspectors:function(e){return e?e.map((function(e,t){return{label:e._name,key:t,renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)($m,{runtimeScene:e,onCall:n,onEdit:r})},initiallyOpen:!0,getSubInspectors:function(e){return[{label:"Scene variables",key:"_variables",renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Ym,{variablesContainer:e,onCall:n,onEdit:r})}},{label:"Instances",key:"_instances",renderInspector:function(){return null},initiallyOpen:!0,getSubInspectors:function(e){return e&&e.items?Object.keys(e.items).map((function(t){return e.items[t]&&"undefined"!==typeof e.items[t].length?{label:"".concat(t," (").concat(e.items[t].length,")"),key:["items",t],renderInspector:function(){return null},getSubInspectors:function(e){return e?e.filter((function(e){return!!e})).map((function(e,t){return{label:"#".concat(e.id),key:t,renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Jm,{runtimeObject:e,onCall:n,onEdit:r})}}})):[]}}:null})):[]}}]}}})):[]}}]},tx=function(e){var t=e.gameData,n=e.onEdit;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"You are in raw mode. You can edit the fields, but be aware that this can lead to unexpected results or even crash the debugged game!"})}),(0,f.jsx)(Hm(),{collapsed:1,name:!1,src:t,onEdit:function(e){return n(e.namespace.concat(e.name),e.new_value)},groupArraysAfterLength:50,theme:"monokai"})]})},nx=n(55661),rx=n(90953),ox={indent:{display:"flex",alignItems:"center"}},ix=function(e){var t=u.useState({}),n=(0,a.Z)(t,2),o=n[0],s=n[1],l=u.useContext(m.Z),d=function(e){return o[e]},p=function(e){var t=e.index;return t<0?"tableHeaderRow":t%2===0?"tableEvenRow":"tableOddRow"},h=function(e){var t=e.rowData;return(0,f.jsxs)("div",{style:ox.indent,children:[(0,f.jsx)("div",{style:{width:8*t.depth}}),t.hasSubsections?(0,f.jsx)(A.Z,{onClick:function(){return function(e){s((0,i.Z)((0,i.Z)({},o),{},(0,r.Z)({},e,!o[e])))}(t.path)},children:t.isCollapsed?(0,f.jsx)(It.Z,{}):(0,f.jsx)(Be.Z,{})}):(0,f.jsx)("div",{style:{width:24}}),(0,f.jsx)("span",{children:t.name})]})},g=e.profilerMeasures;if(!g)return null;var x=function t(n,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=e.profilerMeasures,l=r&&o.time&&0!==r.time?o.time/r.time*100:100,c=s&&o.time&&0!==s.time?o.time/s.time*100:100,u=d(a);return[{name:n,time:o.time?"".concat(o.time.toFixed(2),"ms"):"?",parentPercent:"".concat(l.toFixed(2),"%"),totalPercent:"".concat(c.toFixed(2),"%"),depth:i,hasSubsections:!!Object.keys(o.subsections).length,path:a,isCollapsed:u}].concat((0,j.Z)(u?[]:id()(o.subsections,(function(e,n){return t(n,o,e,i+1,"".concat(a,">").concat(i,".").concat(n))}))))}("All",null,g);return(0,f.jsx)(jr.qj,{children:function(e){var t=e.height,n=e.width;return(0,f.jsxs)(jr.iA,{headerHeight:30,height:t,className:"gd-table ".concat(l.tableRootClassName),headerClassName:"tableHeaderColumn",rowCount:x.length,rowGetter:function(e){var t=e.index;return x[t]},rowHeight:35,onRowClick:function(){},rowClassName:p,width:n,children:[(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Section name"}),dataKey:"name",width:.4*n,className:"tableColumn",cellRenderer:h}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Time (ms)"}),dataKey:"time",width:.2*n,className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"% of parent"}),dataKey:"parentPercent",width:.2*n,className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"% of total"}),dataKey:"totalPercent",width:.2*n,className:"tableColumn"})]})}})},ax={tableContainer:{flex:1}},sx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onStart,n=e.onStop,r=e.profilerOutput,o=e.profilingInProgress;return(0,f.jsxs)(Sh,{children:[(0,f.jsxs)(L.x1,{alignItems:"center",justifyContent:"center",children:[!o&&r&&(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Last run collected on {0} frames.",values:{0:r.stats.framesCount}})}),!o&&r&&(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Restart"}),onClick:t}),!o&&!r&&(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Start profiling"}),onClick:t}),o&&(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Stop profiling"}),onClick:n})]}),o&&(0,f.jsx)(L.x1,{alignItems:"center",children:(0,f.jsx)(Vs.Z,{})}),(0,f.jsxs)("div",{style:ax.tableContainer,children:[r&&(0,f.jsx)(ix,{profilerMeasures:r.framesAverageMeasures}),!r&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Start profiling and then stop it after a few seconds to see the results."})})]})]})}}]),n}(u.Component),lx=n(25588),cx=n(47956),ux=n(9311),dx=n(68262),px=n(75268),hx=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33337 9.83329C3.33337 9.55715 3.55723 9.33329 3.83337 9.33329H5.50004C6.51256 9.33329 7.33337 10.1541 7.33337 11.1666V12.8333C7.33337 13.1094 7.10952 13.3333 6.83337 13.3333C6.55723 13.3333 6.33337 13.1094 6.33337 12.8333V11.1666C6.33337 10.7064 5.96028 10.3333 5.50004 10.3333H3.83337C3.55723 10.3333 3.33337 10.1094 3.33337 9.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8334 10.3333C11.3731 10.3333 11 10.7064 11 11.1666V12.8333C11 13.1094 10.7762 13.3333 10.5 13.3333C10.2239 13.3333 10 13.1094 10 12.8333V11.1666C10 10.1541 10.8208 9.33329 11.8334 9.33329H13.5C13.7762 9.33329 14 9.55715 14 9.83329C14 10.1094 13.7762 10.3333 13.5 10.3333H11.8334Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2.66663C10.7762 2.66663 11 2.89048 11 3.16663V4.83329C11 5.29354 11.3731 5.66663 11.8334 5.66663H13.5C13.7762 5.66663 14 5.89048 14 6.16663C14 6.44277 13.7762 6.66663 13.5 6.66663H11.8334C10.8208 6.66663 10 5.84581 10 4.83329V3.16663C10 2.89048 10.2239 2.66663 10.5 2.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.83337 2.66663C7.10952 2.66663 7.33337 2.89048 7.33337 3.16663V4.83329C7.33337 5.84582 6.51256 6.66663 5.50004 6.66663H3.83337C3.55723 6.66663 3.33337 6.44277 3.33337 6.16663C3.33337 5.89048 3.55723 5.66663 3.83337 5.66663H5.50004C5.96028 5.66663 6.33337 5.29353 6.33337 4.83329V3.16663C6.33337 2.89048 6.55723 2.66663 6.83337 2.66663Z",fill:"currentColor"})]}))})),fx=function(){function e(){(0,st.Z)(this,e),this.logs=[],this.groups=new Set,this._onNewLog=new Set,this._onNewGroup=new Set,this._pendingLogs=[],this._pendingCommit=!1}return(0,lt.Z)(e,[{key:"_commitLogs",value:function(){var e;(e=this.logs).unshift.apply(e,(0,j.Z)(this._pendingLogs)),this._pendingLogs.length=0,this._pendingCommit=!1,this._onNewLog.forEach((function(e){return e()}))}},{key:"addLog",value:function(e){this._pendingLogs.unshift(e),this.groups.has(e.group)||(this.groups.add(e.group),this._onNewGroup.forEach((function(e){return e()}))),this._pendingCommit||(setTimeout(this._commitLogs.bind(this),200),this._pendingCommit=!0)}},{key:"on",value:function(e,t){"group"===e&&this._onNewGroup.add(t),"log"===e&&this._onNewLog.add(t)}},{key:"off",value:function(e,t){"group"===e&&this._onNewGroup.delete(t),"log"===e&&this._onNewLog.delete(t)}}]),e}(),gx={userSelect:"text",cursor:"text",wordBreak:"break-word"},mx={list:{overflowX:"hidden",overflowY:"scroll",scrollbarWidth:"thin"},tag:{marginRight:2},consoleTextArea:(0,i.Z)((0,i.Z)({},gx),{},{width:"100%",backgroundColor:"#292929",borderRadius:"4px",border:"1px solid slategray",color:"white",fontFamily:"'Courier New', monospace",fontSize:11,padding:3})},xx=function(e){var t=e.icon,n=e.label;return(0,f.jsx)(le.Z,{icon:t,style:mx.tag,size:"small",label:(0,f.jsx)("span",{style:gx,children:n})})},vx={info:(0,f.jsx)(cx.Z,{color:"primary",fontSize:"small"}),warning:(0,f.jsx)(ue.Z,{color:"secondary",fontSize:"small"}),error:(0,f.jsx)(za,{color:"error",fontSize:"small"})},bx=function(e){var t=e.logsManager,n=(0,_t.Z)(),r=t.logs,o=t.groups;u.useEffect((function(){var e=function(){n()};return t.on("log",e),function(){t.off("log",e)}}),[n,t]);var s=u.useRef(0),l=u.useMemo((function(){return new jr.t1({defaultHeight:45,minHeight:25,fixedWidth:!0,keyMapper:function(e){return r.length-e}})}),[r]),d=u.useState(!1),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useState(!0),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useState(!1),C=(0,a.Z)(j,2),y=C[0],Z=C[1],k=u.useRef(new Set).current;u.useEffect((function(){if(y){var e=function(){return n()};return t.on("group",e),function(){t.off("group",e)}}}),[y,n,t]);var w=r.filter((function(e){var t=e.internal;return!(h&&t)})).filter((function(e){var t=e.group;return!k.has(t)}));return(0,f.jsxs)(L.sg,{noMargin:!0,noOverflowParent:!0,expand:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(jr.qj,{children:function(e){var t=e.width,n=e.height;return t&&n?(s.current!==t&&(l.clearAll(),s.current=t),(0,f.jsx)(jr.aV,{deferredMeasurementCache:l,height:n,width:t,style:mx.list,rowCount:w.length,rowHeight:l.rowHeight,rowRenderer:function(e){var t=e.index,n=e.key,r=e.parent,o=e.style;return(0,f.jsx)(jr.Z8,{cache:l,columnIndex:0,parent:r,rowIndex:t,children:function(e){var r=e.registerChild;return(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},o),{},{padding:2,display:"flex",alignItems:"flex-start"}),ref:r,children:[(0,f.jsx)(L.sg,{noMargin:!0,children:vx[w[t].type]||vx.info}),(0,f.jsx)(L.LZ,{}),(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)("div",{style:mx.consoleTextArea,children:w[t].message})}),v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsxs)(L.x1,{noMargin:!0,children:[w[t].group?(0,f.jsx)(xx,{icon:(0,f.jsx)(dx.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Group: {0}",values:{0:w[t].group}})}):null,(0,f.jsx)(xx,{icon:(0,f.jsx)(lx.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Timestamp: {0}",values:{0:Math.round(1e3*w[t].timestamp)/1e6+"s"}})})]})]})]})]},n)}},n)}})):null}})}),(0,f.jsx)(yg.Z,{children:(0,f.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Yn.Z,{label:v?(0,f.jsx)(c.Trans,{id:"Hide details"}):(0,f.jsx)(c.Trans,{id:"Show details"}),checkedIcon:(0,f.jsx)(hx,{}),uncheckedIcon:(0,f.jsx)(px.Z,{}),checked:v,onCheck:function(e,t){return b(t),void l.clearAll()}}),(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Show internal"}),checkedIcon:(0,f.jsx)(ya.Z,{}),uncheckedIcon:(0,f.jsx)(Za,{}),checked:!h,onCheck:function(e,t){return g(!t)}}),(0,f.jsx)(A.Z,{tooltip:{id:"Filter the logs by group"},onClick:function(){return Z(!0)},edge:"start",size:"small",children:(0,f.jsx)(ux.Z,{})})]})}),y&&(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Select log groups to display"}),maxWidth:"sm",open:!0,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:function(){return Z(!1)}},"close")],onRequestClose:function(){return Z(!1)},onApply:function(){return Z(!1)},children:(0,f.jsx)(L.sg,{children:function(){var e,t=[],r=(0,an.Z)(o.values());try{var i=function(){var r=e.value;t.push((0,f.jsx)(L.x1,{children:(0,f.jsx)(Yn.Z,{label:r,checked:!k.has(r),onCheck:function(e,t){t?k.delete(r):k.add(r),n()}})},r))};for(r.s();!(e=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return t}()})})]})},jx={direction:"column",first:{direction:"row",first:"inspectors",second:"selected-inspector",splitPercentage:25},second:{direction:"row",first:"profiler",second:"console",splitPercentage:25},splitPercentage:65},Cx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedInspector:null,selectedInspectorFullPath:[],rawMode:!1},e._editors=null,e.isProfilerShown=function(){return!!e._editors&&e._editors.getOpenedEditorNames().includes("profiler")},e.isConsoleShown=function(){return!!e._editors&&e._editors.getOpenedEditorNames().includes("console")},e.toggleProfiler=function(){e._editors&&e._editors.toggleEditor("profiler","end",75,"row")},e.toggleConsole=function(){e._editors&&e._editors.toggleEditor("console","end",75,"row")},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.gameData,r=t.onRefresh,o=t.onCall,i=t.onEdit,a=t.onStartProfiler,s=t.onStopProfiler,l=t.profilerOutput,u=t.profilingInProgress,d=t.logsManager,p=t.onOpenedEditorsChanged,h=this.state,g=h.selectedInspector,m=h.selectedInspectorFullPath,x=h.rawMode,v={inspectors:{type:"primary",title:{id:"Inspectors"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(Sh,{children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Refresh"}),onClick:r,primary:!0})}),(0,f.jsx)(Nm,{gameData:n,getInspectorDescriptions:ex,onChooseInspector:function(t,n){return e.setState({selectedInspector:t,selectedInspectorFullPath:n})}})]})})}},"selected-inspector":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,f.jsxs)(Sh,{children:[(0,f.jsx)(Ot.Z,{children:(0,f.jsx)(L.sg,{children:g?x?(0,f.jsx)(tx,{gameData:Bm()(n,m,null),onEdit:function(e,t){return i(m.concat(e),t)}}):g.renderInspector(Bm()(n,m,null),{onCall:function(e,t){return o(m.concat(e),t)},onEdit:function(e,t){return i(m.concat(e),t)}})||(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"No inspector, choose another element in the list or toggle the raw data view."})}):(0,f.jsx)(Ke.Z,{children:n?(0,f.jsx)(c.Trans,{id:"Choose an element to inspect in the list"}):(0,f.jsx)(c.Trans,{id:"Pause the game (from the toolbar) or hit refresh (on the left) to inspect the game"})})})}),(0,f.jsx)(yg.Z,{children:(0,f.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/debugger"}),(0,f.jsx)("div",{children:(0,f.jsx)(Yn.Z,{checkedIcon:(0,f.jsx)(nx.Z,{}),uncheckedIcon:(0,f.jsx)(rx.Z,{}),checked:x,onCheck:function(t,n){return e.setState({rawMode:n})}})})]})})]})}},profiler:{type:"secondary",title:{id:"Profiler"},renderEditor:function(){return(0,f.jsx)(sx,{onStart:a,onStop:s,profilerOutput:l,profilingInProgress:u})}},console:{type:"secondary",title:{id:"Console"},renderEditor:function(){return(0,f.jsx)(Sh,{children:(0,f.jsx)(bx,{logsManager:d||[]})})}}};return(0,f.jsx)(X.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,f.jsx)(Om.Z,{ref:function(t){return e._editors=t},editors:v,initialNodes:n("debugger")||jx,onPersistNodes:function(e){return r("debugger",e)},onOpenedEditorsChanged:p})}})}}]),n}(u.Component),yx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=!!this.props.debuggerIds.length;return(0,f.jsxs)(B.Z,{fullWidth:!0,value:t?this.props.selectedId:0,onChange:function(t,n,r){return e.props.onChooseDebugger(parseInt(r,10)||0)},disabled:!t,children:[this.props.debuggerIds.map((function(e){return(0,f.jsx)(U.Z,{value:e,label:{id:"Game preview #{id}",values:{id:e}}},e)})),!t&&(0,f.jsx)(U.Z,{value:0,label:{id:"No preview running. Run a preview and you will be able to inspect it with the debugger"}})]})}}]),n}(u.Component),Zx=n(41332),kx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={debuggerServerState:e.props.previewDebuggerServer.getServerState(),debuggerServerError:null,debuggerIds:e.props.previewDebuggerServer.getExistingDebuggerIds(),unregisterDebuggerServerCallbacks:null,debuggerGameData:{},profilerOutputs:{},profilingInProgress:{},gameIsPaused:{},selectedId:0,logs:{}},e._debuggerContents={},e._debuggerLogs=new Map,e.updateToolbar=function(){var t=e.state,n=t.selectedId,r=t.gameIsPaused,o=e._debuggerContents[e.state.selectedId];e.props.setToolbar((0,f.jsx)(Fm,{onPlay:function(){return e._play(e.state.selectedId)},onPause:function(){return e._pause(e.state.selectedId)},canPlay:e._hasSelectedDebugger()&&r[n],canPause:e._hasSelectedDebugger()&&!r[n],canOpenProfiler:e._hasSelectedDebugger(),isProfilerShown:!!o&&o.isProfilerShown(),onToggleProfiler:function(){e._debuggerContents[e.state.selectedId]&&e._debuggerContents[e.state.selectedId].toggleProfiler()},canOpenConsole:e._hasSelectedDebugger(),isConsoleShown:!!o&&o.isConsoleShown(),onToggleConsole:function(){e._debuggerContents[e.state.selectedId]&&e._debuggerContents[e.state.selectedId].toggleConsole()}}))},e._registerServerCallbacks=function(){var t=e.props.previewDebuggerServer,n=e.state.unregisterDebuggerServerCallbacks;if(!n||"started"!==t.getServerState()){n&&n();var r=t.registerCallbacks({onErrorReceived:function(t){e.setState({debuggerServerError:t},(function(){return e.updateToolbar()}))},onConnectionClosed:function(t){var n=t.id,r=t.debuggerIds;e._debuggerLogs.delete(n),e.setState((function(e){var t=e.selectedId,o=e.debuggerGameData,i=e.profilerOutputs,a=e.profilingInProgress,s=e.gameIsPaused;return o[n]&&delete o[n],i[n]&&delete i[n],a[n]&&delete a[n],s[n]&&delete s[n],{debuggerIds:r,selectedId:t!==n?t:r.length?r[r.length-1]:t,debuggerGameData:o,profilerOutputs:i,profilingInProgress:a,gameIsPaused:s}}),(function(){return e.updateToolbar()}))},onConnectionOpened:function(t){var n=t.id,r=t.debuggerIds;e.setState({debuggerIds:r,selectedId:n},(function(){return e.updateToolbar()}))},onConnectionErrored:function(t){var n=t.id,r=t.errorMessage;e._getLogsManager(n).addLog({type:"error",timestamp:performance.now(),group:"Debugger connection",message:"The debugger connection errored: "+r})},onServerStateChanged:function(){e.setState({debuggerServerState:t.getServerState()},(function(){return e.updateToolbar()}))},onHandleParsedMessage:function(t){var n=t.id,r=t.parsedMessage;e._handleMessage(n,r)}});e.setState({unregisterDebuggerServerCallbacks:r})}},e._handleMessage=function(t,n){if("dump"===n.command)e.setState({debuggerGameData:(0,i.Z)((0,i.Z)({},e.state.debuggerGameData),{},(0,r.Z)({},t,n.payload))});else if("profiler.output"===n.command)e.setState({profilerOutputs:(0,i.Z)((0,i.Z)({},e.state.profilerOutputs),{},(0,r.Z)({},t,n.payload))});else if("profiler.started"===n.command)e.setState((function(e){return{profilingInProgress:(0,i.Z)((0,i.Z)({},e.profilingInProgress),{},(0,r.Z)({},t,!0))}}));else if("profiler.stopped"===n.command)e.setState((function(e){return{profilingInProgress:(0,i.Z)((0,i.Z)({},e.profilingInProgress),{},(0,r.Z)({},t,!1))}}));else if("game.resumed"===n.command)e.setState((function(e){return{gameIsPaused:(0,i.Z)((0,i.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!1))}}),(function(){return e.updateToolbar()}));else if("game.paused"===n.command)e.setState((function(e){return{gameIsPaused:(0,i.Z)((0,i.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!0))}}),(function(){return e.updateToolbar()}));else if("hotReloader.logs"===n.command);else if("console.log"===n.command){if(function(e){var t=e.group,n=e.message;return"JavaScript"===t&&(n.includes("Electron Security Warning")||n.includes("Warning: This is a browser-targeted Firebase bundle"))}(n.payload))return;e._getLogsManager(t).addLog(n.payload)}else console.warn("Unknown command received from debugger client:",n.command)},e._play=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"play"}),e.setState((function(e){return{gameIsPaused:(0,i.Z)((0,i.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!1))}}),(function(){return e.updateToolbar()}))},e._pause=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"pause"}),e.setState((function(e){return{gameIsPaused:(0,i.Z)((0,i.Z)({},e.gameIsPaused),{},(0,r.Z)({},t,!0))}}),(function(){return e.updateToolbar()}))},e._refresh=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"refresh"})},e._edit=function(t,n,r){return e.props.previewDebuggerServer.sendMessage(t,{command:"set",path:n,newValue:r}),setTimeout((function(){return e._refresh(t)}),100),!0},e._call=function(t,n,r){return e.props.previewDebuggerServer.sendMessage(t,{command:"call",path:n,args:r}),setTimeout((function(){return e._refresh(t)}),100),!0},e._startProfiler=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"profiler.start"})},e._stopProfiler=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"profiler.stop"})},e._hasSelectedDebugger=function(){var t=e.state,n=t.selectedId;return-1!==t.debuggerIds.indexOf(n)},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this._registerServerCallbacks()}},{key:"componentWillUnmount",value:function(){this.state.unregisterDebuggerServerCallbacks&&this.state.unregisterDebuggerServerCallbacks()}},{key:"_getLogsManager",value:function(e){var t=this._debuggerLogs.get(e);return t||(t=new fx,this._debuggerLogs.set(e,t)),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.debuggerServerError,r=t.debuggerServerState,o=t.selectedId,i=t.debuggerIds,a=t.debuggerGameData,s=t.profilerOutputs,l=t.profilingInProgress;return(0,f.jsxs)(Sh,{children:["stopped"===r&&!n&&(0,f.jsxs)(Zx.Z,{children:[(0,f.jsx)(Qe.Z,{}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Debugger is starting..."})})]}),"stopped"===r&&n&&(0,f.jsx)(Zx.Z,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Unable to start the debugger server! Make sure that you are authorized to run servers on this computer."})})}),"started"===r&&(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsx)(yx,{selectedId:o,debuggerIds:i,onChooseDebugger:function(t){return e.setState({selectedId:t},(function(){return e.updateToolbar()}))}}),this._hasSelectedDebugger()&&(0,f.jsx)(Cx,{ref:function(t){return e._debuggerContents[o]=t},gameData:a[o],onPlay:function(){return e._play(o)},onPause:function(){return e._pause(o)},onRefresh:function(){return e._refresh(o)},onEdit:function(t,n){return e._edit(o,t,n)},onCall:function(t,n){return e._call(o,t,n)},onStartProfiler:function(){return e._startProfiler(o)},onStopProfiler:function(){return e._stopProfiler(o)},profilerOutput:s[o],profilingInProgress:l[o],logsManager:this._getLogsManager(o),onOpenedEditorsChanged:this.updateToolbar}),!this._hasSelectedDebugger()&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Run a preview and you will be able to inspect it with the debugger."})})]})]})}}]),n}(u.Component),wx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={subscriptionChecked:!1},e}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._checkUserHasSubscription()}},{key:"componentDidMount",value:function(){this._checkUserHasSubscription()}},{key:"_checkUserHasSubscription",value:function(){this._subscriptionChecker&&this.props.isActive&&!this.state.subscriptionChecked&&(this._subscriptionChecker.checkUserHasSubscription(),this.setState({subscriptionChecked:!0}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.previewDebuggerServer;return n&&r?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(kx,{project:n,setToolbar:this.props.setToolbar,previewDebuggerServer:r,ref:function(t){return e.editor=t}}),(0,f.jsx)(Qn.Z,{ref:function(t){return e._subscriptionChecker=t},id:"Debugger",title:(0,f.jsx)(c.Trans,{id:"Debugger"}),mode:"try"})]}):null}}]),n}(u.Component),Tx=function(e){return(0,f.jsx)(wx,(0,i.Z)({},e))},Ex={textField:{top:po.B2,fontSize:12}};var Sx=function(e){var t=e.item,n=e.itemName,r=e.id,o=e.data,a=e.isBold,s=e.onRename,l=e.editingName,c=e.getThumbnail,d=e.renderItemLabel,p=e.selected,h=e.onItemSelected,g=e.errorStatus,x=e.buildMenuTemplate,v=e.onEdit,b=e.hideMenuButton,j=e.scaleUpItemIconWhenSelected,C=u.useRef(null),y=u.useRef(!1),Z=u.useContext(m.Z);u.useEffect((function(){if(l){y.current=!1;var e=setTimeout((function(){C.current&&C.current.focus()}),100);return function(){return clearTimeout(e)}}}),[l]);var k=l?(0,f.jsx)(po.ZP,{id:"rename-item-field",margin:"none",ref:C,defaultValue:n,onBlur:function(e){s(y.current?n:e.currentTarget.value)},onKeyPress:function(e){(0,Io.ph)(e)&&C.current&&C.current.blur()},onKeyUp:function(e){if((0,Io.W$)(e)){var t=C.current;t&&(y.current=!0,t.blur())}},fullWidth:!0,style:Ex.textField}):(0,f.jsx)("div",{title:"string"===typeof n?n:void 0,style:(0,i.Z)((0,i.Z)({},Do.t),{},{color:p?Z.listItem.selectedTextColor:void 0,fontStyle:a?"italic":void 0,fontWeight:a?"bold":"normal"}),children:d?d():(0,f.jsx)(J.Z,{noMargin:!0,size:"body-small",children:n})}),w={backgroundColor:p?""===g?Z.listItem.selectedBackgroundColor:"error"===g?Z.listItem.selectedErrorBackgroundColor:Z.listItem.selectedWarningBackgroundColor:void 0,color:""===g?void 0:"error"===g?Z.listItem.errorTextColor:Z.listItem.warningTextColor},T=c?(0,f.jsx)(Mc.Z,{iconSize:24,src:c(),cssAnimation:j&&p?"scale-and-jiggle 0.8s forwards":""}):null;return(0,f.jsx)(ze,{style:(0,i.Z)({},w),primaryText:k,leftIcon:T,displayMenuButton:!b,rightIconColor:p?Z.listItem.selectedRightIconColor:Z.listItem.rightIconColor,buildMenuTemplate:x,onClick:function(){h&&(l||h(p?null:t))},onDoubleClick:function(e){0===e.button&&v&&(l||(h(null),v(t)))},id:r,data:o})},Px=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).DragSourceAndDropTarget=(0,Lt.x)(e.props.reactDndType),e}return(0,lt.Z)(n,[{key:"forceUpdateGrid",value:function(){this._list&&this._list.forceUpdateGrid()}},{key:"scrollToItem",value:function(e){var t=this,n=this.props.fullList.findIndex((function(n){return t.props.getItemName(n)===t.props.getItemName(e)}));this._list&&-1!==n&&this._list.scrollToRow(n)}},{key:"_renderItemRow",value:function(e,t,n){var r=this,o=this.props,i=o.selectedItems,a=o.getItemThumbnail,s=o.erroredItems,l=o.isItemBold,c=o.onEditItem,u=o.renamedItem,d=o.getItemName,p=o.getItemId,h=o.getItemData,g=o.renderItemLabel,m=o.scaleUpItemIconWhenSelected,x="small"===n,v=u===e,b=d(e),j=-1!==i.findIndex((function(e){return d(e)===b}));return(0,f.jsx)(Sx,{item:e,itemName:b,id:p?p(e,t):void 0,data:h?h(e,t):void 0,renderItemLabel:g?function(){return g(e)}:void 0,isBold:!!l&&l(e),onRename:function(t){return r.props.onRename(e,t)},editingName:v,getThumbnail:a?function(){return a(e)}:void 0,selected:j,onItemSelected:this.props.onItemSelected,errorStatus:s&&s[b]||"",buildMenuTemplate:function(){return r.props.buildMenuTemplate(e,t)},onEdit:c,hideMenuButton:x,scaleUpItemIconWhenSelected:m})}},{key:"render",value:function(){var e=this,t=this.props,n=t.height,r=t.width,o=t.fullList,i=t.addNewItemLabel,a=t.addNewItemId,s=t.renamedItem,l=t.getItemThumbnail,c=t.getItemName,u=t.onAddNewItem,d=t.onMoveSelectionToItem,p=t.canMoveSelectionToItem,h=t.selectedItems,g=this.DragSourceAndDropTarget,m=new Image;return m.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",(0,f.jsx)(T.I,{children:function(t){return(0,f.jsx)(eo.wh,{children:function(x){return(0,f.jsx)(jr.aV,{ref:function(t){return e._list=t},overscanIndicesGetter:function(e){var t=e.cellCount,n=(e.overscanCellsCount,e.startIndex),r=e.stopIndex;return{overscanStartIndex:Math.max(0,n-20),overscanStopIndex:Math.min(t-1,r+20)}},height:n,rowCount:o.length+(u?1:0),rowHeight:l?32:29,rowRenderer:function(n){var v=n.index,b=n.key,j=n.style;if(v>=o.length)return(0,f.jsx)("div",{style:j,children:(0,f.jsx)(ht,{onClick:u,primaryText:r<200?"":i,id:a})},b);var C=o[v],y=s===C,Z=-1!==h.findIndex((function(e){return c(e)===c(C)})),k=!y&&("touch"!==x||Z);return(0,f.jsx)("div",{style:j,children:(0,f.jsx)(g,{beginDrag:function(){return"touch"===x&&e._list&&(e._list.props.style.overflow="hidden"),e.props.onItemSelected(C),{name:c(C),thumbnail:"GD_OBJECT_WITH_CONTEXT"===e.props.reactDndType&&l?l(C):void 0}},canDrag:function(){return k},canDrop:function(){return!p||p(C)},drop:function(){d(C)},endDrag:function(){"touch"===x&&e._list&&(e._list.props.style.overflow="auto",e.forceUpdate())},children:function(n){var r=n.connectDragSource,o=n.connectDropTarget,i=n.connectDragPreview,a=n.isOver,s=n.canDrop;i(m);var l=o((0,f.jsxs)("div",{children:[a&&(0,f.jsx)(Mt.Z,{canDrop:s}),e._renderItemRow(C,v,t)]}));return l?r(l):null}})},b)},width:r})}})}})}}]),n}(u.Component),Ix={listContainer:{flex:1}},Dx=function(e){return e.group.getName()},Ax=function(e){return e.global},Lx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).displayedObjectGroupsList=[],e.displayedGlobalObjectGroupsList=[],e.state={renamedGroupWithContext:null,selectedGroupWithContext:null,searchText:""},e.addGroup=function(){var t=e.props,n=t.globalObjectGroups,r=t.objectGroups,o=(0,Ut.Z)("Group",(function(e){return r.has(e)||n.has(e)})),i=r.insertNew(o,r.count());e._onObjectGroupModified(),e.props.onGroupAdded&&e.props.onGroupAdded();var a={group:i,global:!1};setTimeout((function(){e.scrollToItem(a)}),100),e._onEditName(a)},e._onDelete=function(t){var n=t.group,r=t.global,o=e.props,i=o.globalObjectGroups,a=o.objectGroups;F.ZP.showConfirmDialog("Are you sure you want to remove this group? This can't be undone.")&&e.props.onDeleteGroup(t,(function(t){t&&(r?i.remove(n.getName()):a.remove(n.getName()),e._onObjectGroupModified(),e.props.onGroupRemoved&&e.props.onGroupRemoved())}))},e._onEditName=function(t){e.setState({renamedGroupWithContext:t},(function(){e.sortableList&&e.sortableList.forceUpdateGrid()}))},e._onDuplicate=function(t){var n=t.group,r=t.global,o=e.props,i=o.globalObjectGroups,a=o.objectGroups,s=(0,Ut.Z)(n.getName(),(function(e){return a.has(e)||i.has(e)}),""),l=r?i:a,c=(0,qt.XH)(n),u=l.insertNew(s,l.getPosition(n.getName())+1);(0,qt.qx)(u,c,"unserializeFrom"),u.setName(s),e._onObjectGroupModified()},e._onRename=function(t,n){var r=t.group,o=t.global;if(e.setState({renamedGroupWithContext:null}),r.getName()!==n){var i=e.props.getValidatedObjectOrGroupName(n,o);e.props.onRenameGroup(t,i,(function(t){t&&(r.setName(i),e._onObjectGroupModified(),e.props.onGroupRenamed&&e.props.onGroupRenamed())}))}},e._setAsGlobalGroup=function(t,n){var r=n.group,o=e.props,i=o.globalObjectGroups,a=o.objectGroups,s=o.beforeSetAsGlobalGroup,l=r.getName();i.has(l)?(0,Xr.T4)(t._({id:"A global object with this name already exists. Please change the object name before setting it as a global object"}),{delayToNextTick:!0}):s&&!s(l)||F.ZP.showConfirmDialog(t._({id:"This group will be loaded and available in all the scenes. This is only recommended for groups that you reuse a lot and can't be undone. Make this group global?"}))&&(i.insert(r,i.count()),a.remove(l),e._onObjectGroupModified())},e._onObjectGroupModified=function(){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),e.forceUpdate()},e._canMoveSelectionTo=function(t){return!!e.state.selectedGroupWithContext&&(e.state.selectedGroupWithContext.global===t.global||!(e.state.selectedGroupWithContext.global||!t.global||0!==e.displayedGlobalObjectGroupsList.indexOf(t)))},e._selectGroup=function(t){e.setState({selectedGroupWithContext:t})},e._moveSelectionTo=function(t){var n=e.state.selectedGroupWithContext;if(n){var r,o,i,a=e.props,s=a.globalObjectGroups,l=a.objectGroups,c=n.global===t.global,u=!n.global&&t.global&&0===s.getPosition(t.group.getName());if(c)o=(r=n.global?s:l).getPosition(n.group.getName()),i=r.getPosition(t.group.getName());else{if(!u)return;o=(r=l).getPosition(n.group.getName()),i=e.state.searchText?r.getPosition(e.displayedObjectGroupsList[e.displayedObjectGroupsList.length-1].group.getName())+1:r.count()}i>o&&(i-=1),r.move(o,i),e._onObjectGroupModified(),e.sortableList&&e.sortableList.forceUpdateGrid()}},e._renderGroupMenuTemplate=function(t){return function(n,r){return[{label:t._({id:"Duplicate"}),click:function(){return e._onDuplicate(n)}},{type:"separator"},{label:t._({id:"Edit group"}),click:function(){return e.props.onEditGroup(n.group)}},{type:"separator"},{label:t._({id:"Rename"}),click:function(){return e._onEditName(n)}},{label:t._({id:"Set as global group"}),enabled:!Ax(n),click:function(){return e._setAsGlobalGroup(t,n)},visible:!1!==e.props.canSetAsGlobalGroup},{label:t._({id:"Delete"}),click:function(){return e._onDelete(n)}},{type:"separator"},{label:t._({id:"Add a new group..."}),click:e.addGroup}]}},e.scrollToItem=function(t){e.sortableList&&e.sortableList.scrollToItem(t)},e}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.renamedGroupWithContext!==t.renamedGroupWithContext||this.state.selectedGroupWithContext!==t.selectedGroupWithContext||this.state.searchText!==t.searchText||(this.props.globalObjectGroups!==e.globalObjectGroups||this.props.objectGroups!==e.objectGroups)}},{key:"render",value:function(){var e=this,t=this.props,n=t.globalObjectGroups,r=t.objectGroups,o=this.state.searchText,i=Ac(r).map((function(e){return{group:e,global:!1}})),a=Ac(n).map((function(e){return{group:e,global:!0}}));this.displayedObjectGroupsList=Dc(i,{searchText:o}),this.displayedGlobalObjectGroupsList=Dc(a,{searchText:o});var s,l=Dc([].concat((0,j.Z)(i),(0,j.Z)(a)),{searchText:o}),u=r.ptr+";"+n.ptr,d=this.state.renamedGroupWithContext?l.find((s=this.state.renamedGroupWithContext,function(e){return s&&e&&s.global===e.global&&s.group===e.group})):null;return(0,f.jsxs)(Sh,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:o,onRequestSearch:function(){},onChange:function(t){return e.setState({searchText:t})},placeholder:{id:"Search object groups"}})})}),(0,f.jsx)("div",{style:Ix.listContainer,children:(0,f.jsx)(jr.qj,{children:function(t){var n=t.height,r=t.width;return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(Px,{ref:function(t){return e.sortableList=t},fullList:l,width:r,height:n,getItemName:Dx,getItemId:function(e,t){return"group-item-"+t},isItemBold:Ax,onEditItem:function(t){return e.props.onEditGroup(t.group)},selectedItems:e.state.selectedGroupWithContext?[e.state.selectedGroupWithContext]:[],onItemSelected:e._selectGroup,renamedItem:d,onRename:e._onRename,buildMenuTemplate:e._renderGroupMenuTemplate(o),onMoveSelectionToItem:e._moveSelectionTo,canMoveSelectionToItem:e._canMoveSelectionTo,reactDndType:"GD_GROUP_WITH_CONTEXT"},u)}})}})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(S,{label:(0,f.jsx)(c.Trans,{id:"Add a new group"}),primary:!0,onClick:this.addGroup,id:"add-new-group-button",icon:(0,f.jsx)(Ue.Z,{})})})})]})}}]),n}(u.Component);Lx.defaultProps={onDeleteGroup:function(e,t){return t(!0)},onRenameGroup:function(e,t,n){return n(!0)}};var Mx=n.g.gd,Fx={objectSelector:{position:"sticky",bottom:0}},Ox=function(e){var t=e.project,n=e.group,r=e.globalObjectsContainer,o=e.objectsContainer,i=e.onSizeUpdated,s=e.onObjectGroupUpdated,l=u.useState(""),d=(0,a.Z)(l,2),p=d[0],h=d[1],g=n.getAllObjectsNames().toJSArray();return(0,f.jsxs)(C.ak,{noMargin:!0,children:[function(){var e=void 0;if(0===g.length)return null;g.forEach((function(t){var n=Mx.getTypeOfObject(r,o,t,!1);e=void 0===e||n===e?n:""}));var t=""===e?(0,f.jsx)(c.Trans,{id:"This group contains objects of different kinds. You'll only be able to use actions and conditions common to all objects with this group."}):(0,f.jsx)(c.Trans,{id:"This group contains objects of the same kind ({type}). You can use actions and conditions related to this kind of objects in events with this group.",values:{type:e}});return(0,f.jsx)(we.Z,{kind:"info",children:t})}(),(0,f.jsx)(Ge,{children:n.getAllObjectsNames().toJSArray().map((function(e){var a=Fc(r,o,e),l=t&&a?(0,f.jsx)(Mc.Z,{iconSize:24,src:Oc.Z.getThumbnail(t,a.getConfiguration())}):null;return(0,f.jsx)(ze,{primaryText:e,displayRemoveButton:!0,onRemove:function(){return function(e){n.removeObject(e),i&&i(),s&&s()}(e)},leftIcon:l},e)}))}),(0,f.jsx)(ee.Z,{style:Fx.objectSelector,background:"medium",children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(Nc,{project:t,globalObjectsContainer:r,objectsContainer:o,value:p,excludedObjectOrGroupNames:g,onChange:h,onChoose:function(e){n.addObject(e),h(""),i&&i(),s&&s()},openOnFocus:!0,noGroups:!0,hintText:{id:"Choose an object to add to the group"},fullWidth:!0})})})]})},Rx=function(e){var t=e.project,n=e.group,r=e.onApply,o=e.onCancel,i=e.globalObjectsContainer,a=e.objectsContainer,s=(0,_t.Z)(),l=mt({serializableObject:n,onCancel:o}),u=l.onCancelChanges,d=l.notifyOfChange;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Edit {0}",values:{0:n.getName()}}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:u},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:r},"apply")],onRequestClose:u,onApply:r,open:!0,children:(0,f.jsx)(Ox,{project:t,group:n,globalObjectsContainer:i,objectsContainer:a,onSizeUpdated:s,onObjectGroupUpdated:d})},n.ptr)},Bx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={editedGroup:null},e.editGroup=function(t){return e.setState({editedGroup:t})},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.objectsContainer,o=t.globalObjectsContainer,i=t.objectGroups,a=t.globalObjectGroups;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Lx,{globalObjectGroups:a,objectGroups:i,onEditGroup:this.editGroup,onDeleteGroup:this.props.onDeleteGroup,onRenameGroup:this.props.onRenameGroup,getValidatedObjectOrGroupName:this.props.getValidatedObjectOrGroupName,onGroupAdded:this.props.onGroupsUpdated,onGroupRemoved:this.props.onGroupsUpdated,onGroupRenamed:this.props.onGroupsUpdated,canSetAsGlobalGroup:this.props.canSetAsGlobalGroup,unsavedChanges:this.props.unsavedChanges}),this.state.editedGroup&&(0,f.jsx)(Rx,{project:n,group:this.state.editedGroup,globalObjectsContainer:o,objectsContainer:r,onCancel:function(){return e.editGroup(null)},onApply:function(){e.props.onGroupsUpdated&&e.props.onGroupsUpdated(),e.editGroup(null)}},o.ptr+";"+r.ptr)]})}}]),n}(u.Component),_x=n.g.gd,Nx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={currentTab:"config"},e._getValidatedObjectOrGroupName=function(t){var n=e.props,r=n.objectsContainer,o=n.globalObjectsContainer;return(0,Ut.Z)(_x.Project.getSafeName(t),(function(e){return!!(r.hasObjectNamed(e)||o.hasObjectNamed(e)||r.getObjectGroups().has(e)||o.getObjectGroups().has(e))}))},e._onDeleteGroup=function(t,n){var r=t.group,o=e.props,i=o.project,a=o.eventsFunction,s=o.globalObjectsContainer,l=o.objectsContainer,c=F.ZP.showConfirmDialog("Do you want to remove all references to this group in events (actions and conditions using the group)?");_x.WholeProjectRefactorer.objectOrGroupRemovedInEventsFunction(i,a,s,l,r.getName(),!0,!!c),n(!0)},e._onRenameGroup=function(t,n,r){var o=t.group,i=e.props,a=i.project,s=i.eventsFunction,l=i.globalObjectsContainer,c=i.objectsContainer;o.getName()!==n&&_x.WholeProjectRefactorer.objectOrGroupRenamedInEventsFunction(a,s,l,c,o.getName(),n,!0),r(!0)},e._chooseTab=function(t){return e.setState({currentTab:t})},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,o=e.eventsFunction,i=e.eventsBasedBehavior,a=e.eventsBasedObject,s=e.freezeEventsFunctionType,l=e.onConfigurationUpdated,u=e.onParametersOrGroupsUpdated,d=e.freezeParameters,p=e.helpPagePath,h=e.renderConfigurationHeader,g=e.onMoveFreeEventsParameter,m=e.onMoveBehaviorEventsParameter,x=e.onMoveObjectEventsParameter,v=e.getFunctionGroupNames,b=e.eventsFunctionsContainer;return(0,f.jsxs)(L.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,f.jsx)(K.m,{value:this.state.currentTab,onChange:this._chooseTab,options:[{value:"config",label:(0,f.jsx)(c.Trans,{id:"Configuration"})},{value:"parameters",label:(0,f.jsx)(c.Trans,{id:"Parameters"})},{value:"groups",label:(0,f.jsx)(c.Trans,{id:"Object groups"})}]})})}),"config"===this.state.currentTab?(0,f.jsx)(Ot.Z,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(xm,{project:t,eventsFunction:o,eventsBasedBehavior:i,eventsBasedObject:a,eventsFunctionsContainer:b,helpPagePath:p,onConfigurationUpdated:l,renderConfigurationHeader:h,freezeEventsFunctionType:s,getFunctionGroupNames:v})})}):null,"parameters"===this.state.currentTab?(0,f.jsx)(Ot.Z,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(pm,{project:t,eventsFunction:o,eventsBasedBehavior:i,eventsBasedObject:a,eventsFunctionsContainer:b,onParametersUpdated:u,helpPagePath:p,freezeParameters:d,onMoveFreeEventsParameter:g,onMoveBehaviorEventsParameter:m,onMoveObjectEventsParameter:x},o?o.ptr:null)})}):null,"groups"===this.state.currentTab?(0,f.jsx)(Bx,{project:t,globalObjectsContainer:n,objectsContainer:r,globalObjectGroups:n.getObjectGroups(),objectGroups:o.getObjectGroups(),getValidatedObjectOrGroupName:this._getValidatedObjectOrGroupName,onRenameGroup:this._onRenameGroup,onDeleteGroup:this._onDeleteGroup,onGroupsUpdated:u,canSetAsGlobalGroup:!1,unsavedChanges:this.props.unsavedChanges}):null]})}}]),n}(u.Component),Ux=n(9011),Hx="Events Function",Vx=n.g.gd,Wx={listContainer:{flex:1},tooltip:{marginRight:5,verticalAlign:"bottom"}},zx=function(e){var t=(0,f.jsx)(J.Z,{noMargin:!0,size:"body-small",children:e.getName()});return e.isPrivate()?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(De.ZP,{title:(0,f.jsx)(c.Trans,{id:"This function won't be visible in the events editor."}),children:(0,f.jsx)(Za,{fontSize:"small",style:Wx.tooltip})}),t]}):e.isAsync()?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(De.ZP,{title:(0,f.jsx)(c.Trans,{id:'This function is asynchronous - it will only allow subsequent events to run after calling the action "End asynchronous task" within the function.'}),children:(0,f.jsx)(Ux.Z,{fontSize:"small",style:Wx.tooltip})}),t]}):t},Gx=function(e){return e.getName()},Yx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={renamedEventsFunction:null,searchText:""},e._togglePrivate=function(t){t.setPrivate(!t.isPrivate()),e.forceUpdate()},e._toggleAsync=function(t){t.setAsync(!t.isAsync()),e.forceUpdateList()},e._deleteEventsFunction=function(t,n){var r=n.askForConfirmation,o=e.props.eventsFunctionsContainer;if(r&&!F.ZP.showConfirmDialog("Are you sure you want to remove this function? This can't be undone."))return;e.props.onDeleteEventsFunction(t,(function(n){n&&(o.removeEventsFunction(t.getName()),e._onEventsFunctionModified())}))},e._editName=function(t){e.setState({renamedEventsFunction:t},(function(){e.sortableList&&e.sortableList.forceUpdateGrid()}))},e._getFunctionThumbnail=function(e){switch(e.getFunctionType()){default:return"res/functions/function.svg";case Vx.EventsFunction.Action:case Vx.EventsFunction.ActionWithOperator:switch(e.getName()){default:return"res/functions/action.svg";case"onSceneUnloading":case"onDestroy":return"res/functions/destroy.svg";case"onSceneResumed":case"onActivate":return"res/functions/activate.svg";case"onScenePaused":case"onDeActivate":return"res/functions/deactivate.svg";case"onScenePreEvents":case"onScenePostEvents":case"doStepPreEvents":case"doStepPostEvents":return"res/functions/step.svg";case"onSceneLoaded":case"onFirstSceneLoaded":case"onCreated":return"res/functions/create.svg";case"onHotReloading":return"res/functions/reload.svg"}case Vx.EventsFunction.Condition:return"res/functions/condition.svg";case Vx.EventsFunction.Expression:case Vx.EventsFunction.ExpressionAndCondition:return"res/functions/expression.svg"}},e._rename=function(t,n){e.setState({renamedEventsFunction:null}),t.getName()!==n&&e.props.onRenameEventsFunction(t,n,(function(t){t&&e._onEventsFunctionModified()}))},e._moveSelectionTo=function(t){var n=e.props,r=n.eventsFunctionsContainer,o=n.selectedEventsFunction;if(o){var i=r.getEventsFunctionPosition(o),a=r.getEventsFunctionPosition(t);r.moveEventsFunction(i,a+(a<=i?0:-1)),e.forceUpdateList()}},e.forceUpdateList=function(){e._onEventsFunctionModified(),e.sortableList&&e.sortableList.forceUpdateGrid()},e._copyEventsFunction=function(e){Yt.set(Hx,{eventsFunction:(0,qt.XH)(e),name:e.getName()})},e._cutEventsFunction=function(t){e._copyEventsFunction(t),e._deleteEventsFunction(t,{askForConfirmation:!1})},e._pasteEventsFunction=function(t){if(Yt.has(Hx)){var n=Yt.get(Hx),r=Gt.extractObjectProperty(n,"eventsFunction"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props,a=i.project,s=i.eventsFunctionsContainer,l=(0,Ut.Z)(o,(function(e){return s.hasEventsFunctionNamed(e)})),c=s.insertNewEventsFunction(l,t);(0,qt.qx)(c,r,"unserializeFrom",a),c.setName(l),e.props.onEventsFunctionAdded(c),e._onEventsFunctionModified(),e.props.onSelectEventsFunction(c),e._editName(c)}}},e._duplicateEventsFunction=function(t,n){var r=e.props.eventsFunctionsContainer,o=(0,Ut.Z)(t.getName(),(function(e){return r.hasEventsFunctionNamed(e)})),i=r.insertEventsFunction(t,n);i.setName(o),e.props.onEventsFunctionAdded(i),e._onEventsFunctionModified(),e.props.onSelectEventsFunction(i),e._editName(i)},e._renderEventsFunctionMenuTemplate=function(t){return function(n,r){return[{label:t._({id:"Rename"}),click:function(){return e._editName(n)},enabled:e.props.canRename(n)},{label:n.isPrivate()?t._({id:"Make public"}):t._({id:"Make private"}),click:function(){return e._togglePrivate(n)}},{label:n.isAsync()?t._({id:"Make synchronous"}):t._({id:"Make asynchronous"}),click:function(){return e._toggleAsync(n)}},{label:t._({id:"Delete"}),click:function(){return e._deleteEventsFunction(n,{askForConfirmation:!0})}},{type:"separator"},{label:t._({id:"Copy"}),click:function(){return e._copyEventsFunction(n)}},{label:t._({id:"Cut"}),click:function(){return e._cutEventsFunction(n)}},{label:t._({id:"Paste"}),enabled:Yt.has(Hx),click:function(){return e._pasteEventsFunction(r+1)}},{label:t._({id:"Duplicate"}),click:function(){return e._duplicateEventsFunction(n,r+1)}}]}},e._addNewEventsFunction=function(){var t=e.props,n=t.eventsFunctionsContainer,r=t.project;e.props.onAddEventsFunction((function(t){if(t){var o=t.name||(0,Ut.Z)("Function",(function(e){return n.hasEventsFunctionNamed(e)})),i=n.insertNewEventsFunction(o,n.getEventsFunctionsCount());i.setFunctionType(t.functionType),i.isCondition()&&!i.isExpression()&&Vx.PropertyFunctionGenerator.generateConditionSkeleton(r,i),setTimeout((function(){e.scrollToItem(i)}),100),e.props.onEventsFunctionAdded(i),e._onEventsFunctionModified(),e.props.onSelectEventsFunction(i),e.props.canRename(i)&&e._editName(i)}}))},e.scrollToItem=function(t){e.sortableList&&e.sortableList.scrollToItem(t)},e}return(0,lt.Z)(n,[{key:"_onEventsFunctionModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsFunctionsContainer,o=t.selectedEventsFunction,i=t.onSelectEventsFunction,a=this.state.searchText,s=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))}(function(e){return(0,Nt.mapFor)(0,e.getEventsFunctionsCount(),(function(t){return e.getEventsFunctionAt(t)}))}(r),a),l=n.ptr+";"+r.ptr;return(0,f.jsxs)(Sh,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:a,onRequestSearch:function(){},onChange:function(t){return e.setState({searchText:t})},placeholder:{id:"Search functions"}})})}),(0,f.jsx)("div",{style:Wx.listContainer,children:(0,f.jsx)(jr.qj,{children:function(t){var n=t.height,r=t.width;return(0,f.jsx)(c.I18n,{children:function(t){var a=t.i18n;return(0,f.jsx)(Px,{ref:function(t){return e.sortableList=t},fullList:s,width:r,height:n,renderItemLabel:zx,getItemName:Gx,getItemThumbnail:e._getFunctionThumbnail,selectedItems:o?[o]:[],onItemSelected:i,renamedItem:e.state.renamedEventsFunction,onRename:e._rename,onMoveSelectionToItem:e._moveSelectionTo,buildMenuTemplate:e._renderEventsFunctionMenuTemplate(a),reactDndType:"GD_EVENTS_FUNCTION"},l)}})}})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(S,{label:(0,f.jsx)(c.Trans,{id:"Add a new function"}),primary:!0,onClick:this._addNewEventsFunction,icon:(0,f.jsx)(Ue.Z,{})})})})]})}}]),n}(u.Component);Yx.defaultProps={onDeleteEventsFunction:function(e,t){return t(!0)},onRenameEventsFunction:function(e,t,n){return n(!0)}};var qx="Events Based Behavior",Xx={listContainer:{flex:1},tooltip:{marginRight:5,verticalAlign:"bottom"}},Jx=function(e){var t=(0,f.jsx)(J.Z,{noMargin:!0,size:"body-small",children:e.getName()});return e.isPrivate()?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(De.ZP,{title:(0,f.jsx)(c.Trans,{id:"This behavior won't be visible in the events editor."}),children:(0,f.jsx)(Za,{fontSize:"small",style:Xx.tooltip})}),t]}):t},Kx=function(e){return e.getName()},Qx=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={renamedEventsBasedBehavior:null,searchText:""},e._deleteEventsBasedBehavior=function(t,n){var r=n.askForConfirmation,o=e.props.eventsBasedBehaviorsList;if(r&&!F.ZP.showConfirmDialog("Are you sure you want to remove this behavior? This can't be undone."))return;e.props.onDeleteEventsBasedBehavior(t,(function(n){n&&(o.remove(t.getName()),e._onEventsBasedBehaviorModified())}))},e._editName=function(t){e.setState({renamedEventsBasedBehavior:t},(function(){e.sortableList&&e.sortableList.forceUpdateGrid()}))},e._rename=function(t,n){e.setState({renamedEventsBasedBehavior:null}),t.getName()!==n&&e.props.onRenameEventsBasedBehavior(t,n,(function(n){n&&(e._onEventsBasedBehaviorModified(),e.props.onEventsBasedBehaviorRenamed(t))}))},e._moveSelectionTo=function(t){var n=e.props,r=n.eventsBasedBehaviorsList,o=n.selectedEventsBasedBehavior;if(o){var i=r.getPosition(o),a=r.getPosition(t);r.move(i,a+(a<=i?0:-1)),e.forceUpdateList()}},e._togglePrivate=function(t){t.setPrivate(!t.isPrivate()),e.forceUpdate()},e.forceUpdateList=function(){e._onEventsBasedBehaviorModified(),e.sortableList&&e.sortableList.forceUpdateGrid()},e._copyEventsBasedBehavior=function(t){Yt.set(qx,{eventsBasedBehavior:(0,qt.XH)(t),name:t.getName(),extensionName:e.props.eventsFunctionsExtension.getName()})},e._cutEventsBasedBehavior=function(t){e._copyEventsBasedBehavior(t),e._deleteEventsBasedBehavior(t,{askForConfirmation:!1})},e._pasteEventsBasedBehavior=function(t){if(Yt.has(qx)){var n=Yt.get(qx),r=Gt.extractObjectProperty(n,"eventsBasedBehavior"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props,a=i.project,s=i.eventsBasedBehaviorsList,l=(0,Ut.Z)(o,(function(e){return s.has(e)})),c=s.insertNew(l,t);(0,qt.qx)(c,r,"unserializeFrom",a),c.setName(l);var u=Gt.extractStringProperty(n,"extensionName");u&&e.props.onEventsBasedBehaviorPasted(c,u),e._onEventsBasedBehaviorModified(),e.props.onSelectEventsBasedBehavior(c),e._editName(c)}}},e._renderEventsBasedBehaviorMenuTemplate=function(t){return function(n,r){return[{label:t._({id:"Properties"}),click:function(){return e.props.onEditProperties(n)}},{type:"separator"},{label:t._({id:"Rename"}),click:function(){return e._editName(n)}},{label:t._({id:"Delete"}),click:function(){return e._deleteEventsBasedBehavior(n,{askForConfirmation:!0})}},{label:n.isPrivate()?t._({id:"Make public"}):t._({id:"Make private"}),click:function(){return e._togglePrivate(n)}},{type:"separator"},{label:t._({id:"Copy"}),click:function(){return e._copyEventsBasedBehavior(n)}},{label:t._({id:"Cut"}),click:function(){return e._cutEventsBasedBehavior(n)}},{label:t._({id:"Paste"}),enabled:Yt.has(qx),click:function(){return e._pasteEventsBasedBehavior(r+1)}}]}},e._addNewEventsBasedBehavior=function(){var t=e.props.eventsBasedBehaviorsList,n=(0,Ut.Z)("MyBehavior",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());e._onEventsBasedBehaviorModified(),setTimeout((function(){e.scrollToItem(r)}),100),e.props.onSelectEventsBasedBehavior(r),e._editName(r)},e.scrollToItem=function(t){e.sortableList&&e.sortableList.scrollToItem(t)},e}return(0,lt.Z)(n,[{key:"_onEventsBasedBehaviorModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.forceUpdate()}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.project,o=n.eventsBasedBehaviorsList,i=n.selectedEventsBasedBehavior,a=n.onSelectEventsBasedBehavior,s=this.state.searchText,l=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))}((e=o,(0,Nt.mapVector)(e,(function(e){return e}))),s),u=r.ptr+";"+o.ptr;return(0,f.jsxs)(Sh,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:s,onRequestSearch:function(){},onChange:function(e){return t.setState({searchText:e})},placeholder:{id:"Search behaviors"}})})}),(0,f.jsx)("div",{style:Xx.listContainer,children:(0,f.jsx)(jr.qj,{children:function(e){var n=e.height,r=e.width;return(0,f.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,f.jsx)(Px,{ref:function(e){return t.sortableList=e},fullList:l,width:r,height:n,renderItemLabel:Jx,getItemName:Kx,selectedItems:i?[i]:[],onItemSelected:a,renamedItem:t.state.renamedEventsBasedBehavior,onRename:t._rename,onMoveSelectionToItem:t._moveSelectionTo,buildMenuTemplate:t._renderEventsBasedBehaviorMenuTemplate(o),reactDndType:"GD_EVENTS_BASED_BEHAVIOR"},u)}})}})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(S,{label:(0,f.jsx)(c.Trans,{id:"Add a new behavior"}),primary:!0,onClick:this._addNewEventsBasedBehavior,icon:(0,f.jsx)(Ue.Z,{})})})})]})}}]),n}(u.Component);Qx.defaultProps={onDeleteEventsBasedBehavior:function(e,t){return t(!0)},onRenameEventsBasedBehavior:function(e,t,n){return n(!0)}};var $x="Events Based Object",ev={listContainer:{flex:1}},tv=function(e){return e.getName()},nv=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={renamedEventsBasedObject:null,searchText:""},e._deleteEventsBasedObject=function(t,n){var r=n.askForConfirmation,o=e.props.eventsBasedObjectsList;if(r&&!F.ZP.showConfirmDialog("Are you sure you want to remove this object? This can't be undone."))return;e.props.onDeleteEventsBasedObject(t,(function(n){n&&(o.remove(t.getName()),e._onEventsBasedObjectModified())}))},e._editName=function(t){e.setState({renamedEventsBasedObject:t},(function(){e.sortableList&&e.sortableList.forceUpdateGrid()}))},e._rename=function(t,n){e.setState({renamedEventsBasedObject:null}),t.getName()!==n&&e.props.onRenameEventsBasedObject(t,n,(function(n){n&&(e._onEventsBasedObjectModified(),e.props.onEventsBasedObjectRenamed(t))}))},e._moveSelectionTo=function(t){var n=e.props,r=n.eventsBasedObjectsList,o=n.selectedEventsBasedObject;if(o){var i=r.getPosition(o),a=r.getPosition(t);r.move(i,a+(a<=i?0:-1)),e.forceUpdateList()}},e.forceUpdateList=function(){e._onEventsBasedObjectModified(),e.sortableList&&e.sortableList.forceUpdateGrid()},e._copyEventsBasedObject=function(e){Yt.set($x,{eventsBasedObject:(0,qt.XH)(e),name:e.getName()})},e._cutEventsBasedObject=function(t){e._copyEventsBasedObject(t),e._deleteEventsBasedObject(t,{askForConfirmation:!1})},e._pasteEventsBasedObject=function(t){if(Yt.has($x)){var n=Yt.get($x),r=Gt.extractObjectProperty(n,"eventsBasedObject"),o=Gt.extractStringProperty(n,"name");if(o&&r){var i=e.props,a=i.project,s=i.eventsBasedObjectsList,l=(0,Ut.Z)(o,(function(e){return s.has(e)})),c=s.insertNew(l,t);(0,qt.qx)(c,r,"unserializeFrom",a),c.setName(l),e._onEventsBasedObjectModified(),e.props.onSelectEventsBasedObject(c),e._editName(c)}}},e._renderEventsBasedObjectMenuTemplate=function(t){return function(n,r){return[{label:t._({id:"Properties"}),click:function(){return e.props.onEditProperties(n)}},{type:"separator"},{label:t._({id:"Rename"}),click:function(){return e._editName(n)}},{label:t._({id:"Delete"}),click:function(){return e._deleteEventsBasedObject(n,{askForConfirmation:!0})}},{type:"separator"},{label:t._({id:"Copy"}),click:function(){return e._copyEventsBasedObject(n)}},{label:t._({id:"Cut"}),click:function(){return e._cutEventsBasedObject(n)}},{label:t._({id:"Paste"}),enabled:Yt.has($x),click:function(){return e._pasteEventsBasedObject(r+1)}}]}},e._addNewEventsBasedObject=function(){var t=e.props.eventsBasedObjectsList,n=(0,Ut.Z)("MyObject",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());e._onEventsBasedObjectModified(),setTimeout((function(){e.scrollToItem(r)}),100),e.props.onSelectEventsBasedObject(r),e._editName(r)},e.scrollToItem=function(t){e.sortableList&&e.sortableList.scrollToItem(t)},e}return(0,lt.Z)(n,[{key:"_onEventsBasedObjectModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsBasedObjectsList,o=t.selectedEventsBasedObject,i=t.onSelectEventsBasedObject,a=this.state.searchText,s=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))}(function(e){return(0,Nt.mapVector)(e,(function(e){return e}))}(r),a),l=n.ptr+";"+r.ptr;return(0,f.jsxs)(Sh,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:a,onRequestSearch:function(){},onChange:function(t){return e.setState({searchText:t})},placeholder:{id:"Search objects"}})})}),(0,f.jsx)("div",{style:ev.listContainer,children:(0,f.jsx)(jr.qj,{children:function(t){var n=t.height,r=t.width;return(0,f.jsx)(c.I18n,{children:function(t){var a=t.i18n;return(0,f.jsx)(Px,{ref:function(t){return e.sortableList=t},fullList:s,width:r,height:n,getItemName:tv,selectedItems:o?[o]:[],onItemSelected:i,renamedItem:e.state.renamedEventsBasedObject,onRename:e._rename,onMoveSelectionToItem:e._moveSelectionTo,buildMenuTemplate:e._renderEventsBasedObjectMenuTemplate(a),reactDndType:"GD_EVENTS_BASED_OBJECT"},l)}})}})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(S,{label:(0,f.jsx)(c.Trans,{id:"Add a new object"}),primary:!0,onClick:this._addNewEventsBasedObject,icon:(0,f.jsx)(Ue.Z,{})})})})]})}}]),n}(u.Component);nv.defaultProps={onDeleteEventsBasedObject:function(e,t){return t(!0)},onRenameEventsBasedObject:function(e,t,n){return n(!0)}};var rv=n(33258),ov=n(12813),iv=n(10641),av=function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe().get(t,{responseType:"arraybuffer"});case 3:if(n=e.sent,!((r=btoa(new Uint8Array(n.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""))).length>102400)){e.next=7;break}throw new Error("Icon is too big (size after base64 conversion: ".concat(r.length,")"));case 7:if("image/svg+xml"===(o=n.headers?n.headers["content-type"].toLowerCase():"")){e.next=10;break}throw new Error('Wrong content type. Got: "'.concat(o,'", expected "image/svg+xml"'));case 10:return e.abrupt("return","data:".concat(o,";base64,").concat(r));case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Unable to import the icon.",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),sv=function(e){var t=e.i18n,n=e.helpPath,r=e.onChangeHelpPath,o=(0,Xh.KL)(n),i=(0,Xh.Q1)(n),a=n?(i?t._({id:"This is a relative path that will open in the SpeXEngine wiki."}):t._({id:"This is link to a webpage."}))+" [".concat(t._({id:"Click here to test the link."}),"](").concat((0,Xh.vA)(n),")"):t._({id:"This can either be a URL to a web page, or a path starting with a slash that will be opened in the SpeXEngine wiki. Leave empty if there is no help page, although it's recommended you eventually write one if you distribute the extension."});return(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Help page URL"}),value:n,onChange:function(e,t){r(t)},errorText:!n||o||i?null:(0,f.jsx)(c.Trans,{id:'This is not a URL starting with "http://" or "https://".'}),helperMarkdownText:a,fullWidth:!0})},lv=function(e){var t=e.eventsFunctionsExtension,n=e.onLoadChange,r=e.isLoading,o=(0,_t.Z)(),i=u.useState(!1),s=(0,a.Z)(i,2),l=s[0],d=s[1],p=(0,ov.t)();return(0,f.jsx)(c.I18n,{children:function(e){var i=e.i18n;return(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Name"}),value:t.getName(),disabled:!0,fullWidth:!0}),(0,f.jsx)(C.ad,{renderButton:function(e){return(0,f.jsx)(E.Z,{onClick:function(){d(!0)},primary:!0,label:(0,f.jsx)(c.Trans,{id:"Choose"}),disabled:r,style:e})},renderTextField:function(){return(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Icon URL"}),value:t.getPreviewIconUrl(),onChange:function(e){t.setPreviewIconUrl(e)},disabled:!0,fullWidth:!0})}}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Name displayed in editor"}),value:t.getFullName(),onChange:function(e,n){t.setFullName(n),o()},fullWidth:!0}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Short description"}),value:t.getShortDescription(),onChange:function(e,n){t.setShortDescription(n),o()},multiline:!0,fullWidth:!0,rows:2,rowsMax:2}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Description (markdown supported)"}),value:t.getDescription(),onChange:function(e,n){t.setDescription(n),o()},multiline:!0,fullWidth:!0,rows:5,rowsMax:15,helperMarkdownText:i._({id:"Explain and give some examples of what can be achieved with this extension."})}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Version"}),value:t.getVersion(),onChange:function(e,n){t.setVersion(n),o()},fullWidth:!0}),(0,f.jsx)(Bt.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Category (shown in the editor)"}),fullWidth:!0,value:t.getCategory(),onChange:function(e){t.setCategory(e),o()},dataSource:[{text:"",value:"General",translatableValue:"General"},{text:"Ads",value:"Ads",translatableValue:"Ads"},{text:"Visual effect",value:"Visual effect",translatableValue:"Visual effect"},{text:"Audio",value:"Audio",translatableValue:"Audio"},{text:"Advanced",value:"Advanced",translatableValue:"Advanced"},{text:"Camera",value:"Camera",translatableValue:"Camera"},{text:"Input",value:"Input",translatableValue:"Input"},{text:"Game mechanic",value:"Game mechanic",translatableValue:"Game mechanic"},{text:"Movement",value:"Movement",translatableValue:"Movement"},{text:"Network",value:"Network",translatableValue:"Network"},{text:"Third-party",value:"Third-party",translatableValue:"Third-party"},{text:"User interface",value:"User interface",translatableValue:"User interface"}]}),(0,f.jsx)(Dt.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Tags (comma separated)"}),value:t.getTags().toJSArray().join(", "),onChange:function(e){var n=t.getTags();n.clear(),e.split(",").map((function(e){return e.trim()})).filter(Boolean).forEach((function(e){n.push_back(e)})),o()},fullWidth:!0}),(0,f.jsx)(sv,{i18n:i,helpPath:t.getHelpPath(),onChangeHelpPath:function(e){t.setHelpPath(e),o()}}),(0,f.jsx)(iv.D,{userIds:t.getAuthorIds().toJSArray(),onChange:function(e){var n=t.getAuthorIds();n.clear(),e.forEach((function(e){return n.push_back(e.userId)}))},floatingLabelText:(0,f.jsx)(c.Trans,{id:"Authors"}),helperText:(0,f.jsx)(c.Trans,{id:"Select the usernames of the contributors to this extension. They will be displayed in the order selected. Do not see your name? Go to the Profile section and create an account!"})}),l&&(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Choose an icon for the extension"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:function(){d(!1)}},"cancel")],flexColumnBody:!0,fullHeight:!0,open:!0,onRequestClose:function(){d(!1)},children:(0,f.jsx)(rv.L,{onChoose:function(e){d(!1),n(!0),av(e.url).then((function(n){p.current&&(t.setPreviewIconUrl(e.url),t.setIconUrl(n))}),(function(e){p.current&&(0,Xr.gR)({message:i._({id:"Unable to download the icon. Verify your internet connection or try again later."}),rawError:e,errorId:"icon-download-error"})})).then((function(){p.current&&n(!1)}))},resourceKind:"svg"})})]})}})},cv=n(67449),uv=n(11374),dv={paper:{minWidth:"100%"}},pv=function(e,t){for(var n=0;n<t.size();n++)if(t.at(n).getName()===e)return!0;return!1},hv=function(e){var t=e.eventsFunctionsExtension,n=t.getAllDependencies(),r=(0,_t.Z)();return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsxs)(cv.Z,{component:function(e){var t=e.children;return(0,f.jsx)(ee.Z,{style:dv.paper,background:"medium",children:t})},children:[(0,f.jsxs)(uv.iA,{children:[(0,f.jsx)(uv.xD,{children:(0,f.jsxs)(uv.SC,{children:[(0,f.jsx)(uv.bY,{children:(0,f.jsx)(c.Trans,{id:"Name"})}),(0,f.jsx)(uv.bY,{children:(0,f.jsx)(c.Trans,{id:"Export name"})}),(0,f.jsx)(uv.bY,{children:(0,f.jsx)(c.Trans,{id:"Version"})}),(0,f.jsx)(uv.bY,{children:(0,f.jsx)(c.Trans,{id:"Dependency type"})}),(0,f.jsx)(uv.bY,{children:(0,f.jsx)(c.Trans,{id:"Action"})})]})}),(0,f.jsx)(uv.RM,{children:(0,Nt.mapVector)(t.getAllDependencies(),(function(e,o){return(0,f.jsxs)(uv.SC,{children:[(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,value:e.getName(),onChange:function(t){t!==e.getName()&&(pv(t,n)?(0,Xr.T4)("This name is already in use! Please use a unique name.",{delayToNextTick:!0}):(e.setName(t),r()))},margin:"none"})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,value:e.getExportName(),onChange:function(t){t!==e.getExportName()&&(e.setExportName(t),r())},margin:"none"})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(Dt.Z,{commitOnBlur:!0,value:e.getVersion(),onChange:function(t){t!==e.getVersion()&&(e.setVersion(t),r())},margin:"none"})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsxs)(B.Z,{value:e.getDependencyType(),onChange:function(t,n,o){o!==e.getDependencyType()&&(e.setDependencyType(o),r())},margin:"none",children:[(0,f.jsx)(U.Z,{value:"npm",label:{id:"NPM"}}),(0,f.jsx)(U.Z,{value:"cordova",label:{id:"Cordova"}})]})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(A.Z,{tooltip:{id:"Delete"},onClick:function(){t.removeDependencyAt(o),r()},size:"small",children:(0,f.jsx)(Dn.Z,{})})})]},e.getName())}))})]}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(L.x1,{justifyContent:"flex-end",children:(0,f.jsx)(E.Z,{primary:!0,icon:(0,f.jsx)(Ue.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Add"}),onClick:function(){t.addDependency().setName((0,Ut.Z)("New Dependency",(function(e){return pv(e,n)}))).setExportName("my-dependency").setVersion("1.0.0").setDependencyType("cordova"),r()}})})})]})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"Dependencies allow to add additional libraries in the exported games. NPM dependencies will be included for Electron builds (Windows, macOS, Linux) and Cordova dependencies will be included for Cordova builds (Android, iOS). Note that this is intended for usage in JavaScript events only. If you are only using standard events, you should not worry about this."})})})]})},fv=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16666 9.33329C3.44281 9.33329 3.66666 9.55715 3.66666 9.83329V10.8333C3.66666 11.6617 4.33823 12.3333 5.16666 12.3333H10.8333C11.6618 12.3333 12.3333 11.6618 12.3333 10.8333V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1095 9.33329 13.3333 9.55715 13.3333 9.83329V10.8333C13.3333 12.214 12.2141 13.3333 10.8333 13.3333H5.16666C3.78596 13.3333 2.66666 12.214 2.66666 10.8333V9.83329C2.66666 9.55715 2.89052 9.33329 3.16666 9.33329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.83329C8.27614 2.83329 8.5 3.05715 8.5 3.33329V9.49996C8.5 9.7761 8.27614 9.99996 8 9.99996C7.72386 9.99996 7.5 9.7761 7.5 9.49996V3.33329C7.5 3.05715 7.72386 2.83329 8 2.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66663C8.13903 2.66663 8.27179 2.72452 8.36639 2.8264L10.5331 5.15973C10.721 5.36209 10.7092 5.67845 10.5069 5.86636C10.3045 6.05426 9.98817 6.04254 9.80027 5.84018L8 3.90143L6.19973 5.84018C6.01183 6.04254 5.69546 6.05426 5.49311 5.86636C5.29075 5.67845 5.27903 5.36209 5.46693 5.15973L7.6336 2.8264C7.72821 2.72452 7.86096 2.66663 8 2.66663Z",fill:"currentColor"})]}))})),gv=function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getEventsFunctionsExtensionWriter()){e.next=3;break}throw new Error("The extension can't be exported because it's not supported by the web-app.");case 3:return e.next=5,r.chooseEventsFunctionExtensionFile(n.getName());case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.writeEventsFunctionsExtension(n,o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),mv=function(){F.ZP.openExternalURL("https://github.com/SpeXEngineApp/GDevelop-extensions/issues/new?assignees=&labels=%E2%9C%A8+New+extension&template=new-extension.yml&title=New+extension%3A+%3Ctitle%3E")},xv=function(e){var t=u.useContext(qr.Z);return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Export extension"}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/extensions/share-extension/"},"help"),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Submit to the community"}),onClick:mv})],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),keyboardFocused:!0,onClick:function(){e.onClose()}},"close"),(0,f.jsx)(V.vF,{icon:(0,f.jsx)(fv,{}),primary:!0,label:(0,f.jsx)(c.Trans,{id:"Export to a file"}),onClick:function(){gv(t,e.eventsFunctionsExtension)}},"export")],open:!0,onRequestClose:e.onClose,maxWidth:"sm",children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can export the extension to a file to easily import it in another project. If your extension is providing useful and reusable functions or behaviors, consider sharing it with the SpeXEngine community!"})})})})})};function vv(e){var t=e.eventsFunctionsExtension,n=e.onClose,r=e.open,o=u.useState("options"),i=(0,a.Z)(o,2),s=i[0],l=i[1],d=u.useState(!1),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useState(!1),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useContext(qr.Z).getEventsFunctionsExtensionWriter();return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"{0} options",values:{0:t.getName()}}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/extensions/create"},"help"),j?(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(fv,{}),label:(0,f.jsx)(c.Trans,{id:"Export extension"}),onClick:function(){b(!0)},disabled:h},"export"):null],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!0,keyboardFocused:!0,onClick:n,disabled:h},"close")],open:r,fixedContent:(0,f.jsx)(K.m,{value:s,onChange:l,options:[{value:"options",label:(0,f.jsx)(c.Trans,{id:"Options"})},{value:"dependencies",label:(0,f.jsx)(c.Trans,{id:"Dependencies"})}]}),cannotBeDismissed:h,onRequestClose:h?function(){}:n,children:["options"===s&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(lv,{eventsFunctionsExtension:t,onLoadChange:g,isLoading:h})}),"dependencies"===s&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(hv,{eventsFunctionsExtension:t})}),v&&(0,f.jsx)(xv,{eventsFunctionsExtension:t,onClose:function(){return b(!1)}})]})}var bv=n.g.gd;function jv(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.eventsBasedBehavior,o=(0,_t.Z)(),i=u.useMemo((function(){return bv.WholeProjectRefactorer.getAllObjectTypesUsingEventsBasedBehavior(t,n,r).toNewVectorString().toJSArray()}),[t,n,r]);return(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(re.Z,{identifier:"events-based-behavior-explanation",kind:"info",children:(0,f.jsx)(c.Trans,{id:"This is the configuration of your behavior. Make sure to choose a proper internal name as it's hard to change it later. Enter a description explaining what the behavior is doing to the object."})}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Internal Name"}),value:r.getName(),disabled:!0,fullWidth:!0}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Name displayed in editor"}),value:r.getFullName(),onChange:function(e){r.setFullName(e),o()},fullWidth:!0}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Description"}),helperMarkdownText:n._({id:"Explain what the behavior is doing to the object. Start with a verb when possible."}),value:r.getDescription(),onChange:function(e){r.setDescription(e),o()},multiline:!0,fullWidth:!0,rows:3}),(0,f.jsx)(rm,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Object on which this behavior can be used"}),project:t,value:r.getObjectType(),onChange:function(e){r.setObjectType(e),o()},allowedObjectTypes:0===i.length?void 0:1===i.length?["",i[0]]:[""]}),i.length>1&&(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"This behavior is being used by multiple types of objects. Thus, you can't restrict its usage to any particular object type. All the object types using this behavior are listed here: {0}",values:{0:i.join(", ")}})}),0===r.getEventsFunctions().getEventsFunctionsCount()&&(0,f.jsx)(re.Z,{identifier:"empty-events-based-behavior-explanation",kind:"info",children:(0,f.jsx)(c.Trans,{id:"Once you're done, close this dialog and start adding some functions to the behavior. Then, test the behavior by adding it to an object in a scene."})})]})}})}var Cv=function(e){var t="small"===(0,T.L)();return(0,f.jsx)(_.Z,(0,i.Z)((0,i.Z)({},e),{},{label:t?"":e.label}))},yv=n.g.gd,Zv="Properties",kv=(0,Lt.x)("behavior-properties-list"),wv={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},Tv=function(){var e=(0,ft.Z)().showConfirmation;return function(){var t=(0,o.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing properties"},message:{id:"These properties already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ev=function(e,t,n){return(0,Ut.Z)(yv.Project.getSafeName(n),(function(e){return!(!t.has(e)&&"name"!==e&&"type"!==e)}))},Sv=function(e){return e.getExtraInfo().toJSArray()};function Pv(e){var t=e.properties,n=e.onPropertiesUpdated,r=u.useRef(null),s=u.useState(null),d=(0,a.Z)(s,2),p=d[0],h=d[1],g=u.useRef(null);u.useEffect((function(){r.current&&g.current&&p&&(r.current.scrollTo(g.current),h(null),g.current=null)}),[p]);var x=u.useRef(null),v=u.useContext(m.Z),b=Tv(),y=(0,_t.Z)(),Z=u.useCallback((function(){var e=(0,Ut.Z)("Property",(function(e){return t.has(e)}));t.insertNew(e,t.getCount()).setType("Number"),y(),n&&n(),h(e)}),[y,n,t]),k=u.useCallback((function(e){t.remove(e),y(),n&&n()}),[y,n,t]),w=u.useCallback((function(e){Yt.set(Zv,[{name:e.getName(),serializedProperty:(0,qt.XH)(e)}]),y()}),[y]),T=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(r){var o,i,a,s,c,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Yt.get(Zv),i=Gt.extractArray(o)){e.next=4;break}return e.abrupt("return");case 4:if(a=[],s=[],i.forEach((function(e){var n=Gt.extractStringProperty(e,"name"),r=Gt.extractObjectProperty(e,"serializedProperty");n&&r&&(t.has(n)?s.push({name:n,serializedProperty:r}):a.push({name:n,serializedProperty:r}))})),c=null,u=r,a.forEach((function(e){var n=e.name,r=e.serializedProperty,o=t.insertNew(n,u);u++,(0,qt.qx)(o,r),c||(c=n)})),d=!1,!(s.length>0)){e.next=16;break}return e.next=14,b(s.map((function(e){return e.name})));case 14:(d=e.sent)&&s.forEach((function(e){var n=e.name,r=e.serializedProperty;if(t.has(n)){var o=t.get(n);(0,qt.qx)(o,r)}}));case 16:y(),c?h(c):1===s.length&&h(s[0].name),(c||d)&&n&&n();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,t,b,n]),S=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t.getCount());case 2:case"end":return e.stop()}}),e)}))),[t,T]),P=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t.getPosition(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,T]),I=u.useCallback((function(e,r){t.move(e,r),y(),n&&n()}),[y,n,t]),D=u.useCallback((function(e){var r=x.current;if(r){var o=t.getPosition(r),i=t.getPosition(e);t.move(o,i>o?i-1:i),y(),n&&n()}}),[t,y,n]),M=u.useCallback((function(e){return function(t){var n=Sv(e).indexOf(e.getValue()),r=new yv.VectorString;t.forEach((function(e){return r.push_back(e)})),e.setExtraInfo(r),r.delete(),e.setValue(t[n]||""),y()}}),[y]),F=u.useCallback((function(){for(var e=new Set,n=0;n<t.size();n++){var r=t.at(n).getGroup()||"";e.add(r)}return(0,j.Z)(e).sort((function(e,t){return e.localeCompare(t)}))}),[t]),O=Yt.has(Zv);return(0,f.jsx)(c.I18n,{children:function(n){var o=n.i18n;return(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:t.getCount()>0?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Ot.Z,{ref:r,children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,Nt.mapVector)(t,(function(n,r){var a=p===n.getName()?g:null;return(0,f.jsx)(kv,{beginDrag:function(){return x.current=n,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){D(n)},children:function(s){var l=s.connectDragSource,u=s.connectDropTarget,d=s.isOver,p=s.canDrop;return u((0,f.jsxs)("div",{style:wv.rowContainer,children:[d&&(0,f.jsx)(Mt.Z,{canDrop:p}),(0,f.jsxs)("div",{ref:a,style:(0,i.Z)((0,i.Z)({},wv.rowContent),{},{backgroundColor:v.list.itemsBackgroundColor}),children:[l((0,f.jsx)("span",{children:(0,f.jsx)(L.sg,{children:(0,f.jsx)(At.V,{})})})),(0,f.jsxs)(C.ep,{expand:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(Dt.Z,{margin:"none",commitOnBlur:!0,translatableHintText:{id:"Enter the property name"},value:n.getName(),onChange:function(r){if(r!==n.getName()){var i=Ev(o,t,r);e.onRenameProperty(n.getName(),i),n.setName(i),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()}},fullWidth:!0})}),(0,f.jsx)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:(0,f.jsx)(al.Z,{label:n.isHidden()?(0,f.jsx)(c.Trans,{id:"Hidden"}):(0,f.jsx)(c.Trans,{id:"Visible in editor"}),checked:!n.isHidden(),onCheck:function(t,r){n.setHidden(!r),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},checkedIcon:(0,f.jsx)(ya.Z,{}),uncheckedIcon:(0,f.jsx)(Za,{}),disabled:"Behavior"===n.getType()&&!n.isHidden()})})]}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(o){return[{label:o._({id:"Delete"}),click:function(){return k(n.getName())}},{label:o._({id:"Copy"}),click:function(){return w(n)}},{label:o._({id:"Paste"}),click:function(){return P(n)},enabled:O},{type:"separator"},{label:o._({id:"Move up"}),click:function(){return I(r,r-1)},enabled:r-1>=0},{label:o._({id:"Move down"}),click:function(){return I(r,r+1)},enabled:r+1<t.getCount()},{label:o._({id:"Generate expression and action"}),click:function(){return yv.PropertyFunctionGenerator.generateBehaviorGetterAndSetter(e.project,e.extension,e.eventsBasedBehavior,n,!!e.isSceneProperties)},enabled:yv.PropertyFunctionGenerator.canGenerateGetterAndSetter(e.eventsBasedBehavior,n)}]}}),(0,f.jsx)(L.LZ,{})]}),(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsxs)(C.ak,{expand:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Type"}),value:n.getType(),onChange:function(t,r,o){n.setType(o),"Behavior"===o&&n.setHidden(!1),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"Number",label:{id:"Number"}},"property-type-number"),(0,f.jsx)(U.Z,{value:"String",label:{id:"String"}},"property-type-string"),(0,f.jsx)(U.Z,{value:"Boolean",label:{id:"Boolean (checkbox)"}},"property-type-boolean"),(0,f.jsx)(U.Z,{value:"Choice",label:{id:"String from a list of options (text)"}},"property-type-choice"),(0,f.jsx)(U.Z,{value:"Color",label:{id:"Color (text)"}},"property-type-color"),!e.isSceneProperties&&(0,f.jsx)(U.Z,{value:"Behavior",label:{id:"Required behavior"}},"property-type-behavior")]}),"Number"===n.getType()&&(0,f.jsx)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Measurement unit"}),value:n.getMeasurementUnit().getName(),onChange:function(t,r,o){n.setMeasurementUnit(yv.MeasurementUnit.getDefaultMeasurementUnitByName(o)),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:(0,Nt.mapFor)(0,yv.MeasurementUnit.getDefaultMeasurementUnitsCount(),(function(e){var t=yv.MeasurementUnit.getDefaultMeasurementUnitAtIndex(e),n=(0,Jn.j)(t),r=t.getLabel()+(n.length>0?"\u2002\u2014\u2002"+n:"");return(0,f.jsx)(U.Z,{value:t.getName(),label:r},"measurement-unit-"+t.getName())}))}),("String"===n.getType()||"Number"===n.getType())&&(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),hintText:"Number"===n.getType()?"123":"ABC",value:n.getValue(),onChange:function(t){n.setValue(t),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0}),"Boolean"===n.getType()&&(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),value:"true"===n.getValue()?"true":"false",onChange:function(t,r,o){n.setValue(o),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"true",label:{id:"True (checked)"}},"boolean-true"),(0,f.jsx)(U.Z,{value:"false",label:{id:"False (not checked)"}},"boolean-false")]}),"Behavior"===n.getType()&&(0,f.jsx)(om,{project:e.project,objectType:e.behaviorObjectType||"",value:0===n.getExtraInfo().size()?"":n.getExtraInfo().at(0),onChange:function(t){var r=n.getExtraInfo();0===r.size()?r.push_back(t):r.set(0,t),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},disabled:!1}),"Color"===n.getType()&&(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),disableAlpha:!0,fullWidth:!0,color:n.getValue(),onChange:function(t){n.setValue(t),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()}}),"Choice"===n.getType()&&(0,f.jsx)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),value:n.getValue(),onChange:function(t,r,o){n.setValue(o),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},fullWidth:!0,children:Sv(n).map((function(e,t){return(0,f.jsx)(U.Z,{value:e,label:e},t)}))})]}),"Choice"===n.getType()&&(0,f.jsx)(im,{extraInfo:Sv(n),setExtraInfo:M(n)}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Short label"}),translatableHintText:{id:"Make the purpose of the property easy to understand"},floatingLabelFixed:!0,value:n.getLabel(),onChange:function(e){n.setLabel(e),y()},fullWidth:!0}),(0,f.jsx)(Bt.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group"},fullWidth:!0,value:n.getGroup(),onChange:function(t){n.setGroup(t),y(),e.onPropertiesUpdated&&e.onPropertiesUpdated()},dataSource:F().map((function(e){return{text:e,value:e}})),openOnFocus:!0})]}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Description"}),translatableHintText:{id:"Optionally, explain the purpose of the property in more details"},floatingLabelFixed:!0,value:n.getDescription(),onChange:function(e){n.setDescription(e),y()},fullWidth:!0})]})})]},n.ptr))}},n.ptr)}))})})}),(0,f.jsx)(L.sg,{children:(0,f.jsxs)(L.x1,{noMargin:!0,children:[(0,f.jsx)(C.pJ,{expand:!0,children:(0,f.jsx)(Cv,{leftIcon:(0,f.jsx)(Ln,{}),label:(0,f.jsx)(c.Trans,{id:"Paste"}),onClick:function(){S()},disabled:!O},"paste-properties")}),(0,f.jsx)(C.pJ,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Add a property"}),onClick:Z,icon:(0,f.jsx)(Ue.Z,{})})})]})})]}):(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"Add your first property"}),description:(0,f.jsx)(c.Trans,{id:"Properties store data inside behaviors."}),actionLabel:(0,f.jsx)(c.Trans,{id:"Add a property"}),helpPagePath:"/behaviors/events-based-behaviors",helpPageAnchor:"add-and-use-properties-in-a-behavior",onAction:Z,secondaryActionIcon:(0,f.jsx)(Ln,{}),secondaryActionLabel:O?(0,f.jsx)(c.Trans,{id:"Paste"}):null,onSecondaryAction:function(){S()}})})})}})}function Iv(e){var t=e.onApply,n=e.eventsBasedBehavior,r=e.eventsFunctionsExtension,o=e.project,i=e.onRenameProperty,s=e.onRenameSharedProperty,l=u.useState("configuration"),d=(0,a.Z)(l,2),p=d[0],h=d[1];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Edit {0}",values:{0:n.getName()}}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:t},"Apply")],open:!0,onRequestClose:t,onApply:t,fullHeight:!0,flexBody:!0,fixedContent:(0,f.jsx)(K.m,{value:p,onChange:h,options:[{value:"configuration",label:(0,f.jsx)(c.Trans,{id:"Configuration"})},{value:"behavior-properties",label:(0,f.jsx)(c.Trans,{id:"Behavior properties"})},{value:"scene-properties",label:(0,f.jsx)(c.Trans,{id:"Scene properties"})}]}),children:["configuration"===p&&(0,f.jsx)(jv,{project:o,eventsFunctionsExtension:r,eventsBasedBehavior:n}),"behavior-properties"===p&&(0,f.jsx)(Pv,{project:o,extension:r,eventsBasedBehavior:n,properties:n.getPropertyDescriptors(),onRenameProperty:i,behaviorObjectType:n.getObjectType()}),"scene-properties"===p&&(0,f.jsx)(Pv,{isSceneProperties:!0,project:o,extension:r,eventsBasedBehavior:n,properties:n.getSharedPropertyDescriptors(),onRenameProperty:s})]})}var Dv=n.g.gd;function Av(e){var t=e.eventsBasedObject,n=(0,_t.Z)();return(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(c.Trans,{id:"The custom object editor is at a very early stage. A lot of features are missing or broken. Extensions written with it may no longer work in future SpeXEngine releases."})}),(0,f.jsx)(re.Z,{identifier:"events-based-object-explanation",kind:"info",children:(0,f.jsx)(c.Trans,{id:"This is the configuration of your object. Make sure to choose a proper internal name as it's hard to change it later. Enter a description explaining how the object works."})}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Internal Name"}),value:t.getName(),disabled:!0,fullWidth:!0}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Name displayed in editor"}),value:t.getFullName(),onChange:function(e){t.setFullName(e),n()},fullWidth:!0}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Description"}),floatingLabelFixed:!0,translatableHintText:{id:"The description of the object should explain what the object is doing, and, briefly, how to use it."},value:t.getDescription(),onChange:function(e){t.setDescription(e),n()},multiline:!0,fullWidth:!0,rows:3}),(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default name for created objects"}),value:t.getDefaultName()||t.getName(),onChange:function(e){t.setDefaultName(Dv.Project.getSafeName(e)),n()},fullWidth:!0})}}),0===t.getEventsFunctions().getEventsFunctionsCount()&&(0,f.jsx)(re.Z,{identifier:"empty-events-based-object-explanation",kind:"info",children:(0,f.jsx)(c.Trans,{id:"Once you're done, close this dialog and start adding some functions to the object. Then, test the object by adding to a scene."})})]})}var Lv=n.g.gd,Mv={propertiesContainer:{flex:1}},Fv=function(e){return e.getExtraInfo().toJSArray()},Ov=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._addProperty=function(){var t=e.props.eventsBasedObject.getPropertyDescriptors(),n=(0,Ut.Z)("Property",(function(e){return t.has(e)}));t.insertNew(n,t.getCount()).setType("Number"),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},e._removeProperty=function(t){e.props.eventsBasedObject.getPropertyDescriptors().remove(t),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},e._moveProperty=function(t,n){e.props.eventsBasedObject.getPropertyDescriptors().move(t,n),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},e._setChoiceExtraInfo=function(t){return function(n){var r=Fv(t).indexOf(t.getValue()),o=new Lv.VectorString;n.forEach((function(e){return o.push_back(e)})),t.setExtraInfo(o),o.delete(),t.setValue(n[r]||""),e.forceUpdate()}},e._getPropertyGroupNames=function(){for(var t=e.props.eventsBasedObject.getPropertyDescriptors(),n=new Set,r=0;r<t.size();r++){var o=t.at(r).getGroup()||"";n.add(o)}return(0,j.Z)(n).sort((function(e,t){return e.localeCompare(t)}))},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.eventsBasedObject.getPropertyDescriptors();return(0,f.jsx)(c.I18n,{children:function(n){n.i18n;return(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsxs)("div",{style:Mv.propertiesContainer,children:[(0,Nt.mapVector)(t,(function(n,r){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(yg.Z,{noPadding:!0,children:[(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Dt.Z,{margin:"none",commitOnBlur:!0,translatableHintText:{id:"Enter the property name"},value:n.getName(),onChange:function(r){if(r!==n.getName()){var o=function(e,t,n){return(0,Ut.Z)(Lv.Project.getSafeName(n),(function(e){return!(!t.has(e)&&"name"!==e&&"type"!==e)}))}(0,t,r);e.props.onRenameProperty(n.getName(),o),n.setName(o),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()}},fullWidth:!0})}),(0,f.jsx)(al.Z,{label:n.isHidden()?(0,f.jsx)(c.Trans,{id:"Hidden"}):(0,f.jsx)(c.Trans,{id:"Visible in editor"}),checked:!n.isHidden(),onCheck:function(t,r){n.setHidden(!r),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},checkedIcon:(0,f.jsx)(ya.Z,{}),uncheckedIcon:(0,f.jsx)(Za,{})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(o){return[{label:o._({id:"Delete"}),click:function(){return e._removeProperty(n.getName())}},{type:"separator"},{label:o._({id:"Move up"}),click:function(){return e._moveProperty(r,r-1)},enabled:r-1>=0},{label:o._({id:"Move down"}),click:function(){return e._moveProperty(r,r+1)},enabled:r+1<t.getCount()},{label:o._({id:"Generate expression and action"}),click:function(){return Lv.PropertyFunctionGenerator.generateObjectGetterAndSetter(e.props.project,e.props.extension,e.props.eventsBasedObject,n)},enabled:Lv.PropertyFunctionGenerator.canGenerateGetterAndSetter(e.props.eventsBasedObject,n)}]}})]}),(0,f.jsx)(L.x1,{children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Type"}),value:n.getType(),onChange:function(t,r,o){n.setType(o),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"Number",label:{id:"Number"}}),(0,f.jsx)(U.Z,{value:"String",label:{id:"String"}}),(0,f.jsx)(U.Z,{value:"Boolean",label:{id:"Boolean (checkbox)"}}),(0,f.jsx)(U.Z,{value:"Choice",label:{id:"String from a list of options (text)"}}),(0,f.jsx)(U.Z,{value:"Color",label:{id:"Color (text)"}})]}),"Number"===n.getType()&&(0,f.jsx)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Measurement unit"}),value:n.getMeasurementUnit().getName(),onChange:function(t,r,o){n.setMeasurementUnit(Lv.MeasurementUnit.getDefaultMeasurementUnitByName(o)),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},fullWidth:!0,children:(0,Nt.mapFor)(0,Lv.MeasurementUnit.getDefaultMeasurementUnitsCount(),(function(e){var t=Lv.MeasurementUnit.getDefaultMeasurementUnitAtIndex(e),n=(0,Jn.j)(t),r=t.getLabel()+(n.length>0?"\u2002\u2014\u2002"+n:"");return(0,f.jsx)(U.Z,{value:t.getName(),label:r})}))}),("String"===n.getType()||"Number"===n.getType())&&(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),hintText:"Number"===n.getType()?"123":"ABC",value:n.getValue(),onChange:function(t){n.setValue(t),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},fullWidth:!0}),"Boolean"===n.getType()&&(0,f.jsxs)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),value:"true"===n.getValue()?"true":"false",onChange:function(t,r,o){n.setValue(o),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},fullWidth:!0,children:[(0,f.jsx)(U.Z,{value:"true",label:{id:"True (checked)"}}),(0,f.jsx)(U.Z,{value:"false",label:{id:"False (not checked)"}})]}),"Choice"===n.getType()&&(0,f.jsx)(B.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Default value"}),value:n.getValue(),onChange:function(t,r,o){n.setValue(o),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},fullWidth:!0,children:Fv(n).map((function(e,t){return(0,f.jsx)(U.Z,{value:e,label:e},t)}))})]}),"Choice"===n.getType()&&(0,f.jsx)(im,{extraInfo:Fv(n),setExtraInfo:e._setChoiceExtraInfo(n)}),"Color"===n.getType()&&(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:n.getValue(),onChange:function(t){n.setValue(t),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()}}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Short label"}),translatableHintText:{id:"Make the purpose of the property easy to understand"},floatingLabelFixed:!0,value:n.getLabel(),onChange:function(t){n.setLabel(t),e.forceUpdate()},fullWidth:!0}),(0,f.jsx)(Bt.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group"},fullWidth:!0,value:n.getGroup(),onChange:function(t){n.setGroup(t),e.forceUpdate(),e.props.onPropertiesUpdated&&e.props.onPropertiesUpdated()},dataSource:e._getPropertyGroupNames().map((function(e){return{text:e,value:e}})),openOnFocus:!0})]}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Description"}),translatableHintText:{id:"Optionally, explain the purpose of the property in more details"},floatingLabelFixed:!0,value:n.getDescription(),onChange:function(t){n.setDescription(t),e.forceUpdate()},fullWidth:!0})]})})]},r)})),0===t.getCount()?(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"No properties for this object. Add one to store data inside this object (for example: health, ammo, speed, etc...)"})}):null,(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Add a property"}),onClick:e._addProperty,icon:(0,f.jsx)(Ue.Z,{})})})})]})})})}})}}]),n}(u.Component),Rv=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 5.33337C2.66669 5.05723 2.89054 4.83337 3.16669 4.83337H4.83335C5.1095 4.83337 5.33335 5.05723 5.33335 5.33337C5.33335 5.60952 5.1095 5.83337 4.83335 5.83337H3.16669C2.89054 5.83337 2.66669 5.60952 2.66669 5.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 5.33337C8.00002 5.05723 8.22388 4.83337 8.50002 4.83337H12.8334C13.1095 4.83337 13.3334 5.05723 13.3334 5.33337C13.3334 5.60952 13.1095 5.83337 12.8334 5.83337H8.50002C8.22388 5.83337 8.00002 5.60952 8.00002 5.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66669 4.33337C6.1144 4.33337 5.66669 4.78109 5.66669 5.33337C5.66669 5.88566 6.1144 6.33337 6.66669 6.33337C7.21897 6.33337 7.66669 5.88566 7.66669 5.33337C7.66669 4.78109 7.21897 4.33337 6.66669 4.33337ZM4.66669 5.33337C4.66669 4.2288 5.56212 3.33337 6.66669 3.33337C7.77126 3.33337 8.66669 4.2288 8.66669 5.33337C8.66669 6.43794 7.77126 7.33337 6.66669 7.33337C5.56212 7.33337 4.66669 6.43794 4.66669 5.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 10.6667C2.66669 10.3906 2.89054 10.1667 3.16669 10.1667H8.16669C8.44283 10.1667 8.66669 10.3906 8.66669 10.6667C8.66669 10.9428 8.44283 11.1667 8.16669 11.1667H3.16669C2.89054 11.1667 2.66669 10.9428 2.66669 10.6667Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3334 10.6667C11.3334 10.3906 11.5572 10.1667 11.8334 10.1667H12.8334C13.1095 10.1667 13.3334 10.3906 13.3334 10.6667C13.3334 10.9428 13.1095 11.1667 12.8334 11.1667H11.8334C11.5572 11.1667 11.3334 10.9428 11.3334 10.6667Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9.66671C9.44774 9.66671 9.00002 10.1144 9.00002 10.6667C9.00002 11.219 9.44774 11.6667 10 11.6667C10.5523 11.6667 11 11.219 11 10.6667C11 10.1144 10.5523 9.66671 10 9.66671ZM8.00002 10.6667C8.00002 9.56214 8.89545 8.66671 10 8.66671C11.1046 8.66671 12 9.56214 12 10.6667C12 11.7713 11.1046 12.6667 10 12.6667C8.89545 12.6667 8.00002 11.7713 8.00002 10.6667Z",fill:"currentColor"})]}))})),Bv=n(84140),_v=n(39818),Nv=n(59717),Uv={container:{position:"relative",display:"inline-block"},picker:{position:"absolute",right:"8px",top:"19px"},pickerNoLabel:{position:"absolute",right:"8px",top:"8px"}},Hv=function(e){return/^#{0,1}[0-9a-fA-F]{6}$/.test(e)?(0,er.f5)(e):null},Vv=function(e){var t,n,r=e.fullWidth,o=e.disableAlpha,s=e.id,l=e.floatingLabelText,c=e.helperMarkdownText,d=e.onChange,p=e.color,h=u.useState(p?(0,er.TU)(p.r,p.g,p.b):""),g=(0,a.Z)(h,2),m=g[0],x=g[1];t=p,n=Hv(m),(t&&(0,er.Y9)(t.r,t.g,t.b))!==(n&&(0,er.Y9)(n.r,n.g,n.b))&&x(p?(0,er.TU)(p.r,p.g,p.b):"");var v=function(e){var t=Hv(m),n=Hv(e);x(e),n!==t&&d(n)};return(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},Uv.container),{},{width:r?"100%":void 0}),children:[(0,f.jsx)(po.ZP,{id:s,fullWidth:o,floatingLabelText:l,floatingLabelFixed:!0,helperMarkdownText:c,type:"text",hintText:"#ff8844",value:m,onChange:function(e){return v(e.target.value)}}),(0,f.jsx)("div",{style:l?Uv.picker:Uv.pickerNoLabel,children:(0,f.jsx)(pp.Z,{disableAlpha:!0,onChangeComplete:function(e){x((0,er.TU)(e.rgb.r,e.rgb.g,e.rgb.b)),d(e.rgb)},color:Hv(m)})})]})},Wv=n(91153),zv=function(e){var t=e.filterKey,n=e.title,r=e.choices,o=e.isChoiceChecked,i=e.setChoiceChecked;return(0,f.jsx)(c.I18n,{children:function(e){var a=e.i18n;return(0,f.jsxs)(vo.UQ,{defaultExpanded:!0,children:[(0,f.jsx)(vo._m,{children:(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,children:n})}),(0,f.jsx)(vo.X1,{children:(0,f.jsx)(C.ak,{children:r.map((function(e){return(0,f.jsx)(al.Z,{label:a._(e.label),checked:o(e.value),onCheck:function(t,n){return i(e.value,n)}},e.value)}))})})]},t)}})},Gv=function(e){var t=e.filterKey,n=e.title,r=e.choices,o=e.values,i=e.setValues;return(0,f.jsx)(zv,{filterKey:t,title:n,choices:r,isChoiceChecked:function(e){return o.has(e)},setChoiceChecked:function(e,t){t?o.add(e):o.delete(e),i(o)}})},Yv=function(e){var t=e.filterKey,n=e.title,r=e.choices,o=e.searchFilter,i=e.setSearchFilter,a=e.onFilterChange;return(0,f.jsx)(Gv,{filterKey:t,title:n,choices:r,values:o.tags,setValues:function(e){i(new _v.GI(e)),a()}})},qv=function(e){var t=e.filterKey,n=e.title,r=e.min,o=e.max,i=e.scale,a=e.step,s=e.range,l=e.setRange;return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(vo.UQ,{defaultExpanded:!0,children:[(0,f.jsx)(vo._m,{children:(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,children:n})}),(0,f.jsx)(vo.X1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(Wv.Z,{value:s,min:r,max:o,step:a,scale:i,marks:!0,valueLabelDisplay:"auto",onChange:function(e){return l(e)}})})})})]},t)}})},Xv=function(e){var t=e.filterKey,n=e.title,r=e.color,o=e.setColor;return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(vo.UQ,{defaultExpanded:!0,children:[(0,f.jsx)(vo._m,{children:(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,children:n})}),(0,f.jsx)(vo.X1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(Vv,{disableAlpha:!0,fullWidth:!0,color:r,onChange:o})})})})]},t)}})},Jv=function(){var e=u.useContext(Nv.K),t=e.assetFiltersState,n=e.assetPackFiltersState,r=e.clearAllFilters,o=e.navigationState,i=u.useContext(ir.ZP).receivedAssetPacks,a=u.useCallback((function(){o.openSearchResultPage()}),[o]);return(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(zv,{filterKey:"PackType",title:(0,f.jsx)(c.Trans,{id:"Pack type"}),choices:[{label:{id:"Free"},value:"free"},{label:{id:"Premium"},value:"premium"},{label:{id:"Owned"},value:"owned"}],isChoiceChecked:function(e){return"free"===e&&n.typeFilter.isFree||"premium"===e&&n.typeFilter.isPremium||"owned"===e&&n.typeFilter.isOwned},setChoiceChecked:function(e,t){var r=n.typeFilter,o="free"===e?t:r.isFree,s="premium"===e?t:r.isPremium,l="owned"===e?t:r.isOwned;n.setTypeFilter(new _v.lz({isFree:o,isPremium:s,isOwned:l,receivedAssetPacks:i})),a()}}),(0,f.jsx)(zv,{filterKey:"Animation",title:(0,f.jsx)(c.Trans,{id:"Animation"}),choices:[{label:{id:"Multiple frames"},value:"multiple-frames"},{label:{id:"Multiple states"},value:"multiple-states"}],isChoiceChecked:function(e){return"multiple-frames"===e&&t.animatedFilter.mustBeAnimated||"multiple-states"===e&&t.animatedFilter.mustHaveSeveralState},setChoiceChecked:function(e,n){var r=t.animatedFilter,o="multiple-frames"===e?n:r.mustBeAnimated,i="multiple-states"===e?n:r.mustHaveSeveralState;t.setAnimatedFilter(new _v.FL(o,i)),a()}}),(0,f.jsx)(Yv,{filterKey:"Viewpoint",title:(0,f.jsx)(c.Trans,{id:"Viewpoint"}),choices:[{label:{id:"Top-down"},value:"top-down"},{label:{id:"Side view"},value:"side view"},{label:{id:"Isometric"},value:"isometric"}],searchFilter:t.viewpointFilter,setSearchFilter:t.setViewpointFilter,onFilterChange:a}),(0,f.jsx)(qv,{filterKey:"PixelSize",title:(0,f.jsx)(c.Trans,{id:"Pixel size"}),min:Math.log2(_v.C9.boundMin),max:Math.log2(_v.C9.boundMax),step:.5,scale:function(e){return Math.round(Math.pow(2,e))},range:[Math.log2(t.dimensionFilter.dimensionMin),Math.log2(t.dimensionFilter.dimensionMax)],setRange:function(e){t.setDimensionFilter(new _v.C9(Math.pow(2,e[0]),Math.pow(2,e[1]))),a()}}),(0,f.jsx)(Gv,{filterKey:"ObjectType",title:(0,f.jsx)(c.Trans,{id:"Type of objects"}),choices:[{label:{id:"Sprite"},value:"sprite"},{label:{id:"Tiled sprite"},value:"tiled"},{label:{id:"Panel sprite"},value:"9patch"},{label:{id:"3D model"},value:"Scene3D::Model3DObject"}],values:t.objectTypeFilter.objectTypes,setValues:function(e){t.setObjectTypeFilter(new _v.Jk(e)),a()}}),(0,f.jsx)(Xv,{filterKey:"Color",title:(0,f.jsx)(c.Trans,{id:"Color"}),color:t.colorFilter.color,setColor:function(e){t.setColorFilter(new _v.ad(e)),a()}}),(0,f.jsx)(zv,{filterKey:"License",title:(0,f.jsx)(c.Trans,{id:"License"}),choices:[{label:{id:"Exclude attribution requirements"},value:"without-attribution"}],isChoiceChecked:function(e){return t.licenseFilter.attributionFreeOnly},setChoiceChecked:function(e,n){t.setLicenseFilter(new _v.t3(n)),a()}}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Clear all filters"}),primary:!1,onClick:function(){r(),a()}})})]})},Kv=n(35038),Qv=function(e,t,n,r){for(var o=0,i=0,a=[];o<e.length||i<t.length;){var s=e.slice(o,o+n),l=t.slice(i,i+r);o+=n,i+=r,s.forEach((function(e){return a.push(e)})),l.forEach((function(e){return a.push(e)}))}return a},$v=n(8304),eb=function(e){switch(e){case"small":return 2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},tb=function(e){switch(e){case"small":return 1;case"medium":default:return 2;case"large":return 3;case"xlarge":return 5}},nb={"full-game-pack":{title:(0,f.jsx)(c.Trans,{id:"Full Game Packs"}),imageAlt:"Full game asset packs category",imageSource:"res/asset-categories/Full_game_pack.jpeg"},character:{title:(0,f.jsx)(c.Trans,{id:"Characters"}),imageAlt:"Characters asset packs category",imageSource:"res/asset-categories/Characters.jpeg"},props:{title:(0,f.jsx)(c.Trans,{id:"Props"}),imageAlt:"Props asset packs category",imageSource:"res/asset-categories/Props.jpeg"},background:{title:(0,f.jsx)(c.Trans,{id:"Backgrounds"}),imageAlt:"Backgrounds asset packs category",imageSource:"res/asset-categories/Backgrounds.jpeg"},"visual-effect":{title:(0,f.jsx)(c.Trans,{id:"Visual Effects"}),imageAlt:"Visual effects asset packs category",imageSource:"res/asset-categories/Visual_Effects.jpeg"},interface:{title:(0,f.jsx)(c.Trans,{id:"UI/Interface"}),imageAlt:"User Interface asset packs category",imageSource:"res/asset-categories/Interface.jpeg"},prefab:{title:(0,f.jsx)(c.Trans,{id:"Prefabs (Ready-to-use Objects)"}),imageAlt:"Prefabs asset packs category",imageSource:"res/asset-categories/Prefabs.jpeg"},sounds:{title:(0,f.jsx)(c.Trans,{id:"Sounds and musics"}),imageAlt:"Sounds and musics asset packs category",imageSource:"res/asset-categories/Sounds.jpeg"}},rb={grid:{margin:"0 10px",overflow:"unset"}},ob=u.forwardRef((function(e,t){var n=e.publicAssetPacks.starterPacks,r=e.privateAssetPackListingDatas,o=e.assetPackRandomOrdering,i=e.onPublicAssetPackSelection,s=e.onPrivateAssetPackSelection,l=e.onCategorySelection,d=e.openedAssetCategory,p=(0,T.L)(),h=u.useContext(ir.ZP).receivedAssetPacks,g=u.useRef(null);u.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=g.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=g.current;t&&t.scrollToPosition(e)}}}));var m=n.filter((function(e){return!d||e.categories.includes(d)})).map((function(e,t){return{pos:o.starterPacks[t],pack:e}})).sort((function(e,t){return e.pos-t.pos})).map((function(e){return e.pack})).map((function(e,t){return(0,f.jsx)($v.fV,{assetPack:e,onSelect:function(){return i(e)}},"".concat(e.tag,"-").concat(t))})),x=u.useMemo((function(){var e=[],t=[],n=[],i=[];r.filter((function(e){return!d||e.categories.includes(d)})).map((function(e,t){return{pos:o.privateAssetPacks[t],listingData:e}})).sort((function(e,t){return e.pos-t.pos})).map((function(e){return e.listingData})).filter(Boolean).forEach((function(r){var o=!!h&&!!h.find((function(e){return e.id===r.id})),a=(0,f.jsx)($v.c7,{assetPackListingData:r,onSelect:function(){s(r)},owned:o},r.id);r.includedListableProductIds&&r.includedListableProductIds.length?o?i.push(a):n.push(a):o?t.push(a):e.push(a)}));var a=[].concat(i,n);return{allStandAloneTiles:[].concat(t,(0,j.Z)(Qv(e,m,2,1))),allBundleTiles:a}}),[r,d,o,s,m,h]),v=x.allStandAloneTiles,b=x.allBundleTiles,C=u.useMemo((function(){return Object.entries(nb).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1],o=r.title,i=r.imageSource,s=r.imageAlt;return(0,f.jsx)($v.AP,{id:"asset-pack-category-".concat(n.replace(/\s/g,"-")),imageSource:i,imageAlt:s,title:o,onSelect:function(){l(n)}},n)}))}),[l]),y=d?nb[d].title:null;return(0,f.jsxs)(Ot.Z,{ref:g,id:"asset-store-home",data:{isFiltered:d?"true":"false"},children:[d?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Explore by category"})})})}),(0,f.jsx)(Kv.Z,{cols:eb(p),style:rb.grid,cellHeight:"auto",spacing:2,children:C})]}),b.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Bundles"})})})}),(0,f.jsx)(Kv.Z,{cols:tb(p),style:rb.grid,cellHeight:"auto",spacing:2,children:b})]}):null,(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:y||(0,f.jsx)(c.Trans,{id:"All asset packs"})})})}),(0,f.jsx)(Kv.Z,{cols:tb(p),style:rb.grid,cellHeight:"auto",spacing:2,children:v})]})})),ib=n(35924),ab=n(74824),sb=function(e){return(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"No result"}),description:e.message||(0,f.jsx)(c.Trans,{id:"Try something else, browse the packs or create your object from scratch!"}),actionLabel:(0,f.jsx)(c.Trans,{id:"Clear all filters"}),actionButtonId:"clear-filters-button",onAction:e.onClear,actionIcon:(0,f.jsx)(ab.Z,{})})})},lb=n(24347),cb=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33337 10.3333C4.78109 10.3333 4.33337 10.781 4.33337 11.3333C4.33337 11.8856 4.78109 12.3333 5.33337 12.3333C5.88566 12.3333 6.33337 11.8856 6.33337 11.3333C6.33337 10.781 5.88566 10.3333 5.33337 10.3333ZM3.33337 11.3333C3.33337 10.2287 4.2288 9.33329 5.33337 9.33329C6.43794 9.33329 7.33337 10.2287 7.33337 11.3333C7.33337 12.4379 6.43794 13.3333 5.33337 13.3333C4.2288 13.3333 3.33337 12.4379 3.33337 11.3333Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16671 3.66663C7.70645 3.66663 7.33337 4.03972 7.33337 4.49996V11.3333C7.33337 11.6094 7.10952 11.8333 6.83337 11.8333C6.55723 11.8333 6.33337 11.6094 6.33337 11.3333V4.49996C6.33337 3.48744 7.15416 2.66663 8.16671 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V9.33329C14 9.60944 13.7762 9.83329 13.5 9.83329C13.2239 9.83329 13 9.60944 13 9.33329V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H8.16671Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.33329C11.4478 8.33329 11 8.78101 11 9.33329C11 9.88558 11.4478 10.3333 12 10.3333C12.5523 10.3333 13 9.88558 13 9.33329C13 8.78101 12.5523 8.33329 12 8.33329ZM10 9.33329C10 8.22872 10.8955 7.33329 12 7.33329C13.1046 7.33329 14 8.22872 14 9.33329C14 10.4379 13.1046 11.3333 12 11.3333C10.8955 11.3333 10 10.4379 10 9.33329Z",fill:"currentColor"})]}))})),ub=function(e){var t=e.assetPack,n=u.useContext(lb.Z).getPrivateAssetPackAudioArchiveUrl,r=u.useState(!1),i=(0,a.Z)(r,2),s=i[0],d=i[1];return(0,f.jsx)(L.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,f.jsx)(E.Z,{primary:!0,label:s?(0,f.jsx)(c.Trans,{id:"Loading..."}):(0,f.jsx)(c.Trans,{id:"Download pack sounds"}),icon:(0,f.jsx)(cb,{}),disabled:s,onClick:(0,o.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n(t.id);case 3:if(r=e.sent,d(!1),r){e.next=8;break}return console.error("Could not generate url for premium asset pack with name ".concat(t.name)),e.abrupt("return");case 8:F.ZP.openExternalURL(r);case 9:case"end":return e.stop()}}),e)})))})})},db=n(93431),pb=n(6429),hb=function(e){var t=e.steps;return(0,f.jsx)(pb.Z,{separator:">","aria-label":"breadcrumb",children:t.map((function(e,t){return e.onClick?(0,f.jsx)(ve.Z,{onClick:e.onClick,href:e.href,children:e.label},"breadcrumb".concat(t)):(0,f.jsx)(J.Z,{noMargin:!0,children:e.label},"breadcrumb".concat(t))}))})},fb=function(e){switch(e){case"small":return 80;case"medium":default:return 120;case"large":case"xlarge":return 130}},gb=function(e){switch(e){case"small":return 1;case"medium":default:return 2;case"large":return 3;case"xlarge":return 5}},mb=function(e){switch(e){case"small":case"medium":return 1;default:return 2}},xb={grid:{margin:"0 2px",overflow:"unset"},scrollView:{display:"flex",flexDirection:"column"},previewImage:{width:200,aspectRatio:"16 / 9",objectFit:"cover",position:"relative"}},vb=u.forwardRef((function(e,t){var n=e.assetShortHeaders,r=e.onOpenDetails,s=e.noResultsPlaceHolder,d=e.privateAssetPackListingDatas,p=e.publicAssetPacks,h=e.onPrivateAssetPackSelection,g=e.onPublicAssetPackSelection,m=e.noScroll,x=u.useContext(Nv.K),v=x.error,b=x.fetchAssetsAndFilters,y=x.clearAllFilters,Z=x.navigationState,k=x.licenses,w=x.authors,E=x.assetFiltersState,S=x.assetPackFiltersState,P=x.privateAssetPackListingDatas,I=u.useContext(ir.ZP).receivedAssetPacks,D=u.useState(null),A=(0,a.Z)(D,2),M=A[0],O=A[1],R=u.useState(!1),B=(0,a.Z)(R,2),_=B[0],N=B[1],U=u.useState(!1),H=(0,a.Z)(U,2),V=H[0],W=H[1],z=Z.getCurrentPage(),G=z.openedAssetPack,Y=z.filtersState.chosenCategory,q=(0,T.L)(),X=u.useRef(null);u.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=X.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=X.current;t&&t.scrollToPosition(e)}}}));var K=u.useMemo((function(){return!G&&S.typeFilter.hasFilters()}),[S,G]),Q=u.useMemo((function(){return E.animatedFilter.hasFilters()||E.viewpointFilter.hasFilters()||E.colorFilter.hasFilters()||E.dimensionFilter.hasFilters()||E.licenseFilter.hasFilters()||E.objectTypeFilter.hasFilters()}),[E]),$=u.useMemo((function(){return!G&&S.typeFilter.isOwned&&!S.typeFilter.isPremium&&!S.typeFilter.isFree&&!Q}),[S,Q,G]),ee=s||($?(0,f.jsx)(sb,{message:(0,f.jsx)(c.Trans,{id:"You don't own any pack yet!"}),onClear:y}):K&&Q?(0,f.jsx)(sb,{message:(0,f.jsx)(c.Trans,{id:"Cannot filter on both asset packs and assets at the same time. Try clearing one of the filters!"}),onClear:y}):(0,f.jsx)(sb,{onClear:y})),te=u.useState([]),ne=(0,a.Z)(te,2),re=ne[0],oe=ne[1];u.useEffect((function(){oe(Y?[Y.node.name]:[])}),[Y]);var ie=u.useCallback((function(e){return oe([].concat((0,j.Z)(re),[e]))}),[re]),ae=u.useCallback((function(e){e>=re.length||e<0?console.warn("Trying to go back to a folder that is not in the selected folders."):oe(re.slice(0,e+1))}),[re]);u.useEffect((function(){W(!0);var e=setTimeout((function(){return W(!1)}),100);return function(){return clearTimeout(e)}}),[re]);var se=u.useMemo((function(){return re.length&&n?function(e){var t=e.assetShortHeaders,n=e.selectedFolders,r=[],o=new Set;t.forEach((function(e){var t=e.tags,i=n[n.length-1],a=n.filter((function(e){return e===i})).length,s=function(e,t,n){var r=0,o=-1;do{o=e.indexOf(t,o+1)}while(-1!==o&&++r<n);return o}(t,n[n.length-1],a);if(-1===s)return t;var l=t.filter((function(e,t){return t>s}));l.length>0&&r.push(l),l.forEach((function(e){return o.add(e)}))}));var i=Array.from(o).filter((function(e){return r.filter((function(t){return t.includes(e)})).length===r.length})),a=r.map((function(e){return e.filter((function(e){return!i.includes(e)}))})),s=new Set;return a.forEach((function(e){return s.add(e[0])})),Array.from(s).filter(Boolean)}({assetShortHeaders:n,selectedFolders:re}):[]}),[n,re]),le=u.useMemo((function(){return se.length>0?se.map((function(e){return(0,f.jsx)($v.Zq,{tag:e,onSelect:function(){ie(e)}},e)})):[]}),[se,ie]),ce=u.useMemo((function(){return P&&G&&G.id?P.find((function(e){return e.id===G.id})):null}),[P,G]),ue=u.useMemo((function(){return n?K&&!G?[]:n.filter((function(e){if(!re.length)return!0;var t=e.tags;return re.every((function(e){return t.includes(e)}))})).map((function(e){return(0,f.jsx)($v.TT,{assetShortHeader:e,onOpenDetails:function(){return r(e)},size:fb(q),margin:4},e.id)})).splice(0,100):null}),[n,r,q,re,K,G]),de=u.useMemo((function(){return p&&g&&!Q?p.map((function(e,t){return(0,f.jsx)($v.fV,{assetPack:e,onSelect:function(){return g(e)}},"".concat(e.tag,"-").concat(t))})):[]}),[p,g,Q]),pe=u.useMemo((function(){var e=[],t=[],n=[],r=[];if(!d||!I||Q)return{allStandAlonePackTiles:[],allBundlePackTiles:[]};h&&d.forEach((function(o){var i=!!I&&!!I.find((function(e){return e.id===o.id})),a=(0,f.jsx)($v.c7,{assetPackListingData:o,onSelect:function(){h(o)},owned:i},o.id);o.includedListableProductIds&&o.includedListableProductIds.length?i?r.push(a):n.push(a):i?t.push(a):e.push(a)}));var o=[].concat(r,n);return{allStandAlonePackTiles:[].concat(t,(0,j.Z)(Qv(e,de,2,1))),allBundlePackTiles:o}}),[d,h,de,I,Q]),he=pe.allStandAlonePackTiles,fe=pe.allBundlePackTiles,ge=G?G.thumbnailUrl?G.thumbnailUrl:G.previewImageUrls?G.previewImageUrls[0]:null:null;u.useEffect((function(){(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce){e.next=3;break}return O(null),e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,db.D1)(ce.sellerId);case 6:t=e.sent,O(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()}),[ce]);var me=u.useMemo((function(){return G&&w&&G.authors?G.authors.map((function(e){return w.find((function(t){return t.name===e.name}))})).filter(Boolean):[]}),[G,w]),xe=u.useMemo((function(){return G&&k&&G.licenses?G.licenses.map((function(e){return k.find((function(t){return t.name===e.name}))})).filter(Boolean):[]}),[G,k]);return(0,f.jsxs)(Ot.Z,{ref:X,id:"asset-store-listing",style:(0,i.Z)((0,i.Z)({},xb.scrollView),m?{overflow:"hidden"}:{}),children:[!ue&&!v&&(0,f.jsx)(Qe.Z,{}),!ue&&v&&(0,f.jsx)(vr.Z,{onRetry:b,children:(0,f.jsx)(c.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}),!G&&fe.length?(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(Kv.Z,{cols:gb(q),style:xb.grid,cellHeight:"auto",spacing:4,children:fe})})}):null,!G&&he.length?(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(Kv.Z,{cols:gb(q),style:xb.grid,cellHeight:"auto",spacing:4,children:he})})}):null,G&&(0,f.jsx)(L.sg,{children:(0,f.jsxs)(C.pJ,{children:[ge&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(jf.W,{style:xb.previewImage,src:G.thumbnailUrl?G.thumbnailUrl:G.previewImageUrls?G.previewImageUrls[0]:"",alt:"Preview image of asset pack ".concat(G.name)},G.name),(0,f.jsx)(L.hS,{})]}),(0,f.jsxs)(L.sg,{noMargin:!0,alignItems:"flex-start",expand:!0,children:[(0,f.jsx)(J.Z,{size:"bold-title",children:G.name}),!!me&&me.length>0&&(0,f.jsxs)(J.Z,{size:"body",displayInlineAsSpan:!0,children:[(0,f.jsx)(c.Trans,{id:"by"})," ",me.map((function(e,t){return(0,f.jsxs)(u.Fragment,{children:[t>0&&(0,f.jsx)(f.Fragment,{children:", "}),(0,f.jsx)(ve.Z,{href:e.website,onClick:function(){return F.ZP.openExternalURL(e.website)},children:e.name},e.name)]},e.name)}))]}),!!xe&&xe.length>0&&(0,f.jsx)(J.Z,{size:"body",children:(0,f.jsx)(c.Trans,{id:"Type of License: <0>{0}</0>",values:{0:xe[0].name},components:[(0,f.jsx)(ve.Z,{href:xe[0].website,onClick:function(){return F.ZP.openExternalURL(xe[0].website)}})]})}),M&&(0,f.jsxs)(J.Z,{displayInlineAsSpan:!0,size:"sub-title",children:[(0,f.jsx)(c.Trans,{id:"by"})," ",(0,f.jsx)(ve.Z,{onClick:function(){return N(!0)},href:"#",children:M.username||""})]})]})]})}),G&&(le.length||ue&&ue.length)?(0,f.jsx)(L.sg,{children:(0,f.jsx)(J.Z,{size:"section-title",children:(0,f.jsx)(c.Trans,{id:"Content"})})}):null,re.length>1?(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(hb,{steps:re.map((function(e,t){return t===re.length-1?{label:cc()(e)}:{label:cc()(e),onClick:function(){ae(t)},href:"#"}}))})})}):null,G&&le.length?(0,f.jsxs)(L.sg,{justifyContent:"center",children:[(0,f.jsx)(Kv.Z,{style:xb.grid,cellHeight:"auto",cols:mb(q),spacing:4,children:le}),(0,f.jsx)(L.hS,{})]}):null,V?(0,f.jsx)(Qe.Z,{}):ue&&ue.length?(0,f.jsx)(Kv.Z,{style:xb.grid,cellHeight:"auto",children:ue}):G&&G.content&&(0,Bv.s0)(G)?(0,f.jsx)(ub,{assetPack:G}):null,ue&&!ue.length&&!fe.length&&!he.length&&ee,h&&_&&M&&(0,f.jsx)(Gs.Z,{userId:M.id,onClose:function(){return N(!1)},onAssetPackOpen:function(e){h(e),N(!1),O(null)}})]})})),bb=n(76683),jb=n(39909),Cb=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80498 0.154763C6.99565 -0.0449861 7.31215 -0.0523465 7.5119 0.138323L11.1786 3.63832C11.2774 3.73267 11.3333 3.86336 11.3333 4C11.3333 4.13664 11.2774 4.26733 11.1786 4.36168L7.5119 7.86168C7.31215 8.05235 6.99565 8.04499 6.80498 7.84524C6.61431 7.64549 6.62167 7.32899 6.82142 7.13832L10.1092 4L6.82142 0.861679C6.62167 0.671009 6.61431 0.354512 6.80498 0.154763Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.666656 4C0.666656 3.72386 0.890514 3.5 1.16666 3.5H10.6667C10.9428 3.5 11.1667 3.72386 11.1667 4C11.1667 4.27614 10.9428 4.5 10.6667 4.5H1.16666C0.890514 4.5 0.666656 4.27614 0.666656 4Z",fill:"currentColor"})]}))})),yb=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.195 0.154763C5.38567 0.354512 5.37831 0.671009 5.17856 0.861679L1.89079 4L5.17856 7.13832C5.37831 7.32899 5.38567 7.64549 5.195 7.84524C5.00433 8.04499 4.68783 8.05235 4.48809 7.86168L0.821419 4.36168C0.722578 4.26733 0.666656 4.13664 0.666656 4C0.666656 3.86336 0.722578 3.73267 0.821419 3.63832L4.48809 0.138323C4.68783 -0.0523465 5.00433 -0.0449861 5.195 0.154763Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833323 4C0.833323 3.72386 1.05718 3.5 1.33332 3.5H10.8333C11.1095 3.5 11.3333 3.72386 11.3333 4C11.3333 4.27614 11.1095 4.5 10.8333 4.5H1.33332C1.05718 4.5 0.833323 4.27614 0.833323 4Z",fill:"currentColor"})]}))})),Zb={previewBackground:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:10,width:300,height:250},chip:{marginBottom:2,marginRight:2},previewImage:{position:"relative",maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle",pointerEvents:"none",flex:.6},arrowContainer:{padding:6}},kb=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},wb=u.forwardRef((function(e,t){var n=e.onTagSelection,r=e.assetShortHeader,s=e.onOpenDetails,d=e.onAssetLoaded,p=e.onPrivateAssetPackSelection,h=u.useContext(Nv.K),g=h.authors,m=h.licenses,x=h.environment,v=h.error,b=h.useSearchItem,j=u.useState(null),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=u.useState(null),T=(0,a.Z)(w,2),E=T[0],S=T[1],P=u.useState(null),I=(0,a.Z)(P,2),D=I[0],M=I[1],O=(0,Bv.kt)(r),R=u.useContext(lb.Z).fetchPrivateAsset,_=u.useState([]),N=(0,a.Z)(_,2),H=N[0],V=N[1],W=u.useState(null),z=(0,a.Z)(W,2),G=z[0],Y=z[1],q=u.useRef(null);u.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=q.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=q.current;t&&t.scrollToPosition(e)}}}));var X=function(e){return(0,i.Z)((0,i.Z)({},Zb.previewImage),{},{imageRendering:(0,Bv.V0)(e)?(0,jb.g)():void 0})},K=u.useCallback((function(){(0,o.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k(null),!O){e.next=8;break}return e.next=5,R(r,{environment:x});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,Bv.WY)(r,{environment:x});case 10:e.t0=e.sent;case 11:if(t=e.t0){e.next=15;break}throw console.error("Cannot load private asset"),new Error("Cannot load private asset");case 15:k(t),"sprite"===t.objectType&&(n=t.objectAssets[0].object.animations[0].name,S(n)),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(0),console.error("Error while loading asset:",e.t1),M(e.t1);case 23:d&&d();case 24:case"end":return e.stop()}}),e,null,[[0,19]])})))()}),[d,O,R,r,x]),Q=u.useMemo((function(){return!(0,Bv.V0)(r)}),[r]);u.useEffect((function(){K()}),[K]);var $=u.useCallback((0,o.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==(t=Z&&Z.authorIds||[]).length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,db.TL)(t);case 6:n=e.sent,r=Object.keys(n).map((function(e){return n[e]})),V(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error while loading author public profiles:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[Z]);u.useEffect((function(){$()}),[$]);var te=Z&&g?Z.authors.map((function(e){return g.find((function(t){return t.name===e}))})).filter(Boolean):[],ne=!Z||Z.authors.length>0&&!g||Z.authorIds&&H.length>0&&0===H.length,re=Z&&m?m.find((function(e){return e.name===Z.license})):null,oe=Z&&Z.objectAssets[0]?function(e){var t={};return e.resources.forEach((function(e){t[e.name]=e})),t}(Z.objectAssets[0]):{},ie=Z?Z.objectAssets[0].object.animations:null,ae=ie?ie.find((function(e){return e.name===E})):null,se=ae?ae.directions[0]:null,ce=Z&&se?se.sprites.map((function(e){return oe[e.image]})):null,ue=b("",null,null,u.useMemo((function(){return[new _v.cx(r)]}),[r])),de=ue&&ue.slice(0,60);return(0,f.jsx)(Ot.Z,{ref:q,children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsx)(L.x1,{justifyContent:"space-between",noMargin:!0,children:(0,f.jsxs)(L.sg,{children:[(0,f.jsxs)(C.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"block-title",displayInlineAsSpan:!0,children:r.name}),!ne&&(0,f.jsxs)(C.pJ,{noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"body",children:(0,f.jsx)(c.Trans,{id:"by"})}),!!te&&te.map((function(e){return(0,f.jsx)(J.Z,{size:"body",children:(0,f.jsx)(ve.Z,{href:e.website,onClick:function(){return F.ZP.openExternalURL(e.website)},children:e.name},e.name)},e.name)})),!!H.length&&H.map((function(e){var t=e.username||"SpeXEngine user";return(0,f.jsx)(J.Z,{size:"body",children:(0,f.jsx)(ve.Z,{href:"#",onClick:function(){return Y(e)},children:t},e.id)},e.id)}))]})]}),(0,f.jsx)(L.x1,{alignItems:"center",children:(0,f.jsxs)("div",{style:{flexWrap:"wrap"},children:[r.tags.slice(0,5).map((function(e,t){return(0,f.jsxs)(u.Fragment,{children:[0!==t&&(0,f.jsx)(L.LZ,{}),(0,f.jsx)(le.Z,{size:"small",style:Zb.chip,label:kb(e),onClick:function(){n(e)}})]},e)})),r.tags.length>5&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(le.Z,{size:"small",style:Zb.chip,label:(0,f.jsx)(c.Trans,{id:"+ {0} tag(s)",values:{0:r.tags.length-5}})})]})]})})]})}),(0,f.jsxs)(C.ep,{noMargin:!0,children:[(0,f.jsxs)(L.sg,{children:[Z?(0,f.jsxs)(f.Fragment,{children:["sprite"===Z.objectType&&ce&&"string"===typeof E&&se&&(0,f.jsx)(ib.Z,{animationName:E,resourceNames:ce.map((function(e){return e.name})),getImageResourceSource:function(e){var t=oe[e];return t?t.file:""},isImageResourceSmooth:function(){return Q},timeBetweenFrames:se.timeBetweenFrames,isLooping:!0,hideCheckeredBackground:!0,deactivateControls:!0,displaySpacedView:!0,fixedHeight:250,fixedWidth:300,isAssetPrivate:O}),"sprite"!==Z.objectType&&(0,f.jsx)("div",{style:Zb.previewBackground,children:O?(0,f.jsx)(bb.Z,{style:X(Z),url:Z.previewImageUrls[0],alt:Z.name}):(0,f.jsx)(jf.W,{style:X(Z),src:Z.previewImageUrls[0],alt:Z.name})})]}):(0,f.jsx)("div",{style:Zb.previewBackground,children:(0,f.jsx)(Qe.Z,{})}),ie&&ie.length>1&&"string"===typeof E&&(0,f.jsx)(ee.Z,{elevation:4,variant:"outlined",background:"dark",children:(0,f.jsxs)(L.x1,{justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,f.jsx)("div",{style:Zb.arrowContainer,children:(0,f.jsx)(A.Z,{size:"small",onClick:function(){var e=ie.findIndex((function(e){return e.name===E})),t=0===e?ie.length-1:e-1;S(ie[t].name)},children:(0,f.jsx)(yb,{})})}),(0,f.jsx)(B.Z,{value:E,onChange:function(e,t,n){S(n)},fullWidth:!0,textAlign:"center",disableUnderline:!0,children:ie.map((function(e){var t=!e.name;return(0,f.jsx)(U.Z,{value:e.name,label:t?{id:"Default"}:kb(e.name),shouldNotTranslate:!t},e.name)}))}),(0,f.jsx)("div",{style:Zb.arrowContainer,children:(0,f.jsx)(A.Z,{size:"small",onClick:function(){var e=ie.findIndex((function(e){return e.name===E})),t=e===ie.length-1?0:e+1;S(ie[t].name)},children:(0,f.jsx)(Cb,{})})})]})})]}),(0,f.jsx)(L.sg,{expand:!0,children:Z?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{size:"body",children:!!re&&(0,f.jsx)(c.Trans,{id:"Type of License: <0>{0}</0>",values:{0:re.name},components:[(0,f.jsx)(ve.Z,{href:re.website,onClick:function(){return F.ZP.openExternalURL(re.website)}})]})}),(0,f.jsx)(J.Z,{size:"body",displayInlineAsSpan:!0,children:(0,f.jsx)($e.r,{source:Z.description,allowParagraphs:!0})})]}):D?(0,f.jsx)(vr.Z,{onRetry:K,children:(0,f.jsx)(c.Trans,{id:"Error while loading the asset. Verify your internet connection or try again later."})}):(0,f.jsx)(Qe.Z,{})})]}),Z&&(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{size:"block-title",displayInlineAsSpan:!0,children:(0,f.jsx)(c.Trans,{id:"You might like"})})}),(0,f.jsx)(L.x1,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(vb,{assetShortHeaders:de,onOpenDetails:function(e){k(null),s(e)},noScroll:!0,noResultsPlaceHolder:(0,f.jsx)(L.x1,{alignItems:"flex-start",children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"No similar asset was found."})})}),error:v})})]}),G&&(0,f.jsx)(Gs.Z,{userId:G.id,onClose:function(){return Y(null)},onAssetPackOpen:function(e){p(e),Y(null)}})]})})})),Tb=n(41693),Eb=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4509 4.08872C12.6781 4.24571 12.735 4.55714 12.578 4.78431L8.14508 11.1986L8.14507 11.1987C7.42761 12.2368 5.90028 12.2566 5.15616 11.2374L5.55998 10.9426L5.15616 11.2374L3.42953 8.87255C3.26669 8.64953 3.31549 8.33673 3.53851 8.17389C3.76153 8.01106 4.07433 8.05985 4.23717 8.28288L5.9638 10.6477C6.30202 11.111 6.99628 11.102 7.32242 10.6301C7.32242 10.6301 7.32242 10.6301 7.32242 10.6301L11.7554 4.21578C11.9123 3.98861 12.2238 3.93172 12.4509 4.08872Z",fill:"currentColor"})}))})),Sb=n(39700),Pb={selectedMedia:{width:"100%",aspectRatio:"16 / 9",objectFit:"cover",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},carouselItem:{display:"inline-block",outlineOffset:-1,borderRadius:4},imageCarouselItem:{height:80,aspectRatio:"16 / 9",display:"block",borderRadius:4},mobileImageCarouselItem:{aspectRatio:"16 / 9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},desktopGallery:{flex:1,display:"grid",grid:"auto / auto-flow max-content",overflowX:"scroll",scrollbarWidth:"thin",gap:"8px"},mobileGrid:{overflowX:"scroll",scrollbarWidth:"thin",overflowY:"hidden",scrollSnapType:"x mandatory"},flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},disabledText:{opacity:.6}},Ib=function(e){var t=e.mediaItems,n=e.altTextTemplate,r=e.horizontalOuterMarginToEatOnMobile,o=u.useState(0),s=(0,a.Z)(o,2),l=s[0],c=s[1],d="small"===(0,T.L)(),p=d&&r?2*r:0,h=u.useMemo((function(){return(0,Hr.Z)({"spacing-xs-1":{margin:0,"& > .MuiGrid-item:first-child":{paddingLeft:p},"& > .MuiGrid-item:last-child":{paddingRight:p}},root:d?{scrollbarHeight:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{height:0}}:void 0})}),[p,d])(),g=u.useState(0),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useState(0),j=(0,a.Z)(b,2),y=j[0],Z=j[1],k=u.useState(0),w=(0,a.Z)(k,2),E=w[0],S=w[1],P=x-30-(r||0);u.useEffect((function(){S(Math.round(y/(P+1)))}),[P,y]);var I=t[l];return d?(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},Pb.flexColumn),{},{marginLeft:r?-r:0,marginRight:r?-r:0}),children:[(0,f.jsx)(Zt.Z,{bounds:!0,onResize:function(e){v(e.bounds.width)},children:function(e){e.contentRect;var o=e.measureRef;return(0,f.jsx)("div",{style:Pb.flex,ref:o,children:(0,f.jsx)(Tb.Z,{classes:h,container:!0,spacing:1,wrap:"nowrap",style:Pb.mobileGrid,onScroll:function(e){return Z(e.currentTarget.scrollLeft)},children:t.map((function(e,t){var o=e.kind,a=e.url;return(0,f.jsx)(Tb.Z,{item:!0,style:{scrollSnapAlign:r?"center":"start"},children:(0,f.jsx)(Sb.Z,{children:"image"===o?(0,f.jsx)(jf.W,{src:a,style:(0,i.Z)((0,i.Z)({},Pb.mobileImageCarouselItem),{},{height:P/(16/9)}),alt:n.replace(/{mediaIndex}/g,String(l+1))}):(0,f.jsx)("div",{style:Pb.mobileImageCarouselItem,children:(0,f.jsx)("audio",{controls:!0,src:a,children:"Audio preview is unsupported."})})})},a)}))})})}}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsxs)(J.Z,{noMargin:!0,size:"body2",style:Pb.disabledText,children:[E+1,"/",t.length]})})]}):(0,f.jsxs)(C.ak,{noMargin:!0,children:["image"===I.kind?(0,f.jsx)(jf.W,{style:Pb.selectedMedia,src:I.url,alt:n.replace(/{mediaIndex}/g,String(l+1))}):(0,f.jsx)("div",{style:Pb.selectedMedia,children:(0,f.jsx)("audio",{controls:!0,src:I.url,children:"Audio preview is unsupported."})}),(0,f.jsx)("div",{style:Pb.desktopGallery,children:t.map((function(e,t){var r=e.kind,o=e.url;return(0,f.jsx)("div",{onClick:function(){return c(t)},tabIndex:0,style:(0,i.Z)((0,i.Z)({},Pb.carouselItem),{},{outline:t===l?"solid 1px white":void 0}),onKeyPress:function(e){(0,Io.ph)(e)&&c(t)},children:"image"===r?(0,f.jsx)(jf.W,{src:o,style:Pb.imageCarouselItem,alt:n.replace(/{mediaIndex}/g,(t+1).toString())}):(0,f.jsx)("img",{src:"res/audio-placeholder.jpg",style:Pb.imageCarouselItem,alt:"sound"})},o)}))})]})},Db=n(51137),Ab=n(75177),Lb=function(e){switch(e){case"small":return 2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 5}},Mb=["sprite","9patch","tiled","particleEmitter","font","audio","Scene3D::Model3DObject","partial"],Fb={sprite:{id:"Sprites"},"9patch":{id:"Panel sprites"},tiled:{id:"Tiled sprites"},"Scene3D::Model3DObject":{id:"3D model"},particleEmitter:{id:"Particle emitters"},font:{id:"Fonts"},audio:{id:"Audios"},partial:{id:"Other"}},Ob={disabledText:{opacity:.6},scrollview:{overflowX:"hidden"},grid:{margin:"0 2px",overflow:"unset"}},Rb=function(e){var t=e.privateAssetPackListingData,n=e.privateAssetPacksFromSameCreatorListingData,r=e.onOpenPurchaseDialog,i=e.isPurchaseDialogOpen,s=e.onAssetPackOpen,d=t.id,p=t.name,h=t.sellerId,g=u.useContext(Nv.K).privateAssetPackListingDatas,m=u.useContext(ir.ZP).receivedAssetPacks,x=u.useState(null),v=(0,a.Z)(x,2),b=v[0],y=v[1],Z=u.useState(!1),k=(0,a.Z)(Z,2),w=k[0],S=k[1],P=u.useState(!1),I=(0,a.Z)(P,2),D=I[0],A=I[1],M=u.useState(null),O=(0,a.Z)(M,2),R=O[0],B=O[1],_=u.useState(!1),N=(0,a.Z)(_,2),U=N[0],H=N[1],V=u.useState(null),W=(0,a.Z)(V,2),z=W[0],G=W[1],Y=(0,T.L)(),q="small"===Y,X=!!m&&!!m.find((function(e){return e.id===t.id})),K=u.useMemo((function(){if(!b||!g)return null;var e=t.includedListableProductIds;return e?e.map((function(e){var t=g.find((function(t){return t.id===e}));if(!t)return console.warn("Included pack ".concat(e," not found")),null;var n=!!m&&!!m.find((function(e){return e.id===t.id}));return(0,f.jsx)($v.c7,{assetPackListingData:t,onSelect:function(){return s(t)},owned:n},t.id)})):null}),[b,g,m,s,t]),Q=u.useMemo((function(){if(!b||!g)return null;var e=g.filter((function(e){return e.includedListableProductIds&&e.includedListableProductIds.includes(b.id)}));if(!e.length)return null;var t=e.filter((function(e){return!!m&&!!m.find((function(t){return t.id===e.id}))})),n=e.filter((function(e){return!t.find((function(t){return t.id===e.id}))}));return t.map((function(e){return(0,f.jsx)($v.rr,{assetPackListingData:e,onSelect:function(){return s(e)},owned:!0})})).concat(n.map((function(e){return(0,f.jsx)($v.rr,{assetPackListingData:e,onSelect:function(){return s(e)},owned:!1})})))}),[b,g,m,s]),$=u.useMemo((function(){return!n||n.length<2?null:n.filter((function(e){return e.id!==d})).map((function(e){var t=!!m&&!!m.find((function(t){return t.id===e.id}));return(0,f.jsx)($v.c7,{assetPackListingData:e,onSelect:function(){return s(e)},owned:t},e.id)}))}),[d,n,s,m]);u.useEffect((function(){(0,o.Z)(l().mark((function e(){var t,n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,Promise.all([(0,Bv.tL)(d),(0,db.D1)(h)]);case 4:t=e.sent,n=(0,a.Z)(t,2),r=n[0],o=n[1],y(r),B(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response&&404===e.t0.response.status?G((0,f.jsx)(c.Trans,{id:"Asset pack not found - An error occurred, please try again later."})):G((0,f.jsx)(c.Trans,{id:"An error occurred, please try again later."}));case 15:return e.prev=15,S(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))()}),[d,h,t.appStoreProductId]);var te=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(!X){e.next=5;break}return s(t),e.abrupt("return");case 5:if(e.prev=5,(0,Nr.GU)({assetPackId:b.id,assetPackName:b.name,assetPackTag:b.tag,assetPackKind:"private"}),!(0,Db.PN)()){e.next=17;break}return e.prev=8,H(!0),e.next=12,(0,Db.ZA)(t.appStoreProductId);case 12:return e.prev=12,H(!1),e.finish(12);case 15:e.next=18;break;case 17:r();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),console.warn("Unable to send event",e.t0);case 23:case"end":return e.stop()}}),e,null,[[5,20],[8,,12,15]])}))),[b,r,t,X,s]),ne=function(e){if(z)return null;var n=b?X?(0,f.jsx)(c.Trans,{id:"Explore assets"}):i||U?(0,f.jsx)(c.Trans,{id:"Processing..."}):(0,f.jsx)(c.Trans,{id:"Buy for {0}",values:{0:(0,Ab.I)({i18n:e,privateAssetPackListingData:t})}}):(0,f.jsx)(c.Trans,{id:"Loading..."}),r=!b||i||U;return(0,f.jsx)(E.Z,{primary:!0,label:n,onClick:te,disabled:r,id:"buy-asset-pack"},"buy-asset-pack")},re=b?[{kind:"image",url:t.thumbnailUrls[0]}].concat((0,j.Z)(b.previewImageUrls.map((function(e){return{kind:"image",url:e}})).concat(b.previewSoundUrls?b.previewSoundUrls.map((function(e){return{kind:"audio",url:e}})):[]))):[];return(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[z?(0,f.jsx)(L.x1,{alignItems:"center",justifyContent:"center",expand:!0,children:(0,f.jsx)(we.Z,{kind:"error",children:z})}):w?(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(Qe.Z,{})}):b&&R?(0,f.jsx)(L.sg,{noOverflowParent:!0,expand:!0,noMargin:!0,children:(0,f.jsxs)(Ot.Z,{autoHideScrollbar:!0,style:Ob.scrollview,children:[(0,f.jsx)(L.sg,{noMargin:!0,alignItems:"flex-end",children:(0,f.jsxs)(J.Z,{displayInlineAsSpan:!0,size:"sub-title",children:[(0,f.jsx)(c.Trans,{id:"by"})," ",(0,f.jsx)(ve.Z,{onClick:function(){return A(!0)},href:"#",children:R.username||""})]})}),(0,f.jsxs)(C.ep,{noColumnMargin:!0,noMargin:!0,children:[(0,f.jsx)(L.sg,{useFullHeight:!0,expand:!0,noMargin:!0,noOverflowParent:!0,children:(0,f.jsx)(Ib,{mediaItems:re,altTextTemplate:"Asset pack ".concat(p," preview image or sound {mediaIndex}"),horizontalOuterMarginToEatOnMobile:8})}),(0,f.jsxs)(C.ak,{useFullHeight:!0,expand:!0,noMargin:!0,children:[X&&(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"You already own this asset pack. Explore the assets to use them in your project."})})}),(0,f.jsx)(ee.Z,{variant:"outlined",style:{padding:q?20:30},background:"medium",children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsxs)(L.x1,{noMargin:!0,expand:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(J.Z,{noMargin:!0,size:"block-title",children:(0,Ab.I)({i18n:n,privateAssetPackListingData:t})}),ne(n)]}),(0,f.jsx)(J.Z,{size:"body2",displayInlineAsSpan:!0,children:(0,f.jsx)($e.r,{source:b.longDescription,allowParagraphs:!0})}),(0,f.jsxs)(C.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"Content"})}),Mb.map((function(e){return b.content[e]?(0,f.jsx)("li",{children:(0,f.jsxs)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,children:[b.content[e]," ",n._(Fb[e])]})},e):null}))]}),(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"Licensing"})}),(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(Eb,{fontSize:"small"}),(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Personal projects"})})]}),(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(Eb,{fontSize:"small"}),(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Professional projects"})})]}),(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(Eb,{fontSize:"small"}),(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Asset modification"})})]}),(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(bi.Z,{fontSize:"small",style:Ob.disabledText}),(0,f.jsx)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,style:Ob.disabledText,children:(0,f.jsx)(c.Trans,{id:"Redistribution & reselling"})})]}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(ve.Z,{onClick:function(){return F.ZP.openExternalURL("https://engine.spacexpanse.org/page/asset-store-license-agreement")},href:"https://engine.spacexpanse.org/page/asset-store-license-agreement",children:(0,f.jsx)(c.Trans,{id:"See details here"})})})})]})]})]})})]})]}),Q&&Q.length?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(L.hS,{}),Q,(0,f.jsx)(L.hS,{})]})}):null,K&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Included in this bundle"})})}),(0,f.jsxs)(L.x1,{children:[(0,f.jsx)(Kv.Z,{cols:Lb(Y),cellHeight:"auto",spacing:4,style:Ob.grid,children:K}),(0,f.jsx)(Tb.Z,{})]})]}),$&&$.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"From the same author"})})}),(0,f.jsxs)(L.x1,{children:[(0,f.jsx)(Kv.Z,{cols:Lb(Y),cellHeight:"auto",spacing:4,style:Ob.grid,children:$}),(0,f.jsx)(Tb.Z,{})]})]})]})}):null,D&&(0,f.jsx)(Gs.Z,{userId:h,onClose:function(){return A(!1)},onAssetPackOpen:function(e){s(e),A(!1)}})]})}})},Bb=n(36465),_b=function(e){return(0,f.jsx)(V.ZP,{open:!0,maxWidth:"xs",title:(0,f.jsx)(c.Trans,{id:"Asset store password"}),onApply:e.onApply,onRequestClose:e.onClose,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),onClick:e.onClose},"cancel"),(0,f.jsx)(V.vF,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Continue"}),onClick:e.onApply},"continue")],children:(0,f.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.onApply()},autocomplete:"off",name:"asset-store-password",children:(0,f.jsx)(po.ZP,{fullWidth:!0,autoFocus:"desktopAndMobileDevices",value:e.passwordValue,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Password"}),type:"password",onChange:function(t,n){e.setPasswordValue(n)}})})})},Nb=function(e){var t=e.privateAssetPackListingData,n=e.onClose,r=e.onSuccessfulPurchase,s=u.useContext(ir.ZP),d=s.profile,p=s.getAuthorizationHeader,h=s.onLogin,g=s.onCreateAccount,m=s.receivedAssetPacks,x=u.useState(!1),v=(0,a.Z)(x,2),b=v[0],j=v[1],y=u.useState(!m),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=u.useState(!1),E=(0,a.Z)(T,2),S=E[0],P=E[1],I=u.useState(!1),D=(0,a.Z)(I,2),A=D[0],M=D[1],O=u.useState(""),R=(0,a.Z)(O,2),B=R[0],N=R[1],U=function(){var e=(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return M(!1),e.prev=3,j(!0),e.next=7,(0,Bb.GT)(p,(0,i.Z)({productId:t.id,priceName:t.prices[0].name,userId:d.id,customerEmail:d.email},B?{password:B}:void 0));case 7:n=e.sent,F.ZP.openExternalURL(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),e.t0.response&&403===e.t0.response.status&&"auth/wrong-password"===e.t0.response.data.code?(0,Xr.gR)({message:"Operation not allowed",rawError:e.t0,errorId:"asset-pack-purchase-not-authorized"}):(console.error("Unable to get the checkout URL",e.t0),(0,Xr.gR)({message:"Unable to get the checkout URL. Please try again later.",rawError:e.t0,errorId:"asset-pack-checkout-error"})),j(!1);case 15:return e.prev=15,N(""),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})));return function(){return e.apply(this,arguments)}}(),H=function(){F.ZP.isDev()?M(!0):U()},W=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Bb.cx)(p,{userId:d.id,productType:"asset-pack",role:"receiver"});case 5:if(!e.sent.find((function(e){return e.productId===t.id}))){e.next=9;break}return e.next=9,r();case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Unable to get the user purchases",e.t0),(0,Xr.gR)({message:"An error happened while checking if your purchase was successful. If you have completed the payment, close and re-open the asset store to see your asset pack!",rawError:e.t0,errorId:"asset-pack-purchase-error"});case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),[d,p,t,r]);(0,Pa.Y)((function(){W()}),b?3900:null),u.useEffect((function(){var e;return(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m&&(e=setTimeout((function(){return w(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[m]),u.useEffect((function(){m&&(m.find((function(e){return e.id===t.id}))&&(b?(j(!1),P(!0)):S||n()))}),[m,t,b,n,k,S]);var z=d?S?{subtitle:(0,f.jsx)(c.Trans,{id:"Your purchase has been processed!"}),content:(0,f.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can close this window and go back to the asset store to download your assets."})})})}:b?{subtitle:(0,f.jsx)(c.Trans,{id:"Complete your payment on the web browser"}),content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(L.x1,{justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(pi.Z,{size:20}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"Once you're done, come back to SpeXEngine and the assets will be added to your account automatically."})})})]})}:k?{subtitle:(0,f.jsx)(c.Trans,{id:"Loading your profile..."}),content:(0,f.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,f.jsx)(pi.Z,{size:20})})}:{subtitle:(0,f.jsx)(c.Trans,{id:"The asset pack {0} will be linked to your account {1}.",values:{0:t.name,1:d.email}}),content:(0,f.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,f.jsx)(c.Trans,{id:"Log-in to purchase this item"}),content:(0,f.jsx)(hl.Z,{onLogin:h,onCreateAccount:g,message:(0,f.jsx)(c.Trans,{id:"Asset packs will be linked to your user account and available for all your projects. Log-in or sign-up to purchase this pack."}),justifyContent:"center"})},G=d&&!b&&!S&&!k,Y=[(0,f.jsx)(_.Z,{label:S?(0,f.jsx)(c.Trans,{id:"Close"}):(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:n},"cancel"),G?(0,f.jsx)(V.vF,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Continue"}),onClick:H},"continue"):null];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"{0}",values:{0:t.name}}),maxWidth:"sm",open:!0,onRequestClose:n,actions:Y,onApply:S?n:H,cannotBeDismissed:!0,flexColumnBody:!0,children:[(0,f.jsxs)(C.pJ,{justifyContent:"center",alignItems:"center",children:[S&&(0,f.jsx)(Eb,{}),(0,f.jsx)(J.Z,{size:"sub-title",children:z.subtitle})]}),z.content]}),A&&(0,f.jsx)(_b,{onApply:U,onClose:function(){return M(!1)},passwordValue:B,setPasswordValue:N})]})},Ub=n(1525),Hb={paper:{display:"flex",width:250},drawerPaper:{display:"flex"}},Vb={style:Hb.drawerPaper},Wb={keepMounted:!0},zb=function(e){var t=e.open,n=e.onClose,r=e.children;return"small"===(0,T.L)()?(0,f.jsx)(d.ZP,{anchor:"right",open:t,onClose:n,PaperProps:Vb,ModalProps:Wb,children:r}):t?(0,f.jsx)(ee.Z,{style:Hb.paper,background:"medium",children:r}):null},Gb=n(27817),Yb=u.forwardRef((function(e,t){var n=u.useContext(Nv.K),r=n.assetShortHeadersSearchResults,i=n.publicAssetPacksSearchResults,s=n.privateAssetPackListingDatasSearchResults,d=n.publicAssetPacks,p=n.privateAssetPackListingDatas,h=n.error,m=n.fetchAssetsAndFilters,x=n.navigationState,v=n.searchText,b=n.setSearchText,j=n.clearAllFilters,y=n.assetPackRandomOrdering,Z=x.getCurrentPage(),k=Z.openedAssetPack,w=Z.openedAssetShortHeader,E=Z.openedAssetCategory,S=Z.openedPrivateAssetPackListingData,P=Z.filtersState,I=(0,Ub.C$)(Z),D=(0,Ub.wA)(Z),M=u.useRef(null),O=(0,eo.bX)(),R="small"===(0,T.L)(),B=u.useState(!I&&!w),_=(0,a.Z)(B,2),N=_[0],U=_[1],H=u.useCallback((function(){R||U(!0)}),[R]),V=u.useState(null),W=(0,a.Z)(V,2),z=W[0],G=W[1],Y=u.useContext(ir.ZP),q=Y.onPurchaseSuccessful,X=Y.receivedAssetPacks,K=u.useRef(!1),Q=u.useRef(null!=w),$=u.useCallback((function(e){K.current=!1,Q.current=null!==e.openedAssetShortHeader}),[]),ee=u.useCallback((function(e){var t=e.searchText||"";return v!==t&&(b(t),!0)}),[v,b]),te=!w&&!S&&!(k&&k.content&&(0,Bv.s0)(k)),ne=u.useRef(null),re=u.useRef(null),oe=u.useRef(null),ie=u.useCallback((function(){return ne.current||re.current||oe.current}),[]),ae=u.useCallback((function(){var e=ie();e&&(Z.scrollPosition=e.getScrollPosition())}),[ie,Z]),se=u.useCallback((function(e){if(!K.current){var t=ie();if(t){var n=e.scrollPosition;n?t.scrollToPosition(n):t.scrollToPosition(0),K.current=!0}}}),[ie]);u.useLayoutEffect((function(){var e=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=4;break}return j(),e.next=4,U(!1);case 4:Q.current||se(Z);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[I,se,Z]),u.useImperativeHandle(t,(function(){return{onClose:ae}}));var le=u.useCallback((function(e){var t=k?k.name:null,n=k?k.tag:null,r=k&&k.id?k.id:null,o=function(e){var t=e.privateAssetPackListingDatas,n=e.publicAssetPacks,r=e.assetPack;return r?r.id&&t&&t.find((function(e){return e.id===r.id}))?"private":n&&n.starterPacks.find((function(e){return e.tag===r.tag}))?"public":"unknown":"unknown"}({assetPack:k,publicAssetPacks:d,privateAssetPackListingDatas:p});(0,Nr.In)({id:e.id,name:e.name,assetPackName:t,assetPackTag:n,assetPackId:r,assetPackKind:o}),ae();var i=v;x.openDetailPage({assetShortHeader:e,previousSearchText:i})}),[k,d,p,ae,x,v]),ce=u.useCallback((function(e){if((0,Nr.BA)({assetPackTag:e.tag,assetPackId:null,assetPackName:e.name,assetPackKind:"public",source:"store-home"}),e.externalWebLink)F.ZP.openExternalURL(e.externalWebLink);else{ae();var t=v;b(""),x.openPackPage({assetPack:e,previousSearchText:t}),H()}}),[x,v,ae,b,H]),ue=u.useCallback((function(e){var t=X?X.find((function(t){return t.id===e.id})):null;if(!t){(0,Nr.rg)({assetPackName:e.name,assetPackId:e.id,assetPackKind:"private"}),ae();var n=v;return b(""),void x.openPrivateAssetPackInformationPage({assetPack:e,previousSearchText:n})}(0,Nr.BA)({assetPackName:e.name,assetPackId:e.id,assetPackTag:null,assetPackKind:"private",source:"store-home"}),ae();var r=v;b(""),x.openPackPage({assetPack:t,previousSearchText:r}),H()}),[X,ae,x,b,H,v]),de=u.useCallback((function(e){ae(),x.openAssetCategoryPage(e)}),[x,ae]);u.useEffect((function(){if(z){var e=Z.openedAssetPack&&Z.openedAssetPack.id&&Z.openedAssetPack.id===z.id;if(X&&!e){var t=X.find((function(e){return e.id===z.id}));t&&(b(""),x.clearPreviousPageFromHistory(),x.openPackPage({assetPack:t,previousSearchText:""}),H())}}}),[X,z,x,Z,ae,b,H]);var pe=u.useCallback((function(e){var t=X&&X.find((function(t){return t.tag===e})),n=d&&d.starterPacks.find((function(t){return t.tag===e}));ae(),b(""),t?x.openPackPage({assetPack:t,previousSearchText:""}):n?x.openPackPage({assetPack:n,previousSearchText:""}):x.openTagPage(e),j(),H()}),[b,X,d,ae,j,x,H]);u.useEffect((function(){O&&M.current&&M.current.focus()}),[O]);var he=u.useMemo((function(){if(!S||!p||!X)return null;var e=X.map((function(e){return e.id}));return p.filter((function(t){return t.sellerId===S.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[S,p,X]);return(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,useFullHeight:!0,noOverflowParent:!0,id:"asset-store",children:[(0,f.jsxs)(C.pJ,{children:[(0,f.jsx)(A.Z,{id:"home-button",tooltip:{id:"Back to discover"},onClick:function(){b("");var e=x.openHome();$(e),j(),U(!1)},size:"small",children:(0,f.jsx)(g,{})},"back-discover"),(0,f.jsx)(L.sg,{expand:!0,useFullHeight:!0,noMargin:!0,children:(0,f.jsx)(pt.Z,{placeholder:{id:"Search assets"},value:v,onChange:D?b:function(e){b(e),e&&(x.clearHistory(),x.openSearchResultPage(),H())},onRequestSearch:function(){},ref:M,id:"asset-store-search-bar"})}),(0,f.jsx)(A.Z,{onClick:function(){return U(!N)},disabled:!te,selected:te&&N,size:"small",children:(0,f.jsx)(Rv,{})})]}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(L.x1,{justifyContent:"space-between",noMargin:!0,alignItems:"center",children:(!I||I&&!!E)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.sg,{expand:!0,alignItems:"flex-start",noMargin:!0,children:(0,f.jsx)(vg.Z,{icon:(0,f.jsx)(Va,{}),label:(0,f.jsx)(c.Trans,{id:"Back"}),primary:!1,onClick:(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.backToPreviousPage(),!ee(t)){e.next=9;break}return e.next=5,new Promise((function(e){return setTimeout(e,500)}));case 5:$(t),se(t),e.next=10;break;case 9:$(t);case 10:case"end":return e.stop()}}),e)})))})}),(k||S||P.chosenCategory)&&(0,f.jsxs)(f.Fragment,{children:[!k&&!S&&(0,f.jsx)(L.sg,{expand:!0,alignItems:"center",children:(0,f.jsx)(J.Z,{size:"block-title",noMargin:!0,children:P.chosenCategory?(0,Gb.capitalize)(P.chosenCategory.node.name):""})}),(0,f.jsx)(L.sg,{expand:!0,alignItems:"flex-end",noMargin:!0,justifyContent:"center",children:k&&k.content&&(0,Bv.O3)(k)&&!(0,Bv.s0)(k)?(0,f.jsx)(ub,{assetPack:k}):null})]})]})})}),(0,f.jsxs)(L.x1,{expand:!0,noMargin:!0,overflow:"hidden",children:[I?h?(0,f.jsx)(vr.Z,{onRetry:m,children:(0,f.jsx)(we.Z,{kind:"error",children:(0,f.jsx)(c.Trans,{id:"An error occurred when fetching the asset store content. Please try again later."})})}):d&&p&&y?(0,f.jsx)(ob,{ref:ne,publicAssetPacks:d,privateAssetPackListingDatas:p,assetPackRandomOrdering:y,onPublicAssetPackSelection:ce,onPrivateAssetPackSelection:ue,onCategorySelection:de,openedAssetCategory:E}):(0,f.jsx)(Qe.Z,{}):D?(0,f.jsx)(vb,{publicAssetPacks:i,privateAssetPackListingDatas:s,assetShortHeaders:r,ref:oe,error:h,onOpenDetails:le,onPrivateAssetPackSelection:ue,onPublicAssetPackSelection:ce}):w?(0,f.jsx)(wb,{ref:re,onTagSelection:pe,assetShortHeader:w,onOpenDetails:le,onAssetLoaded:function(){return se(Z)},onPrivateAssetPackSelection:ue}):S?(0,f.jsx)(Rb,{privateAssetPackListingData:S,onOpenPurchaseDialog:function(){return G(S)},isPurchaseDialogOpen:!!z,onAssetPackOpen:ue,privateAssetPacksFromSameCreatorListingData:he}):null,!!z&&(0,f.jsx)(Nb,{privateAssetPackListingData:z,onClose:function(){return G(null)},onSuccessfulPurchase:q}),te&&(0,f.jsx)(zb,{onClose:function(){return U(!1)},open:N,children:(0,f.jsx)(Ot.Z,{children:(0,f.jsxs)(L.sg,{children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsxs)(L.x1,{alignItems:"center",children:[(0,f.jsx)(Rv,{}),(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Object filters"})})]})}),(0,f.jsx)(L.x1,{justifyContent:"space-between",alignItems:"center",children:(0,f.jsx)(Jv,{})})]})})})]})]})})),qb=n(57244),Xb=n(38428),Jb=n.n(Xb),Kb=n(3698),Qb=n(50463),$b=n(19345),ej=function(e){var t=e.assetPack,n=e.assetShortHeaders,r=e.addedAssetIds,i=e.onClose,s=e.onAssetsAdded,d=e.project,p=e.objectsContainer,h=e.onObjectsAddedFromAssets,g=e.canInstallPrivateAsset,m=e.resourceManagementProps,x=n.filter((function(e){return!r.has(e.id)})),v=0===x.length,b=!v&&x.length===n.length,j=n.length>100,y=u.useState(!1),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=u.useMemo((function(){return n.some((function(e){return(0,Bv.kt)(e)}))}),[n]),S=u.useMemo((function(){return g()}),[g]),P=u.useContext(qr.Z),I=u.useContext(lb.Z).installPrivateAsset,D=cj(),A=lj(),M=u.useState(""),F=(0,a.Z)(M,2),O=F[0],R=F[1],B=(0,Nt.mapFor)(0,d.getLayoutsCount(),(function(e){return d.getLayoutAt(e).getName()})),_=p?null:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Choose where to add the assets:"})}),(0,f.jsxs)(Qb.Z,{"aria-label":"Associated scene",name:"associated-layout",value:O,onChange:function(e){return R(e.target.value)},children:[(0,f.jsx)($b.Z,{value:"",control:(0,f.jsx)(Kb.Z,{color:"secondary"}),label:(0,f.jsx)(c.Trans,{id:"Global objects in the project"}),disabled:k}),B.map((function(e){return(0,f.jsx)($b.Z,{value:e,control:(0,f.jsx)(Kb.Z,{color:"secondary"}),label:e,disabled:k},e)}))]})]}),N=p||(d.hasLayoutNamed(O)?d.getLayout(O):d),U=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,i,a,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length>100)){e.next=4;break}return e.abrupt("return");case 4:return w(!0),e.prev=5,e.next=8,D(t);case 8:return n=e.sent,e.next=11,(0,Jr.Sg)({assets:n,project:d});case 11:if(r=e.sent,e.t0=r.outOfDateExtensionShortHeaders.length>0,!e.t0){e.next=17;break}return e.next=16,A(r.outOfDateExtensionShortHeaders);case 16:e.t0=e.sent;case 17:return i=e.t0,e.next=20,(0,Jr.UN)({requiredExtensionInstallation:r,shouldUpdateExtension:i,eventsFunctionsExtensionsState:P,project:d});case 20:return e.next=22,Jb().withConcurrency(6).for(n).process(function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,Bv.kt)(t)){e.next=6;break}return e.next=3,I({asset:t,project:d,objectsContainer:N});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,(0,Jr.Lu)({asset:t,project:d,objectsContainer:N});case 8:e.t0=e.sent;case 9:if(n=e.t0){e.next=12;break}throw new Error("Unable to install the asset.");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:if(a=e.sent,c=a.results,!(u=a.errors).length){e.next=27;break}throw new Error("Error(s) while installing assets. The first error is: "+u[0].message);case 27:return h(c.map((function(e){return e.createdObjects})).flat()),e.next=30,m.onFetchNewlyAddedResources();case 30:w(!1),s(),e.next=39;break;case 34:e.prev=34,e.t1=e.catch(5),w(!1),console.error("Error while installing the assets",e.t1),(0,Xr.gR)({message:"There was an error while installing the assets. Verify your internet connection or try again later.",rawError:e.t1,errorId:"install-asset-pack-error"});case 39:case"end":return e.stop()}}),e,null,[[5,34]])})));return function(t){return e.apply(this,arguments)}}(),[D,d,A,P,h,m,s,I,N]),H=T&&!S?{actionButton:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Add the assets"}),primary:!0,disabled:!0,onClick:function(){}},"continue"),onApply:function(){},content:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You need to save this project as a cloud project to install premium assets. Please save your project and try again."})})})}:j?{actionButton:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Add the assets"}),primary:!0,disabled:!0,onClick:function(){}},"continue"),onApply:function(){},content:(0,f.jsx)(we.Z,{kind:"warning",children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can only install up to {MAX_ASSETS_TO_INSTALL} assets at once. Try filtering the assets you would like to install, or install them one by one.",values:{MAX_ASSETS_TO_INSTALL:100}})})})}:k?{actionButton:(0,f.jsx)(vg.Z,{label:(0,f.jsx)(c.Trans,{id:"Please wait..."}),disabled:!0,onClick:function(){}},"loading"),onApply:function(){},content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Installing assets..."})}),(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsx)(Vs.Z,{})})]})}:v?{actionButton:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Install again"}),primary:!1,onClick:function(){return U(n)}},"install-again"),onApply:function(){return U(n)},content:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You already have these {0} assets installed, do you want to add them again?",values:{0:n.length}})})}:b?{actionButton:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Add the assets"}),primary:!0,onClick:function(){return U(n)}},"continue"),onApply:function(){return U(n)},content:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You're about to add {0} assets.",values:{0:n.length}})})}:{actionButton:(0,f.jsx)(qb.Z,{label:(0,f.jsx)(c.Trans,{id:"Install the missing assets"}),primary:!0,onClick:function(){U(x)},buildMenuTemplate:function(e){return[{label:e._({id:"Install all the assets"}),click:function(){return U(n)}}]}},"install-missing"),onApply:function(){return U(x)},content:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You already have {0} asset(s) in your scene. Do you want to add the remaining {1} one(s)?",values:{0:n.length-x.length,1:x.length}})})};return(0,f.jsx)(V.ZP,{title:t?t.name:(0,f.jsx)(c.Trans,{id:"Assets"}),maxWidth:"sm",open:!0,onRequestClose:function(){k||i()},cannotBeDismissed:!0,actions:[k?null:(0,f.jsx)(vg.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:i},"cancel"),H.actionButton],onApply:H.onApply,children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[H.content,_]})})},tj=function(e){var t=new Set;return(0,Nt.mapFor)(0,e.getObjectsCount(),(function(n){var r=e.getObjectAt(n).getAssetStoreId();r&&t.add(r)})),t},nj=function(e,t){var n=tj(e);if(t){var r=tj(t);n=new Set([].concat((0,j.Z)(n),(0,j.Z)(r)))}else(0,Nt.mapFor)(0,e.getLayoutsCount(),(function(t){var r=e.getLayoutAt(t);n=new Set([].concat((0,j.Z)(n),(0,j.Z)(tj(r))))}));return n},rj=function(e){var t=e.enumeratedObjectMetadata,n=e.onClick,r=e.id;return""===t.name?null:(0,f.jsx)(ze,{id:r,leftIcon:(0,f.jsx)(Mc.Z,{src:t.iconFilename,iconSize:40,isGDevelopIcon:!0}),primaryText:t.fullName,secondaryText:t.description,secondaryTextLines:2,onClick:n},t.name)},oj=function(e){var t=e.packTag,n=e.onAssetSelect,r=e.onBack,o=e.isAssetBeingInstalled,i=u.useContext(Nv.K),a=i.useSearchItem,s=i.error,l=a("",u.useMemo((function(){return{node:{name:t,allChildrenTags:[],children:[]},parentNodes:[]}}),[t]),null,u.useMemo((function(){return[]}),[]));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(vg.Z,{icon:(0,f.jsx)(Va,{}),label:(0,f.jsx)(c.Trans,{id:"Back"}),primary:!1,onClick:r,disabled:o})}),(0,f.jsx)(vb,{assetShortHeaders:l,error:s,onOpenDetails:function(e){o||n(e)}})]}),(0,f.jsx)(gi,{show:o})]})},ij=function(e){var t,n=e.i18n,o=e.project,a=Sc(o),s=(t={},(0,r.Z)(t,$c("General",n),[{name:"Sprite"},{name:"TiledSpriteObject::TiledSprite"},{name:"PanelSpriteObject::PanelSprite"}]),(0,r.Z)(t,$c("Input",n),[{name:"SpriteMultitouchJoystick::SpriteMultitouchJoystick",fullName:n._({id:"Multitouch Joystick"}),description:n._({id:"Joystick for touchscreens."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMTYiIGN5PSIxNiIgcj0iMTMiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QwIiBwb2ludHM9IjI4LjQsMTIgMjAsMTIgMjAsMy42ICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMjAsMjguNCAyMCwyMCAyOC40LDIwICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMy42LDIwIDEyLDIwIDEyLDI4LjQgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIxMiwzLjYgMTIsMTIgMy42LDEyICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxNiw2IDE2LjcsNyAxNS4zLDcgIi8+DQo8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjE2LDI2IDE1LjMsMjUgMTYuNywyNSAiLz4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNiwxNiA3LDE1LjMgNywxNi43ICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNiwxNiAyNSwxNi43IDI1LDE1LjMgIi8+DQo8L3N2Zz4NCg==",assetStorePackTag:"multitouch joysticks",requiredExtensions:[{extensionName:"SpriteMultitouchJoystick",extensionVersion:"1.0.0"}]}]),(0,r.Z)(t,$c("Text",n),[{name:"TextObject::Text"},{name:"BBText::BBText"},{name:"BitmapText::BitmapTextObject"}]),(0,r.Z)(t,$c("User interface",n),[{name:"PanelSpriteButton::PanelSpriteButton",fullName:n._({id:"Panel sprite button"}),description:n._({id:"Resizable button with text customization."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI5LDIzSDNjLTEuMSwwLTItMC45LTItMlYxMWMwLTEuMSwwLjktMiwyLTJoMjZjMS4xLDAsMiwwLjksMiwydjEwQzMxLDIyLjEsMzAuMSwyMywyOSwyM3oiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMywxOUwxMywxOWMtMS4xLDAtMi0wLjktMi0ydi0yYzAtMS4xLDAuOS0yLDItMmgwYzEuMSwwLDIsMC45LDIsMnYyQzE1LDE4LjEsMTQuMSwxOSwxMywxOXoiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIxOCIgeTE9IjEzIiB4Mj0iMTgiIHkyPSIxOSIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjIxIiB5MT0iMTMiIHgyPSIxOCIgeTI9IjE3Ii8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMjEiIHkxPSIxOSIgeDI9IjE5IiB5Mj0iMTYiLz4NCjwvc3ZnPg0K",assetStorePackTag:"menu buttons",requiredExtensions:[{extensionName:"PanelSpriteButton",extensionVersion:"1.0.0"}]},{name:"PanelSpriteSlider::PanelSpriteSlider",fullName:n._({id:"Slider"}),description:n._({id:"Let users select a numerical value by dragging a slider."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMjMiIGN5PSI3IiByPSIzIi8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMyIgeTE9IjciIHgyPSIyMCIgeTI9IjciLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjciIHgyPSIyNiIgeTI9IjciLz4NCjxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjEyIiBjeT0iMTYiIHI9IjMiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIzIiB5MT0iMTYiIHgyPSI5IiB5Mj0iMTYiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjE2IiB4Mj0iMTUiIHkyPSIxNiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMjMiIGN5PSIyNSIgcj0iMyIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjMiIHkxPSIyNSIgeDI9IjIwIiB5Mj0iMjUiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjI1IiB4Mj0iMjYiIHkyPSIyNSIvPg0KPC9zdmc+DQo=",assetStorePackTag:"settings ui",requiredExtensions:[{extensionName:"PanelSpriteSlider",extensionVersion:"1.0.0"}]},{name:"SpriteToggleSwitch::SpriteToggleSwitch",fullName:n._({id:"Toggle switch"}),description:n._({id:"A toggle switch that users can click or touch."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzLDIzSDljLTMuOSwwLTctMy4xLTctN3YwYzAtMy45LDMuMS03LDctN2gxNGMzLjksMCw3LDMuMSw3LDd2MEMzMCwxOS45LDI2LjksMjMsMjMsMjN6Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI5IiBjeT0iMTYiIHI9IjQiLz4NCjwvc3ZnPg0K",assetStorePackTag:"settings ui",requiredExtensions:[{extensionName:"SpriteToggleSwitch",extensionVersion:"1.0.0"}]},{name:"PanelSpriteContinuousBar::PanelSpriteContinuousBar",fullName:n._({id:"Resource bar (continuous)"}),description:n._({id:"A bar that represents a resource in the game (health, mana, ammo, etc)."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNMjgsMTJIMTRINGMtMi4yLDAtNCwxLjgtNCw0czEuOCw0LDQsNGgxMGgxNGMyLjIsMCw0LTEuOCw0LTRTMzAuMiwxMiwyOCwxMnogTTQsMThjLTEuMSwwLTItMC45LTItMnMwLjktMiwyLTJoMTANCgljMS4xLDAsMiwwLjksMiwycy0wLjksMi0yLDJINHoiLz4NCjwvc3ZnPg0K",assetStorePackTag:"resource bars",requiredExtensions:[{extensionName:"PanelSpriteContinuousBar",extensionVersion:"1.0.0"}]},{name:"TiledUnitsBar::TiledUnitsBar",fullName:n._({id:"Resource bar (separated units)"}),description:n._({id:"A bar that represents a resource in the game (health, mana, ammo, etc)."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWRvdHMtaG9yaXpvbnRhbCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiwxMkEyLDIgMCAwLDEgMTgsMTBBMiwyIDAgMCwxIDIwLDEyQTIsMiAwIDAsMSAxOCwxNEEyLDIgMCAwLDEgMTYsMTJNMTAsMTJBMiwyIDAgMCwxIDEyLDEwQTIsMiAwIDAsMSAxNCwxMkEyLDIgMCAwLDEgMTIsMTRBMiwyIDAgMCwxIDEwLDEyTTQsMTJBMiwyIDAgMCwxIDYsMTBBMiwyIDAgMCwxIDgsMTJBMiwyIDAgMCwxIDYsMTRBMiwyIDAgMCwxIDQsMTJaIiAvPjwvc3ZnPg==",assetStorePackTag:"resource bars",requiredExtensions:[{extensionName:"TiledUnitsBar",extensionVersion:"1.0.0"}]},{name:"TextInput::TextInputObject"},{name:"Video::VideoObject"}]),(0,r.Z)(t,$c("Visual effect",n),[{name:"Lighting::LightObject"},{name:"ParticleSystem::ParticleEmitter"}]),(0,r.Z)(t,$c("Advanced",n),[{name:"TileMap::TileMap"},{name:"TileMap::CollisionMask"},{name:"PrimitiveDrawing::Drawer"}]),t);return a.forEach((function(e){var t=$c(e.categoryFullName,n);s[t]=s[t]||[];var r=s[t].findIndex((function(t){return t.name===e.name}));if(-1!==r){var o=s[t][r];s[t][r]=(0,i.Z)((0,i.Z)({},o),e)}else s[t]=[].concat((0,j.Z)(s[t]),[e])})),s};function aj(e){var t=e.project,n=e.onCreateNewObject,r=e.onCustomObjectSelected,o=e.selectedCustomObject,i=e.onInstallAsset,a=e.isAssetBeingInstalled,s=e.i18n,l=u.useMemo((function(){return ij({project:t,i18n:s})}),[t,s]),c=(0,Ct.Z)("intro-object-types").DismissableTutorialMessage;return o&&o.assetStorePackTag?(0,f.jsx)(oj,{packTag:o.assetStorePackTag,onAssetSelect:i,isAssetBeingInstalled:a,onBack:function(){return r(null)}}):(0,f.jsxs)(Ot.Z,{children:[c&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:c})}),(0,f.jsx)(Ge,{children:Object.keys(l).map((function(e){var t=l[e];return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Mu.Z,{children:e}),t.map((function(e){return(0,f.jsx)(rj,{enumeratedObjectMetadata:e,id:"object-category-".concat(e.name).replace(/:/g,"-"),onClick:function(){(0,Nr.Tq)(e.name),e.assetStorePackTag?r(e):n(e.name)}},e.name)}))]},e)}))})]})}var sj=F.ZP.isDev(),lj=function(){var e=(0,ft.Z)().showConfirmation;return function(){var t=(0,o.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Extension update"},message:{id:"Before installing this asset, it's strongly recommended to update these extensions{0}Do you want to update it now ?",values:{0:"\n\n - "+n.map((function(e){return e.fullName})).join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Skip the update"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},cj=function(){var e=u.useContext(Nv.K).environment,t=u.useContext(lb.Z).fetchPrivateAsset;return function(){var n=(0,o.Z)(l().mark((function n(r){var i,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jb().withConcurrency(6).for(r).process(function(){var n=(0,o.Z)(l().mark((function n(r){var o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,Bv.kt)(r)){n.next=6;break}return n.next=3,t(r,{environment:e});case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,(0,Bv.WY)(r,{environment:e});case 8:n.t0=n.sent;case 9:if(o=n.t0){n.next=12;break}throw new Error("Unable to install the asset because it could not be fetched.");case 12:return n.abrupt("return",o);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 2:if(!(i=n.sent).errors.length){n.next=5;break}throw new Error("Error(s) while installing assets. The first error is: "+i.errors[0].message);case 5:return a=i.results,n.abrupt("return",a);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function uj(e){var t=e.project,n=(e.layout,e.objectsContainer),r=e.resourceManagementProps,i=e.onClose,s=e.onCreateNewObject,d=e.onObjectsAddedFromAssets,p=e.canInstallPrivateAsset,h="small"===(0,T.L)(),g=u.useContext(X.ZP),m=g.setNewObjectDialogDefaultTab,x=g.getNewObjectDialogDefaultTab,v=u.useState(x()),b=(0,a.Z)(v,2),j=b[0],C=b[1];u.useEffect((function(){return m(j)}),[m,j]);var y=u.useContext(Nv.K),Z=y.assetShortHeadersSearchResults,k=y.navigationState,w=y.environment,S=y.setEnvironment,P=k.getCurrentPage(),I=P.openedAssetPack,D=P.openedAssetShortHeader,A=u.useState(!1),L=(0,a.Z)(A,2),M=L[0],F=L[1],O=u.useMemo((function(){return nj(t,n)}),[t,n]),R=u.useState(!1),B=(0,a.Z)(R,2),N=B[0],U=B[1],H=u.useState(null),W=(0,a.Z)(H,2),z=W[0],G=W[1],Y=u.useContext(qr.Z),q=D&&O.has(D.id),J=u.useContext(lb.Z).installPrivateAsset,Q=(0,ft.Z)().showAlert,$=cj(),ee=lj(),te=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(o){var i,a,s,c,u,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",!1);case 2:if(U(!0),e.prev=3,!(i=(0,Bv.kt)(o))){e.next=14;break}return e.next=8,p();case 8:if(e.sent){e.next=14;break}return e.next=12,Q({title:{id:"Save your project"},message:{id:"You need to save this project as a cloud project to install this asset. Please save your project and try again."}});case 12:return U(!1),e.abrupt("return",!1);case 14:return e.next=16,$([o]);case 16:return a=e.sent,s=a[0],e.next=20,(0,Jr.Sg)({assets:a,project:t});case 20:if(c=e.sent,e.t0=c.outOfDateExtensionShortHeaders.length>0,!e.t0){e.next=26;break}return e.next=25,ee(c.outOfDateExtensionShortHeaders);case 25:e.t0=e.sent;case 26:return u=e.t0,e.next=29,(0,Jr.UN)({requiredExtensionInstallation:c,shouldUpdateExtension:u,eventsFunctionsExtensionsState:Y,project:t});case 29:if(!i){e.next=35;break}return e.next=32,J({asset:s,project:t,objectsContainer:n});case 32:e.t1=e.sent,e.next=38;break;case 35:return e.next=37,(0,Jr.Lu)({asset:s,project:t,objectsContainer:n});case 37:e.t1=e.sent;case 38:if(h=e.t1){e.next=41;break}throw new Error("Unable to install private Asset.");case 41:return(0,Nr.Kr)({id:o.id,name:o.name,assetPackName:I?I.name:null,assetPackTag:I?I.tag:null,assetPackId:I&&I.id?I.id:null,assetPackKind:i?"private":"public"}),d(h.createdObjects),e.next=45,r.onFetchNewlyAddedResources();case 45:return U(!1),e.abrupt("return",!0);case 49:return e.prev=49,e.t2=e.catch(3),console.error("Error while installing the asset:",e.t2),Q({title:{id:"Could not install the asset"},message:{id:'There was an error while installing the asset "{0}". Verify your internet connection or try again later.',values:{0:o.name}}}),U(!1),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[3,49]])})));return function(t){return e.apply(this,arguments)}}(),[$,t,ee,J,Y,n,I,r,p,Q,d]),ne=u.useCallback((0,o.Z)(l().mark((function e(){var n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=z&&z.requiredExtensions,z&&n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,U(!0),e.next=7,(0,Jr.bg)({requiredExtensions:n,project:t});case 7:if(r=e.sent,e.t0=r.outOfDateExtensionShortHeaders.length>0,!e.t0){e.next=13;break}return e.next=12,ee(r.outOfDateExtensionShortHeaders);case 12:e.t0=e.sent;case 13:return o=e.t0,e.next=16,(0,Jr.UN)({requiredExtensionInstallation:r,shouldUpdateExtension:o,eventsFunctionsExtensionsState:Y,project:t});case 16:s(z.name),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(3),console.error("Error while creating the object:",e.t1),Q({title:{id:"Could not create the object"},message:{id:'There was an error while creating the object "{0}". Verify your internet connection or try again later.',values:{0:z.fullName}}});case 23:return e.prev=23,U(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,19,23,26]])}))),[z,s,t,ee,Y,Q]),re="asset-store"!==j?null:I?(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Add all assets to my scene"}),onClick:function(){return F(!0)},disabled:!Z||0===Z.length},"add-all-assets"):D?(0,f.jsx)(E.Z,{primary:!q,label:N?(0,f.jsx)(c.Trans,{id:"Adding..."}):q?(0,f.jsx)(c.Trans,{id:"Add again"}):(0,f.jsx)(c.Trans,{id:"Add to the scene"}),onClick:(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(D);case 1:case"end":return e.stop()}}),e)}))),disabled:N,id:"add-asset-button"},"add-asset"):sj?(0,f.jsx)(E.Z,{label:"staging"===w?(0,f.jsx)(c.Trans,{id:"Show live assets"}):(0,f.jsx)(c.Trans,{id:"Show staging assets"}),onClick:function(){S("staging"===w?"live":"staging")}},"show-dev-assets"):void 0,oe=u.useRef(null),ie=u.useCallback((function(){oe.current&&oe.current.onClose(),i()}),[i]);return(0,f.jsx)(c.I18n,{children:function(e){var i=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"New object"}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/objects"},"help")],actions:[z?(0,f.jsx)(_.Z,{label:N?(0,f.jsx)(c.Trans,{id:"Adding..."}):(0,f.jsx)(c.Trans,{id:"Skip and create from scratch"}),primary:!1,onClick:ne,id:"skip-and-create-button",disabled:N},"skip-and-create"):(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:ie,id:"close-button"},"close"),re],onRequestClose:ie,onApply:I?function(){return F(!0)}:D?(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(D);case 2:case"end":return e.stop()}}),e)}))):void 0,open:!0,flexBody:!0,fullHeight:!0,id:"new-object-dialog",fixedContent:(0,f.jsx)(K.m,{value:j,onChange:C,options:[{label:(0,f.jsx)(c.Trans,{id:"Asset Store"}),value:"asset-store",id:"asset-store-tab"},{label:(0,f.jsx)(c.Trans,{id:"New object from scratch"}),value:"new-object",id:"new-object-from-scratch-tab"}],variant:h?"scrollable":void 0}),children:["asset-store"===j&&(0,f.jsx)(Yb,{ref:oe}),"new-object"===j&&(0,f.jsx)(aj,{onCreateNewObject:s,onCustomObjectSelected:G,selectedCustomObject:z,onInstallAsset:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:e.sent&&ie();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isAssetBeingInstalled:N,project:t,i18n:i})]}),M&&Z&&I&&(0,f.jsx)(ej,{assetPack:I,assetShortHeaders:Z,addedAssetIds:O,onClose:function(){return F(!1)},onAssetsAdded:function(){F(!1)},project:t,objectsContainer:n,onObjectsAddedFromAssets:d,canInstallPrivateAsset:p,resourceManagementProps:r})]})}})}var dj="Object",pj=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tagsString:e.props.tagsString},e._tagsField=u.createRef(),e._canEdit=function(){var t=e.state.tagsString,n=(0,wc.zJ)(t);return!!e.props.tagsString||!!n.length},e._onEdit=function(t){e._canEdit()&&e.props.onEdit(t)},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e._tagsField&&e._tagsField.current&&e._tagsField.current.focus()}),10)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onCancel,r=t.onEdit,o=this.state.tagsString,i=(0,wc.zJ)(o);return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Edit object tags"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:n},"close"),(0,f.jsx)(V.vF,{label:this.props.tagsString&&!i.length?(0,f.jsx)(c.Trans,{id:"Remove all tags"}):(0,f.jsx)(c.Trans,{id:"Add/update {0} tag(s)",values:{0:i.length}}),primary:!0,onClick:function(){return e._onEdit(i)},disabled:!this._canEdit()},"add")],onRequestClose:n,onApply:function(){return e._onEdit(i)},open:!0,children:(0,f.jsx)(po.ZP,{fullWidth:!0,value:o,onChange:function(t,n){return e.setState({tagsString:n})},floatingLabelText:"Tag(s) (comma-separated)",translatableHintText:{id:"For example: player, spaceship, inventory..."},onKeyPress:function(e){(0,Io.ph)(e)&&r(i)},ref:this._tagsField})})}}]),n}(u.Component),hj=n.g.gd,fj=function(e,t){if(0===e.getInstancesCount())return[];var n=[],r=new hj.InitialInstanceJSFunctor;return r.invoke=function(e){var r=hj.wrapPointer(e,hj.InitialInstance);r.getObjectName()===t&&n.push(r)},e.iterateOverInstances(r),r.delete(),n},gj=function(e,t){return fj(e,t).length},mj=n.g.gd,xj={listContainer:{flex:1}},vj={Sprite:"NewSprite","TiledSpriteObject::TiledSprite":"NewTiledSprite","ParticleSystem::ParticleEmitter":"NewParticlesEmitter","PanelSpriteObject::PanelSprite":"NewPanelSprite","PrimitiveDrawing::Drawer":"NewShapePainter","TextObject::Text":"NewText","BBText::BBText":"NewBBText","BitmapText::BitmapTextObject":"NewBitmapText","TextEntryObject::TextEntry":"NewTextEntry","TileMap::TileMap":"NewTileMap","TileMap::CollisionMask":"NewTileMapMask","MyDummyExtension::DummyObject":"NewDummyObject","Lighting::LightObject":"NewLight","TextInput::TextInputObject":"NewTextInput","Scene3D::Model3DObject":"New3DModel","Scene3D::Cube3DObject":"New3DBox","Video::VideoObject":"NewVideo"},bj="GD_OBJECT_WITH_CONTEXT",jj=function(e){return e.object.getName()},Cj=function(e){return e.global},yj=function(e,t){var n="";if(Yt.has(dj)){var r=Yt.get(dj);n=Gt.extractStringProperty(r,"name")||""}return t?e._({id:"Paste {clipboardObjectName} as a Global Object",values:{clipboardObjectName:n}}):e._({id:"Paste {clipboardObjectName}",values:{clipboardObjectName:n}})},Zj=u.forwardRef((function(e,t){var n=e.project,r=e.layout,o=e.initialInstances,i=e.objectsContainer,s=e.resourceManagementProps,l=e.onSelectAllInstancesOfObjectInLayout,d=e.onDeleteObject,p=e.renamedObjectWithContext,h=e.onRenameObjectStart,g=e.onRenameObjectFinish,m=e.selectedObjectNames,x=e.canInstallPrivateAsset,v=e.selectedObjectTags,b=e.getAllObjectTags,j=e.onChangeSelectedObjectTags,C=e.beforeSetAsGlobalObject,y=e.canSetAsGlobalObject,Z=e.onEditObject,k=e.onExportObject,w=e.onObjectCreated,T=e.onObjectSelected,E=e.onObjectPasted,P=e.getValidatedObjectOrGroupName,I=e.onAddObjectInstance,D=e.getThumbnail,A=e.unsavedChanges,M=(e.hotReloadPreviewButtonProps,u.useContext(X.ZP)),O=u.useRef(null),R=(0,_t.Z)(),B=u.useCallback((function(){R(),O.current&&O.current.forceUpdateGrid()}),[R]),_=u.useState(!1),N=(0,a.Z)(_,2),U=N[0],H=N[1];u.useImperativeHandle(t,(function(){return{forceUpdateList:function(){R(),O.current&&O.current.forceUpdateGrid()},openNewObjectDialog:function(){H(!0)},closeNewObjectDialog:function(){H(!1)}}}));var V,W=u.useState(""),z=(0,a.Z)(W,2),G=z[0],Y=z[1],q=u.useState(null),J=(0,a.Z)(q,2),K=J[0],Q=J[1],ee=u.useCallback((function(e){var t=n.hasEventsBasedObject(e)?"New"+n.getEventsBasedObject(e).getDefaultName():vj[e]||"NewObject",r=(0,Ut.Z)(t,(function(e){return i.hasObjectNamed(e)||n.hasObjectNamed(e)})),o=i.insertNewObject(n,e,r,i.getObjectsCount());o.setTags((0,wc.kL)(v));var a={object:o,global:!1};setTimeout((function(){he(a)}),100),H(!1),Z&&(Z(o),w(o),T(a))}),[n,i,v,Z,w,T]),te=u.useCallback((function(e){e.forEach((function(e){e.setTags((0,wc.kL)(v)),w(e)})),B()}),[B,w,v]),ne=u.useCallback((function(){H(!0)}),[]),re=u.useCallback((function(e){A&&A.triggerUnsavedChanges(),e?B():R()}),[R,B,A]),ie=u.useCallback((function(e,t){var r=t.object,o=t.global;F.ZP.showConfirmDialog(e._({id:"Are you sure you want to remove this object? This can't be undone."}))&&d(t,(function(e){e&&(o?n.removeObject(r.getName()):i.removeObject(r.getName()),re(!1))}))}),[i,d,re,n]),ae=u.useCallback((function(e){var t=e.object;Yt.set(dj,{type:t.getType(),name:t.getName(),object:(0,qt.XH)(t)})}),[]),se=u.useCallback((function(e,t){ae(t),ie(e,t)}),[ae,ie]),le=u.useCallback((function(e){var t=e.objectName,r=e.positionObjectName,o=e.objectType,a=e.global,s=e.serializedObject,l=(0,Ut.Z)(t,(function(e){return i.hasObjectNamed(e)||n.hasObjectNamed(e)}),""),c=a?n.insertNewObject(n,o,l,n.getObjectPosition(r)+1):i.insertNewObject(n,o,l,i.getObjectPosition(r)+1);return(0,qt.qx)(c,s,"unserializeFrom",n),c.setName(l),{object:c,global:a}}),[i,n]),ce=u.useCallback((function(e){if(!Yt.has(dj))return null;var t=e.object,n=e.global,r=Yt.get(dj),o=Gt.extractObjectProperty(r,"object"),i=Gt.extractStringProperty(r,"name"),a=Gt.extractStringProperty(r,"type");if(i&&a&&o){var s=le({objectName:i,positionObjectName:t.getName(),objectType:a,serializedObject:o,global:n});return re(!1),E&&E(s.object),s}}),[le,re,E]),ue=u.useCallback((function(e){h(e),O.current&&O.current.forceUpdateGrid()}),[h]),de=u.useCallback((function(e){var t=e.object,n=e.global,r=t.getType(),o=t.getName(),i=(0,qt.XH)(t),a=le({objectName:o,positionObjectName:o,objectType:r,serializedObject:i,global:n});ue(a)}),[le,ue]),pe=u.useCallback((function(e,t){var n=e.global;if(h(null),jj(e)!==t){var r=P(t,n);g(e,r,(function(e){e&&re(!1)}))}}),[P,re,h,g]),he=function(e){O.current&&O.current.scrollToItem(e)},fe=Ec(n,i),ge=Ic(fe.allObjectsList,{searchText:G,selectedTags:v}),me=ge.filter((function(e){return-1!==m.indexOf(e.object.getName())})),xe=ge.find((V=p,function(e){return V&&e&&V.global===e.global&&V.object===e.object})),ve=u.useCallback((function(e){var t=ge.filter((function(e){return-1!==m.indexOf(e.object.getName())}));if(t.every((function(t){return t.global===e.global})))return!0;var n=ge.filter((function(e){return e.global}));return!(!t.every((function(e){return!e.global}))||!e.global||0!==n.indexOf(e))}),[ge,m]),be=u.useCallback((function(e){var t=ge.filter((function(e){return e.global})),r=ge.filter((function(e){return!e.global})),o=e.global&&0===t.indexOf(e),a=ge.filter((function(e){return-1!==m.indexOf(e.object.getName())}));a.forEach((function(t){var a,s,l;if(t.global===e.global)s=(a=e.global?n:i).getObjectPosition(t.object.getName()),l=a.getObjectPosition(e.object.getName());else{if(t.global||!o)return;s=(a=i).getObjectPosition(t.object.getName()),l=G?a.getObjectPosition(r[r.length-1].object.getName())+1:a.getObjectsCount()}l>s&&(l-=1),a.moveObject(s,l)})),re(!0)}),[ge,i,re,n,G,m]),je=u.useCallback((function(e,t){var r=t.object.getName();i.hasObjectNamed(r)&&(n.hasObjectNamed(r)?(0,Xr.T4)(e._({id:"A global object with this name already exists. Please change the object name before setting it as a global object"}),{delayToNextTick:!0}):C&&!C(r)||F.ZP.showConfirmDialog(e._({id:"This object will be loaded and available in all the scenes. This is only recommended for objects that you reuse a lot and can't be undone. Make this object global?"}))&&(i.moveObjectToAnotherContainer(r,n,n.getObjectsCount()),re(!0)))}),[i,re,n,C]),Ce=u.useCallback((function(e){Q(e)}),[]),ye=u.useCallback((function(e,t){e.setTags((0,wc.kL)(t)),re(!0)}),[re]),Ze=u.useCallback((function(e){T(e)}),[T]),ke=u.useCallback((function(e){return D(n,e.object.getConfiguration())}),[D,n]),we=u.useContext(qr.Z).getEventsFunctionsExtensionWriter(),Te=u.useCallback((function(e){return function(t,r){var i=t.object,a=o?gj(o,i.getName()):void 0,s=mj.MetadataProvider.getObjectMetadata(n.getCurrentPlatform(),i.getType());return[{label:e._({id:"Copy"}),click:function(){return ae(t)}},{label:e._({id:"Cut"}),click:function(){return se(e,t)}},{label:yj(e,t.global),enabled:Yt.has(dj),click:function(){return ce(t)}},{label:e._({id:"Duplicate"}),click:function(){return de(t)}},{type:"separator"},{label:e._({id:"Edit object"}),click:function(){return Z(i)}},{label:e._({id:"Edit object variables"}),click:function(){return Z(i,"variables")}},{label:e._({id:"Edit behaviors"}),click:function(){return Z(i,"behaviors")}},{label:e._({id:"Edit effects"}),click:function(){return Z(i,"effects")},enabled:!s.isUnsupportedBaseObjectCapability("effect")},we&&n.hasEventsBasedObject(i.getType())?{label:e._({id:"Export object"}),click:function(){return k&&k(i)}}:null,{type:"separator"},{label:e._({id:"Rename"}),click:function(){return ue(t)},accelerator:(0,$.$3)(M.values.userShortcutMap.RENAME_SCENE_OBJECT||oe.Z.RENAME_SCENE_OBJECT)},{label:e._({id:"Set as global object"}),enabled:!Cj(t),click:function(){return je(e,t)},visible:!1!==y},{label:e._({id:"Tags"}),submenu:(0,wc.it)({noTagLabel:e._({id:"No tags"}),getAllTags:b,selectedTags:(0,wc.zJ)(i.getTags()),onChange:function(e){ye(i,e)},editTagsLabel:e._({id:"Add/edit tags..."}),onEditTags:function(){return Ce(i)}})},{label:e._({id:"Delete"}),click:function(){return ie(e,t)}},{type:"separator"},{label:e._({id:"Add instance to the scene"}),click:function(){return I(i.getName())}},void 0!==a&&l?{label:e._({id:"Select instances on scene ({instanceCountOnScene})",values:{instanceCountOnScene:a}}),click:function(){return l(i.getName())},enabled:a>0}:void 0,{type:"separator"},{label:e._({id:"Add a new object..."}),click:ne}].filter(Boolean)}}),[ye,ae,se,ie,de,ue,b,ne,I,Z,k,l,Ce,ce,n,je,we,M.values.userShortcutMap,y,o]),Ee=n.ptr+";"+i.ptr,Se=(0,eo.BF)();return(0,f.jsxs)(Sh,{maxWidth:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:G,onRequestSearch:function(){},onChange:function(e){return Y(e)},placeholder:{id:"Search objects"}})})}),(0,f.jsx)(Kf.Z,{tags:v,onChange:j}),(0,f.jsx)("div",{style:xj.listContainer,id:"objects-list",children:(0,f.jsx)(jr.qj,{children:function(e){var t=e.height,n=e.width;return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(Px,{ref:O,fullList:ge,width:n,height:t,getItemName:jj,getItemThumbnail:ke,getItemId:function(e,t){return"object-item-".concat(t)},getItemData:function(e,t){return{objectName:e.object.getName(),global:e.global.toString()}},isItemBold:Cj,onEditItem:function(e){return Z(e.object)},selectedItems:me,onItemSelected:Ze,renamedItem:xe,onRename:pe,buildMenuTemplate:Te(r),onMoveSelectionToItem:be,canMoveSelectionToItem:ve,scaleUpItemIconWhenSelected:"touch"===Se,reactDndType:bj},Ee)}})}})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(S,{label:(0,f.jsx)(c.Trans,{id:"Add a new object"}),primary:!0,onClick:ne,id:"add-new-object-button",icon:(0,f.jsx)(Ue.Z,{})})})}),U&&(0,f.jsx)(uj,{onClose:function(){return H(!1)},onCreateNewObject:ee,onObjectsAddedFromAssets:te,project:n,layout:r,objectsContainer:i,resourceManagementProps:s,canInstallPrivateAsset:x}),K&&(0,f.jsx)(pj,{tagsString:K.getTags(),onEdit:function(e){ye(K,e),Ce(null)},onCancel:function(){return Ce(null)}})]})})),kj=function(e,t){return e.selectedObjectNames===t.selectedObjectNames&&e.selectedObjectTags===t.selectedObjectTags&&e.project===t.project&&e.objectsContainer===t.objectsContainer},wj=u.memo(Zj,kj),Tj=n(14212),Ej=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.behavior,n=e.object,r=e.onBehaviorUpdated,o=(0,Jn.Z)(t.getProperties(),(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n)}),n);return(0,f.jsx)(L.sg,{expand:!0,children:o.length?(0,f.jsx)(Xn.Z,{schema:o,instances:[t],onInstancesModified:r}):(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"There is nothing to configure for this behavior. You can still use events to interact with the object and this behavior."})})})}}]),n}(u.Component),Sj=n(3290),Pj=n(13923),Ij=function(e){var t=e.forcedCursor,n=e.deactivateControls,r=u.useRef(null),o=u.useState({draggedVertex:null,draggedIndex:-1}),s=(0,a.Z)(o,2),l=s[0],c=s[1];n&&l.draggedVertex&&c({draggedVertex:null,draggedIndex:-1});var d=function(t,n){var r=e.imageWidth*e.imageZoomFactor,o=e.imageHeight*e.imageZoomFactor;return{frameX:Math.min(r,Math.max(t,0)),frameY:Math.min(o,Math.max(n,0))}},p=t?{cursor:t}:{},h=(0,i.Z)({},p),g=(0,i.Z)({},p),m=(0,i.Z)({},p),x=(0,i.Z)({position:"relative",width:"100%",height:"100%"},p),v=(0,i.Z)({position:"absolute",top:e.imageOffsetTop||0,left:e.imageOffsetLeft||0,width:e.imageWidth*e.imageZoomFactor,height:e.imageHeight*e.imageZoomFactor,overflow:"visible"},p);return(0,f.jsx)("div",{style:x,onPointerMove:n?null:function(t){var n=e.polygonOrigin,o=e.imageWidth,i=e.imageHeight,a=e.imageZoomFactor,s=l.draggedVertex,u=l.draggedIndex;if(s){var p=r.current.createSVGPoint();p.x=t.clientX,p.y=t.clientY;var h=r.current.getScreenCTM().inverse(),f=p.matrixTransform(h),g=d(f.x,f.y),m=g.frameX,x=g.frameY;s.x=m/a-e.offsetX-("Center"===n?o/2:0),s.y=x/a-e.offsetY-("Center"===n?i/2:0),e.onMoveVertex(u,Math.round(s?s.x:0),Math.round(s?s.y:0)),c({draggedVertex:s,draggedIndex:u})}},onPointerUp:n?null:function(){var t=l.draggedVertex,n=l.draggedIndex;!!t&&e.onMoveVertex(n,Math.round(t?t.x:0),Math.round(t?t.y:0)),c({draggedVertex:null,draggedIndex:-1})},children:(0,f.jsxs)("svg",{style:v,ref:r,children:["Box"===e.shape&&function(){var t=e.dimensionA,n=e.dimensionB,r=e.imageWidth,o=e.imageHeight,i=e.offsetX,a=e.offsetY,s=e.imageZoomFactor,l=t>0?t:r>0?r:1,c=n>0?n:o>0?o:1;return(0,f.jsx)("rect",{style:h,fill:"rgba(255,0,0,0.75)",strokeWidth:1,x:(i+r/2-l/2)*s,y:(a+o/2-c/2)*s,width:l*s,height:c*s},"boxShape")}(),"Circle"===e.shape&&function(){var t=e.dimensionA,n=e.imageWidth,r=e.imageHeight,o=e.offsetX,i=e.offsetY,a=e.imageZoomFactor;return(0,f.jsx)("circle",{style:g,fill:"rgba(255,0,0,0.75)",strokeWidth:1,cx:(o+n/2)*a,cy:(i+r/2)*a,r:(t>0?t:n+r>0?(n+r)/4:1)*a},"circleShape")}(),"Edge"===e.shape&&function(){var t=e.dimensionA,n=e.dimensionB,r=e.imageWidth,o=e.imageHeight,i=e.offsetX,a=e.offsetY,s=e.imageZoomFactor,l=(t>0?t:r>0?r:1)/2,c=Math.cos(n*Math.PI/180),u=Math.sin(n*Math.PI/180);return(0,f.jsx)("line",{style:m,stroke:"rgba(255,0,0,0.75)",strokeWidth:2,x1:(i+r/2-l*c)*s,y1:(a+o/2-l*u)*s,x2:(i+r/2+l*c)*s,y2:(a+o/2+l*u)*s},"edgeShape")}(),"Polygon"===e.shape&&function(){var t=e.vertices,n=e.polygonOrigin,r=e.imageWidth,o=e.imageHeight,a=e.offsetX,s=e.offsetY,d=e.imageZoomFactor,h=(0,i.Z)({cursor:"move"},p),g=(0,i.Z)({},p);return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)("polygon",{style:g,fill:"rgba(255,0,0,0.75)",strokeWidth:1,fillRule:"evenodd",points:t.map((function(e){return"".concat((e.x+a+("Center"===n?r/2:0))*d,",").concat((e.y+s+("Center"===n?o/2:0))*d)})).join(" ")},"polygonShape"),t.map((function(e,t){return(0,f.jsx)("circle",{onPointerDown:function(){return function(e,t){l.draggedVertex||c({draggedVertex:e,draggedIndex:t})}(e,t)},fill:"rgba(150,0,0,0.75)",strokeWidth:1,style:h,cx:(e.x+a+("Center"===n?r/2:0))*d,cy:(e.y+s+("Center"===n?o/2:0))*d,r:5},"vertex-".concat(t))}))]})}()]})})},Dj=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 3.66663C5.60679 3.66663 3.66669 5.60673 3.66669 7.99996C3.66669 10.3932 5.60679 12.3333 8.00002 12.3333C10.3933 12.3333 12.3334 10.3932 12.3334 7.99996C12.3334 5.60673 10.3933 3.66663 8.00002 3.66663ZM2.66669 7.99996C2.66669 5.05444 5.0545 2.66663 8.00002 2.66663C10.9456 2.66663 13.3334 5.05445 13.3334 7.99996C13.3334 10.9455 10.9456 13.3333 8.00002 13.3333C5.05451 13.3333 2.66669 10.9455 2.66669 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 5.33331C8.27616 5.33331 8.50002 5.55717 8.50002 5.83331V10.1666C8.50002 10.4428 8.27616 10.6666 8.00002 10.6666C7.72388 10.6666 7.50002 10.4428 7.50002 10.1666V5.83331C7.50002 5.55717 7.72388 5.33331 8.00002 5.33331Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33335 7.99996C5.33335 7.72382 5.55721 7.49996 5.83335 7.49996H10.1667C10.4428 7.49996 10.6667 7.72382 10.6667 7.99996C10.6667 8.2761 10.4428 8.49996 10.1667 8.49996H5.83335C5.55721 8.49996 5.33335 8.2761 5.33335 7.99996Z",fill:"currentColor"})]}))})),Aj=function(e){var t=e.vertices,n=e.onChangeVertexX,r=e.onChangeVertexY,o=e.onAdd,i=e.onRemove,a=u.useContext(m.Z),s=function(e){for(var t=[],n=null,r=null,o=0;o<e.length;o++)n=e[o],r=o+1>=e.length?e[0]:e[o+1],t.push({x:r.x-n.x,y:r.y-n.y});if(t.length<3)return!1;for(var i=t[0].x*t[1].y-t[0].y*t[1].x>0,a=1;a<t.length-1;++a){if(t[a].x*t[a+1].y-t[a].y*t[a+1].x>0!==i)return!1}if(t[t.length-1].x*t[0].y-t[t.length-1].y*t[0].x>0!==i)return!1;for(var s=0;s<e.length-1;++s)for(var l=s+1;l<e.length;++l)if(e[s].x===e[l].x&&e[s].y===e[l].y)return!1;for(var c=!0,u=!0,d=0;d<e.length-1;++d)e[d].x!==e[d+1].x&&(c=!1),e[d].y!==e[d+1].y&&(u=!1);return!c&&!u};return(0,f.jsxs)(uv.iA,{children:[(0,f.jsx)(uv.xD,{children:(0,f.jsxs)(uv.SC,{children:[(0,f.jsx)(uv.bY,{}),(0,f.jsx)(uv.bY,{children:"X"}),(0,f.jsx)(uv.bY,{children:"Y"}),(0,f.jsx)(uv.Nn,{})]})}),(0,f.jsxs)(uv.RM,{children:[t.map((function(e,o){return(0,f.jsxs)(uv.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,f.jsx)(uv.Nn,{children:!s(t)&&(0,f.jsx)(De.ZP,{title:(0,f.jsx)(c.Trans,{id:"The polygon is not convex"}),children:(0,f.jsx)(ue.Z,{})})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(Dt.Z,{margin:"none",fullWidth:!0,value:e.x.toString(10),onChange:function(e){return n(parseFloat(e)||0,o)},type:"number"})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(Dt.Z,{margin:"none",fullWidth:!0,value:e.y.toString(10),onChange:function(e){return r(parseFloat(e)||0,o)},type:"number"})}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(A.Z,{size:"small",onClick:function(){return i(o)},children:(0,f.jsx)(Dn.Z,{})})})]},"vertexRow".concat(o))})),(0,f.jsxs)(uv.SC,{children:[(0,f.jsx)(uv.Nn,{}),(0,f.jsx)(uv.Nn,{}),(0,f.jsx)(uv.Nn,{}),(0,f.jsx)(uv.Nn,{children:(0,f.jsx)(A.Z,{onClick:o,size:"small",children:(0,f.jsx)(Dj,{})})})]})]})]})},Lj=n(51626),Mj=function(e){var t=e.properties,n=e.propertyName,r=e.step,o=e.onUpdate,i=e.id,a=t.get(n);return(0,f.jsx)(Dt.Z,{id:i,fullWidth:!0,value:a.getValue(),floatingLabelText:a.getLabel(),step:r,onChange:o,type:"number",endAdornment:(0,f.jsx)(Fj,{property:a})},n)},Fj=function(e){var t=e.property.getMeasurementUnit();return(0,f.jsx)(De.ZP,{title:(0,f.jsx)(Pj.Z,{label:t.getLabel(),description:t.getDescription(),elementsWithWords:t.getElementsWithWords()}),children:(0,f.jsx)(Lj.Z,{position:"end",children:(0,Jn.j)(t)})})},Oj=function(e){return(0,f.jsx)("div",{style:{overflowX:"auto",flex:1},children:(0,f.jsx)(zc.Z,{disableElevation:!0,fullWidth:!0,children:e.bits.map((function(t,n){return(0,f.jsx)($r.Z,{variant:t?"contained":"outlined",color:t?"primary":"default",onClick:function(){return e.onChange(n,!t)},children:n+1},n)}))})})},Rj=function(e,t){return!!(e&1<<t)},Bj=function(e,t,n){return n?e|=1<<t:e&=~(1<<t),e},_j={getEditor:function(e){return this.components[e]?this.components[e].component:Ej},components:{"Physics2::Physics2Behavior":{component:function(e){var t=u.useRef(ti.Z).current,n=u.useState(""),r=(0,a.Z)(n,2),o=r[0],s=r[1],l=e.behavior,d=e.onBehaviorUpdated,p=(0,_t.Z)(),h=u.useCallback((function(e,t){l.updateProperty(e,t),p(),d()}),[l,p,d]),g=l.getProperties(),m=Array(16).fill(null),x=g.get("shape").getValue(),v=parseInt(g.get("layers").getValue(),10),b=parseInt(g.get("masks").getValue(),10);return(0,f.jsxs)(L.sg,{expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(B.Z,{id:"physics2-parameter-body-type",fullWidth:!0,floatingLabelText:g.get("bodyType").getLabel(),value:g.get("bodyType").getValue(),onChange:function(e,t,n){return h("bodyType",n)},children:[(0,f.jsx)(U.Z,{value:"Dynamic",label:{id:"Dynamic"}},"dynamic"),(0,f.jsx)(U.Z,{value:"Static",label:{id:"Static"}},"static"),(0,f.jsx)(U.Z,{value:"Kinematic",label:{id:"Kinematic"}},"kinematic")]},"bodyType")}),(0,f.jsxs)(C.ep,{children:[(0,f.jsx)(Yn.Z,{label:g.get("bullet").getLabel(),checked:"true"===g.get("bullet").getValue(),onCheck:function(e,t){return h("bullet",t?"1":"0")}}),(0,f.jsx)(Yn.Z,{label:g.get("fixedRotation").getLabel(),checked:"true"===g.get("fixedRotation").getValue(),onCheck:function(e,t){return h("fixedRotation",t?"1":"0")}}),(0,f.jsx)(Yn.Z,{label:g.get("canSleep").getLabel(),checked:"true"===g.get("canSleep").getValue(),onCheck:function(e,t){return h("canSleep",t?"1":"0")}})]}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(re.Z,{identifier:"physics2-shape-collisions",kind:"info",children:(0,f.jsx)(c.Trans,{id:'The shape used in the Physics behavior is independent from the collision mask of the object. Be sure to use the "Collision" condition provided by the Physics behavior in the events. The usual "Collision" condition won\'t take into account the shape that you\'ve set up here.'})})}),(0,f.jsx)(L.x1,{children:(0,f.jsxs)(B.Z,{id:"physics2-parameter-shape",fullWidth:!0,floatingLabelText:g.get("shape").getLabel(),value:g.get("shape").getValue(),onChange:function(e,t,n){return h("shape",n)},children:[(0,f.jsx)(U.Z,{value:"Box",label:{id:"Box"}},"box"),(0,f.jsx)(U.Z,{value:"Circle",label:{id:"Circle"}},"circle"),(0,f.jsx)(U.Z,{value:"Edge",label:{id:"Edge"}},"edge"),(0,f.jsx)(U.Z,{value:"Polygon",label:{id:"Polygon"}},"polygon")]})}),(0,f.jsxs)(C.ep,{children:["Polygon"!==x&&(0,f.jsx)(Dt.Z,{fullWidth:!0,value:g.get("shapeDimensionA").getValue(),floatingLabelText:"Circle"===x?"Radius":"Edge"===x?"Length":"Width",min:0,onChange:function(e){return h("shapeDimensionA",e)},type:"number",endAdornment:(0,f.jsx)(Fj,{property:g.get("shapeDimensionA")})},"shapeDimensionA"),"Polygon"!==x&&"Circle"!==x&&(0,f.jsx)(Dt.Z,{fullWidth:!0,value:g.get("shapeDimensionB").getValue(),floatingLabelText:"Edge"===x?"Angle":"Height",min:"Edge"===x?void 0:0,onChange:function(e){return h("shapeDimensionB",e)},type:"number",endAdornment:(0,f.jsx)(Fj,{property:g.get("shapeDimensionB")})},"shapeDimensionB"),"Polygon"===x&&(0,f.jsx)(B.Z,{fullWidth:!0,floatingLabelText:g.get("polygonOrigin").getLabel(),value:g.get("polygonOrigin").getValue(),onChange:function(e,t,n){return h("polygonOrigin",n)},children:[(0,f.jsx)(U.Z,{value:"Center",label:{id:"Center"}},"center"),(0,f.jsx)(U.Z,{value:"Origin",label:{id:"Origin"}},"origin"),(0,f.jsx)(U.Z,{value:"TopLeft",label:{id:"Top-Left"}},"topLeft")]}),(0,f.jsx)(Mj,{properties:g,propertyName:"shapeOffsetX",step:1,onUpdate:function(e){return h("shapeOffsetX",e)}}),(0,f.jsx)(Mj,{properties:g,propertyName:"shapeOffsetY",step:1,onUpdate:function(e){return h("shapeOffsetY",e)}})]}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(op.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"A temporary image to help you visualize the shape/polygon"}),project:e.project,resourceManagementProps:e.resourceManagementProps,resourcesLoader:t,resourceKind:"image",initialResourceName:"",fullWidth:!0,onChange:function(e){s(e),d(),p()}})}),!o&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"To preview the shape that the Physics engine will use for this object, choose first a temporary image to use for the preview."})})}),o&&(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:{width:"100%"},children:(0,f.jsx)(Sj.Z,{resourceName:o,imageResourceSource:t.getResourceFullUrl(e.project,o,{}),isImageResourceSmooth:(0,Sj.X)(e.project,o),fixedHeight:200,renderOverlay:function(e){var t=l.getProperties();return(0,f.jsx)(Ij,(0,i.Z)((0,i.Z)({},e),{},{shape:t.get("shape").getValue(),dimensionA:parseFloat(t.get("shapeDimensionA").getValue()),dimensionB:parseFloat(t.get("shapeDimensionB").getValue()),offsetX:parseFloat(t.get("shapeOffsetX").getValue()),offsetY:parseFloat(t.get("shapeOffsetY").getValue()),polygonOrigin:t.get("polygonOrigin").getValue(),vertices:JSON.parse(t.get("vertices").getValue()),onMoveVertex:function(e,n,r){var o=JSON.parse(t.get("vertices").getValue());o[e].x=n,o[e].y=r,l.updateProperty("vertices",JSON.stringify(o)),p(),d()}}))}})})}),"Polygon"===x&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(Aj,{vertices:JSON.parse(g.get("vertices").getValue()),onChangeVertexX:function(e,t){var n=JSON.parse(g.get("vertices").getValue());n[t].x=e,h("vertices",JSON.stringify(n))},onChangeVertexY:function(e,t){var n=JSON.parse(g.get("vertices").getValue());n[t].y=e,h("vertices",JSON.stringify(n))},onAdd:function(){var e=JSON.parse(g.get("vertices").getValue());e.length>=8||(e.push({x:0,y:0}),h("vertices",JSON.stringify(e)))},onRemove:function(e){var t=JSON.parse(g.get("vertices").getValue());t.splice(e,1),h("vertices",JSON.stringify(t))}})}),(0,f.jsxs)(C.ep,{children:[(0,f.jsx)(Mj,{id:"physics2-parameter-density",properties:g,propertyName:"density",step:.1,onUpdate:function(e){return h("density",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(Mj,{properties:g,propertyName:"gravityScale",step:.1,onUpdate:function(e){return h("gravityScale",e)}})]}),(0,f.jsxs)(C.ep,{children:[(0,f.jsx)(Mj,{properties:g,propertyName:"friction",step:.1,onUpdate:function(e){return h("friction",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(Mj,{properties:g,propertyName:"restitution",step:.1,onUpdate:function(e){return h("restitution",parseFloat(e)>0?e:"0")}})]}),(0,f.jsxs)(C.ep,{children:[(0,f.jsx)(Mj,{properties:g,propertyName:"linearDamping",step:.05,onUpdate:function(e){return h("linearDamping",e)}}),(0,f.jsx)(Mj,{id:"physics2-parameter-angular-damping",properties:g,propertyName:"angularDamping",step:.05,onUpdate:function(e){return h("angularDamping",e)}})]}),(0,f.jsxs)(L.x1,{children:[(0,f.jsx)(J.Z,{style:{marginRight:10},children:g.get("layers").getLabel()}),(0,f.jsx)(Oj,{bits:m.map((function(e,t){return Rj(v,t)})),onChange:function(e,t){var n=Bj(v,e,t);h("layers",n.toString(10))}})]}),(0,f.jsxs)(L.x1,{children:[(0,f.jsx)(J.Z,{style:{marginRight:10},children:g.get("masks").getLabel()}),(0,f.jsx)(Oj,{bits:m.map((function(e,t){return Rj(b,t)})),onChange:function(e,t){var n=Bj(b,e,t);h("masks",n.toString(10))}})]})]})}}}},Nj=n.g.gd,Uj="Behaviors",Hj=function(e){var t=u.useRef(null),n=u.useState(null),r=(0,a.Z)(n,2),i=r[0],s=r[1],d=u.useRef(null);u.useEffect((function(){t.current&&d.current&&i&&(t.current.scrollTo(d.current),s(null),d.current=null)}),[i]);var p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=function(){var e=(0,ft.Z)().showConfirmation;return function(){var t=(0,o.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing behaviors"},message:{id:"These behaviors are already attached to the object:{0}Do you want to replace their property values?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),v=e.object,b=e.project,y=e.eventsFunctionsExtension,Z=e.onSizeUpdated,k=e.onBehaviorsUpdated,w=e.onUpdateBehaviorsSharedData,T=e.openBehaviorEvents,S=v.getAllBehaviorNames().toJSArray(),P=(0,_t.Z)(),I=u.useContext(X.ZP).values,D=u.useCallback((function(e,t){hg(b,v,e,t)&&(m(!1),(0,Nr.qH)({behaviorType:e,parentEditor:"behaviors-editor"}),s(t)),P(),Z&&Z(),w(),k&&k()}),[P,v,k,Z,w,b]),M=u.useCallback((function(e,t){v.hasBehaviorNamed(t)||(v.renameBehavior(e.getName(),t),P(),k&&k())}),[P,v,k]),O=u.useCallback((function(e){var t="Are you sure you want to remove this behavior? This can't be undone.",n=Nj.WholeProjectRefactorer.findDependentBehaviorNames(b,v,e).toJSArray();n.length>0&&(t+="\nDependent behaviors will be removed too: "+n.join(", ")),F.ZP.showConfirmDialog(t)&&(v.removeBehavior(e),n.forEach((function(e){return v.removeBehavior(e)})),Z&&Z()),k&&k()}),[v,k,Z,b]),R=u.useCallback((function(e){var t=v.getBehavior(e);Yt.set(Uj,[{name:e,type:t.getTypeName(),serializedBehavior:(0,qt.XH)(t)}]),P()}),[P,v]),B=u.useCallback((function(){Yt.set(Uj,(0,Nt.mapVector)(v.getAllBehaviorNames(),(function(e){var t=v.getBehavior(e);return{name:e,type:t.getTypeName(),serializedBehavior:(0,qt.XH)(t)}}))),P()}),[P,v]),_=u.useCallback((0,o.Z)(l().mark((function e(){var t,n,r,o,i,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Yt.get(Uj),n=Gt.extractArray(t)){e.next=4;break}return e.abrupt("return");case 4:if(r=[],o=[],i=[],n.forEach((function(e){var t=Gt.extractStringProperty(e,"name"),n=Gt.extractStringProperty(e,"type"),a=Gt.extractObjectProperty(e,"serializedBehavior");if(t&&n&&a){var s=Nj.MetadataProvider.getBehaviorMetadata(b.getCurrentPlatform(),n);if(""===s.getObjectType()||s.getObjectType()===v.getType())if(v.hasBehaviorNamed(t)){if(v.getBehavior(t).getTypeName()!==n)return;o.push({name:t,type:n,serializedBehavior:a}),i.push(s.getFullName())}else r.push({name:t,type:n,serializedBehavior:a})}})),a=null,r.forEach((function(e){var t=e.name,n=e.type,r=e.serializedBehavior;if(v.addNewBehavior(b,n,t),v.hasBehaviorNamed(t)){a||(a=t);var o=v.getBehavior(t);(0,qt.qx)(o,r)}})),r.forEach((function(e){var t=e.name;Nj.WholeProjectRefactorer.addRequiredBehaviorsFor(b,v,t)})),c=!1,!(o.length>0)){e.next=17;break}return e.next=15,x(i);case 15:(c=e.sent)&&o.forEach((function(e){var t=e.name,n=(e.type,e.serializedBehavior);if(v.hasBehaviorNamed(t)){var r=v.getBehavior(t);(0,qt.qx)(r,n)}}));case 17:P(),a?(s(a),Z&&Z(),w()):1===o.length&&s(o[0].name),(a||c)&&k&&k();case 20:case"end":return e.stop()}}),e)}))),[P,v,k,Z,w,b,x]),N=u.useCallback((function(e){var t=e.split("::");if(2===t.length){var n=t[0],r=t[1];n&&b.hasEventsFunctionsExtensionNamed(n)&&T(n,r)}}),[T,b]),U=Yt.has(Uj);return(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[0===S.length?(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"Add your first behavior"}),description:(0,f.jsx)(c.Trans,{id:"Behaviors add features to objects in a matter of clicks."}),helpPagePath:"/behaviors",tutorialId:"intro-behaviors-and-functions",actionButtonId:"add-behavior-button",actionLabel:(0,f.jsx)(c.Trans,{id:"Add a behavior"}),onAction:function(){return m(!0)},secondaryActionIcon:(0,f.jsx)(Ln,{}),secondaryActionLabel:U?(0,f.jsx)(c.Trans,{id:"Paste"}):null,onSecondaryAction:function(){_()}})}):(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Ot.Z,{ref:t,children:S.map((function(t,n){var r=v.getBehavior(t),o=r.getTypeName(),a=Nj.MetadataProvider.getBehaviorMetadata(Nj.JsPlatform.get(),o);if(Nj.MetadataProvider.isBadBehaviorMetadata(a))return(0,f.jsxs)(vo.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(t),children:[(0,f.jsxs)(vo._m,{actions:[(0,f.jsx)(A.Z,{onClick:function(e){e.stopPropagation(),O(t)},children:(0,f.jsx)(Dn.Z,{})},"delete")],children:[(0,f.jsxs)(yg.c,{firstChild:!0,children:[(0,f.jsx)(c.Trans,{id:"Unknown behavior"})," "]}),(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(po.ZP,{margin:"none",value:t,disabled:!0})})]}),(0,f.jsx)(vo.X1,{children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"This behavior is unknown. It might be a behavior that was defined in an extension and that was later removed. You should delete it."})})})]},t);var s=_j.getEditor(o),l=(0,bo.r1)(o),u=l.filter((function(e){return!I.hiddenTutorialHints[e]})),p=a.getIconFilename(),h=i===t?d:null;return(0,f.jsxs)(vo.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(t),ref:h,children:[(0,f.jsxs)(vo._m,{actions:[(0,f.jsx)(mo.Z,{size:"small",helpPagePath:a.getHelpPath()},"help"),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Delete"}),click:function(){return O(t)}},{label:e._({id:"Copy"}),click:function(){return R(t)}},{label:e._({id:"Paste"}),click:_,enabled:U}].concat((0,j.Z)(b.hasEventsBasedBehavior(o)?[{type:"separator"},{label:e._({id:"Edit this behavior"}),click:function(){return N(o)}}]:[]))}},"menu")],children:[p?(0,f.jsx)(kr.q,{src:p,alt:a.getFullName(),size:20}):null,(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(po.ZP,{value:t,translatableHintText:{id:"Behavior name"},margin:"none",fullWidth:!0,disabled:!0,onChange:function(e,t){return M(r,t)},id:"behavior-".concat(t,"-name-text-field")})})]}),(0,f.jsx)(vo.X1,{children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[u.length?(0,f.jsx)(L.x1,{children:(0,f.jsx)(C.ak,{expand:!0,children:l.map((function(e){return(0,f.jsx)(xo.Z,{tutorialId:e},e)}))})}):null,(0,f.jsx)(L.x1,{children:(0,f.jsx)(s,{behavior:r,project:b,object:v,resourceManagementProps:e.resourceManagementProps,onBehaviorUpdated:k})})]})})]},t)}))}),(0,f.jsx)(L.sg,{children:(0,f.jsxs)(C.pJ,{noMargin:!0,children:[(0,f.jsxs)(C.pJ,{expand:!0,children:[(0,f.jsx)(Cv,{leftIcon:(0,f.jsx)(An.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Copy all behaviors"}),onClick:function(){B()}},"copy-all-behaviors"),(0,f.jsx)(Cv,{leftIcon:(0,f.jsx)(Ln,{}),label:(0,f.jsx)(c.Trans,{id:"Paste"}),onClick:function(){_()},disabled:!U},"paste-behaviors")]}),(0,f.jsx)(C.pJ,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Add a behavior"}),primary:!0,onClick:function(){return m(!0)},icon:(0,f.jsx)(Ue.Z,{}),id:"add-behavior-button"},"add-behavior-line")})]})})]}),g&&(0,f.jsx)(dg,{open:g,objectType:v.getType(),objectBehaviorsTypes:fg(v),onClose:function(){return m(!1)},onChoose:D,project:b,eventsFunctionsExtension:y})]})},Vj=n.g.gd,Wj="Effects",zj=(0,Lt.x)("2d-effects-list"),Gj=(0,Lt.x)("3d-effects-list"),Yj={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},qj=u.forwardRef((function(e,t){e.layerRenderingType;var n=e.target,o=e.project,a=e.resourceManagementProps,s=e.effectsContainer,l=e.effect,d=e.removeEffect,p=e.copyEffect,h=e.pasteEffectsBefore,g=e.chooseEffectType,x=e.allEffectMetadata,v=e.onEffectsUpdated,b=e.onEffectsRenamed,j=e.nameErrors,y=e.setNameErrors,Z=e.connectDragSource,k=u.useContext(m.Z),w=u.useContext(X.ZP),T=w.values.showEffectParameterNames,E=w.setShowEffectParameterNames,S=(0,_t.Z)(),P=Yt.has(Wj),I=u.useCallback((function(e,t){if(t!==e.getName()){if(j[e.ptr]){var n=(0,i.Z)({},j);delete n[e.ptr],y(n)}if(t)if(s.hasEffectNamed(t))y((0,i.Z)((0,i.Z)({},j),{},(0,r.Z)({},e.ptr,(0,f.jsx)(c.Trans,{id:"The effect name {newName} is already taken",values:{newName:t}}))));else{var o=e.getName();e.setName(t),S(),b(o,t),v()}else y((0,i.Z)((0,i.Z)({},j),{},(0,r.Z)({},e.ptr,(0,f.jsx)(c.Trans,{id:"Effects cannot have empty names"}))))}}),[s,S,j,b,v,y]),D=l.getEffectType(),M=Xj(x,D);return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)("div",{ref:t,style:(0,i.Z)((0,i.Z)({},Yj.rowContent),{},{backgroundColor:k.list.itemsBackgroundColor}),children:[Z((0,f.jsx)("span",{children:(0,f.jsx)(L.sg,{children:(0,f.jsx)(At.V,{})})})),(0,f.jsxs)(C.ep,{expand:!0,children:[(0,f.jsxs)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{noMargin:!0,noShrink:!0,children:(0,f.jsx)(c.Trans,{id:"Effect name:"})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(Dt.Z,{margin:"none",commitOnBlur:!0,errorText:j[l.ptr],translatableHintText:{id:"Enter the effect name"},value:l.getName(),onChange:function(e){I(l,e)},fullWidth:!0})]}),(0,f.jsxs)(L.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{noMargin:!0,noShrink:!0,children:(0,f.jsx)(c.Trans,{id:"Type:"})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(B.Z,{margin:"none",value:D,onChange:function(e,t,n){return g(l,n)},fullWidth:!0,translatableHintText:{id:"Choose the effect to apply"},children:x.map((function(e){return(0,f.jsx)(U.Z,{value:e.type,label:e.fullName,disabled:"object"===n&&e.isMarkedAsNotWorkingForObjects},e.type)}))})]})]}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Delete"}),click:function(){return d(l)}},{label:e._({id:"Copy"}),click:function(){return p(l)}},{label:e._({id:"Paste"}),click:function(){return h(l)},enabled:P},{type:"separator"},{type:"checkbox",label:e._({id:"Show Parameter Names"}),checked:T,click:function(){return E(!T)}}]}}),(0,f.jsx)(L.LZ,{})]}),D&&(0,f.jsx)(L.x1,{expand:!0,noMargin:!0,children:(0,f.jsxs)(L.sg,{expand:!0,children:[M?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)($e.r,{source:M.description})})}),(0,f.jsx)(Xn.Z,{instances:[l],schema:M.parametersSchema,project:o,resourceManagementProps:a,renderExtraDescriptionText:T?function(e){return r._({id:"Parameter name in events: `{parameterName}`",values:{parameterName:e}})}:void 0})]}):null,(0,f.jsx)(L.LZ,{})]})})]})}})})),Xj=function(e,t){return e.find((function(e){return e.type===t}))};function Jj(e){var t=e.effectsContainer,n=e.onEffectsUpdated,r=e.onEffectsRenamed,i=e.project,s=e.target,d=u.useRef(null),p=u.useState(null),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useRef(null);u.useEffect((function(){d.current&&x.current&&g&&(d.current.scrollTo(x.current),m(null),x.current=null)}),[g]);for(var v=u.useRef(null),b=u.useContext(ir.ZP),j=u.useState({}),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=u.useMemo((function(){return function(e){var t=e.getCurrentPlatform().getAllPlatformExtensions();return kc()((0,Nt.mapFor)(0,t.size(),(function(e){var n=t.at(e);return n.getExtensionEffectTypes().toJSArray().map((function(e){return n.getEffectMetadata(e)})).map((function(e){var t=e.getType(),r=e.getProperties(),o=r.keys().toJSArray().map((function(e){var n=r.get(e),o=n.getType().toLowerCase(),i=n.getLabel(),a=n.getDescription(),s=function(){return i},l=function(){return a},c=function(){return e};if("number"===o)return{name:e,valueType:"number",getValue:function(t){return t.getDoubleParameter(e)},setValue:function(t,n){return t.setDoubleParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c};if("boolean"===o)return{name:e,valueType:"boolean",getValue:function(t){return t.getBooleanParameter(e)},setValue:function(t,n){return t.setBooleanParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c};if("resource"===o){var u=n.getExtraInfo().toJSArray()[0]||"";return{name:e,valueType:"resource",resourceKind:u,getValue:function(t){return t.getStringParameter(e)},setValue:function(t,n){return t.setStringParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c}}if("color"===o)return{name:e,valueType:"color",getValue:function(t){return t.getStringParameter(e)},setValue:function(t,n){return t.setStringParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c};if("choice"===o){var d=n.getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return{name:e,valueType:"string",getChoices:function(){return d},getValue:function(t){return t.getStringParameter(e)},setValue:function(t,n){return t.setStringParameter(e,n)},getLabel:s,getDescription:l,getExtraDescription:c}}return console.error("A property with type=".concat(o," could not be mapped to a field for effect ").concat(t,". Ensure that this type is correct.")),null})).filter(Boolean);return{extension:n,type:t,effectMetadata:e,fullName:e.getFullName(),description:e.getDescription(),isMarkedAsNotWorkingForObjects:e.isMarkedAsNotWorkingForObjects(),isMarkedAsOnlyWorkingFor2D:e.isMarkedAsOnlyWorkingFor2D(),isMarkedAsOnlyWorkingFor3D:e.isMarkedAsOnlyWorkingFor3D(),parametersSchema:o}}))}))).sort((function(e,t){return e.fullName.localeCompare(t.fullName)}))}(e.project)}),[e.project]),T=u.useMemo((function(){return w.filter((function(e){return e.isMarkedAsOnlyWorkingFor3D}))}),[w]),S=u.useMemo((function(){return w.filter((function(e){return e.isMarkedAsOnlyWorkingFor2D}))}),[w]),P=function(){var e=(0,ft.Z)().showConfirmation;return function(){var t=(0,o.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing effects"},message:{id:"These effects already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),I=(0,_t.Z)(),D=u.useCallback((function(e,t){e.setEffectType(t);var r=Xj(w,t);r&&function(e,t){e.clearParameters();var n=t.getProperties();n.keys().toJSArray().forEach((function(t){var r=n.get(t),o=r.getType().toLowerCase();"number"===o?e.setDoubleParameter(t,parseFloat(r.getValue())||0):"boolean"===o?e.setBooleanParameter(t,"true"===r.getValue()):e.setStringParameter(t,r.getValue())}))}(e,r.effectMetadata),I(),n()}),[w,I,n]),A=u.useCallback((function(e){var r=(0,Ut.Z)("Effect",(function(e){return t.hasEffectNamed(e)})),o=t.insertNewEffect(r,t.getEffectsCount());D(o,e?"Scene3D::DirectionalLight":"Outline"),I(),n(),m(r)}),[D,t,I,n]),M=(0,ro.zi)(b,ro.OV,A),F=u.useCallback((function(e){t.removeEffect(e.getName()),I(),n()}),[t,I,n]),O=u.useCallback((function(e){Yt.set(Wj,[{name:e.getName(),type:e.getEffectType(),serializedEffect:(0,qt.XH)(e)}]),I()}),[I]),R=u.useCallback((function(){Yt.set(Wj,(0,Nt.mapFor)(0,t.getEffectsCount(),(function(e){var n=t.getEffectAt(e);return{name:n.getName(),type:n.getEffectType(),serializedEffect:(0,qt.XH)(n)}}))),I()}),[I,t]),B=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(r){var o,a,c,u,d,p,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Yt.get(Wj),a=Gt.extractArray(o)){e.next=4;break}return e.abrupt("return");case 4:if(c=[],u=[],a.forEach((function(e){var n=Gt.extractStringProperty(e,"name"),r=Gt.extractStringProperty(e,"type"),o=Gt.extractObjectProperty(e,"serializedEffect");if(n&&o){if(r){var a=Vj.MetadataProvider.getEffectMetadata(i.getCurrentPlatform(),r);if(!a)return;if("object"===s&&a.isMarkedAsNotWorkingForObjects())return}t.hasEffectNamed(n)?u.push({name:n,serializedEffect:o}):c.push({name:n,serializedEffect:o})}})),d=null,p=r,c.forEach((function(e){var n=e.name,r=e.serializedEffect,o=t.insertNewEffect(n,p);p++,(0,qt.qx)(o,r),d||(d=n)})),h=!1,!(u.length>0)){e.next=16;break}return e.next=14,P(u.map((function(e){return e.name})));case 14:(h=e.sent)&&u.forEach((function(e){var n=e.name,r=e.serializedEffect;if(t.hasEffectNamed(n)){var o=t.getEffect(n);(0,qt.qx)(o,r)}}));case 16:I(),d?m(d):1===u.length&&m(u[0].name),(d||h)&&n&&n();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I,i,s,t,P,n]),_=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.getEffectsCount());case 2:case"end":return e.stop()}}),e)}))),[t,B]),N=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.getEffectPosition(n.getName()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,B]),U=u.useCallback((function(e){var r=v.current;if(r){var o=t.getEffectPosition(r.getName()),i=t.getEffectPosition(e.getName());t.moveEffect(o,i>o?i-1:i),I(),n()}}),[t,I,n]),H=Yt.has(Wj),V=u.useCallback((function(){if(t.getEffectsCount()<2)return null;for(var e=[],n=0;n<t.getEffectsCount();n++){var r=t.getEffectAt(n).getEffectType(),o=Xj(w,r);if(o&&("Scene3D::LinearFog"===r||"Scene3D::ExponentialFog"===r)){if(e.includes(r))return o;e.push(r)}}return null}),[w,t]),W=V(),z=0,G=0,Y=0;Y<t.getEffectsCount();Y++){var q=t.getEffectAt(Y),X=Xj(w,q.getEffectType());X&&X.isMarkedAsOnlyWorkingFor2D||G++,X&&X.isMarkedAsOnlyWorkingFor3D||z++}return(0,f.jsx)(c.I18n,{children:function(o){o.i18n;return(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0!==t.getEffectsCount()?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsxs)(Ot.Z,{ref:d,children:[W&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(we.Z,{kind:"error",children:(0,f.jsx)(c.Trans,{id:'The "{0}" effect can only be applied once.',values:{0:W.fullName}})})})}),t.getEffectsCount()>3&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(re.Z,{identifier:"too-much-effects",kind:"warning",children:(0,f.jsx)(c.Trans,{id:"Using a lot of effects can have a severe negative impact on the rendering performance, especially on low-end or mobile devices. Consider using less effects if possible. You can also disable and re-enable effects as needed using events."})})})}),"2d"!==e.layerRenderingType&&G>0&&(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:["3d"!==e.layerRenderingType&&(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"3D effects"})})})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,Nt.mapFor)(0,t.getEffectsCount(),(function(o){var a=t.getEffectAt(o),l=a.getEffectType(),c=Xj(w,l),u=g===a.getName()?x:null;return c&&c.isMarkedAsOnlyWorkingFor2D?null:(0,f.jsx)(Gj,{beginDrag:function(){return v.current=a,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){U(a)},children:function(o){var l=o.connectDragSource,c=o.connectDropTarget,d=o.isOver,p=o.canDrop;return c((0,f.jsxs)("div",{style:Yj.rowContainer,children:[d&&(0,f.jsx)(Mt.Z,{canDrop:p}),(0,f.jsx)(qj,{ref:u,layerRenderingType:"3d",target:s,project:i,resourceManagementProps:e.resourceManagementProps,effectsContainer:t,effect:a,removeEffect:F,copyEffect:O,pasteEffectsBefore:N,chooseEffectType:D,allEffectMetadata:T,onEffectsUpdated:n,onEffectsRenamed:r,nameErrors:Z,setNameErrors:k,connectDragSource:l})]},a.ptr))}},a.ptr)}))})})]}),"3d"!==e.layerRenderingType&&z>0&&(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:["2d"!==e.layerRenderingType&&(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"2D effects"})})})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,Nt.mapFor)(0,t.getEffectsCount(),(function(o){var a=t.getEffectAt(o),l=a.getEffectType(),c=Xj(w,l),u=g===a.getName()?x:null;return c&&c.isMarkedAsOnlyWorkingFor3D?null:(0,f.jsx)(zj,{beginDrag:function(){return v.current=a,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){U(a)},children:function(o){var l=o.connectDragSource,c=o.connectDropTarget,d=o.isOver,p=o.canDrop;return c((0,f.jsxs)("div",{style:Yj.rowContainer,children:[d&&(0,f.jsx)(Mt.Z,{canDrop:p}),(0,f.jsx)(qj,{ref:u,layerRenderingType:"2d",target:s,project:i,resourceManagementProps:e.resourceManagementProps,effectsContainer:t,effect:a,removeEffect:F,copyEffect:O,pasteEffectsBefore:N,chooseEffectType:D,allEffectMetadata:S,onEffectsUpdated:n,onEffectsRenamed:r,nameErrors:Z,setNameErrors:k,connectDragSource:l})]},a.ptr))}},a.ptr)}))})})]})]}),(0,f.jsx)(L.sg,{children:(0,f.jsxs)(L.x1,{noMargin:!0,children:[(0,f.jsxs)(C.pJ,{expand:!0,children:[(0,f.jsx)(Cv,{leftIcon:(0,f.jsx)(An.Z,{}),label:(0,f.jsx)(c.Trans,{id:"Copy all effects"}),onClick:function(){R()}},"copy-all-effects"),(0,f.jsx)(Cv,{leftIcon:(0,f.jsx)(Ln,{}),label:(0,f.jsx)(c.Trans,{id:"Paste"}),onClick:function(){_()},disabled:!H},"paste-effects")]}),(0,f.jsxs)(C.pJ,{justifyContent:"flex-end",expand:!0,children:["2d"!==e.layerRenderingType&&(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Add a 3D effect"}),onClick:function(){return M(!0)},icon:(0,f.jsx)(Ue.Z,{})}),"3d"!==e.layerRenderingType&&(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Add a 2D effect"}),onClick:function(){return M(!1)},icon:(0,f.jsx)(Ue.Z,{})})]})]})})]}):(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:""===e.layerRenderingType||"2d+3d"===e.layerRenderingType?(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"Add your first effect"}),description:(0,f.jsx)(c.Trans,{id:"Effects create visual changes to the object."}),actionLabel:(0,f.jsx)(c.Trans,{id:"Add a 2D effect"}),helpPagePath:"object"===e.target?"/objects/effects":"/interface/scene-editor/layer-effects",onAction:function(){return M(!1)},secondaryActionIcon:(0,f.jsx)(Ue.Z,{}),secondaryActionLabel:(0,f.jsx)(c.Trans,{id:"Add a 3D effect"}),onSecondaryAction:function(){return M(!0)}}):(0,f.jsx)(Ft.$,{title:(0,f.jsx)(c.Trans,{id:"Add your first effect"}),description:(0,f.jsx)(c.Trans,{id:"Effects create visual changes to the object."}),actionLabel:"3d"===e.layerRenderingType?(0,f.jsx)(c.Trans,{id:"Add a 3D effect"}):(0,f.jsx)(c.Trans,{id:"Add a 2D effect"}),helpPagePath:"object"===e.target?"/objects/effects":"/interface/scene-editor/layer-effects",onAction:function(){return M("3d"===e.layerRenderingType)},secondaryActionIcon:(0,f.jsx)(Ln,{}),secondaryActionLabel:H?(0,f.jsx)(c.Trans,{id:"Paste"}):null,onSecondaryAction:function(){_()}})})})}})}var Kj=n.g.gd,Qj=function(e){var t=e.openBehaviorEvents,n=u.useState(e.initialTab||"properties"),r=(0,a.Z)(n,2),s=r[0],d=r[1],p=u.useState(e.objectName),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=(0,_t.Z)(),v=mt({serializableObject:e.object,useProjectToUnserialize:e.project,onCancel:e.onCancel}),b=v.onCancelChanges,j=v.notifyOfChange,C=v.hasUnsavedChanges,y=Kj.MetadataProvider.getObjectMetadata(e.project.getCurrentPlatform(),e.object.getType()),Z=e.editorComponent,k=function(){e.onApply(),e.onRename(g)},w=(0,Ct.Z)("intro-variables").DismissableTutorialMessage;u.useEffect((function(){"behaviors"===s&&(0,Nr.KY)({parentEditor:"object-editor-dialog"})}),[s]);var T=(0,ft.Z)().showConfirmation,E=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C()){e.next=6;break}return e.next=3,T({title:{id:"Discard changes and open events"},message:{id:"You've made some changes here. Are you sure you want to discard them and open the behavior events?"},confirmButtonLabel:{id:"Yes, discard my changes"},dismissButtonLabel:{id:"Stay there"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:b(),t(n,r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[C,b,t,T]);return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Edit {objectName}",values:{objectName:g}}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:b},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),id:"apply-button",primary:!0,onClick:k},"apply")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:e.helpPagePath},"help-button"),(0,f.jsx)(xt,(0,i.Z)({},e.hotReloadPreviewButtonProps),"hot-reload-preview-button")],onRequestClose:b,onApply:k,open:e.open,fullHeight:!0,flexBody:!0,fixedContent:(0,f.jsx)(K.m,{value:s,onChange:d,options:[{label:(0,f.jsx)(c.Trans,{id:"Properties"}),value:"properties"},{label:(0,f.jsx)(c.Trans,{id:"Behaviors"}),value:"behaviors",id:"behaviors-tab"},{label:(0,f.jsx)(c.Trans,{id:"Variables"}),value:"variables"},y.isUnsupportedBaseObjectCapability("effect")?null:{label:(0,f.jsx)(c.Trans,{id:"Effects"}),value:"effects"}].filter(Boolean)}),id:"object-editor-dialog",children:["properties"===s&&Z?(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Dt.Z,{fullWidth:!0,id:"object-name",commitOnBlur:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Object name"}),floatingLabelFixed:!0,value:g,translatableHintText:{id:"Object Name"},onChange:function(t){t!==g&&(m(e.getValidatedObjectOrGroupName(t)),j())},autoFocus:"desktop"})})}),(0,f.jsx)(Z,{objectConfiguration:e.object.getConfiguration(),project:e.project,layout:e.layout,object:e.object,resourceManagementProps:e.resourceManagementProps,onSizeUpdated:x,objectName:e.objectName,onObjectUpdated:j})]}):null,"behaviors"===s&&(0,f.jsx)(Hj,{object:e.object,project:e.project,eventsFunctionsExtension:e.eventsFunctionsExtension,resourceManagementProps:e.resourceManagementProps,onSizeUpdated:x,onUpdateBehaviorsSharedData:e.onUpdateBehaviorsSharedData,onBehaviorsUpdated:j,openBehaviorEvents:E}),"variables"===s&&(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[e.object.getVariables().count()>0&&w&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:w})}),(0,f.jsx)(Wn,{commitChangesOnBlur:!0,variablesContainer:e.object.getVariables(),emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first object variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"These variables hold additional information on an object."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:e.onComputeAllVariableNames,onVariablesUpdated:j})]}),"effects"===s&&(0,f.jsx)(Jj,{target:"object",layerRenderingType:"2d",project:e.project,resourceManagementProps:e.resourceManagementProps,effectsContainer:e.object.getEffects(),onEffectsRenamed:function(t,n){return e.layout&&Kj.WholeProjectRefactorer.renameObjectEffect(e.project,e.layout,e.object,t,n)},onEffectsUpdated:function(){x(),j()}})]},e.object&&e.object.ptr)},$j=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={editorComponent:null,castToObjectType:null,helpPagePath:null,objectName:""},e}return(0,lt.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){this._loadFrom(this.props.object)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(!this.props.open&&e.open||e.open&&this.props.object!==e.object)&&this._loadFrom(e.object)}},{key:"_loadFrom",value:function(e){if(e){var t=Tj.Z.getEditorConfiguration(this.props.project,e.getType());if(!t)return this.setState({editorComponent:null,castToObjectType:null});this.setState({editorComponent:t.component,helpPagePath:t.helpPagePath,castToObjectType:t.castToObjectType,objectName:e.getName()})}}},{key:"render",value:function(){var e=this.props,t=e.object,n=e.initialTab,r=this.state,o=r.editorComponent,a=r.castToObjectType,s=r.helpPagePath;return t&&a?(0,u.createElement)(Qj,(0,i.Z)((0,i.Z)({},this.props),{},{editorComponent:o,key:this.props.object&&this.props.object.ptr,helpPagePath:s,object:t,objectName:this.state.objectName,initialTab:n})):null}}]),n}(u.Component),eC=n(56924),tC=n.g.gd,nC=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={editedObjectWithContext:null,editedObjectInitialTab:"properties",selectedObjectsWithContext:[],renamedObjectWithContext:null},e._onDeleteObject=function(t){return function(n,r){var o=n.object,i=e.props,a=i.project,s=i.globalObjectsContainer,l=i.eventsBasedObject,c=F.ZP.showYesNoCancelDialog(t._({id:"Do you want to remove all references to this object in groups and events (actions and conditions using the object)?"}));if("cancel"!==c){var u="yes"===c;tC.WholeProjectRefactorer.objectOrGroupRemovedInEventsBasedObject(a,l,s,l,o.getName(),!1,u),r(!0)}}},e._getValidatedObjectOrGroupName=function(t,n){var r=e.props.eventsBasedObject;return(0,Ut.Z)(tC.Project.getSafeName(t),(function(e){return!(!r.hasObjectNamed(e)&&!r.getObjectGroups().has(e)&&"Object"!==e)}))},e._onRenameObjectStart=function(t){var n=[];t&&n.push(t),e.setState({renamedObjectWithContext:t,selectedObjectsWithContext:n},(function(){e.forceUpdateObjectsList()}))},e._onRenameEditedObject=function(t,n){var r=e.state.editedObjectWithContext;r&&e._onRenameObject(r,t,(function(){}),n)},e._onRenameObject=function(t,n,r,o){var i=t.object,a=e.props,s=a.project,l=a.globalObjectsContainer,c=a.eventsBasedObject;i.getName()!==n&&tC.WholeProjectRefactorer.objectOrGroupRenamedInEventsBasedObject(s,l,c,i.getName(),n,!1),i.setName(n),r(!0)},e.editObject=function(t,n){t?e.setState({editedObjectWithContext:{object:t,global:!1},editedObjectInitialTab:n||"properties"}):e.setState({editedObjectWithContext:null,editedObjectInitialTab:"properties"})},e._onObjectSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[];t&&n.push(t),e.setState({selectedObjectsWithContext:n},(function(){e.forceUpdateObjectsList()}))},e.updateBehaviorsSharedData=function(){},e.forceUpdateObjectsList=function(){e._objectsList&&e._objectsList.forceUpdateList()},e}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventsBasedObject,r=t.project,i=t.eventsFunctionsExtension,a=this.state.selectedObjectsWithContext.map((function(e){return e.object.getName()}));return(0,f.jsx)(c.I18n,{children:function(t){var s=t.i18n;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(L.x1,{expand:!0,useFullHeight:!0,children:(0,f.jsx)(wj,{getThumbnail:Oc.Z.getThumbnail.bind(Oc.Z),project:r,objectsContainer:n,layout:null,resourceManagementProps:{resourceSources:[],resourceExternalEditors:[],onChooseResource:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProvider:function(){return eC.H},onFetchNewlyAddedResources:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProviderResourceOperations:function(){return null}},selectedObjectNames:a,onEditObject:e.editObject,onExportObject:function(){},onDeleteObject:e._onDeleteObject(s),getValidatedObjectOrGroupName:function(t){return e._getValidatedObjectOrGroupName(t,s)},onObjectCreated:function(){},onObjectSelected:e._onObjectSelected,renamedObjectWithContext:e.state.renamedObjectWithContext,onRenameObjectStart:e._onRenameObjectStart,onRenameObjectFinish:function(t,n,r){return e._onRenameObject(t,n,r,s)},onAddObjectInstance:function(){},onObjectPasted:function(){return e.updateBehaviorsSharedData()},selectedObjectTags:[],onChangeSelectedObjectTags:function(e){},getAllObjectTags:function(){return[]},ref:function(t){return e._objectsList=t},unsavedChanges:null,hotReloadPreviewButtonProps:{hasPreviewsRunning:!1,launchProjectDataOnlyPreview:function(){},launchProjectWithLoadingScreenPreview:function(){}},canInstallPrivateAsset:function(){return!1},canSetAsGlobalObject:!1})}),e.state.editedObjectWithContext&&(0,f.jsx)($j,{open:!0,object:e.state.editedObjectWithContext.object,initialTab:e.state.editedObjectInitialTab,project:r,eventsFunctionsExtension:i,resourceManagementProps:{resourceSources:[],resourceExternalEditors:[],onChooseResource:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProvider:function(){return eC.H},onFetchNewlyAddedResources:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStorageProviderResourceOperations:function(){return null}},onComputeAllVariableNames:function(){return[]},onCancel:function(){e.editObject(null)},getValidatedObjectOrGroupName:function(t){return e._getValidatedObjectOrGroupName(t,s)},onRename:function(t){e._onRenameEditedObject(t,s)},onApply:function(){e.editObject(null),e.updateBehaviorsSharedData(),e.forceUpdateObjectsList()},hotReloadPreviewButtonProps:{hasPreviewsRunning:!1,launchProjectDataOnlyPreview:function(){},launchProjectWithLoadingScreenPreview:function(){}},onUpdateBehaviorsSharedData:function(){return e.updateBehaviorsSharedData()},openBehaviorEvents:function(){}})]})}})}}]),n}(u.Component);function rC(e){var t=e.onApply,n=e.project,r=e.globalObjectsContainer,o=e.eventsFunctionsExtension,i=e.eventsBasedObject,s=e.onRenameProperty,l=u.useState("configuration"),d=(0,a.Z)(l,2),p=d[0],h=d[1];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Edit {0}",values:{0:i.getName()}}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/objects/events-based-objects"},"help")],actions:[(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:t},"Apply")],open:!0,onRequestClose:t,onApply:t,fullHeight:!0,flexBody:!0,fixedContent:(0,f.jsx)(K.m,{value:p,onChange:h,options:[{value:"configuration",label:(0,f.jsx)(c.Trans,{id:"Configuration"})},{value:"properties",label:(0,f.jsx)(c.Trans,{id:"Properties"})},{value:"children",label:(0,f.jsx)(c.Trans,{id:"Children"})}]}),children:["configuration"===p&&(0,f.jsx)(Av,{eventsBasedObject:i}),"properties"===p&&(0,f.jsx)(Ov,{project:n,extension:o,eventsBasedObject:i,onRenameProperty:s}),"children"===p&&(0,f.jsx)(nC,{project:n,globalObjectsContainer:r,eventsFunctionsExtension:o,eventsBasedObject:i})]})}var oC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 -3 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Create",fillRule:"nonzero",children:[(0,f.jsx)("polygon",{id:"Shape",fill:"#2B3990",points:"24 8 18 2 18 6 14 6 14 10 18 10 18 14"}),(0,f.jsxs)("g",{id:"Group-2",fill:"#27AAE1",children:[(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(2.999518, 3.574897) rotate(-45.000000) translate(-2.999518, -3.574897) ",x:"1.58553176",y:"0.746924118",width:"2.82797288",height:"5.65594576"}),(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(10.999518, 11.574897) rotate(-45.000000) translate(-10.999518, -11.574897) ",x:"9.58553176",y:"8.74692412",width:"2.82797288",height:"5.65594576"}),(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(2.999518, 11.574897) rotate(-135.000000) translate(-2.999518, -11.574897) ",x:"1.58553176",y:"8.74692412",width:"2.82797288",height:"5.65594576"}),(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(10.999518, 3.574897) rotate(-135.000000) translate(-10.999518, -3.574897) ",x:"9.58553176",y:"0.746924118",width:"2.82797288",height:"5.65594576"})]})]})})}))},iC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Step",children:[(0,f.jsx)("polygon",{id:"Shape",points:"0 3 0 6 3 6 3 9 7.5 4.5 3 0 3 3",fill:"#2b3990"}),(0,f.jsx)("polygon",{id:"polygon6",points:"16.5 3 16.5 6 19.5 6 19.5 9 24 4.5 19.5 0 19.5 3",fill:"#2b3990"}),(0,f.jsx)("circle",{id:"path825",cx:"12",cy:"4.5",r:"2.2509",fill:"none",stroke:"#27aae1",strokeWidth:"1.5"})]})})}))},aC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 -3 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Destroy",transform:"translate(0.000000, -1.000000)",fillRule:"nonzero",children:[(0,f.jsxs)("g",{id:"Group",transform:"translate(0.000000, 1.000000)",children:[(0,f.jsx)("polygon",{id:"Shape",fill:"#2B3990",points:"9.92307692 7.07692308 4.38461538 1.53846154 4.38461538 5.23076923 0.692307692 5.23076923 0.692307692 8.92307692 4.38461538 8.92307692 4.38461538 12.6153846"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(10.845138, 3.385446) rotate(-45.000000) translate(-10.845138, -3.385446) ",x:"9.53992021",y:"0.77500965",width:"2.6104365",height:"5.22087301"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(18.229754, 10.770062) rotate(-45.000000) translate(-18.229754, -10.770062) ",x:"16.9245356",y:"8.15962503",width:"2.6104365",height:"5.22087301"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(10.846985, 10.770246) rotate(-135.000000) translate(-10.846985, -10.770246) ",x:"9.54176636",y:"8.15980965",width:"2.6104365",height:"5.22087301"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(18.231600, 3.385631) rotate(-135.000000) translate(-18.231600, -3.385631) ",x:"16.9263817",y:"0.775194265",width:"2.6104365",height:"5.22087301"})]}),(0,f.jsxs)("g",{id:"Group",opacity:"0.1",transform:"translate(2.538462, 0.692308)",children:[(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#000000",transform:"translate(7.616400, 11.768538) rotate(135.000000) translate(-7.616400, -11.768538) ",x:"5.98441565",y:"10.4633202",width:"3.2639687",height:"2.6104365"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"7.38461538 7.38461538 1.83645766 1.87268753 1.83645766 3.7132995 6.46153846 8.30769231"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(8.308523, 3.693323) rotate(-135.000000) translate(-8.308523, -3.693323) ",x:"5.69808657",y:"2.38810482",width:"5.22087301",height:"2.6104365"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(15.693138, 11.077938) rotate(-135.000000) translate(-15.693138, -11.077938) ",x:"13.082702",y:"9.77272021",width:"5.22087301",height:"2.6104365"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(9.460009, 9.922714) rotate(45.000000) translate(-9.460009, -9.922714) ",x:"8.15479058",y:"8.94333902",width:"2.6104365",height:"1.95875045"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(15.693138, 3.693323) rotate(-135.000000) translate(-15.693138, -3.693323) ",x:"14.3879202",y:"1.08288657",width:"2.6104365",height:"5.22087301"})]})]})})}))},sC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,f.jsxs)("g",{id:"Action",transform:"translate(-92.011 -101.74)",fillRule:"nonzero",children:[(0,f.jsx)("path",{id:"path1010",d:"m101.01 101.74v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8231-5e-3 -5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3228v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84905-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path8-6-0",d:"m92.093 110.66v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path10-3-0",d:"m93.599 106.96 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3521a9.4562 9.4562 0 0 0 2.0558-0.8599l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2"}),(0,f.jsx)("path",{id:"path871-7",d:"m106.69 107.2h-3.4025l3.7809 5.9346-3.7809 5.9346h3.4025l3.7809-5.9346z",fill:"#283983"}),(0,f.jsx)("path",{id:"path873-9",d:"m101.39 107.2h-3.4025l3.7809 5.9346-3.7809 5.9346h3.4025l3.7835-5.9346z",fill:"#283983"})]})}))},lC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,f.jsxs)("g",{id:"Action",fill:"#283983",children:[(0,f.jsx)("path",{id:"path1010",d:"m8.9958 0v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8231-0.0052-5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3229v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84904-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path8-6-0",d:"m0.081856 8.9161v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path10-3-0",d:"m1.5875 5.2198 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3521a9.4562 9.4562 0 0 0 2.0558-0.8599l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2"}),(0,f.jsx)("path",{id:"path821",d:"m13.081 13.524h-2.7983v-0.37982q0-0.63562 0.2558-1.124 0.2558-0.49609 1.0775-1.2557l0.49609-0.44958q0.44183-0.40308 0.64337-0.75964 0.20929-0.35657 0.20929-0.71313 0-0.5426-0.37207-0.84491-0.37207-0.31006-1.0387-0.31006-0.62787 0-1.3565 0.26355-0.72864 0.2558-1.5193 0.7674v-2.434q0.93793-0.32556 1.7131-0.48059 0.77515-0.15503 1.496-0.15503 1.8914 0 2.8835 0.77515 0.99219 0.7674 0.99219 2.2479 0 0.75964-0.30231 1.3643-0.30231 0.59686-1.0309 1.2867l-0.49609 0.44183q-0.5271 0.48059-0.68988 0.77515-0.16278 0.2868-0.16278 0.63562zm-2.7983 1.1472h2.7983v2.7595h-2.7983z",fill:"#283983"})]})}))},cC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,f.jsxs)("g",{id:"Expression",children:[(0,f.jsx)("path",{id:"path1010",d:"m8.9958 0v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8232-0.0052-5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3229v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84904-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1",strokeWidth:".26458"}),(0,f.jsx)("path",{id:"path8-6-0",d:"m0.081857 8.9161v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1",strokeWidth:".26458"}),(0,f.jsx)("path",{id:"path10-3-0",d:"m1.5875 5.2198 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3522a9.4562 9.4562 0 0 0 2.0558-0.85989l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2",strokeWidth:".26458"}),(0,f.jsxs)("g",{id:"text1262",fill:"#283983",strokeWidth:".21798","aria-label":"f(x)",children:[(0,f.jsx)("path",{id:"path936",d:"m8.4202 7.2384v1.1256h-0.94835q-0.36401 0-0.5077 0.13411-0.14369 0.12932-0.14369 0.45502v0.37359h1.4656v1.2262h-1.4656v4.1383h-1.7147v-4.1383h-0.85256v-1.2262h0.85256v-0.37359q0-0.87651 0.48854-1.2932 0.48854-0.42149 1.5135-0.42149z"}),(0,f.jsx)("path",{id:"path938",d:"m10.822 15.984h-1.4225q-0.73282-1.183-1.0825-2.2463-0.34964-1.0681-0.34964-2.117t0.34964-2.1218q0.35443-1.0777 1.0825-2.2511h1.4225q-0.61308 1.1351-0.91961 2.2224-0.30654 1.0825-0.30654 2.141 0 1.0585 0.30175 2.1458 0.30654 1.0873 0.9244 2.2272z"}),(0,f.jsx)("path",{id:"path940",d:"m12.277 11.947-1.935-2.6199h1.8153l1.0968 1.5902 1.1112-1.5902h1.8153l-1.935 2.6104 2.0308 2.754h-1.8153l-1.207-1.6955-1.1926 1.6955h-1.8153z"}),(0,f.jsx)("path",{id:"path942",d:"m15.771 15.984q0.61308-1.1399 0.91961-2.2272t0.30654-2.1458q0-1.0585-0.30654-2.141-0.30654-1.0873-0.91961-2.2224h1.4225q0.72803 1.1735 1.0777 2.2511 0.35444 1.0729 0.35444 2.1218t-0.34964 2.117q-0.34964 1.0633-1.0825 2.2463z"})]})]})}))},uC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Activate",fillRule:"nonzero",children:[(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",x:"0",y:"0",width:"24",height:"10.2857143"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#2B3990",x:"1.71428571",y:"1.71428571",width:"10.2857143",height:"6.85714286"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"20.5710245 1.71428571 18.8571429 3.42897546 17.1432612 5.14285714 15.4285714 6.85673883 17.1432612 8.57142857 18.8571429 6.85673883 20.5710245 5.14285714 22.2857143 3.42897546"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"18.8567388 3.42857143 17.1428571 5.14326117 15.4289755 3.42857143 13.7142857 5.14326117 15.4289755 6.85714286 18.8567388 6.85714286 20.5714286 5.14326117"})]})})}))},dC=function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Deactivate",fillRule:"nonzero",children:[(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#2B3990",x:"0",y:"0",width:"24",height:"10.2857143"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"6.85673883 1.71428571 5.14285714 3.42897546 3.42897546 1.71428571 1.71428571 3.42897546 3.42897546 5.14285714 1.71428571 6.85673883 3.42897546 8.57142857 5.14285714 6.85673883 6.85673883 8.57142857 8.57142857 6.85673883 6.85673883 5.14285714 8.57142857 3.42897546"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",x:"12",y:"1.71428571",width:"10.2857143",height:"6.85714286"})]})})}))},pC=n.g.gd,hC={icon:{width:40,height:40},disabledItem:{opacity:.6}},fC=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,o=e.name,i=e.description;return(0,f.jsx)(ze,{leftIcon:t,primaryText:o,secondaryText:i,secondaryTextLines:2,onClick:function(){return r({functionType:pC.EventsFunction.Action,name:o})},style:n?hC.disabledItem:void 0,disabled:n})};function gC(e){var t=e.eventsBasedBehavior,n=e.onChoose,r=e.onCancel,o=t.getEventsFunctions(),i=u.useState(!1),s=(0,a.Z)(i,2),l=s[0],d=s[1];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:'Choose a new behavior function ("method")'}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,children:[(0,f.jsxs)(Ge,{children:[(0,f.jsx)(ze,{leftIcon:(0,f.jsx)(sC,{style:hC.icon}),primaryText:(0,f.jsx)(c.Trans,{id:"Action"}),secondaryText:(0,f.jsx)(c.Trans,{id:"An action that can be used on objects with the behavior. You can define the action parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:pC.EventsFunction.Action,name:null})}}),(0,f.jsx)(ze,{leftIcon:(0,f.jsx)(lC,{style:hC.icon}),primaryText:(0,f.jsx)(c.Trans,{id:"Condition"}),secondaryText:(0,f.jsx)(c.Trans,{id:"A condition that can be used on objects with the behavior. You can define the condition parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:pC.EventsFunction.Condition,name:null})}}),(0,f.jsx)(ze,{leftIcon:(0,f.jsx)(cC,{style:hC.icon}),primaryText:(0,f.jsx)(c.Trans,{id:"Expression"}),secondaryText:(0,f.jsx)(c.Trans,{id:"An expression that can be used on objects with the behavior. Can either return a number or a string, and take some parameters."}),onClick:function(){return n({functionType:pC.EventsFunction.Expression,name:null})}}),(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Lifecycle methods"})}),(0,f.jsx)(fC,{icon:(0,f.jsx)(oC,{style:hC.icon}),name:"onCreated",disabled:o.hasEventsFunctionNamed("onCreated"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run once, when an object is created with this behavior being attached to it."})}),(0,f.jsx)(fC,{icon:(0,f.jsx)(iC,{style:hC.icon}),name:"doStepPreEvents",disabled:o.hasEventsFunctionNamed("doStepPreEvents"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object that has the behavior attached, before the events from the events sheet are launched."})}),(0,f.jsx)(fC,{icon:(0,f.jsx)(aC,{style:hC.icon}),name:"onDestroy",disabled:o.hasEventsFunctionNamed("onOwnerRemovedFromScene")||o.hasEventsFunctionNamed("onDestroy"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run once, after the object is removed from the scene and before it is entirely removed from memory."})}),l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Other lifecycle methods"})}),(0,f.jsx)(fC,{icon:(0,f.jsx)(dC,{style:hC.icon}),name:"onDeActivate",disabled:o.hasEventsFunctionNamed("onDeActivate"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when the behavior is deactivated on an object (step events won't be run until the behavior is activated again)."})}),(0,f.jsx)(fC,{icon:(0,f.jsx)(uC,{style:hC.icon}),name:"onActivate",disabled:o.hasEventsFunctionNamed("onActivate"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when the behavior is re-activated on an object (after it was previously deactivated)."})}),(0,f.jsx)(fC,{icon:(0,f.jsx)(iC,{style:hC.icon}),name:"doStepPostEvents",disabled:o.hasEventsFunctionNamed("doStepPostEvents"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object that has the behavior attached, after the events from the events sheet."})})]})]}),(0,f.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:l?(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(Za,{}),primary:!1,onClick:function(){return d(!1)},label:(0,f.jsx)(c.Trans,{id:"Hide other lifecycle functions (advanced)"})}):(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(ya.Z,{}),primary:!1,onClick:function(){return d(!0)},label:(0,f.jsx)(c.Trans,{id:"Show other lifecycle functions (advanced)"})})})]})}var mC=function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{viewBox:"0 -4.5 24 24",children:[(0,f.jsx)("polygon",{id:"Shape",transform:"translate(0,2)",points:"7.5 4.5 3 0 3 3 0 3 0 6 3 6 3 9",fill:"#2b3990"}),(0,f.jsx)("polygon",{transform:"translate(0,2)",points:"24 4.5 19.5 0 19.5 3 16.5 3 16.5 6 19.5 6 19.5 9",fill:"#2b3990"}),(0,f.jsx)("path",{d:"m12.5 0-4 8h3v5l4-8h-3z",fill:"#27aae1",fillRule:"evenodd"})]}))},xC=n.g.gd,vC={icon:{width:40,height:40},disabledItem:{opacity:.6}},bC=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,o=e.name,i=e.description;return(0,f.jsx)(ze,{leftIcon:t,primaryText:o,secondaryText:i,secondaryTextLines:2,onClick:function(){return r({functionType:xC.EventsFunction.Action,name:o})},style:n?vC.disabledItem:void 0,disabled:n})};function jC(e){var t=e.eventsBasedObject,n=e.onChoose,r=e.onCancel,o=t.getEventsFunctions(),i=u.useState(!1),s=(0,a.Z)(i,2),l=s[0],d=s[1];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:'Choose a new object function ("method")'}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,children:[(0,f.jsxs)(Ge,{children:[(0,f.jsx)(ze,{leftIcon:(0,f.jsx)(sC,{style:vC.icon}),primaryText:(0,f.jsx)(c.Trans,{id:"Action"}),secondaryText:(0,f.jsx)(c.Trans,{id:"An action that can be used on the object. You can define the action parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:xC.EventsFunction.Action,name:null})}}),(0,f.jsx)(ze,{leftIcon:(0,f.jsx)(lC,{style:vC.icon}),primaryText:(0,f.jsx)(c.Trans,{id:"Condition"}),secondaryText:(0,f.jsx)(c.Trans,{id:"A condition that can be used on the object. You can define the condition parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:xC.EventsFunction.Condition,name:null})}}),(0,f.jsx)(ze,{leftIcon:(0,f.jsx)(cC,{style:vC.icon}),primaryText:(0,f.jsx)(c.Trans,{id:"Expression"}),secondaryText:(0,f.jsx)(c.Trans,{id:"An expression that can be used on the object. Can either return a number or a string, and take some parameters."}),onClick:function(){return n({functionType:xC.EventsFunction.Expression,name:null})}}),(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Lifecycle methods"})}),(0,f.jsx)(bC,{icon:(0,f.jsx)(oC,{style:vC.icon}),name:"onCreated",disabled:o.hasEventsFunctionNamed("onCreated"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run once, when an object is created."})}),(0,f.jsx)(bC,{icon:(0,f.jsx)(iC,{style:vC.icon}),name:"doStepPostEvents",disabled:o.hasEventsFunctionNamed("doStepPostEvents"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object, after the events from the events sheet."})}),(0,f.jsx)(bC,{icon:(0,f.jsx)(aC,{style:vC.icon}),name:"onDestroy",disabled:o.hasEventsFunctionNamed("onOwnerRemovedFromScene")||o.hasEventsFunctionNamed("onDestroy"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run once, after the object is removed from the scene and before it is entirely removed from memory."})}),l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Other lifecycle methods"})}),(0,f.jsx)(bC,{icon:(0,f.jsx)(mC,{style:vC.icon}),name:"onHotReloading",disabled:o.hasEventsFunctionNamed("onHotReloading"),onChoose:n,description:(0,f.jsx)(c.Trans,{id:"Events that will be run when the preview is being hot-reloaded."})})]})]}),(0,f.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:l?(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(Za,{}),primary:!1,onClick:function(){return d(!1)},label:(0,f.jsx)(c.Trans,{id:"Hide other lifecycle functions (advanced)"})}):(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(ya.Z,{}),primary:!1,onClick:function(){return d(!0)},label:(0,f.jsx)(c.Trans,{id:"Show other lifecycle functions (advanced)"})})})]})}var CC=n.g.gd,yC={icon:{width:40,height:40},disabledItem:{opacity:.6}},ZC=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,o=e.name,i=e.description;return(0,f.jsx)(ze,{leftIcon:t,primaryText:o,secondaryText:i,secondaryTextLines:2,onClick:r,style:n?yC.disabledItem:void 0,disabled:n})};function kC(e){var t=e.eventsFunctionsExtension,n=e.onChoose,r=e.onCancel,o=u.useState(!1),i=(0,a.Z)(o,2),s=i[0],l=i[1];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Choose a new extension function"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/events/functions"},"help")],open:!0,onRequestClose:r,children:[(0,f.jsxs)(Ge,{children:[(0,f.jsx)(ZC,{icon:(0,f.jsx)(sC,{style:yC.icon}),name:(0,f.jsx)(c.Trans,{id:"Action"}),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:null})},description:(0,f.jsx)(c.Trans,{id:"An action that can be used in other events sheet. You can define the action parameters: objects, texts, numbers, layers, etc..."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(lC,{style:yC.icon}),name:(0,f.jsx)(c.Trans,{id:"Condition"}),onChoose:function(){return n({functionType:CC.EventsFunction.Condition,name:null})},description:(0,f.jsx)(c.Trans,{id:"A condition that can be used in other events sheet. You can define the condition parameters: objects, texts, numbers, layers, etc..."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(cC,{style:yC.icon}),name:(0,f.jsx)(c.Trans,{id:"Expression"}),onChoose:function(){return n({functionType:CC.EventsFunction.Expression,name:null})},description:(0,f.jsx)(c.Trans,{id:"An expression that can be used in formulas. Can either return a number or a string, and take some parameters."})}),s&&(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(Mu.Z,{children:(0,f.jsx)(c.Trans,{id:"Lifecycle functions (advanced)"})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(oC,{style:yC.icon}),name:"onFirstSceneLoaded",disabled:t.hasEventsFunctionNamed("onFirstSceneLoaded"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onFirstSceneLoaded"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when the first scene of the game is loaded, before any other events."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(oC,{style:yC.icon}),name:"onSceneLoaded",disabled:t.hasEventsFunctionNamed("onSceneLoaded"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onSceneLoaded"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when a scene of the game is loaded, before the scene events."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(iC,{style:yC.icon}),name:"onScenePreEvents",disabled:t.hasEventsFunctionNamed("onScenePreEvents"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onScenePreEvents"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), before the events from the events sheet of the scene."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(iC,{style:yC.icon}),name:"onScenePostEvents",disabled:t.hasEventsFunctionNamed("onScenePostEvents"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onScenePostEvents"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), after the events from the events sheet of the scene."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(dC,{style:yC.icon}),name:"onScenePaused",disabled:t.hasEventsFunctionNamed("onScenePaused"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onScenePaused"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when a scene is paused (another scene is run on top of it)."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(uC,{style:yC.icon}),name:"onSceneResumed",disabled:t.hasEventsFunctionNamed("onSceneResumed"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onSceneResumed"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when a scene is resumed (after it was previously paused)."})}),(0,f.jsx)(ZC,{icon:(0,f.jsx)(aC,{style:yC.icon}),name:"onSceneUnloading",disabled:t.hasEventsFunctionNamed("onSceneUnloading"),onChoose:function(){return n({functionType:CC.EventsFunction.Action,name:"onSceneUnloading"})},description:(0,f.jsx)(c.Trans,{id:"Events that will be run once when a scene is about to be unloaded from memory. The previous scene that was paused will be resumed after this."})})]})]}),(0,f.jsx)(L.x1,{justifyContent:"center",alignItems:"center",children:s?(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(Za,{}),primary:!1,onClick:function(){return l(!1)},label:(0,f.jsx)(c.Trans,{id:"Hide lifecycle functions (advanced)"})}):(0,f.jsx)(_.Z,{leftIcon:(0,f.jsx)(ya.Z,{}),primary:!1,onClick:function(){return l(!0)},label:(0,f.jsx)(c.Trans,{id:"Show lifecycle functions (advanced)"})})})]})}var wC=u.forwardRef((function(e,t){var n=e.initialEditorName,r=e.editors,o=e.transitions,i=e.onEditorChanged,s=u.useState(n),l=(0,a.Z)(s,2),d=l[0],p=l[1];u.useImperativeHandle(t,(function(){return{openEditor:function(e){p(e)}}})),u.useEffect((function(){i(d)}),[d,i]);var h=o[d],g="space-between";return h&&(h.previousEditor&&!h.nextEditor&&(g="flex-start"),!h.previousEditor&&h.nextEditor&&(g="flex-end")),(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[h&&(0,f.jsx)(Sh,{maxWidth:!0,noExpand:!0,noFullHeight:!0,children:(0,f.jsx)(L.sg,{children:(0,f.jsxs)(L.x1,{justifyContent:g,children:[h.previousEditor&&(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Back"}),onClick:function(){h.previousEditor&&p(h.previousEditor)},leftIcon:(0,f.jsx)(Va,{})}),h.nextLabel&&h.nextEditor&&(0,f.jsx)(_.Z,{label:h.nextLabel,onClick:function(){h.nextEditor&&p(h.nextEditor)},leftIcon:h.nextIcon})]})})}),r[d]?r[d].renderEditor():null]})})),TC=function(e){var t=e.eventsFunctionsExtension.getEventsFunctionsCount(),n=e.eventsFunctionsExtension.getEventsBasedBehaviors().getCount();return(0,f.jsx)(c.I18n,{children:function(r){var o=r.i18n;return(0,f.jsx)(Sh,{children:(0,f.jsxs)(L.sg,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Extensions can provide functions (which can be actions, conditions or expressions) or new behaviors."})}),(0,f.jsx)(E.Z,{label:o._({id:"Edit functions (not attached to behaviors) ({eventsFunctionsCount})",values:{eventsFunctionsCount:t}}),onClick:e.onEditFreeFunctions,primary:!0}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(E.Z,{label:o._({id:"Edit behaviors ({eventsBasedBehaviorsCount})",values:{eventsBasedBehaviorsCount:n}}),onClick:e.onEditBehaviors,primary:!0}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Edit extension options"}),onClick:e.onEditExtensionOptions})]})})}})},EC=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M7.77794 0.833374C7.34742 0.833374 6.93657 1.00791 6.63523 1.31528C6.33421 1.62232 6.16683 2.03668 6.16683 2.46671V2.53337H3.66683C3.44258 2.53337 3.22957 2.62433 3.07409 2.78292C2.91894 2.94118 2.8335 3.15375 2.8335 3.37337V5.86671C2.8335 6.14285 3.05735 6.36671 3.3335 6.36671H3.88905C4.0479 6.36671 4.20229 6.43098 4.31769 6.54869C4.43342 6.66674 4.50016 6.82891 4.50016 7.00004C4.50016 7.17117 4.43342 7.33335 4.31769 7.45139C4.20229 7.5691 4.0479 7.63337 3.88905 7.63337H3.3335C3.05735 7.63337 2.8335 7.85723 2.8335 8.13337V10.6267C2.8335 10.8463 2.91894 11.0589 3.07409 11.2172C3.22957 11.3758 3.44258 11.4667 3.66683 11.4667H4.67473C4.95087 11.4667 5.17473 11.2428 5.17473 10.9667C5.17473 10.6906 4.95087 10.4667 4.67473 10.4667H3.8335V8.63337H3.88905C4.31958 8.63337 4.73042 8.45884 5.03176 8.15146C5.33278 7.84443 5.50016 7.43007 5.50016 7.00004C5.50016 6.57001 5.33278 6.15565 5.03176 5.84862C4.73042 5.54125 4.31958 5.36671 3.88905 5.36671H3.8335V3.53337H6.66683C6.94297 3.53337 7.16683 3.30952 7.16683 3.03337V2.46671C7.16683 2.29558 7.23357 2.1334 7.3493 2.01536C7.46471 1.89764 7.61909 1.83337 7.77794 1.83337C7.93679 1.83337 8.09118 1.89764 8.20658 2.01536C8.32231 2.1334 8.38905 2.29558 8.38905 2.46671V3.03337C8.38905 3.30952 8.61291 3.53337 8.88905 3.53337H11.1668V3.66671C11.1668 3.94285 11.3907 4.16671 11.6668 4.16671C11.943 4.16671 12.1668 3.94285 12.1668 3.66671V3.37337C12.1668 3.15375 12.0814 2.94118 11.9262 2.78292C11.7708 2.62433 11.5577 2.53337 11.3335 2.53337H9.38905V2.46671C9.38905 2.03668 9.22167 1.62232 8.92065 1.31528C8.61931 1.00791 8.20846 0.833374 7.77794 0.833374Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.3537 5.1633C13.9138 4.7234 13.2006 4.7234 12.7607 5.16329L6.93968 10.9843C6.87393 11.0501 6.82782 11.1328 6.80653 11.2233L6.18013 13.8855C6.14047 14.0541 6.19084 14.2312 6.31329 14.3536C6.43573 14.476 6.6128 14.5264 6.78136 14.4867L9.44354 13.8604C9.53405 13.8391 9.61683 13.7929 9.68257 13.7272L15.5036 7.90617C15.9435 7.46628 15.9435 6.7531 15.5036 6.31321L14.3537 5.1633ZM13.4678 5.87038C13.5172 5.82104 13.5972 5.82104 13.6465 5.87038L14.7965 7.02032C14.8458 7.06969 14.8458 7.14972 14.7965 7.19909L9.07604 12.9195L7.33854 13.3283L7.74737 11.5908L13.4678 5.87038Z",fill:"currentColor"})]}))})),SC=n.g.gd,PC=function(e){return{direction:"row",first:e?{direction:"column",first:"free-functions-list",second:{direction:"column",first:"objects-list",second:"behaviors-list",splitPercentage:50},splitPercentage:33}:{direction:"column",first:"free-functions-list",second:"behaviors-list",splitPercentage:50},second:{direction:"column",first:"parameters",second:"events-sheet",splitPercentage:25},splitPercentage:25}},IC=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={selectedEventsFunction:null,selectedEventsBasedBehavior:null,editedEventsBasedBehavior:null,selectedEventsBasedObject:null,editedEventsBasedObject:null,editOptionsDialogOpen:!1,behaviorMethodSelectorDialogOpen:!1,objectMethodSelectorDialogOpen:!1,extensionFunctionSelectorDialogOpen:!1,onAddEventsFunctionCb:null},e._globalObjectsContainer=new SC.ObjectsContainer,e._objectsContainer=new SC.ObjectsContainer,e._loadEventsFunctionFrom=function(t,n,r,o,i){if(r)SC.EventsFunctionTools.behaviorEventsFunctionToObjectsContainer(t,r,n,e._globalObjectsContainer,e._objectsContainer);else if(o)SC.EventsFunctionTools.objectEventsFunctionToObjectsContainer(t,o,n,e._globalObjectsContainer,e._objectsContainer);else{if(!i)throw new Error("No extension, behavior or object was specified when loading a function");SC.EventsFunctionTools.freeEventsFunctionToObjectsContainer(t,i,n,e._globalObjectsContainer,e._objectsContainer)}},e.updateToolbar=function(){e.editor?e.editor.updateToolbar():e.props.setToolbar((0,f.jsx)(b,{lastChild:!0,children:(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e._editOptions,tooltip:{id:"Open extension settings"},children:(0,f.jsx)(EC,{})})}))},e.selectEventsFunctionByName=function(t,n){var r=e.props.eventsFunctionsExtension;if(n){var o=r.getEventsBasedBehaviors();if(o.has(n)){var i=o.get(n),a=i.getEventsFunctions();a.hasEventsFunctionNamed(t)&&e._selectEventsFunction(a.getEventsFunction(t),i)}}else r.hasEventsFunctionNamed(t)&&e._selectEventsFunction(r.getEventsFunction(t),null)},e._selectEventsFunction=function(t,n,r){t?(e.props.onFunctionEdited&&e.props.onFunctionEdited(),e._loadEventsFunctionFrom(e.props.project,t,n,r,e.props.eventsFunctionsExtension),e.setState({selectedEventsFunction:t,selectedEventsBasedBehavior:n,selectedEventsBasedObject:r},(function(){e.updateToolbar(),e._editorNavigator&&(t&&!t.getEvents().getEventsCount()?e._editorNavigator.openEditor("parameters"):e._editorNavigator.openEditor("events-sheet"))}))):e.setState({selectedEventsFunction:null,selectedEventsBasedBehavior:n,selectedEventsBasedObject:r},(function(){return e.updateToolbar()}))},e._makeRenameFreeEventsFunction=function(t){return function(t,n,r){var o=e.props,i=o.project,a=o.eventsFunctionsExtension,s=(0,Ut.Z)(SC.Project.getSafeName(n),(function(e){return!(!SC.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(e)&&!a.hasEventsFunctionNamed(e))}));SC.WholeProjectRefactorer.renameEventsFunction(i,a,t.getName(),s),t.setName(s),r(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()}},e._makeRenameBehaviorEventsFunction=function(t){return function(t,n,r,o){var i=(0,Ut.Z)(SC.Project.getSafeName(r),(function(e){return!(!SC.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(e)&&!t.getEventsFunctions().hasEventsFunctionNamed(e))})),a=e.props,s=a.project,l=a.eventsFunctionsExtension;SC.WholeProjectRefactorer.renameBehaviorEventsFunction(s,l,t,n.getName(),i),n.setName(i),o(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()}},e._makeRenameObjectEventsFunction=function(t){return function(t,n,r,o){var i=(0,Ut.Z)(SC.Project.getSafeName(r),(function(e){return!(!SC.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(e)&&!t.getEventsFunctions().hasEventsFunctionNamed(e))})),a=e.props,s=a.project,l=a.eventsFunctionsExtension;SC.WholeProjectRefactorer.renameObjectEventsFunction(s,l,t,n.getName(),i),n.setName(i),o(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()}},e._makeMoveFreeEventsParameter=function(t){return function(t,n,r,o){var i=e.props,a=i.project,s=i.eventsFunctionsExtension;SC.WholeProjectRefactorer.moveEventsFunctionParameter(a,s,t.getName(),n+Jp.mK.FreeFunction,r+Jp.mK.FreeFunction),o(!0)}},e._makeMoveBehaviorEventsParameter=function(t){return function(t,n,r,o,i){var a=e.props,s=a.project,l=a.eventsFunctionsExtension;SC.WholeProjectRefactorer.moveBehaviorEventsFunctionParameter(s,l,t,n.getName(),r,o),i(!0)}},e._makeMoveObjectEventsParameter=function(t){return function(t,n,r,o,i){var a=e.props,s=a.project,l=a.eventsFunctionsExtension;SC.WholeProjectRefactorer.moveObjectEventsFunctionParameter(s,l,t,n.getName(),r,o),i(!0)}},e._onDeleteEventsFunction=function(t,n){e.state.selectedEventsFunction&&SC.compare(t,e.state.selectedEventsFunction)&&e._selectEventsFunction(null,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject),n(!0)},e.selectEventsBasedBehaviorByName=function(t){var n=e.props.eventsFunctionsExtension.getEventsBasedBehaviors();n.has(t)&&e._selectEventsBasedBehavior(n.get(t))},e._selectEventsBasedBehavior=function(t){e.setState({selectedEventsBasedBehavior:t,selectedEventsFunction:null,selectedEventsBasedObject:null},(function(){e.updateToolbar(),t&&(e._editorMosaic&&e._editorMosaic.openEditor("behavior-functions-list","end",75,"column"),e._editorNavigator&&e._editorNavigator.openEditor("behavior-functions-list"))}))},e._selectEventsBasedObject=function(t){e.setState({selectedEventsBasedObject:t,selectedEventsFunction:null,selectedEventsBasedBehavior:null},(function(){e.updateToolbar(),t&&(e._editorMosaic&&e._editorMosaic.openEditor("behavior-functions-list","end",75,"column"),e._editorNavigator&&e._editorNavigator.openEditor("behavior-functions-list"))}))},e._makeRenameEventsBasedBehavior=function(t){return function(t,n,r){var o=e.props,i=o.project,a=o.eventsFunctionsExtension,s=(0,Ut.Z)(SC.Project.getSafeName(n),(function(e){return!!a.getEventsBasedBehaviors().has(e)}));SC.WholeProjectRefactorer.renameEventsBasedBehavior(i,a,t.getName(),s),t.setName(s),r(!0)}},e._makeRenameEventsBasedObject=function(t){return function(t,n,r){var o=e.props,i=o.project,a=o.eventsFunctionsExtension,s=(0,Ut.Z)(SC.Project.getSafeName(n),(function(e){return!!a.getEventsBasedObjects().has(e)}));SC.WholeProjectRefactorer.renameEventsBasedObject(i,a,t.getName(),s),t.setName(s),r(!0)}},e._onEventsBasedBehaviorPasted=function(t,n){var r=e.props,o=r.project,i=r.eventsFunctionsExtension;i.getName()!==n&&SC.WholeProjectRefactorer.updateExtensionNameInEventsBasedBehavior(o,i,t,n)},e._onEventsBasedBehaviorRenamed=function(){e.props.onBehaviorEdited&&e.props.onBehaviorEdited(),e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension)},e._onEventsBasedObjectRenamed=function(){e.props.onObjectEdited&&e.props.onObjectEdited(),e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension)},e._onDeleteEventsBasedBehavior=function(t,n){e.state.selectedEventsBasedBehavior&&SC.compare(t,e.state.selectedEventsBasedBehavior)&&e._selectEventsBasedBehavior(null),n(!0)},e._onDeleteEventsBasedObject=function(t,n){e.state.selectedEventsBasedObject&&SC.compare(t,e.state.selectedEventsBasedObject)&&e._selectEventsBasedObject(null),n(!0)},e._onAddFreeEventsFunction=function(t){e.setState({extensionFunctionSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onCloseExtensionFunctionSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({extensionFunctionSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onAddBehaviorEventsFunction=function(t){e.setState({behaviorMethodSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onAddObjectEventsFunction=function(t){e.setState({objectMethodSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onCloseBehaviorMethodSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({behaviorMethodSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onCloseObjectMethodSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({objectMethodSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onBehaviorEventsFunctionAdded=function(t,n){SC.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,t)},e._onObjectEventsFunctionAdded=function(t,n){SC.WholeProjectRefactorer.ensureObjectEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,t)},e._onBehaviorPropertyRenamed=function(t,n,r){var o=e.props,i=o.project,a=o.eventsFunctionsExtension;SC.WholeProjectRefactorer.renameEventsBasedBehaviorProperty(i,a,t,n,r)},e._onBehaviorSharedPropertyRenamed=function(t,n,r){var o=e.props,i=o.project,a=o.eventsFunctionsExtension;SC.WholeProjectRefactorer.renameEventsBasedBehaviorSharedProperty(i,a,t,n,r)},e._onObjectPropertyRenamed=function(t,n,r){var o=e.props,i=o.project,a=o.eventsFunctionsExtension;SC.WholeProjectRefactorer.renameEventsBasedObjectProperty(i,a,t,n,r)},e._editOptions=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({editOptionsDialogOpen:t})},e._editBehavior=function(t){e.setState((function(n){return n.editedEventsBasedBehavior&&!t&&SC.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,n.editedEventsBasedBehavior),{editedEventsBasedBehavior:t}}),(0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=6;break}if(!e.props.onBehaviorEdited){n.next=5;break}return n.next=4,e.props.onBehaviorEdited();case 4:SC.WholeProjectRefactorer.fixInvalidRequiredBehaviorProperties(e.props.project);case 5:e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension);case 6:case"end":return n.stop()}}),n)}))))},e._editObject=function(t){e.setState((function(n){return n.editedEventsBasedObject&&!t&&SC.WholeProjectRefactorer.ensureObjectEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,n.editedEventsBasedObject),{editedEventsBasedObject:t}}),(0,o.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=5;break}if(!e.props.onObjectEdited){n.next=4;break}return n.next=4,e.props.onObjectEdited();case 4:e.state.selectedEventsFunction&&e._loadEventsFunctionFrom(e.props.project,e.state.selectedEventsFunction,e.state.selectedEventsBasedBehavior,e.state.selectedEventsBasedObject,e.props.eventsFunctionsExtension);case 5:case"end":return n.stop()}}),n)}))))},e._openFreeFunctionsListEditor=function(){e._editorNavigator&&e._editorNavigator.openEditor("free-functions-list")},e._openBehaviorsListEditor=function(){e._editorNavigator&&e._editorNavigator.openEditor("behaviors-list")},e._onEditorNavigatorEditorChanged=function(t){e.updateToolbar(),"behaviors-list"===t?e._selectEventsBasedBehavior(null):"free-functions-list"!==t&&"behavior-functions-list"!==t||e._selectEventsFunction(null,e.state.selectedEventsBasedBehavior)},e._getFunctionGroupNames=function(){var t=new Set,n=e.state,r=n.selectedEventsBasedBehavior,o=n.selectedEventsBasedObject;if(r)for(var i=r.getEventsFunctions(),a=0;a<i.getEventsFunctionsCount();a++){var s=i.getEventsFunctionAt(a).getGroup();s&&t.add(s)}else if(o)for(var l=o.getEventsFunctions(),c=0;c<l.getEventsFunctionsCount();c++){var u=l.getEventsFunctionAt(c).getGroup();u&&t.add(u)}else for(var d=e.props.eventsFunctionsExtension,p=0;p<d.getEventsFunctionsCount();p++){var h=d.getEventsFunctionAt(p).getGroup();h&&t.add(h)}return(0,j.Z)(t).sort((function(e,t){return e.localeCompare(t)}))},e._onConfigurationUpdated=function(t){"type"===t&&e.forceUpdate()},e.onBeginCreateEventsFunction=function(){(0,Nr.cc)({step:"begin",parentEditor:"extension-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"extension-events-editor")},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this.props.initiallyFocusedFunctionName?this.selectEventsFunctionByName(this.props.initiallyFocusedFunctionName,this.props.initiallyFocusedBehaviorName):this.props.initiallyFocusedBehaviorName&&this.selectEventsBasedBehaviorByName(this.props.initiallyFocusedBehaviorName)}},{key:"componentWillUnmount",value:function(){this._globalObjectsContainer&&this._globalObjectsContainer.delete(),this._objectsContainer&&this._objectsContainer.delete()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsFunctionsExtension,o=this.state,i=o.selectedEventsFunction,a=o.selectedEventsBasedBehavior,s=o.selectedEventsBasedObject,l=o.editOptionsDialogOpen,d=o.behaviorMethodSelectorDialogOpen,p=o.objectMethodSelectorDialogOpen,h=o.extensionFunctionSelectorDialogOpen,g=o.editedEventsBasedBehavior,m=o.editedEventsBasedObject,x=a||s,v={"choose-editor":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,f.jsx)(TC,{eventsFunctionsExtension:r,onEditFreeFunctions:e._openFreeFunctionsListEditor,onEditBehaviors:e._openBehaviorsListEditor,onEditExtensionOptions:e._editOptions})}},parameters:{type:"primary",title:{id:"Function Configuration"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(Sh,{maxWidth:!0,children:i&&e._globalObjectsContainer&&e._objectsContainer?(0,f.jsx)(Nx,{project:n,eventsFunction:i,eventsBasedBehavior:a,eventsBasedObject:s,eventsFunctionsContainer:x&&x.getEventsFunctions()||r,globalObjectsContainer:e._globalObjectsContainer,objectsContainer:e._objectsContainer,onConfigurationUpdated:e._onConfigurationUpdated,helpPagePath:s?"/behaviors/events-based-objects":a?"/behaviors/events-based-behaviors":"/events/functions",onParametersOrGroupsUpdated:function(){e._loadEventsFunctionFrom(n,i,a,s,e.props.eventsFunctionsExtension),e.forceUpdate()},onMoveFreeEventsParameter:e._makeMoveFreeEventsParameter(o),onMoveBehaviorEventsParameter:e._makeMoveBehaviorEventsParameter(o),onMoveObjectEventsParameter:e._makeMoveObjectEventsParameter(o),unsavedChanges:e.props.unsavedChanges,getFunctionGroupNames:e._getFunctionGroupNames}):(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Choose a function, or a function of a behavior, to set the parameters that it accepts."})})})}})}},"events-sheet":{type:"primary",noTitleBar:!0,renderEditor:function(){return i&&e._globalObjectsContainer&&e._objectsContainer?(0,f.jsx)(Sh,{children:(0,f.jsx)(Sm,{ref:function(t){return e.editor=t},project:n,scope:{layout:null,externalEvents:null,eventsFunctionsExtension:r,eventsBasedBehavior:a,eventsBasedObject:s,eventsFunction:i},globalObjectsContainer:e._globalObjectsContainer,objectsContainer:e._objectsContainer,events:i.getEvents(),onOpenExternalEvents:function(){},onOpenLayout:function(){},resourceManagementProps:e.props.resourceManagementProps,openInstructionOrExpression:e.props.openInstructionOrExpression,setToolbar:e.props.setToolbar,onBeginCreateEventsFunction:e.onBeginCreateEventsFunction,onCreateEventsFunction:e.onCreateEventsFunction,onOpenSettings:e._editOptions,settingsIcon:(0,f.jsx)(EC,{}),unsavedChanges:e.props.unsavedChanges,isActive:!0},i.ptr)}):(0,f.jsx)(Sh,{children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Choose a function, or a function of a behavior, to edit its events."})})})}},"free-functions-list":{type:"primary",title:{id:"Functions"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(Yx,{project:n,eventsFunctionsContainer:r,selectedEventsFunction:i,onSelectEventsFunction:function(t){return e._selectEventsFunction(t,null)},onDeleteEventsFunction:e._onDeleteEventsFunction,canRename:function(e){return!SC.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(e.getName())},onRenameEventsFunction:e._makeRenameFreeEventsFunction(o),onAddEventsFunction:e._onAddFreeEventsFunction,onEventsFunctionAdded:function(){},unsavedChanges:e.props.unsavedChanges})}})}},"behavior-functions-list":{type:"primary",title:s?{id:"Object functions"}:{id:"Behavior functions"},renderEditor:function(){return s?(0,f.jsx)(c.I18n,{children:function(t){var r=t.i18n;return(0,f.jsx)(Yx,{project:n,eventsFunctionsContainer:s.getEventsFunctions(),selectedEventsFunction:i,onSelectEventsFunction:function(t){return e._selectEventsFunction(t,a,s)},onDeleteEventsFunction:e._onDeleteEventsFunction,canRename:function(e){return!SC.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(e.getName())},onRenameEventsFunction:function(t,n,o){return e._makeRenameObjectEventsFunction(r)(s,t,n,o)},onAddEventsFunction:e._onAddObjectEventsFunction,onEventsFunctionAdded:function(t){return e._onObjectEventsFunctionAdded(s,t)},unsavedChanges:e.props.unsavedChanges})}}):a?(0,f.jsx)(c.I18n,{children:function(t){var r=t.i18n;return(0,f.jsx)(Yx,{project:n,eventsFunctionsContainer:a.getEventsFunctions(),selectedEventsFunction:i,onSelectEventsFunction:function(t){return e._selectEventsFunction(t,a,s)},onDeleteEventsFunction:e._onDeleteEventsFunction,canRename:function(e){return!SC.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(e.getName())},onRenameEventsFunction:function(t,n,o){return e._makeRenameBehaviorEventsFunction(r)(a,t,n,o)},onAddEventsFunction:e._onAddBehaviorEventsFunction,onEventsFunctionAdded:function(t){return e._onBehaviorEventsFunctionAdded(a,t)},unsavedChanges:e.props.unsavedChanges})}}):(0,f.jsx)(Sh,{children:(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Select a behavior or an object to display its functions."})})})}},"behaviors-list":{type:"secondary",title:{id:"Behaviors"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(Qx,{project:n,eventsFunctionsExtension:r,eventsBasedBehaviorsList:r.getEventsBasedBehaviors(),selectedEventsBasedBehavior:a,onSelectEventsBasedBehavior:e._selectEventsBasedBehavior,onDeleteEventsBasedBehavior:e._onDeleteEventsBasedBehavior,onRenameEventsBasedBehavior:e._makeRenameEventsBasedBehavior(o),onEventsBasedBehaviorRenamed:e._onEventsBasedBehaviorRenamed,onEventsBasedBehaviorPasted:e._onEventsBasedBehaviorPasted,onEditProperties:e._editBehavior,unsavedChanges:e.props.unsavedChanges})}})}},"objects-list":{type:"secondary",title:{id:"Objects"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(nv,{project:n,eventsBasedObjectsList:r.getEventsBasedObjects(),selectedEventsBasedObject:s,onSelectEventsBasedObject:e._selectEventsBasedObject,onDeleteEventsBasedObject:e._onDeleteEventsBasedObject,onRenameEventsBasedObject:e._makeRenameEventsBasedObject(o),onEventsBasedObjectRenamed:e._onEventsBasedObjectRenamed,onEditProperties:e._editObject,unsavedChanges:e.props.unsavedChanges})}})}}};return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(T.I,{children:function(t){return"small"===t?(0,f.jsx)(wC,{ref:function(t){return e._editorNavigator=t},editors:v,initialEditorName:"choose-editor",transitions:{"behaviors-list":{previousEditor:"choose-editor"},"behavior-functions-list":{previousEditor:"behaviors-list"},"free-functions-list":{previousEditor:"choose-editor"},"events-sheet":{nextIcon:(0,f.jsx)(Rv,{}),nextLabel:(0,f.jsx)(c.Trans,{id:"Parameters"}),nextEditor:"parameters",previousEditor:function(){return a||s?"behavior-functions-list":"free-functions-list"}},parameters:{nextIcon:(0,f.jsx)(Eb,{}),nextLabel:(0,f.jsx)(c.Trans,{id:"Validate these parameters"}),nextEditor:"events-sheet"}},onEditorChanged:e._onEditorNavigatorEditorChanged}):(0,f.jsx)(X.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode,o=t.getShowEventBasedObjectsEditor;return(0,f.jsx)(Om.Z,{ref:function(t){return e._editorMosaic=t},editors:v,onPersistNodes:function(e){return r("events-functions-extension-editor",e)},initialNodes:o()===(0,Om.J)(n("events-functions-extension-editor")||PC(o()),"objects-list")&&n("events-functions-extension-editor")||PC(o())})}})}}),l&&(0,f.jsx)(vv,{eventsFunctionsExtension:r,open:!0,onClose:function(){return e._editOptions(!1)}}),p&&s&&(0,f.jsx)(jC,{eventsBasedObject:s,onCancel:function(){return e._onCloseObjectMethodSelectorDialog(null)},onChoose:function(t){return e._onCloseObjectMethodSelectorDialog(t)}}),d&&a&&(0,f.jsx)(gC,{eventsBasedBehavior:a,onCancel:function(){return e._onCloseBehaviorMethodSelectorDialog(null)},onChoose:function(t){return e._onCloseBehaviorMethodSelectorDialog(t)}}),h&&r&&(0,f.jsx)(kC,{eventsFunctionsExtension:r,onCancel:function(){return e._onCloseExtensionFunctionSelectorDialog(null)},onChoose:function(t){return e._onCloseExtensionFunctionSelectorDialog(t)}}),g&&(0,f.jsx)(Iv,{project:n,eventsFunctionsExtension:r,eventsBasedBehavior:g,onApply:function(){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),e._editBehavior(null)},onRenameProperty:function(t,n){return e._onBehaviorPropertyRenamed(g,t,n)},onRenameSharedProperty:function(t,n){return e._onBehaviorSharedPropertyRenamed(g,t,n)}}),m&&this._globalObjectsContainer&&(0,f.jsx)(rC,{project:n,globalObjectsContainer:this._globalObjectsContainer,eventsFunctionsExtension:r,eventsBasedObject:m,onApply:function(){e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges(),e._editObject(null)},onRenameProperty:function(t,n){return e._onObjectPropertyRenamed(m,t,n)}})]})}}]),n}(u.Component),DC={container:{display:"flex",flex:1,minWidth:0}},AC=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._reloadExtensionMetadata=function(){try{var t=e.getEventsFunctionsExtension();t&&e.props.onReloadEventsFunctionsExtensionMetadata(t)}catch(n){console.warn("Error while loading events functions extensions - ignoring this in the context of the EventsFunctionsExtensionEditorContainer.",n)}},e.previewWillStart=function(){e.props.isActive&&e.props.onLoadEventsFunctionsExtensions()},e}return(0,lt.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidUpdate",value:function(e){e.isActive&&!this.props.isActive&&this.props.onLoadEventsFunctionsExtensions()}},{key:"componentWillUnmount",value:function(){this.props.isActive&&this.props.onLoadEventsFunctionsExtensions()}},{key:"getEventsFunctionsExtension",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasEventsFunctionsExtensionNamed(n)?t.getEventsFunctionsExtension(n):null}},{key:"getEventsFunctionsExtensionName",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n?n:null}},{key:"selectEventsFunctionByName",value:function(e,t){this.editor&&this.editor.selectEventsFunctionByName(e,t)}},{key:"selectEventsBasedBehaviorByName",value:function(e){this.editor&&this.editor.selectEventsBasedBehaviorByName(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,o=this.getEventsFunctionsExtension();if(!o||!n)return(0,f.jsxs)("div",{children:["No extension called ",r," found!"]});var i=this.props.extraEditorProps||{},a=i.initiallyFocusedFunctionName,s=i.initiallyFocusedBehaviorName;return(0,f.jsx)("div",{style:DC.container,children:(0,f.jsx)(IC,{project:n,eventsFunctionsExtension:o,setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.props.onCreateEventsFunction,initiallyFocusedFunctionName:a,initiallyFocusedBehaviorName:s,onBehaviorEdited:this._reloadExtensionMetadata,onObjectEdited:this._reloadExtensionMetadata,onFunctionEdited:this._reloadExtensionMetadata,ref:function(t){return e.editor=t},unsavedChanges:this.props.unsavedChanges},o.ptr)})}}]),n}(u.Component),LC=function(e){return(0,f.jsx)(AC,(0,i.Z)({},e))};function MC(e){var t=e.open,n=e.onChoose,r=e.layoutName,o=e.onClose,i=e.project,s=e.title,l=e.helpTexts,d=r||"",p=u.useState(d),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useCallback((function(){g&&n({layoutName:g})}),[n,g]),v=[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:o},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Choose"}),primary:!0,onClick:x,disabled:!g},"choose")],b=(0,Nt.mapFor)(0,i.getLayoutsCount(),(function(e){return i.getLayoutAt(e).getName()}));return(0,f.jsx)(V.ZP,{title:s,actions:v,open:t,onRequestClose:o,onApply:x,maxWidth:"sm",children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[l&&l.map((function(e,t){return(0,f.jsx)(L.x1,{children:(0,f.jsx)(Li.Z,{children:e})},t)})),(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Choose the associated scene:"})})}),(0,f.jsx)(Qb.Z,{"aria-label":"Associated scene",name:"associated-layout",value:g,onChange:function(e){return m(e.target.value)},children:b.map((function(e){return(0,f.jsx)($b.Z,{value:e,control:(0,f.jsx)(Kb.Z,{color:"secondary"}),label:e},e)}))})]})})}var FC=n(36595),OC={container:{display:"flex",flex:1}},RC=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={externalPropertiesDialogOpen:!1},e.saveExternalProperties=function(t){var n=e.getExternalEvents();n&&(n.setAssociatedLayout(t.layoutName),e.setState({externalPropertiesDialogOpen:!1},(function(){return e.updateToolbar()})))},e.openExternalPropertiesDialog=function(){e.setState({externalPropertiesDialogOpen:!0})},e.onBeginCreateEventsFunction=function(){(0,Nr.cc)({step:"begin",parentEditor:"external-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"external-events-editor")},e}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"getExternalEvents",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasExternalEventsNamed(n)?t.getExternalEvents(n):null}},{key:"getLayout",value:function(){var e=this.props.project;if(!e)return null;var t=this.getAssociatedLayoutName();return t?e.getLayout(t):null}},{key:"getAssociatedLayoutName",value:function(){var e=this.props.project;if(!e)return null;var t=this.getExternalEvents();if(!t)return null;var n=t.getAssociatedLayout();return e.hasLayoutNamed(n)?n:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,o=this.getExternalEvents(),i=this.getLayout();return o&&n?(0,f.jsxs)("div",{style:OC.container,children:[i&&(0,f.jsx)(Sm,{ref:function(t){return e.editor=t},setToolbar:this.props.setToolbar,onOpenLayout:this.props.onOpenLayout,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.onCreateEventsFunction,onBeginCreateEventsFunction:this.onBeginCreateEventsFunction,unsavedChanges:this.props.unsavedChanges,project:n,scope:{layout:i,externalEvents:o},globalObjectsContainer:n,objectsContainer:i,events:o.getEvents(),onOpenSettings:this.openExternalPropertiesDialog,settingsIcon:(0,f.jsx)(Og,{}),onOpenExternalEvents:this.props.onOpenExternalEvents,isActive:this.props.isActive}),!i&&(0,f.jsxs)(Zx.Z,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"To edit the external events, choose the scene in which it will be included"})}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Choose the scene"}),primary:!0,onClick:this.openExternalPropertiesDialog})}),(0,f.jsx)(L.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(FC.Z,{tutorialId:"Intermediate-externals",label:(0,f.jsx)(c.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,f.jsx)(zn.Z,{helpPagePath:"/interface/events-editor/external-events"})})})]}),(0,f.jsx)(MC,{title:(0,f.jsx)(c.Trans,{id:"Configure the external events"}),helpTexts:[(0,f.jsx)(c.Trans,{id:'In order to use these external events, you still need to add a "Link" event in the events sheet of the corresponding scene'})],open:this.state.externalPropertiesDialogOpen,project:n,onChoose:this.saveExternalProperties,layoutName:this.getAssociatedLayoutName(),onClose:function(){return e.setState({externalPropertiesDialogOpen:!1})}})]}):(0,f.jsxs)("div",{children:["No external events called ",r," found!"]})}}]),n}(u.Component),BC=function(e){return(0,f.jsx)(RC,(0,i.Z)({},e))},_C=function(e){return(0,Nt.mapFor)(0,e.getLayersCount(),(function(t){return{value:e.getLayerAt(t).getName(),label:e.getLayerAt(t).getName()||"Base layer",labelIsUserDefined:!!e.getLayerAt(t).getName()}}))},NC=n.g.gd,UC=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(e){var r;return(0,st.Z)(this,n),(r=t.call(this,e)).state={selectedLayer:""},r}return(0,lt.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.open&&e.open&&this.setState({selectedLayer:""})}},{key:"render",value:function(){var e=this;if(!this.props.layersContainer||!this.props.open)return null;var t=NC.WholeProjectRefactorer.getLayoutAndExternalLayoutLayerInstancesCount(this.props.project,this.props.layersContainer,this.props.layerRemoved),n=[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:function(){return e.props.onClose(!1,null)}},"cancel")];t>0?n=n.concat([(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Remove objects"}),onClick:function(){return e.props.onClose(!0,null)}},"remove"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Move objects"}),primary:!0,onClick:function(){return e.props.onClose(!0,e.state.selectedLayer)}},"move")]):n.push((0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Continue"}),primary:!0,onClick:function(){return e.props.onClose(!0,null)}},"continue"));var r=_C(this.props.layersContainer).filter((function(t){return t.value!==e.props.layerRemoved})).map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,f.jsx)(U.Z,{value:t,label:n,shouldNotTranslate:r},t)}));return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Objects on {0}",values:{0:this.props.layerRemoved}}),actions:n,open:this.props.open,onRequestClose:function(){return e.props.onClose(!1,null)},onApply:t>0?function(){return e.props.onClose(!0,e.state.selectedLayer)}:function(){return e.props.onClose(!0,null)},flexColumnBody:!0,maxWidth:"sm",children:[(0,f.jsx)(J.Z,{children:0===t?(0,f.jsx)(c.Trans,{id:"The layer {0} does not contain any object instances. Continue?",values:{0:this.props.layerRemoved}}):(0,f.jsx)(c.Trans,{id:"There are {instancesCountInLayout} object instances on this layer. Should they be moved to another layer?",values:{instancesCountInLayout:t}})}),t>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Move objects from layer {0} to:",values:{0:this.props.layerRemoved}})}),(0,f.jsx)(B.Z,{value:this.state.selectedLayer,onChange:function(t,n,r){e.setState({selectedLayer:r})},children:r})]})]})}}]),n}(u.Component),HC=n.g.gd,VC=function(e){var t=e.initialTab,n=e.layer,r=e.initialInstances,o=e.onClose,s=e.hotReloadPreviewButtonProps,l=(0,_t.Z)(),d=mt({serializableObject:n,onCancel:o}),p=d.onCancelChanges,h=d.notifyOfChange,g=u.useState(null),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useState(null),j=(0,a.Z)(b,2),y=j[0],Z=j[1],k=u.useState(null),w=(0,a.Z)(k,2),T=w[0],E=w[1],S=u.useState(t),P=(0,a.Z)(S,2),I=P[0],D=P[1],A=u.useMemo((function(){var e=new HC.HighestZOrderFinder;e.restrictSearchToLayer(n.getName()),r.iterateOverInstances(e);var t=e.getInstancesCount(),o=e.getHighestZOrder();return e.delete(),{instancesCount:t,highestZOrder:o}}),[n,r]),M=A.instancesCount,F=A.highestZOrder,O=u.useCallback((function(e){v(null);var t=parseFloat(e)||0;t<=0||t>180?v((0,f.jsx)(c.Trans,{id:"The field of view cannot be lower than 0\xb0 or greater than 180\xb0."})):t!==n.getCamera3DFieldOfView()&&(n.setCamera3DFieldOfView(t),l(),h())}),[l,n,h]),R=u.useCallback((function(e){E(null);var t=parseFloat(e)||0;t<=0||t>=n.getCamera3DFarPlaneDistance()?E((0,f.jsx)(c.Trans,{id:"The near plane distance must be strictly greater than 0 and lower than the far plan distance."})):t!==n.getCamera3DNearPlaneDistance()&&(n.setCamera3DNearPlaneDistance(t),l(),h())}),[l,n,h]),N=u.useCallback((function(e){Z(null);var t=parseFloat(e)||0;t<=n.getCamera3DNearPlaneDistance()?Z((0,f.jsx)(c.Trans,{id:"The far plane distance must be greater than the near plan distance."})):t!==n.getCamera3DFarPlaneDistance()&&(n.setCamera3DFarPlaneDistance(t),l(),h())}),[l,n,h]);return(0,f.jsxs)(V.ZP,{title:n.getName()?(0,f.jsx)(c.Trans,{id:"{0} properties",values:{0:n.getName()}}):(0,f.jsx)(c.Trans,{id:"Base layer properties"}),open:!0,secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/scene-editor/layer-effects"},"help"),(0,f.jsx)(xt,(0,i.Z)({},s),"hot-reload-preview-button")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:p},"Cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:o},"Apply")],onRequestClose:p,onApply:o,fullHeight:!0,flexColumnBody:!0,fixedContent:(0,f.jsx)(K.m,{value:I,onChange:D,options:[{value:"properties",label:(0,f.jsx)(c.Trans,{id:"Properties"})},{value:"effects",label:(0,f.jsx)(c.Trans,{id:"Effects"})}]}),children:["properties"===I&&(0,f.jsxs)(C.ak,{noMargin:!0,children:[n.isLightingLayer()?(0,f.jsx)(re.Z,{kind:"info",identifier:"lighting-layer-usage",children:(0,f.jsx)(c.Trans,{id:"The lighting layer renders an ambient light on the scene. All lights should be placed on this layer so that shadows are properly rendered. By default, the layer follows the base layer camera. Uncheck this if you want to manually move the camera using events."})}):null,(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"There are {instancesCount} instances of objects on this layer.",values:{instancesCount:M}})}),!e.project.getUseDeprecatedZeroAsDefaultZOrder()&&(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:'Objects created using events on this layer will be given a "Z order" of {0}, so that they appear in front of all objects of this layer. You can change this using the action to change an object Z order, after using an action to create it.',values:{0:F+1}})}),(0,f.jsx)(al.Z,{label:(0,f.jsx)(c.Trans,{id:"Hide the layer"}),checked:!n.getVisibility(),onCheck:function(e,t){n.setVisibility(!t),l(),h()},tooltipOrHelperText:(0,f.jsx)(c.Trans,{id:'This setting changes the visibility of the entire layer. Objects on the layer will not be treated as "hidden" for event conditions or actions.'})}),!n.isLightingLayer()&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"3D settings"})}),(0,f.jsxs)(B.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Rendering type"}),value:n.getRenderingType(),onChange:function(e,t,r){n.setRenderingType(r),l()},children:[(0,f.jsx)(U.Z,{value:"",label:{id:"Display both 2D and 3D objects (default)"}}),(0,f.jsx)(U.Z,{value:"2d",label:{id:"Force display only 2D objects"}}),(0,f.jsx)(U.Z,{value:"3d",label:{id:"Force display only 3D objects"},disabled:n.isLightingLayer()}),(0,f.jsx)(U.Z,{value:"2d+3d",label:{id:"Force display both 2D and 3D objects"},disabled:n.isLightingLayer()})]}),"2d"!==n.getRenderingType()&&(0,f.jsxs)(C.ep,{children:[(0,f.jsx)(Dt.Z,{commitOnBlur:!0,fullWidth:!0,errorText:x,onChange:O,value:n.getCamera3DFieldOfView().toString(10),floatingLabelText:(0,f.jsx)(c.Trans,{id:"Field of view (in degrees)"}),floatingLabelFixed:!0}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,fullWidth:!0,errorText:T,onChange:R,value:n.getCamera3DNearPlaneDistance().toString(10),floatingLabelText:(0,f.jsx)(c.Trans,{id:"Near plane distance"}),floatingLabelFixed:!0}),(0,f.jsx)(Dt.Z,{commitOnBlur:!0,fullWidth:!0,errorText:y,onChange:N,value:n.getCamera3DFarPlaneDistance().toString(10),floatingLabelText:(0,f.jsx)(c.Trans,{id:"Far plane distance"}),floatingLabelFixed:!0})]})]}),n.isLightingLayer()?(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"Lighting settings"})}),(0,f.jsx)(al.Z,{label:(0,f.jsx)(c.Trans,{id:"Automatically follow the base layer."}),checked:n.isFollowingBaseLayerCamera(),onCheck:function(e,t){n.setFollowBaseLayerCamera(t),l(),h()}}),(0,f.jsx)($n.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Ambient light color"}),disableAlpha:!0,color:(0,er.KC)({r:n.getAmbientLightColorRed(),g:n.getAmbientLightColorGreen(),b:n.getAmbientLightColorBlue()}),onChange:function(e){var t=n.getAmbientLightColorRed(),r=n.getAmbientLightColorGreen(),o=n.getAmbientLightColorBlue(),i=(0,er.A0)(e);!i||i.r===t&&i.g===r&&i.b===o||(n.setAmbientLightColor(i.r,i.g,i.b),l(),h())}})]}):(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(L.LZ,{})]})]}),"effects"===I&&(0,f.jsx)(Jj,{target:"layer",layerRenderingType:n.getRenderingType(),project:e.project,resourceManagementProps:e.resourceManagementProps,effectsContainer:n.getEffects(),onEffectsRenamed:function(t,n){return HC.WholeProjectRefactorer.renameLayerEffect(e.project,e.layout,e.layer,t,n)},onEffectsUpdated:function(){l(),h()}})]})},WC=function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getEventsFunctionsExtensionWriter()){e.next=3;break}throw new Error("The object can't be exported because it's not supported by the web-app.");case 3:return e.next=5,r.chooseCustomObjectFile(n.getName());case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,r.writeCustomObject(n,o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zC=function(){F.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/issues/new?assignees=&labels=%F0%9F%93%A6+Asset+Store+submission&template=--asset-store-submission.md&title=")},GC=function(e){var t=u.useContext(qr.Z);return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Export {0}",values:{0:e.object.getName()}}),secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/community/contribute-to-the-assets-store"},"help")],actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),keyboardFocused:!0,onClick:function(){e.onClose()}},"close")],open:!0,onRequestClose:function(){e.onClose()},maxWidth:"sm",children:(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can export the object to a file to submit it to the asset store."})})}),(0,f.jsxs)(C.ep,{children:[(0,f.jsx)(E.Z,{icon:(0,f.jsx)(fv,{}),primary:!0,label:(0,f.jsx)(c.Trans,{id:"Export to a file"}),onClick:function(){WC(t,e.object)}}),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Submit objects to the community"}),onClick:zC})]})]})})},YC=n.g.gd,qC=function(){function e(){(0,st.Z)(this,e),this.selection=[]}return(0,lt.Z)(e,[{key:"hasSelectedInstances",value:function(){return!!this.getSelectedInstances().length}},{key:"getSelectedInstances",value:function(){return this.selection}},{key:"isInstanceSelected",value:function(e){for(var t=0;t<this.selection.length;t++)if(YC.compare(this.selection[t],e))return!0;return!1}},{key:"clearSelection",value:function(){this.selection.length=0}},{key:"selectInstance",value:function(e){var t=e.instance,n=e.multiSelect,r=e.layersLocks,o=void 0===r?null:r,i=e.ignoreSeal;(void 0===i||!i)&&t.isSealed()||(this.isInstanceSelected(t)?n&&this.unselectInstance(t):(n||this.clearSelection(),o&&o[t.getLayer()]||this.selection.push(t)))}},{key:"selectInstances",value:function(e){var t=this,n=e.instances,r=e.multiSelect,o=e.layersLocks,i=void 0===o?null:o,a=e.ignoreSeal,s=void 0!==a&&a;r||this.clearSelection(),n.forEach((function(e){t.selectInstance({instance:e,multiSelect:!0,layersLocks:i,ignoreSeal:s})}))}},{key:"unselectInstance",value:function(e){if(this.isInstanceSelected(e)){for(var t=this.selection.length-1;t>=-1&&this.selection[t].ptr!==e.ptr;)--t;this.selection.splice(t,1)}}},{key:"unselectInstancesOfObject",value:function(e){for(var t=0;t<this.selection.length;)this.selection[t].getObjectName()===e?this.selection.splice(t,1):t++}},{key:"unselectInstancesOnLayer",value:function(e){for(var t=0;t<this.selection.length;)this.selection[t].getLayer()===e?this.selection.splice(t,1):t++}}]),e}(),XC=function(e){return 700/e},JC=function(e,t){return{grid:e.grid||!1,gridType:e.gridType||"rectangular",gridWidth:e.gridWidth||32,gridHeight:e.gridHeight||32,gridOffsetX:e.gridOffsetX||0,gridOffsetY:e.gridOffsetY||0,gridColor:void 0!==e.gridColor?e.gridColor:(0,er.Y9)(158,180,255),gridAlpha:void 0!==e.gridAlpha?e.gridAlpha:.8,snap:e.snap||!1,zoomFactor:Math.max(e.zoomFactor||XC(t),.01),windowMask:e.windowMask||!1}};function KC(e){var t=u.useState((function(){return t=e.instancesEditorSettings,(0,i.Z)({},t);var t})),n=(0,a.Z)(t,1)[0],r=function(){e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridWidth:n.gridWidth,gridHeight:n.gridHeight,gridOffsetX:n.gridOffsetX,gridOffsetY:n.gridOffsetY,gridColor:n.gridColor,gridType:n.gridType})),e.onCancel()};return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Edit Grid Options"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:r},"cancel"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:e.onApply},"apply")],onRequestClose:r,onApply:e.onApply,open:!0,maxWidth:"sm",exceptionallyStillAllowRenderingInstancesEditors:!0,children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(C.ep,{noMargin:!0,expand:!0,children:(0,f.jsx)($n.Z,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Line color"}),fullWidth:!0,color:(0,er.m0)(e.instancesEditorSettings.gridColor),alpha:e.instancesEditorSettings.gridAlpha,onChange:function(t,n){e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridColor:(0,er.UQ)(t),gridAlpha:void 0===n||null===n?1:n}))}})}),(0,f.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Cell width (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridWidth,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridWidth:Math.max(parseFloat(n),.01)}))}}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Cell height (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridHeight,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridHeight:Math.max(parseFloat(n),.01)}))}})]}),(0,f.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"X offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetX,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridOffsetX:parseFloat(n)}))}}),(0,f.jsx)(po.ZP,{floatingLabelText:(0,f.jsx)(c.Trans,{id:"Y offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetY,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridOffsetY:parseFloat(n)}))}})]}),(0,f.jsx)(C.ep,{noMargin:!0,expand:!0,children:(0,f.jsx)(Yn.Z,{checked:"isometric"===e.instancesEditorSettings.gridType,label:(0,f.jsx)(c.Trans,{id:"Isometric"}),onCheck:function(t,n){return e.onChangeInstancesEditorSettings((0,i.Z)((0,i.Z)({},e.instancesEditorSettings),{},{gridType:n?"isometric":"rectangular"}))}})})]})})}var QC=function(e){return(0,Eo.YZ)("OPEN_OBJECTS_PANEL",!0,{handler:e.toggleObjectsList}),(0,Eo.YZ)("OPEN_OBJECT_GROUPS_PANEL",!0,{handler:e.toggleObjectGroupsList}),(0,Eo.YZ)("OPEN_PROPERTIES_PANEL",!0,{handler:e.togglePropertiesPanel}),(0,Eo.YZ)("TOGGLE_INSTANCES_PANEL",!0,{handler:e.toggleInstancesList}),(0,Eo.YZ)("TOGGLE_LAYERS_PANEL",!0,{handler:e.toggleLayersList}),(0,Eo.YZ)("SCENE_EDITOR_UNDO",e.canUndo,{handler:e.undo}),(0,Eo.YZ)("SCENE_EDITOR_REDO",e.canRedo,{handler:e.redo}),(0,Eo.YZ)("DELETE_INSTANCES",e.canDeleteSelection,{handler:e.deleteSelection}),(0,Eo.YZ)("TOGGLE_WINDOW_MASK",!0,{handler:e.toggleWindowMask}),(0,Eo.YZ)("TOGGLE_GRID",!0,{handler:e.toggleGrid}),(0,Eo.YZ)("OPEN_SETUP_GRID",!0,{handler:e.setupGrid}),(0,Eo.YZ)("RENAME_SCENE_OBJECT",e.canRenameObject,{handler:e.onRenameObject}),null},$C=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6932 4.06562C11.8883 3.97813 12.1116 3.97813 12.3067 4.06562L19.5567 7.31562C19.8264 7.4365 19.9999 7.70448 19.9999 8C19.9999 8.29552 19.8264 8.5635 19.5567 8.68438L12.3067 11.9344C12.1116 12.0219 11.8883 12.0219 11.6932 11.9344L4.44315 8.68438C4.17348 8.5635 3.99994 8.29552 3.99994 8C3.99994 7.70448 4.17348 7.4365 4.44315 7.31562L11.6932 4.06562ZM6.58343 8L11.9999 10.4281L17.4165 8L11.9999 5.57191L6.58343 8Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.06556 15.6932C4.235 15.3152 4.67876 15.1462 5.05673 15.3156L11.9999 18.4281L18.9432 15.3156C19.3211 15.1462 19.7649 15.3152 19.9343 15.6932C20.1038 16.0712 19.9347 16.5149 19.5567 16.6844L12.3067 19.9344C12.1116 20.0219 11.8883 20.0219 11.6932 19.9344L4.44315 16.6844C4.06518 16.5149 3.89612 16.0712 4.06556 15.6932Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.2499 7.25C19.6642 7.25 19.9999 7.58579 19.9999 8V16C19.9999 16.4142 19.6642 16.75 19.2499 16.75C18.8357 16.75 18.4999 16.4142 18.4999 16V8C18.4999 7.58579 18.8357 7.25 19.2499 7.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.74994 7.25C5.16416 7.25 5.49994 7.58579 5.49994 8V16C5.49994 16.4142 5.16416 16.75 4.74994 16.75C4.33573 16.75 3.99994 16.4142 3.99994 16V8C3.99994 7.58579 4.33573 7.25 4.74994 7.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9999 10.75C12.4142 10.75 12.7499 11.0858 12.7499 11.5V19C12.7499 19.4142 12.4142 19.75 11.9999 19.75C11.5857 19.75 11.2499 19.4142 11.2499 19V11.5C11.2499 11.0858 11.5857 10.75 11.9999 10.75Z",fill:"currentColor"})]}))})),ey=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.818 1.86582C12.0132 1.77833 12.2364 1.77833 12.4316 1.86582L17.5566 4.16323C17.8263 4.28412 17.9998 4.55209 17.9998 4.84762C17.9998 5.14314 17.8263 5.41111 17.5566 5.532L12.4316 7.82941C12.2364 7.9169 12.0132 7.9169 11.818 7.82941L6.69303 5.532C6.42336 5.41111 6.24982 5.14314 6.24982 4.84762C6.24982 4.55209 6.42336 4.28412 6.69303 4.16323L11.818 1.86582ZM8.83331 4.84762L12.1248 6.32312L15.4163 4.84762L12.1248 3.37211L8.83331 4.84762Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.31544 10.196C6.48487 9.81802 6.92864 9.64897 7.30661 9.81841L12.1248 11.9783L16.943 9.81841C17.321 9.64897 17.7648 9.81802 17.9342 10.196C18.1036 10.574 17.9346 11.0177 17.5566 11.1872L12.4316 13.4846C12.2364 13.5721 12.0132 13.5721 11.818 13.4846L6.69303 11.1872C6.31505 11.0177 6.146 10.574 6.31544 10.196Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2498 4.09762C17.664 4.09762 17.9998 4.4334 17.9998 4.84762L17.9998 10.5028C17.9998 10.917 17.664 11.2528 17.2498 11.2528C16.8356 11.2528 16.4998 10.917 16.4998 10.5028V4.84762C16.4998 4.4334 16.8356 4.09762 17.2498 4.09762Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99982 4.09762C7.41403 4.09762 7.74982 4.4334 7.74982 4.84762V10.5028C7.74982 10.917 7.41403 11.2528 6.99982 11.2528C6.58561 11.2528 6.24982 10.917 6.24982 10.5028V4.84762C6.24982 4.4334 6.58561 4.09762 6.99982 4.09762Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1248 6.57175C12.539 6.57175 12.8748 6.90754 12.8748 7.32175V12.6235C12.8748 13.0377 12.539 13.3735 12.1248 13.3735C11.7106 13.3735 11.3748 13.0377 11.3748 12.6235V7.32175C11.3748 6.90754 11.7106 6.57175 12.1248 6.57175Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.818 9.86582C17.0132 9.77833 17.2364 9.77833 17.4316 9.86582L22.5566 12.1632C22.8263 12.2841 22.9998 12.5521 22.9998 12.8476C22.9998 13.1431 22.8263 13.4111 22.5566 13.532L17.4316 15.8294C17.2364 15.9169 17.0132 15.9169 16.818 15.8294L11.693 13.532C11.4234 13.4111 11.2498 13.1431 11.2498 12.8476C11.2498 12.5521 11.4234 12.2841 11.693 12.1632L16.818 9.86582ZM13.8333 12.8476L17.1248 14.3231L20.4163 12.8476L17.1248 11.3721L13.8333 12.8476Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3154 18.196C11.4849 17.818 11.9286 17.649 12.3066 17.8184L17.1248 19.9783L21.943 17.8184C22.321 17.649 22.7648 17.818 22.9342 18.196C23.1036 18.574 22.9346 19.0177 22.5566 19.1872L17.4316 21.4846C17.2364 21.5721 17.0132 21.5721 16.818 21.4846L11.693 19.1872C11.3151 19.0177 11.146 18.574 11.3154 18.196Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2498 12.0976C22.664 12.0976 22.9998 12.4334 22.9998 12.8476L22.9998 18.5028C22.9998 18.917 22.664 19.2528 22.2498 19.2528C21.8356 19.2528 21.4998 18.917 21.4998 18.5028V12.8476C21.4998 12.4334 21.8356 12.0976 22.2498 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9998 12.0976C12.414 12.0976 12.7498 12.4334 12.7498 12.8476V18.5028C12.7498 18.917 12.414 19.2528 11.9998 19.2528C11.5856 19.2528 11.2498 18.917 11.2498 18.5028V12.8476C11.2498 12.4334 11.5856 12.0976 11.9998 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1248 14.5718C17.539 14.5718 17.8748 14.9075 17.8748 15.3218V20.6235C17.8748 21.0377 17.539 21.3735 17.1248 21.3735C16.7106 21.3735 16.3748 21.0377 16.3748 20.6235V15.3218C16.3748 14.9075 16.7106 14.5718 17.1248 14.5718Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.81803 9.86582C7.0132 9.77833 7.23644 9.77833 7.43161 9.86582L12.5566 12.1632C12.8263 12.2841 12.9998 12.5521 12.9998 12.8476C12.9998 13.1431 12.8263 13.4111 12.5566 13.532L7.43161 15.8294C7.23644 15.9169 7.0132 15.9169 6.81803 15.8294L1.69303 13.532C1.42336 13.4111 1.24982 13.1431 1.24982 12.8476C1.24982 12.5521 1.42336 12.2841 1.69303 12.1632L6.81803 9.86582ZM3.83331 12.8476L7.12482 14.3231L10.4163 12.8476L7.12482 11.3721L3.83331 12.8476Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.31544 18.196C1.48487 17.818 1.92864 17.649 2.30661 17.8184L7.12482 19.9783L11.943 17.8184C12.321 17.649 12.7648 17.818 12.9342 18.196C13.1036 18.574 12.9346 19.0177 12.5566 19.1872L7.43161 21.4846C7.23644 21.5721 7.0132 21.5721 6.81803 21.4846L1.69303 19.1872C1.31505 19.0177 1.146 18.574 1.31544 18.196Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2498 12.0976C12.664 12.0976 12.9998 12.4334 12.9998 12.8476V18.5028C12.9998 18.917 12.664 19.2528 12.2498 19.2528C11.8356 19.2528 11.4998 18.917 11.4998 18.5028V12.8476C11.4998 12.4334 11.8356 12.0976 12.2498 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99982 12.0976C2.41403 12.0976 2.74982 12.4334 2.74982 12.8476V18.5028C2.74982 18.917 2.41403 19.2528 1.99982 19.2528C1.58561 19.2528 1.24982 18.917 1.24982 18.5028V12.8476C1.24982 12.4334 1.58561 12.0976 1.99982 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12482 14.5718C7.53903 14.5718 7.87482 14.9075 7.87482 15.3218V20.6235C7.87482 21.0377 7.53903 21.3735 7.12482 21.3735C6.71061 21.3735 6.37482 21.0377 6.37482 20.6235V15.3218C6.37482 14.9075 6.71061 14.5718 7.12482 14.5718Z",fill:"currentColor"})]}))})),ty=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.96967 8.46967C5.26256 8.17678 5.73744 8.17678 6.03033 8.46967L8.53033 10.9697C8.82322 11.2626 8.82322 11.7374 8.53033 12.0303L6.03033 14.5303C5.73744 14.8232 5.26256 14.8232 4.96967 14.5303L2.46967 12.0303C2.17678 11.7374 2.17678 11.2626 2.46967 10.9697L4.96967 8.46967ZM4.06066 11.5L5.5 12.9393L6.93934 11.5L5.5 10.0607L4.06066 11.5Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H12C11.5858 7.75 11.25 7.41421 11.25 7C11.25 6.58579 11.5858 6.25 12 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 17C21.75 17.4142 21.4142 17.75 21 17.75H12C11.5858 17.75 11.25 17.4142 11.25 17C11.25 16.5858 11.5858 16.25 12 16.25H21C21.4142 16.25 21.75 16.5858 21.75 17Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H12C11.5858 12.75 11.25 12.4142 11.25 12C11.25 11.5858 11.5858 11.25 12 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12Z",fill:"currentColor"})]}))})),ny=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6646 3.32918C11.8758 3.22361 12.1243 3.22361 12.3355 3.32918L20.3355 7.32918C20.5895 7.45622 20.75 7.71592 20.75 8C20.75 8.28408 20.5895 8.54378 20.3355 8.67082L12.3355 12.6708C12.1243 12.7764 11.8758 12.7764 11.6646 12.6708L3.66463 8.67082C3.41054 8.54378 3.25004 8.28408 3.25004 8C3.25004 7.71592 3.41054 7.45622 3.66463 7.32918L11.6646 3.32918ZM5.67709 8L12 11.1615L18.323 8L12 4.83853L5.67709 8Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.32922 15.6646C3.51446 15.2941 3.96497 15.1439 4.33545 15.3292L12 19.1615L19.6646 15.3292C20.0351 15.1439 20.4856 15.2941 20.6709 15.6646C20.8561 16.0351 20.7059 16.4856 20.3355 16.6708L12.3355 20.6708C12.1243 20.7764 11.8758 20.7764 11.6646 20.6708L3.66463 16.6708C3.29415 16.4856 3.14398 16.0351 3.32922 15.6646Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.32922 11.6646C3.51446 11.2941 3.96497 11.1439 4.33545 11.3292L12 15.1615L19.6646 11.3292C20.0351 11.1439 20.4856 11.2941 20.6709 11.6646C20.8561 12.0351 20.7059 12.4856 20.3355 12.6708L12.3355 16.6708C12.1243 16.7764 11.8758 16.7764 11.6646 16.6708L3.66463 12.6708C3.29415 12.4856 3.14398 12.0351 3.32922 11.6646Z",fill:"currentColor"})]}))})),ry=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.25C8.41421 3.25 8.75 3.58579 8.75 4V20C8.75 20.4142 8.41421 20.75 8 20.75C7.58579 20.75 7.25 20.4142 7.25 20V4C7.25 3.58579 7.58579 3.25 8 3.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 3.25C16.4142 3.25 16.75 3.58579 16.75 4V20C16.75 20.4142 16.4142 20.75 16 20.75C15.5858 20.75 15.25 20.4142 15.25 20V4C15.25 3.58579 15.5858 3.25 16 3.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.75 8C20.75 8.41421 20.4142 8.75 20 8.75L4 8.75C3.58579 8.75 3.25 8.41421 3.25 8C3.25 7.58579 3.58579 7.25 4 7.25L20 7.25C20.4142 7.25 20.75 7.58579 20.75 8Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.75 16C20.75 16.4142 20.4142 16.75 20 16.75L4 16.75C3.58579 16.75 3.25 16.4142 3.25 16C3.25 15.5858 3.58579 15.25 4 15.25L20 15.25C20.4142 15.25 20.75 15.5858 20.75 16Z",fill:"currentColor"})]}))})),oy=n(87199),iy=function(e){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(QC,{toggleObjectsList:e.toggleObjectsList,toggleObjectGroupsList:e.toggleObjectGroupsList,togglePropertiesPanel:e.toggleProperties,toggleInstancesList:e.toggleInstancesList,toggleLayersList:e.toggleLayersList,undo:e.undo,canUndo:e.canUndo,redo:e.redo,canRedo:e.canRedo,deleteSelection:e.deleteSelection,toggleWindowMask:e.toggleWindowMask,toggleGrid:e.toggleGrid,setupGrid:e.openSetupGrid,canDeleteSelection:0!==e.instancesSelection.getSelectedInstances().length,canRenameObject:e.canRenameObject,onRenameObject:e.onRenameObject}),(0,f.jsxs)(b,{lastChild:!0,children:[(0,f.jsx)(A.Z,{size:"small",color:"default",id:"toolbar-open-objects-panel-button",onClick:e.toggleObjectsList,selected:e.isObjectsListShown,tooltip:e.isObjectsListShown?{id:"Close Objects Panel"}:{id:"Open Objects Panel"},children:(0,f.jsx)($C,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",id:"toolbar-open-object-groups-panel-button",onClick:e.toggleObjectGroupsList,selected:e.isObjectGroupsListShown,tooltip:e.isObjectGroupsListShown?{id:"Close Object Groups Panel"}:{id:"Open Object Groups Panel"},children:(0,f.jsx)(ey,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",id:"toolbar-open-properties-panel-button",onClick:e.toggleProperties,selected:e.isPropertiesShown,tooltip:e.isPropertiesShown?{id:"Close Properties Panel"}:{id:"Open Properties Panel"},children:(0,f.jsx)(Pt.Z,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",id:"toolbar-open-instances-list-panel-button",onClick:e.toggleInstancesList,selected:e.isInstancesListShown,tooltip:e.isInstancesListShown?{id:"Close Instances List Panel"}:{id:"Open Instances List Panel"},children:(0,f.jsx)(ty,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",id:"toolbar-open-layers-panel-button",onClick:e.toggleLayersList,selected:e.isLayersListShown,tooltip:e.isLayersListShown?{id:"Close Layers Panel"}:{id:"Open Layers Panel"},children:(0,f.jsx)(ny,{})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",color:"default",tooltip:{id:"Toggle/edit grid"},children:(0,f.jsx)(ry,{})}),buildMenuTemplate:function(t){return[{type:"checkbox",label:t._({id:"Show Mask"}),checked:e.isWindowMaskShown(),click:function(){return e.toggleWindowMask()}},{type:"checkbox",label:t._({id:"Show grid"}),checked:e.isGridShown(),click:function(){return e.toggleGrid()}},{type:"separator"},{label:t._({id:"Setup grid"}),click:function(){return e.openSetupGrid()}}]}}),(0,f.jsx)(Pg,{}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.undo,disabled:!e.canUndo,tooltip:{id:"Undo the last changes"},children:(0,f.jsx)(de,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.redo,disabled:!e.canRedo,tooltip:{id:"Redo the last changes"},children:(0,f.jsx)(In,{})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",color:"default",tooltip:{id:"Change editor zoom"},children:(0,f.jsx)(oy.Z,{})}),buildMenuTemplate:function(t){return[].concat((0,j.Z)(e.getContextMenuZoomItems(t)),[{type:"separator"},{label:"5%",click:function(){return e.setZoomFactor(.05)}},{label:"10%",click:function(){return e.setZoomFactor(.1)}},{label:"25%",click:function(){return e.setZoomFactor(.25)}},{label:"50%",click:function(){return e.setZoomFactor(.5)}},{label:"100%",click:function(){return e.setZoomFactor(1)}},{label:"150%",click:function(){return e.setZoomFactor(1.5)}},{label:"200%",click:function(){return e.setZoomFactor(2)}},{label:"400%",click:function(){return e.setZoomFactor(4)}}])}}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.deleteSelection,disabled:!e.instancesSelection.getSelectedInstances().length,tooltip:{id:"Delete the selected instances from the scene"},children:(0,f.jsx)(Dn.Z,{})}),e.onOpenSettings&&(0,f.jsx)(Pg,{}),e.onOpenSettings&&(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.onOpenSettings,tooltip:{id:"Open settings"},children:e.settingsIcon||(0,f.jsx)(Og,{})})]})]})},ay=function(e){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(QC,{toggleObjectsList:e.toggleObjectsList,toggleObjectGroupsList:e.toggleObjectGroupsList,togglePropertiesPanel:e.toggleProperties,toggleInstancesList:e.toggleInstancesList,toggleLayersList:e.toggleLayersList,undo:e.undo,canUndo:e.canUndo,redo:e.redo,canRedo:e.canRedo,deleteSelection:e.deleteSelection,toggleWindowMask:e.toggleWindowMask,toggleGrid:e.toggleGrid,setupGrid:e.openSetupGrid,canDeleteSelection:0!==e.instancesSelection.getSelectedInstances().length,canRenameObject:e.canRenameObject,onRenameObject:e.onRenameObject}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.undo,disabled:!e.canUndo,tooltip:{id:"Undo the last changes"},children:(0,f.jsx)(de,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.redo,disabled:!e.canRedo,tooltip:{id:"Redo the last changes"},children:(0,f.jsx)(In,{})}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",color:"default",tooltip:{id:"Change editor zoom"},children:(0,f.jsx)(oy.Z,{})}),buildMenuTemplate:function(t){return[].concat((0,j.Z)(e.getContextMenuZoomItems(t)),[{type:"separator"},{label:"5%",click:function(){return e.setZoomFactor(.05)}},{label:"10%",click:function(){return e.setZoomFactor(.1)}},{label:"25%",click:function(){return e.setZoomFactor(.25)}},{label:"50%",click:function(){return e.setZoomFactor(.5)}},{label:"100%",click:function(){return e.setZoomFactor(1)}},{label:"150%",click:function(){return e.setZoomFactor(1.5)}},{label:"200%",click:function(){return e.setZoomFactor(2)}},{label:"400%",click:function(){return e.setZoomFactor(4)}}])}}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.deleteSelection,disabled:!e.instancesSelection.getSelectedInstances().length,tooltip:{id:"Delete the selected instances from the scene"},children:(0,f.jsx)(Dn.Z,{})}),(0,f.jsx)(Pg,{}),(0,f.jsxs)(b,{lastChild:!0,children:[(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",color:"default",tooltip:{id:"Toggle/edit grid"},children:(0,f.jsx)(ry,{})}),buildMenuTemplate:function(t){return[{type:"checkbox",label:t._({id:"Show Mask"}),checked:e.isWindowMaskShown(),click:function(){return e.toggleWindowMask()}},{type:"checkbox",label:t._({id:"Show grid"}),checked:e.isGridShown(),click:function(){return e.toggleGrid()}},{type:"separator"},{label:t._({id:"Setup grid"}),click:function(){return e.openSetupGrid()}}]}}),(0,f.jsx)(Pg,{}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:e.onOpenSettings,tooltip:{id:"Open settings"},children:e.settingsIcon||(0,f.jsx)(Og,{})})]})]})},sy=n(95562),ly=function(e,t,n,r){return Ec(e,t).containerObjectsList.map((function(t){return{text:t.object.getName(),handler:function(){return n(t.object,r)},iconSrc:Oc.Z.getThumbnail.bind(Oc.Z)(e,t.object.getConfiguration())}}))},cy=function(e){var t=e.project,n=e.layout,r=e.onEditObject,o=e.onEditObjectVariables;(0,Eo.gT)("EDIT_OBJECT",!0,{generateOptions:u.useCallback((function(){return ly(t,n,r)}),[t,n,r])}),(0,Eo.gT)("EDIT_OBJECT_BEHAVIORS",!0,{generateOptions:u.useCallback((function(){return ly(t,n,r,"behaviors")}),[t,n,r])}),(0,Eo.gT)("EDIT_OBJECT_EFFECTS",!0,{generateOptions:u.useCallback((function(){return ly(t,n,r,"effects")}),[t,n,r])}),(0,Eo.gT)("EDIT_OBJECT_VARIABLES",!0,{generateOptions:u.useCallback((function(){return ly(t,n,o)}),[t,n,o])})},uy=function(e){var t=e.project,n=e.layout,r=e.onEditObjectGroup;(0,Eo.gT)("EDIT_OBJECT_GROUP",!0,{generateOptions:u.useCallback((function(){return[].concat((0,j.Z)(Ac(n.getObjectGroups())),(0,j.Z)(Ac(t.getObjectGroups()))).map((function(e){return{text:e.getName(),handler:function(){return r(e)}}}))}),[r,t,n])})},dy=function(e){var t=e.layout,n=e.onEditLayerEffects,r=e.onEditLayer;(0,Eo.gT)("EDIT_LAYER_EFFECTS",!0,{generateOptions:u.useCallback((function(){var e=t.getLayersCount();return(0,Nt.mapReverseFor)(0,e,(function(e){var r=t.getLayerAt(e);return{text:r.getName()||"Base layer",handler:function(){return n(r)}}}))}),[t,n])}),(0,Eo.gT)("EDIT_LAYER",!0,{generateOptions:u.useCallback((function(){var e=t.getLayersCount();return(0,Nt.mapReverseFor)(0,e,(function(e){var n=t.getLayerAt(e);return{text:n.getName()||"Base layer",handler:function(){return r(n)}}}))}),[t,r])})},py=function(e){var t=e.project,n=e.layout,r=e.onEditObject,o=e.onEditObjectVariables,i=e.onOpenSceneProperties,a=e.onOpenSceneVariables,s=e.onEditObjectGroup,l=e.onEditLayerEffects,c=e.onEditLayer;return(0,Eo.YZ)("OPEN_SCENE_PROPERTIES",!0,{handler:i}),(0,Eo.YZ)("OPEN_SCENE_VARIABLES",!0,{handler:a}),cy({project:t,layout:n,onEditObject:r,onEditObjectVariables:o}),uy({project:t,layout:n,onEditObjectGroup:s}),dy({layout:n,onEditLayerEffects:l,onEditLayer:c}),null},hy=n(58247),fy=n(22537),gy=function(e){for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);if(n.isLightingLayer())return n}return null},my={"Lighting::LightObject":{onObjectAdded:function(e,t,n){if(null===gy(t)){var r=(0,Ut.Z)("Lighting",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(r,t.getLayersCount());var o=t.getLayer("Lighting");o.setLightingLayer(!0),o.setFollowBaseLayerCamera(!0),o.setAmbientLightColor(128,128,128)}},onInstanceAdded:function(e,t,n){var r=gy(t);r&&e.setLayer(r.getName())},getInfoBarDetails:function(e){return"onObjectAdded"===e?{identifier:"automatic-lighting-layer",message:{id:"A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer"},touchScreenMessage:{id:"A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer"}}:"onInstanceAdded"===e?{identifier:"object-moved-in-lighting-layer",message:{id:"The light object was automatically placed on the Lighting layer."},touchScreenMessage:{id:"The light object was automatically placed on the Lighting layer."}}:null}}},xy=n(5675),vy=n(22087),by=n(79916),jy=n(87080),Cy=function(){function e(t){var n=this,r=t.initialViewX,o=t.initialViewY,i=t.width,a=t.height,s=t.instancesEditorSettings;(0,st.Z)(this,e),this.viewX=0,this.viewY=0,this._pixiContainer=new jy.Container,this.toSceneCoordinates=function(e,t){e-=n._width/2,t-=n._height/2,e/=Math.abs(n.instancesEditorSettings.zoomFactor),t/=Math.abs(n.instancesEditorSettings.zoomFactor);var r=e;return e=Math.cos(0*Math.PI)*e-Math.sin(0*Math.PI)*t,t=Math.sin(0*Math.PI)*r+Math.cos(0*Math.PI)*t,[e+n.viewX,t+n.viewY]},this.toSceneScale=function(e){return 0===n.instancesEditorSettings.zoomFactor?e:e/Math.abs(n.instancesEditorSettings.zoomFactor)},this.toCanvasCoordinates=function(e,t){e-=n.viewX,t-=n.viewY;var r=e;return e=Math.cos(-0*Math.PI)*e-Math.sin(-0*Math.PI)*t,t=Math.sin(-0*Math.PI)*r+Math.cos(-0*Math.PI)*t,e*=Math.abs(n.instancesEditorSettings.zoomFactor),t*=Math.abs(n.instancesEditorSettings.zoomFactor),[e+n._width/2,t+n._height/2]},this.viewX=r,this.viewY=o,this.instancesEditorSettings=s,this.resize(i,a)}return(0,lt.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"resize",value:function(e,t){this._width=e,this._height=t}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"containsPoint",value:function(e,t){var n=this.toCanvasCoordinates(e,t);return 0<=n[0]&&n[0]<=this._width&&0<=n[1]&&n[1]<=this._height}},{key:"scrollBy",value:function(e,t){this.viewX+=e,this.viewY+=t}},{key:"scrollTo",value:function(e,t){this.viewX=e,this.viewY=t}},{key:"fitToRectangle",value:function(e){this.viewX=e.centerX(),this.viewY=e.centerY();var t=this._width/e.width(),n=this._height/e.height();return.95*Math.min(t,n)}},{key:"getViewX",value:function(){return this.viewX}},{key:"getViewY",value:function(){return this.viewY}},{key:"applyTransformationToPixi",value:function(e){e.position.x=-this.viewX*this.instancesEditorSettings.zoomFactor,e.position.y=-this.viewY*this.instancesEditorSettings.zoomFactor,e.position.x+=this._width/2,e.position.y+=this._height/2,e.scale.x=this.instancesEditorSettings.zoomFactor,e.scale.y=this.instancesEditorSettings.zoomFactor}},{key:"applyTransformationToThree",value:function(e,t){e.aspect=this._width/this._height;var n=this.instancesEditorSettings.zoomFactor;e.position.x=this.viewX,e.position.y=-this.viewY,e.rotation.z=0;var r=by.Z.toRad(e.fov),o=.5*this._height/n/Math.tan(.5*r);e.position.z=o,e.far=o+2e3,e.updateProjectionMatrix(),t.scale.x=this._width/n,t.scale.y=this._height/n,t.position.x=e.position.x,t.position.y=-e.position.y,t.rotation.z=0}}]),e}(),yy=n(46564),Zy=function(e){if(!e)return!1;var t=e.targetTouches;return t&&t.length>=2},ky=(0,lt.Z)((function e(t){var n=this,r=t.canvas,o=t.setZoomFactor,i=t.getZoomFactor,a=t.viewPosition;(0,st.Z)(this,e),this._lastPinchCenterX=null,this._lastPinchCenterY=null,this._startPinch=function(){},this._onPinchMove=function(e,t,r){if(null===n._lastPinchCenterX||null===n._lastPinchCenterY)return n._lastPinchCenterX=e,void(n._lastPinchCenterY=t);var o=e-n._lastPinchCenterX,i=t-n._lastPinchCenterY,a=o/n._getZoomFactor(),s=i/n._getZoomFactor();n._viewPosition.scrollBy(-a,-s),n._lastPinchCenterX=e,n._lastPinchCenterY=t,n._setZoomFactor(n._getZoomFactor()*r)},this._endPinch=function(){n._lastPinchCenterX=null,n._lastPinchCenterY=null},this.unmount=function(){n._unregisterCanvasPinchDetector()},this._setZoomFactor=o,this._getZoomFactor=i,this._viewPosition=a,this._unregisterCanvasPinchDetector=function(e){var t=e.canvas,n=e.onPinchStart,r=e.onPinchMove,o=e.onPinchEnd,i=null;function a(){t.addEventListener("touchmove",s)}function s(e){if(Zy(e)){var t=e.targetTouches,o=t[0].clientX-t[1].clientX,a=t[0].clientY-t[1].clientY,s=Math.sqrt(o*o+a*a);if(!i)return i={p:{distance:s,date:new Date}},void n();var l=new Date;if(!(l-i.p.date<12)){var c={x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2},u=s/i.p.distance;r(c.x,c.y,u),i.p={distance:s,date:l}}}}function l(e){t.removeEventListener("touchmove",s),i&&(o(),i=null)}return t.addEventListener("touchstart",a),t.addEventListener("touchend",l),function(){t.removeEventListener("touchstart",a),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",l)}}({canvas:r,onPinchStart:this._startPinch,onPinchMove:this._onPinchMove,onPinchEnd:this._endPinch})})),wy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,st.Z)(this,e),this.left=t,this.top=n,this.right=r,this.bottom=o}return(0,lt.Z)(e,[{key:"set",value:function(e){var t=e.left,n=e.top,r=e.right,o=e.bottom;this.left=t,this.top=n,this.right=r,this.bottom=o}},{key:"setThroughCenter",value:function(e){var t=e.centerX,n=e.centerY,r=e.width,o=e.height;this.set({left:t-r/2,top:n-o/2,right:t+r/2,bottom:n+o/2})}},{key:"setRectangle",value:function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom}},{key:"width",value:function(){return this.right-this.left}},{key:"height",value:function(){return this.bottom-this.top}},{key:"centerX",value:function(){return(this.left+this.right)/2}},{key:"centerY",value:function(){return(this.top+this.bottom)/2}},{key:"union",value:function(e){e.left<this.left&&(this.left=e.left),e.top<this.top&&(this.top=e.top),e.right>this.right&&(this.right=e.right),e.bottom>this.bottom&&(this.bottom=e.bottom)}},{key:"containsPoint",value:function(e,t){return this.left<=e&&this.right>e&&this.bottom>t&&this.top<=t}},{key:"toCSSPosition",value:function(){return{top:this.top,left:this.left,width:this.width(),height:this.height()}}},{key:"toString",value:function(){return"["+this.left+" -> "+this.right+" ; "+this.top+" -> "+this.bottom+"]"}}],[{key:"fromDOMRect",value:function(e){return new this(e.left,e.top,e.right,e.bottom)}}]),e}();var Ty=n(77672),Ey=n.g.gd,Sy=function(){function e(t){var n=this,r=t.project,o=t.layout,i=t.layer,a=t.viewPosition,s=t.instances,l=t.onInstanceClicked,c=t.onInstanceRightClicked,u=t.onInstanceDoubleClicked,d=t.onOverInstance,p=t.onOutInstance,h=t.onMoveInstance,f=t.onMoveInstanceEnd,g=t.onDownInstance,m=t.pixiRenderer,x=t.showObjectInstancesIn3D;(0,st.Z)(this,e),this.renderedInstances={},this.wasUsed=!1,this._temporaryRectangle=new wy,this._temporaryRectanglePath=[[0,0],[0,0],[0,0],[0,0]],this._renderTexture=null,this._oldWidth=null,this._oldHeight=null,this._threeGroup=null,this._threeScene=null,this._threeCamera=null,this._threePlaneTexture=null,this._threePlaneGeometry=null,this._threePlaneMaterial=null,this._threePlaneMesh=null,this.getUnrotatedInstanceLeft=function(e){return e.getX()-(n.renderedInstances[e.ptr]?n.renderedInstances[e.ptr].getOriginX():0)},this.getUnrotatedInstanceTop=function(e){return e.getY()-(n.renderedInstances[e.ptr]?n.renderedInstances[e.ptr].getOriginY():0)},this.getUnrotatedInstanceSize=function(e){var t=n.renderedInstances[e.ptr],r=e.hasCustomSize(),o=e.hasCustomDepth();return[r?e.getCustomWidth():t?t.getDefaultWidth():0,r?e.getCustomHeight():t?t.getDefaultHeight():0,o?e.getCustomDepth():t?t.getDefaultDepth():0]},this.getRendererOfInstance=function(e){var t=n.renderedInstances[e.ptr];if(void 0===t){var r=e.getObjectName(),o=Fc(n.project,n.layout,r);if(!o)return null;(t=n.renderedInstances[e.ptr]=Oc.Z.createNewInstanceRenderer(n.project,n.layout,e,o.getConfiguration(),n.pixiContainer,n._threeGroup))._pixiObject.interactive=!0,vy.Z.panable(t._pixiObject),function(e){var t=0,n=0,r=0,o=function(o){var i=o.data.global,a=i.x,s=i.y,l=Date.now();l-t<500&&Math.abs(a-n)<=10&&Math.abs(s-r)<=10&&setTimeout((function(){e.emit("doubleclick",o)})),t=l,n=a,r=s};e.interactive=!0,e.on("click",o),e.on("touchend",o)}(t._pixiObject),t._pixiObject.on("click",(function(t){0===t.data.originalEvent.button&&n.onInstanceClicked(e)})),t._pixiObject.on("doubleclick",(function(){n.onInstanceDoubleClicked(e)})),t._pixiObject.on("mouseover",(function(){n.onOverInstance(e)})),t._pixiObject.on("mousedown",(function(t){if(0===t.data.originalEvent.button){var r=t.data.global,o=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onDownInstance(e,o[0],o[1])}})),t._pixiObject.on("rightclick",(function(t){var r=t.data,o=r.global,i=r.originalEvent,a=n.viewPosition.toSceneCoordinates(o.x,o.y);return n.onDownInstance(e,a[0],a[1]),n.onInstanceRightClicked&&n.onInstanceRightClicked({offsetX:i.offsetX,offsetY:i.offsetY,x:i.clientX,y:i.clientY}),!1})),t._pixiObject.on("touchstart",(function(t){if(Zy(t.data&&t.data.originalEvent))return null;var r=t.data.global,o=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onDownInstance(e,o[0],o[1])})),t._pixiObject.on("mouseout",(function(){n.onOutInstance(e)})),t._pixiObject.on("panmove",(function(t){if(Zy(t.data&&t.data.originalEvent))return null;n.onMoveInstance(e,t.deltaX,t.deltaY)})),t._pixiObject.on("panend",(function(e){n.onMoveInstanceEnd()}))}return t},this.project=r,this.instances=s,this.layout=o,this.layer=i,this.viewPosition=a,this.onInstanceClicked=l,this.onInstanceRightClicked=c,this.onInstanceDoubleClicked=u,this.onOverInstance=d,this.onOutInstance=p,this.onMoveInstance=h,this.onMoveInstanceEnd=f,this.onDownInstance=g,this.viewTopLeft=[0,0],this.viewBottomRight=[0,0],this.pixiContainer=new jy.Container,this._showObjectInstancesIn3D=x,this.instancesRenderer=new Ey.InitialInstanceJSFunctor,this.instancesRenderer.invoke=function(e){var t=Ey.wrapPointer(e,Ey.InitialInstance),r=n.getRendererOfInstance(t);if(r){var o=r.getPixiObject();o&&(o.zOrder=t.getZOrder());var i=n._isInstanceVisible(t);if(o&&(o.visible=i,o.interactive=!(n.layer.isLocked()||t.isLocked()&&t.isSealed())),i&&r.update(),r instanceof Ty.Z){var a=r.getThreeObject();n._threeGroup&&a&&n._threeGroup.add(a)}r.wasUsed=!0}},this._showObjectInstancesIn3D&&this._setup3dRendering(m)}return(0,lt.Z)(e,[{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"getThreeScene",value:function(){return this._threeScene}},{key:"getThreeCamera",value:function(){return this._threeCamera}},{key:"getThreePlaneMesh",value:function(){return this._threePlaneMesh}},{key:"getUnrotatedInstanceAABB",value:function(e,t){var n=this.getUnrotatedInstanceSize(e),r=this.getUnrotatedInstanceLeft(e),o=this.getUnrotatedInstanceTop(e),i=r+n[0],a=o+n[1];return t.set({left:r,top:o,right:i,bottom:a}),t}},{key:"_getInstanceRotatedRectangle",value:function(e){var t=this.getUnrotatedInstanceSize(e),n=this.getUnrotatedInstanceLeft(e),r=this.getUnrotatedInstanceTop(e),o=n+t[0],i=r+t[1],a=this._temporaryRectanglePath;a[0][0]=n,a[0][1]=r,a[1][0]=n,a[1][1]=i,a[2][0]=o,a[2][1]=i,a[3][0]=o,a[3][1]=r;var s=void 0,l=void 0;return this.renderedInstances[e.ptr]&&(s=n+this.renderedInstances[e.ptr].getCenterX(),l=r+this.renderedInstances[e.ptr].getCenterY()),void 0!==s&&void 0!==l||(s=(a[0][0]+a[2][0])/2,l=(a[0][1]+a[2][1])/2),function(e,t,n,r){for(var o=Math.cos(-r),i=Math.sin(-r),a=0,s=e.length;a<s;++a){var l=e[a][0]-t,c=e[a][1]-n;e[a][0]=t+l*o+c*i,e[a][1]=n-l*i+c*o}}(a,s,l,e.getAngle()*Math.PI/180),a}},{key:"getInstanceAABB",value:function(e,t){if(0===e.getAngle()*Math.PI/180)return this.getUnrotatedInstanceAABB(e,t);for(var n=this._getInstanceRotatedRectangle(e),r=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=Number.MAX_VALUE,a=-Number.MAX_VALUE,s=0,l=n.length;s<l;++s)r=Math.min(r,n[s][0]),o=Math.max(o,n[s][0]),i=Math.min(i,n[s][1]),a=Math.max(a,n[s][1]);return t.set({left:r,top:i,right:o,bottom:a}),t}},{key:"_isInstanceVisible",value:function(e){var t=this.getInstanceAABB(e,this._temporaryRectangle);return!(t.left+t.width()<this.viewTopLeft[0]||t.top+t.height()<this.viewTopLeft[1]||t.left>this.viewBottomRight[0]||t.top>this.viewBottomRight[1])}},{key:"_computeViewBounds",value:function(){var e=100;this.viewTopLeft=this.viewPosition.toSceneCoordinates(-100,-100),this.viewBottomRight=this.viewPosition.toSceneCoordinates(this.viewPosition.getWidth()+e,this.viewPosition.getHeight()+e)}},{key:"render",value:function(){this._computeViewBounds(),this.instances.iterateOverInstancesWithZOrdering(this.instancesRenderer,this.layer.getName()),this._updatePixiObjectsZOrder(),this._updateVisibility(),this._destroyUnusedInstanceRenderers()}},{key:"_setup3dRendering",value:function(e){if(this._threeScene||this._threeGroup||this._threeCamera)throw new Error("Tried to setup 3D rendering for a layer that is already set up.");var t=new yy.Scene;this._threeScene=t,t.scale.y=-1,this._threeGroup=new yy.Group,t.add(this._threeGroup);var n=new yy.PerspectiveCamera(45,1,.1,2e3);if(n.rotation.order="ZYX",this._threeCamera=n,this._renderTexture||this._threePlaneGeometry||this._threePlaneMaterial||this._threePlaneTexture||this._threePlaneMesh)throw new Error("Tried to setup PixiJS plane for 2D rendering in 3D for a layer that is already set up.");this._createPixiRenderTexture(e);var r=new Uint8Array(4),o=new yy.DataTexture(r,1,1);o.needsUpdate=!0,this._threePlaneTexture=o,o.generateMipmaps=!1;var i="nearest"===this.project.getScaleMode()?yy.NearestFilter:yy.LinearFilter;o.minFilter=i,o.magFilter=i,o.wrapS=yy.ClampToEdgeWrapping,o.wrapT=yy.ClampToEdgeWrapping;var a=new yy.PlaneGeometry(1,1);this._threePlaneGeometry=a;var s={vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform sampler2D map;\n        varying vec2 vUv;\n        void main() {\n          vec4 texel = texture2D(map, vUv);\n          gl_FragColor = texel;\n        }\n      ",uniforms:{map:{value:this._threePlaneTexture}},side:yy.FrontSide,transparent:!0},l=new yy.ShaderMaterial(s);this._threePlaneMaterial=l;var c=new yy.Mesh(a,l);t.add(c),this._threePlaneMesh=c}},{key:"_createPixiRenderTexture",value:function(e){if(e&&e.type===jy.RENDERER_TYPE.WEBGL)if(this._renderTexture)console.error("Tried to create a PixiJS RenderTexture for a layer that already has one.");else{this._oldWidth=e.screen.width,this._oldHeight=e.screen.height;var t=this._oldWidth,n=this._oldHeight,r=e.resolution;this._renderTexture=jy.RenderTexture.create({width:t,height:n,resolution:r}),this._renderTexture.baseTexture.scaleMode=jy.SCALE_MODES.LINEAR,console.info("RenderTexture created for layer ".concat(this.layer.getName(),"."))}}},{key:"renderOnPixiRenderTexture",value:function(e){if(this._renderTexture){this._oldWidth===e.screen.width&&this._oldHeight===e.screen.height||(this._renderTexture.resize(e.screen.width,e.screen.height),this._oldWidth=e.screen.width,this._oldHeight=e.screen.height);var t=e.renderTexture.current,n=e.renderTexture.sourceFrame;e.renderTexture.bind(this._renderTexture),e.renderTexture.clear([0,0,0,0]),e.render(this.pixiContainer,{renderTexture:this._renderTexture,clear:!1}),e.renderTexture.bind(t,n,void 0)}}},{key:"updateThreePlaneTextureFromPixiRenderTexture",value:function(e,t){if(this._threePlaneTexture&&this._renderTexture){var n=this._renderTexture.baseTexture._glTextures[t.CONTEXT_UID];if(n)e.properties.get(this._threePlaneTexture).__webglTexture=n.texture}}},{key:"_updatePixiObjectsZOrder",value:function(){this.pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"_updateVisibility",value:function(){var e=this.layer.getVisibility();this.pixiContainer.visible=e,this._threeScene&&(this._threeScene.visible=e)}},{key:"resetInstanceRenderersFor",value:function(e){for(var t in this.renderedInstances){var n=Number(t);if(this.renderedInstances.hasOwnProperty(n)){var r=this.renderedInstances[n];r.getInstance().getObjectName()===e&&(r.onRemovedFromScene(),delete this.renderedInstances[n])}}}},{key:"_destroyUnusedInstanceRenderers",value:function(){for(var e in this.renderedInstances){var t=Number(e);if(this.renderedInstances.hasOwnProperty(t)){var n=this.renderedInstances[t];n.wasUsed?n.wasUsed=!1:(n.onRemovedFromScene(),delete this.renderedInstances[t])}}}},{key:"delete",value:function(){for(var e in this.renderedInstances){var t=Number(e);if(this.renderedInstances.hasOwnProperty(t))this.renderedInstances[t].onRemovedFromScene(),delete this.renderedInstances[t]}this.pixiContainer.destroy(),this.instancesRenderer.delete()}}]),e}(),Py=function(){function e(t){var n=this,r=t.project,o=t.layout,i=t.instances,a=t.viewPosition,s=t.onInstanceClicked,l=t.onInstanceRightClicked,c=t.onInstanceDoubleClicked,u=t.onOverInstance,d=t.onOutInstance,p=t.onMoveInstance,h=t.onMoveInstanceEnd,f=t.onDownInstance,g=t.showObjectInstancesIn3D;(0,st.Z)(this,e),this.project=r,this.instances=i,this.layout=o,this.viewPosition=a,this.onInstanceClicked=s,this.onInstanceRightClicked=l,this.onInstanceDoubleClicked=c,this.onOverInstance=u,this.onOutInstance=d,this.onMoveInstance=p,this.onMoveInstanceEnd=h,this.onDownInstance=f,this._showObjectInstancesIn3D=g,this.layersRenderers={},this.pixiContainer=new jy.Container,this.pixiContainer.alpha=0,this.temporaryRectangle=new wy,this.instanceMeasurer={getInstanceAABB:function(e,t){var r=e.getLayer(),o=n.layersRenderers[r];return o?o.getInstanceAABB(e,t):(t.left=e.getX(),t.top=e.getY(),t.right=e.getX(),t.bottom=e.getY(),t)},getUnrotatedInstanceAABB:function(e,t){var r=e.getLayer(),o=n.layersRenderers[r];return o?o.getUnrotatedInstanceAABB(e,t):(t.left=e.getX(),t.top=e.getY(),t.right=e.getX(),t.bottom=e.getY(),t)},getUnrotatedInstanceSize:function(e){var t=e.getLayer(),r=n.layersRenderers[t];return r?r.getUnrotatedInstanceSize(e):[0,0,0]}}}return(0,lt.Z)(e,[{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"getInstanceMeasurer",value:function(){return this.instanceMeasurer}},{key:"render",value:function(e,t,n,r){var o=!0;t&&t.resetState();for(var i=(0,er.Y9)(this.layout.getBackgroundColorRed(),this.layout.getBackgroundColorGreen(),this.layout.getBackgroundColorBlue()),a=0;a<this.layout.getLayersCount();a++){var s=this.layout.getLayerAt(a),l=s.getName(),c=this.layersRenderers[l];c||(this.layersRenderers[l]=c=new Sy({project:this.project,layout:this.layout,instances:this.instances,viewPosition:this.viewPosition,layer:s,onInstanceClicked:this.onInstanceClicked,onInstanceRightClicked:this.onInstanceRightClicked,onInstanceDoubleClicked:this.onInstanceDoubleClicked,onOverInstance:this.onOverInstance,onOutInstance:this.onOutInstance,onMoveInstance:this.onMoveInstance,onMoveInstanceEnd:this.onMoveInstanceEnd,onDownInstance:this.onDownInstance,pixiRenderer:e,showObjectInstancesIn3D:this._showObjectInstancesIn3D}),this.pixiContainer.addChild(c.getPixiContainer())),c.layer=s,c.wasUsed=!0,c.getPixiContainer().zOrder=a,c.render();var u=c.getPixiContainer();n.applyTransformationToPixi(u);var d=c.getThreeCamera(),p=c.getThreePlaneMesh();if(d&&p&&(n.applyTransformationToThree(d,p),d.fov=s.getCamera3DFieldOfView()),t){var h=c.getThreeScene(),f=c.getThreeCamera();h&&f&&(t.resetState(),e.reset(),c.renderOnPixiRenderTexture(e),c.updateThreePlaneTextureFromPixiRenderTexture(t,e),e.reset(),t.resetState(),o?(t.setClearColor(i),t.resetState(),t.clear(),h.background=new yy.Color(i),o=!1):h.background=null,t.clearDepth(),t.render(h,f))}else o&&(e.reset(),e.backgroundColor=i,e.backgroundAlpha=1,e.clear(),o=!1),e.render(u,{clear:!1})}this._updatePixiObjectsZOrder(),this._cleanUnusedLayerRenderers(),t&&(t.resetState(),e.reset()),e.render(r),t&&(e.reset(),t.resetState())}},{key:"_updatePixiObjectsZOrder",value:function(){this.pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"resetInstanceRenderersFor",value:function(e){for(var t in this.layersRenderers){if(this.layersRenderers.hasOwnProperty(t))this.layersRenderers[t].resetInstanceRenderersFor(e)}}},{key:"_cleanUnusedLayerRenderers",value:function(){for(var e in this.layersRenderers)if(this.layersRenderers.hasOwnProperty(e)){var t=this.layersRenderers[e];t.wasUsed?t.wasUsed=!1:(t.delete(),delete this.layersRenderers[e])}}},{key:"delete",value:function(){for(var e in this.layersRenderers)this.layersRenderers.hasOwnProperty(e)&&this.layersRenderers[e].delete();this.pixiContainer.destroy()}}]),e}();function Iy(e,t){var n=e(t.left,t.top),r=e(t.right,t.bottom);return new wy(n[0],n[1],r[0],r[1])}var Dy=function(e,t,n,r,o,i){if("isometric"===i){if(t<=0||n<=0)return e[0]=Math.round(e[0]),void(e[1]=Math.round(e[1]));var a=Math.round(2*(e[0]-r)/t),s=Math.round(2*(e[1]-o)/n);if(((a+s)%2+2)%2===1){var l=(e[0]-(a/2*t+r))/t,c=(e[1]-(s/2*n+o))/n;Math.abs(l)>Math.abs(c)?l>0?a++:a--:c>0?s++:s--}e[0]=a/2*t+r,e[1]=s/2*n+o}else e[0]=t<=0?Math.round(e[0]):Math.round((e[0]-r)/t)*t+r,e[1]=n<=0?Math.round(e[1]):Math.round((e[1]-o)/n)*n+o},Ay=["TopLeft","BottomLeft","BottomRight","TopRight","Top","Left","Bottom","Right"],Ly={TopLeft:[0,0],BottomLeft:[0,1],BottomRight:[1,1],TopRight:[1,0],Top:[.5,0],Left:[0,.5],Bottom:[.5,1],Right:[1,.5]},My=function(e){return"Top"!==e&&"Bottom"!==e},Fy=function(e){return"Left"!==e&&"Right"!==e},Oy=function(){function e(t){var n=t.instanceMeasurer,r=t.instancesEditorSettings;(0,st.Z)(this,e),this._initialSelectionAABB=null,this._unrotatedInstanceAABBs={},this._instanceAABBs={},this._instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0,this._temporaryGrabbingPosition=[0,0],this.instanceMeasurer=n,this.instancesEditorSettings=r}return(0,lt.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"_getOrCreateInstanceAABB",value:function(e){var t=this._instanceAABBs[e.ptr];return t||(this._instanceAABBs[e.ptr]=this.instanceMeasurer.getInstanceAABB(e,new wy))}},{key:"_getOrCreateUnrotatedInstanceAABB",value:function(e){var t=this._unrotatedInstanceAABBs[e.ptr];return t||(this._unrotatedInstanceAABBs[e.ptr]=this.instanceMeasurer.getUnrotatedInstanceAABB(e,new wy))}},{key:"_getOrCreateInstanceOriginPosition",value:function(e){var t=this._instancePositions[e.ptr];return t||(this._instancePositions[e.ptr]={x:e.getX(),y:e.getY()})}},{key:"_getOrCreateSelectionAABB",value:function(e){var t=this._initialSelectionAABB;if(t)return t;if(!e.length)return null;(t=new wy).setRectangle(this._getOrCreateInstanceAABB(e[0]));for(var n=1;n<e.length;n++)t.union(this._getOrCreateInstanceAABB(e[n]));return this._initialSelectionAABB=t,t}},{key:"resizeBy",value:function(e,t,n,r,o,i){this.totalDeltaX+=t,this.totalDeltaY+=n;var a=e.filter((function(e){return!e.isLocked()})),s=this._getOrCreateSelectionAABB(a);if(s){var l,c,u,d,p,h,f=Ly[r],g=s.left+s.width()*f[0],m=s.top+s.height()*f[1],x=this._temporaryGrabbingPosition;x[0]=g+this.totalDeltaX,x[1]=m+this.totalDeltaY,this.instancesEditorSettings.snap&&this.instancesEditorSettings.grid&&!i?(l=x,c=this.instancesEditorSettings.gridWidth,u=this.instancesEditorSettings.gridHeight,d=this.instancesEditorSettings.gridOffsetX,p=this.instancesEditorSettings.gridOffsetY,"isometric"===(h=this.instancesEditorSettings.gridType)?Dy(l,c/2,u/2,d,p,"rectangular"):Dy(l,c,u,d,p,h)):(x[0]=Math.round(x[0]),x[1]=Math.round(x[1]));var v=x[0]-g,b=x[1]-m;My(r)||(v=0),Fy(r)||(b=0);var j="TopLeft"===r||"BottomLeft"===r||"Left"===r?-v:v,C="TopLeft"===r||"TopRight"===r||"Top"===r?-b:b,y=0!==s.width()?(s.width()+j)/s.width():j,Z=0!==s.height()?(s.height()+C)/s.height():C,k=function(e){for(var t=0;t<e.length;t++)if(e[t].getAngle()%90!==0)return!0;return!1}(a);(o||k)&&(!Fy(r)||My(r)&&j*s.height()>C*s.width()?Z=y:y=Z),y=Math.max(0!==s.width()?1/s.width():1e-5,y),Z=Math.max(0!==s.height()?1/s.height():1e-5,Z);for(var w=s.right-Ly[r][0]*s.width(),T=s.bottom-Ly[r][1]*s.height(),E=0;E<a.length;E++){var S=a[E],P=this._getOrCreateUnrotatedInstanceAABB(S),I=this._getOrCreateInstanceOriginPosition(S),D=0!==P.width()?P.width():1,A=0!==P.height()?P.height():1,L=(S.getAngle()%360+360)%360,M=I.x,F=I.y,O=D,R=A;if(o||k||90!==L&&270!==L)O=y*D,R=Z*A,M=(I.x-w)*y+w,F=(I.y-T)*Z+T;else{O=Z*D,R=y*A;var B=(P.centerX()-w)*y+w,_=(P.centerY()-T)*Z+T;M=B+Z*(I.x-P.centerX()),F=_+y*(I.y-P.centerY())}if(S.setX(Math.round(M)),S.setY(Math.round(F)),!S.hasCustomDepth()){var N=this.instanceMeasurer.getUnrotatedInstanceSize(S);S.setHasCustomDepth(!0),S.setCustomDepth(N[2])}S.setHasCustomSize(!0),S.setCustomWidth(Math.round(O)),S.setCustomHeight(Math.round(R))}}}},{key:"endResize",value:function(){this._initialSelectionAABB=null,this._unrotatedInstanceAABBs={},this._instanceAABBs={},this._instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0}}]),e}(),Ry={TopLeft:"nwse-resize",BottomLeft:"nesw-resize",BottomRight:"nwse-resize",TopRight:"nesw-resize",Top:"ns-resize",Left:"ew-resize",Bottom:"ns-resize",Right:"ew-resize"},By=function(){function e(t){var n=this,r=t.instancesSelection,o=t.instanceMeasurer,i=t.onResize,a=t.onResizeEnd,s=t.onRotate,l=t.onRotateEnd,c=t.toCanvasCoordinates,u=t.screenType;(0,st.Z)(this,e),this.pixiContainer=new jy.Container,this.rectanglesContainer=new jy.Container,this.selectedRectangles=[],this.resizeButtons={},this.rotateButton=new jy.Graphics,this.getSelectionAABB=function(){for(var e=new wy,t=n.instancesSelection.getSelectedInstances(),r=new wy,o=0;o<t.length;o++){var i=t[o];r=n.instanceMeasurer.getInstanceAABB(i,r),0===o?e.setRectangle(r):e.union(r)}return e},this.instanceMeasurer=o,this.onResize=i,this.onResizeEnd=a,this.onRotate=s,this.onRotateEnd=l,this.toCanvasCoordinates=c,this.instancesSelection=r,this._screenType=u,this.pixiContainer.addChild(this.rectanglesContainer);var d,p=(0,an.Z)(Ay);try{var h=function(){var e=d.value,t=new jy.Graphics;n.resizeButtons[e]=t,n._makeButton(t,(function(t){n.onResize(t.deltaX,t.deltaY,e)}),(function(){n.onResizeEnd()}),Ry[e])};for(p.s();!(d=p.n()).done;)h()}catch(f){p.e(f)}finally{p.f()}this._makeButton(this.rotateButton,(function(e){n.onRotate(e.deltaX,e.deltaY)}),(function(){n.onRotateEnd()}),'url("res/actions/rotate24_black.png"),auto')}return(0,lt.Z)(e,[{key:"setScreenType",value:function(e){this._screenType=e}},{key:"_makeButton",value:function(e,t,n,r){e.interactive=!0,e.buttonMode=!0,e.cursor=r,vy.Z.panable(e),e.on("panmove",t),e.on("panend",n),this.pixiContainer.addChild(e)}},{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"_renderButton",value:function(e,t,n,r,o,i){t.clear(),e?(t.beginFill(16777215),t.lineStyle(1,6842600,1),t.fill.alpha=.9,0===o?t.drawRect(n[0],n[1],r,r):1===o&&t.drawCircle(n[0]+r/2,n[1]+r/2,r/2),t.endFill(),t.hitArea=new jy.Rectangle(n[0]-i,n[1]-i,r+2*i,r+2*i)):t.hitArea=new jy.Rectangle(0,0,0,0)}},{key:"render",value:function(){for(var e="touch"===this._screenType?{bigButtonSize:14,smallButtonSize:12,buttonPadding:5,hitAreaPadding:12}:{bigButtonSize:10,smallButtonSize:8,buttonPadding:5,hitAreaPadding:5},t=e.bigButtonSize,n=e.smallButtonSize,r=e.buttonPadding,o=e.hitAreaPadding,i=this.instancesSelection.getSelectedInstances(),a=0,s=0,l=0,c=0,u=!1,d=0;d<i.length;d++){if(this.selectedRectangles.length===d){var p=new jy.Graphics;p.hitArea=new jy.Rectangle(0,0,0,0),this.selectedRectangles.push(p),this.rectanglesContainer.addChild(p)}var h=i[d],f=this.instanceMeasurer.getInstanceAABB(h,new wy),g=Iy(this.toCanvasCoordinates,f);this.selectedRectangles[d].clear();var m=h.isLocked()?12343123:6842600;this.selectedRectangles[d].beginFill(m),this.selectedRectangles[d].lineStyle(1,m,1),this.selectedRectangles[d].fill.alpha=.3,this.selectedRectangles[d].alpha=.8,this.selectedRectangles[d].drawRect(g.left,g.top,g.width(),g.height()),this.selectedRectangles[d].endFill(),h.isLocked()||(u?(f.left<a&&(a=f.left),f.top<s&&(s=f.top),f.left+f.width()>l&&(l=f.left+f.width()),f.top+f.height()>c&&(c=f.top+f.height())):(a=f.left,s=f.top,l=f.left+f.width(),c=f.top+f.height(),u=!0))}for(;this.selectedRectangles.length>i.length;)this.rectanglesContainer.removeChild(this.selectedRectangles.pop());var x,v=0!==i.filter((function(e){return!e.isLocked()})).length,b=(0,an.Z)(Ay);try{for(b.s();!(x=b.n()).done;){var j=x.value,C=this.resizeButtons[j],y=Ly[j],Z=My(j)&&Fy(j)?t:n,k=r+Z/2,w=this.toCanvasCoordinates(a+y[0]*(l-a),s+y[1]*(c-s));w[0]+=-Z/2+k*Math.sign(y[0]-.5),w[1]+=-Z/2+k*Math.sign(y[1]-.5),this._renderButton(v,C,w,Z,0,o)}}catch(E){b.e(E)}finally{b.f()}var T=this.toCanvasCoordinates(a+(l-a)/2,s);T[0]-=n/2,T[1]-=8*r,this._renderButton(v,this.rotateButton,T,n,1,o)}}]),e}(),_y=function(){function e(t){var n=t.instanceMeasurer,r=t.toCanvasCoordinates,o=t.isInstanceOf3DObject;(0,st.Z)(this,e),this.instanceMeasurer=n,this.toCanvasCoordinates=r,this.isInstanceOf3DObject=o,this.highlightedInstance=null,this.isHighlightedInstanceOf3DObject=!1,this.highlightRectangle=new jy.Graphics,this.highlightRectangle.hitArea=new jy.Rectangle(0,0,0,0),this.tooltipBackground=new jy.Graphics,this.tooltipText=new jy.Text("",{fontSize:15,fill:16777215,align:"center"}),this.highlightRectangle.addChild(this.tooltipBackground),this.highlightRectangle.addChild(this.tooltipText)}return(0,lt.Z)(e,[{key:"setInstance",value:function(e){this.isHighlightedInstanceOf3DObject=!!e&&this.isInstanceOf3DObject(e),this.highlightedInstance=e}},{key:"getInstance",value:function(){return this.highlightedInstance}},{key:"getPixiObject",value:function(){return this.highlightRectangle}},{key:"render",value:function(){var e=this.highlightedInstance;if(null!==e){var t=Iy(this.toCanvasCoordinates,this.instanceMeasurer.getInstanceAABB(e,new wy));this.highlightRectangle.visible=!0,this.highlightRectangle.clear(),this.highlightRectangle.beginFill(15658751),this.highlightRectangle.fill.alpha=.1,this.highlightRectangle.alpha=.8,this.highlightRectangle.lineStyle(1,0,1),this.highlightRectangle.drawRect(t.left,t.top,t.width(),t.height()),this.highlightRectangle.endFill();var n=e.getObjectName()+"\nX: "+Math.round(100*e.getX())/100+"  Y: "+Math.round(100*e.getY())/100+(this.isHighlightedInstanceOf3DObject?"  Z: "+Math.round(100*e.getZ())/100:"")+"\nLayer: "+(e.getLayer()||"Base layer")+(this.isHighlightedInstanceOf3DObject?"":"\nZ order: "+e.getZOrder())+"\n";this.tooltipText.text=n,this.tooltipText.x=Math.round(t.left-this.tooltipText.width/2+t.width()/2),this.tooltipText.y=Math.round(t.top-this.tooltipText.height);this.tooltipBackground.clear(),this.tooltipBackground.beginFill(0,.8),this.tooltipBackground.drawRoundedRect(this.tooltipText.x-5,this.tooltipText.y-5,this.tooltipText.width+10,this.tooltipText.height-5,4),this.tooltipBackground.endFill()}else this.highlightRectangle.visible=!1}}]),e}(),Ny=n.g.gd,Uy=function(){function e(t){var n=this,r=t.instances,o=t.instanceMeasurer,i=t.toSceneCoordinates;(0,st.Z)(this,e),this.startSelectionRectangle=function(e,t){n.selectionRectangleStart={x:e,y:t},n.selectionRectangleEnd={x:e,y:t}},this.updateSelectionRectangle=function(e,t){n.selectionRectangleStart||(n.selectionRectangleStart={x:e,y:t}),n.selectionRectangleEnd={x:e,y:t}},this.endSelectionRectangle=function(){if(!n.selectionRectangleStart||!n.selectionRectangleEnd)return[];if(n._instancesInSelectionRectangle.length=0,n.selectionRectangleStart.x>n.selectionRectangleEnd.x){var e=n.selectionRectangleStart.x;n.selectionRectangleStart.x=n.selectionRectangleEnd.x,n.selectionRectangleEnd.x=e}if(n.selectionRectangleStart.y>n.selectionRectangleEnd.y){var t=n.selectionRectangleStart.y;n.selectionRectangleStart.y=n.selectionRectangleEnd.y,n.selectionRectangleEnd.y=t}return n.instances.iterateOverInstances(n.selector),n.selectionRectangleStart=null,n._instancesInSelectionRectangle},this.instances=r,this.instanceMeasurer=o,this.toSceneCoordinates=i,this.pixiRectangle=new jy.Graphics,this.pixiRectangle.hitArea=new jy.Rectangle(0,0,0,0),this.selectionRectangleStart=null,this.selectionRectangleEnd=null,this._instancesInSelectionRectangle=[],this._temporaryAABB=new wy,this.selector=new Ny.InitialInstanceJSFunctor,this.selector.invoke=function(e){var t=Ny.wrapPointer(e,Ny.InitialInstance),r=n.instanceMeasurer.getInstanceAABB(t,n._temporaryAABB),o=n.selectionRectangleEnd,a=n.selectionRectangleStart;if(a&&o){var s=i(a.x,a.y),l=i(o.x,o.y);s[0]<=r.left&&r.right<=l[0]&&s[1]<=r.top&&r.bottom<=l[1]&&n._instancesInSelectionRectangle.push(t)}}}return(0,lt.Z)(e,[{key:"hasStartedSelectionRectangle",value:function(){return this.selectionRectangleStart}},{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){if(this.selectionRectangleStart&&this.selectionRectangleEnd){var e=this.selectionRectangleStart.x,t=this.selectionRectangleStart.y,n=this.selectionRectangleEnd.x,r=this.selectionRectangleEnd.y;this.pixiRectangle.visible=!0,this.pixiRectangle.clear(),this.pixiRectangle.beginFill(6842600),this.pixiRectangle.lineStyle(1,6842600,1),this.pixiRectangle.fill.alpha=.1,this.pixiRectangle.alpha=.8,this.pixiRectangle.drawRect(Math.min(e,n),Math.min(t,r),Math.abs(n-e),Math.abs(r-t)),this.pixiRectangle.endFill()}else this.pixiRectangle.visible=!1}},{key:"delete",value:function(){this.selector.delete()}}]),e}(),Hy=function(){function e(t){(0,st.Z)(this,e),this._instanceAngles={},this._instancePositions={},this._instanceAABBs={},this.totalDeltaX=0,this.totalDeltaY=0,this._fixedPointIsUpToDate=!1,this._fixedPoint=[0,0],this._instanceMeasurer=t}return(0,lt.Z)(e,[{key:"_getNewAngle",value:function(e,t){var n=180*Math.atan2(this.totalDeltaY,this.totalDeltaX)/Math.PI+90+t;return e?15*Math.round(n/15):n}},{key:"_getOrCreateInstanceAABB",value:function(e){var t=this._instanceAABBs[e.ptr];return t||(this._instanceAABBs[e.ptr]=this._instanceMeasurer.getInstanceAABB(e,new wy))}},{key:"_getOrCreateInstanceOriginPosition",value:function(e){var t=this._instancePositions[e.ptr];return t||(this._instancePositions[e.ptr]={x:e.getX(),y:e.getY()})}},{key:"_getOrCreateInstanceAngle",value:function(e){var t=this._instanceAngles[e.ptr];return void 0!==t?t:this._instanceAngles[e.ptr]=e.getAngle()}},{key:"rotateBy",value:function(e,t,n,r){var o=e.filter((function(e){return!e.isLocked()}));if(!this._fixedPointIsUpToDate){this._fixedPointIsUpToDate=!0;var i=new wy;i.setRectangle(this._getOrCreateInstanceAABB(o[0]));for(var a=1;a<o.length;a++)i.union(this._getOrCreateInstanceAABB(o[a]));this._fixedPoint[0]=i.centerX(),this._fixedPoint[1]=i.centerY(),this.totalDeltaY-=i.height()/2}this.totalDeltaX+=t,this.totalDeltaY+=n;for(var s=0;s<o.length;s++){var l=o[s],c=this._getOrCreateInstanceAABB(l),u=this._getOrCreateInstanceAngle(l),d=this._getOrCreateInstanceOriginPosition(l),p=this._getNewAngle(r,u),h=Math.round((p%360+360)%360);l.setAngle(h);var f=(p-u)*Math.PI/180,g=Math.cos(-f),m=Math.sin(-f),x=c.centerX()-this._fixedPoint[0],v=c.centerY()-this._fixedPoint[1],b=Math.round(this._fixedPoint[0]+(d.x-c.centerX())+g*x+m*v),j=Math.round(this._fixedPoint[1]+(d.y-c.centerY())-m*x+g*v);l.setX(b),l.setY(j)}}},{key:"endRotate",value:function(){this._instanceAngles={},this._instancePositions={},this._instanceAABBs={},this.totalDeltaX=0,this.totalDeltaY=0,this._fixedPointIsUpToDate=!1}}]),e}(),Vy=function(){function e(t){var n=t.instanceMeasurer,r=t.instancesEditorSettings;(0,st.Z)(this,e),this._initialSelectionAABB=null,this._startX=0,this._startY=0,this.instanceMeasurer=n,this.instancesEditorSettings=r,this.instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0,this._temporaryPoint=[0,0]}return(0,lt.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"_getMoveDeltaX",value:function(e,t,n){return n&&Math.abs(e)<Math.abs(t)?0:e}},{key:"_getMoveDeltaY",value:function(e,t,n){return n&&Math.abs(t)<Math.abs(e)?0:t}},{key:"_getOrCreateSelectionAABB",value:function(e){if(this._initialSelectionAABB)return this._initialSelectionAABB;if(!e.length)return null;var t=new wy;this.instanceMeasurer.getInstanceAABB(e[0],t);for(var n=new wy,r=1;r<e.length;r++)this.instanceMeasurer.getInstanceAABB(e[r],n),t.union(n);return this._initialSelectionAABB=t,t}},{key:"startMove",value:function(e,t){this._startX=e,this._startY=t}},{key:"moveBy",value:function(e,t,n,r,o){this.totalDeltaX+=t,this.totalDeltaY+=n;var i=e.filter((function(e){return!e.isLocked()})),a=this._getOrCreateSelectionAABB(i);if(a){var s=this._startX<a.centerX(),l=this._startY<a.centerY(),c=s?a.left:a.right,u=l?a.top:a.bottom,d=this._temporaryPoint;d[0]=c+this.totalDeltaX,d[1]=u+this.totalDeltaY,this.instancesEditorSettings.snap&&this.instancesEditorSettings.grid&&!o?Dy(d,this.instancesEditorSettings.gridWidth,this.instancesEditorSettings.gridHeight,this.instancesEditorSettings.gridOffsetX,this.instancesEditorSettings.gridOffsetY,this.instancesEditorSettings.gridType):(d[0]=Math.round(d[0]),d[1]=Math.round(d[1]));for(var p=d[0]-c,h=d[1]-u,f=0;f<i.length;f++){var g=i[f],m=this.instancePositions[g.ptr];m||(m=this.instancePositions[g.ptr]={x:g.getX(),y:g.getY()});var x=Math.round(m.x+this._getMoveDeltaX(p,h,r)),v=Math.round(m.y+this._getMoveDeltaY(p,h,r));g.setX(x),g.setY(v)}}}},{key:"endMove",value:function(){this._initialSelectionAABB=null,this.instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0}}]),e}(),Wy=function(){function e(t){var n=t.viewPosition,r=t.instancesEditorSettings;(0,st.Z)(this,e),this.pixiGrid=new jy.Graphics,this.viewPosition=n,this.instancesEditorSettings=r,this.pixiGrid.hitArea=new jy.Rectangle(0,0,0,0)}return(0,lt.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"getPixiObject",value:function(){return this.pixiGrid}},{key:"render",value:function(){var e=this.instancesEditorSettings;if(e.grid){var t=e.gridColor,n=e.gridAlpha;this.pixiGrid.visible=!0,this.pixiGrid.clear(),this.pixiGrid.beginFill(t),this.pixiGrid.lineStyle(1,t,1),this.pixiGrid.alpha=n;var r=this.viewPosition.toSceneCoordinates(0,0),o=this.viewPosition.toSceneCoordinates(this.viewPosition.getWidth(),this.viewPosition.getHeight()),i=(e.gridOffsetX%e.gridWidth+e.gridWidth)%e.gridWidth,a=(e.gridOffsetY%e.gridHeight+e.gridHeight)%e.gridHeight,s=Math.floor((r[0]-i)/e.gridWidth)*e.gridWidth+i,l=Math.floor((r[1]-a)/e.gridHeight)*e.gridHeight+a,c=Math.ceil((o[0]-i)/e.gridWidth)*e.gridWidth+i,u=Math.ceil((o[1]-a)/e.gridHeight)*e.gridHeight+a;if("isometric"===e.gridType){for(var d=Math.round((c-s)/e.gridWidth),p=Math.round((u-l)/e.gridHeight),h=d+p,f=0;f<h;++f){var g=void 0,m=void 0;f<d?(g=s+e.gridWidth/2+f*e.gridWidth,m=l):(g=c,m=l+e.gridHeight/2+(f-d)*e.gridHeight);var x=void 0,v=void 0;f<p?(x=s,v=l+e.gridHeight/2+f*e.gridHeight):(x=s+e.gridWidth/2+(f-p)*e.gridWidth,v=u);var b=this.viewPosition.toCanvasCoordinates(g,m),j=this.viewPosition.toCanvasCoordinates(x,v);this.pixiGrid.moveTo(b[0],b[1]),this.pixiGrid.lineTo(j[0],j[1])}for(var C=0;C<h;++C){var y=void 0,Z=void 0;C<p?(y=s,Z=l+e.gridHeight/2+(p-1-C)*e.gridHeight):(y=s+e.gridWidth/2+(C-p)*e.gridWidth,Z=l);var k=void 0,w=void 0;C<d?(k=s+e.gridWidth/2+C*e.gridWidth,w=u):(k=c,w=l+e.gridHeight/2+(h-1-C)*e.gridHeight);var T=this.viewPosition.toCanvasCoordinates(y,Z),E=this.viewPosition.toCanvasCoordinates(k,w);this.pixiGrid.moveTo(T[0],T[1]),this.pixiGrid.lineTo(E[0],E[1])}}else{for(var S=s;S<c;S+=e.gridWidth){var P=this.viewPosition.toCanvasCoordinates(S,l),I=this.viewPosition.toCanvasCoordinates(S,u);this.pixiGrid.moveTo(P[0],P[1]),this.pixiGrid.lineTo(I[0],I[1])}for(var D=l;D<u;D+=e.gridHeight){var A=this.viewPosition.toCanvasCoordinates(s,D),L=this.viewPosition.toCanvasCoordinates(c,D);this.pixiGrid.moveTo(A[0],A[1]),this.pixiGrid.lineTo(L[0],L[1])}}this.pixiGrid.endFill()}else this.pixiGrid.visible=!1}}]),e}(),zy=function(){function e(t){var n=t.project,r=t.layout,o=t.toCanvasCoordinates;(0,st.Z)(this,e),this.pixiRectangle=new jy.Graphics,this.windowRectangle=new wy,this.project=n,this.layout=r,this.toCanvasCoordinates=o,this.pixiRectangle.hitArea=new jy.Rectangle(0,0,0,0)}return(0,lt.Z)(e,[{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){this.windowRectangle.set({left:0,top:0,right:this.project.getGameResolutionWidth(),bottom:this.project.getGameResolutionHeight()});var e=Iy(this.toCanvasCoordinates,this.windowRectangle);this.pixiRectangle.clear(),this.pixiRectangle.beginFill(0),this.pixiRectangle.lineStyle(1,(0,er.Y9)(128+this.layout.getBackgroundColorRed()%256,128+this.layout.getBackgroundColorBlue()%256,128+this.layout.getBackgroundColorGreen()%256),1),this.pixiRectangle.alpha=1,this.pixiRectangle.fill.alpha=0,this.pixiRectangle.drawRect(e.left,e.top,e.width(),e.height()),this.pixiRectangle.endFill()}}]),e}(),Gy=function(){function e(t){var n=t.project,r=t.viewPosition,o=t.instancesEditorSettings;(0,st.Z)(this,e),this.pixiRectangle=new jy.Graphics,this.windowRectangle=new wy,this.project=n,this.viewPosition=r,this.instancesEditorSettings=o,this.pixiRectangle.hitArea=new jy.Rectangle(0,0,0,0)}return(0,lt.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){if(this.instancesEditorSettings.windowMask){this.windowRectangle.setThroughCenter({centerX:this.viewPosition.getViewX(),centerY:this.viewPosition.getViewY(),width:this.project.getGameResolutionWidth(),height:this.project.getGameResolutionHeight()});var e=Iy(this.viewPosition.toCanvasCoordinates,this.windowRectangle);this.pixiRectangle.visible=!0,this.pixiRectangle.clear(),this.pixiRectangle.beginFill(0),this.pixiRectangle.lineStyle(1,0,1),this.pixiRectangle.alpha=1,this.pixiRectangle.fill.alpha=0,this.pixiRectangle.drawRect(e.left,e.top,e.width(),e.height()),this.pixiRectangle.endFill()}else this.pixiRectangle.visible=!1}}]),e}(),Yy=function(){function e(t){var n=t.idleFps,r=t.maxFps;(0,st.Z)(this,e),this._maxFps=r,this._idleFps=n,this._lastFrameTime=Date.now(),this._interval=1e3/n,this._forceUpdate=!1}return(0,lt.Z)(e,[{key:"notifyInteractionHappened",value:function(){this._interval=1e3/this._maxFps,this._lastInteractionTime=Date.now()}},{key:"shouldUpdate",value:function(){var e=Date.now(),t=e-this._lastFrameTime;return e-this._lastInteractionTime>1e3&&(this._interval=1e3/this._idleFps),!!(t>this._interval||this._forceUpdate)&&(this._lastFrameTime=e-t%this._interval,this._forceUpdate=!1,!0)}},{key:"forceNextUpdate",value:function(){this._forceUpdate=!0}}]),e}(),qy=function(){var e=jy.Ticker&&jy.Ticker.shared;e&&e.stop()},Xy=function(){function e(t){var n=t.getLastCursorSceneCoordinates,r=t.width,o=t.height;(0,st.Z)(this,e),this._getLastCursorSceneCoordinates=n,this._statusBarContainer=new jy.Container,this._statusBarContainer.alpha=.8,this._statusBarContainer.hitArea=new jy.Rectangle(0,0,0,0),this._statusBarBackground=new jy.Graphics,this._statusBarText=new jy.Text("",{fontSize:15,fill:16777215,align:"left"}),this._statusBarContainer.addChild(this._statusBarBackground),this._statusBarContainer.addChild(this._statusBarText),this.resize(r,o)}return(0,lt.Z)(e,[{key:"resize",value:function(e,t){this._width=e,this._height=t}},{key:"getPixiObject",value:function(){return this._statusBarContainer}},{key:"render",value:function(){var e=Math.round(this._width-15-5-this._statusBarText.width),t=Math.round(this._height-5-15-this._statusBarText.height),n=this._getLastCursorSceneCoordinates(),r=(0,a.Z)(n,2),o=r[0],i=r[1];this._statusBarText.text="".concat(o.toFixed(0),";").concat(i.toFixed(0)),this._statusBarText.position.x=e,this._statusBarText.position.y=t;var s=this._width-15-10-this._statusBarText.width,l=this._height-15-10-this._statusBarText.height,c=this._statusBarText.width+10,u=this._statusBarText.height+10;this._statusBarBackground.clear(),this._statusBarBackground.beginFill(0,.8),this._statusBarBackground.drawRoundedRect(s,l,c,u,6),this._statusBarBackground.endFill()}}]),e}(),Jy=function(){function e(t){var n=t.canvas,r=t.shouldMoveView;(0,st.Z)(this,e),this.canvas=n,this.shouldMoveView=r}return(0,lt.Z)(e,[{key:"render",value:function(){if(this.shouldMoveView())return this.canvas.style.cursor="grab",void("grab"!==this.canvas.style.cursor&&(this.canvas.style.cursor="-webkit-grab"));this.canvas.style.cursor="default"}}]),e}(),Ky=n.g.gd,Qy=function(e,t){var n=e;return t.grid&&t.snap?Dy(n,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridType):(n[0]=Math.round(n[0]),n[1]=Math.round(n[1])),n},$y=function(){function e(t){var n=this,r=t.instances,o=t.instancesEditorSettings;(0,st.Z)(this,e),this._zOrderFinder=new Ky.HighestZOrderFinder,this.addSerializedInstances=function(e){var t=e.position,r=e.copyReferential,o=e.serializedInstances,i=e.preventSnapToGrid,a=void 0!==i&&i,s=e.addInstancesInTheForeground,l=void 0!==s&&s;n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var c=n._zOrderFinder.getHighestZOrder()+1,u=null,d=o.map((function(e){var o=new Ky.InitialInstance;(0,qt.qx)(o,e);var i=[o.getX()-r[0]+t[0],o.getY()-r[1]+t[1]],s=a?i:Qy(i,n._instancesEditorSettings);o.setX(s[0]),o.setY(s[1]),l&&(null===u||u>o.getZOrder())&&(u=o.getZOrder());var c=n._instances.insertInitialInstance(o).resetPersistentUuid();return o.delete(),c}));return l&&null!==u&&d.forEach((function(e){e.setZOrder(e.getZOrder()-(u||0)+c)})),d},this.addInstances=function(e,t,r){n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var o=n._zOrderFinder.getHighestZOrder()+1,i=Qy(e,n._instancesEditorSettings);return t.map((function(e){var t=n._instances.insertNewInitialInstance();return t.setObjectName(e),t.setX(i[0]),t.setY(i[1]),t.setLayer(r),t.setZOrder(o),t}))},this.createOrUpdateTemporaryInstancesFromObjectNames=function(e,t,r){t.length&&(n._temporaryInstances.length?n.updateTemporaryInstancePositions(e):n._createTemporaryInstancesFromObjectNames(e,t,r))},this._createTemporaryInstancesFromObjectNames=function(e,t,r){n.deleteTemporaryInstances(),n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var o=n._zOrderFinder.getHighestZOrder()+1,i=Qy(e,n._instancesEditorSettings);n._temporaryInstances=t.map((function(e){var t=n._instances.insertNewInitialInstance();return t.setObjectName(e),t.setX(i[0]),t.setY(i[1]),t.setLayer(r),t.setZOrder(o),t}))},this.updateTemporaryInstancePositions=function(e){var t=Qy(e,n._instancesEditorSettings);return n._temporaryInstances.forEach((function(e){e.setX(t[0]),e.setY(t[1])})),n._temporaryInstances},this._instances=r,this._instancesEditorSettings=o,this._temporaryInstances=[]}return(0,lt.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this._instancesEditorSettings=e}},{key:"deleteTemporaryInstances",value:function(){var e=this;this._temporaryInstances.forEach((function(t){e._instances.removeInstance(t)})),this._temporaryInstances=[]}},{key:"commitTemporaryInstances",value:function(){this._temporaryInstances=[]}},{key:"unmount",value:function(){this._zOrderFinder.delete()}}]),e}(),eZ=(0,lt.Z)((function e(t){var n=this,r=t.canvas,o=t.onLongTouch;(0,st.Z)(this,e),this._lastTouchX=0,this._lastTouchY=0,this._onTouchStart=function(e){if(1===e.touches.length){var t=e.touches[0];n._lastTouchX=t.clientX,n._lastTouchY=t.clientY,n._clear(),n._longTouchTimeoutID=setTimeout((function(){n._onLongTouch&&n._onLongTouch({clientX:n._lastTouchX,clientY:n._lastTouchY})}),600)}},this._onTouchMove=function(e){if(1===e.touches.length){var t=e.touches[0];(Math.abs(t.clientX-n._lastTouchX)>10||Math.abs(t.clientY-n._lastTouchY)>10)&&n._clear()}else n._clear()},this._clear=function(){clearTimeout(n._longTouchTimeoutID)},this.unmount=function(){n._canvas.removeEventListener("touchstart",n._onTouchStart),n._canvas.removeEventListener("touchmove",n._onTouchMove),n._canvas.removeEventListener("touchend",n._clear)},this._canvas=r,this._onLongTouch=o,r.addEventListener("touchstart",this._onTouchStart),r.addEventListener("touchmove",this._onTouchMove),r.addEventListener("touchend",this._clear)})),tZ=n.g.gd,nZ="instances-editor-canvas",rZ={canvasArea:{flex:1,position:"absolute",overflow:"hidden"},dropCursor:{cursor:"copy"}},oZ=ch(bj),iZ=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).lastContextMenuX=0,e.lastContextMenuY=0,e.lastCursorX=0,e.lastCursorY=0,e.fpsLimiter=new Yy({maxFps:60,idleFps:10}),e.threeRenderer=null,e._unmounted=!1,e._renderingPaused=!1,e.hasCursorMovedSinceItIsDown=!1,e._showObjectInstancesIn3D=!1,e.forceRemount=function(){e._mountEditorComponents(e.props)},e.resetInstanceRenderersFor=function(t){e.instancesRenderer&&e.instancesRenderer.resetInstanceRenderersFor(t)},e.zoomBy=function(t){e.setZoomFactor(e.getZoomFactor()*t)},e.getZoomFactor=function(){return e.props.instancesEditorSettings.zoomFactor},e.setZoomFactor=function(t){e.props.instancesEditorSettings.zoomFactor=(0,xy.r9)(t),e.props.onInstancesEditorSettingsMutated(e.props.instancesEditorSettings)},e.addSerializedInstances=function(t){return e._instancesAdder.addSerializedInstances(t)},e.addInstances=function(t,n,r){return e._instancesAdder.addInstances(t,n,r)},e._onMouseMove=function(t,n){e.lastCursorX=t,e.lastCursorY=n},e._onBackgroundClicked=function(t,n){e.lastCursorX=t,e.lastCursorY=n,e.pixiRenderer.view.focus(),e.keyboardShortcuts.shouldMoveView()||e.selectionRectangle.startSelectionRectangle(t,n),e.keyboardShortcuts.shouldMultiSelect()||e.keyboardShortcuts.shouldMoveView()||!e.props.instancesSelection.hasSelectedInstances()||(e.props.instancesSelection.clearSelection(),e.props.onInstancesSelected([]))},e._onPanMove=function(t,n,r,o){if(e.fpsLimiter.notifyInteractionHappened(),e.keyboardShortcuts.shouldMoveView()){var i=t/e.getZoomFactor(),a=n/e.getZoomFactor();e.scrollBy(-i,-a)}else e.selectionRectangle.updateSelectionRectangle(r,o)},e._getLayersLocks=function(){for(var t=e.props.layout,n={},r=0;r<t.getLayersCount();r++){var o=t.getLayerAt(r);n[t.getLayerAt(r).getName()]=!o.getVisibility()||o.isLocked()}return n},e._onPanEnd=function(){if(e.selectionRectangle.hasStartedSelectionRectangle()){var t=e.selectionRectangle.endSelectionRectangle();e.props.instancesSelection.selectInstances({instances:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),t=e.props.instancesSelection.getSelectedInstances(),e.props.onInstancesSelected(t)}},e._onInstanceClicked=function(t){e.fpsLimiter.notifyInteractionHappened(),e.pixiRenderer.view.focus()},e._onInstanceRightClicked=function(t){e._onRightClicked((0,i.Z)((0,i.Z)({},t),{},{ignoreSelectedObjectNamesForContextMenu:!1}))},e._onRightClicked=function(t){var n=t.offsetX,r=t.offsetY,o=t.x,i=t.y,a=t.ignoreSelectedObjectNamesForContextMenu;e.lastContextMenuX=n,e.lastContextMenuY=r,e.props.onContextMenu&&e.props.onContextMenu(o,i,!!a)},e._onInstanceDoubleClicked=function(t){e.keyboardShortcuts.shouldIgnoreDoubleClick()||e.props.onInstanceDoubleClicked(t)},e._onOverInstance=function(t){e.highlightedInstance.setInstance(t)},e._onDownInstance=function(t,n,r){e.fpsLimiter.notifyInteractionHappened(),e.keyboardShortcuts.shouldMoveView()||(e.props.instancesSelection.selectInstance({instance:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),e.props.onInstancesSelected&&e.props.onInstancesSelected(e.props.instancesSelection.getSelectedInstances()),e.hasCursorMovedSinceItIsDown=!1,e.instancesMover.startMove(n,r))},e._onOutInstance=function(t){t===e.highlightedInstance.getInstance()&&e.highlightedInstance.setInstance(null)},e._onMoveInstance=function(t,n,r){if(e.fpsLimiter.notifyInteractionHappened(),!e.hasCursorMovedSinceItIsDown&&e.keyboardShortcuts.shouldCloneInstances()){e.hasCursorMovedSinceItIsDown=!0;for(var o=e.props.instancesSelection.getSelectedInstances(),i=0;i<o.length;i++){var a=o[i];e.props.initialInstances.insertInitialInstance(a).resetPersistentUuid()}}var s=n/e.getZoomFactor(),l=r/e.getZoomFactor();if(e.keyboardShortcuts.shouldMoveView())e.scrollBy(-s,-l);else{e.props.instancesSelection.isInstanceSelected(t)||e._onInstanceClicked(t);var c=e.props.instancesSelection.getSelectedInstances();e.instancesMover.moveBy(c,s,l,e.keyboardShortcuts.shouldFollowAxis(),e.keyboardShortcuts.shouldNotSnapToGrid())}},e._onMoveInstanceEnd=function(){e.instancesMover.endMove();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesMoved(t)},e._onResize=function(t,n,r){e.fpsLimiter.notifyInteractionHappened();var o=t/e.getZoomFactor(),i=n/e.getZoomFactor(),a=e.props.instancesSelection.getSelectedInstances(),s="touch"===e.props.screenType&&My(r)&&Fy(r)||e.keyboardShortcuts.shouldResizeProportionally();e.instancesResizer.resizeBy(a,o,i,r,s,e.keyboardShortcuts.shouldNotSnapToGrid())},e._onResizeEnd=function(){e.instancesResizer.endResize();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesResized(t)},e._onRotate=function(t,n){e.fpsLimiter.notifyInteractionHappened();var r=t/e.getZoomFactor(),o=n/e.getZoomFactor(),i=e.props.instancesSelection.getSelectedInstances();e.instancesRotator.rotateBy(i,r,o,e.keyboardShortcuts.shouldResizeProportionally())},e._onRotateEnd=function(){e.instancesRotator.endRotate();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesRotated(t)},e.clearHighlightedInstance=function(){e.highlightedInstance.setInstance(null)},e.moveSelection=function(t,n){e.fpsLimiter.notifyInteractionHappened();var r=e.props.instancesSelection.getSelectedInstances().filter((function(e){return!e.isLocked()}));r.forEach((function(e){e.setX(e.getX()+t),e.setY(e.getY()+n)})),e.props.onInstancesMoved(r)},e.zoomToFitContent=function(){var t=e.props.initialInstances;if(0!==t.getInstancesCount()){var n,r=e.instancesRenderer.getInstanceMeasurer(),o=new tZ.InitialInstanceJSFunctor;o.invoke=function(e){var t=tZ.wrapPointer(e,tZ.InitialInstance);n?n.union(r.getInstanceAABB(t,new wy)):n=r.getInstanceAABB(t,new wy)},t.iterateOverInstances(o),o.delete(),n&&e.fitViewToRectangle(n,{adaptZoom:!0})}},e.zoomToInitialPosition=function(){var t=e.props.project.getGameResolutionWidth(),n=e.props.project.getGameResolutionHeight(),r=t/2,o=n/2;e.setZoomFactor(XC(Math.max(n,t))),e.scrollTo(r,o)},e.zoomToFitSelection=function(t){if(0!==t.length){var n=(0,Lu.Z)(t),r=n[0],o=n.slice(1),i=e.instancesRenderer.getInstanceMeasurer(),a=i.getInstanceAABB(r,new wy);o.forEach((function(e){a.union(i.getInstanceAABB(e,new wy))})),e.fitViewToRectangle(a,{adaptZoom:!0})}},e.centerViewOnLastInstance=function(t,n){if(0!==t.length){var r=e.instancesRenderer.getInstanceMeasurer().getInstanceAABB(t[t.length-1],new wy);e.fitViewToRectangle(r,{adaptZoom:!1}),n&&e.scrollBy(n[0],n[1])}},e.getLastContextMenuSceneCoordinates=function(){return e.viewPosition.toSceneCoordinates(e.lastContextMenuX,e.lastContextMenuY)},e.getLastCursorSceneCoordinates=function(){return e.viewPosition.toSceneCoordinates(e.lastCursorX,e.lastCursorY)},e.getViewPosition=function(){return e.viewPosition},e._renderScene=function(){e._unmounted||e._renderingPaused||(e.fpsLimiter.shouldUpdate()&&!(0,Ph.EU)()&&(e.canvasCursor.render(),e.grid.render(),e.highlightedInstance.render(),e.selectedInstances.render(),e.selectionRectangle.render(),e.windowBorder.render(),e.windowMask.render(),e.statusBar.render(),e.instancesRenderer.render(e.pixiRenderer,e.threeRenderer,e.viewPosition,e.pixiContainer)),e.nextFrame=requestAnimationFrame(e._renderScene))},e.pauseSceneRendering=function(){e.nextFrame&&cancelAnimationFrame(e.nextFrame),e._renderingPaused=!0,qy()},e.restartSceneRendering=function(){e._renderingPaused=!1,e._renderScene(),setTimeout((function(){var e=jy.Ticker&&jy.Ticker.shared;e&&e.start()}),50)},e.getInstanceSize=function(t){return e.instancesRenderer.getInstanceMeasurer().getUnrotatedInstanceSize(t)},e}return(0,lt.Z)(n,[{key:"componentDidMount",value:function(){this.canvasArea&&!this.pixiRenderer&&this._initializeCanvasAndRenderer()}},{key:"componentDidUpdate",value:function(){this.canvasArea&&!this.pixiRenderer&&this._initializeCanvasAndRenderer()}},{key:"_initializeCanvasAndRenderer",value:function(){var e=this,t=this.canvasArea;if(t){var n,r=this.props,o=r.project,a=r.onMouseMove,s=r.onMouseLeave;if(this.keyboardShortcuts=new Rt.Z({shortcutCallbacks:(0,i.Z)({onMove:this.moveSelection},this.props.instancesEditorShortcutsCallbacks)}),this._showObjectInstancesIn3D=this.props.showObjectInstancesIn3D,this._showObjectInstancesIn3D){n=document.createElement("canvas");var l=new yy.WebGLRenderer({canvas:n});l.autoClear=!1,l.setSize(this.props.width,this.props.height),this.pixiRenderer=new jy.Renderer({width:this.props.width,height:this.props.height,view:n,context:l.getContext(),clearBeforeRender:!1,preserveDrawingBuffer:!0,antialias:!1,backgroundAlpha:0}),this.threeRenderer=l}else this.pixiRenderer=jy.autoDetectRenderer({width:this.props.width,height:this.props.height,preserveDrawingBuffer:!0,antialias:!1,clearBeforeRender:!1,backgroundAlpha:0}),n=this.pixiRenderer.view;t.appendChild(n),this.pixiRenderer.view.style.outline="none",this.longTouchHandler=new eZ({canvas:this.pixiRenderer.view,onLongTouch:function(t){return e.props.onContextMenu(t.clientX,t.clientY)}}),this.pixiRenderer.view.onwheel=function(t){e.fpsLimiter.notifyInteractionHappened();var n=e.getZoomFactor();if(e.keyboardShortcuts.shouldZoom(t))e.zoomOnCursorBy((0,xy.$u)(-t.deltaY));else if(e.keyboardShortcuts.shouldScrollHorizontally()){var r=t.deltaY/(5*n);e.scrollBy(-r,0)}else{var o=t.deltaX/(5*n),i=t.deltaY/(5*n);e.scrollBy(o,i)}t.preventDefault()},this.pixiRenderer.view.setAttribute("tabIndex",-1),this.pixiRenderer.view.addEventListener("keydown",this.keyboardShortcuts.onKeyDown),this.pixiRenderer.view.addEventListener("keyup",this.keyboardShortcuts.onKeyUp),this.pixiRenderer.view.addEventListener("mousedown",this.keyboardShortcuts.onMouseDown),this.pixiRenderer.view.addEventListener("mouseup",this.keyboardShortcuts.onMouseUp),a&&this.pixiRenderer.view.addEventListener("mousemove",(function(e){a(e)})),s&&this.pixiRenderer.view.addEventListener("mouseout",(function(e){s(e)})),this.pixiRenderer.view.addEventListener("focusout",(function(t){e.keyboardShortcuts&&e.keyboardShortcuts.resetModifiers()})),this.pixiContainer=new jy.Container,this.backgroundArea=new jy.Container,this.backgroundArea.hitArea=new jy.Rectangle(0,0,this.props.width,this.props.height),vy.Z.panable(this.backgroundArea),this.backgroundArea.on("mousedown",(function(t){return e._onBackgroundClicked(t.data.global.x,t.data.global.y)})),this.backgroundArea.on("rightclick",(function(t){var n=t.data.originalEvent;return e._onRightClicked({offsetX:n.offsetX,offsetY:n.offsetY,x:n.clientX,y:n.clientY,ignoreSelectedObjectNamesForContextMenu:!0}),!1})),this.backgroundArea.on("touchstart",(function(t){Zy(t.data&&t.data.originalEvent)||e._onBackgroundClicked(t.data.global.x,t.data.global.y)})),this.backgroundArea.on("mousemove",(function(t){var n=t.data.global.x||0,r=t.data.global.y||0;e._onMouseMove(n,r)})),this.backgroundArea.on("panmove",(function(t){return e._onPanMove(t.deltaX,t.deltaY,t.data.global.x,t.data.global.y)})),this.backgroundArea.on("panend",(function(t){return e._onPanEnd()})),this.pixiContainer.addChild(this.backgroundArea),this.viewPosition=new Cy({initialViewX:o?o.getGameResolutionWidth()/2:0,initialViewY:o?o.getGameResolutionHeight()/2:0,width:this.props.width,height:this.props.height,instancesEditorSettings:this.props.instancesEditorSettings}),this.grid=new Wy({viewPosition:this.viewPosition,instancesEditorSettings:this.props.instancesEditorSettings}),this.pixiContainer.addChild(this.grid.getPixiObject()),this.pinchHandler=new ky({canvas:this.pixiRenderer.view,setZoomFactor:this.setZoomFactor,getZoomFactor:this.getZoomFactor,viewPosition:this.viewPosition}),this.canvasCursor=new Jy({canvas:t,shouldMoveView:function(){return e.keyboardShortcuts.shouldMoveView()}}),this._instancesAdder=new $y({instances:this.props.initialInstances,instancesEditorSettings:this.props.instancesEditorSettings}),this._mountEditorComponents(this.props),this._renderScene(),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}}},{key:"_mountEditorComponents",value:function(e){this.highlightedInstance&&this.pixiContainer.removeChild(this.highlightedInstance.getPixiObject()),this.selectedInstances&&this.pixiContainer.removeChild(this.selectedInstances.getPixiContainer()),this.instancesRenderer&&(this.pixiContainer.removeChild(this.instancesRenderer.getPixiContainer()),this.instancesRenderer.delete()),this.selectionRectangle&&(this.pixiContainer.removeChild(this.selectionRectangle.getPixiObject()),this.selectionRectangle.delete()),this.windowBorder&&this.pixiContainer.removeChild(this.windowBorder.getPixiObject()),this.windowMask&&this.pixiContainer.removeChild(this.windowMask.getPixiObject()),this.statusBar&&this.pixiContainer.removeChild(this.statusBar.getPixiObject()),this.instancesRenderer=new Py({project:e.project,layout:e.layout,instances:e.initialInstances,viewPosition:this.viewPosition,onOverInstance:this._onOverInstance,onMoveInstance:this._onMoveInstance,onMoveInstanceEnd:this._onMoveInstanceEnd,onDownInstance:this._onDownInstance,onOutInstance:this._onOutInstance,onInstanceClicked:this._onInstanceClicked,onInstanceRightClicked:this._onInstanceRightClicked,onInstanceDoubleClicked:this._onInstanceDoubleClicked,showObjectInstancesIn3D:this._showObjectInstancesIn3D}),this.selectionRectangle=new Uy({instances:e.initialInstances,instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toSceneCoordinates:this.viewPosition.toSceneCoordinates}),this.selectedInstances=new By({instancesSelection:this.props.instancesSelection,onResize:this._onResize,onResizeEnd:this._onResizeEnd,onRotate:this._onRotate,onRotateEnd:this._onRotateEnd,instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toCanvasCoordinates:this.viewPosition.toCanvasCoordinates,screenType:this.props.screenType}),this.highlightedInstance=new _y({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toCanvasCoordinates:this.viewPosition.toCanvasCoordinates,isInstanceOf3DObject:this.props.isInstanceOf3DObject}),this.instancesResizer=new Oy({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),instancesEditorSettings:this.props.instancesEditorSettings}),this.instancesRotator=new Hy(this.instancesRenderer.getInstanceMeasurer()),this.instancesMover=new Vy({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),instancesEditorSettings:this.props.instancesEditorSettings}),this.windowBorder=new zy({project:e.project,layout:e.layout,toCanvasCoordinates:this.viewPosition.toCanvasCoordinates}),this.windowMask=new Gy({project:e.project,viewPosition:this.viewPosition,instancesEditorSettings:this.props.instancesEditorSettings}),this.statusBar=new Xy({width:this.props.width,height:this.props.height,getLastCursorSceneCoordinates:this.getLastCursorSceneCoordinates}),this.pixiContainer.addChild(this.selectionRectangle.getPixiObject()),this.pixiContainer.addChild(this.instancesRenderer.getPixiContainer()),this.pixiContainer.addChild(this.windowBorder.getPixiObject()),this.pixiContainer.addChild(this.windowMask.getPixiObject()),this.pixiContainer.addChild(this.selectedInstances.getPixiContainer()),this.pixiContainer.addChild(this.highlightedInstance.getPixiObject()),this.pixiContainer.addChild(this.statusBar.getPixiObject())}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,this.selectionRectangle.delete(),this.instancesRenderer.delete(),this._instancesAdder.unmount(),this.pinchHandler.unmount(),this.longTouchHandler.unmount(),this.nextFrame&&cancelAnimationFrame(this.nextFrame),qy(),this.pixiContainer.destroy(),this.pixiRenderer.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.width===this.props.width&&e.height===this.props.height||(this.pixiRenderer.resize(e.width,e.height),this.threeRenderer&&this.threeRenderer.setSize(e.width,e.height),this.viewPosition.resize(e.width,e.height),this.statusBar.resize(e.width,e.height),this.backgroundArea.hitArea=new jy.Rectangle(0,0,e.width,e.height),this.fpsLimiter.forceNextUpdate(),this._renderScene()),e.instancesEditorSettings!==this.props.instancesEditorSettings&&(this.grid.setInstancesEditorSettings(e.instancesEditorSettings),this.instancesMover.setInstancesEditorSettings(e.instancesEditorSettings),this.instancesResizer.setInstancesEditorSettings(e.instancesEditorSettings),this.windowMask.setInstancesEditorSettings(e.instancesEditorSettings),this.viewPosition.setInstancesEditorSettings(e.instancesEditorSettings),this._instancesAdder.setInstancesEditorSettings(e.instancesEditorSettings)),e.screenType!==this.props.screenType&&this.selectedInstances.setScreenType(this.props.screenType),this.props.layout===e.layout&&this.props.initialInstances===e.initialInstances&&this.props.project===e.project||this._mountEditorComponents(e),e.pauseRendering&&!this.props.pauseRendering&&this.pauseSceneRendering(),!e.pauseRendering&&this.props.pauseRendering&&this.restartSceneRendering()}},{key:"zoomOnCursorBy",value:function(e){var t=this.getLastCursorSceneCoordinates();this.setZoomFactor(this.getZoomFactor()*e);var n=this.getLastCursorSceneCoordinates();this.scrollBy(t[0]-n[0],t[1]-n[1])}},{key:"scrollBy",value:function(e,t){this.fpsLimiter.notifyInteractionHappened(),this.viewPosition.scrollBy(e,t),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"scrollTo",value:function(e,t){this.fpsLimiter.notifyInteractionHappened(),this.viewPosition.scrollTo(e,t),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"fitViewToRectangle",value:function(e,t){var n=t.adaptZoom,r=this.viewPosition.fitToRectangle(e);n&&this.setZoomFactor(r),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"getBoundingClientRect",value:function(){return this.canvasArea?this.canvasArea.getBoundingClientRect():{left:0,top:0,right:0,bottom:0}}},{key:"render",value:function(){var e=this;return this.props.project?(0,f.jsx)(oZ,{canDrop:function(){return!0},hover:function(t){e.fpsLimiter.notifyInteractionHappened();var n=e._instancesAdder,r=e.viewPosition,o=e.canvasArea;if(n&&o&&r){var i=t.getClientOffset(),a=i.x,s=i.y,l=o.getBoundingClientRect(),c=r.toSceneCoordinates(a-l.left,s-l.top);n.createOrUpdateTemporaryInstancesFromObjectNames(c,e.props.selectedObjectNames,e.props.selectedLayer)}},drop:function(t){e.fpsLimiter.notifyInteractionHappened();var n=e._instancesAdder,r=e.viewPosition,o=e.canvasArea;if(n&&o&&r)if(t.didDrop())n.deleteTemporaryInstances();else{var i=t.getClientOffset(),a=i.x,s=i.y,l=o.getBoundingClientRect(),c=r.toSceneCoordinates(a-l.left,s-l.top),u=n.updateTemporaryInstancePositions(c);n.commitTemporaryInstances(),e.props.onInstancesAdded(u)}},children:function(t){var n=t.connectDropTarget,r=t.isOver;return e._instancesAdder&&!r&&e._instancesAdder.deleteTemporaryInstances(),n((0,f.jsx)("div",{ref:function(t){return e.canvasArea=t},style:rZ.canvasArea,id:nZ}))}}):null}}]),n}(u.Component),aZ=function(e){var t=e.is3DInstance,n=e.i18n,r=e.forceUpdate,o=e.onEditObjectByName,i=e.onGetInstanceSize,a=e.layout,s=function(e){return e.hasCustomSize()?e.getCustomWidth():i(e)[0]},l=function(e){return e.hasCustomSize()?e.getCustomHeight():i(e)[1]},c=function(e){return e.hasCustomDepth()?e.getCustomDepth():i(e)[2]};return[{name:n._({id:"Object"}),getValue:function(e){return e.getObjectName()},nonFieldType:"sectionTitle",defaultValue:n._({id:"Different objects"})},{label:n._({id:"Edit object"}),disabled:"onValuesDifferent",nonFieldType:"button",getValue:function(e){return e.getObjectName()},onClick:function(e){return o(e.getObjectName())}},{name:n._({id:"Instance"}),nonFieldType:"sectionTitle"},{name:"Position",type:"row",children:[{name:"X",getLabel:function(){return n._({id:"X"})},valueType:"number",getValue:function(e){return e.getX()},setValue:function(e,t){return e.setX(t)}},{name:"Y",getLabel:function(){return n._({id:"Y"})},valueType:"number",getValue:function(e){return e.getY()},setValue:function(e,t){return e.setY(t)}},t?{name:"Z",getLabel:function(){return n._({id:"Z"})},valueType:"number",getValue:function(e){return e.getZ()},setValue:function(e,t){return e.setZ(t)}}:null].filter(Boolean)},{name:"Angles",type:"row",children:[t?{name:"RotationX",getLabel:function(){return n._({id:"Rotation (X)"})},valueType:"number",getValue:function(e){return e.getRotationX()},setValue:function(e,t){return e.setRotationX(t)}}:null,t?{name:"RotationY",getLabel:function(){return n._({id:"Rotation (Y)"})},valueType:"number",getValue:function(e){return e.getRotationY()},setValue:function(e,t){return e.setRotationY(t)}}:null,{name:"Angle",getLabel:function(){return t?n._({id:"Rotation (Z)"}):n._({id:"Angle"})},valueType:"number",getValue:function(e){return e.getAngle()},setValue:function(e,t){return e.setAngle(t)}}].filter(Boolean)},{name:"Lock instance position angle",getLabel:function(){return n._({id:"Lock position/angle in the editor"})},valueType:"boolean",getValue:function(e){return e.isLocked()},setValue:function(e,t){e.setLocked(t),t||e.setSealed(t)}},{name:"Prevent instance selection",getLabel:function(){return n._({id:"Prevent selection in the editor"})},valueType:"boolean",disabled:function(e){return e.some((function(e){return!e.isLocked()}))},getValue:function(e){return e.isSealed()},setValue:function(e,t){return e.setSealed(t)}},t?null:{name:"Z Order",getLabel:function(){return n._({id:"Z Order"})},valueType:"number",getValue:function(e){return e.getZOrder()},setValue:function(e,t){return e.setZOrder(t)}},{name:"Layer",getLabel:function(){return n._({id:"Layer"})},valueType:"string",getChoices:function(){return _C(a)},getValue:function(e){return e.getLayer()},setValue:function(e,t){return e.setLayer(t)}},{name:"Custom size",getLabel:function(){return n._({id:"Custom size"})},valueType:"boolean",getValue:function(e){return e.hasCustomSize()},setValue:function(e,t){0===e.getCustomHeight()&&0===e.getCustomWidth()&&0===e.getCustomDepth()&&(e.setCustomWidth(s(e)),e.setCustomHeight(l(e)),e.setCustomDepth(c(e))),e.setHasCustomSize(t),e.setHasCustomDepth(t),r()}},{name:"custom-size-row",type:"row",children:[{name:"Width",getLabel:function(){return n._({id:"Width"})},valueType:"number",getValue:s,setValue:function(e,t){e.setCustomWidth(Math.max(t,0)),e.setCustomHeight(l(e)),e.setCustomDepth(c(e)),e.setHasCustomSize(!0),e.setHasCustomDepth(!0),r()}},{name:"Height",getLabel:function(){return n._({id:"Height"})},valueType:"number",getValue:l,setValue:function(e,t){e.setCustomWidth(s(e)),e.setCustomHeight(Math.max(t,0)),e.setCustomDepth(c(e)),e.setHasCustomSize(!0),e.setHasCustomDepth(!0),r()}},t?{name:"Depth",getLabel:function(){return n._({id:"Depth"})},valueType:"number",getValue:c,setValue:function(e,t){e.setCustomWidth(s(e)),e.setCustomHeight(l(e)),e.setCustomDepth(Math.max(t,0)),e.setHasCustomSize(!0),e.setHasCustomDepth(!0),r()}}:null].filter(Boolean)}].filter(Boolean)},sZ=function(e){var t=e.instances,n=e.i18n,r=e.project,o=e.layout,i=e.unsavedChanges,a=e.historyHandler,s=e.onEditObjectByName,l=e.onGetInstanceSize,d=e.editInstanceVariables,p=e.onInstancesModified,h=(0,_t.Z)(),g=u.useMemo((function(){return aZ({i18n:n,is3DInstance:!1,onGetInstanceSize:l,onEditObjectByName:s,layout:o,forceUpdate:h})}),[n,l,s,o,h]),m=u.useMemo((function(){return aZ({i18n:n,is3DInstance:!0,onGetInstanceSize:l,onEditObjectByName:s,layout:o,forceUpdate:h})}),[n,l,s,o,h]),x=t[0],v=u.useMemo((function(){if(!x)return{};var e=x.getObjectName(),t=Fc(r,o,e),n=x.getCustomProperties(r,o);if(!t)return{};var i=t.is3DObject(),a=(0,Jn.Z)(n,(function(e){return e.getCustomProperties(r,o)}),(function(e,t,n){return e.updateCustomProperty(t,n,r,o)}));return{object:t,instanceSchema:i?m.concat(a):g.concat(a)}}),[r,o,x,g,m]),b=v.object,j=v.instanceSchema;return b&&x&&j?(0,f.jsx)(Ot.Z,{autoHideScrollbar:!0,children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,id:"instance-properties-editor",children:[(0,f.jsxs)(L.sg,{children:[(0,f.jsx)(Xn.Z,{unsavedChanges:i,schema:j,instances:t,onInstancesModified:p}),(0,f.jsxs)(L.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Instance Variables"})}),(0,f.jsx)(A.Z,{size:"small",onClick:function(){d(x)},children:(0,f.jsx)(Oe.Z,{})})]})]}),b?(0,f.jsx)(Wn,{commitChangesOnBlur:!1,inheritedVariablesContainer:b.getVariables(),variablesContainer:x.getVariables(),size:"small",onComputeAllVariableNames:function(){return b?ko.findAllObjectVariables(r.getCurrentPlatform(),r,o,b):[]},historyHandler:a}):null]})},t.map((function(e){return""+e.ptr})).join(";")):null},lZ=u.forwardRef((function(e,t){var n=(0,_t.Z)();return u.useImperativeHandle(t,(function(){return{forceUpdate:n}})),(0,f.jsx)(Sh,{children:e.instances&&e.instances.length?(0,f.jsx)(sZ,(0,i.Z)({},e)):(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Click on an instance in the scene to display its properties"})})})})),cZ={display:"flex"},uZ={display:"flex",alignItems:"center",paddingLeft:4,paddingRight:4},dZ=function(e){return(0,f.jsx)("div",{id:e.id,style:(0,i.Z)((0,i.Z)({},cZ),{},{alignItems:e.alignItems}),children:e.children})},pZ=function(e){return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},uZ),{},{flex:e.expand?1:void 0},e.style),children:e.children})},hZ=function(e){return(0,f.jsx)(Ui.Z,(0,i.Z)({},e))},fZ=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.82935 3.83804C5.39722 4.23619 5.15563 4.82786 5.16706 5.62218C5.17848 6.37508 5.39213 6.85711 5.86513 7.36172C5.87329 7.37041 5.88144 7.3791 5.8896 7.38778C6.14834 7.66335 6.40538 7.9371 6.57841 8.30629C6.7614 8.69671 6.83385 9.15028 6.83356 9.77797C6.83343 10.0541 6.60946 10.2779 6.33332 10.2777C6.05718 10.2776 5.83343 10.0536 5.83356 9.7775C5.83382 9.22001 5.76768 8.93284 5.67293 8.73067C5.57371 8.51898 5.42477 8.35385 5.13572 8.04579C4.49779 7.36524 4.18245 6.64653 4.16718 5.63715C4.15254 4.62416 4.46642 3.73406 5.15174 3.10262C5.83056 2.47716 6.80717 2.16663 7.99999 2.16663C9.19304 2.16663 10.1699 2.47714 10.8488 3.1026C11.5343 3.7341 11.8481 4.62398 11.8328 5.63712C11.8181 6.64672 11.5022 7.36518 10.8646 8.04543C10.5761 8.35353 10.4272 8.51874 10.3279 8.73067C10.233 8.93308 10.1667 9.22047 10.1664 9.77797C10.1663 10.0541 9.94234 10.2779 9.6662 10.2777C9.39005 10.2776 9.1663 10.0536 9.16643 9.7775C9.16672 9.14982 9.23954 8.69647 9.42241 8.30629C9.59521 7.9376 9.85155 7.66405 10.1096 7.38872C10.1179 7.37979 10.1263 7.37085 10.1347 7.3619C10.6079 6.85708 10.822 6.37487 10.8329 5.62234C10.8449 4.82808 10.6034 4.23619 10.1713 3.83806C9.73257 3.43389 9.02942 3.16663 7.99999 3.16663C6.9709 3.16663 6.26801 3.43387 5.82935 3.83804ZM5.83356 11.5555C5.83356 11.2794 6.05741 11.0555 6.33356 11.0555H9.66643C9.94257 11.0555 10.1664 11.2794 10.1664 11.5555C10.1664 11.8317 9.94257 12.0555 9.66643 12.0555H6.33356C6.05741 12.0555 5.83356 11.8317 5.83356 11.5555ZM6.38903 13.3333C6.38903 13.0572 6.61289 12.8333 6.88903 12.8333H9.11095C9.38709 12.8333 9.61095 13.0572 9.61095 13.3333C9.61095 13.6094 9.38709 13.8333 9.11095 13.8333H6.88903C6.61289 13.8333 6.38903 13.6094 6.38903 13.3333Z",fill:"currentColor"})}))})),gZ=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 6.33337C7.0795 6.33337 6.33331 7.07957 6.33331 8.00004C6.33331 8.92052 7.0795 9.66671 7.99998 9.66671C8.92045 9.66671 9.66665 8.92052 9.66665 8.00004C9.66665 7.07957 8.92045 6.33337 7.99998 6.33337ZM5.33331 8.00004C5.33331 6.52728 6.52722 5.33337 7.99998 5.33337C9.47274 5.33337 10.6666 6.52728 10.6666 8.00004C10.6666 9.4728 9.47274 10.6667 7.99998 10.6667C6.52722 10.6667 5.33331 9.4728 5.33331 8.00004Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 1.33337C8.27612 1.33337 8.49998 1.55723 8.49998 1.83337V2.83337C8.49998 3.10952 8.27612 3.33337 7.99998 3.33337C7.72384 3.33337 7.49998 3.10952 7.49998 2.83337V1.83337C7.49998 1.55723 7.72384 1.33337 7.99998 1.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8535 4.14648C12.0488 4.34174 12.0488 4.65832 11.8535 4.85358L11.0641 5.64302C10.8689 5.83829 10.5523 5.8383 10.357 5.64304C10.1618 5.44779 10.1618 5.1312 10.357 4.93594L11.1464 4.1465C11.3417 3.95123 11.6583 3.95122 11.8535 4.14648Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6666 8.00011C12.6666 7.72396 12.8905 7.50011 13.1666 7.50011H14.1666C14.4428 7.50011 14.6666 7.72396 14.6666 8.00011C14.6666 8.27625 14.4428 8.50011 14.1666 8.50011H13.1666C12.8905 8.50011 12.6666 8.27625 12.6666 8.00011Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.357 10.3572C10.5523 10.1619 10.8689 10.1619 11.0641 10.3572L11.8535 11.1466C12.0488 11.3418 12.0488 11.6584 11.8535 11.8537C11.6583 12.0489 11.3417 12.0489 11.1464 11.8537L10.357 11.0643C10.1618 10.869 10.1618 10.5524 10.357 10.3572Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 12.6667C8.27612 12.6667 8.49998 12.8906 8.49998 13.1667V14.1667C8.49998 14.4428 8.27612 14.6667 7.99998 14.6667C7.72384 14.6667 7.49998 14.4428 7.49998 14.1667V13.1667C7.49998 12.8906 7.72384 12.6667 7.99998 12.6667Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.64294 10.3571C5.8382 10.5524 5.83819 10.8689 5.64293 11.0642L4.8535 11.8536C4.65823 12.0489 4.34165 12.0489 4.14639 11.8536C3.95113 11.6583 3.95114 11.3417 4.14641 11.1465L4.93583 10.3571C5.1311 10.1618 5.44768 10.1618 5.64294 10.3571Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.33331 8.00011C1.33331 7.72396 1.55717 7.50011 1.83331 7.50011H2.83331C3.10946 7.50011 3.33331 7.72396 3.33331 8.00011C3.33331 8.27625 3.10946 8.50011 2.83331 8.50011H1.83331C1.55717 8.50011 1.33331 8.27625 1.33331 8.00011Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.14637 4.1465C4.34164 3.95124 4.65822 3.95125 4.85348 4.14652L5.64291 4.93598C5.83817 5.13125 5.83816 5.44783 5.64289 5.64309C5.44762 5.83835 5.13104 5.83834 4.93578 5.64307L4.14636 4.85361C3.9511 4.65834 3.95111 4.34176 4.14637 4.1465Z",fill:"currentColor"})]}))})),mZ=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53802 2.71043C7.40791 2.65211 7.25908 2.65211 7.12897 2.71043L2.30602 4.87244C2.26414 4.89011 2.22516 4.91331 2.19001 4.94115C2.16548 4.96055 2.14295 4.98211 2.12265 5.00549C2.04635 5.09327 2.00016 5.20792 2.00016 5.33335V10.6537C1.99773 10.7486 2.02255 10.8418 2.07042 10.9224C2.11139 10.9914 2.16925 11.0511 2.24136 11.0946C2.26176 11.1069 2.28311 11.1179 2.30528 11.1273L7.12893 13.2896C7.38091 13.4026 7.67675 13.2899 7.78971 13.0379C7.83172 12.9442 7.84252 12.8444 7.82655 12.7502C7.83112 12.7231 7.8335 12.6951 7.8335 12.6667V7.82382L11.7002 6.09047V8.66669C11.7002 8.94283 11.9241 9.16669 12.2002 9.16669C12.4763 9.16669 12.7002 8.94283 12.7002 8.66669V5.33335C12.7002 5.08889 12.5248 4.8854 12.2929 4.84193L7.53802 2.71043ZM6.8335 12.0613L3.00016 10.3429V6.10543L6.8335 7.82382V12.0613ZM7.3335 6.95208L3.72249 5.33335L7.3335 3.71463L10.9445 5.33335L7.3335 6.95208Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8968 9.94616C14.5265 9.94616 15.029 10.0889 15.4045 10.3744C15.7839 10.6599 15.9736 11.186 15.9736 11.9526C15.9736 12.7035 15.7878 13.2334 15.4162 13.5424C15.0447 13.8475 14.5734 14 14.0024 14H12.8994V9.94616H13.8968ZM14.6125 10.6384C14.4522 10.5641 14.2586 10.527 14.0317 10.527H13.6738V13.4192H14.0552C14.3993 13.4192 14.6692 13.3136 14.8648 13.1024C15.0603 12.8873 15.1581 12.504 15.1581 11.9526C15.1581 11.5693 15.1073 11.274 15.0056 11.0667C14.9078 10.8555 14.7768 10.7127 14.6125 10.6384Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M10.7004 9.98136C10.9664 9.98136 11.1952 10.0302 11.3868 10.128C11.5824 10.2258 11.731 10.3588 11.8327 10.527C11.9344 10.6951 11.9852 10.8829 11.9852 11.0902C11.9852 11.3131 11.9363 11.5282 11.8385 11.7355C11.7447 11.9389 11.5863 12.1657 11.3633 12.416C11.1404 12.6663 10.8138 12.9968 10.3836 13.4075H12.0732L11.9911 14H9.53294V13.4486C10.0336 12.9401 10.3914 12.5646 10.6065 12.3222C10.8256 12.0758 10.98 11.8665 11.07 11.6944C11.1639 11.5184 11.2108 11.3366 11.2108 11.1488C11.2108 10.9689 11.158 10.8281 11.0524 10.7264C10.9507 10.6247 10.8138 10.5739 10.6417 10.5739C10.4892 10.5739 10.3543 10.6071 10.2369 10.6736C10.1235 10.7362 10.0042 10.8418 9.87907 10.9904L9.42147 10.6267C9.75391 10.1965 10.1802 9.98136 10.7004 9.98136Z",fill:"currentColor"})]}))})),xZ=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53802 2.71043C7.40791 2.65211 7.25908 2.65211 7.12897 2.71043L2.30602 4.87244C2.26414 4.89011 2.22516 4.91331 2.19001 4.94115C2.16548 4.96055 2.14295 4.98211 2.12265 5.00549C2.04635 5.09327 2.00016 5.20792 2.00016 5.33335V10.6537C1.99773 10.7486 2.02255 10.8418 2.07042 10.9224C2.11139 10.9914 2.16925 11.0511 2.24136 11.0946C2.26176 11.1069 2.28311 11.1179 2.30528 11.1273L7.12893 13.2896C7.38091 13.4026 7.67675 13.2899 7.78971 13.0379C7.83172 12.9442 7.84252 12.8444 7.82655 12.7502C7.83112 12.7231 7.8335 12.6951 7.8335 12.6667V7.82382L11.7002 6.09047V8.66669C11.7002 8.94283 11.9241 9.16669 12.2002 9.16669C12.4763 9.16669 12.7002 8.94283 12.7002 8.66669V5.33335C12.7002 5.08889 12.5248 4.88541 12.2929 4.84193L7.53802 2.71043ZM6.8335 7.82382L3.00016 6.10543V10.3429L6.8335 12.0613V7.82382ZM7.3335 6.95208L3.72249 5.33335L7.3335 3.71463L10.9445 5.33335L7.3335 6.95208Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.914 9.94616C14.5436 9.94616 15.0462 10.0889 15.4217 10.3744C15.8011 10.6599 15.9908 11.186 15.9908 11.9526C15.9908 12.7035 15.805 13.2334 15.4334 13.5424C15.0619 13.8475 14.5906 14 14.0196 14H12.9166V9.94616H13.914ZM14.6297 10.6384C14.4693 10.5641 14.2757 10.527 14.0489 10.527H13.691V13.4192H14.0724C14.4165 13.4192 14.6864 13.3136 14.882 13.1024C15.0775 12.8873 15.1753 12.504 15.1753 11.9526C15.1753 11.5693 15.1244 11.274 15.0228 11.0667C14.925 10.8555 14.794 10.7127 14.6297 10.6384Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M10.6945 9.98136C10.9566 9.98136 11.1815 10.0263 11.3692 10.1163C11.5608 10.2062 11.7036 10.3275 11.7975 10.48C11.8952 10.6326 11.9441 10.8007 11.9441 10.9846C11.9441 11.2231 11.8757 11.4226 11.7388 11.583C11.6019 11.7394 11.4142 11.8489 11.1756 11.9115C11.4376 11.935 11.6527 12.0288 11.8209 12.1931C11.9891 12.3574 12.0732 12.5842 12.0732 12.8736C12.0732 13.1005 12.0145 13.3058 11.8972 13.4896C11.7838 13.6734 11.6195 13.8201 11.4044 13.9296C11.1893 14.0352 10.9351 14.088 10.6417 14.088C10.102 14.088 9.67568 13.8983 9.36279 13.519L9.77933 13.12C9.9123 13.253 10.0433 13.3508 10.1724 13.4134C10.3015 13.472 10.4442 13.5014 10.6007 13.5014C10.8119 13.5014 10.98 13.4427 11.1052 13.3254C11.2343 13.2041 11.2988 13.0418 11.2988 12.8384C11.2988 12.6116 11.2382 12.4493 11.1169 12.3515C10.9996 12.2537 10.8236 12.2048 10.5889 12.2048H10.278L10.366 11.671H10.5772C10.7688 11.671 10.9214 11.6182 11.0348 11.5126C11.1521 11.407 11.2108 11.2603 11.2108 11.0726C11.2108 10.9122 11.158 10.787 11.0524 10.6971C10.9468 10.6032 10.806 10.5563 10.63 10.5563C10.4775 10.5563 10.3386 10.5856 10.2135 10.6443C10.0883 10.699 9.96315 10.7851 9.83799 10.9024L9.45666 10.4859C9.81257 10.1495 10.2252 9.98136 10.6945 9.98136Z",fill:"currentColor"})]}))})),vZ=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4045 3.70769C11.029 3.42217 10.5265 3.27942 9.89677 3.27942H8.89944V7.33329H10.0024C10.5734 7.33329 11.0447 7.18075 11.4162 6.87569C11.7878 6.56671 11.9736 6.03675 11.9736 5.28582C11.9736 4.51924 11.7839 3.9932 11.4045 3.70769ZM10.8648 6.43569C10.6692 6.64689 10.3994 6.75249 10.0552 6.75249H9.67384V3.86022H10.0317C10.2586 3.86022 10.4521 3.89737 10.6125 3.97169C10.7768 4.046 10.9078 4.18875 11.0056 4.39995C11.1073 4.60724 11.1581 4.90253 11.1581 5.28582C11.1581 5.83729 11.0603 6.22057 10.8648 6.43569Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M6.7004 3.31462C6.96636 3.31462 7.19516 3.36351 7.3868 3.46129C7.58236 3.55906 7.73098 3.69204 7.83267 3.86022C7.93436 4.0284 7.9852 4.21613 7.9852 4.42342C7.9852 4.64635 7.93631 4.86146 7.83853 5.06875C7.74467 5.27213 7.58627 5.49897 7.36333 5.74929C7.1404 5.9996 6.81382 6.33009 6.3836 6.74075H8.0732L7.99107 7.33329H5.53293V6.78182C6.03356 6.27337 6.39142 5.89791 6.60653 5.65542C6.82556 5.40902 6.98005 5.19977 7.07 5.02769C7.16387 4.85169 7.2108 4.66982 7.2108 4.48209C7.2108 4.30217 7.158 4.16137 7.0524 4.05969C6.95071 3.958 6.81382 3.90715 6.64173 3.90715C6.4892 3.90715 6.35427 3.9404 6.23693 4.00689C6.12351 4.06946 6.00422 4.17506 5.87907 4.32369L5.42147 3.95995C5.75391 3.52973 6.18022 3.31462 6.7004 3.31462Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4217 9.57436C11.0462 9.28885 10.5436 9.1461 9.91395 9.1461H8.91662V13.2H10.0196C10.5906 13.2 11.0619 13.0474 11.4334 12.7424C11.805 12.4334 11.9908 11.9034 11.9908 11.1525C11.9908 10.3859 11.8011 9.85988 11.4217 9.57436ZM10.882 12.3024C10.6864 12.5136 10.4165 12.6192 10.0724 12.6192H9.69102V9.7269H10.0489C10.2757 9.7269 10.4693 9.76405 10.6297 9.83836C10.794 9.91268 10.925 10.0554 11.0228 10.2666C11.1244 10.4739 11.1753 10.7692 11.1753 11.1525C11.1753 11.704 11.0775 12.0873 10.882 12.3024Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.36919 9.31623C7.18146 9.22627 6.95657 9.1813 6.69453 9.1813C6.22519 9.1813 5.81257 9.34947 5.45666 9.68583L5.83799 10.1024C5.96315 9.98503 6.0883 9.89899 6.21346 9.84423C6.33862 9.78556 6.47746 9.75623 6.62999 9.75623C6.80599 9.75623 6.94679 9.80316 7.05239 9.89703C7.15799 9.98699 7.21079 10.1121 7.21079 10.2725C7.21079 10.4602 7.15213 10.6069 7.03479 10.7125C6.92137 10.8181 6.76884 10.8709 6.57719 10.8709H6.36599L6.27799 11.4048H6.58893C6.82359 11.4048 6.99959 11.4537 7.11693 11.5514C7.23817 11.6492 7.29879 11.8115 7.29879 12.0384C7.29879 12.2417 7.23426 12.4041 7.10519 12.5253C6.98004 12.6426 6.81186 12.7013 6.60066 12.7013C6.44422 12.7013 6.30146 12.672 6.17239 12.6133C6.04333 12.5507 5.9123 12.4529 5.77933 12.32L5.36279 12.7189C5.67568 13.0983 6.10199 13.288 6.64173 13.288C6.93506 13.288 7.18928 13.2352 7.40439 13.1296C7.6195 13.0201 7.78377 12.8734 7.89719 12.6896C8.01453 12.5057 8.07319 12.3004 8.07319 12.0736C8.07319 11.7841 7.9891 11.5573 7.82093 11.393C7.65275 11.2288 7.43764 11.1349 7.17559 11.1114C7.41417 11.0489 7.6019 10.9393 7.73879 10.7829C7.87568 10.6225 7.94413 10.4231 7.94413 10.1845C7.94413 10.0007 7.89524 9.8325 7.79746 9.67996C7.70359 9.52743 7.56084 9.40619 7.36919 9.31623Z",fill:"currentColor"})]}))})),bZ=(0,Lt.x)("layers-list"),jZ={outline:"1px solid white"},CZ=function(e){var t=e.id,n=e.layer,r=e.isSelected,o=e.onSelect,a=e.nameError,s=e.onBlur,l=e.onRemove,d=e.isVisible,p=e.isLocked,h=e.onChangeLockState,g=e.effectsCount,x=e.onEditEffects,v=e.onChangeVisibility,b=e.onBeginDrag,j=e.onDrop,C=e.width,y=e.onEdit,Z=u.useContext(m.Z),k=n.getName(),w=n.isLightingLayer(),T=n.getRenderingType(),E=w?(0,f.jsx)(fZ,{}):"2d"===T?(0,f.jsx)(mZ,{}):"3d"===T?(0,f.jsx)(xZ,{}):"2d+3d"===T?(0,f.jsx)(vZ,{}):(0,f.jsx)(Pt.Z,{}),S=!k;return(0,f.jsx)(c.I18n,{children:function(e){var m=e.i18n;return(0,f.jsx)(bZ,{beginDrag:function(){return b(),{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:j,children:function(e){var n=e.connectDragSource,b=e.connectDropTarget,j=e.isOver;e.canDrop;return b((0,f.jsxs)("div",{children:[j&&(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},jZ),{},{outlineColor:Z.dropIndicator.canDrop})}),(0,f.jsxs)(dZ,{id:t,children:[(0,f.jsx)(pZ,{children:n((0,f.jsx)("span",{id:"layer-drag-handle",children:(0,f.jsx)(At.Z,{})}))}),(0,f.jsx)(pZ,{children:(0,f.jsx)(De.ZP,{title:(0,f.jsx)(c.Trans,{id:"Layer where instances are added by default"}),children:(0,f.jsx)(Kb.Z,{checked:r,onChange:o,size:"small",id:"layer-selected-".concat(r?"checked":"unchecked")})})}),(0,f.jsx)(pZ,{expand:!0,children:(0,f.jsx)(Dt.Z,{margin:"none",value:S?m._({id:"Base layer"}):k,id:"layer-name",errorText:a,disabled:S,onChange:s,commitOnBlur:!0,fullWidth:!0})}),(0,f.jsx)(pZ,{children:C<350?(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",children:(0,f.jsx)(Fe.Z,{})}),buildMenuTemplate:function(e){return[{label:w?e._({id:"Edit lighting properties"}):e._({id:"Edit properties"}),click:y},{label:e._({id:"Edit effects ({effectsCount})",values:{effectsCount:g}}),click:x},{type:"checkbox",label:e._({id:"Visible"}),checked:d,click:function(){return v(!d)}},{type:"checkbox",label:e._({id:"Locked"}),enabled:d,checked:p||!d,click:function(){return h(!p)}},{type:"separator"},{label:e._({id:"Delete"}),enabled:!S,click:l}]}}):(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(al.Z,{id:"layer-visibility",paddingSize:"small",checked:d,checkedIcon:(0,f.jsx)(ya.Z,{}),uncheckedIcon:(0,f.jsx)(Za,{}),onCheck:function(e,t){return v(t)},tooltipOrHelperText:d?(0,f.jsx)(c.Trans,{id:"Hide layer"}):(0,f.jsx)(c.Trans,{id:"Show layer"})}),(0,f.jsx)(al.Z,{id:"layer-lock",paddingSize:"small",disabled:!d,checked:p||!d,checkedIcon:(0,f.jsx)(Ni,{}),uncheckedIcon:(0,f.jsx)(ka,{}),onCheck:function(e,t){return h(t)},tooltipOrHelperText:p?(0,f.jsx)(c.Trans,{id:"Unlock layer"}):(0,f.jsx)(c.Trans,{id:"Lock layer"})}),(0,f.jsx)(A.Z,{size:"small",onClick:x,tooltip:{id:"Edit effects ({effectsCount})",values:{effectsCount:g}},children:(0,f.jsx)(hZ,{badgeContent:g,color:"primary",children:(0,f.jsx)(gZ,{})})}),(0,f.jsx)(A.Z,{size:"small",onClick:y,tooltip:w?{id:"Edit lighting properties"}:{id:"Edit properties"},children:E}),(0,f.jsx)(A.Z,{size:"small",onClick:l,disabled:S,tooltip:{id:"Delete the layer"},children:(0,f.jsx)(Dn.Z,{})})]})})]})]}))}},n.ptr)}})},yZ=function(e){var t=e.layout,n=e.onBackgroundColorChanged;return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(dZ,{children:[(0,f.jsx)(pZ,{children:(0,f.jsx)(At.Z,{disabled:!0})}),(0,f.jsx)(pZ,{expand:!0,children:(0,f.jsx)(po.ZP,{fullWidth:!0,value:r._({id:"Background color"}),margin:"none",disabled:!0})}),(0,f.jsx)(pZ,{children:(0,f.jsx)(pp.Z,{disableAlpha:!0,color:{r:t.getBackgroundColorRed(),g:t.getBackgroundColorGreen(),b:t.getBackgroundColorBlue(),a:255},onChangeComplete:function(e){t.setBackgroundColor(e.rgb.r,e.rgb.g,e.rgb.b),n()}})})]})}})},ZZ={flexContainer:{display:"flex",flex:1,position:"relative"}},kZ=function(e){var t=e.children;return(0,f.jsx)(Zt.Z,{bounds:!0,children:function(e){var n=e.contentRect,r=e.measureRef;return(0,f.jsx)("div",{style:ZZ.flexContainer,ref:r,children:!!n&&!!n.bounds&&t({width:n.bounds.width,height:n.bounds.height})})}})},wZ=n.g.gd,TZ=ch("layers-list"),EZ=function(e){var t=(0,_t.Z)(),n=u.useContext(m.Z),o=u.useState({}),s=(0,a.Z)(o,2),l=s[0],d=s[1],p=u.useRef(null),h=e.project,g=e.layersContainer,x=e.onEditEffects,v=e.onEdit,b=e.width,j=e.onRenameLayer,C=e.onRemoveLayer,y=e.unsavedChanges,Z=function(){y&&y.triggerUnsavedChanges(),t()},k=function(e){var t=p.current;null!==t&&(e!==t&&(g.moveLayer(t,e<t?e+1:e),Z()),p.current=null)},w=g.getLayersCount(),T=(0,Nt.mapReverseFor)(0,w,(function(t){var n=g.getLayerAt(t),o=n.getName();return(0,f.jsx)(CZ,{id:"layer-".concat(t),layer:n,isSelected:e.selectedLayer===o,onSelect:function(){return e.onSelectLayer(o)},nameError:l[o],effectsCount:n.getEffects().getEffectsCount(),onEditEffects:function(){return x(n)},onEdit:function(){return v(n)},onBeginDrag:function(){p.current=t},onDrop:function(){return k(t)},onBlur:function(e){(d((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},o,null))})),o!==e)&&(g.hasLayerNamed(e)?d((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},o,(0,f.jsx)(c.Trans,{id:"The name {newName} is already taken",values:{newName:e}})))})):j(o,e,(function(t){t&&g.getLayer(o).setName(e),wZ.WholeProjectRefactorer.renameLayer(h,g,o,e)})))},onRemove:function(){C(o,(function(e){e&&(g.removeLayer(o),Z())}))},isVisible:n.getVisibility(),onChangeVisibility:function(e){n.setVisibility(e),Z()},isLocked:n.isLocked(),onChangeLockState:function(e){n.setLocked(e),Z()},width:b},"layer-".concat(n.ptr))}));return(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[T,(0,f.jsx)(TZ,{canDrop:function(){return!0},drop:function(){k(-1)},children:function(e){var t=e.connectDropTarget,r=e.isOver;e.canDrop;return t((0,f.jsxs)("div",{children:[r&&(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},jZ),{},{outlineColor:n.dropIndicator.canDrop})}),(0,f.jsx)(yZ,{layout:g,onBackgroundColorChanged:Z})]}))}})]})},SZ=u.forwardRef((function(e,t){var n=(0,_t.Z)();u.useImperativeHandle(t,(function(){return{forceUpdate:n}}));var r=function(){var t=e.layersContainer,n=(0,Ut.Z)("Lighting",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(n,t.getLayersCount());var r=t.getLayer(n);r.setLightingLayer(!0),r.setFollowBaseLayerCamera(!0),r.setAmbientLightColor(200,200,200),o(),e.onCreateLayer()},o=function(){e.unsavedChanges&&e.unsavedChanges.triggerUnsavedChanges(),n()},i=e.layersContainer.ptr,a=function(e){var t=e.getLayersCount();return(0,Nt.mapReverseFor)(0,t,(function(t){return e.getLayerAt(t).isLightingLayer()})).filter(Boolean).length>0}(e.layersContainer);return(0,f.jsx)(Sh,{children:(0,f.jsxs)(Ot.Z,{autoHideScrollbar:!0,children:[(0,f.jsx)(kZ,{children:function(t){var n=t.width;return(0,f.jsx)(EZ,{selectedLayer:e.selectedLayer,onSelectLayer:e.onSelectLayer,project:e.project,layersContainer:e.layersContainer,onEditEffects:e.onEditLayerEffects,onEdit:e.onEditLayer,onRemoveLayer:e.onRemoveLayer,onRenameLayer:e.onRenameLayer,unsavedChanges:e.unsavedChanges,width:n},i)}}),(0,f.jsx)(L.sg,{children:(0,f.jsx)(L.x1,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(qb.Z,{label:(0,f.jsx)(c.Trans,{id:"Add a layer"}),id:"add-layer-button",primary:!0,onClick:function(){var t=e.layersContainer,n=(0,Ut.Z)("Layer",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(n,t.getLayersCount()),o(),e.onCreateLayer()},icon:(0,f.jsx)(Ue.Z,{}),buildMenuTemplate:function(e){return[{label:e._({id:"Add lighting layer"}),enabled:!a,click:r}]}})})})]})})})),PZ=n(9215),IZ=n.n(PZ),DZ=["wrappedEditorRef"],AZ=200,LZ=1e3/60,MZ={container:{overflow:"hidden"}},FZ=function(){},OZ=function(e){var t=e.wrappedEditorRef,n=(0,yt.Z)(e,DZ),r=u.useContext(X.ZP).values,o=(0,ov.t)(),a=u.useRef(null),s=u.useRef(null),l=u.useRef(null),c=u.useRef(null),d=u.useRef(null),p=u.useRef(!1),h=u.useRef(null),g=u.useRef(!1),m=u.useRef(0),x=u.useRef(0),v=u.useRef(-5e3),b=u.useRef(5e3),j=u.useRef(-5e3),C=u.useRef(5e3),y=u.useRef(0),Z=u.useRef(0),k=(0,_t.Z)(),w=u.useMemo((function(){return new wy}),[]);if(a.current){var T=a.current.getBoundingClientRect();w.set({left:T.left,top:T.top,right:T.right-50,bottom:T.bottom-50})}var E=u.useCallback((function(){h.current&&clearTimeout(h.current),h.current=setTimeout((function(){o.current&&(p.current=!1,k())}),1500)}),[k,o]),S=(0,zs.N)((function(){E()}),500),P=IZ()((function(){p.current||(p.current=!0,k()),h.current&&(clearTimeout(h.current),h.current=null)}),1e3,{leading:!0,trailing:!1}),I=IZ()(E,1e3,{leading:!0,trailing:!1}),D=u.useCallback((function(e){a.current&&(!w.containsPoint(e.clientX,e.clientY)?(h.current&&clearTimeout(h.current),p.current||P()):!g.current&&p.current&&I())}),[w,I,P]),A=u.useCallback((function(e,t){return IZ()((function(n){if(y.current){var r=n.clientX-e,o=(b.current-v.current)/y.current,i=t+r*o;m.current=i,a.current&&a.current.scrollTo(i,x.current),k()}else console.error("canvasWidth not initialized")}),LZ,{leading:!1,trailing:!0})}),[k]),L=u.useCallback((function(e,t){return IZ()((function(n){if(Z.current){var r=n.clientY-e,o=(C.current-j.current)/Z.current,i=t+r*o;x.current=i,a.current&&a.current.scrollTo(m.current,i),k()}else console.error("canvasHeight not initialized")}),LZ,{leading:!1,trailing:!0})}),[k]),M=u.useCallback((function(e){return function t(n){g.current=!1,n.target!==s.current&&n.target!==l.current&&E(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[E]),F=u.useCallback((function(e){return function t(n){g.current=!1,n.target!==c.current&&n.target!==d.current&&E(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[E]),O=u.useCallback((function(e){g.current=!0;var t=e.clientX,n=A(t,m.current),r=M(n);document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}),[A,M]),R=u.useCallback((function(e){g.current=!0;var t=e.clientY,n=L(t,x.current),r=F(n);document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}),[L,F]);u.useEffect((function(){var e=l.current,t=d.current;if(e&&t)return e.addEventListener("mousedown",O),t.addEventListener("mousedown",R),function(){e.removeEventListener("mousedown",O),t.removeEventListener("mousedown",R)}}),[O,R]);var B=u.useCallback((function(e){var t=e.newXValue,n=e.newYValue,r=e.newWidth,o=e.newHeight;b.current=Math.max(Math.abs(t)+100,b.current),C.current=Math.max(Math.abs(n)+100,C.current),v.current=-b.current,j.current=-C.current,m.current=t,x.current=n,y.current=r,Z.current=o,p.current||(p.current=!0),S(),k()}),[k,S]),_=u.useCallback((function(e){return IZ()((function(){e&&B({newXValue:e.getViewX(),newYValue:e.getViewY(),newWidth:e.getWidth(),newHeight:e.getHeight()})}),LZ,{leading:!1,trailing:!0})()}),[B]),N=function(e){h.current&&clearTimeout(h.current)},U=function(e){g.current||E()},H="calc(100% - ".concat(AZ,"px - ").concat(8,"px)"),V="calc(".concat((m.current-v.current)/(b.current-v.current)*100+"%"," - ").concat(AZ,"px / 2)"),W="max(min(".concat(V,", ").concat(H,"), ").concat("0%",")"),z="calc(100% - ".concat(AZ,"px - ").concat(8,"px)"),G="calc(".concat((x.current-j.current)/(C.current-j.current)*100+"%"," - ").concat(AZ,"px / 2)"),Y="max(min(".concat(G,", ").concat(z,"), ").concat("0%",")"),q=(0,eo.BF)();return(0,f.jsx)(kZ,{children:function(e){var o=e.width,u=e.height;return(0,f.jsxs)("div",{style:MZ.container,children:[void 0!==o&&void 0!==u&&(0,f.jsx)(iZ,(0,i.Z)({onViewPositionChanged:"touch"!==q?_:FZ,ref:function(e){t&&t(e),a.current=e},width:o,height:u,screenType:q,onMouseMove:D,onMouseLeave:function(e){var t=e.relatedTarget;!g.current&&t&&t.className&&"string"===typeof t.className&&!t.className.includes("canvas-scrollbar-thumb")&&E()},showObjectInstancesIn3D:r.use3DEditor},n)),"touch"!==q&&(0,f.jsx)("div",{style:{visibility:p.current?"visible":"hidden"},className:"canvas-vertical-scrollbar-track",ref:c,children:(0,f.jsx)("div",{style:{top:Y},className:"canvas-scrollbar-thumb canvas-vertical-scrollbar-thumb",ref:d,onMouseEnter:N,onMouseLeave:U})}),"touch"!==q&&(0,f.jsx)("div",{style:{visibility:p.current?"visible":"hidden"},className:"canvas-horizontal-scrollbar-track",ref:s,children:(0,f.jsx)("div",{style:{marginLeft:W},className:"canvas-scrollbar-thumb canvas-horizontal-scrollbar-thumb",ref:l,onMouseEnter:N,onMouseLeave:U})})]})}})},RZ={mediumContainer:{padding:0,width:32,height:32},smallContainer:{padding:0,width:16,height:16},icon:{width:16,height:16}};function BZ(e){return(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{style:"small"===e.size?RZ.smallContainer:RZ.mediumContainer,children:(0,f.jsx)(ux.Z,{htmlColor:"inherit",style:RZ.icon})}),buildMenuTemplate:e.buildMenuTemplate})}var _Z=n(18624),NZ=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 3.66663C5.60679 3.66663 3.66669 5.60673 3.66669 7.99996C3.66669 10.3932 5.60679 12.3333 8.00002 12.3333C10.3933 12.3333 12.3334 10.3932 12.3334 7.99996C12.3334 5.60673 10.3933 3.66663 8.00002 3.66663ZM2.66669 7.99996C2.66669 5.05444 5.0545 2.66663 8.00002 2.66663C10.9456 2.66663 13.3334 5.05445 13.3334 7.99996C13.3334 10.9455 10.9456 13.3333 8.00002 13.3333C5.05451 13.3333 2.66669 10.9455 2.66669 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33335 7.99996C5.33335 7.72382 5.55721 7.49996 5.83335 7.49996H10.1667C10.4428 7.49996 10.6667 7.72382 10.6667 7.99996C10.6667 8.2761 10.4428 8.49996 10.1667 8.49996H5.83335C5.55721 8.49996 5.33335 8.2761 5.33335 7.99996Z",fill:"currentColor"})]}))})),UZ=n.g.gd,HZ=400,VZ=80,WZ=40,zZ=50,GZ={container:{flex:1,display:"flex",flexDirection:"column",alignItems:"stretch"},tableContainer:{flex:1,overflowX:"auto",overflowY:"hidden",scrollbarWidth:"thin"}},YZ=function(e,t,n){return(e=e.toLowerCase())<(t=t.toLowerCase())?1*n:e>t?-1*n:0},qZ=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchText:"",sortBy:"",sortDirection:jr.Sr.ASC},e.renderedRows=[],e._searchBar=u.createRef(),e._keyboardShortcuts=new Rt.Z({isActive:function(){return!1},shortcutCallbacks:{}}),e._onRowClick=function(t){var n=t.index;e.renderedRows[n]&&e.props.onSelectInstances([e.renderedRows[n].instance],e._keyboardShortcuts.shouldMultiSelect())},e._rowGetter=function(t){var n=t.index;return e.renderedRows[n]},e._rowClassName=function(t){var n=t.index;if(n<0)return"tableHeaderRow";var r=e.renderedRows[n];return r&&-1!==e.props.selectedInstances.indexOf(r.instance)?"tableSelectedRow":n%2===0?"tableEvenRow":"tableOddRow"},e._renderLockCell=function(e){var t=e.rowData.instance;return(0,f.jsx)(A.Z,{size:"small",onClick:function(){if(t.isSealed())return t.setSealed(!1),void t.setLocked(!1);t.isLocked()?t.setSealed(!0):t.setLocked(!0)},children:t.isLocked()&&t.isSealed()?(0,f.jsx)(NZ,{}):t.isLocked()?(0,f.jsx)(Ni,{}):(0,f.jsx)(ka,{})})},e._selectFirstInstance=function(){e.renderedRows.length&&e.props.onSelectInstances([e.renderedRows[0].instance],!1)},e._sort=function(t){var n=t.sortBy,r=t.sortDirection;e.setState({sortBy:n,sortDirection:r})},e._orderRenderedRows=function(){e.renderedRows.sort((function(t,n){var r=e.state.sortDirection===jr.Sr.ASC?1:-1;switch(e.state.sortBy){case"name":return YZ(t.name,n.name,r);case"x":return r*(parseFloat(t.x)-parseFloat(n.x));case"y":return r*(parseFloat(t.y)-parseFloat(n.y));case"angle":return r*(parseFloat(t.angle)-parseFloat(n.angle));case"layer":return YZ(t.layer,n.layer,r);case"locked":return r*(Number(t.locked)-Number(n.locked));case"zOrder":return r*(parseFloat(t.zOrder)-parseFloat(n.zOrder));default:return 0}}))},e}return(0,lt.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.instanceRowRenderer=new UZ.InitialInstanceJSFunctor,this.instanceRowRenderer.invoke=function(t){var n=e.state.searchText,r=UZ.wrapPointer(t,UZ.InitialInstance),o=r.getObjectName();n&&-1===o.toLowerCase().indexOf(n.toLowerCase())||e.renderedRows.push({instance:r,name:o,locked:r.isLocked(),x:(0,Ba.q)(r.getX(),2),y:(0,Ba.q)(r.getY(),2),angle:(0,Ba.q)(r.getAngle(),2),layer:r.getLayer(),zOrder:r.getZOrder()})}}},{key:"componentWillUnmount",value:function(){this.instanceRowRenderer&&this.instanceRowRenderer.delete()}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchText,r=t.sortBy,o=t.sortDirection,i=this.props.instances;if(!this.instanceRowRenderer)return null;this.renderedRows.length=0,i.iterateOverInstances(this.instanceRowRenderer),this._orderRenderedRows();var a=i.ptr;return(0,f.jsx)(m.Z.Consumer,{children:function(t){return(0,f.jsxs)("div",{style:GZ.container,children:[(0,f.jsx)("div",{style:GZ.tableContainer,onKeyDown:e._keyboardShortcuts.onKeyDown,onKeyUp:e._keyboardShortcuts.onKeyUp,children:(0,f.jsx)(jr.qj,{children:function(n){var i=n.height,s=n.width;return(0,f.jsxs)(jr.iA,{ref:function(t){return e.table=t},headerHeight:30,height:i,className:"gd-table ".concat(t.tableRootClassName),headerClassName:"tableHeaderColumn",rowCount:e.renderedRows.length,rowGetter:e._rowGetter,rowHeight:32,onRowClick:e._onRowClick,rowClassName:e._rowClassName,sort:e._sort,sortBy:r,sortDirection:o,width:Math.max(s,HZ),children:[(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Object name"}),dataKey:"name",width:Math.max(.35*s,VZ),className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:"",dataKey:"locked",width:Math.max(.05*s,WZ),className:"tableColumn",cellRenderer:e._renderLockCell}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"X"}),dataKey:"x",width:Math.max(.1*s,WZ),className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Y"}),dataKey:"y",width:Math.max(.1*s,WZ),className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Angle"}),dataKey:"angle",width:Math.max(.1*s,WZ),className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Layer"}),dataKey:"layer",width:Math.max(.2*s,zZ),className:"tableColumn"}),(0,f.jsx)(jr.sg,{label:(0,f.jsx)(c.Trans,{id:"Z Order"}),dataKey:"zOrder",width:Math.max(.1*s,WZ),className:"tableColumn"})]},a)}})}),(0,f.jsx)(pt.Z,{value:n,onChange:function(t){return e.setState({searchText:t})},onRequestSearch:e._selectFirstInstance,ref:e._searchBar,placeholder:{id:"Search instances"},aspect:"integrated-search-bar",autoFocus:"desktop"})]})}})}}]),n}(u.Component),XZ={direction:"row",first:"properties",splitPercentage:23,second:{direction:"row",first:"instances-editor",second:"objects-list",splitPercentage:77}},JZ=function(){},KZ={"objects-list":{position:"end",splitPercentage:75,direction:"column"},properties:{position:"start",splitPercentage:25,direction:"column"},"object-groups-list":{position:"end",splitPercentage:75,direction:"column"},"instances-list":{position:"end",splitPercentage:75,direction:"row"},"layers-list":{position:"end",splitPercentage:75,direction:"row"}},QZ=u.forwardRef((function(e,t){var n=e.project,r=e.layout,o=e.initialInstances,i=e.selectedLayer,s=e.onSelectInstances,l="small"===(0,T.L)(),d=u.useContext(X.ZP),p=d.getDefaultEditorMosaicNode,h=d.setDefaultEditorMosaicNode,g=e.instancesSelection.getSelectedInstances(),m=u.useState([]),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useRef(null),C=u.useRef(null),y=u.useRef(null),Z=u.useRef(null),k=u.useRef(null),w=u.useRef(null),E=u.useRef(null),S=u.useCallback((function(){j.current&&j.current.forceUpdate()}),[]),P=u.useCallback((function(){y.current&&y.current.forceUpdate()}),[]),I=u.useCallback((function(){k.current&&k.current.forceUpdateList()}),[]),D=u.useCallback((function(){E.current&&E.current.forceUpdate()}),[]),A=u.useCallback((function(){C.current&&C.current.forceUpdate()}),[]),L=u.useCallback((function(e){return Z.current?Z.current.getInstanceSize(e):[0,0,0]}),[]),M=u.useCallback((function(){k.current&&k.current.openNewObjectDialog()}),[]),F=u.useCallback((function(e){if(w.current){var t=KZ[e];w.current.toggleEditor(e,t.position,t.splitPercentage,t.direction)}}),[]),O=u.useCallback((function(e){return!!w.current&&w.current.getOpenedEditorNames().includes(e)}),[]);u.useImperativeHandle(t,(function(){var e=Z.current;return{getName:function(){return"mosaic"},forceUpdateInstancesList:P,forceUpdateInstancesPropertiesEditor:S,forceUpdateObjectsList:I,forceUpdateObjectGroupsList:D,forceUpdateLayersList:A,openNewObjectDialog:M,toggleEditorView:F,isEditorVisible:O,viewControls:{zoomBy:e?e.zoomBy:JZ,setZoomFactor:e?e.setZoomFactor:JZ,zoomToInitialPosition:e?e.zoomToInitialPosition:JZ,zoomToFitContent:e?e.zoomToFitContent:JZ,zoomToFitSelection:e?e.zoomToFitSelection:JZ,centerViewOnLastInstance:e?e.centerViewOnLastInstance:JZ,getLastCursorSceneCoordinates:e?e.getLastCursorSceneCoordinates:function(){return[0,0]},getLastContextMenuSceneCoordinates:e?e.getLastContextMenuSceneCoordinates:function(){return[0,0]},getViewPosition:e?e.getViewPosition:JZ},instancesHandlers:{getSelectionAABB:e?e.selectedInstances.getSelectionAABB:function(){return new wy},addInstances:e?e.addInstances:function(){return[]},clearHighlightedInstance:e?e.clearHighlightedInstance:JZ,resetInstanceRenderersFor:e?e.resetInstanceRenderersFor:JZ,forceRemountInstancesRenderers:e?e.forceRemount:JZ,addSerializedInstances:e?e.addSerializedInstances:function(){return[]}}}}));var R=u.useCallback((function(e,t){s(e,t),P(),S()}),[P,S,s]),B=u.useCallback((function(){var e=new Set;return Ec(n,r).allObjectsList.forEach((function(t){var n=t.object;(0,wc.zJ)(n.getTags()).forEach((function(t){return e.add(t)}))})),Array.from(e)}),[n,r]),_=u.useCallback((function(e){return(0,wc.it)({noTagLabel:e._({id:"No tags - add a tag to an object first"}),getAllTags:B,selectedTags:v,onChange:b})}),[v,B]),N={properties:{type:"secondary",title:{id:"Properties"},renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(lZ,{i18n:o,project:n,layout:r,instances:g,editInstanceVariables:e.editInstanceVariables,onEditObjectByName:e.editObjectByName,onInstancesModified:P,onGetInstanceSize:L,ref:j,unsavedChanges:e.unsavedChanges,historyHandler:e.historyHandler})}})}},"layers-list":{type:"secondary",title:{id:"Layers"},renderEditor:function(){return(0,f.jsx)(SZ,{project:n,selectedLayer:i,onSelectLayer:e.onSelectLayer,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onRemoveLayer:e.onRemoveLayer,onRenameLayer:e.onRenameLayer,onCreateLayer:S,layersContainer:r,unsavedChanges:e.unsavedChanges,ref:C,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})}},"instances-list":{type:"secondary",title:{id:"Instances List"},renderEditor:function(){return(0,f.jsx)(qZ,{instances:o,selectedInstances:g,onSelectInstances:R,ref:y})}},"instances-editor":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,f.jsx)(OZ,{project:n,layout:r,selectedLayer:i,initialInstances:o,instancesEditorSettings:e.instancesEditorSettings,onInstancesEditorSettingsMutated:e.onInstancesEditorSettingsMutated,instancesSelection:e.instancesSelection,onInstancesAdded:e.onInstancesAdded,onInstancesSelected:e.onInstancesSelected,onInstanceDoubleClicked:e.onInstanceDoubleClicked,onInstancesMoved:e.onInstancesMoved,onInstancesResized:e.onInstancesResized,onInstancesRotated:e.onInstancesRotated,selectedObjectNames:e.selectedObjectNames,onContextMenu:e.onContextMenu,isInstanceOf3DObject:e.isInstanceOf3DObject,instancesEditorShortcutsCallbacks:e.instancesEditorShortcutsCallbacks,wrappedEditorRef:function(e){Z.current=e},pauseRendering:!e.isActive})}},"objects-list":{type:"secondary",title:{id:"Objects"},toolbarControls:[(0,f.jsx)(BZ,{buildMenuTemplate:_},"tags"),(0,f.jsx)(_Z.Z,{},"close")],renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var i=t.i18n;return(0,f.jsx)(wj,{getThumbnail:Oc.Z.getThumbnail.bind(Oc.Z),project:n,objectsContainer:r,layout:r,initialInstances:o,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,resourceManagementProps:e.resourceManagementProps,selectedObjectNames:e.selectedObjectNames,canInstallPrivateAsset:e.canInstallPrivateAsset,onEditObject:e.onEditObject,onExportObject:e.onExportObject,onDeleteObject:function(t,n){return e.onDeleteObject(i,t,n)},getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,i)},onObjectCreated:e.onObjectCreated,onObjectSelected:e.onObjectSelected,renamedObjectWithContext:e.renamedObjectWithContext,onRenameObjectStart:e.onRenameObjectStart,onRenameObjectFinish:e.onRenameObjectFinish,onAddObjectInstance:e.onAddObjectInstance,onObjectPasted:e.updateBehaviorsSharedData,selectedObjectTags:v,beforeSetAsGlobalObject:function(t){return e.canObjectOrGroupBeGlobal(i,t)},onChangeSelectedObjectTags:b,getAllObjectTags:B,ref:k,unsavedChanges:e.unsavedChanges,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})}})}},"object-groups-list":{type:"secondary",title:{id:"Object Groups"},renderEditor:function(){return(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(Lx,{ref:E,globalObjectGroups:n.getObjectGroups(),objectGroups:r.getObjectGroups(),onEditGroup:e.onEditObjectGroup,onDeleteGroup:e.onDeleteObjectGroup,onRenameGroup:e.onRenameObjectGroup,getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,o)},beforeSetAsGlobalGroup:function(t){return e.canObjectOrGroupBeGlobal(o,t)},unsavedChanges:e.unsavedChanges})}})}}};return(0,f.jsx)(Om.Z,{editors:N,limitToOneSecondaryEditor:l,initialNodes:p("scene-editor")||XZ,onOpenedEditorsChanged:e.onOpenedEditorsChanged,onPersistNodes:function(e){return h("scene-editor",e)},ref:w})})),$Z=QZ,ek=function(e){var t=u.useRef(null),n=u.useRef(null);return{onTouchStart:u.useCallback((function(e){t.current=Date.now(),n.current=e.touches[0].clientY}),[]),onTouchEnd:u.useCallback((function(r){if(n.current&&t.current){var o=n.current,i=t.current,a=r.changedTouches[0].clientY-o,s=(Date.now()-i)/1e3;Math.abs(a)>30&&Math.abs(a)/s>200&&(a<0?e.onSwipeUp():e.onSwipeDown()),t.current=null,n.current=null}}),[e])}},tk={container:{flexDirection:"column",overflow:"hidden"},childrenContainer:{display:"flex",flex:1,overflowY:"auto",scrollbarWidth:"thin",overflowX:"hidden"},topBarContainer:{borderRadius:"8px 8px 0 0",padding:4},topBarHandleContainer:{height:4,display:"flex",justifyContent:"center",alignItems:"center"},topBarHandle:{height:4,width:"40%",borderRadius:2}},nk=function(e){var t=u.useContext(m.Z),n=ek({onSwipeUp:e.onSwipeUp,onSwipeDown:e.onSwipeDown}),r=n.onTouchStart,o=n.onTouchEnd;return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},tk.topBarContainer),{},{backgroundColor:(0,ee.d)(t,"light")}),onClick:e.onClick,onTouchStart:r,onTouchEnd:o,children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)("div",{style:tk.topBarHandleContainer,children:(0,f.jsx)("span",{style:(0,i.Z)((0,i.Z)({},tk.topBarHandle),{},{backgroundColor:t.swipeableDrawer.topBar.pillColor})})}),(0,f.jsx)(L.sg,{children:(0,f.jsxs)(L.x1,{noMargin:!0,justifyContent:e.controls?"space-between":"flex-start",alignItems:"center",children:[(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:e.title}),e.controls]})})]})})},rk=function(e){var t=e.openingState,n=e.setOpeningState,r="closed"===t?0:"halfOpen"===t?.42*e.maxHeight:e.maxHeight-52,o="closed"===t?"none":"flex";return(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},tk.container),{},{height:r,display:o}),children:[(0,f.jsx)(nk,{title:e.title,onClick:function(){return n("closed")},onSwipeUp:function(){"halfOpen"===t&&n("open")},onSwipeDown:function(){"halfOpen"===t?n("closed"):"open"===t&&n("halfOpen")},controls:e.topBarControls}),(0,f.jsx)("div",{style:tk.childrenContainer,children:e.children})]})},ok={container:{padding:4,paddingBottom:8}},ik={"objects-list":{buttonId:"toolbar-open-objects-panel-button",icon:(0,f.jsx)($C,{})},"object-groups-list":{buttonId:"toolbar-open-object-groups-panel-button",icon:(0,f.jsx)(ey,{})},properties:{buttonId:"toolbar-open-properties-panel-button",icon:(0,f.jsx)(Pt.Z,{})},"instances-list":{buttonId:"toolbar-open-instances-list-panel-button",icon:(0,f.jsx)(ty,{})},"layers-list":{buttonId:"toolbar-open-layers-panel-button",icon:(0,f.jsx)(ny,{})}},ak=function(e){return(0,f.jsx)(ee.Z,{background:"medium",square:!0,style:ok.container,children:(0,f.jsx)(x,{children:(0,f.jsx)(b,{children:Object.keys(ik).map((function(t){var n=ik[t],r=n.icon,o=n.buttonId,i=e.selectedEditorId===t;return(0,f.jsx)(A.Z,{color:"default",disableRipple:!0,disableFocusRipple:!0,id:o,onClick:function(){e.onSelectEditor(t)},selected:i,children:r},t)}))})})})},sk={"objects-list":(0,f.jsx)(c.Trans,{id:"Objects"}),properties:(0,f.jsx)(c.Trans,{id:"Instance properties"}),"object-groups-list":(0,f.jsx)(c.Trans,{id:"Objects groups"}),"instances-list":(0,f.jsx)(c.Trans,{id:"Instances"}),"layers-list":(0,f.jsx)(c.Trans,{id:"Layers"})},lk=function(){},ck={container:{width:"100%"},bottomContainer:{position:"absolute",bottom:0,width:"100%"},instancesListContainer:{display:"flex",flex:1}},uk=u.forwardRef((function(e,t){var n=e.project,r=e.layout,o=e.initialInstances,i=e.selectedLayer,s=e.onSelectInstances,l=e.instancesSelection.getSelectedInstances(),d=u.useState([]),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useContext(X.ZP).values,x=(0,eo.BF)(),v=u.useRef(null),b=u.useRef(null),j=u.useRef(null),C=u.useRef(null),y=u.useRef(null),Z=u.useRef(null),k=u.useState(null),w=(0,a.Z)(k,2),T=w[0],E=w[1],S=u.useState("closed"),P=(0,a.Z)(S,2),I=P[0],D=P[1],A=u.useCallback((function(e){T===e?D("closed"===I?"halfOpen":"closed"):(E(e||null),"closed"===I&&D("halfOpen"))}),[T,I]),L=u.useCallback((function(){v.current&&v.current.forceUpdate()}),[]),M=u.useCallback((function(){j.current&&j.current.forceUpdate()}),[]),F=u.useCallback((function(){y.current&&y.current.forceUpdateList()}),[]),O=u.useCallback((function(){Z.current&&Z.current.forceUpdate()}),[]),R=u.useCallback((function(){b.current&&b.current.forceUpdate()}),[]),B=u.useCallback((function(e){return C.current?C.current.getInstanceSize(e):[0,0,0]}),[]),_=u.useCallback((function(){y.current&&y.current.openNewObjectDialog()}),[]),N=u.useCallback((function(e){return e===T&&"closed"!==I}),[T,I]);u.useImperativeHandle(t,(function(){var e=C.current;return{getName:function(){return"swipeableDrawer"},forceUpdateInstancesList:M,forceUpdateInstancesPropertiesEditor:L,forceUpdateObjectsList:F,forceUpdateObjectGroupsList:O,forceUpdateLayersList:R,openNewObjectDialog:_,toggleEditorView:A,isEditorVisible:N,viewControls:{zoomBy:e?e.zoomBy:lk,setZoomFactor:e?e.setZoomFactor:lk,zoomToInitialPosition:e?e.zoomToInitialPosition:lk,zoomToFitContent:e?e.zoomToFitContent:lk,zoomToFitSelection:e?e.zoomToFitSelection:lk,centerViewOnLastInstance:e?e.centerViewOnLastInstance:lk,getLastCursorSceneCoordinates:e?e.getLastCursorSceneCoordinates:function(){return[0,0]},getLastContextMenuSceneCoordinates:e?e.getLastContextMenuSceneCoordinates:function(){return[0,0]},getViewPosition:e?e.getViewPosition:lk},instancesHandlers:{getSelectionAABB:e?e.selectedInstances.getSelectionAABB:function(){return new wy},addInstances:e?e.addInstances:function(){return[]},clearHighlightedInstance:e?e.clearHighlightedInstance:lk,resetInstanceRenderersFor:e?e.resetInstanceRenderersFor:lk,forceRemountInstancesRenderers:e?e.forceRemount:lk,addSerializedInstances:e?e.addSerializedInstances:function(){return[]}}}}));var U=u.useCallback((function(e,t){s(e,t,"upperCenter"),M(),L()}),[M,L,s]),H=u.useCallback((function(){var e=new Set;return Ec(n,r).allObjectsList.forEach((function(t){var n=t.object;(0,wc.zJ)(n.getTags()).forEach((function(t){return e.add(t)}))})),Array.from(e)}),[n,r]),V=u.useCallback((function(e){return(0,wc.it)({noTagLabel:e._({id:"No tags - add a tag to an object first"}),getAllTags:H,selectedTags:h,onChange:g})}),[h,H]);return(0,f.jsx)(kZ,{children:function(t){var a=t.width,s=t.height;return(0,f.jsxs)("div",{style:ck.container,children:[(0,f.jsx)(iZ,{ref:C,height:s,width:a,project:n,layout:r,selectedLayer:i,screenType:x,initialInstances:o,instancesEditorSettings:e.instancesEditorSettings,onInstancesEditorSettingsMutated:e.onInstancesEditorSettingsMutated,instancesSelection:e.instancesSelection,onInstancesAdded:e.onInstancesAdded,onInstancesSelected:e.onInstancesSelected,onInstanceDoubleClicked:e.onInstanceDoubleClicked,onInstancesMoved:e.onInstancesMoved,onInstancesResized:e.onInstancesResized,onInstancesRotated:e.onInstancesRotated,selectedObjectNames:e.selectedObjectNames,onContextMenu:e.onContextMenu,isInstanceOf3DObject:e.isInstanceOf3DObject,instancesEditorShortcutsCallbacks:e.instancesEditorShortcutsCallbacks,pauseRendering:!e.isActive,showObjectInstancesIn3D:m.use3DEditor}),(0,f.jsxs)("div",{style:ck.bottomContainer,children:[(0,f.jsxs)(rk,{maxHeight:s,title:T?sk[T]:null,openingState:I,setOpeningState:D,topBarControls:"objects-list"===T?[(0,f.jsx)(BZ,{size:"small",buildMenuTemplate:V},"tags")]:null,children:["objects-list"===T&&(0,f.jsx)(c.I18n,{children:function(t){var i=t.i18n;return(0,f.jsx)(wj,{getThumbnail:Oc.Z.getThumbnail.bind(Oc.Z),project:n,objectsContainer:r,layout:r,initialInstances:o,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,resourceManagementProps:e.resourceManagementProps,selectedObjectNames:e.selectedObjectNames,canInstallPrivateAsset:e.canInstallPrivateAsset,onEditObject:e.onEditObject,onExportObject:e.onExportObject,onDeleteObject:function(t,n){return e.onDeleteObject(i,t,n)},getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,i)},onObjectCreated:e.onObjectCreated,onObjectSelected:e.onObjectSelected,renamedObjectWithContext:e.renamedObjectWithContext,onRenameObjectStart:e.onRenameObjectStart,onRenameObjectFinish:e.onRenameObjectFinish,onAddObjectInstance:function(t){return e.onAddObjectInstance(t,"upperCenter")},onObjectPasted:e.updateBehaviorsSharedData,selectedObjectTags:h,beforeSetAsGlobalObject:function(t){return e.canObjectOrGroupBeGlobal(i,t)},onChangeSelectedObjectTags:g,getAllObjectTags:H,ref:y,unsavedChanges:e.unsavedChanges,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})}}),"properties"===T&&(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(lZ,{i18n:o,project:n,layout:r,instances:l,editInstanceVariables:e.editInstanceVariables,onEditObjectByName:e.editObjectByName,onInstancesModified:M,onGetInstanceSize:B,ref:v,unsavedChanges:e.unsavedChanges,historyHandler:e.historyHandler})}}),"object-groups-list"===T&&(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(Lx,{ref:Z,globalObjectGroups:n.getObjectGroups(),objectGroups:r.getObjectGroups(),onEditGroup:e.onEditObjectGroup,onDeleteGroup:e.onDeleteObjectGroup,onRenameGroup:e.onRenameObjectGroup,getValidatedObjectOrGroupName:function(t,n){return e.getValidatedObjectOrGroupName(t,n,o)},beforeSetAsGlobalGroup:function(t){return e.canObjectOrGroupBeGlobal(o,t)},unsavedChanges:e.unsavedChanges})}}),"instances-list"===T&&(0,f.jsx)(ee.Z,{background:"medium",square:!0,style:ck.instancesListContainer,children:(0,f.jsx)(qZ,{instances:o,selectedInstances:l,onSelectInstances:U,ref:j})}),"layers-list"===T&&(0,f.jsx)(SZ,{project:n,selectedLayer:i,onSelectLayer:e.onSelectLayer,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onRemoveLayer:e.onRemoveLayer,onRenameLayer:e.onRenameLayer,onCreateLayer:L,layersContainer:r,unsavedChanges:e.unsavedChanges,ref:b,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps})]}),(0,f.jsx)(ak,{selectedEditorId:"closed"===I?null:T,onSelectEditor:A})]})]})}})})),dk=uk,pk=n.g.gd,hk="Instances",fk={container:{display:"flex",flex:1,position:"relative",overflow:"hidden"}},gk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(e){var r;return(0,st.Z)(this,n),(r=t.call(this,e)).updateToolbar=function(){var e=(0,ct.Z)(r).editorDisplay;e&&("mosaic"===e.getName()?r.props.setToolbar((0,f.jsx)(iy,{instancesSelection:r.instancesSelection,toggleObjectsList:r.toggleObjectsList,isObjectsListShown:e.isEditorVisible("objects-list"),toggleObjectGroupsList:r.toggleObjectGroupsList,isObjectGroupsListShown:e.isEditorVisible("object-groups-list"),toggleProperties:r.toggleProperties,isPropertiesShown:e.isEditorVisible("properties"),deleteSelection:r.deleteSelection,toggleInstancesList:r.toggleInstancesList,isInstancesListShown:e.isEditorVisible("instances-list"),toggleLayersList:r.toggleLayersList,isLayersListShown:e.isEditorVisible("layers-list"),toggleWindowMask:r.toggleWindowMask,isWindowMaskShown:function(){return!!r.state.instancesEditorSettings.windowMask},toggleGrid:r.toggleGrid,isGridShown:function(){return!!r.state.instancesEditorSettings.grid},openSetupGrid:r.openSetupGrid,setZoomFactor:r.setZoomFactor,getContextMenuZoomItems:r.getContextMenuZoomItems,canUndo:Kt(r.state.history),canRedo:Jt(r.state.history),undo:r.undo,redo:r.redo,onOpenSettings:r.openSceneProperties,settingsIcon:(0,f.jsx)(Og,{}),canRenameObject:1===r.state.selectedObjectsWithContext.length,onRenameObject:r._startRenamingSelectedObject})):r.props.setToolbar((0,f.jsx)(ay,{instancesSelection:r.instancesSelection,toggleObjectsList:r.toggleObjectsList,toggleObjectGroupsList:r.toggleObjectGroupsList,toggleProperties:r.toggleProperties,deleteSelection:r.deleteSelection,toggleInstancesList:r.toggleInstancesList,toggleLayersList:r.toggleLayersList,toggleWindowMask:r.toggleWindowMask,isWindowMaskShown:function(){return!!r.state.instancesEditorSettings.windowMask},toggleGrid:r.toggleGrid,isGridShown:function(){return!!r.state.instancesEditorSettings.grid},openSetupGrid:r.openSetupGrid,setZoomFactor:r.setZoomFactor,getContextMenuZoomItems:r.getContextMenuZoomItems,canUndo:Kt(r.state.history),canRedo:Jt(r.state.history),undo:r.undo,redo:r.redo,onOpenSettings:r.openSceneProperties,settingsIcon:(0,f.jsx)(Og,{}),canRenameObject:1===r.state.selectedObjectsWithContext.length,onRenameObject:r._startRenamingSelectedObject})))},r.toggleObjectsList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("objects-list")},r.toggleProperties=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("properties")},r.toggleObjectGroupsList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("object-groups-list")},r.toggleInstancesList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("instances-list")},r.toggleLayersList=function(){r.editorDisplay&&r.editorDisplay.toggleEditorView("layers-list")},r.toggleWindowMask=function(){r.setState({instancesEditorSettings:(0,i.Z)((0,i.Z)({},r.state.instancesEditorSettings),{},{windowMask:!r.state.instancesEditorSettings.windowMask})})},r.toggleGrid=function(){r.setState({instancesEditorSettings:(0,i.Z)((0,i.Z)({},r.state.instancesEditorSettings),{},{grid:!r.state.instancesEditorSettings.grid,snap:!r.state.instancesEditorSettings.grid})})},r.openSetupGrid=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({setupGridOpen:e})},r.openSceneProperties=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({scenePropertiesDialogOpen:e})},r.openObjectEditor=function(){if(r.instancesSelection.hasSelectedInstances()){var e=r.instancesSelection.getSelectedInstances()[0].getObjectName();r.editObjectByName(e)}},r.editLayerEffects=function(e){r.setState({editedLayer:e,editedLayerInitialTab:"effects"})},r.editLayer=function(e){r.setState({editedLayer:e,editedLayerInitialTab:"properties"})},r.editInstanceVariables=function(e){r.setState({variablesEditedInstance:e})},r.editLayoutVariables=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];r.setState({layoutVariablesDialogOpen:e})},r.editObject=function(e,t){var n=r.props.project;e?r.setState({editedObjectWithContext:{object:e,global:n.hasObjectNamed(e.getName())},editedObjectInitialTab:t||"properties"}):r.setState({editedObjectWithContext:null,editedObjectInitialTab:"properties"})},r.openObjectExporterDialog=function(e){r.setState({exportedObject:e})},r.editObjectByName=function(e,t){var n=r.props,o=n.project,i=n.layout;i.hasObjectNamed(e)?r.editObject(i.getObject(e),t):o.hasObjectNamed(e)&&r.editObject(o.getObject(e),t)},r.editGroup=function(e){r.setState({editedGroup:e})},r.setInstancesEditorSettings=function(e){r.setState({instancesEditorSettings:e})},r._onInstancesEditorSettingsMutated=rd()((function(e){r.setInstancesEditorSettings(e)}),1e3,{leading:!1,trailing:!0}),r.undo=function(){r.instancesSelection.clearSelection(),r.setState({history:$t(r.state.history,r.props.initialInstances)},(function(){r.editorDisplay&&r.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),r.updateToolbar()}))},r.redo=function(){r.instancesSelection.clearSelection(),r.setState({history:en(r.state.history,r.props.initialInstances)},(function(){r.editorDisplay&&r.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),r.updateToolbar()}))},r._onObjectSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];e&&t.push(e),r.setState({selectedObjectsWithContext:t},(function(){r.updateToolbar()}))},r._createNewObjectAndInstanceUnderCursor=function(){r.editorDisplay&&(r.setState({newObjectInstanceSceneCoordinates:r.editorDisplay.viewControls.getLastCursorSceneCoordinates()}),r.editorDisplay?r.editorDisplay.openNewObjectDialog():r.toggleObjectsList())},r.addInstanceOnTheScene=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";if(r.editorDisplay){var n=r.editorDisplay.viewControls.getViewPosition(),o=[0,0];n&&(o=n.toSceneCoordinates(n.getWidth()/2,n.getHeight()/("upperCenter"===t?4:2))),r._addInstance(o,e)}},r._addInstance=function(e,t){if(t&&r.editorDisplay){var n=r.editorDisplay.instancesHandlers.addInstances(e,[t],r.state.selectedLayer);r._onInstancesAdded(n)}},r._onInstancesAdded=function(e){var t=null;e.forEach((function(e){null===t&&(r.props.layout.getLayer(e.getLayer()).getVisibility()||(t=e.getLayer()));var n=function(e,t,n){var r=e.getObjectName(),o=null;t.hasObjectNamed(r)?o=t.getObject(r):n.hasObjectNamed(r)&&(o=n.getObject(r));var i=o?my[o.getType()]:null;return i?(i.onInstanceAdded(e,t,n),i.getInfoBarDetails("onInstanceAdded")):null}(e,r.props.layout,r.props.project);n&&r.setState({additionalWorkInfoBar:n,showAdditionalWorkInfoBar:!0})})),null!==t&&r.onInstanceAddedOnInvisibleLayer(t),r.setState({history:Qt(r.state.history,r.props.initialInstances,"ADD")},(function(){return r.updateToolbar()}))},r.onInstanceAddedOnInvisibleLayer=function(e){r.setState({invisibleLayerOnWhichInstancesHaveJustBeenAdded:e})},r._onInstancesSelected=function(e){var t=r.props,n=t.project,o=t.layout,i=zd()(e.map((function(e){return e.getObjectName()}))),a=Ec(n,o,{names:i}).allObjectsList;r.setState({selectedObjectsWithContext:a},(function(){r.updateToolbar()}))},r._onInstanceDoubleClicked=function(e){r.editObjectByName(e.getObjectName())},r._onInstancesMoved=function(e){r.setState({history:Qt(r.state.history,r.props.initialInstances,"EDIT")},(function(){return r.forceUpdatePropertiesEditor()}))},r._onInstancesResized=function(e){r.setState({history:Qt(r.state.history,r.props.initialInstances,"EDIT")},(function(){return r.forceUpdatePropertiesEditor()}))},r._onInstancesRotated=function(e){r.setState({history:Qt(r.state.history,r.props.initialInstances,"EDIT")},(function(){return r.forceUpdatePropertiesEditor()}))},r._onInstancesModified=function(e){r.forceUpdate()},r._onSelectInstances=function(e,t,n){if(r.instancesSelection.selectInstances({instances:e,multiSelect:t,layersLocks:null,ignoreSeal:!0}),r.editorDisplay){var o=null,i=r.editorDisplay.viewControls,a=i.getViewPosition();a&&"upperCenter"===n&&(o=[0,a.toSceneScale(a.getHeight()/4)]),i.centerViewOnLastInstance(e,o)}r.updateToolbar()},r._addInstanceForNewObject=function(e){var t=r.state.newObjectInstanceSceneCoordinates;t&&(r._addInstance(t,e),r.setState({newObjectInstanceSceneCoordinates:null}))},r._onObjectCreated=function(e){var t=function(e,t,n){var r=my[e.getType()];return r?(r.onObjectAdded(e,t,n),r.getInfoBarDetails("onObjectAdded")):null}(e,r.props.layout,r.props.project);t&&r.setState({additionalWorkInfoBar:t,showAdditionalWorkInfoBar:!0}),r.props.unsavedChanges&&r.props.unsavedChanges.triggerUnsavedChanges(),r._addInstanceForNewObject(e.getName())},r._onRemoveLayer=function(e,t){r.setState({layerRemoved:e,onCloseLayerRemoveDialog:function(n,o){r.setState(function(t){var n={layerRemoved:null};return t&&e===r.state.selectedLayer&&(n.selectedLayer=""),n}(n),(function(){n&&(null===o?(r.instancesSelection.unselectInstancesOnLayer(e),pk.WholeProjectRefactorer.removeLayer(r.props.project,r.props.layout,e)):pk.WholeProjectRefactorer.mergeLayers(r.props.project,r.props.layout,e,o)),t(n),r.editorDisplay&&r.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),r.forceUpdateLayersList(),r.forceUpdatePropertiesEditor(),r.updateToolbar()}))}})},r._onRenameObjectStart=function(e){var t=[];e&&t.push(e),r.setState({renamedObjectWithContext:e,selectedObjectsWithContext:t},(function(){r.updateToolbar()}))},r._startRenamingSelectedObject=function(){r._onRenameObjectStart(r.state.selectedObjectsWithContext[0])},r._onRenameLayer=function(e,t,n){r.props.initialInstances.moveInstancesToLayer(e,t),n(!0),r.forceUpdatePropertiesEditor()},r._onDeleteObject=function(e,t,n){var o=t.object,i=t.global,a=r.props,s=a.project,l=a.layout,c=F.ZP.showYesNoCancelDialog(e._({id:"Do you want to remove all references to this object in groups and events (actions and conditions using the object)?"}));if("cancel"!==c){var u="yes"===c;r.instancesSelection.unselectInstancesOfObject(o.getName()),i?pk.WholeProjectRefactorer.globalObjectOrGroupRemoved(s,o.getName(),!1,u):pk.WholeProjectRefactorer.objectOrGroupRemovedInLayout(s,l,o.getName(),!1,u),n(!0),r.forceUpdatePropertiesEditor(),r.updateToolbar()}},r._getValidatedObjectOrGroupName=function(e,t,n){var o=r.props,i=o.project,a=o.layout;return(0,Ut.Z)(pk.Project.getSafeName(e),(function(e){if(a.hasObjectNamed(e)||i.hasObjectNamed(e)||a.getObjectGroups().has(e)||i.getObjectGroups().has(e))return!0;if(t){var n=a.getName();if((0,Nt.mapFor)(0,i.getLayoutsCount(),(function(t){var r=i.getLayoutAt(t),o=r.getName();if(n!==o){if(r.hasObjectNamed(e))return o;if(r.getObjectGroups().has(e))return o}return null})).filter(Boolean).length>0)return!0}return!1}))},r._onRenameEditedObject=function(e){var t=r.state.editedObjectWithContext;t&&r._onRenameObjectFinish(t,e,(function(){}))},r._onRenameObjectFinish=function(e,t,n){var o=e.object,i=e.global,a=r.props,s=a.project,l=a.layout;o.getName()!==t&&(i?pk.WholeProjectRefactorer.globalObjectOrGroupRenamed(s,o.getName(),t,!1):pk.WholeProjectRefactorer.objectOrGroupRenamedInLayout(s,l,o.getName(),t,!1)),o.setName(t),r._onObjectSelected(e),n(!0)},r._onMoveInstancesZOrder=function(e){var t=r.instancesSelection.getSelectedInstances(),n=t.reduce((function(e,t){return t.isLocked()||e.add(t.getLayer()),e}),new Set),o=new pk.HighestZOrderFinder,i={};n.forEach((function(t){o.reset(),o.restrictSearchToLayer(t),r.props.initialInstances.iterateOverInstances(o),i[t]="back"===e?o.getLowestZOrder():o.getHighestZOrder()})),o.delete(),t.forEach((function(t){if(!t.isLocked()){var n=i[t.getLayer()];if(t.getZOrder()===n)return;t.setZOrder(n+("front"===e?1:-1))}})),r.forceUpdateInstancesList(),r.forceUpdatePropertiesEditor()},r._onDeleteGroup=function(e,t){var n=e.group,o=e.global,i=r.props,a=i.project,s=i.layout,l=F.ZP.showConfirmDialog("Do you want to remove all references to this group in events (actions and conditions using the group)?");o?pk.WholeProjectRefactorer.globalObjectOrGroupRemoved(a,n.getName(),!0,!!l):pk.WholeProjectRefactorer.objectOrGroupRemovedInLayout(a,s,n.getName(),!0,!!l),t(!0)},r._onRenameGroup=function(e,t,n){var o=e.group,i=e.global,a=r.props,s=a.project,l=a.layout;o.getName()!==t&&(i?pk.WholeProjectRefactorer.globalObjectOrGroupRenamed(s,o.getName(),t,!0):pk.WholeProjectRefactorer.objectOrGroupRenamedInLayout(s,l,o.getName(),t,!0)),n(!0)},r.canObjectOrGroupBeGlobal=function(e,t){var n=r.props,o=n.layout,i=n.project,a=o.getName(),s=(0,Nt.mapFor)(0,i.getLayoutsCount(),(function(e){var n=i.getLayoutAt(e),r=n.getName();if(a!==r){if(n.hasObjectNamed(t))return r;if(n.getObjectGroups().has(t))return r}return null})).filter(Boolean);return!(s.length>0)||F.ZP.showConfirmDialog(e._({id:'Making "{objectOrGroupName}" global would conflict with the following scenes that have a group or an object with the same name:{0}Continue only if you know what you\'re doing.',values:{0:"\n\n - "+s.join("\n\n - ")+"\n\n",objectOrGroupName:t}}),"warning")},r.deleteSelection=function(){r.instancesSelection.getSelectedInstances().forEach((function(e){e.isLocked()||r.props.initialInstances.removeInstance(e)})),r.instancesSelection.clearSelection(),r.editorDisplay&&r.editorDisplay.instancesHandlers.clearHighlightedInstance(),r.setState({selectedObjectsWithContext:[],history:Qt(r.state.history,r.props.initialInstances,"DELETE")},(function(){r.updateToolbar(),r.forceUpdatePropertiesEditor()}))},r.zoomToInitialPosition=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomToInitialPosition()},r.zoomToFitContent=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomToFitContent()},r.zoomToFitSelection=function(){var e=r.instancesSelection.getSelectedInstances();r.editorDisplay&&r.editorDisplay.viewControls.zoomToFitSelection(e)},r.getContextMenuZoomItems=function(e){return[{label:e._({id:"Zoom in"}),click:r.zoomIn,accelerator:"CmdOrCtrl+numadd"},{label:e._({id:"Zoom out"}),click:r.zoomOut,accelerator:"CmdOrCtrl+numsub"},{label:e._({id:"Zoom to fit selection"}),click:r.zoomToFitSelection,enabled:r.instancesSelection.hasSelectedInstances(),accelerator:"Shift+num1"},{label:e._({id:"Zoom to initial position"}),click:r.zoomToInitialPosition,accelerator:"Shift+num2"},{label:e._({id:"Zoom to fit content"}),click:r.zoomToFitContent,accelerator:"Shift+num3"}]},r.setZoomFactor=function(e){r.editorDisplay&&r.editorDisplay.viewControls.setZoomFactor(e)},r.zoomIn=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomBy(xy.Qi)},r.zoomOut=function(){r.editorDisplay&&r.editorDisplay.viewControls.zoomBy(xy.e_)},r._onContextMenu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.contextMenu&&r.contextMenu.open(e,t,{ignoreSelectedObjectsForContextMenu:!!n})},r.isInstanceOf3DObject=function(e){var t=r.props,n=Fc(t.project,t.layout,e.getObjectName());return!!n&&n.is3DObject()},r.buildContextMenu=function(e,t,n){var o=[];if(n.ignoreSelectedObjectsForContextMenu||0===r.state.selectedObjectsWithContext.length)o=[].concat((0,j.Z)(o),[{label:e._({id:"Paste"}),click:function(){return r.paste()},enabled:Yt.has(hk),accelerator:"CmdOrCtrl+V"},{type:"separator"},{label:e._({id:"Insert new..."}),click:function(){return r._createNewObjectAndInstanceUnderCursor()}},{type:"separator"}],(0,j.Z)(r.getContextMenuZoomItems(e)));else{var i=r.state.selectedObjectsWithContext[0].object.getName();o=[].concat((0,j.Z)(o),[{label:e._({id:"Copy"}),click:function(){return r.copySelection()},enabled:r.instancesSelection.hasSelectedInstances(),accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return r.cutSelection()},enabled:r.instancesSelection.hasSelectedInstances(),accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return r.paste()},enabled:Yt.has(hk),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),enabled:r.instancesSelection.hasSelectedInstances(),click:function(){r.duplicateSelection()},accelerator:"CmdOrCtrl+D"},{type:"separator"},{label:e._({id:"Bring to front"}),enabled:r.instancesSelection.hasSelectedInstances(),click:function(){r._onMoveInstancesZOrder("front")}},{label:e._({id:"Send to back"}),enabled:r.instancesSelection.hasSelectedInstances(),click:function(){r._onMoveInstancesZOrder("back")}},{type:"separator"},{label:e._({id:"Show/Hide instance properties"}),click:function(){return r.toggleProperties()},enabled:r.instancesSelection.hasSelectedInstances()},{label:e._({id:"Delete"}),click:function(){return r.deleteSelection()},enabled:r.instancesSelection.hasSelectedInstances(),accelerator:"Delete"},{type:"separator"},{label:e._({id:"Edit object {0}",values:{0:(0,sy.S)(i,14)}}),click:function(){return r.editObjectByName(i,"properties")}},{label:e._({id:"Edit object variables"}),click:function(){return r.editObjectByName(i,"variables")}},{label:e._({id:"Edit behaviors"}),click:function(){return r.editObjectByName(i,"behaviors")}},{label:e._({id:"Edit effects"}),click:function(){return r.editObjectByName(i,"effects")}}])}return o=[].concat((0,j.Z)(o),[{type:"separator"},{label:e._({id:"Open scene events"}),click:function(){return r.props.onOpenEvents(t.getName())}},{label:e._({id:"Open scene properties"}),click:function(){return r.openSceneProperties(!0)}}])},r.copySelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.useLastCursorPosition,e.pasteInTheForeground),n=r.instancesSelection.getSelectedInstances().map((function(e){return(0,qt.XH)(e)})),o=0,i=0;if(r.editorDisplay){var a=r.editorDisplay.instancesHandlers.getSelectionAABB();o=a.centerX(),i=a.centerY()}r.editorDisplay&&Yt.set(hk,{x:o,y:i,pasteInTheForeground:!!t,instances:n})},r.cutSelection=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition;r.copySelection({useLastCursorPosition:e,pasteInTheForeground:!0}),r.deleteSelection()},r.duplicateSelection=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition;var e=(0,ct.Z)(r).editorDisplay;if(e){var t=r.instancesSelection.getSelectedInstances().map((function(e){return(0,qt.XH)(e)})),n=e.instancesHandlers.addSerializedInstances({position:[0,0],copyReferential:[-2*Rt.r,-2*Rt.r],serializedInstances:t,preventSnapToGrid:!0});r._onInstancesAdded(n),r.instancesSelection.clearSelection(),r.instancesSelection.selectInstances({instances:n,multiSelect:!0,layersLocks:null}),r.forceUpdatePropertiesEditor()}},r.paste=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition,t=(0,ct.Z)(r).editorDisplay;if(t){var n=e?t.viewControls.getLastCursorSceneCoordinates():t.viewControls.getLastContextMenuSceneCoordinates(),o=Yt.get(hk),i=Gt.extractArrayProperty(o,"instances"),a=Gt.extractNumberProperty(o,"x"),s=Gt.extractNumberProperty(o,"y"),l=Gt.extractBooleanProperty(o,"pasteInTheForeground")||!1;if(null!==a&&null!==s&&null!==i){var c=t.viewControls.getViewPosition();if(c){var u=t.instancesHandlers.addSerializedInstances({position:c.containsPoint(n[0],n[1])?n:[c.getViewX(),c.getViewY()],copyReferential:[a,s],serializedInstances:i,addInstancesInTheForeground:l});r._onInstancesAdded(u),r.instancesSelection.clearSelection(),r.instancesSelection.selectInstances({instances:u,multiSelect:!0,layersLocks:null}),r.forceUpdatePropertiesEditor()}}}},r.onSelectAllInstancesOfObjectInLayout=function(e){var t=r.props.initialInstances,n=fj(t,e);r.instancesSelection.selectInstances({instances:n,ignoreSeal:!0,multiSelect:!1,layersLocks:null}),r.forceUpdateInstancesList(),r._onInstancesSelected(n)},r.updateBehaviorsSharedData=function(){var e=r.props,t=e.layout,n=e.project;t.updateBehaviorsSharedData(n)},r.forceUpdateObjectsList=function(){r.editorDisplay&&r.editorDisplay.forceUpdateObjectsList()},r.forceUpdateObjectGroupsList=function(){r.editorDisplay&&r.editorDisplay.forceUpdateObjectGroupsList()},r.forceUpdateLayersList=function(){r.props.layout.hasLayerNamed(r.state.selectedLayer)||r.setState({selectedLayer:""}),r.editorDisplay&&r.editorDisplay.forceUpdateLayersList()},r.forceUpdateInstancesList=function(){r.editorDisplay&&r.editorDisplay.forceUpdateInstancesList()},r.forceUpdatePropertiesEditor=function(){r.editorDisplay&&r.editorDisplay.forceUpdateInstancesPropertiesEditor()},r.reloadResourcesFor=function(e){var t=r.props.project,n=new pk.ResourcesInUseHelper;e.getConfiguration().exposeResources(n);var o=n.getAllImages().toNewVectorString().toJSArray();n.delete(),hy.Z.loadTextures(t,o,(function(){}),(function(){r.editorDisplay&&r.editorDisplay.instancesHandlers.resetInstanceRenderersFor(e.getName())}))},r.instancesSelection=new qC,r.state={setupGridOpen:!1,scenePropertiesDialogOpen:!1,layersListOpen:!1,onCloseLayerRemoveDialog:null,layerRemoved:null,editedLayer:null,editedLayerInitialTab:"properties",exportedObject:null,editedObjectWithContext:null,editedObjectInitialTab:"properties",variablesEditedInstance:null,newObjectInstanceSceneCoordinates:null,editedGroup:null,instancesEditorSettings:e.getInitialInstancesEditorSettings(),history:Xt(e.initialInstances,{historyMaxSize:50}),layoutVariablesDialogOpen:!1,showAdditionalWorkInfoBar:!1,additionalWorkInfoBar:{identifier:"default-additional-work",message:"",touchScreenMessage:""},selectedObjectTags:[],renamedObjectWithContext:null,selectedObjectsWithContext:[],selectedLayer:"",invisibleLayerOnWhichInstancesHaveJustBeenAdded:null},r}return(0,lt.Z)(n,[{key:"componentDidUpdate",value:function(e,t){this.state.history!==t.history&&this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges()}},{key:"getInstancesEditorSettings",value:function(){return this.state.instancesEditorSettings}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.layout===e.layout&&this.props.initialInstances===e.initialInstances&&this.props.project===e.project||(this.instancesSelection.clearSelection(),this.openSetupGrid(!1),this.editInstanceVariables(null),this.openSceneProperties(!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.layout,o=t.initialInstances,i=t.resourceManagementProps,a=t.isActive,s=this.state.editedObjectWithContext,l=this.state.variablesEditedInstance?this.state.variablesEditedInstance.getObjectName():null,d=l?Fc(n,r,l):null,p=this.state.selectedObjectsWithContext.map((function(e){return e.object.getName()})),h=null!==this.state.invisibleLayerOnWhichInstancesHaveJustBeenAdded?(0,f.jsx)(c.Trans,{id:'You just added an instance to a hidden layer ("{0}"). Open the layer panel to make it visible.',values:{0:this.state.invisibleLayerOnWhichInstancesHaveJustBeenAdded||(0,f.jsx)(c.Trans,{id:"Base layer"})}}):null;return(0,f.jsx)(T.I,{children:function(t){var l="small"===t?dk:$Z;return(0,f.jsxs)("div",{style:fk.container,id:"scene-editor","data-active":a?"true":void 0,children:[(0,f.jsx)(py,{project:n,layout:r,onEditObject:e.props.onEditObject||e.editObject,onEditObjectVariables:function(t){e.editObject(t,"variables")},onOpenSceneProperties:e.openSceneProperties,onOpenSceneVariables:e.editLayoutVariables,onEditObjectGroup:e.editGroup,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer}),(0,f.jsx)(l,{ref:function(t){return e.editorDisplay=t},project:n,layout:r,initialInstances:o,instancesSelection:e.instancesSelection,onSelectInstances:e._onSelectInstances,onAddObjectInstance:e.addInstanceOnTheScene,selectedLayer:e.state.selectedLayer,editLayer:e.editLayer,editLayerEffects:e.editLayerEffects,editInstanceVariables:e.editInstanceVariables,editObjectByName:e.editObjectByName,selectedObjectNames:p,renamedObjectWithContext:e.state.renamedObjectWithContext,onRenameLayer:e._onRenameLayer,onRemoveLayer:e._onRemoveLayer,onSelectLayer:function(t){return e.setState({selectedLayer:t})},onExportObject:e.openObjectExporterDialog,onDeleteObject:e._onDeleteObject,getValidatedObjectOrGroupName:e._getValidatedObjectOrGroupName,onEditObjectGroup:e.editGroup,onDeleteObjectGroup:e._onDeleteGroup,onRenameObjectGroup:e._onRenameGroup,canObjectOrGroupBeGlobal:e.canObjectOrGroupBeGlobal,updateBehaviorsSharedData:e.updateBehaviorsSharedData,onEditObject:e.props.onEditObject||e.editObject,onRenameObjectStart:e._onRenameObjectStart,onRenameObjectFinish:e._onRenameObjectFinish,onObjectCreated:e._onObjectCreated,onObjectSelected:e._onObjectSelected,canInstallPrivateAsset:e.props.canInstallPrivateAsset,historyHandler:{undo:e.undo,redo:e.redo,canUndo:function(){return Kt(e.state.history)},canRedo:function(){return Jt(e.state.history)},saveToHistory:function(){return e.setState({history:Qt(e.state.history,e.props.initialInstances)})}},instancesEditorShortcutsCallbacks:{onCopy:function(){return e.copySelection({useLastCursorPosition:!0})},onCut:function(){return e.cutSelection({useLastCursorPosition:!0})},onPaste:function(){return e.paste({useLastCursorPosition:!0})},onDuplicate:function(){return e.duplicateSelection({useLastCursorPosition:!0})},onDelete:e.deleteSelection,onUndo:e.undo,onRedo:e.redo,onZoomOut:e.zoomOut,onZoomIn:e.zoomIn,onShift1:e.zoomToFitSelection,onShift2:e.zoomToInitialPosition,onShift3:e.zoomToFitContent},onInstancesAdded:e._onInstancesAdded,onInstancesSelected:e._onInstancesSelected,onInstanceDoubleClicked:e._onInstanceDoubleClicked,onInstancesMoved:e._onInstancesMoved,onInstancesResized:e._onInstancesResized,onInstancesRotated:e._onInstancesRotated,isInstanceOf3DObject:e.isInstanceOf3DObject,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,instancesEditorSettings:e.state.instancesEditorSettings,onInstancesEditorSettingsMutated:e._onInstancesEditorSettingsMutated,onContextMenu:e._onContextMenu,resourceManagementProps:e.props.resourceManagementProps,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,isActive:a,onOpenedEditorsChanged:e.updateToolbar}),(0,f.jsx)(c.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(u.Fragment,{children:s&&(0,f.jsx)($j,{open:!0,object:s.object,initialTab:e.state.editedObjectInitialTab,project:n,layout:r,resourceManagementProps:i,onComputeAllVariableNames:function(){var t=e.state.editedObjectWithContext;return t?ko.findAllObjectVariables(n.getCurrentPlatform(),n,r,t.object):[]},onCancel:function(){s&&e.reloadResourcesFor(s.object),e.editObject(null)},getValidatedObjectOrGroupName:function(t){return e._getValidatedObjectOrGroupName(t,s.global,o)},onRename:function(t){e._onRenameEditedObject(t)},onApply:function(){s&&e.reloadResourcesFor(s.object),e.editObject(null),e.updateBehaviorsSharedData(),e.forceUpdateObjectsList(),e.props.unsavedChanges&&e.props.unsavedChanges.triggerUnsavedChanges()},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onUpdateBehaviorsSharedData:function(){return e.updateBehaviorsSharedData()},openBehaviorEvents:e.props.openBehaviorEvents})})}}),e.state.exportedObject&&(0,f.jsx)(GC,{object:e.state.exportedObject,onClose:function(){e.openObjectExporterDialog(null)}}),!!e.state.editedGroup&&(0,f.jsx)(Rx,{project:n,group:e.state.editedGroup,objectsContainer:r,globalObjectsContainer:n,onCancel:function(){return e.editGroup(null)},onApply:function(){return e.editGroup(null)}}),e.state.setupGridOpen&&(0,f.jsx)(KC,{instancesEditorSettings:e.state.instancesEditorSettings,onChangeInstancesEditorSettings:e.setInstancesEditorSettings,onCancel:function(){return e.openSetupGrid(!1)},onApply:function(){return e.openSetupGrid(!1)}}),!!e.state.variablesEditedInstance&&!!d&&(0,f.jsx)(Gn,{open:!0,variablesContainer:e.state.variablesEditedInstance.getVariables(),inheritedVariablesContainer:d.getVariables(),onCancel:function(){return e.editInstanceVariables(null)},onApply:function(){return e.editInstanceVariables(null)},emptyPlaceholderTitle:(0,f.jsx)(c.Trans,{id:"Add your first instance variable"}),emptyPlaceholderDescription:(0,f.jsx)(c.Trans,{id:"Instance variables overwrite the default values of the variables of the object."}),helpPagePath:"/all-features/variables/instance-variables",title:(0,f.jsx)(c.Trans,{id:"Instance Variables"}),onEditObjectVariables:d?function(){e.editObject(d,"variables"),e.editInstanceVariables(null)}:void 0,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onComputeAllVariableNames:function(){var t=e.state.variablesEditedInstance;if(!t)return[];var o=Fc(n,r,t.getObjectName());return o?ko.findAllObjectVariables(n.getCurrentPlatform(),n,r,o):[]}}),!!e.state.layerRemoved&&e.state.onCloseLayerRemoveDialog&&(0,f.jsx)(UC,{open:!0,project:n,layersContainer:r,layerRemoved:e.state.layerRemoved,onClose:e.state.onCloseLayerRemoveDialog}),!!e.state.editedLayer&&(0,f.jsx)(VC,{project:n,resourceManagementProps:e.props.resourceManagementProps,layout:r,layer:e.state.editedLayer,initialInstances:o,initialTab:e.state.editedLayerInitialTab,onClose:function(){return e.setState({editedLayer:null})},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps}),e.state.scenePropertiesDialogOpen&&(0,f.jsx)(Co,{open:!0,project:n,layout:r,onClose:function(){return e.openSceneProperties(!1)},onApply:function(){return e.openSceneProperties(!1)},onEditVariables:function(){return e.editLayoutVariables(!0)},onOpenMoreSettings:e.props.onOpenMoreSettings,resourceManagementProps:e.props.resourceManagementProps}),!!e.state.layoutVariablesDialogOpen&&(0,f.jsx)(wo,{open:!0,project:n,layout:r,onApply:function(){return e.editLayoutVariables(!1)},onClose:function(){return e.editLayoutVariables(!1)},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps}),(0,f.jsx)(c.I18n,{children:function(t){var n=t.i18n;return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(no,{show:e.state.showAdditionalWorkInfoBar,identifier:e.state.additionalWorkInfoBar.identifier,message:n._(e.state.additionalWorkInfoBar.message),touchScreenMessage:n._(e.state.additionalWorkInfoBar.touchScreenMessage)}),(0,f.jsx)(tl.Z,{ref:function(t){return e.contextMenu=t},buildMenuTemplate:function(t,n){return e.buildContextMenu(t,r,n)}})]})}}),(0,f.jsx)(fy.Z,{message:h,duration:7e3,visible:!!h,hide:function(){return e.onInstanceAddedOnInvisibleLayer(null)}})]})}})}}]),n}(u.Component);gk.defaultProps={setToolbar:function(){}};var mk={container:{display:"flex",flex:1}},xk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={externalPropertiesDialogOpen:!1},e.saveExternalProperties=function(t){var n=e.getExternalLayout();n&&(n.setAssociatedLayout(t.layoutName),e.setState({externalPropertiesDialogOpen:!1},(function(){return e.updateToolbar()})))},e.openExternalPropertiesDialog=function(){e.setState({externalPropertiesDialogOpen:!0})},e.saveUiSettings=function(){var t=e.getExternalLayout(),n=e.editor;n&&t&&(0,qt.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,lt.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){if(this.props.isActive){var e=this.props.projectItemName,t=this.getLayout();this.props.setPreviewedLayout(t?t.getName():null,e)}}},{key:"componentDidUpdate",value:function(e){if(!e.isActive&&this.props.isActive){var t=this.props.projectItemName,n=this.getLayout();this.props.setPreviewedLayout(n?n.getName():null,t)}}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"getExternalLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasExternalLayoutNamed(n)?t.getExternalLayout(n):null}},{key:"getLayout",value:function(){var e=this.props.project;if(!e)return null;var t=this.getAssociatedLayoutName();return t?e.getLayout(t):void 0}},{key:"getAssociatedLayoutName",value:function(){var e=this.props.project;if(!e)return null;var t=this.getExternalLayout();if(!t)return null;var n=t.getAssociatedLayout();return e.hasLayoutNamed(n)?n:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,o=t.isActive,i=this.getExternalLayout(),a=this.getLayout();return i&&n?(0,f.jsxs)("div",{style:mk.container,children:[a&&(0,f.jsx)(gk,{setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,unsavedChanges:this.props.unsavedChanges,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,ref:function(t){return e.editor=t},project:n,layout:a,initialInstances:i.getInitialInstances(),getInitialInstancesEditorSettings:function(){return JC((0,qt.XH)(i.getAssociatedEditorSettings()),Math.max(n.getGameResolutionWidth(),n.getGameResolutionHeight()))},onOpenEvents:this.props.onOpenEvents,onOpenMoreSettings:this.openExternalPropertiesDialog,isActive:o,canInstallPrivateAsset:this.props.canInstallPrivateAsset,openBehaviorEvents:this.props.openBehaviorEvents}),!a&&(0,f.jsxs)(Zx.Z,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"To edit the external layout, choose the scene in which it will be included"})}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Choose the scene"}),primary:!0,onClick:this.openExternalPropertiesDialog})}),(0,f.jsx)(L.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(FC.Z,{tutorialId:"Intermediate-externals",label:(0,f.jsx)(c.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,f.jsx)(zn.Z,{helpPagePath:"/interface/events-editor/external-events"})})})]}),(0,f.jsx)(MC,{title:(0,f.jsx)(c.Trans,{id:"Configure the external layout"}),helpTexts:[(0,f.jsx)(c.Trans,{id:'In order to see your objects in the scene, you need to add an action "Create objects from external layout" in your events sheet.'}),(0,f.jsx)(c.Trans,{id:"You can also launch a preview from this external layout, but remember that it will still create objects from the scene, as well as trigger its events. Make sure to disable any action loading the external layout before doing so to avoid having duplicate objects!"})],open:this.state.externalPropertiesDialogOpen,project:n,layoutName:this.getAssociatedLayoutName(),onChoose:this.saveExternalProperties,onClose:function(){return e.setState({externalPropertiesDialogOpen:!1})}})]}):(0,f.jsxs)("div",{children:["No external layout called ",r," found!"]})}}]),n}(u.Component),vk=function(e){return(0,f.jsx)(xk,(0,i.Z)({},e))},bk=n(57974),jk=n(17037),Ck={listContainer:{flex:1}},yk=function(e){return e.getName()},Zk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={renamedResource:null,searchText:"",resourcesWithErrors:{},infoBarContent:null},e._deleteResource=function(t){e.props.onDeleteResource(t)},e._editName=function(t){e.setState({renamedResource:t},(function(){e.sortableList&&e.sortableList.forceUpdateGrid()}))},e._getResourceThumbnail=function(t){switch(t.getKind()){case"image":return ti.Z.getResourceFullUrl(e.props.project,t.getName(),{});case"audio":return"res/actions/music24.png";case"json":case"tilemap":case"tileset":return"res/actions/fichier24.png";case"video":return"JsPlatform/Extensions/videoicon24.png";case"font":return"res/actions/font24.png";case"bitmapFont":return"JsPlatform/Extensions/bitmapfont32.png";case"model3D":return"JsPlatform/Extensions/3d_box.svg";default:return"res/unknown32.png"}},e._rename=function(t,n){var r=e.props.project;e.setState({renamedResource:null}),t.getName()!==n&&(r.getResourcesManager().hasResource(n)?(0,Xr.T4)("Another resource with this name already exists",{delayToNextTick:!0}):e.props.onRenameResource(t,n,(function(r){r&&(t.setName(n),e.forceUpdate())})))},e._moveSelectionTo=function(t){var n=e.props,r=n.project,o=n.selectedResource;if(o){var i=r.getResourcesManager();i.moveResource(i.getResourcePosition(o.getName()),i.getResourcePosition(t.getName())),e.forceUpdateList()}},e.forceUpdateList=function(){e.forceUpdate(),e.sortableList&&e.sortableList.forceUpdateGrid()},e._renderResourceMenuTemplate=function(t){return function(n,r){var o=e.props,i=o.getResourceActionsSpecificToStorageProvider,a=o.fileMetadata,s=[{label:t._({id:"Rename"}),click:function(){return e._editName(n)}},{label:t._({id:"Delete"}),click:function(){return e._deleteResource(n)}},{type:"separator"},{label:t._({id:"Remove unused..."}),submenu:jk.Q.map((function(n){var r=n.displayName,o=n.kind;return{label:t._(r),click:function(){e.props.onRemoveUnusedResources(o)}}})).concat([{label:t._({id:"Resources (any kind)"}),click:function(){jk.Q.forEach((function(t){e.props.onRemoveUnusedResources(t.kind)}))}}])}];return i&&a&&(s.push({type:"separator"}),s=s.concat(i({project:e.props.project,fileMetadata:a,resource:n,i18n:t,informUser:e.openInfoBar,updateInterface:function(){return e.forceUpdateList()},cleanUserSelectionOfResources:function(){return e.props.onSelectResource(null)}}))),s}},e.checkMissingPaths=function(){var t=e.props.project,n=t.getResourcesManager().getAllResourceNames().toJSArray(),r={};n.forEach((function(e){r[e]=(0,bk.iz)(t,e)})),e.setState({resourcesWithErrors:r}),e.forceUpdateList()},e.openInfoBar=function(t){e.setState({infoBarContent:t})},e}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.renamedResource!==t.renamedResource||this.state.searchText!==t.searchText||this.state.infoBarContent!==t.infoBarContent||(this.props.project!==e.project||this.props.selectedResource!==e.selectedResource)}},{key:"componentDidMount",value:function(){this.checkMissingPaths()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.selectedResource,o=t.onSelectResource,a=this.state,s=a.searchText,l=a.infoBarContent,u=n.getResourcesManager(),d=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))}(u.getAllResourceNames().toJSArray().map((function(e){return u.getResource(e)})),s),p=n.ptr;return(0,f.jsxs)(Sh,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(pt.Z,{value:s,onRequestSearch:function(){},onChange:function(t){return e.setState({searchText:t})},placeholder:{id:"Search resources"}})})}),(0,f.jsx)("div",{style:Ck.listContainer,children:(0,f.jsx)(jr.qj,{children:function(t){var n=t.height,i=t.width;return(0,f.jsx)(c.I18n,{children:function(t){var a=t.i18n;return(0,f.jsx)(Px,{ref:function(t){return e.sortableList=t},fullList:d,width:i,height:n,getItemName:yk,getItemThumbnail:e._getResourceThumbnail,selectedItems:r?[r]:[],onItemSelected:o,renamedItem:e.state.renamedResource,onRename:e._rename,onMoveSelectionToItem:e._moveSelectionTo,buildMenuTemplate:e._renderResourceMenuTemplate(a),erroredItems:e.state.resourcesWithErrors,reactDndType:"GD_RESOURCE"},p)}})}})}),!!l&&(0,f.jsx)(fy.Z,(0,i.Z)({duration:7e3,visible:!0,hide:function(){return e.setState({infoBarContent:null})}},l))]})}}]),n}(u.Component),kk=n(58893),wk={previewContainer:{position:"relative",display:"flex",width:"100%",alignItems:"center",justifyContent:"center",height:200},iconContainer:{display:"flex",flex:1,height:"100%",alignItems:"center",justifyContent:"center",position:"relative"},icon:{width:60,height:60}},Tk=function(e){var t=e.renderIcon;return(0,f.jsxs)("div",{style:wk.previewContainer,children:[(0,f.jsx)(kk.Z,{}),(0,f.jsx)("div",{style:wk.iconContainer,children:t({style:wk.icon})})]})},Ek=n(48812),Sk=n(62981),Pk=n(81730),Ik=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state=e._loadFrom(e.props),e}return(0,lt.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.resourceName===this.props.resourceName&&e.project===this.props.project||this.setState(this._loadFrom(e))}},{key:"_loadFrom",value:function(e){var t=e.project,n=e.resourceName,r=t.getResourcesManager();return{resourceKind:r.hasResource(n)?r.getResource(n).getKind():null}}},{key:"render",value:function(){switch(this.state.resourceKind){case"image":return(0,f.jsx)(Sj.Z,{resourceName:this.props.resourceName,imageResourceSource:this.props.resourcesLoader.getResourceFullUrl(this.props.project,this.props.resourceName,{}),isImageResourceSmooth:(0,Sj.X)(this.props.project,this.props.resourceName),onSize:this.props.onSize});case"audio":return(0,f.jsx)(Tk,{renderIcon:function(e){return(0,f.jsx)(cb,(0,i.Z)({},e))}});case"json":case"tilemap":case"tileset":case"model3D":return(0,f.jsx)(Tk,{renderIcon:function(e){return(0,f.jsx)(Sk.Z,(0,i.Z)({},e))}});case"video":return(0,f.jsx)(Tk,{renderIcon:function(e){return(0,f.jsx)(Pk.Z,(0,i.Z)({},e))}});case"font":case"bitmapFont":return(0,f.jsx)(Tk,{renderIcon:function(e){return(0,f.jsx)(Ek.Z,(0,i.Z)({},e))}});default:return null}}}]),n}(u.PureComponent),Dk={propertiesContainer:{padding:8,overflowY:"scroll",scrollbarWidth:"thin",overflowX:"hidden",flex:1}},Ak=u.forwardRef((function(e,t){var n=e.project,r=e.resourcesLoader,i=e.resources,a=e.onResourcePathUpdated,s=e.resourceManagementProps,d=(0,_t.Z)(),p=u.useRef(null),h=u.useCallback((function(){d(),p.current&&p.current.forceUpdate()}),[d]);u.useImperativeHandle(t,(function(){return{forceUpdate:h}}));var g=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i[0],e.next=3,s.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:n.getKind()});case 3:if((r=e.sent).length){e.next=6;break}return e.abrupt("return");case 6:return n.setFile(r[0].getFile()),r.forEach((function(e){return e.delete()})),a(),h(),e.next=12,s.onFetchNewlyAddedResources();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,i,a,h]),m=u.useMemo((function(){return[{name:"Resource name",valueType:"string",disabled:!0,getValue:function(e){return e.getName()},setValue:function(e,t){return e.setName(t)}},{name:"File",valueType:"string",getValue:function(e){return e.getFile()},setValue:function(e,t){return e.setFile(t)},onEditButtonClick:function(){var e=s.getStorageProvider(),t=s.resourceSources.filter((function(e){return e.kind===i[0].getKind()})).filter((function(t){var n=t.onlyForStorageProvider;return!n||n===e.internalName}))[0];t&&g(t)},onEditButtonBuildMenuTemplate:function(e){var t=s.getStorageProvider();return s.resourceSources.filter((function(e){return e.kind===i[0].getKind()})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(t){return{label:e._(t.displayName),click:function(){return g(t)}}}))}}]}),[s,i,g]),x=u.useCallback((function(){var e=i[0].getProperties(),t=(0,Jn.Z)(e,(function(e){return e.getProperties()}),(function(e,t,n){e.updateProperty(t,n),h()}));return(0,f.jsx)("div",{style:Dk.propertiesContainer,children:(0,f.jsx)(Xn.Z,{schema:m.concat(t),instances:i})},i.map((function(e){return""+e.ptr})).join(";"))}),[i,m,h]);return(0,f.jsxs)(Sh,{maxWidth:!0,children:[function(){if(i&&i.length)return(0,f.jsx)(Ik,{ref:p,resourceName:i[0].getName(),resourcesLoader:r,project:n})}(),i&&i.length?x():(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"Resources are automatically added to your project whenever you add an image, a font or a video to an object or when you choose an audio file in events. Choose a resource to display its properties."})})]})})),Lk=Ak,Mk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.canDelete,n=e.isPropertiesShown;return(0,f.jsxs)(b,{lastChild:!0,children:[(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:this.props.onOpenProjectFolder,tooltip:{id:"Open the project folder"},children:(0,f.jsx)(dx.Z,{})}),(0,f.jsx)(Pg,{}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:this.props.onToggleProperties,tooltip:{id:"Open the properties panel"},selected:n,children:(0,f.jsx)(Pt.Z,{})}),(0,f.jsx)(A.Z,{size:"small",color:"default",onClick:this.props.onDeleteSelection,disabled:!t,tooltip:{id:"Delete the selected resource"},children:(0,f.jsx)(Dn.Z,{})})]})}}]),n}(u.PureComponent),Fk=Mk,Ok=n.g.gd,Rk=q()("electron"),Bk=Rk?Rk.shell:null,_k=q()("path"),Nk={container:{display:"flex",flex:1,position:"relative",overflow:"hidden"}},Uk={direction:"row",first:"properties",second:"resources-list",splitPercentage:66},Hk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).editorMosaic=null,e._propertiesEditor=null,e._resourcesList=null,e.resourcesLoader=ti.Z,e.state={selectedResource:null},e.updateToolbar=function(){var t=e.editorMosaic?e.editorMosaic.getOpenedEditorNames():[];e.props.setToolbar((0,f.jsx)(Fk,{onOpenProjectFolder:e.openProjectFolder,onToggleProperties:e.toggleProperties,isPropertiesShown:t.includes("properties"),canDelete:!!e.state.selectedResource,onDeleteSelection:function(){return e.deleteResource(e.state.selectedResource)}}))},e.deleteResource=function(t){var n=e.props,r=n.project,o=n.onDeleteResource;t&&(F.ZP.showConfirmDialog("Are you sure you want to remove this resource? This can't be undone.")&&o(t,(function(n){n&&t&&(r.getResourcesManager().removeResource(t.getName()),e.setState({selectedResource:null},(function(){e._resourcesList&&e._resourcesList.forceUpdateList(),e.updateToolbar()})))})))},e._removeUnusedResources=function(t){var n=e.props.project,r=e.state.selectedResource?e.state.selectedResource.getName():null,o=Ok.ProjectResourcesAdder.getAllUseless(n,t).toJSArray();console.info("Removing ".concat(o.length," unused ").concat(t," resource(s):"),o),Ok.ProjectResourcesAdder.removeAllUseless(n,t),o.includes(r)&&e._onResourceSelected(null),e._resourcesList&&e._resourcesList.forceUpdateList()},e._removeAllResourcesWithInvalidPath=function(){var t=e.props.project,n=e.state.selectedResource?e.state.selectedResource.getName():null,r=t.getResourcesManager(),o=r.getAllResourceNames().toJSArray().filter((function(e){return"error"===(0,bk.iz)(t,e)}));o.forEach((function(e){r.removeResource(e),console.info("Removed due to invalid path: "+e)})),o.includes(n)&&e._onResourceSelected(null),e._resourcesList&&e._resourcesList.forceUpdateList()},e.openProjectFolder=function(){var t=e.props.project;Bk&&Bk.openPath(_k.dirname(t.getProjectFile()))},e.toggleProperties=function(){e.editorMosaic&&e.editorMosaic.toggleEditor("properties","start",66,"column")},e._onResourceSelected=function(t){e.setState({selectedResource:t},(function(){e._propertiesEditor&&e._propertiesEditor.forceUpdate(),e.updateToolbar()}))},e}return(0,lt.Z)(n,[{key:"refreshResourcesList",value:function(){this._resourcesList&&this._resourcesList.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.onRenameResource,o=t.resourceManagementProps,i=t.fileMetadata,a=this.state.selectedResource,s=o.getStorageProviderResourceOperations(),l={properties:{type:"secondary",title:{id:"Properties"},renderEditor:function(){return(0,f.jsx)(Lk,{resources:a?[a]:[],project:n,resourcesLoader:e.resourcesLoader,ref:function(t){return e._propertiesEditor=t},onResourcePathUpdated:function(){e._resourcesList&&e._resourcesList.checkMissingPaths()},resourceManagementProps:o},a?a.ptr:void 0)}},"resources-list":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,f.jsx)(Zk,{project:n,fileMetadata:i,onDeleteResource:e.deleteResource,onRenameResource:r,onSelectResource:e._onResourceSelected,selectedResource:a,ref:function(t){return e._resourcesList=t},onRemoveUnusedResources:e._removeUnusedResources,onRemoveAllResourcesWithInvalidPath:e._removeAllResourcesWithInvalidPath,getResourceActionsSpecificToStorageProvider:s})}}};return(0,f.jsx)("div",{style:Nk.container,children:(0,f.jsx)(X.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,f.jsx)(Om.Z,{editors:l,ref:function(t){return e.editorMosaic=t},initialNodes:n("resources-editor")||Uk,onOpenedEditorsChanged:e.updateToolbar,onPersistNodes:function(e){return r("resources-editor",e)}})}})})}}]),n}(u.Component);Hk.defaultProps={setToolbar:function(){}};var Vk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){return(0,st.Z)(this,n),t.apply(this,arguments)}return(0,lt.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"componentDidUpdate",value:function(e){this.editor&&this.props.isActive&&e.isActive!==this.props.isActive&&this.editor.refreshResourcesList()}},{key:"render",value:function(){var e=this,t=this.props.project;return t?(0,f.jsx)(Hk,{setToolbar:this.props.setToolbar,onDeleteResource:this.props.onDeleteResource,onRenameResource:this.props.onRenameResource,resourceManagementProps:this.props.resourceManagementProps,ref:function(t){return e.editor=t},fileMetadata:this.props.extraEditorProps?this.props.extraEditorProps.fileMetadata:null,project:t}):null}}]),n}(u.Component),Wk=function(e){return(0,f.jsx)(Vk,(0,i.Z)({},e))},zk=function(e){(0,ut.Z)(n,e);var t=(0,dt.Z)(n);function n(){var e;(0,st.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).saveUiSettings=function(){var t=e.getLayout(),n=e.editor;n&&t&&(0,qt.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,lt.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){if(this.props.isActive){var e=this.props.projectItemName;this.props.setPreviewedLayout(e)}}},{key:"componentDidUpdate",value:function(e){if(!e.isActive&&this.props.isActive){var t=this.props.projectItemName;this.props.setPreviewedLayout(t)}}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"getLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasLayoutNamed(n)?t.getLayout(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,o=t.isActive,i=this.getLayout();return i&&n?(0,f.jsx)(gk,{setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,canInstallPrivateAsset:this.props.canInstallPrivateAsset,unsavedChanges:this.props.unsavedChanges,ref:function(t){return e.editor=t},project:n,layout:i,initialInstances:i.getInitialInstances(),getInitialInstancesEditorSettings:function(){return JC((0,qt.XH)(i.getAssociatedEditorSettings()),Math.max(n.getGameResolutionWidth(),n.getGameResolutionHeight()))},onOpenEvents:this.props.onOpenEvents,isActive:o,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,openBehaviorEvents:this.props.openBehaviorEvents}):(0,f.jsxs)("div",{children:["No layout called ",r," found!"]})}}]),n}(u.Component),Gk=function(e){return(0,f.jsx)(zk,(0,i.Z)({},e))},Yk=function(e,t){var n=t.label,r=t.icon,o=t.projectItemName,a=t.tabOptions,s=t.renderEditorContainer,l=t.key,c=t.extraEditorProps,u=t.dontFocusTab,d=t.closable,p=Zl()(e.editors,(function(e){return e.key===l}));if(-1!==p)return(0,i.Z)((0,i.Z)({},e),{},{currentTab:u?e.currentTab:p});var h={label:n,icon:r,projectItemName:o,tabOptions:a,renderEditorContainer:s,key:l,extraEditorProps:c,editorRef:null,closable:"undefined"===typeof d||!!d};return(0,i.Z)((0,i.Z)({},e),{},{editors:[].concat((0,j.Z)(e.editors),[h]),currentTab:u?e.currentTab:e.editors.length})},qk=function(e,t){return(0,i.Z)((0,i.Z)({},e),{},{currentTab:Math.max(0,Math.min(t,e.editors.length-1))})},Xk=function(e,t){var n=tw(e),r=e.editors.filter(t);return qk((0,i.Z)((0,i.Z)({},e),{},{editors:r}),r.indexOf(n)||0)},Jk=function(e){return Xk(e,(function(e){return!e.closable}))},Kk=function(e,t){return Xk(e,(function(e){return e!==t}))},Qk=function(e,t){return Xk(e,(function(e){return!e.closable||e===t}))},$k=function(e){return e.editors},ew=function(e){return e.currentTab},tw=function(e){return e.editors[e.currentTab]},nw=function(e,t){return Xk(e,(function(e){var n=e.editorRef&&e.editorRef.getProject();return!n||n!==t}))},rw=function(e){e.editors.forEach((function(e){e.editorRef&&(e.editorRef instanceof zk||e.editorRef instanceof xk)&&e.editorRef.saveUiSettings()}))},ow=function(e,t){return Xk(e,(function(e){var n=e.editorRef;if(n instanceof Pm||n instanceof RC||n instanceof xk||n instanceof zk){var r=n.getLayout();return!r||r!==t}return!0}))},iw=function(e,t){return Xk(e,(function(e){var n=e.editorRef;return!(n instanceof xk)||(!n.getExternalLayout()||n.getExternalLayout()!==t)}))},aw=function(e,t){return Xk(e,(function(e){var n=e.editorRef;return!(n instanceof RC)||(!n.getExternalEvents()||n.getExternalEvents()!==t)}))},sw=function(e,t){return Xk(e,(function(e){var n=e.editorRef;return!(n instanceof AC)||(!n.getEventsFunctionsExtensionName()||n.getEventsFunctionsExtensionName()!==t)}))},lw=function(e,t){for(var n=0;n<e.editors.length;++n){var r=e.editors[n].editorRef;if(r instanceof AC&&r.getEventsFunctionsExtension()===t)return{editor:r,tabIndex:n}}return null},cw=function(e,t,n){var r=(0,j.Z)($k(e)),o=r[t];r.splice(t,1),r.splice(n,0,o);var i=ew(e),a=i;return t===i?a=n:t<i&&n>=i?a-=1:t>i&&n<=i&&(a+=1),{editors:r,currentTab:a}},uw=(0,Lt.x)("draggable-closable-tab"),dw=function(e){return"tab-".concat(e.key.replace(/\s/g,"-"))};function pw(e){var t=e.hideLabels,n=e.editorTabs,r=e.onClickTab,o=e.onCloseTab,i=e.onCloseOtherTabs,a=e.onCloseAll,s=e.onTabActivated,l=e.onDropTab,c=null,d=tw(n);return u.useEffect((function(){if(d){var e=document.getElementById(dw(d));e&&e.scrollIntoView()}}),[d]),(0,f.jsx)(vl,{hideLabels:t,children:$k(n).map((function(e,t){var u=ew(n)===t;return(0,f.jsx)(hw,{index:t,label:e.label,icon:e.icon,id:dw(e),data:e.tabOptions?e.tabOptions.data:void 0,active:u,onClick:function(){return r(t)},onClose:function(){return o(e)},onCloseOthers:function(){return i(e)},onCloseAll:a,onActivated:function(){return s(e)},closable:e.closable,onBeginDrag:function(){return c=t,e},onDrop:function(e){"number"===typeof c&&(l(c,t),c=null)}},e.key)}))})}function hw(e){var t=e.index,n=e.id,r=e.data,o=e.active,i=e.onClose,a=e.onCloseOthers,s=e.onCloseAll,l=e.label,c=e.icon,u=e.closable,d=e.onClick,p=e.onActivated,h=e.onBeginDrag,g=e.onDrop;return(0,f.jsx)(eo.wh,{children:function(e){return(0,f.jsx)(uw,{beginDrag:h,canDrag:function(){return"touch"!==e&&0!==t},canDrop:function(){return!0},drop:function(){return g(t)},children:function(e){var t=e.connectDragSource,h=e.connectDropTarget,g=e.isOver,m=(e.canDrop,h((0,f.jsxs)("div",{style:{display:"flex",flexShrink:0},children:[(0,f.jsx)(bl,{id:n,data:r,active:o,onClose:i,onCloseOthers:a,onCloseAll:s,label:l,icon:c,closable:u,onClick:d,onActivated:p},n),g&&(0,f.jsx)(Cl,{})]})));return m?t(m):null}})}})}var fw=n(16021),gw={mobileScrollContainer:{paddingTop:10,paddingLeft:5,paddingRight:5},desktopScrollContainer:{paddingTop:30,paddingLeft:30,paddingRight:30},mobileFooter:{padding:5},desktopFooter:{paddingLeft:30},rowContainer:{display:"flex",flexDirection:"column",paddingBottom:30},scrollContainer:{flex:1,overflowY:"scroll",scrollbarWidth:"thin"}},mw=function(e){var t=e.children,n=e.expand;return(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},gw.rowContainer),n?{flex:1}:void 0),children:t})},xw=function(e){var t=e.children,n=e.title,r=e.subtitleText,o=e.renderSubtitle,a=e.backAction,s=e.flexBody,l=e.renderFooter,u="small"===(0,T.L)();return(0,f.jsxs)(L.sg,{useFullHeight:!0,noMargin:!0,expand:!0,children:[(0,f.jsx)(ee.Z,{style:(0,i.Z)((0,i.Z)({},gw.scrollContainer),{},{display:s?"flex":"block"},u?gw.mobileScrollContainer:gw.desktopScrollContainer),square:!0,background:"dark",children:(0,f.jsxs)(L.sg,{noOverflowParent:!0,expand:!0,children:[n&&(0,f.jsxs)(mw,{children:[a&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(vg.Z,{onClick:a,icon:(0,f.jsx)(yb,{fontSize:"small"}),label:(0,f.jsx)(c.Trans,{id:"Back"})})}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{size:"bold-title",noMargin:!0,children:n})}),r&&(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:r})}),o&&o()]}),t]})}),l&&(0,f.jsx)(ee.Z,{style:u?gw.mobileFooter:gw.desktopFooter,square:!0,background:"dark",children:l()})]})},vw=n(90569),bw={buttonBase:{height:"100%",width:"100%",borderRadius:8,cursor:"default",overflow:"hidden"},contentWrapper:{height:"100%",width:"100%",display:"flex"}},jw=320,Cw=function(e){var t=e.children,n=e.onClick,r=e.size,o=e.disabled,a=function(e){return(0,St.Z)((function(t){return(0,vw.Z)({root:{border:"1px solid ".concat(t.palette.text.primary),borderBottom:"6px solid ".concat(t.palette.text.primary),"&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover},"&:disabled":e?{opacity:t.palette.action.disabledOpacity,border:"1px solid ".concat(t.palette.text.secondary),borderBottom:"6px solid ".concat(t.palette.text.secondary)}:void 0}})}))()}(e.useDefaultDisabledStyle),s=(0,T.L)(),l="banner"===r||"small"===s?void 0:"small"===r?200:jw;return(0,f.jsx)(Zr.Z,{onClick:n,focusRipple:!0,elevation:2,style:(0,i.Z)((0,i.Z)({},bw.buttonBase),{},{maxWidth:l}),classes:a,tabIndex:0,onKeyPress:function(e){(0,Io.ph)(e)&&n()},disabled:o,children:(0,f.jsx)("div",{style:bw.contentWrapper,children:t})})},yw=n(63307),Zw={linearProgress:{flex:1}};var kw=function(e){var t=u.useContext(m.Z),n=(0,Hr.Z)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:t.paper.backgroundColor.medium},bar:{borderRadius:5,backgroundColor:100===e.value?t.linearProgress.color.complete:t.linearProgress.color.incomplete}})();return(0,f.jsx)(yw.Z,{classes:n,style:Zw.linearProgress,variant:"determinate",value:e.value})},ww={cardTextContainer:{flex:1,display:"flex",justifyContent:"center",padding:"10px 10px 20px 10px"},image:{height:130,width:130},lockerImage:{height:80,width:80},imageContainer:{width:"100%",height:130,display:"flex",justifyContent:"center",alignItems:"center"},keyPointsList:{paddingInlineStart:12,textAlign:"left",overflowWrap:"anywhere"}},Tw=function(e){return e?{opacity:.4}:void 0},Ew=function(e){var t=e.progress,n=e.locked,r=e.size,o=void 0===r?"large":r,a=e.disabled,s=e.title,l=e.description,d=e.durationInMinutes,p=e.keyPoints,h=e.onClick,g=e.renderImage,x=u.useContext(m.Z),v=a||n;return(0,f.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(Cw,{onClick:h,size:o,disabled:v,children:(0,f.jsxs)(L.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},ww.imageContainer),{},{backgroundColor:n?x.paper.backgroundColor.light:a?"dark"===x.palette.type?"#4F28CD":"#9979F1":"#7046EC"}),children:n?(0,f.jsx)(Ni,{style:ww.lockerImage}):g({style:(0,i.Z)((0,i.Z)({},ww.image),{},{opacity:a?.6:1})})}),(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},ww.cardTextContainer),{},{maxWidth:"banner"===o?"40%":void 0}),children:(0,f.jsxs)(C.ak,{expand:!0,justifyContent:"flex-start",useFullHeight:!0,children:[t&&t>0?(0,f.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsxs)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,size:"body2",children:[t,"%"]}),(0,f.jsx)(kw,{value:t})]}):d?(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)(le.Z,{size:"small",label:1===d?(0,f.jsx)(c.Trans,{id:"1 minute"}):(0,f.jsx)(c.Trans,{id:"{durationInMinutes} minutes",values:{durationInMinutes:d}})})}):(0,f.jsx)(L.LZ,{}),(0,f.jsx)(J.Z,{size:"block-title",noMargin:!0,style:Tw(v),color:"primary",children:r._(s)}),(0,f.jsx)(J.Z,{size:"body",noMargin:!0,style:Tw(v),color:"secondary",children:r._(l)}),p&&(0,f.jsx)(Fr.Z,{}),p&&(0,f.jsxs)(C.ep,{noColumnMargin:!0,noMargin:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,alignItems:"flex-start",justifyContent:"flex-start",expand:!0,children:(0,f.jsx)("ul",{style:ww.keyPointsList,children:p.map((function(e,t){return t%2===0?(0,f.jsx)(J.Z,{size:"body2",noMargin:!0,style:Tw(v),color:"secondary",displayAsListItem:!0,children:r._(e)},"key-point-".concat(t)):null}))})}),(0,f.jsx)(L.sg,{noMargin:!0,alignItems:"flex-start",justifyContent:"flex-start",expand:!0,children:(0,f.jsx)("ul",{style:ww.keyPointsList,children:p.map((function(e,t){return t%2===1?(0,f.jsx)(J.Z,{size:"body2",noMargin:!0,style:Tw(v),color:"secondary",displayAsListItem:!0,children:r._(e)},"key-point-".concat(t)):null}))})})]})]})})]})})}})},Sw=n(19817),Pw=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M15.8065 105.143C15.5397 104.631 15.0628 104.33 14.5177 104.311L11.1971 104.107L8.8545 101.592C8.47918 101.169 7.88351 101.06 7.36551 101.169C6.88471 101.304 6.4441 101.63 6.26409 102.136L5.13234 105.381L2.07322 106.927C1.61258 107.157 1.26653 107.631 1.22853 108.207C1.18376 108.751 1.39618 109.308 1.81887 109.654L4.54449 111.821L5.04443 115.259C5.12829 115.809 5.4863 116.302 5.98032 116.532C6.47434 116.763 7.0363 116.711 7.48366 116.417L10.1842 114.579L10.2385 114.534L13.518 115.148C14.0459 115.238 14.581 115.059 14.9404 114.649C15.2694 114.246 15.3989 113.65 15.254 113.113L14.3276 109.765L15.8484 106.705C16.096 106.218 16.097 105.617 15.8065 105.143Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M46.4456 104.014C46.2466 103.303 45.7293 102.802 45.0527 102.634L40.9541 101.506L38.6859 97.7452C38.3276 97.1182 37.6114 96.8257 36.935 96.8257C36.2984 96.8675 35.6616 97.1601 35.3036 97.7452L33.0354 101.506L28.8039 102.634C28.1674 102.802 27.6101 103.303 27.4112 104.014C27.2122 104.682 27.3314 105.434 27.7692 105.977L30.6078 109.404L30.3295 113.834C30.2897 114.544 30.6078 115.255 31.165 115.673C31.7222 116.09 32.4384 116.174 33.0752 115.923L36.935 114.335L37.0147 114.293L40.9542 115.923C41.5908 116.174 42.3071 116.09 42.8642 115.673C43.3815 115.255 43.7 114.544 43.6601 113.834L43.3815 109.404L46.0874 105.977C46.525 105.434 46.6843 104.682 46.4456 104.014Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M78.093 102.672C77.9392 101.753 77.3574 101.053 76.5305 100.752L71.5371 98.7819L69.1973 93.7537C68.8322 92.9182 67.9724 92.4542 67.1232 92.3628C66.3184 92.3293 65.4793 92.6108 64.9508 93.2969L61.5951 97.7124L56.1301 98.5577C55.3083 98.6814 54.541 99.2357 54.1952 100.101C53.8551 100.913 53.9032 101.874 54.3794 102.615L57.4805 107.301L56.5328 112.825C56.3869 113.711 56.6903 114.646 57.3335 115.246C57.9767 115.846 58.8645 116.047 59.6979 115.819L64.7584 114.346L64.8641 114.305L69.5901 116.883C70.3555 117.284 71.2661 117.275 72.0219 116.826C72.7279 116.371 73.2237 115.522 73.2695 114.625L73.518 109.026L77.3781 105.089C78.0009 104.466 78.3025 103.543 78.093 102.672Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M116.484 102.221C116.451 101.083 115.865 100.14 114.915 99.6368L109.203 96.4176L107.214 89.9427C106.912 88.8707 105.949 88.1655 104.937 87.9128C103.969 87.7376 102.907 87.9377 102.153 88.6794L97.3538 93.4599L90.6005 93.568C89.5856 93.5801 88.5644 94.1224 88.0013 95.1113C87.4539 96.0373 87.3514 97.2074 87.8035 98.1838L90.7711 104.372L88.7002 110.896C88.3754 111.944 88.5859 113.126 89.2637 113.96C89.9415 114.793 90.9819 115.186 92.0284 115.048L98.3972 114.114L98.5321 114.081L103.818 117.991C104.677 118.604 105.78 118.746 106.77 118.329C107.7 117.897 108.442 116.953 108.648 115.875L109.885 109.143L115.214 105.026C116.072 104.376 116.591 103.31 116.484 102.221Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M100.117 18H9.88281C4.53299 18 0 22.3113 0 27.6526V72.9126C0 78.2535 4.53299 82.5652 9.88281 82.5652H100.117C105.467 82.5652 110 78.2535 110 72.9126V27.6526C110 22.3113 105.467 18 100.117 18Z",fill:"#FF507E"}),(0,f.jsx)("path",{d:"M94.7786 31.1523H16.4174C14.5887 31.1523 13.1523 32.5909 13.1523 34.4222V67.339C13.1523 69.1699 14.5887 70.6089 16.4174 70.6089H94.7786C96.6073 70.6089 98.0437 69.1699 98.0437 67.339V34.4222C98.0437 32.5909 96.6073 31.1523 94.7786 31.1523Z",fill:"#E1E4FB"}),(0,f.jsx)("path",{d:"M36.4676 35.9346H22.1198C21.785 35.9346 21.522 36.9372 21.522 38.2136V61.1556C21.522 62.4317 21.785 63.4346 22.1198 63.4346H36.4676C36.8024 63.4346 37.0655 62.4317 37.0655 61.1556V38.2136C37.0655 36.9372 36.8024 35.9346 36.4676 35.9346Z",fill:"#B2B7DE"}),(0,f.jsx)("path",{d:"M61.576 35.9346H47.2282C46.8934 35.9346 46.6304 36.9372 46.6304 38.2136V61.1556C46.6304 62.4317 46.8934 63.4346 47.2282 63.4346H61.576C61.9108 63.4346 62.1739 62.4317 62.1739 61.1556V38.2136C62.1739 36.9372 61.9108 35.9346 61.576 35.9346Z",fill:"#B2B7DE"}),(0,f.jsx)("path",{d:"M87.8807 35.9346H73.5329C73.1981 35.9346 72.9351 36.9372 72.9351 38.2136V61.1556C72.9351 62.4317 73.1981 63.4346 73.5329 63.4346H87.8807C88.2155 63.4346 88.4785 62.4317 88.4785 61.1556V38.2136C88.4785 36.9372 88.2155 35.9346 87.8807 35.9346Z",fill:"#B2B7DE"}),(0,f.jsx)("path",{d:"M32.5586 51.0915H25.6422C24.6872 51.0915 23.9131 50.3172 23.9131 49.3624V42.4459C23.9131 41.4911 24.6872 40.7168 25.6422 40.7168H32.5586C33.5135 40.7168 34.2878 41.4911 34.2878 42.4459V49.3624C34.2878 50.3172 33.5135 51.0915 32.5586 51.0915ZM27.3713 47.6332H30.8295V44.175H27.3713V47.6332Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M32.5586 58.0075H25.6422C24.6872 58.0075 23.9131 57.2332 23.9131 56.2784C23.9131 55.3236 24.6872 54.5493 25.6422 54.5493H30.8295V49.3619C30.8295 48.4071 31.6038 47.6328 32.5586 47.6328C33.5135 47.6328 34.2878 48.4071 34.2878 49.3619V56.2784C34.2878 57.2332 33.5135 58.0075 32.5586 58.0075Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M57.6675 51.0915H50.7511C49.7961 51.0915 49.022 50.3172 49.022 49.3624V42.4459C49.022 41.4911 49.7961 40.7168 50.7511 40.7168H57.6675C58.6223 40.7168 59.3966 41.4911 59.3966 42.4459V49.3624C59.3966 50.3172 58.6223 51.0915 57.6675 51.0915ZM52.4802 47.6332H55.9384V44.175H52.4802V47.6332Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M57.6675 58.0075H50.7511C49.7961 58.0075 49.022 57.2332 49.022 56.2784C49.022 55.3236 49.7961 54.5493 50.7511 54.5493H55.9384V49.3619C55.9384 48.4071 56.7127 47.6328 57.6675 47.6328C58.6223 47.6328 59.3966 48.4071 59.3966 49.3619V56.2784C59.3966 57.2332 58.6223 58.0075 57.6675 58.0075Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M83.9717 51.0915H77.0553C76.1003 51.0915 75.3262 50.3172 75.3262 49.3624V42.4459C75.3262 41.4911 76.1003 40.7168 77.0553 40.7168H83.9717C84.9265 40.7168 85.7008 41.4911 85.7008 42.4459V49.3624C85.7008 50.3172 84.9265 51.0915 83.9717 51.0915ZM78.7844 47.6332H82.2426V44.175H78.7844V47.6332Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M83.9717 58.0075H77.0553C76.1003 58.0075 75.3262 57.2332 75.3262 56.2784C75.3262 55.3236 76.1003 54.5493 77.0553 54.5493H82.2426V49.3619C82.2426 48.4071 83.0169 47.6328 83.9717 47.6328C84.9265 47.6328 85.7008 48.4071 85.7008 49.3619V56.2784C85.7008 57.2332 84.9265 58.0075 83.9717 58.0075Z",fill:"#42516D"})]})}))})),Iw=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M104.436 85.293L104.428 91.3533L52.5811 121.483L52.5902 115.423L104.436 85.293Z",fill:"#C17E47"}),(0,f.jsx)("path",{d:"M52.5904 115.423L52.5813 121.483L0.395996 91.3541L0.404919 85.2939L52.5904 115.423Z",fill:"#D89C60"}),(0,f.jsx)("path",{d:"M104.437 85.2929L52.5903 115.423L0.404785 85.2936L52.2512 55.1636L104.437 85.2929Z",fill:"#E5AE70"}),(0,f.jsx)("path",{d:"M104.676 39.2806L104.527 85.8499V85.8939L86.9473 76.9182V76.8956L86.7486 76.7924L85.1843 75.9811H85.1596L83.5705 75.1688H83.5458L81.9567 74.3566L81.9319 74.3352L80.3429 73.5229L80.3181 73.5002L78.7291 72.7106L78.7043 72.6892L77.1153 71.8769L77.0905 71.8543L75.5014 71.043H75.4767L73.8876 70.2307L73.8629 70.2081L72.2738 69.3967H72.249L71.3801 68.9359C71.0964 68.7934 56.0305 61.2298 67.4321 66.9538L66.0417 66.2293H66.0169L64.4279 65.417L64.4031 65.3956L62.814 64.5833H62.7893L61.2002 63.771L61.1755 63.7496L59.5864 62.96L59.5616 62.9374L57.9726 62.1251H57.9478V62.1037L56.3563 61.3147L56.3315 61.2921L54.7425 60.4798H54.7177V60.4584L53.1287 59.6688L53.1039 59.6461L51.5148 58.8338H51.4901V58.8124L49.876 58.0002L50.0248 11.4082L51.6389 12.2419H51.6637L53.2528 13.0542L53.2775 13.0756L54.8666 13.8665V13.8879H54.8913L56.4804 14.7002L56.5052 14.7216L58.0942 15.5124V15.5338H58.119L59.708 16.3461L59.7328 16.3675L61.3218 17.1584V17.1798H61.3466L62.9357 17.9921L62.9604 18.0135L63.0845 18.0585L64.5495 18.8044V18.8258L66.1633 19.6381L67.7774 20.4504V20.4718L69.3915 21.2841L71.0053 22.0963V22.1177L72.5944 22.9086V22.93H72.6191L74.2082 23.7423L74.2329 23.7637L75.822 24.5546V24.576H75.8468L77.4358 25.3883L77.4606 25.4097L79.0496 26.2006V26.222H79.0744L80.6635 27.0343H80.6882V27.0557L82.2792 27.8466V27.868H82.304L83.893 28.6802H83.9178V28.7016L85.5068 29.4925V29.5139H85.5316L87.1207 30.3262H87.1454V30.3476L88.7345 31.1385V31.1599H88.7592L90.3483 31.9722H90.3731V31.9936L91.9621 32.8059H91.9869L93.5759 33.6182H93.6007V33.6396L95.1897 34.4519H95.2145L96.8036 35.2641H96.8283V35.2856L98.4174 36.0978H98.4422L100.031 36.9101H100.056V36.9315L101.645 37.7438H101.67L103.259 38.5561H103.284V38.5775L104.676 39.2806Z",fill:"#89B5D6"}),(0,f.jsx)("path",{d:"M41.9198 34.286C44.6751 35.35 47.1361 34.7847 48.7581 32.2302C49.7768 33.8116 50.8996 36.4141 52.6155 36.4141C53.448 36.4141 54.2378 36.7092 54.9467 36.2846C55.536 36.7062 56.2137 36.9462 56.9349 36.9462C59.2068 36.9462 61.0486 34.5641 61.0486 31.6258C61.0486 28.9378 59.5073 26.7154 57.5055 26.3561C56.5671 24.1083 54.7292 22.5811 52.6155 22.049C51.6306 22.049 51.117 21.8485 50.315 21.366C49.1464 16.8171 45.8293 12.4723 41.9198 11.4082C38.5739 11.4082 35.6619 11.683 34.1593 15.2273C33.3791 14.8229 32.5274 13.5364 31.6355 13.5364C28.8354 13.5364 26.4313 14.6652 25.3939 17.7955C25.3492 17.7936 25.3043 17.7927 25.2592 17.7927C22.9873 17.7927 21.1455 20.1747 21.1455 23.1131C21.1455 26.0515 22.9873 28.4335 25.2592 28.4335C25.9409 28.4335 26.5838 28.2191 27.1498 27.8396C28.3459 29.2027 29.916 31.0937 31.6355 31.0937C33.4865 32.1578 35.1644 31.1996 36.3889 29.6457C37.9036 32.2816 39.8268 34.286 41.9198 34.286Z",fill:"#FEFBFB"}),(0,f.jsx)("path",{d:"M94.7728 69.0016C93.4231 69.1368 93.0555 67.8136 93.0362 67.8116C89.8222 67.4695 87.5458 64.0572 87.8878 60.8431C88.2299 57.629 91.0609 55.8303 94.2749 56.1724C95.2559 56.2768 96.1025 57.1474 96.8677 57.6623C98.2614 55.9695 101.313 54.2461 104.622 54.5983C108.164 55.0766 110.216 59.2832 111.161 62.1823C111.892 61.959 112.575 62.9353 113.383 63.0213C116.494 64.4224 118.822 67.3052 118.48 70.5192C118.138 73.7333 115.255 76.0615 112.145 74.6605C112.142 74.6602 112.14 74.6599 112.137 74.6597C112.121 74.6579 112.104 74.656 112.087 74.654C110.54 75.7364 108.459 75.8087 104.07 74.2716C99.5778 73.7935 96.0576 70.3853 94.7728 69.0016Z",fill:"#FEFBFB"}),(0,f.jsx)("path",{d:"M33.0208 30.6826C29.8087 30.4476 27.4525 39.5944 25.8195 48.2259L20.9621 72.8919L75.0424 106.314L76.5211 106.377L76.5211 81.1189C76.5211 70.5596 76.2805 37.4117 70.9506 37.0217C64.2883 36.5343 61.4394 60.7593 59.417 60.6113C57.3945 60.4633 55.3407 43.4096 51.0578 43.0962C46.7749 42.7829 46.1278 52.6139 44.4264 52.981C42.7251 53.348 41.0845 46.3465 40.1807 43.9865C39.2769 41.6265 36.233 30.9176 33.0208 30.6826Z",fill:"#0B8735"}),(0,f.jsx)("path",{d:"M31.6214 30.6826C28.4093 30.4476 26.0531 39.5944 24.4201 48.2259L19.5627 72.8919L75.1217 106.377L75.1217 81.1189C75.1217 70.5596 74.881 37.4117 69.5512 37.0217C62.8889 36.5343 60.04 60.7593 58.0175 60.6113C55.9951 60.4633 53.9413 43.4096 49.6584 43.0962C45.3755 42.7828 44.7284 52.6139 43.027 52.981C41.3257 53.348 39.685 46.3465 38.7813 43.9865C37.8775 41.6265 34.8336 30.9176 31.6214 30.6826Z",fill:"#0CB746"}),(0,f.jsx)("path",{d:"M29.6153 63.3294C30.5215 63.2287 32.757 63.0273 34.4487 63.0273C34.9522 63.984 36.0499 66.018 36.4124 66.5014C36.8655 67.1056 36.4124 69.3713 36.4124 70.4286C36.4124 71.2744 34.9019 76.7221 34.1467 79.3403L27.5006 75.8662C27.3999 74.6578 27.259 71.4859 27.5006 68.465C27.7423 65.4441 29.0111 63.7826 29.6153 63.3294Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M32.7045 95.6785C32.3426 96.2264 31.979 96.7723 31.6138 97.3163C31.4133 97.6098 31.583 98.1501 32.0028 98.5209C33.3616 99.7394 35.7595 101.864 35.9887 101.503C36.1664 101.225 35.0151 99.7325 34.4414 99.0156C34.2529 98.7827 34.1913 98.517 34.2697 98.3365C34.4285 97.9961 34.587 97.6551 34.7451 97.3133C34.0643 96.7667 33.3841 96.2218 32.7045 95.6785Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M35.9957 101.5C35.7595 101.858 33.3685 99.7364 32.0028 98.5209C31.583 98.1501 31.4133 97.6098 31.6138 97.3104C31.631 97.2853 31.6479 97.2601 31.6644 97.235C31.5979 97.5374 31.7825 97.9489 32.1249 98.2641C33.3576 99.3696 35.3674 101.158 35.9897 101.272C36.0175 101.378 36.0175 101.458 35.9957 101.5Z",fill:"#E4E8EB"}),(0,f.jsx)("path",{d:"M14.5586 77.4409C13.7262 77.0139 12.8942 76.5872 12.0624 76.1609C11.6099 75.9299 11.2059 76.0826 11.1702 76.5208C11.0451 77.9287 10.8655 80.4043 11.3975 80.67C11.8223 80.8822 12.3781 79.7242 12.6222 79.1412C12.7056 78.9508 12.915 78.8933 13.1572 78.9964C13.6223 79.1901 14.0878 79.3838 14.5536 79.5774C14.555 78.8656 14.5566 78.1534 14.5586 77.4409Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M11.4044 80.673C10.8655 80.3973 11.0521 77.9316 11.1632 76.5109C11.199 76.0727 11.6099 75.923 12.0624 76.147C12.0988 76.1675 12.1356 76.1877 12.1726 76.2075C11.8183 76.1213 11.5543 76.2977 11.5116 76.6576C11.3995 77.9336 11.2317 80.0097 11.6138 80.671C11.5444 80.7106 11.4679 80.6997 11.4044 80.673Z",fill:"#E4E8EB"}),(0,f.jsx)("path",{d:"M25.2727 70.4442C24.7301 69.9769 24.1872 69.5096 23.644 69.0423C23.644 69.0423 21.2153 71.2424 22.709 72.6502C23.4425 73.3323 23.6718 71.5299 24.0221 71.4347C24.0221 71.4347 23.9536 72.4876 24.5759 72.8802C24.8667 73.0696 24.6236 70.3917 25.2727 70.4442Z",fill:"#F4D0B5"}),(0,f.jsx)("path",{d:"M34.636 98.396C34.636 98.396 38.5117 91.1942 38.1008 87.6686C37.8348 85.302 34.9248 81.6376 33.8578 79.1065C33.3576 77.9187 30.2199 78.585 30.2199 78.585C29.3399 80.2869 30.4509 78.6273 29.5742 80.3081C30.9306 82.4443 32.2897 84.5802 33.6514 86.7158C33.175 89.8957 32.69 93.0442 32.1964 96.1613C33.0083 96.9035 33.8214 97.6484 34.636 98.396Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M34.2826 79.1253C34.1933 79.2294 34.1099 79.3454 34.0067 79.4356C33.5859 79.9105 33.1254 80.3289 32.6341 80.7255C32.3383 80.9763 32.0336 81.1617 31.7914 81.4304C31.5354 81.6783 31.2863 81.9569 31.0441 82.2464C30.9945 82.2989 30.9538 82.3495 30.9051 82.403C30.6941 82.0679 30.4837 81.7328 30.2739 81.3977C30.524 81.1042 30.794 80.8346 31.0987 80.5857C31.4113 80.3408 31.7766 80.1485 32.115 79.9988C32.6946 79.7103 33.2871 79.4426 33.9253 79.2433C34.0424 79.1937 34.1586 79.164 34.2826 79.1253Z",fill:"#424852"}),(0,f.jsx)("path",{d:"M32.4951 63.0114C32.4951 63.0114 27.4006 63.2999 26.0667 63.7768C24.9124 64.1863 23.241 69.2862 23.241 69.2862C23.8742 69.8276 24.5071 70.3702 25.1397 70.9142C26.0958 69.6332 27.0575 68.3454 28.0249 67.0505C29.3853 67.27 30.741 67.4901 32.0922 67.7108C32.2179 66.1463 32.3522 64.5799 32.4951 63.0114Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M13.7686 79.5616C13.7686 79.5616 23.9437 84.5733 27.0741 84.5168C29.1474 84.495 30.3771 81.5831 31.9334 80.6303C32.6648 80.1842 34.2826 79.1253 34.2826 79.1253C32.0687 77.929 29.8498 76.7475 27.6259 75.5809C26.5983 76.9154 25.5721 78.2459 24.5472 79.5725C21.0721 78.7231 17.5943 77.8857 14.114 77.0601C13.9982 77.8943 13.883 78.7281 13.7686 79.5616Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M27.2994 75.5829C27.2994 75.5829 28.5519 73.4453 28.8348 72.6393C29.5504 70.593 29.3479 65.1182 30.7275 63.5864C31.3389 62.9083 33.9779 62.9033 33.9779 62.9033C34.8679 64.1241 35.7615 65.3509 36.6587 66.5836C36.6587 66.5836 37.5013 70.7615 37.4735 72.0187C37.4299 74.184 36.0979 77.1147 35.4409 78.6812C35.2126 79.2146 34.8156 81.0011 34.8156 81.0011C32.1358 79.8689 29.6387 78.0268 27.2994 75.5829Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M27.2994 75.5829C27.2994 75.5829 28.5519 73.4453 28.8348 72.6393C29.5504 70.593 29.3479 65.1182 30.7275 63.5864C31.3389 62.9083 33.9779 62.9033 33.9779 62.9033C34.8679 64.1241 35.7615 65.3509 36.6587 66.5836C36.6587 66.5836 37.5013 70.7615 37.4735 72.0187C37.4299 74.184 36.0979 77.1147 35.4409 78.6812C35.2126 79.2146 34.8156 81.0011 34.8156 81.0011C32.1358 79.8689 29.6387 78.0268 27.2994 75.5829Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M36.4413 76.0459C36.3847 76.2283 36.3222 76.3989 36.2527 76.5733C35.822 76.0033 35.4796 75.4183 35.1521 74.8482C34.3521 73.371 33.6583 71.8729 33.0787 70.3768C33.8439 71.8343 34.626 73.2956 35.5084 74.6777C35.8031 75.1397 36.1178 75.6206 36.4413 76.0459Z",fill:"#E8553E"}),(0,f.jsx)("path",{d:"M38.7429 66.5509C39.4397 66.6064 40.7498 63.2612 40.4471 61.7543C40.1533 60.2582 37.4378 60.2453 37.4378 60.2453C36.2924 59.5126 35.5917 60.048 35.2235 61.5302C35.2235 61.5302 34.4136 62.6406 33.972 62.9004C33.972 62.9004 35.2741 66.8057 36.2081 67.2082C36.7411 67.4412 36.1684 66.534 37.5341 65.6635C37.548 65.6615 38.1494 66.5062 38.7429 66.5509Z",fill:"#F4D0B5"}),(0,f.jsx)("path",{d:"M34.9317 61.9238C34.9317 61.9238 33.9462 59.8923 34.7283 58.6956C35.4994 57.5 36.3242 56.9854 37.7782 57.4673C39.2303 57.9511 42.1006 60.0975 40.6505 62.6694C40.5463 62.8548 40.3051 62.8518 40.1017 62.6713C39.8019 62.4096 39.3732 61.9803 39.0308 61.3805C38.4353 60.3494 37.9678 62.2599 37.3991 61.6739C36.8552 60.1898 35.6493 60.5268 36.1882 62.0041C36.2627 62.5355 34.9317 61.9238 34.9317 61.9238Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M36.5684 63.5696C36.5684 63.5696 36.4274 65.0726 36.8433 66.2891C36.9902 66.0878 37.2125 65.8826 37.541 65.6586C37.541 65.6586 36.8155 64.5918 36.5684 63.5696Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M46.3435 76.0806C46.3167 76.0667 46.284 76.0429 46.2562 76.0211C36.2617 68.2436 25.9992 60.7638 15.4687 53.5818C15.2742 53.4579 15.169 53.2229 15.2236 53.0543C15.2782 52.8868 15.4836 52.861 15.6791 52.9839C26.2129 60.1527 36.4658 67.6153 46.4378 75.3717C46.6194 75.5145 46.7197 75.7792 46.6721 75.9626C46.6254 76.1064 46.4904 76.154 46.3435 76.0806Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M12.8019 59.352C12.6143 60.5625 12.918 62.2639 14.0564 63.2345C15.1501 64.1674 16.365 63.9067 17.55 64.2338C18.9792 64.6334 20.465 65.9639 21.8257 66.0165C23.0455 66.067 23.8355 64.9685 23.8881 63.6023C24.0102 60.9532 21.3453 56.103 18.5782 55.3168C15.7069 54.4899 13.1979 56.7752 12.8019 59.352Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M13.4212 58.9138C13.2515 59.9895 13.5204 61.4975 14.5338 62.361C15.5094 63.1889 16.5873 62.9509 17.6463 63.2454C18.9167 63.5973 20.2447 64.7831 21.4535 64.8248C22.5363 64.8634 23.24 63.8898 23.2906 62.6783C23.4028 60.3315 21.0258 56.0237 18.5633 55.3247C16.0176 54.5881 13.7844 56.6235 13.4212 58.9138Z",fill:"#FBD277"}),(0,f.jsx)("path",{d:"M20.1325 54.6664C20.1911 54.3601 20.1355 53.9397 19.8486 53.7117C19.5757 53.4886 19.2611 53.5629 18.9603 53.4856C18.5931 53.3984 18.2199 53.0742 17.8726 53.0712C17.5619 53.0672 17.3535 53.3349 17.3436 53.669C17.3178 54.3145 17.9956 55.4873 18.6695 55.6827C19.3653 55.8859 20.0025 55.3069 20.1325 54.6664Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M18.6954 55.5657C18.3688 55.4407 18.0443 55.3029 17.7267 55.1463C17.6403 55.1056 17.5768 55.0045 17.5867 54.9232C17.5957 54.8429 17.6701 54.7943 17.7634 54.8578C18.3996 55.1641 19.0517 55.413 19.6918 55.5865C19.7861 55.6014 19.8556 55.6985 19.8606 55.7848C19.8645 55.872 19.803 55.9256 19.7156 55.8998C19.3752 55.8125 19.0348 55.6955 18.6954 55.5657Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M18.7271 64.4668C18.5405 63.172 18.737 62.017 19.2521 61.1624C18.9474 62.1716 18.9981 63.3792 19.3703 64.564C19.1559 64.5316 18.9415 64.4992 18.7271 64.4668Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M16.9644 63.4248C17.9817 62.5058 18.5683 61.0345 18.5524 59.2856C18.7956 61.1039 18.4393 62.8101 17.5242 64.0078C17.3369 63.8135 17.1504 63.6192 16.9644 63.4248Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M44.3913 75.6315C44.3913 75.6315 46.6185 76.0727 45.5724 73.8132C44.9421 72.445 44.5064 73.2956 44.4439 73.6674C44.4439 73.6674 44.3873 72.9338 44.0151 72.8802C43.7213 72.8346 43.7144 74.0333 43.7144 74.0333C43.94 74.5647 44.1656 75.0974 44.3913 75.6315Z",fill:"#F4D0B5"}),(0,f.jsx)("path",{d:"M33.0738 70.3748C33.0738 70.3748 35.7366 76.3275 37.3147 77.307C39.5429 78.7317 44.952 75.9368 44.952 75.9368C44.5557 74.991 44.1607 74.0475 43.767 73.1063C42.1472 73.2946 40.5235 73.4774 38.8958 73.6545C38.1077 72.2421 37.3233 70.8362 36.5426 69.4369",fill:"#FA6C51"})]})}))})),Dw=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("ellipse",{cx:"60.5",cy:"64",rx:"22.5",ry:"22",fill:"url(#paint0_radial_1818_4221)",fillOpacity:"0.5"}),(0,f.jsx)("circle",{cx:"60.5",cy:"64.5",r:"24.4",stroke:"#877629",strokeWidth:"0.2",fill:"none"}),(0,f.jsx)("path",{d:"M75.9801 54.0386C74.7269 52.2111 72.9567 50.9042 70.9538 50.3278C68.9509 49.7514 66.8315 49.939 64.9363 50.8605C63.2399 51.673 62.1935 52.3704 60.5 53.6757C58.8065 52.3704 57.7601 51.6686 56.0637 50.8605C54.1685 49.939 52.0491 49.7514 50.0462 50.3278C48.0433 50.9042 46.2731 52.2111 45.0199 54.0386C43.6984 55.9606 43 58.3627 43 60.9843C43 64.7571 45.0271 68.8963 49.0245 73.2914C52.2818 76.8714 56.131 79.8032 58.1349 81.2318C58.841 81.7334 59.6617 82 60.5 82C61.3383 82 62.159 81.7334 62.8651 81.2318C64.8674 79.8032 68.7182 76.8714 71.9755 73.2914C75.9729 68.898 78 64.7571 78 60.9843C78 58.3627 77.3016 55.9606 75.9801 54.0386Z",fill:"url(#paint1_radial_1818_4221)",fillOpacity:"0.3"}),(0,f.jsx)("path",{d:"M29.3264 56.1552C28.288 54.7274 26.8213 53.7064 25.1617 53.2561C23.5022 52.8058 21.7461 52.9523 20.1758 53.6723C18.7702 54.307 17.5167 55.3773 16.5 56.7976C15.4833 55.3738 14.2298 54.3036 12.8242 53.6723C11.2539 52.9523 9.49785 52.8058 7.83829 53.2561C6.17874 53.7064 4.71198 54.7274 3.67364 56.1552C2.57867 57.6567 2 59.5333 2 61.5815C2 64.529 3.67961 67.7627 6.99172 71.1964C9.69064 73.9933 12.88 76.2838 14.5403 77.3999C15.1254 77.7917 15.8054 78 16.5 78C17.1946 78 17.8746 77.7917 18.4597 77.3999C20.1187 76.2838 23.3094 73.9933 26.0083 71.1964C29.3204 67.7641 31 64.529 31 61.5815C31 59.5333 30.4213 57.6567 29.3264 56.1552Z",fill:"#EF6FFA"}),(0,f.jsx)("path",{d:"M74.2109 56.1552C73.101 54.7274 71.5331 53.7064 69.7591 53.2561C67.9851 52.8058 66.1079 52.9523 64.4293 53.6723C62.9268 54.307 61.5868 55.3773 60.5 56.7976C59.4132 55.3738 58.0732 54.3036 56.5707 53.6723C54.8921 52.9523 53.0149 52.8058 51.2409 53.2561C49.4669 53.7064 47.899 54.7274 46.7891 56.1552C45.6186 57.6567 45 59.5333 45 61.5815C45 64.529 46.7954 67.7627 50.336 71.1964C53.221 73.9933 56.6303 76.2838 58.4052 77.3999C59.0306 77.7917 59.7575 78 60.5 78C61.2425 78 61.9694 77.7917 62.5948 77.3999C64.3683 76.2838 67.779 73.9933 70.664 71.1964C74.2046 67.7641 76 64.529 76 61.5815C76 59.5333 75.3814 57.6567 74.2109 56.1552Z",fill:"#FA6FCB"}),(0,f.jsx)("path",{d:"M116.326 56.1552C115.288 54.7274 113.821 53.7064 112.162 53.2561C110.502 52.8058 108.746 52.9523 107.176 53.6723C105.77 54.307 104.517 55.3773 103.5 56.7976C102.483 55.3738 101.23 54.3036 99.8242 53.6723C98.2539 52.9523 96.4978 52.8058 94.8383 53.2561C93.1787 53.7064 91.712 54.7274 90.6736 56.1552C89.5787 57.6567 89 59.5333 89 61.5815C89 64.529 90.6796 67.7627 93.9917 71.1964C96.6906 73.9933 99.88 76.2838 101.54 77.3999C102.125 77.7917 102.805 78 103.5 78C104.195 78 104.875 77.7917 105.46 77.3999C107.119 76.2838 110.309 73.9933 113.008 71.1964C116.32 67.7641 118 64.529 118 61.5815C118 59.5333 117.421 57.6567 116.326 56.1552Z",fill:"#50379A"}),(0,f.jsx)("line",{x1:"60.75",y1:"48.75",x2:"60.75",y2:"38.25",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"60.75",y1:"94.75",x2:"60.75",y2:"84.25",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"78.25",y1:"66.75",x2:"86.75",y2:"66.75",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"33.25",y1:"66.75",x2:"42.75",y2:"66.75",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"76.2373",y1:"49.2572",x2:"77.9875",y2:"47.507",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"43.6777",y1:"81.8168",x2:"45.4279",y2:"80.0666",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"74.7735",y1:"80.0664",x2:"76.5237",y2:"81.8166",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"42.2144",y1:"47.5073",x2:"43.9646",y2:"49.2575",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsxs)("defs",{children:[(0,f.jsxs)("radialGradient",{id:"paint0_radial_1818_4221",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(60.5 64) rotate(90) scale(22 22.5)",children:[(0,f.jsx)("stop",{offset:"0.5",stopColor:"#DCFF7A",stopOpacity:"0"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#FFE27A",stopOpacity:"0.44"})]}),(0,f.jsxs)("radialGradient",{id:"paint1_radial_1818_4221",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(60.5 66) rotate(90) scale(16 17.5)",children:[(0,f.jsx)("stop",{stopColor:"#FA916F",stopOpacity:"0"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#FA916F"})]})]})]}))})),Aw=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("g",{filter:"url(#filter0_f_1901_4247)",children:(0,f.jsx)("ellipse",{cx:"57.5",cy:"72",rx:"33.5",ry:"33",fill:"#32323B"})}),(0,f.jsx)("ellipse",{cx:"56.5",cy:"69",rx:"33.5",ry:"33",fill:"#32323B"}),(0,f.jsx)("ellipse",{cx:"56.5",cy:"69",rx:"22.5",ry:"23",fill:"#3E3E4D"}),(0,f.jsx)("path",{d:"M71.2857 74L69 71.8L72.4285 68.5L69 65.2L71.2857 63L77 68.5L71.2857 74Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M60 56L57 52.5715L54 56L52 53.7143L57 48L62 53.7143L60 56Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M57 88L52 82.2857L54 80L57 83.4285L60 80L62 82.2857L57 88Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M42.7143 74L37 68.5L42.7143 63L45 65.2L41.5715 68.5L45 71.8L42.7143 74Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M86.4285 77L83 73.6L88.1427 68.5L83 63.4L86.4285 60L95 68.5L86.4285 77Z",fill:"#9A977E"}),(0,f.jsx)("path",{d:"M104.857 80L100 75.2L107.286 68L100 60.8L104.857 56L117 68L104.857 80Z",fill:"#CFD166"}),(0,f.jsx)("path",{d:"M25.7 63.1269L27.9219 65.2478L24.5891 68.4292L27.9219 71.6106L25.7 73.7314L20.1452 68.4292L25.7 63.1269Z",fill:"#9A977E",fillOpacity:"0.2"}),(0,f.jsx)("path",{d:"M12.0024 61.0057L15.0322 63.9749L10.4875 68.4289L15.0322 72.8828L12.0024 75.8521L4.42768 68.4289L12.0024 61.0057Z",fill:"#CFD166",fillOpacity:"0.2"}),(0,f.jsx)("defs",{children:(0,f.jsxs)("filter",{id:"filter0_f_1901_4247",x:"17",y:"32",width:"81",height:"80",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"3.5",result:"effect1_foregroundBlur_1901_4247"})]})})]}))})),Lw=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_1906_4221)",children:[(0,f.jsx)("path",{d:"M80.3175 45.6273V32.793H40.6821V45.6273C40.6821 54.6285 46.6834 62.2268 54.9028 64.6421C56.6159 65.1455 57.7944 66.7139 57.7944 68.4992V68.5011C57.7944 70.2864 56.6159 71.8548 54.9028 72.3582C46.6834 74.7735 40.6821 82.3719 40.6821 91.373V104.671H80.3174V91.373C80.3174 82.3709 74.3148 74.7718 66.0939 72.3574C64.3806 71.8542 63.2019 70.2856 63.2019 68.5002C63.2019 66.7145 64.3807 65.1459 66.0939 64.6429C74.315 62.2285 80.3175 54.6294 80.3175 45.6273Z",fill:"#EBEBFC"}),(0,f.jsx)("path",{d:"M66.0942 64.6429C74.3151 62.2285 80.3177 54.6294 80.3177 45.6273V32.793H74.5957V45.6273C74.5957 54.6294 71.6129 62.2285 63.3922 64.6429C61.6789 65.1461 60.5 66.7145 60.5 68.5002C60.5 70.2858 61.6789 71.8544 63.392 72.3574C71.6129 74.7717 74.5956 82.3709 74.5956 91.373V104.671H80.3175V91.373C80.3175 82.3709 74.315 74.7717 66.0941 72.3574C64.3809 71.8542 63.202 70.2858 63.202 68.5002C63.2022 66.7145 64.3811 65.1461 66.0942 64.6429Z",fill:"#B7B7DC"}),(0,f.jsx)("path",{d:"M79.7609 33.9936H41.2391C38.446 33.9936 36.1816 31.7292 36.1816 28.9361V27H84.8182V28.9361C84.8183 31.7292 82.554 33.9936 79.7609 33.9936Z",fill:"#BB706A"}),(0,f.jsx)("path",{d:"M73.7981 27V28.7824C73.7981 31.6605 71.465 33.9936 68.5869 33.9936H79.6069C82.485 33.9936 84.8181 31.6605 84.8181 28.7824V27H73.7981Z",fill:"#A55B5B"}),(0,f.jsx)("path",{d:"M41.2391 103.006H79.7609C82.554 103.006 84.8183 105.271 84.8183 108.064V110H36.1816V108.064C36.1816 105.271 38.446 103.006 41.2391 103.006Z",fill:"#BB706A"}),(0,f.jsx)("path",{d:"M79.6073 103.006H70.1362C73.0142 103.006 75.3474 105.339 75.3474 108.218V110H84.8185V108.218C84.8185 105.34 82.4854 103.006 79.6073 103.006Z",fill:"#A55B5B"}),(0,f.jsx)("path",{d:"M60.4999 60.6434C52.3001 60.6434 45.6528 53.9961 45.6528 45.7963V45.8618C47.0513 46.4616 49.2795 47.2073 51.9936 47.1333C59.7183 46.9228 63.19 40.2954 68.8303 41.1432C70.4768 41.3908 75.005 42.8303 75.3471 45.8618C75.3446 45.84 75.3471 45.8181 75.3471 45.7963C75.3471 53.9961 68.6998 60.6434 60.4999 60.6434Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 94.791C65.0373 94.791 68.7156 98.4693 68.7156 103.007V102.971H52.2842V103.007C52.2842 98.4693 55.9624 94.791 60.4999 94.791Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 59.3906C59.8078 59.3906 59.2471 59.9515 59.2471 60.6434V64.0166C59.2471 64.7086 59.8078 65.2694 60.4999 65.2694C61.1919 65.2694 61.7526 64.7085 61.7526 64.0166V60.6434C61.7526 59.9515 61.1919 59.3906 60.4999 59.3906Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 72.3257C59.8078 72.3257 59.2471 72.8864 59.2471 73.5785V75.7361C59.2471 76.4282 59.8078 76.9889 60.4999 76.9889C61.1919 76.9889 61.7526 76.428 61.7526 75.7361V73.5785C61.7526 72.8866 61.1919 72.3257 60.4999 72.3257Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 79.0381C59.8078 79.0381 59.2471 79.599 59.2471 80.2909V80.7595C59.2471 81.4516 59.8078 82.0123 60.4999 82.0123C61.1919 82.0123 61.7526 81.4516 61.7526 80.7595V80.2909C61.7526 79.599 61.1919 79.0381 60.4999 79.0381Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 87.6826C59.8078 87.6826 59.2471 88.2435 59.2471 88.9354V94.7021C59.2471 95.394 59.8078 95.9549 60.4999 95.9549C61.1919 95.9549 61.7526 95.394 61.7526 94.7021V88.9354C61.7526 88.2434 61.1919 87.6826 60.4999 87.6826Z",fill:"#FBB84D"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_1906_4221",children:(0,f.jsx)("rect",{width:"83",height:"83",fill:"white",transform:"translate(19 27)"})})})]}))})),Mw=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("path",{d:"M19.5 62.0972L6.00025 69.8906L19.5 77.684L32.9997 69.8906L19.5 62.0972Z",fill:"#FFFAF2"}),(0,f.jsx)("path",{d:"M33 69.8364L19.7721 77.5087L20 93L33 85.5596V69.8364Z",fill:"#FFECD1"}),(0,f.jsx)("path",{d:"M6.01367 69.8364L19.8503 77.5824L20 93L6.01367 85.5331V69.8364Z",fill:"#FFE1B4"}),(0,f.jsx)("path",{d:"M47.665 40L23.985 53.6705L47.665 67.341L71.3451 53.6705L47.665 40Z",fill:"#FFEDE8"}),(0,f.jsx)("path",{d:"M71.3447 53.5752L48.1556 67.182V94.6963L71.3447 81.1554V53.5752Z",fill:"#FFC2B4"}),(0,f.jsx)("path",{d:"M24.0088 53.5752L48.2798 67.1625V94.6962L24.0088 81.1088V53.5752Z",fill:"#FF8569"}),(0,f.jsx)("path",{d:"M94.6416 40.8213L76.2989 51.4105L94.6416 61.9997L112.984 51.4105L94.6416 40.8213Z",fill:"#FFFAF2"}),(0,f.jsx)("path",{d:"M112.984 51.3369L95.0236 61.8395V83.2396L112.984 72.7007V51.3369Z",fill:"#FFBC57"}),(0,f.jsx)("path",{d:"M76.3184 51.3369L95.1188 61.8617V83.1894L76.3184 72.6646V51.3369Z",fill:"#FB9600"}),(0,f.jsx)("path",{d:"M107.901 20H105.577V37.1051H107.901V20Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M107.855 37.1051C111.115 37.1051 113.757 33.276 113.757 28.5526C113.757 23.8291 111.115 20 107.855 20C104.595 20 101.952 23.8291 101.952 28.5526C101.952 33.276 104.595 37.1051 107.855 37.1051Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M113.757 27.9018C109.043 24.8164 104.599 25.8711 102.695 24.5293C103.687 21.833 105.641 20 107.889 20C110.988 20 113.527 23.4831 113.757 27.9018Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M113.757 27.9018C109.043 24.8279 104.599 25.8787 102.695 24.5419C103.687 21.8556 102.695 19.7223 107.889 20.0295C110.988 20.0295 113.527 23.4996 113.757 27.9018Z",fill:"#F6C231"}),(0,f.jsx)("path",{d:"M105.856 37.1051C109.09 37.1051 111.712 33.276 111.712 28.5526C111.712 23.8291 109.09 20 105.856 20C102.622 20 100 23.8291 100 28.5526C100 33.276 102.622 37.1051 105.856 37.1051Z",fill:"#FFF69B"}),(0,f.jsx)("path",{d:"M105.763 37.1051C102.572 37.0137 100 33.2204 100 28.5536C100 23.8868 102.557 20.1105 105.737 20C105.15 25.6874 105.158 31.4195 105.763 37.1051Z",fill:"#FAF679"}),(0,f.jsx)("path",{d:"M105.205 32.4548C104.592 32.4081 104.117 31.8174 104.089 31.1481C104.074 30.7507 103.997 30.3364 103.997 28.7173C103.997 27.3425 104.08 26.5117 104.089 26.2525C104.085 25.9415 104.203 25.6413 104.417 25.4153C104.518 25.3105 104.641 25.2293 104.777 25.1775C104.913 25.1256 105.059 25.1046 105.205 25.1157C105.519 25.1589 105.807 25.316 106.013 25.5571C106.219 25.7981 106.328 26.1061 106.321 26.4224C106.271 27.1704 106.239 27.963 106.239 28.798C106.239 29.5948 106.261 30.3513 106.306 31.0673C106.321 31.2854 106.284 31.5041 106.197 31.7048C105.983 32.1765 105.591 32.4846 105.205 32.4548Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M105.366 32.4557C104.841 32.409 104.418 31.8019 104.34 31.1353C104.279 30.6068 104.268 29.1739 104.281 28.7684C104.3 28.104 104.298 26.8706 104.361 26.2614C104.374 25.9488 104.491 25.6497 104.693 25.4123C104.773 25.3109 104.876 25.2308 104.993 25.179C105.111 25.1272 105.239 25.1052 105.366 25.1151C105.892 25.1618 106.321 25.7519 106.321 26.4206C106.273 27.1445 106.244 27.9066 106.241 28.7196C106.241 29.6345 106.269 30.5006 106.321 31.3115C106.223 31.9972 105.772 32.4833 105.366 32.4557Z",fill:"#FEBB2F"})]}))})),Fw=function(e){switch(e){case"small":return 1;case"medium":default:return 2;case"large":return 3;case"xlarge":return 4}},Ow=330*Fw("xlarge"),Rw={grid:{textAlign:"center",maxWidth:Ow,overflow:"hidden",width:"100%"},bannerContainer:{width:"100%",maxWidth:Ow-10}},Bw=function(e){var t=e.selectInAppTutorial,n=(0,wa.k)(),r=u.useContext(to.Z),o=r.inAppTutorialShortHeaders,a=r.inAppTutorialsFetchingError,s=r.fetchInAppTutorials,l=u.useContext(X.ZP).getTutorialProgress,d=u.useContext(ir.ZP),p=(0,T.L)(),h=u.useContext(to.Z).currentlyRunningInAppTutorial,g=function(e){var t=e.tutorialId,n=l({tutorialId:t,userId:d.profile?d.profile.id:void 0});return n&&n.progress?n.progress[0]:0},m=Sw.PP.reduce((function(e,t){return 100===(g({tutorialId:t})||0)?e+1:e}),0),x=Math.round(m/Sw.PP.length*100),v=[{id:Sw.EB,title:{id:"Add Joystick controls"},description:{id:"Learn how to add a joystick to control the player."},keyPoints:[{id:"Add a layer"},{id:"Download and use a prefab"},{id:"Use a behavior"}],durationInMinutes:1,renderImage:function(e){return(0,f.jsx)(Aw,(0,i.Z)({},e))}},{id:Sw.yw,title:{id:"Display a Health bar for the player"},description:{id:"Learn how to display the health of a player on the foreground."},keyPoints:[{id:"Add a layer"},{id:"Download and use a prefab"}],durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(Dw,(0,i.Z)({},e))}},{id:Sw.Rv,title:{id:"Add a 3D object"},description:{id:"Learn how to add a 3D object to your game."},keyPoints:[{id:"Add a 3D box"},{id:"Add a behavior"},{id:"Update the elevation of a 3D box"}],durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(Mw,(0,i.Z)({},e))}},{id:Sw.UO,title:{id:"Improve background and camera"},description:{id:"Learn how to create a parallax background as well as a camera that follows the player."},keyPoints:[{id:"Add an extension"},{id:"Add a layer"},{id:"Use a tiled sprite"},{id:"Control the camera"}],durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(Iw,(0,i.Z)({},e))}},{id:Sw.HD,title:{id:"Use a timer"},description:{id:"Learn how to use a timer to count a score."},keyPoints:[{id:"Create and use a timer"},{id:"Create and modify a text"},{id:"Build an expression"}],durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(Lw,(0,i.Z)({},e))}},{id:Sw.Xj,title:{id:"Add score multiplier"},description:{id:"Learn how to manipulate a score by adding collectibles."},keyPoints:[{id:"Create a variable"},{id:"Use & manipulate a variable"},{id:"Build an expression"}],durationInMinutes:3,renderImage:function(e){return(0,f.jsx)(Pw,(0,i.Z)({},e))}}];return(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:Rw.bannerContainer,children:a?(0,f.jsxs)(vr.Z,{onRetry:s,children:[(0,f.jsx)(c.Trans,{id:"An error occurred when downloading the tutorials."})," ",(0,f.jsx)(c.Trans,{id:"Please check your internet connection or try again later."})]}):null===o?(0,f.jsx)(Qe.Z,{}):(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(L.sg,{children:(0,f.jsxs)(C.pJ,{alignItems:"center",children:[100!==x?(0,f.jsxs)(J.Z,{displayInlineAsSpan:!0,noMargin:!0,size:"body2",children:[x,"%"]}):(0,f.jsx)(zi,{}),(0,f.jsx)(kw,{value:x})]})}),(0,f.jsx)(Kv.Z,{cols:Fw(p),style:Rw.grid,cellHeight:"auto",spacing:10,children:v.map((function(e,r){return(0,f.jsx)(fw.Z,{children:(0,f.jsx)(Ew,{title:e.title,description:e.description,durationInMinutes:e.durationInMinutes,keyPoints:e.keyPoints,renderImage:e.renderImage,progress:g({tutorialId:e.id}),onClick:function(){return t(e.id)},disabled:!!h||!n})},e.id)}))})]})})})},_w=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M54.193 62.1191L22.0432 73.4481L54.2016 89.8419L86.36 73.4481L54.193 62.1191Z",fill:"#936319"}),(0,f.jsx)("path",{d:"M86.3307 74.3174L54.2017 89.9795V122.001L86.3601 106.848V74.3703L86.3307 74.3174Z",fill:"#F0BB6B"}),(0,f.jsx)("path",{d:"M23.154 74.3174L23.1519 74.324V106.853L54.2014 122.001V89.9899L23.154 74.3174Z",fill:"#E5AC56"}),(0,f.jsx)("path",{d:"M86.4567 73.208L54.2017 89.5308L60.9187 103.149L93.0135 85.8519L86.4567 73.208Z",fill:"#EAB14D"}),(0,f.jsx)("path",{d:"M21.9465 73.208L15.3896 85.8519L47.4845 103.149L54.2015 89.5308L21.9465 73.208Z",fill:"#F0BB6B"}),(0,f.jsx)("path",{d:"M39.4453 44L52.3786 69.6372L42.9333 74.4021L30 48.7649L39.4453 44Z",fill:"#E877A7"}),(0,f.jsx)("path",{d:"M58.48 53.8975L65.1114 71.8263C65.353 72.4794 66.0667 72.8172 66.7056 72.5809L78.1802 68.3367C78.8191 68.1004 79.1412 67.3795 78.8996 66.7264L77.4365 62.7707C75.834 58.4381 77.8698 53.5796 82.087 51.9558C86.372 50.3059 91.1938 52.5595 92.8171 56.9482L94.3237 61.0214C94.5653 61.6745 95.2789 62.0123 95.9178 61.776L107.393 57.5318C108.031 57.2955 108.353 56.5746 108.112 55.9215L101.48 37.9926L58.48 53.8975Z",fill:"#FFD064"}),(0,f.jsx)("path",{d:"M3.28991 28.9998L21.6084 40.2898L10.3185 58.6083C10.1288 58.3236 9.98968 58.0034 9.91123 57.6642L3.28991 28.9998Z",fill:"#75CEF9"}),(0,f.jsx)("path",{d:"M50.5994 30.8701C52.0805 24.5156 48.13 18.1636 41.7755 16.6824C35.4211 15.2013 29.069 19.1519 27.5878 25.5064L50.5994 30.8701Z",fill:"#EAB14D"}),(0,f.jsx)("circle",{cx:"65",cy:"32",r:"9",fill:"#95D6A4"})]})}))})),Nw=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"89",height:"138",viewBox:"0 0 89 138",fill:"none",children:[(0,f.jsx)("path",{d:"M37.987 47.4639V74.2398H11.5396C11.7151 73.853 11.9604 73.4966 12.2648 73.192L37.987 47.4639Z",fill:"#57B3DF"}),(0,f.jsx)("path",{d:"M11.2158 85.0957V112.252C11.2158 113.242 12.0175 114.043 13.0066 114.043H30.7706C31.7597 114.043 32.5614 113.242 32.5614 112.252V106.261C32.5614 99.6982 37.7809 94.228 44.3419 94.1428C51.0082 94.0563 56.4395 99.4352 56.4395 106.083V112.252C56.4395 113.242 57.2411 114.043 58.2302 114.043H75.9942C76.9833 114.043 77.785 113.242 77.785 112.252V85.0957H11.2158Z",fill:"#FFD064"}),(0,f.jsx)("path",{d:"M37.9885 44.931C37.9885 33.9396 46.8972 25.0293 57.8868 25.0293C68.8764 25.0293 77.7853 33.9396 77.7853 44.931H37.9885Z",fill:"#EAB14D"}),(0,f.jsx)("path",{d:"M67.2933 36.4279C67.2933 39.5019 66.5258 42.3962 65.1736 44.9314H77.7852C77.7852 36.0635 71.9854 28.5515 63.9731 25.9795C66.0641 28.9307 67.2933 32.5356 67.2933 36.4279Z",fill:"#E49824"}),(0,f.jsx)("path",{d:"M73.0818 85.0957V105.721C73.0818 107.719 71.462 109.339 69.4639 109.339H56.4395V112.252C56.4395 113.242 57.2411 114.043 58.2302 114.043H75.9942C76.9833 114.043 77.785 113.242 77.785 112.252V85.0957H73.0818Z",fill:"#FFC250"}),(0,f.jsx)("path",{d:"M13.0066 114.043H30.7706C31.7597 114.043 32.5614 113.241 32.5614 112.252V109.339H11.2158V112.252C11.2158 113.241 12.0177 114.043 13.0066 114.043Z",fill:"#FFC250"}),(0,f.jsx)("path",{d:"M77.785 74.24V85.0954H11.2158V75.7247C11.2158 75.2071 11.3286 74.7002 11.54 74.24H77.785Z",fill:"#95D6A4"}),(0,f.jsx)("path",{d:"M73.0818 74.2412H77.7851V85.0966H73.0818V74.2412Z",fill:"#78C2A4"}),(0,f.jsx)("path",{d:"M48.8423 44.9307V74.2403H37.9886V44.9307H48.8423Z",fill:"#E877A7"}),(0,f.jsx)("path",{d:"M77.7852 44.9307V74.2403H66.9315V44.9307H77.7852Z",fill:"#E877A7"}),(0,f.jsx)("path",{d:"M77.7852 44.9307V74.2403H73.0819V44.9307H77.7852Z",fill:"#DD5790"})]}))})),Uw=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"104",height:"138",viewBox:"0 0 104 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M31.8503 53.6963H2.16699V112.827H31.8503V53.6963Z",fill:"#FFD15C"}),(0,f.jsx)("path",{d:"M31.8503 53.6963H2.16699V56.5224H31.8503V53.6963Z",fill:"#F7B64C"}),(0,f.jsx)("path",{d:"M34.0167 46.7393H0V53.9132H34.0167V46.7393Z",fill:"#FFD15C"}),(0,f.jsx)("path",{d:"M101.833 66.7393H72.1499V112.826H101.833V66.7393Z",fill:"#F78471"}),(0,f.jsx)("path",{d:"M101.833 66.7393H72.1499V69.5654H101.833V66.7393Z",fill:"#F05540"}),(0,f.jsx)("path",{d:"M104 59.7822H69.9834V66.9561H104V59.7822Z",fill:"#F78471"}),(0,f.jsx)("path",{d:"M18.8503 74.7834C19.5003 73.9138 19.717 73.2616 19.717 72.3922C19.717 71.5228 19.5003 71.0879 19.067 70.4357C18.6337 70.001 17.9837 69.5661 17.117 69.5661C15.6003 69.5661 14.3003 70.6529 13.0003 72.6095L8.66699 70.4355C9.75026 68.6964 10.8335 67.6095 12.1335 66.7399C13.4335 65.8703 14.9503 65.4355 17.1168 65.4355C19.0668 65.4355 20.8001 66.0877 22.3168 67.3921C23.8335 68.6964 24.4835 70.4355 24.4835 72.6095C24.4835 73.6963 24.2668 75.0007 23.6168 76.0878C22.9668 77.1747 21.8835 78.479 20.3668 80.2183L16.2503 84.566H25.3503V89.1313H9.10026V85.2182L15.817 78.2618C17.117 76.74 18.2003 75.6531 18.8503 74.7834Z",fill:"white"}),(0,f.jsx)("path",{d:"M80.1672 82.6095V78.2617H94.2505V81.9573L89.4837 87.3922C91.217 87.6096 92.7337 88.479 93.817 89.7834C94.9002 91.0877 95.3337 92.3921 95.3337 94.1311C95.3337 96.5224 94.467 98.4789 92.9505 99.7833C91.2172 101.088 89.2672 101.74 86.6672 101.74C84.0672 101.74 81.4672 100.87 78.8672 99.1311L81.0337 95.0008C83.2005 96.5226 85.1505 97.392 86.8837 97.392C87.967 97.392 88.8337 97.1746 89.4837 96.7398C90.1337 96.3051 90.567 95.4355 90.567 94.5659C90.567 93.6962 90.1337 92.8268 89.4837 92.3919C88.617 91.7397 87.7505 91.5222 86.2337 91.5222C85.5837 91.5222 84.5005 91.7397 83.2005 92.1744V88.479L87.5337 83.2616H80.167V82.6095H80.1672Z",fill:"white"}),(0,f.jsx)("path",{d:"M66.9499 31.9561H37.2666V112.826H66.9499V31.9561Z",fill:"#95D6A4"}),(0,f.jsx)("path",{d:"M66.9499 31.9561H37.2666V34.7822H66.9499V31.9561Z",fill:"#4ABAA5"}),(0,f.jsx)("path",{d:"M68.9 25H34.8833V32.1739H68.9V25Z",fill:"#95D6A4"}),(0,f.jsx)("path",{d:"M47.4502 43.4785H56.7669V66.5221H51.7837V47.8265H47.4502V43.4785Z",fill:"white"})]})}))})),Hw=function(e){switch(e){case"small":return 1;case"medium":return 2;default:return 3}},Vw=330*Hw("xlarge"),Ww={grid:{textAlign:"center",maxWidth:Vw,overflow:"hidden",width:"100%"},cardTextContainer:{flex:1,display:"flex"},cardImage:{width:"100%",aspectRatio:"2",maxWidth:jw},bannerContainer:{width:"100%",maxWidth:Vw-10},bannerImage:{width:"100%",aspectRatio:"16 / 9",maxWidth:jw},icon:{marginRight:8}},zw=function(e){e.onCreateProject;var t=e.onTabChange,n=e.selectInAppTutorial,r=e.showGetStartedSection,o=e.setShowGetStartedSection,a=u.useContext(to.Z),s=a.inAppTutorialShortHeaders,l=a.inAppTutorialsFetchingError,d=a.fetchInAppTutorials,p=u.useContext(X.ZP).getTutorialProgress,h=u.useContext(ir.ZP),g=(0,T.L)(),m="small"===g,x=u.useContext(to.Z).currentlyRunningInAppTutorial,v=[{key:"tutorial",title:(0,f.jsx)(c.Trans,{id:"Learn Section"}),description:(0,f.jsx)(c.Trans,{id:"Find all the learning content related to SpeXEngine."}),action:function(){return t("learn")}},{key:"build",title:(0,f.jsx)(c.Trans,{id:"\u201cHow do I\u201d forum"}),description:(0,f.jsx)(c.Trans,{id:"Ask your questions."}),action:function(){return F.ZP.openExternalURL("https://forum.engine.spacexpanse.org/")}},{key:"games",title:(0,f.jsx)(c.Trans,{id:"Wiki documentation"}),description:(0,f.jsx)(c.Trans,{id:"Get inspired and have fun."}),action:function(){return F.ZP.openExternalURL("https://wiki.engine.spacexpanse.org/spexengine5")}}],b=function(e){var t=e.tutorialId,n=e.part,r=p({tutorialId:t,userId:h.profile?h.profile.id:void 0});return r&&r.progress?r.progress[n]:0},j=function(e){var t=e.tutorialId,n=e.part;return 100===b({tutorialId:t,part:n})},y=[{key:"create",title:{id:"Start your game"},description:{id:"Add your first characters to the scene and throw your first objects."},keyPoints:[{id:"Game scene size"},{id:"Objects and characters"},{id:"Game Scenes"},{id:"Throwing physics"}],durationInMinutes:5,locked:!1,disabled:!!x||j({tutorialId:Sw.bs,part:0}),progress:b({tutorialId:Sw.bs,part:0}),renderImage:function(e){return(0,f.jsx)(_w,(0,i.Z)({},e))}},{key:"publish",title:{id:"Improve and publish your Game"},description:{id:"Add personality to your game and publish it online."},keyPoints:[{id:"Game background"},{id:"In-game obstacles"},{id:"\u201cYou win\u201d message"},{id:"Sharing online"}],durationInMinutes:10,locked:!j({tutorialId:Sw.bs,part:0}),disabled:!!x||j({tutorialId:Sw.bs,part:1}),progress:b({tutorialId:Sw.bs,part:1}),renderImage:function(e){return(0,f.jsx)(Nw,(0,i.Z)({},e))}},{key:"leaderboards",title:{id:"Add leaderboards to your online Game"},description:{id:"Add player logins to your game and add a leaderboard."},keyPoints:[{id:"Game personalisation"},{id:"\u201cStart\u201d screen"},{id:"Timers"},{id:"Leaderboards"}],durationInMinutes:15,locked:!j({tutorialId:Sw.bs,part:1}),disabled:!!x||j({tutorialId:Sw.bs,part:2}),progress:b({tutorialId:Sw.bs,part:2}),renderImage:function(e){return(0,f.jsx)(Uw,(0,i.Z)({},e))}}],Z=function(){return(0,f.jsxs)(C.ep,{justifyContent:"space-between",alignItems:"center",noColumnMargin:!0,noMargin:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Learn the basics of SpeXEngine and publish a first game."})}),(0,f.jsx)(Yn.Z,{label:(0,f.jsx)(c.Trans,{id:"Don't show this screen on next startup"}),checked:!r,onCheck:function(e,t){return o(!t)}})]})},k=j({tutorialId:Sw.bs,part:0})&&j({tutorialId:Sw.bs,part:1})&&j({tutorialId:Sw.bs,part:2});return(0,f.jsxs)(xw,{title:(0,f.jsx)(c.Trans,{id:"Guided lessons"}),renderSubtitle:function(){return(0,f.jsx)(Z,{})},children:[(0,f.jsx)(mw,{children:(0,f.jsx)(Bw,{selectInAppTutorial:n})}),(0,f.jsxs)(mw,{children:[(0,f.jsx)(J.Z,{size:"title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Create and Publish a game"})}),(0,f.jsx)(J.Z,{size:"body",color:"secondary",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"3-part tutorial to creating and publishing a game from scratch."})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(L.x1,{children:(0,f.jsx)("div",{style:Ww.bannerContainer,children:l?(0,f.jsxs)(vr.Z,{onRetry:d,children:[(0,f.jsx)(c.Trans,{id:"An error occurred when downloading the tutorials."})," ",(0,f.jsx)(c.Trans,{id:"Please check your internet connection or try again later."})]}):null===s?(0,f.jsx)(Qe.Z,{}):(0,f.jsx)(Kv.Z,{cols:k?1:Hw(g),style:Ww.grid,cellHeight:"auto",spacing:10,children:k?(0,f.jsx)(fw.Z,{children:(0,f.jsx)(Ew,{title:{id:"Congratulations! You've finished this tutorial!"},description:{id:"Find your finished game on the \u201cBuild\u201d section. Or restart the tutorial by clicking on the card."},size:"banner",locked:!1,disabled:!1,renderImage:function(e){return(0,f.jsxs)(L.x1,{justifyContent:"space-around",expand:!0,children:[(0,f.jsx)(_w,(0,i.Z)({},e)),(0,f.jsx)(Nw,(0,i.Z)({},e)),(0,f.jsx)(Uw,(0,i.Z)({},e))]})},onClick:function(){return n(Sw.bs)}})}):y.map((function(e){return(0,f.jsx)(fw.Z,{children:(0,f.jsx)(Ew,(0,i.Z)((0,i.Z)({},e),{},{onClick:function(){return n(Sw.bs)}}))},e.key)}))})})})]}),(0,f.jsxs)(mw,{children:[(0,f.jsx)(J.Z,{size:"title",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Want to explore further?"})}),(0,f.jsx)(J.Z,{size:"body",color:"secondary",noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Articles, wiki and much more."})}),(0,f.jsx)(L.hS,{}),(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(Kv.Z,{cols:Hw(g),style:Ww.grid,cellHeight:"auto",spacing:10,children:v.map((function(e,t){return(0,f.jsx)(fw.Z,{children:(0,f.jsx)(Cw,{onClick:e.action,size:"large",disabled:e.disabled,useDefaultDisabledStyle:!0,children:(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},Ww.cardTextContainer),{},{padding:m?10:20}),children:(0,f.jsxs)(C.ak,{expand:!0,justifyContent:"center",useFullHeight:!0,children:[(0,f.jsx)(J.Z,{size:"sub-title",noMargin:!0,children:e.title}),(0,f.jsx)(J.Z,{size:"body",color:"secondary",noMargin:!0,children:e.description})]})})},t)},t)}))})})]})]})},Gw=n(34517),Yw=function(e){if(!e.authenticated)return!1;var t=e.limits,n=e.cloudProjects;return!(!t||!n)&&n.filter((function(e){return!e.deletedAt})).length>=t.capabilities.cloudProjects.maximumCount},qw=function(e){var t=e.onUpgrade,n=e.limits.capabilities.cloudProjects,r=n.maximumCount,o=n.canMaximumCountBeIncreased;return(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(L.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(we.Z,{kind:"warning",renderRightButton:o?function(){return(0,f.jsx)(E.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Check our premiums plans"}),onClick:t})}:void 0,children:[(0,f.jsx)(J.Z,{size:"block-title",children:(0,f.jsx)(c.Trans,{id:"You've reached your maximum storage of {maximumCount} cloud-based projects",values:{maximumCount:r}})}),(0,f.jsx)(J.Z,{children:o?(0,f.jsx)(c.Trans,{id:"Update to SpeXEngine Premium to get more storage, leaderboards, and one-click packagings!"}):(0,f.jsx)(c.Trans,{id:"To keep using SpeXEngine cloud, consider deleting old, unused projects."})})]})})})},Xw=function(e,t){var n=Date.now();if(n-t<6e4)return e._({id:"Now"});var r=new Date(n),o=new Date(t);if(r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()&&r.getDate()===o.getDate())return e._({id:"Today"});var i=new Date(r);if(i.setDate(r.getDate()-1),r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()&&i.getDate()===o.getDate())return e._({id:"Yesterday"});var a=new Date(r);return a.setDate(r.getDate()-7),a.setHours(0,0,0,0),r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()&&a.getTime()<=o.getTime()?e._({id:"This week"}):e.date(o)},Jw=function(e){var t=Math.floor(e/60),n=e%60,r=n<10?"0".concat(n):n;return"".concat(t,":").concat(r)},Kw=n(30227),Qw=n(67674),$w=n(48784),eT={container:{marginTop:25},buttonStyle:{textAlign:"left",width:"100%"},imageContainer:{position:"relative",width:"100%"},overlay:{position:"absolute",right:8,bottom:8,background:"rgba(0, 0, 0, 0.7)",borderRadius:4,padding:"2px 6px"},overlayText:{color:"white",marginTop:0,marginBottom:0},titleContainer:{minHeight:52},thumbnailImageWithDescription:{display:"block",objectFit:"cover",verticalAlign:"middle",width:"100%",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out"},dataLoadingSkeleton:{borderRadius:8,aspectRatio:"16 / 9"},imageLoadingSkeleton:{position:"absolute",borderRadius:8,aspectRatio:"16 / 9"}},tT=(0,Hr.Z)((function(e){return(0,Qw.Z)({tile:{transition:"transform 0.3s ease-in-out","&:hover":{transform:"scale(1.02)"}}})})),nT=function(e){var t=e.content;return(0,f.jsx)("div",{style:eT.overlay,children:(0,f.jsx)(vi.Z,{variant:"body1",style:eT.overlayText,children:t})})},rT=function(e){var t=e.items,n=e.isLoading,r=e.getColumnsFromWidth,o=e.getLimitFromWidth,a=(0,T.L)(),s=tT(),l=r("xlarge"),c=o?o(a):void 0,d=c?t.slice(0,c):t,p=(0,_t.Z)(),h=(0,ov.t)(),g=u.useRef(new Set),m=u.useCallback((function(e){setTimeout((function(){h&&(g.current.add(e),p())}),50)}),[p,h]);return(0,f.jsx)("div",{style:eT.container,children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(Kv.Z,{cols:r(a),style:{flex:1,maxWidth:316*l},cellHeight:"auto",spacing:16,children:n?new Array(r(a)).fill(0).map((function(e,t){return(0,f.jsx)(fw.Z,{classes:s,children:(0,f.jsx)($w.Z,{variant:"rect",width:"100%",height:"100%",style:eT.dataLoadingSkeleton})},t)})):d.map((function(e,t){return(0,f.jsx)(fw.Z,{classes:s,children:(0,f.jsx)(Zr.Z,{style:eT.buttonStyle,onClick:e.onClick,tabIndex:0,focusRipple:!0,children:(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)("div",{style:eT.imageContainer,children:[g.current.has(e.imageUrl)?null:(0,f.jsx)($w.Z,{variant:"rect",width:"100%",height:"100%",style:eT.imageLoadingSkeleton}),(0,f.jsx)(jf.W,{style:(0,i.Z)({opacity:g.current.has(e.imageUrl)?1:0},eT.thumbnailImageWithDescription),src:e.imageUrl,alt:"thumbnail ".concat(t),onLoad:function(){return m(e.imageUrl)}}),e.overlayText&&(0,f.jsx)(nT,{content:e.overlayText})]}),e.title&&(0,f.jsx)("div",{style:eT.titleContainer,children:(0,f.jsx)(J.Z,{size:"sub-title",children:e.title})}),e.description&&(0,f.jsx)(J.Z,{size:"body",color:"secondary",children:(0,sy.S)(e.description,120)})]})})},t)}))})})})},oT=function(e){var t=e.title,n=e.description,r=e.isLoading,o=e.items,i=e.onShowAll,a=e.showAllIcon,s=e.getLimitFromWidth,l=e.getColumnsFromWidth;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(C.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{size:"section-title",children:t})}),(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(_.Z,{onClick:i,label:(0,f.jsx)(c.Trans,{id:"Show all"}),rightIcon:a})})]}),n&&(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:n})}),(0,f.jsx)(rT,{items:o,isLoading:r,getLimitFromWidth:s,getColumnsFromWidth:l})]})},iT={iconBackground:{flex:0,display:"flex",justifyContent:"left"},icon:(0,i.Z)((0,i.Z)({},kr.b),{},{padding:1})},aT=function(e){var t=e.exampleShortHeader,n="small"===(0,T.L)(),r=t.previewImageUrls[0],o=r.endsWith("square-icon.png")?"1 / 1":"16 / 9",a=n?void 0:120,s=n?"100%":void 0;return(0,f.jsx)("div",{style:iT.iconBackground,children:(0,f.jsx)(jf.W,{style:(0,i.Z)((0,i.Z)({},iT.icon),{},{height:a,width:s,aspectRatio:o}),src:r,alt:t.name})})},sT=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{d:"M3 22v-2h3.5v-4.5H11V11h4.5V6.5H20V3h2v5.5h-4.5V13H13v4.5H8.5V22Z"})}))})),lT={marginRight:2,marginBottom:2,background:"none"},cT=function(e){var t,n=e.difficultyLevel,r=u.useContext(m.Z).example.difficulty.color[n];return(0,f.jsx)(le.Z,{icon:(0,f.jsx)(sT,{style:{color:r}}),size:"small",style:(0,i.Z)((0,i.Z)({},lT),{},{border:r?"1px solid ".concat(r):void 0}),label:"simple"===n?(0,f.jsx)(c.Trans,{id:"Simple"}):"advanced"===n?(0,f.jsx)(c.Trans,{id:"Advanced"}):"expert"===n?(0,f.jsx)(c.Trans,{id:"Expert"}):(t=n,t.charAt(0).toUpperCase()+t.slice(1))},"example-size-level")},uT=n(98809),dT={chip:{marginRight:2,marginBottom:2}},pT=function(e){var t,n=e.codeSizeLevel;return(0,f.jsx)(le.Z,{icon:(0,f.jsx)(uT.Z,{}),size:"small",style:dT.chip,label:"tiny"===n?(0,f.jsx)(c.Trans,{id:"Tiny"}):"small"===n?(0,f.jsx)(c.Trans,{id:"Short"}):"medium"===n?(0,f.jsx)(c.Trans,{id:"Medium"}):"big"===n?(0,f.jsx)(c.Trans,{id:"Long"}):"huge"===n?(0,f.jsx)(c.Trans,{id:"Huge"}):(t=n,t.charAt(0).toUpperCase()+t.slice(1))},"example-size-level")},hT=F.ZP.isDev(),fT=q()("electron"),gT=function(e){F.ZP.openExternalURL("".concat(hT?"http://localhost:3000":"https://editor.engine.spacexpanse.org","/?project=").concat(e.projectFileUrl))};function mT(e){var t=e.isOpening,n=e.exampleShortHeader,r=e.onClose,i=e.onOpen,s=u.useState(null),d=(0,a.Z)(s,2),p=d[0],h=d[1],g=u.useState(null),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useCallback((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.prev=1,e.next=4,(0,Ai.W7)(n);case 4:t=e.sent,v(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[n]);u.useEffect((function(){b()}),[b]);var j=(0,Bv.LG)((0,tt.r1)(),n),y=n.previewImageUrls.length>0,Z=!t&&j,k=u.useCallback((function(){Z&&i()}),[i,Z]);return(0,f.jsx)(V.ZP,{title:n.name,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Back"}),primary:!1,onClick:r,disabled:t},"close"),(0,f.jsx)(Mr.Z,{isLoading:t,children:(0,f.jsx)(qb.Z,{label:j?(0,f.jsx)(c.Trans,{id:"Open"}):(0,f.jsx)(c.Trans,{id:"Not compatible"}),primary:!0,onClick:k,disabled:!Z,buildMenuTemplate:function(e){return[{label:fT?e._({id:"Open in the web-app"}):e._({id:"Open in a new tab"}),disabled:!x,click:function(){x&&gT(x)}}]}})},"open")],open:!0,cannotBeDismissed:t,onRequestClose:r,onApply:k,children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[!j&&(0,f.jsx)(we.Z,{kind:"error",children:(0,f.jsx)(c.Trans,{id:"Unfortunately, this example requires a newer version of SpeXEngine to work. Update SpeXEngine to be able to open this example."})}),(0,f.jsxs)(C.ep,{alignItems:"center",noMargin:!0,children:[y?(0,f.jsx)(aT,{exampleShortHeader:n}):null,(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsxs)("div",{style:{flexWrap:"wrap"},children:[n.difficultyLevel&&(0,f.jsx)(cT,{difficultyLevel:n.difficultyLevel}),n.codeSizeLevel&&(0,f.jsx)(pT,{codeSizeLevel:n.codeSizeLevel}),n.authors&&n.authors.map((function(e){return(0,f.jsx)(Sr,{user:e,isClickable:!0},e.id)}))]})}),(0,f.jsx)(J.Z,{noMargin:!0,children:n.shortDescription})]})]}),x&&x.description&&(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(Fr.Z,{}),(0,f.jsx)(J.Z,{size:"body",displayInlineAsSpan:!0,children:(0,f.jsx)($e.r,{source:x.description})})]}),!x&&p&&(0,f.jsx)(vr.Z,{onRetry:b,children:(0,f.jsx)(c.Trans,{id:"Can't load the example. Verify your internet connection or try again later."})})]})})}var xT=q()("electron"),vT={container:{display:"flex",overflow:"hidden",paddingTop:8,paddingBottom:8,paddingRight:8},button:{alignItems:"flex-start",textAlign:"left",flex:1}},bT=function(e){var t=e.exampleShortHeader,n=e.matches,r=e.isOpening,i=e.onChoose,a=e.onOpen,s=e.onHeightComputed,d=u.useRef(null);u.useLayoutEffect((function(){d.current&&s(d.current.getBoundingClientRect().height)}));var p=(0,Bv.LG)((0,tt.r1)(),t),h=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Ai.W7)(t);case 3:r=e.sent,gT(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,Xr.gR)({message:n._({id:"Unable to fetch the example."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"example-load-error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[t]),g=function(e){var r=t[e];if(!n)return r;var o=n.filter((function(t){return t.key===e}));return 0===o.length?r:(0,f.jsx)(Ir,{text:r,matchesCoordinates:o[0].indices})};return(0,f.jsx)("div",{style:vT.container,ref:d,children:(0,f.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[(0,f.jsx)(Zr.Z,{style:vT.button,onClick:i,focusRipple:!0,children:(0,f.jsxs)(C.ep,{noMargin:!0,expand:!0,children:[!!t.previewImageUrls.length&&(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(aT,{exampleShortHeader:t})}),(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(J.Z,{noMargin:!0,children:[g("name")," "]}),(0,f.jsx)(L.x1,{children:(0,f.jsxs)("div",{style:{flexWrap:"wrap"},children:[t.difficultyLevel&&(0,f.jsx)(cT,{difficultyLevel:t.difficultyLevel}),t.codeSizeLevel&&(0,f.jsx)(pT,{codeSizeLevel:t.codeSizeLevel}),t.authors&&t.authors.map((function(e){return(0,f.jsx)(Sr,{user:e},e.id)}))]})}),(0,f.jsx)(J.Z,{noMargin:!0,size:"body2",displayInlineAsSpan:!0,children:g("shortDescription")})]})]})}),(0,f.jsx)(L.sg,{justifyContent:"flex-end",children:(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(w.Z,{label:(0,f.jsx)(c.Trans,{id:"Open"}),disabled:r||!p,onClick:function(){return a()},buildMenuTemplate:function(e){return[{label:e._({id:"Open details"}),click:i},{label:xT?e._({id:"Open in the web-app"}):e._({id:"Open in a new tab"}),click:function(){h(e)}}]}})})})]})})},jT=function(e){return e.sort((function(e,t){var n=e.tags.includes("Starter"),r=t.tags.includes("Starter");if(n&&r)return 0;var o=(r?1:0)-(n?1:0);return o||((o=(t.tags.includes("game")?1:0)-(e.tags.includes("game")?1:0))?o:(o=(t.previewImageUrls.length?1:0)-(e.previewImageUrls.length?1:0))||0)}))},CT=function(e){return e.name},yT=function(e){var t=e.isOpening,n=e.onOpen,r=e.focusOnMount,o=e.initialExampleShortHeader,i=u.useState(o),s=(0,a.Z)(i,2),l=s[0],c=s[1],d=u.useContext(Kw.I),p=d.filters,h=d.searchResults,g=d.error,m=d.fetchExamplesAndFilters,x=d.filtersState,v=d.searchText,b=d.setSearchText,j=(0,eo.bX)(),C=u.useRef(null);u.useEffect((function(){m()}),[m]),u.useEffect((function(){r&&j&&C.current&&C.current.focus()}),[j,r]);var y=u.useMemo((function(){return{add:x.addFilter,remove:x.removeFilter,chosenTags:x.chosenFilters}}),[x]),Z=function(e){if(!h)return[];var t=h.find((function(t){return t.item.id===e.id}));return t?t.matches:[]};return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(T.I,{children:function(e){return(0,f.jsxs)(L.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(pt.Z,{value:v,onChange:b,onRequestSearch:function(){},tagsHandler:y,tags:p&&p.defaultTags,ref:C,placeholder:{id:"Search examples"}})})}),(0,f.jsx)(L.x1,{expand:!0,overflow:"hidden",noMargin:!0,children:(0,f.jsx)(yr,{disableAutoTranslate:!0,onRetry:m,error:g,searchItems:h&&jT(h.map((function(e){return e.item}))),getSearchItemUniqueId:CT,renderSearchItem:function(e,r){return(0,f.jsx)(bT,{isOpening:t,onHeightComputed:r,exampleShortHeader:e,matches:Z(e),onChoose:function(){(0,Nr.CU)(e.slug),c(e)},onOpen:function(){n(e)}})}})})]})}}),!!l&&(0,f.jsx)(mT,{isOpening:t,exampleShortHeader:l,onOpen:function(){n(l)},onClose:function(){return c(null)}})]})},ZT=q()("electron"),kT=q()("path"),wT={listItem:{padding:0,marginTop:2,marginBottom:2,borderRadius:8,overflowWrap:"anywhere"},projectSkeleton:{borderRadius:6},noProjectsContainer:{padding:10}},TT=function(e){switch(e){case"small":return 2;case"medium":default:return 4;case"large":return 6;case"xlarge":return 7}},ET=function(e){var t=e.path,n=Array.from(t).map((function(e,t){return["/","\\"].includes(e)?t:null})).filter(Boolean);return 0===n.length?t:n.reduce((function(e,r,o){var i=n[o+1];return[].concat((0,j.Z)(e),[(0,f.jsx)("wbr",{},r),t.substring(r,i||t.length)])}),[])},ST=(0,Hr.Z)({root:{minWidth:0}}),PT=function(e){var t=e.file,n=e.storageProviders,r=e.onOpenRecentFile,s=e.isWindowWidthMediumOrLarger,d=u.useRef(null),p=ST(),h=(0,ft.Z)().showDeleteConfirmation,g=u.useContext(ll.Z).navigateToRoute,m=u.useState(null),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useContext(X.ZP).removeRecentProjectFile,y=u.useContext(ir.ZP),Z=function(e,t){return e.find((function(e){return e.internalName===t}))}(n,t.storageProviderName),k=function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.fileMetadata,"Cloud"===n.storageProviderName){e.next=3;break}return e.abrupt("return");case 3:if(o=r.name){e.next=6;break}return e.abrupt("return");case 6:return i=t._({id:"delete"}),e.next=9,h({title:{id:"Do you really want to permanently delete your project {projectName}?",values:{projectName:o}},message:{id:"You\u2019re about to permanently delete your project {projectName}. You will no longer be able to access it.",values:{projectName:o}},fieldMessage:{id:'To confirm, type "{translatedConfirmText}"',values:{translatedConfirmText:i}},confirmText:i,confirmButtonLabel:{id:"Delete project"}});case 9:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:return e.prev=12,b(r.fileIdentifier),e.next=16,(0,Gw.Hj)(y,r.fileIdentifier);case 16:y.onCloudProjectsChanged(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),(0,Xr.gR)({message:t._({id:"An error occurred when deleting cloud project {projectName}. Please try again later.",values:{projectName:o}}),rawError:e.t0,errorId:"cloud-project-delete-error"});case 22:return e.prev=22,b(null),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[12,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e,t){if(!t)return[];var n=[{label:e._({id:"Open"}),click:function(){return r(t)}}];n="Cloud"===t.storageProviderName?n.concat([{label:e._({id:"Delete"}),click:function(){return k(e,t)}}]):"LocalFile"===t.storageProviderName?n.concat([{label:e._({id:"Show in local folder"}),click:function(){return function(e){ZT.shell.showItemInFolder(kT.resolve(e.fileMetadata.fileIdentifier))}(t)}},{label:e._({id:"Remove from list"}),click:function(){return j(t)}}]):n.concat([{label:e._({id:"Remove from list"}),click:function(){return j(t)}}]);var o=t.fileMetadata.gameId;return o&&(n=n.concat([{type:"separator"},{label:e._({id:"Manage game"}),click:function(){return g("games-dashboard",{"game-id":o})}}])),n},T=function(e,t){d.current&&d.current.open(e.clientX,e.clientY,{file:t})},E=(0,Le.i)(u.useCallback((function(e){d.current&&d.current.open(e.clientX,e.clientY,{file:t})}),[d,t]));return(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ie.Z,(0,i.Z)((0,i.Z)({button:!0,onClick:function(){r(t)},style:wT.listItem,onContextMenu:function(e){return T(e,t)}},E),{},{children:(0,f.jsxs)(f.Fragment,{children:[Z&&Z.renderIcon&&!s&&(0,f.jsx)(fa.Z,{classes:p,style:{marginTop:8,alignSelf:"flex-start"},children:Z.renderIcon({size:"small"})}),s?(0,f.jsxs)(C.pJ,{justifyContent:"flex-start",expand:!0,children:[(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",children:[Z&&Z.renderIcon&&(0,f.jsxs)(f.Fragment,{children:[Z.renderIcon({size:"small"}),(0,f.jsx)(L.LZ,{})]}),(0,f.jsx)(J.Z,{noMargin:!0,children:t.fileMetadata.name||(0,f.jsx)(ET,{path:t.fileMetadata.fileIdentifier})}),v===t.fileMetadata.fileIdentifier&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)(pi.Z,{size:16})]})]})}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:Z?n._(Z.name):""})}),(0,f.jsx)(L.sg,{expand:!0,children:t.fileMetadata.lastModifiedDate&&(0,f.jsx)(J.Z,{noMargin:!0,children:Xw(n,t.fileMetadata.lastModifiedDate)})}),(0,f.jsx)(se.Z,{children:(0,f.jsx)(A.Z,{size:"small",edge:"end","aria-label":"menu",onClick:function(e){e.stopPropagation(),T(e,t)},children:(0,f.jsx)(Fe.Z,{})})})]}):(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(ae.Z,(0,i.Z)({primary:t.fileMetadata.name||(0,f.jsx)(ET,{path:t.fileMetadata.fileIdentifier}),secondary:t.fileMetadata.lastModifiedDate?Xw(n,t.fileMetadata.lastModifiedDate):void 0,onContextMenu:function(e){return T(e,t)}},E)),v===t.fileMetadata.fileIdentifier&&(0,f.jsx)(pi.Z,{size:24})]})})]})}),t.fileMetadata.fileIdentifier),(0,f.jsx)(tl.Z,{ref:d,buildMenuTemplate:function(e,t){var n=t.file;return w(e,n)}})]})}})},IT=u.forwardRef((function(e,t){e.project;var n=e.canOpen,r=e.onChooseProject,o=e.onOpenNewProjectSetupDialog,i=e.onShowAllExamples,a=e.onSelectExample,s=e.onOpenRecentFile,l=e.storageProviders,d=u.useContext(X.ZP).getRecentProjectFiles,p=u.useContext(Kw.I).allExamples,h=u.useContext(ir.ZP),g=u.useContext(nr.o).openSubscriptionDialog,m=h.cloudProjects,x=h.limits,v=h.cloudProjectsFetchingErrorLabel,b=h.onCloudProjectsChanged,j=(0,T.L)(),y="small"===j,Z=(0,_t.Z)();u.useImperativeHandle(t,(function(){return{forceUpdate:Z}}));var k=d().filter((function(e){return e.fileMetadata}));m&&(k=k.concat(m.map((function(e){return e.deletedAt?null:{storageProviderName:"Cloud",fileMetadata:{fileIdentifier:e.id,lastModifiedDate:Date.parse(e.lastModifiedAt),name:e.name,gameId:e.gameId}}})).filter(Boolean)));var w=Yw(h);k.sort((function(e,t){return e.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate-e.fileMetadata.lastModifiedDate:-1:1}));var S=("small"===j?52:36)-2*L.XW;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(xw,{title:(0,f.jsx)(c.Trans,{id:"My projects"}),renderFooter:function(){return x&&w?(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(qw,{limits:x,onUpgrade:function(){return g({reason:"Cloud Project limit reached"})}})})}):null},children:[(0,f.jsx)(mw,{children:(0,f.jsx)(oT,{isLoading:!p,items:p?jT(p).map((function(e){return{onClick:function(){return a(e)},imageUrl:e.previewImageUrls[0]}})):[],title:(0,f.jsx)(c.Trans,{id:"Recommended templates"}),onShowAll:i,showAllIcon:(0,f.jsx)(Ue.Z,{fontSize:"small"}),getColumnsFromWidth:TT,getLimitFromWidth:TT})}),(0,f.jsxs)(mw,{children:[(0,f.jsxs)(C.ep,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{size:"section-title",children:(0,f.jsx)(c.Trans,{id:"Existing projects"})})}),(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsxs)(C.pJ,{noMargin:!0,children:[(0,f.jsx)(E.Z,{primary:!0,fullWidth:!n,label:(0,f.jsx)(c.Trans,{id:"Create a project"}),onClick:function(){return o(null)},icon:(0,f.jsx)(Ue.Z,{fontSize:"small"}),id:"home-create-project-button"}),n&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"or"})}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(vg.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Open a project"}),onClick:r})]})]})})]}),v&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(vr.Z,{onRetry:b,children:(0,f.jsx)(we.Z,{kind:"warning",children:v})})}),(0,f.jsx)(L.x1,{children:(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[!y&&(0,f.jsxs)(C.pJ,{justifyContent:"space-between",children:[(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(J.Z,{color:"secondary",children:(0,f.jsx)(c.Trans,{id:"File name"})})}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(J.Z,{color:"secondary",children:(0,f.jsx)(c.Trans,{id:"Location"})})}),(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)(J.Z,{color:"secondary",children:(0,f.jsx)(c.Trans,{id:"Last edited"})})})]}),(0,f.jsx)(Q.Z,{children:"loggingIn"===h.loginState&&0===k.length?new Array(10).fill(0).map((function(e,t){return(0,f.jsx)(ie.Z,{style:wT.listItem,children:(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsx)($w.Z,{variant:"rect",height:S,style:wT.projectSkeleton})})})},"skeleton-".concat(t))})):k.length>0?k.map((function(e){return(0,f.jsx)(PT,{file:e,storageProviders:l,isWindowWidthMediumOrLarger:!y,onOpenRecentFile:s},e.fileMetadata.fileIdentifier)})):(0,f.jsx)(ie.Z,{style:wT.listItem,children:(0,f.jsx)(L.sg,{expand:!0,children:(0,f.jsxs)(ee.Z,{variant:"outlined",background:"dark",style:wT.noProjectsContainer,children:[(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"No projects yet."})}),(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"Create your first project using one of our templates or start from scratch."})})]})})})})]})})]})]})})})),DT=n(53669),AT=n(85814),LT=n.n(AT)()("RC2XAJAUNE","7853cc8136c930e6c7b8f68238eea179"),MT=!0,FT={search:function(e){return(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==MT){t.next=3;break}return MT=!1,t.abrupt("return",Promise.resolve({results:[{hits:[]}]}));case 3:return t.abrupt("return",LT.search(e));case 4:case"end":return t.stop()}}),t)})))()}},OT="gdevelop",RT=function(e){return Object.entries(e).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];return o&&e.push([Number(r.replace("lvl","")),o]),e}),[]).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))},BT=n(6571),_T=n(4324),NT=n(61567),UT=n(35595),HT=n(38489),VT=n(98237),WT=function(e,t){var n=t.inputValue.toLowerCase();if(""===n)return e;var r=[],o=[];return e.forEach((function(e){if(e.hit)return r.push(e);var i=t.getOptionLabel(e).toLowerCase();return i.includes(n)?r.push(e):function(e,t){return!t||function(e,t){var n=t.toLowerCase();e=e.toLowerCase();for(var r=0,o=0;o<t.length;o++)n[o]===e[r]&&(r+=1);return r===e.length}(e,t)}(n,i)?o.push(e):void 0})),[].concat(r,o)},zT=n(60274),GT=(0,Hr.Z)((function(e){return{listItemContainer:{width:"100%"},rootSmallPadding:{paddingLeft:0},wikiPrimaryTextHierarchy:{color:e.palette.text.secondary},wikiSecondaryText:{color:e.palette.text.primary}}})),YT={chip:{borderRadius:3}},qT=function(e){var t,n=e.hit,r="small"===(0,T.L)(),o=GT(),i=!1;n.content?t=n.content:(i=!0,t=function(e){var t=RT(e.hierarchy);return t[t.length-1]}(n));var a=function(e,t){var n=t.removeLastLevel,r=GT(),o=RT(e.hierarchy),i=(o=o.slice(0,o.length-(n?1:0))).pop();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:r.wikiPrimaryTextHierarchy,children:o.map((function(e){return"".concat(e," > ")}))})," ",(0,f.jsx)("span",{children:i})]})}(n,{removeLastLevel:i});return(0,f.jsxs)(ie.Z,{dense:!0,component:"div",ContainerComponent:"div",classes:{container:o.listItemContainer,root:r?o.rootSmallPadding:null},children:[(0,f.jsx)(Se.Z,{children:(0,f.jsx)(zT.Z,{})}),(0,f.jsx)(ae.Z,{primary:a,secondary:(0,f.jsx)("span",{className:o.wikiSecondaryText,children:t})})]})},XT=function(e){var t=(0,T.L)(),n="small"===t,r="medium"===t,o=(0,eo.bX)(),s=u.useState(!0),l=(0,a.Z)(s,2),c=l[0],d=l[1],p=(0,$.LB)(),h=GT(),g=u.useCallback((function(e){if(n||r)return null;if(e.text)return null;if(e.name){var t=p[e.name];if(!t)return null;var o=(0,$.$3)(t);return(0,f.jsx)(se.Z,{children:(0,f.jsx)(le.Z,{label:o,style:YT.chip})})}}),[p,n,r]),m=u.useCallback((function(t){if(t.text)return t.text;if(t.name){var n=ce.Z[t.name],r=n.area,o=n.displayText,i=ce.R[r];return e.i18n._(i)+" \u3009"+e.i18n._(o)}}),[e.i18n]),x=u.useCallback((function(e){return e.text&&e.iconSrc?(0,f.jsx)(Mc.Z,{iconSize:20,src:e.iconSrc}):e.icon?e.icon:(0,f.jsx)(It.Z,{})}),[]),v=u.useCallback((function(e){return e.hit?(0,f.jsx)(qT,{hit:e.hit}):(0,f.jsxs)(ie.Z,{dense:!0,component:"div",ContainerComponent:"div",classes:{container:h.listItemContainer,root:n?h.rootSmallPadding:null},children:[(0,f.jsx)(Se.Z,{children:x(e)}),(0,f.jsx)(ae.Z,{primary:m(e)}),g(e)]})}),[h.listItemContainer,h.rootSmallPadding,n,m,g,x]);return(0,f.jsx)(VT.ZP,{open:c,onClose:function(t,n){"select-option"!==n&&"toggleInput"!==n&&e.onClose()},onOpen:function(){return d(!0)},options:e.items,getOptionLabel:m,onChange:function(t,n){e.onSelect(n)},onInputChange:function(t,n,r){"input"===r&&e.onInputChange&&e.onInputChange(n)},openOnFocus:!0,autoHighlight:!0,filterOptions:WT,renderInput:function(t){return(0,f.jsx)(Ur.Z,(0,i.Z)((0,i.Z)({},t),{},{placeholder:e.i18n._(e.placeholder),variant:"outlined",autoFocus:o}))},renderOption:v})},JT=function(e){var t=e.id,n=u.useState(""),r=(0,a.Z)(n,2),o=r[0],s=r[1],l=u.useState(""),d=(0,a.Z)(l,2),p=d[0],h=d[1],g=u.useState(!1),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=function(){v(!1),p&&""!==p.trim()||h("")},j=u.useState("ok"),C=(0,a.Z)(j,2),y=C[0],Z=C[1],k=(0,BT.b)(),w=k.results,T=k.status,E=(0,_T.l)().refine;u.useEffect((function(){"ok"===y&&"error"===T?Z("error"):"error"===y&&"idle"===T&&Z("ok")}),[T,y]);var S=(0,zs.N)((function(){p&&E(p)}),200);u.useEffect(S,[p,S]);var P=function(){v(!0)},I=!!p&&p.length>0,D=u.useMemo((function(){return p?0===w.hits.length?[{hit:{content:(0,f.jsx)(c.Trans,{id:"No results found. The search is only available in English at the moment."}),objectID:"no-result",url:"https://wiki.engine.spacexpanse.org",hierarchy:{lvl0:""}},handler:function(){}}]:"error"===y?[{hit:{content:(0,f.jsx)(c.Trans,{id:"An error occurred while searching for a result. Please try again later."}),objectID:"error",url:"https://wiki.engine.spacexpanse.org",hierarchy:{lvl0:""}},handler:function(){}}]:w.hits.map((function(e){return{hit:e,handler:function(){return F.ZP.openExternalURL(e.url)}}})):[]}),[w.hits,p,y]),A=function(e,t,n){"select-option"===n&&t?(t.handler(),s("")):s("")},L=function(e,t,n){h("reset"===n?"":t||"")};return(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(UT.Z,{isFocused:x,isSearchBarEmpty:!I,onCancel:function(){return h("")},renderContent:function(e){var r=e.inputStyle,a=e.popperContainerStyle;return(0,f.jsx)(HT.ZP,{id:t,options:D,freeSolo:!0,fullWidth:!0,defaultValue:"",inputValue:p,value:o,onChange:A,onInputChange:L,onBlur:b,onFocus:P,filterOptions:function(e){return e},PopperComponent:function(e){return(0,f.jsx)("div",{style:a,children:e.children})},getOptionLabel:function(){return""},renderOption:function(e){var t=e.hit;return(0,f.jsx)(qT,{hit:t})},renderInput:function(e){return(0,f.jsx)(Ur.Z,(0,i.Z)((0,i.Z)({margin:"none"},e),{},{InputProps:(0,i.Z)((0,i.Z)({},e.InputProps),{},{disableUnderline:!0,endAdornment:null,placeholder:n._({id:"Search SpeXEngine wiki"}),style:r})}))}})}})}})},KT=function(e){return(0,f.jsx)(NT.p,{searchClient:FT,indexName:OT,children:(0,f.jsx)(JT,(0,i.Z)({},e))})},QT=(0,Hr.Z)({tile:{width:"100%"}}),$T=function(e){switch(e){case"small":return 1;case"medium":default:return 3;case"large":return 4;case"xlarge":return 5}},eE=function(e){switch(e){case"small":return 1;case"medium":default:return 3;case"large":return 5;case"xlarge":return 6}},tE={grid:{textAlign:"center",maxWidth:210*$T("xlarge")},helpItem:{padding:10,flex:1,display:"flex"}},nE=function(e){var t=e.onStartTutorial,n=e.onCreateProject,r=e.onTabChange,o=e.onOpenHelpFinder,i=e.onSelectCategory,a=e.tutorials,s=e.selectInAppTutorial,l=QT(),d=u.useContext(to.Z).currentlyRunningInAppTutorial,p=(0,T.L)(),h="small"===p,g="small"===p||"medium"===p,m=[{title:(0,f.jsx)(c.Trans,{id:"Guided Tour"}),description:(0,f.jsx)(c.Trans,{id:"Learn the fundamentals of the editor with our assisted tutorial."}),action:function(){t()},disabled:!!d},{title:(0,f.jsx)(c.Trans,{id:"Documentation"}),description:(0,f.jsx)(c.Trans,{id:"Find the complete documentation on everything"}),action:o},{title:(0,f.jsx)(c.Trans,{id:"Examples"}),description:(0,f.jsx)(c.Trans,{id:"Have look at existing games from the inside"}),action:n},{title:(0,f.jsx)(c.Trans,{id:"Community"}),description:(0,f.jsx)(c.Trans,{id:"Ask your questions to the community"}),action:function(){return r("community")}}].filter(Boolean),x=function(e){return(0,f.jsx)(c.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(oT,{title:sE[e].title,description:sE[e].description,items:a.filter((function(t){return t.category===e})).map((function(e){return lE(n,e)})),onShowAll:function(){return i(e)},showAllIcon:(0,f.jsx)(It.Z,{fontSize:"small"}),getColumnsFromWidth:eE,getLimitFromWidth:eE})}})};return(0,f.jsxs)(xw,{title:(0,f.jsx)(c.Trans,{id:"Help and guides"}),children:[(0,f.jsxs)(mw,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Quick search"})}),(0,f.jsx)(KT,{})]}),(0,f.jsx)(mw,{children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(Kv.Z,{cols:$T(p),style:tE.grid,cellHeight:"auto",spacing:10,children:m.map((function(e,t){return(0,f.jsx)(fw.Z,{classes:{tile:l.tile},children:(0,f.jsx)(Cw,{onClick:e.action,size:"large",disabled:e.disabled,useDefaultDisabledStyle:!0,children:(0,f.jsx)("div",{style:tE.helpItem,children:(0,f.jsxs)(C.ak,{expand:!0,justifyContent:"center",useFullHeight:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,size:"block-title",children:e.title}),(0,f.jsx)(J.Z,{noMargin:!0,size:"body",color:"secondary",children:e.description})]})})},t)},t)}))})})}),(0,f.jsxs)(mw,{children:[(0,f.jsx)(J.Z,{noMargin:!0,size:"section-title",children:(0,f.jsx)(c.Trans,{id:"Guided lessons"})}),(0,f.jsx)(Bw,{selectInAppTutorial:s})]}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(mw,{children:[(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{size:"title",children:(0,f.jsx)(c.Trans,{id:"Courses"})})}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Learn everything about SpeXEngine from the ground up"})})})]}),(0,f.jsx)(mw,{children:x("official-beginner")}),(0,f.jsx)(mw,{children:x("official-intermediate")}),(0,f.jsx)(mw,{children:x("official-advanced")}),(0,f.jsxs)(mw,{children:[(0,f.jsxs)(C.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{size:"title",children:(0,f.jsx)(c.Trans,{id:"Guides and tutorials"})})}),(0,f.jsxs)(C.pJ,{noMargin:!0,children:[!h&&(0,f.jsx)(_.Z,{onClick:function(){F.ZP.openExternalURL("https://github.com/SpeXEngineApp/GDevelop-examples/issues/new/choose")},primary:!0,leftIcon:(0,f.jsx)(fv,{}),label:g?(0,f.jsx)(c.Trans,{id:"Submit an example"}):(0,f.jsx)(c.Trans,{id:"Submit your project as an example"})}),!h&&(0,f.jsx)(_.Z,{onClick:function(){F.ZP.openExternalURL("https://airtable.com/shrv295oHlsuS69el")},primary:!0,leftIcon:(0,f.jsx)(DT.Z,{}),label:g?(0,f.jsx)(c.Trans,{id:"Submit a tutorial"}):(0,f.jsx)(c.Trans,{id:"Submit a tutorial translated in your language"})})]})]}),(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Learn by doing"})})})]}),(0,f.jsx)(mw,{children:x("full-game")}),(0,f.jsx)(mw,{children:x("game-mechanic")})]})]})},rE=function(e){switch(e){case"small":return 1;case"medium":default:return 3;case"large":return 5;case"xlarge":return 6}},oE=function(e){var t=e.category,n=e.tutorials,r=e.onBack,o=sE[t],i=n.filter((function(e){return e.category===t}));return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(xw,{title:o.title,subtitleText:o.description,backAction:r,children:(0,f.jsx)(mw,{children:(0,f.jsx)(rT,{items:i.map((function(e){return lE(t,e)})),getColumnsFromWidth:rE})})})}})},iE=function(e,t){if(!t)return"";if("string"===typeof t)return t;if("object"!==typeof t)return"";var n=e.language;if(t[n])return t[n];var r=n.split("-")[0];if(t[r])return t[r];if(t.en)return t.en;var o=Object.keys(t)[0];return t[o]?t[o]:""},aE=function(e){switch(e.split(/[-_]/)[0]){case"en":return(0,f.jsx)(c.Trans,{id:"English"});case"fr":return(0,f.jsx)(c.Trans,{id:"French"});case"pt":return(0,f.jsx)(c.Trans,{id:"Portuguese"});case"es":return(0,f.jsx)(c.Trans,{id:"Spanish"});case"it":return(0,f.jsx)(c.Trans,{id:"Italian"});case"ar":return(0,f.jsx)(c.Trans,{id:"Arabic"});case"id":return(0,f.jsx)(c.Trans,{id:"Indonesian"});case"ja":return(0,f.jsx)(c.Trans,{id:"Japanese"});case"ko":return(0,f.jsx)(c.Trans,{id:"Korean"});case"zh":return(0,f.jsx)(c.Trans,{id:"Chinese"});case"pl":return(0,f.jsx)(c.Trans,{id:"Polish"});case"ru":return(0,f.jsx)(c.Trans,{id:"Russian"});case"sl":return(0,f.jsx)(c.Trans,{id:"Slovene"});case"si":return(0,f.jsx)(c.Trans,{id:"Sinhala"});case"th":return(0,f.jsx)(c.Trans,{id:"Thai"});case"tr":return(0,f.jsx)(c.Trans,{id:"Turkish"});case"uk":return(0,f.jsx)(c.Trans,{id:"Ukrainian"});default:return null}},sE={"full-game":{title:(0,f.jsx)(c.Trans,{id:"Entire games"}),description:(0,f.jsx)(c.Trans,{id:"Make complete games step by step"})},"game-mechanic":{title:(0,f.jsx)(c.Trans,{id:"Specific game mechanics"}),description:(0,f.jsx)(c.Trans,{id:"Find how to implement the most common game mechanics and more"})},"official-beginner":{title:(0,f.jsx)(c.Trans,{id:"Beginner course"}),description:(0,f.jsx)(c.Trans,{id:"Learn the fundamental principles of SpeXEngine"})},"official-intermediate":{title:(0,f.jsx)(c.Trans,{id:"Intermediate course"}),description:(0,f.jsx)(c.Trans,{id:"Learn all the game-building mechanics of SpeXEngine"})},"official-advanced":{title:(0,f.jsx)(c.Trans,{id:"Advanced course"}),description:(0,f.jsx)(c.Trans,{id:"The icing on the cake"})}},lE=function(e,t){return{title:iE(e,t.titleByLocale)||t.title,description:iE(e,t.descriptionByLocale)||t.description,onClick:function(){(0,Nr.dw)(t.id),F.ZP.openExternalURL(iE(e,t.linkByLocale)||t.link)},imageUrl:iE(e,t.thumbnailUrlByLocale)||t.thumbnailUrl,overlayText:t.duration?Jw(t.duration):"\ud83d\udcd8"}},cE={paper:{flex:1,display:"flex"}},uE=function(e){var t=e.onCreateProject,n=e.onTabChange,r=e.onOpenHelpFinder,o=e.selectInAppTutorial,i=u.useContext(Cm.n),s=i.tutorials,l=i.fetchTutorials,d=i.error;u.useEffect((function(){l()}),[l]);var p=u.useState(null),h=(0,a.Z)(p,2),g=h[0],m=h[1];return d?(0,f.jsx)(ee.Z,{square:!0,style:cE.paper,background:"dark",children:(0,f.jsx)(vr.Z,{onRetry:l,children:(0,f.jsx)(c.Trans,{id:"Can't load the tutorials. Verify your internet connection or retry later."})})}):s?g?(0,f.jsx)(oE,{onBack:function(){return m(null)},category:g,tutorials:s}):(0,f.jsx)(nE,{onCreateProject:t,onOpenHelpFinder:r,onStartTutorial:function(){return n("get-started")},onTabChange:n,onSelectCategory:m,tutorials:s,selectInAppTutorial:o}):(0,f.jsx)(Qe.Z,{})},dE={border:0},pE=function(){var e=u.useContext(m.Z).palette.type,t=u.useState(null),n=(0,a.Z)(t,2),r=n[0],o=n[1];return window.addEventListener("message",(function(e){"https://games.engine.spacexpanse.org"===e.origin&&"set-embedded-height"===e.data.id&&o(e.data.height)})),(0,f.jsx)(xw,{title:(0,f.jsx)(c.Trans,{id:"Play!"}),flexBody:!0,subtitleText:(0,f.jsx)(c.Trans,{id:"Explore games made by others"}),children:(0,f.jsxs)(mw,{expand:!0,children:[(0,f.jsx)("iframe",{src:"https://games.engine.spacexpanse.org/embedded/".concat(e),title:"gdgames",style:(0,i.Z)((0,i.Z)({},dE),{},{height:r}),scrolling:"no"}),!r&&(0,f.jsx)(Qe.Z,{})]})})},hE=n(3570),fE=n(44579),gE=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{children:(0,f.jsx)("path",{fill:"#6A3BEB",d:"M17,12V3A1,1 0 0,0 16,2H3A1,1 0 0,0 2,3V17L6,13H16A1,1 0 0,0 17,12M21,6H19V15H6V17A1,1 0 0,0 7,18H18L22,22V7A1,1 0 0,0 21,6Z"})}))})),mE=n(45658),xE=n(42839),vE=n(22853),bE=n(44023),jE=n(96210),CE=n(70804),yE=function(e){var t=e.level,n=e.canClose,r=e.addMargins,o=u.useContext(jE.i),i=o.announcements,a=o.error,s=o.fetchAnnouncements,l=u.useContext(X.ZP),d=l.values,p=l.showAnnouncement,h=u.useContext(ll.Z).navigateToRoute;if(a)return(0,f.jsx)(vr.Z,{onRetry:s,children:(0,f.jsx)(c.Trans,{id:"Can't load the announcements. Verify your internet connection or try again later."})});if(!i)return(0,f.jsx)(Qe.Z,{});var g=t?i.filter((function(e){return e.level===t})):i,m=n?g.filter((function(e){return!d.hiddenAnnouncements[e.id]})):g;return m.length?(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(ee.Z,{square:!0,background:"dark",children:(0,f.jsx)(L.x1,{noMargin:!r,children:(0,f.jsx)(C.ak,{noMargin:!r,expand:!0,children:m.map((function(e){var r=e.buttonLabelByLocale,o=e.buttonUrl,i=function(e,t){var n=iE(e,t.titleByLocale),r=iE(e,t.markdownMessageByLocale);if(!n){var o=(0,CE.Z)(/\[!\[([^\][]*)\]\(([^\s]*)\)\]\(([^\s]*)\)/,{alt:1,imageSource:2,linkHref:3}),i=r.match(o),a=i&&i.groups;if(a&&a.alt&&a.imageSource&&a.linkHref){if(a.linkHref.startsWith("https://editor.engine.spacexpanse.org")){var s=new URLSearchParams(a.linkHref.replace(/.*\?/,"")),l=s.get("initial-dialog"),c={};if(s.forEach((function(e,t){"initial-dialog"!==t&&(c[t]=e)})),l)return{title:n,message:r.replace(o,"![".concat(a.alt,"](").concat(a.imageSource,")")),routeNavigationParams:{route:l,params:c}}}return{title:n,message:r}}var u=(0,CE.Z)(/!\[([^\][]*)\]\(([^\s]*)\)/,{alt:1,imageSource:2});if((a=(i=r.match(u))&&i.groups)&&a.alt&&a.imageSource)return{title:n,message:r}}return{title:n,message:r}}(t,e),a=i.title,s=i.message,l=i.routeNavigationParams,c=l?function(){return h(l.route,l.params)}:null;return(0,f.jsxs)(we.Z,{kind:e.type,renderRightButton:r&&o?function(){return(0,f.jsx)(E.Z,{label:iE(t,r),onClick:function(){return F.ZP.openExternalURL(o)}})}:null,onHide:n?function(){p(e.id,!1)}:null,hideButtonSize:"small",markdownImageOnly:!a,children:[a?(0,f.jsx)(J.Z,{size:"block-title",children:a}):null,(0,f.jsx)("div",{onClick:c,children:(0,f.jsx)($e.r,{source:s,allowParagraphs:!1})})]},e.id)}))})})})}}):null},ZE={list:{width:"100%"}},kE=[{onClick:function(){return F.ZP.openExternalURL("https://forum.engine.spacexpanse.org")},icon:(0,f.jsx)(gE,{fontSize:"small"}),label:(0,f.jsx)(c.Trans,{id:"SpeXEngine Forums"})},{onClick:function(){return F.ZP.openExternalURL("https://www.youtube.com/c/SpeXEngineApp")},icon:(0,f.jsx)(fE.Z,{fontSize:"small",htmlColor:"#FF0000"}),label:(0,f.jsx)(c.Trans,{id:"YouTube"})},{onClick:function(){return F.ZP.openExternalURL("https://discord.gg/thespacexpansecrew")},icon:(0,f.jsx)(hE.Z,{fontSize:"small",htmlColor:"#5865F2"}),label:(0,f.jsx)(c.Trans,{id:"Discord"})},{onClick:function(){return F.ZP.openExternalURL("https://www.reddit.com/r/spacexpanserod")},icon:(0,f.jsx)(mE.Z,{fontSize:"small",htmlColor:"#FF5700"}),label:(0,f.jsx)(c.Trans,{id:"Reddit"})},{onClick:function(){return F.ZP.openExternalURL("https://twitter.com/SpeXEngineApp")},icon:(0,f.jsx)(xE.Z,{fontSize:"small",htmlColor:"#1DA1F2"}),label:(0,f.jsx)(c.Trans,{id:"Twitter"})},{onClick:function(){return F.ZP.openExternalURL("https://www.facebook.com/SpeXEngineApp")},icon:(0,f.jsx)(vE.Z,{fontSize:"small",htmlColor:"#4267B2"}),label:(0,f.jsx)(c.Trans,{id:"Facebook"})},{onClick:function(){return F.ZP.openExternalURL("https://www.tiktok.com/@spacexpanse")},icon:(0,f.jsx)(bE.Z,{fontSize:"small",color:"inherit"}),label:(0,f.jsx)(c.Trans,{id:"TikTok"})}],wE=function(){return(0,f.jsx)(xw,{title:(0,f.jsx)(c.Trans,{id:"Community"}),children:(0,f.jsx)(mw,{children:(0,f.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(J.Z,{size:"title",children:(0,f.jsx)(c.Trans,{id:"News and announcements"})}),(0,f.jsx)(yE,{canClose:!1}),(0,f.jsx)(J.Z,{size:"title",children:(0,f.jsx)(c.Trans,{id:"Join the conversation"})}),(0,f.jsx)(Q.Z,{style:ZE.list,children:kE.map((function(e,t){return(0,f.jsx)(ze,{leftIcon:e.icon,primaryText:(0,f.jsx)(J.Z,{noMargin:!0,size:"body",children:e.label}),onClick:e.onClick},t)}))})]})})})},TE=function(e){var t=e.project,n=e.resourceManagementProps,r=e.canInstallPrivateAsset,o=u.useState(!1),i=(0,a.Z)(o,2),s=i[0],l=i[1],d=u.useContext(Nv.K),p=d.assetShortHeadersSearchResults,h=d.navigationState.getCurrentPage(),g=h.openedAssetPack,m=h.openedAssetShortHeader,x=m?[m]:g?p:[],v=u.useMemo((function(){return t&&s?nj(t):new Set}),[t,s]);return(0,f.jsxs)(xw,{title:null,flexBody:!0,children:[(0,f.jsx)(Yb,{}),(0,f.jsx)(L.x1,{justifyContent:"flex-end",children:(0,f.jsx)(E.Z,{primary:!0,onClick:function(){t&&l(!0)},disabled:!t||!x.length,label:t?g?(0,f.jsx)(c.Trans,{id:"Add assets from this pack to the project"}):1===x.length?(0,f.jsx)(c.Trans,{id:"Add this asset to the project"}):(0,f.jsx)(c.Trans,{id:"Add these assets to the project"}):(0,f.jsx)(c.Trans,{id:"Create a project first to add assets from the asset store"})})}),t&&s&&!!x.length&&(0,f.jsx)(ej,{assetPack:g,assetShortHeaders:x,addedAssetIds:v,onClose:function(){return l(!1)},onAssetsAdded:function(){l(!1)},project:t,objectsContainer:null,onObjectsAddedFromAssets:function(){},canInstallPrivateAsset:r,resourceManagementProps:n})]})},EE=n(73298),SE=(0,Hr.Z)({root:{flexDirection:"column"},anchorOriginTopRightCircle:{top:5,right:5}}),PE={avatar:{width:20,height:20},buttonContainer:{flexShrink:0}},IE=function(e){var t=e.onOpenProfile,n=u.useContext(ir.ZP),r=n.profile,o=n.onLogin,i=n.onCreateAccount,a=n.loginState,s=function(e){if(!e.authenticated)return!1;var t=e.badges;return!!(t&&t.length>0)&&t.some((function(e){return!e.seen}))}(n),l=SE();return"loggingIn"===a?(0,f.jsx)(pi.Z,{size:25}):r?(0,f.jsx)(Hi,{overlap:"circle",invisible:!s,classes:l,children:(0,f.jsx)(vg.Z,{label:(0,sy.S)(r.username||r.email,20),onClick:t,allowBrowserAutoTranslate:!1,icon:(0,f.jsx)(ha.Z,{src:(0,EE.y)(r.email||"",{size:50}),style:PE.avatar})})}):(0,f.jsx)("div",{style:PE.buttonContainer,children:(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(_.Z,{label:(0,f.jsx)("span",{children:(0,f.jsx)(c.Trans,{id:"Log in"})}),onClick:o,leftIcon:(0,f.jsx)(Tr,{fontSize:"small"})}),(0,f.jsx)(E.Z,{label:(0,f.jsx)("span",{children:(0,f.jsx)(c.Trans,{id:"Create account"})}),onClick:i,primary:!0,icon:(0,f.jsx)(Tr,{fontSize:"small"})})]})})},DE=q()("electron"),AE=function(e){var t=e.hasProject,n=e.onOpenProjectManager,r=e.onOpenProfile,o=e.onOpenLanguageDialog,i=e.onSave,a=e.canSave,s="small"===(0,T.L)();return(0,f.jsx)(c.I18n,{children:function(e){var l=e.i18n;return(0,f.jsxs)(C.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsxs)(L.x1,{noMargin:!0,children:[(0,f.jsx)(A.Z,{size:"small",id:"main-toolbar-project-manager-button",onClick:n,tooltip:{id:"Project Manager"},color:"default",disabled:!t,children:(0,f.jsx)(I,{})}),!!t&&(0,f.jsx)(A.Z,{size:"small",id:"main-toolbar-save-button",onClick:i,tooltip:{id:"Save project"},color:"default",disabled:!a,children:(0,f.jsx)(D,{})})]})}),(0,f.jsx)(L.sg,{children:(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[!DE&&!(0,Zi._F)()&&!s&&(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Download desktop app"}),onClick:function(){return F.ZP.openExternalURL("https://engine.spacexpanse.org/download")}}),(0,f.jsx)(IE,{onOpenProfile:r}),(0,f.jsx)(vg.Z,{label:l.language.toUpperCase(),onClick:o,icon:(0,f.jsx)(DT.Z,{fontSize:"small"})})]})})]})}})},LE=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.80029 10.1735C8.61239 9.97112 8.62411 9.65475 8.82646 9.46685L10.7652 7.66658L8.82646 5.86631C8.62411 5.67841 8.61239 5.36205 8.80029 5.15969C8.98819 4.95734 9.30456 4.94562 9.50692 5.13352L11.8402 7.30019C11.9421 7.39479 12 7.52755 12 7.66658C12 7.80562 11.9421 7.93837 11.8402 8.03298L9.50691 10.1996C9.30456 10.3875 8.98819 10.3758 8.80029 10.1735Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.13361 10.1735C4.9457 9.97112 4.95742 9.65475 5.15978 9.46685L7.09853 7.66658L5.15978 5.86631C4.95742 5.67841 4.9457 5.36205 5.13361 5.15969C5.32151 4.95734 5.63787 4.94562 5.84023 5.13352L8.17356 7.30019C8.27545 7.39479 8.33334 7.52755 8.33334 7.66658C8.33334 7.80562 8.27545 7.93837 8.17356 8.03298L5.84023 10.1996C5.63787 10.3875 5.32151 10.3758 5.13361 10.1735Z",fill:"currentColor"})]}))})),ME={button:{justifyContent:"start",minWidth:0,minHeight:30,padding:"4px 6px",fontWeight:400,transition:"none"},buttonWithoutLabel:{marginTop:10,justifyContent:"center"},iconWrapperWithoutLabel:{justifyContent:"center",display:"flex"},iconWrapperWithLabel:{padding:"3px 8px",justifyContent:"center",display:"flex"}},FE=function(e){var t=e.label,n=e.getIcon,r=e.onClick,o=e.isActive,a=e.hideLabel,s=e.id;return(0,f.jsxs)($r.Z,{variant:o?"contained":"text",size:"small",style:(0,i.Z)((0,i.Z)({},ME.button),a?ME.buttonWithoutLabel:{}),fullWidth:!0,onClick:r,color:o?"primary":"default",id:s,disableElevation:!0,children:[(0,f.jsx)("div",{style:a?ME.iconWrapperWithoutLabel:ME.iconWrapperWithLabel,children:n(o?"inherit":"secondary")}),!a&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.LZ,{}),(0,f.jsx)("span",{children:t})]})]})},OE=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.19971 5.15978C7.38761 5.36213 7.37589 5.6785 7.17354 5.8664L5.23478 7.66667L7.17354 9.46694C7.37589 9.65484 7.38761 9.97121 7.19971 10.1736C7.01181 10.3759 6.69544 10.3876 6.49309 10.1997L4.15975 8.03307C4.05787 7.93846 3.99998 7.8057 3.99998 7.66667C3.99998 7.52763 4.05787 7.39488 4.15975 7.30027L6.49309 5.13361C6.69544 4.9457 7.01181 4.95742 7.19971 5.15978Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8664 5.15978C11.0543 5.36213 11.0426 5.6785 10.8402 5.8664L8.90147 7.66667L10.8402 9.46694C11.0426 9.65484 11.0543 9.97121 10.8664 10.1736C10.6785 10.3759 10.3621 10.3876 10.1598 10.1997L7.82644 8.03307C7.72456 7.93846 7.66666 7.8057 7.66666 7.66667C7.66666 7.52763 7.72456 7.39488 7.82644 7.30027L10.1598 5.13361C10.3621 4.9457 10.6785 4.95742 10.8664 5.15978Z",fill:"currentColor"})]}))})),RE=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fill:"currentColor",d:"M9.86003 7.08L2.33336 14.6L1.40002 13.6667L8.92002 6.14L9.86003 7.08ZM12.8467 5.15333L13.24 4.76L12.7134 4.23333L13.14 3.80666L12.1934 2.86L11.7667 3.28666L11.24 2.76L10.8467 3.15333C9.68669 2.20666 8.38002 1.44666 6.98003 0.91333L6.42669 2.10666C7.59336 2.72 8.66669 3.46 9.66669 4.33333L9.33336 4.66666L11.3334 6.66666L11.6667 6.33333C12.54 7.33333 13.28 8.40666 13.8934 9.57333L15.0867 9.02C14.5534 7.62 13.7934 6.31333 12.8467 5.15333Z"})}))})),BE=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fill:"currentColor",d:"M7.99996 2L0.666626 6L3.33329 7.45333V11.4533L7.99996 14L12.6666 11.4533V7.45333L14 6.72667V11.3333H15.3333V6L7.99996 2ZM12.5466 6L7.99996 8.48L3.45329 6L7.99996 3.52L12.5466 6ZM11.3333 10.6667L7.99996 12.48L4.66663 10.6667V8.18L7.99996 10L11.3333 8.18V10.6667Z"})}))})),_E=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fill:"currentColor",d:"M5.31331 10.6667L3.33331 12.6667C3.11331 12.8667 2.81998 13 2.49998 13C2.19056 13 1.89381 12.8771 1.67502 12.6583C1.45623 12.4395 1.33331 12.1428 1.33331 11.8333V11.6667L1.99998 6.74667C2.06719 5.99709 2.41221 5.29972 2.96729 4.79151C3.52237 4.2833 4.24739 4.00099 4.99998 4H11C12.5733 4 13.86 5.20667 14 6.74667L14.6666 11.6667V11.8333C14.6666 12.1428 14.5437 12.4395 14.3249 12.6583C14.1061 12.8771 13.8094 13 13.5 13C13.18 13 12.8866 12.8667 12.6666 12.6667L10.6866 10.6667H5.31331ZM4.66665 5.33333V6.66667H3.33331V7.33333H4.66665V8.66667H5.33331V7.33333H6.66665V6.66667H5.33331V5.33333H4.66665ZM11 5.33333C10.8674 5.33333 10.7402 5.38601 10.6464 5.47978C10.5527 5.57355 10.5 5.70073 10.5 5.83333C10.5 5.96594 10.5527 6.09312 10.6464 6.18689C10.7402 6.28065 10.8674 6.33333 11 6.33333C11.1326 6.33333 11.2598 6.28065 11.3535 6.18689C11.4473 6.09312 11.5 5.96594 11.5 5.83333C11.5 5.70073 11.4473 5.57355 11.3535 5.47978C11.2598 5.38601 11.1326 5.33333 11 5.33333ZM9.83331 6.5C9.7007 6.5 9.57353 6.55268 9.47976 6.64645C9.38599 6.74022 9.33331 6.86739 9.33331 7C9.33331 7.13261 9.38599 7.25978 9.47976 7.35355C9.57353 7.44732 9.7007 7.5 9.83331 7.5C9.96592 7.5 10.0931 7.44732 10.1869 7.35355C10.2806 7.25978 10.3333 7.13261 10.3333 7C10.3333 6.86739 10.2806 6.74022 10.1869 6.64645C10.0931 6.55268 9.96592 6.5 9.83331 6.5ZM12.1666 6.5C12.034 6.5 11.9069 6.55268 11.8131 6.64645C11.7193 6.74022 11.6666 6.86739 11.6666 7C11.6666 7.13261 11.7193 7.25978 11.8131 7.35355C11.9069 7.44732 12.034 7.5 12.1666 7.5C12.2993 7.5 12.4264 7.44732 12.5202 7.35355C12.614 7.25978 12.6666 7.13261 12.6666 7C12.6666 6.86739 12.614 6.74022 12.5202 6.64645C12.4264 6.55268 12.2993 6.5 12.1666 6.5ZM11 7.66667C10.8674 7.66667 10.7402 7.71935 10.6464 7.81311C10.5527 7.90688 10.5 8.03406 10.5 8.16667C10.5 8.29927 10.5527 8.42645 10.6464 8.52022C10.7402 8.61399 10.8674 8.66667 11 8.66667C11.1326 8.66667 11.2598 8.61399 11.3535 8.52022C11.4473 8.42645 11.5 8.29927 11.5 8.16667C11.5 8.03406 11.4473 7.90688 11.3535 7.81311C11.2598 7.71935 11.1326 7.66667 11 7.66667Z"})}))})),NE=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fill:"currentColor",d:"M10.9067 9.33337C10.96 8.89337 11 8.45337 11 8.00004C11 7.54671 10.96 7.10671 10.9067 6.66671H13.16C13.2667 7.09337 13.3334 7.54004 13.3334 8.00004C13.3334 8.46004 13.2667 8.90671 13.16 9.33337H10.9067ZM9.72671 13.04C10.1267 12.3 10.4334 11.5 10.6467 10.6667H12.6134C11.9675 11.7789 10.9428 12.6214 9.72671 13.04ZM9.56004 9.33337H6.44004C6.37337 8.89337 6.33337 8.45337 6.33337 8.00004C6.33337 7.54671 6.37337 7.10004 6.44004 6.66671H9.56004C9.62004 7.10004 9.66671 7.54671 9.66671 8.00004C9.66671 8.45337 9.62004 8.89337 9.56004 9.33337ZM8.00004 13.3067C7.44671 12.5067 7.00004 11.62 6.72671 10.6667H9.27337C9.00004 11.62 8.55337 12.5067 8.00004 13.3067ZM5.33337 5.33337H3.38671C4.02594 4.21818 5.0499 3.37436 6.26671 2.96004C5.86671 3.70004 5.56671 4.50004 5.33337 5.33337ZM3.38671 10.6667H5.33337C5.56671 11.5 5.86671 12.3 6.26671 13.04C5.05246 12.6212 4.02994 11.7785 3.38671 10.6667ZM2.84004 9.33337C2.73337 8.90671 2.66671 8.46004 2.66671 8.00004C2.66671 7.54004 2.73337 7.09337 2.84004 6.66671H5.09337C5.04004 7.10671 5.00004 7.54671 5.00004 8.00004C5.00004 8.45337 5.04004 8.89337 5.09337 9.33337H2.84004ZM8.00004 2.68671C8.55337 3.48671 9.00004 4.38004 9.27337 5.33337H6.72671C7.00004 4.38004 7.44671 3.48671 8.00004 2.68671ZM12.6134 5.33337H10.6467C10.4381 4.50768 10.1291 3.71064 9.72671 2.96004C10.9534 3.38004 11.9734 4.22671 12.6134 5.33337ZM8.00004 1.33337C4.31337 1.33337 1.33337 4.33337 1.33337 8.00004C1.33337 9.76815 2.03575 11.4638 3.286 12.7141C3.90505 13.3331 4.63998 13.8242 5.44882 14.1592C6.25766 14.4943 7.12456 14.6667 8.00004 14.6667C9.76815 14.6667 11.4638 13.9643 12.7141 12.7141C13.9643 11.4638 14.6667 9.76815 14.6667 8.00004C14.6667 7.12456 14.4943 6.25766 14.1592 5.44882C13.8242 4.63998 13.3331 3.90505 12.7141 3.286C12.095 2.66694 11.3601 2.17588 10.5513 1.84084C9.74243 1.50581 8.87552 1.33337 8.00004 1.33337Z"})}))})),UE=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{d:"M8.00004 10.1666C9.19666 10.1666 10.1667 9.1966 10.1667 7.99998C10.1667 6.80336 9.19666 5.83331 8.00004 5.83331C6.80342 5.83331 5.83337 6.80336 5.83337 7.99998C5.83337 9.1966 6.80342 10.1666 8.00004 10.1666Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M8 1.83331V2.83331",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M11.5 4.5L10.7106 5.28944",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M14.1666 8.00006H13.1666",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M11.5 11.5001L10.7106 10.7107",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M8 13.1667V14.1667",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M5.28943 10.7106L4.5 11.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M2.83337 8.00006H1.83337",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M5.28943 5.28947L4.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))})),HE=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.18971 3.90807C3.48721 3.25358 4.13978 2.83337 4.85871 2.83337H11.1416C11.8605 2.83337 12.5131 3.25359 12.8106 3.90803L13.1692 4.69689C13.2774 4.93513 13.3335 5.19384 13.3335 5.45552V11.5002C13.3335 12.5127 12.5127 13.3335 11.5001 13.3335H4.50016C3.48765 13.3335 2.66683 12.5127 2.66683 11.5002V5.45552C2.66683 5.1938 2.72287 4.93513 2.83115 4.69689L3.18971 3.90807C3.18971 3.90807 3.18971 3.90807 3.18971 3.90807ZM4.85871 3.83337C4.53193 3.83337 4.2353 4.02438 4.10008 4.32187L3.74153 5.11067C3.74153 5.11068 3.74153 5.11067 3.74153 5.11067C3.6923 5.21899 3.66683 5.33657 3.66683 5.45552V11.5002C3.66683 11.9604 4.03992 12.3335 4.50016 12.3335H11.5001C11.9604 12.3335 12.3335 11.9604 12.3335 11.5002V5.45552C12.3335 5.33656 12.308 5.21897 12.2588 5.11067M12.2588 5.11067L11.9003 4.3219C11.9003 4.32189 11.9003 4.32192 11.9003 4.3219C11.765 4.0244 11.4684 3.83337 11.1416 3.83337H4.85871",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16667 4.66671C3.44281 4.66671 3.66667 4.89057 3.66667 5.16671C3.66667 5.48724 3.76452 5.78846 3.9324 5.99873C4.09013 6.19628 4.32286 6.33337 4.66667 6.33337C5.3577 6.33337 5.83333 5.753 5.83333 5.16671C5.83333 4.89057 6.05719 4.66671 6.33333 4.66671C6.60948 4.66671 6.83333 4.89057 6.83333 5.16671C6.83333 6.23727 5.97563 7.33337 4.66667 7.33337C4.01047 7.33337 3.4932 7.05135 3.15094 6.62267C2.81882 6.20672 2.66667 5.6746 2.66667 5.16671C2.66667 4.89057 2.89053 4.66671 3.16667 4.66671Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.66667 4.66671C9.94281 4.66671 10.1667 4.89057 10.1667 5.16671C10.1667 5.753 10.6423 6.33337 11.3333 6.33337C11.6771 6.33337 11.9099 6.19628 12.0676 5.99873C12.2355 5.78846 12.3333 5.48724 12.3333 5.16671C12.3333 4.89057 12.5572 4.66671 12.8333 4.66671C13.1095 4.66671 13.3333 4.89057 13.3333 5.16671C13.3333 5.6746 13.1812 6.20672 12.8491 6.62267C12.5068 7.05135 11.9895 7.33337 11.3333 7.33337C10.0244 7.33337 9.16667 6.23727 9.16667 5.16671C9.16667 4.89057 9.39053 4.66671 9.66667 4.66671Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.33333 4.66671C6.60948 4.66671 6.83333 4.89057 6.83333 5.16671C6.83333 5.753 7.30896 6.33337 8 6.33337C8.69104 6.33337 9.16667 5.753 9.16667 5.16671C9.16667 4.89057 9.39053 4.66671 9.66667 4.66671C9.94281 4.66671 10.1667 4.89057 10.1667 5.16671C10.1667 6.23727 9.30896 7.33337 8 7.33337C6.69104 7.33337 5.83333 6.23727 5.83333 5.16671C5.83333 4.89057 6.05719 4.66671 6.33333 4.66671Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83307 9.66624C7.37287 9.66624 6.99975 10.0393 6.99975 10.4996V12.3329H8.99973V10.4996C8.99973 10.0393 8.62666 9.66624 8.1664 9.66624H7.83307ZM5.99975 10.4996C5.99975 9.48703 6.8206 8.66624 7.83307 8.66624H8.1664C9.17894 8.66624 9.99973 9.48703 9.99973 10.4996V12.8329C9.99973 13.109 9.77588 13.3329 9.49973 13.3329H6.49975C6.22361 13.3329 5.99975 13.109 5.99975 12.8329V10.4996Z",fill:"currentColor"})]}))})),VE=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"-2 -1 16 16",fill:"none",children:(0,f.jsx)("path",{d:"M6.48609 4C7.19334 4 7.87161 4.28095 8.37171 4.78105C8.87181 5.28115 9.15276 5.95942 9.15276 6.66667C9.15276 7.37391 8.87181 8.05219 8.37171 8.55229C7.87161 9.05238 7.19334 9.33333 6.48609 9.33333C5.77885 9.33333 5.10057 9.05238 4.60048 8.55229C4.10038 8.05219 3.81943 7.37391 3.81943 6.66667C3.81943 5.95942 4.10038 5.28115 4.60048 4.78105C5.10057 4.28095 5.77885 4 6.48609 4ZM6.48609 5.33333C6.13247 5.33333 5.79333 5.47381 5.54328 5.72386C5.29324 5.97391 5.15276 6.31304 5.15276 6.66667C5.15276 7.02029 5.29324 7.35943 5.54328 7.60948C5.79333 7.85952 6.13247 8 6.48609 8C6.83972 8 7.17885 7.85952 7.4289 7.60948C7.67895 7.35943 7.81943 7.02029 7.81943 6.66667C7.81943 6.31304 7.67895 5.97391 7.4289 5.72386C7.17885 5.47381 6.83972 5.33333 6.48609 5.33333ZM5.15276 13.3333C4.98609 13.3333 4.84609 13.2133 4.81943 13.0533L4.57276 11.2867C4.15276 11.12 3.79276 10.8933 3.44609 10.6267L1.78609 11.3C1.63943 11.3533 1.45943 11.3 1.37943 11.1533L0.0460937 8.84667C0.00529077 8.77798 -0.00909376 8.69677 0.00563013 8.61825C0.020354 8.53972 0.0631781 8.46924 0.126094 8.42L1.53276 7.31333L1.48609 6.66667L1.53276 6L0.126094 4.91333C0.0631781 4.86409 0.020354 4.79361 0.00563013 4.71509C-0.00909376 4.63656 0.00529077 4.55536 0.0460937 4.48667L1.37943 2.18C1.45943 2.03333 1.63943 1.97333 1.78609 2.03333L3.44609 2.7C3.79276 2.44 4.15276 2.21333 4.57276 2.04667L4.81943 0.28C4.84609 0.12 4.98609 0 5.15276 0H7.81943C7.98609 0 8.12609 0.12 8.15276 0.28L8.39943 2.04667C8.81943 2.21333 9.17943 2.44 9.52609 2.7L11.1861 2.03333C11.3328 1.97333 11.5128 2.03333 11.5928 2.18L12.9261 4.48667C13.0128 4.63333 12.9728 4.81333 12.8461 4.91333L11.4394 6L11.4861 6.66667L11.4394 7.33333L12.8461 8.42C12.9728 8.52 13.0128 8.7 12.9261 8.84667L11.5928 11.1533C11.5128 11.3 11.3328 11.36 11.1861 11.3L9.52609 10.6333C9.17943 10.8933 8.81943 11.12 8.39943 11.2867L8.15276 13.0533C8.12609 13.2133 7.98609 13.3333 7.81943 13.3333H5.15276ZM5.98609 1.33333L5.73943 3.07333C4.93943 3.24 4.23276 3.66667 3.71943 4.26L2.11276 3.56667L1.61276 4.43333L3.01943 5.46667C2.75276 6.24444 2.75276 7.08889 3.01943 7.86667L1.60609 8.90667L2.10609 9.77333L3.72609 9.08C4.23943 9.66667 4.93943 10.0933 5.73276 10.2533L5.97943 12H6.99276L7.23943 10.26C8.03276 10.0933 8.73276 9.66667 9.24609 9.08L10.8661 9.77333L11.3661 8.90667L9.95276 7.87333C10.2194 7.09333 10.2194 6.24667 9.95276 5.46667L11.3594 4.43333L10.8594 3.56667L9.25276 4.26C8.72891 3.65355 8.01832 3.23845 7.23276 3.08L6.98609 1.33333H5.98609Z",fill:"currentColor"})}))})),WE=n(24893),zE={desktopMenu:{paddingTop:40,paddingBottom:10,minWidth:230,display:"flex",flexDirection:"column"},mobileMenu:{paddingTop:10,paddingBottom:10,display:"flex",flexDirection:"column"},drawerContent:{height:"100%",width:250,paddingBottom:10,overflowX:"hidden",display:"flex",flexDirection:"column"},drawerTopButtonsContainer:{flex:1,marginTop:"env(safe-area-inset-top)"},bottomButtonsContainer:{marginBottom:"env(safe-area-inset-bottom)"}},GE=[{label:(0,f.jsx)(c.Trans,{id:"Get Started"}),tab:"get-started",id:"home-get-started-tab",getIcon:function(e){return(0,f.jsx)(UE,{fontSize:"small",color:e})}},{label:(0,f.jsx)(c.Trans,{id:"Build"}),tab:"build",id:"home-build-tab",getIcon:function(e){return(0,f.jsx)(RE,{fontSize:"small",color:e})}},{label:(0,f.jsx)(c.Trans,{id:"Shop"}),tab:"shop",id:"home-shop-tab",getIcon:function(e){return(0,f.jsx)(HE,{fontSize:"small",color:e})}},{label:(0,f.jsx)(c.Trans,{id:"Learn"}),tab:"learn",id:"home-learn-tab",getIcon:function(e){return(0,f.jsx)(BE,{fontSize:"small",color:e})}},{label:(0,f.jsx)(c.Trans,{id:"Play"}),tab:"play",id:"home-play-tab",getIcon:function(e){return(0,f.jsx)(_E,{fontSize:"small",color:e})}},{label:(0,f.jsx)(c.Trans,{id:"Community"}),tab:"community",id:"home-community-tab",getIcon:function(e){return(0,f.jsx)(NE,{fontSize:"small",color:e})}}],YE=function(e){var t=e.setActiveTab,n=e.activeTab,r=e.onOpenPreferences,o=e.onOpenAbout,s=(0,T.L)(),l="small"===s||"medium"===s,p=u.useContext(m.Z),h=u.useState(!1),g=(0,a.Z)(h,2),x=g[0],v=g[1],b=[{label:(0,f.jsx)(c.Trans,{id:"Preferences"}),id:"settings",onClick:r,getIcon:function(e){return(0,f.jsx)(VE,{fontSize:"small",color:e})}},{label:(0,f.jsx)(c.Trans,{id:"About SpeXEngine"}),id:"about-gdevelop",onClick:o,getIcon:function(e){return(0,f.jsx)(WE.Z,{fontSize:"small",color:e})}}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(ee.Z,{style:(0,i.Z)((0,i.Z)({},l?zE.mobileMenu:zE.desktopMenu),{},{borderRight:"1px solid ".concat(p.home.separator.color)}),square:!0,background:"dark",children:[(0,f.jsxs)(L.sg,{expand:!0,children:[l&&(0,f.jsx)(A.Z,{onClick:function(){return v(!0)},size:"small",children:(0,f.jsx)(LE,{})}),GE.map((function(e){var r=e.label,o=e.tab,i=e.getIcon,a=e.id;return(0,f.jsx)(FE,{label:r,onClick:function(){return t(o)},getIcon:i,isActive:n===o,hideLabel:l,id:a},a)}))]}),(0,f.jsx)("div",{style:zE.bottomButtonsContainer,children:(0,f.jsx)(L.sg,{children:b.map((function(e){var t=e.label,n=e.getIcon,r=e.onClick,o=e.id;return(0,f.jsx)(FE,{label:t,onClick:r,getIcon:n,isActive:!1,hideLabel:l,id:o},o)}))})})]}),(0,f.jsx)(d.ZP,{open:x,PaperProps:{style:(0,i.Z)((0,i.Z)({},zE.drawerContent),{},{backgroundColor:p.home.header.backgroundColor}),className:"safe-area-aware-left-container"},onClose:function(){v(!1)},ModalProps:{keepMounted:!0},children:(0,f.jsx)(L.x1,{expand:!0,children:(0,f.jsxs)(L.sg,{expand:!0,children:[(0,f.jsx)("div",{style:zE.drawerTopButtonsContainer,children:(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(L.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(A.Z,{onClick:function(){v(!1)},size:"small",children:(0,f.jsx)(OE,{})})}),GE.map((function(e,r){var o=e.label,i=e.tab,a=e.getIcon;return(0,f.jsx)(FE,{label:o,onClick:function(){t(i),v(!1)},getIcon:a,isActive:n===i},r)}))]})}),(0,f.jsx)("div",{style:zE.bottomButtonsContainer,children:(0,f.jsx)(L.sg,{noMargin:!0,children:b.map((function(e){var t=e.label,n=e.getIcon,r=e.onClick,o=e.id;return(0,f.jsx)(FE,{label:t,onClick:r,getIcon:n,isActive:!1},o)}))})})]})})})]})},qE=u.memo(u.forwardRef((function(e,t){var n=e.project,r=e.canOpen,o=e.onChooseProject,i=e.onOpenRecentFile,s=e.onOpenNewProjectSetupDialog,l=e.onCreateProject,d=e.onOpenProjectManager,p=e.onOpenHelpFinder,h=e.onOpenLanguageDialog,g=e.onOpenProfile,m=e.setToolbar,x=e.selectInAppTutorial,v=e.onOpenPreferences,b=e.onOpenAbout,j=e.isActive,C=e.storageProviders,y=(e.initialTab,e.onSave),Z=e.canSave,k=e.resourceManagementProps,w=e.canInstallPrivateAsset,T=u.useContext(ir.ZP),E=T.authenticated,S=T.onCloudProjectsChanged,P=u.useContext(jE.i).announcements,I=u.useContext(Cm.n).fetchTutorials,D=u.useContext(Kw.I).fetchExamplesAndFilters,A=u.useContext(X.ZP),M=A.values.showGetStartedSection,F=A.setShowGetStartedSection,O=u.useRef(null);u.useEffect((function(){D(),I()}),[D,I]),u.useEffect((function(){j&&E&&S()}),[j,E,S]),u.useEffect((function(){j&&"build"===G&&O.current&&O.current.forceUpdate()}),[j]);var R=u.useCallback((function(){}),[]),B=u.useCallback((function(){m&&m((0,f.jsx)(AE,{hasProject:!!n,onOpenLanguageDialog:h,onOpenProfile:g,onOpenProjectManager:d,onSave:y,canSave:Z}))}),[m,h,g,d,n,y,Z]),_=u.useCallback((function(){}),[]);u.useImperativeHandle(t,(function(){return{getProject:R,updateToolbar:B,forceUpdateEditor:_}}));var N=u.useContext(ll.Z),U=N.routeArguments,H=N.removeRouteArguments,V=u.useContext(Nv.K).setInitialPackUserFriendlySlug;u.useEffect((function(){"asset-store"===U["initial-dialog"]&&(Y("shop"),V(U["asset-pack"]),H(["initial-dialog","asset-pack"]))}),[U,H,V]);var W=u.useState(M?"get-started":"build"),z=(0,a.Z)(W,2),G=z[0],Y=z[1];return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:(0,f.jsxs)(L.x1,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsx)(YE,{activeTab:G,setActiveTab:Y,onOpenPreferences:v,onOpenAbout:b}),(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:["community"!==G&&!!P&&(0,f.jsx)(yE,{canClose:!0,level:"urgent",addMargins:!0}),"get-started"===G&&(0,f.jsx)(zw,{onTabChange:Y,onCreateProject:function(){return l(null)},selectInAppTutorial:x,showGetStartedSection:M,setShowGetStartedSection:F}),"build"===G&&(0,f.jsx)(IT,{ref:O,project:n,canOpen:r,onChooseProject:o,onOpenNewProjectSetupDialog:s,onShowAllExamples:function(){return l(null)},onSelectExample:function(e){return l(e)},onOpenRecentFile:i,storageProviders:C}),"learn"===G&&(0,f.jsx)(uE,{onCreateProject:function(){return l(null)},onTabChange:Y,onOpenHelpFinder:p,selectInAppTutorial:x}),"play"===G&&(0,f.jsx)(pE,{}),"community"===G&&(0,f.jsx)(wE,{}),"shop"===G&&(0,f.jsx)(TE,{project:n,resourceManagementProps:k,canInstallPrivateAsset:w})]})]})})})}})})),(function(e,t){return e.isActive||t.isActive})),XE=function(e){return(0,f.jsx)(qE,{ref:e.ref,project:e.project,isActive:e.isActive,projectItemName:e.projectItemName,setToolbar:e.setToolbar,canOpen:e.canOpen,onChooseProject:e.onChooseProject,onOpenRecentFile:e.onOpenRecentFile,onCreateProject:e.onCreateProject,onOpenNewProjectSetupDialog:e.onOpenNewProjectSetupDialog,onOpenProjectManager:e.onOpenProjectManager,onOpenHelpFinder:e.onOpenHelpFinder,onOpenLanguageDialog:e.onOpenLanguageDialog,onOpenProfile:e.onOpenProfile,selectInAppTutorial:e.selectInAppTutorial,onOpenPreferences:e.onOpenPreferences,onOpenAbout:e.onOpenAbout,storageProviders:e.extraEditorProps&&e.extraEditorProps.storageProviders||[],initialTab:e.extraEditorProps&&e.extraEditorProps.initialTab||null,onSave:e.onSave,canSave:e.canSave,resourceManagementProps:e.resourceManagementProps,canInstallPrivateAsset:e.canInstallPrivateAsset})},JE=function(e){var t=e.open,n=e.onClose,r=(0,_t.Z)();if(!t)return null;var o=[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:n},"close")];return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"What's new in SpeXEngine?"}),actions:o,open:t,onRequestClose:n,flexColumnBody:!0,children:[(0,f.jsxs)(C.ep,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"SpeXEngine was upgraded to a new version! Check out the changes."})}),(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"See all the release notes"}),onClick:function(){return F.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/releases")}})]}),(0,f.jsx)(nt,{onUpdated:r})]})},KE=function(e){var t=e.defaultOpen,n=u.useState(t),r=(0,a.Z)(n,2),o=r[0],i=r[1];return(0,f.jsx)(JE,{open:o,onClose:function(){return i(!1)}})},QE=function(e){return(0,f.jsx)(X.ZP.Consumer,{children:function(e){var t=e.values,n=e.verifyIfIsNewVersion;return(0,f.jsx)(KE,{defaultOpen:n()&&t.autoDisplayChangelog})}})},$E=n(88991),eS=function(e){var t=e.open,n=e.onClose,r=u.useContext(X.ZP).values,o=u.useState(!1),i=(0,a.Z)(o,2),s=i[0],l=i[1];return t?(0,f.jsx)(c.I18n,{children:function(e){var o=e.i18n.language!==r.language.replace("_","-");return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Language"}),actions:[(0,f.jsx)(_.Z,{label:o?(0,f.jsx)(c.Trans,{id:"Loading..."}):(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:function(){n(s)},disabled:o},"close")],secondaryActions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Report a wrong translation"}),primary:!1,onClick:function(){return F.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/issues/969")}},"report-wrong-translation")],cannotBeDismissed:o,onRequestClose:function(){return n(s)},open:t,maxWidth:"sm",children:(0,f.jsx)(Ze,{onLanguageChanged:function(){return l(!0)}})})}}):null},tS=n(8018),nS=n.g.gd,rS=function(e){return{project:null,storageProvider:tS.Z,fileMetadata:{fileIdentifier:e}}},oS=function(){var e=nS.ProjectHelper.createNewGDJSProject();return(0,Nr.tP)({exampleUrl:"",exampleSlug:""}),{project:e,storageProvider:null,fileMetadata:null}},iS=function(){var e="https://resources.gdevelop-app.com/examples-database/login-template.json";return(0,Nr.tP)({exampleUrl:e,exampleSlug:"login-template"}),rS(e)},aS=function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.i18n,r=t.exampleShortHeader,e.prev=1,e.next=4,(0,Ai.W7)(r);case 4:return o=e.sent,(0,Nr.tP)({exampleUrl:o.projectFileUrl,exampleSlug:r.slug}),e.abrupt("return",rS(o.projectFileUrl));case 9:return e.prev=9,e.t0=e.catch(1),(0,Xr.gR)({message:n._({id:"Unable to fetch the example."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"}),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),sS=function(e){var t=e.open,n=e.onClose,r=e.initialExampleShortHeader,i=e.onChoose,a=e.isProjectOpening,s=u.useMemo((function(){return[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:n},"close"),(0,f.jsx)(V.vF,{id:"create-blank-project-button",label:(0,f.jsx)(c.Trans,{id:"Create a blank project"}),primary:!0,onClick:function(){return i(null)}},"create-blank")]}),[n,i]);return t?(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Create a new project"}),actions:s,onRequestClose:n,onApply:function(){i(null)},open:t,fullHeight:!0,flexColumnBody:!0,children:(0,f.jsx)(yT,{focusOnMount:!0,isOpening:a,onOpen:function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),initialExampleShortHeader:r})})}}):null},lS=n.g.GD_STARTUP_TIMES;lS||console.error("Could not find GD_STARTUP_TIMES array. Have you declared it in index.html, in a synchronous script?");var cS=function(){var e=["<init>",0];return{steps:lS.map((function(t){var n={stepName:t[0],time:t[1],elapsedTime:t[1]-e[1]};return e=t,n})),totalStartupTime:e[1]}},uS=(0,St.Z)((function(e){return{root:{border:"1px solid ".concat(e.palette.divider),borderRadius:8}}})),dS=function(e){var t=e.storageProvider,n=e.onChooseProvider,r=u.useContext(ir.ZP),o=uS(),i=t.needUserAuthentication&&!r.authenticated,a=!t.disabled&&(!t.needUserAuthentication||!i);return(0,f.jsx)(c.I18n,{children:function(e){var s=e.i18n;return(0,f.jsxs)(ie.Z,{classes:o,disabled:t.disabled,onClick:a?function(){return n(t)}:null,button:a,children:[(0,f.jsx)(Se.Z,{children:t.renderIcon?t.renderIcon({}):void 0}),(0,f.jsx)(ae.Z,{children:(0,f.jsxs)(L.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(J.Z,{noMargin:!0,children:s._(t.name)}),i&&(0,f.jsxs)(L.x1,{noMargin:!0,children:[(0,f.jsx)(_.Z,{label:s._({id:"Create an Account"}),onClick:function(){return r.onCreateAccount()}}),(0,f.jsx)(L.LZ,{}),(0,f.jsx)(E.Z,{primary:!0,label:s._({id:"Login with SpeXEngine"}),onClick:function(){return r.onLogin()}})]})]})})]},t.internalName)}})},pS=q()("electron"),hS=function(e){var t=e.onClose,n=e.storageProviders,r=e.onChooseProvider,o=n.some((function(e){return"Cloud"===e.internalName}));return(0,f.jsx)(c.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Choose where to load the project from"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close")],onRequestClose:t,open:!0,maxWidth:"sm",children:[o&&(0,f.jsx)(we.Z,{kind:"info",children:(0,f.jsx)(c.Trans,{id:"You can find your cloud projects in the Build section of the homepage."})}),(0,f.jsx)(Ge,{useGap:!0,children:n.filter((function(e){return!e.hiddenInOpenDialog})).map((function(e){return(0,f.jsx)(dS,{onChooseProvider:r,storageProvider:e},e.internalName)}))}),!pS&&(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"If you have a popup blocker interrupting the opening, allow the popups and try a second time to open the project."})})})})]})}})},fS=function(e){var t=e.onClose,n=e.storageProviders,r=e.onChooseProvider;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Choose where to save the project to"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close")],onRequestClose:t,open:!0,maxWidth:"sm",children:(0,f.jsx)(Ge,{useGap:!0,children:n.filter((function(e){return!e.hiddenInSaveDialog})).map((function(e){return(0,f.jsx)(dS,{onChooseProvider:r,storageProvider:e},e.internalName)}))})})},gS=function(e){var t=e.onClose,n=e.onConfirm;return(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Confirm the opening"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Open the project"}),primary:!0,onClick:n},"open-project")],onRequestClose:t,onApply:n,open:!0,maxWidth:"sm",children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:'You\'re about to open (or re-open) a project. Click on "Open the Project" to continue.'})})})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(Li.Z,{children:(0,f.jsx)(c.Trans,{id:"If you have a popup blocker interrupting the opening, allow the popups and try a second time to open the project."})})})})]})};function mS(e,t){return!t.gdVersion&&t.eventsFunctions?((0,Xr.gR)({message:[e._({id:"Unable to open this file."}),e._({id:"This file is an extension file for SpeXEngine 5. You should instead import it, using the window to add a new extension to your project."})].join("\n"),rawError:void 0,errorId:"extension-opened-as-project-error",doNotReport:!0}),!1):!(!t.gdVersion&&!t.eventsFunctions)||((0,Xr.gR)({message:[e._({id:"Unable to open this file."}),e._({id:"This file is not recognized as a SpeXEngine 5 project. Be sure to open a file that was saved using SpeXEngine."})].join("\n"),rawError:void 0,errorId:"malformed-project-error",doNotReport:!0}),!1)}var xS=n(36559);var vS=function(e,t,n){return e?t(e).map((function(e){return{text:e.getName(),handler:function(){return n(e.getName())}}})):[]},bS=function(e){(0,Eo.YZ)("QUIT_APP",!0,{handler:e.onCloseApp}),(0,Eo.YZ)("OPEN_PROFILE",!!e.project,{handler:e.onOpenProfile}),(0,Eo.YZ)("OPEN_GAMES_DASHBOARD",!!e.project,{handler:e.onOpenGamesDashboard}),(0,Eo.YZ)("OPEN_PROJECT_MANAGER",!!e.project,{handler:e.onOpenProjectManager}),(0,Eo.YZ)("LAUNCH_NEW_PREVIEW",e.previewEnabled,{handler:e.onLaunchPreview}),(0,Eo.YZ)("HOT_RELOAD_PREVIEW",e.hasPreviewsRunning,{handler:e.onHotReloadPreview}),(0,Eo.YZ)("LAUNCH_DEBUG_PREVIEW",e.previewEnabled&&e.allowNetworkPreview,{handler:e.onLaunchDebugPreview}),(0,Eo.YZ)("LAUNCH_NETWORK_PREVIEW",e.previewEnabled&&e.allowNetworkPreview,{handler:e.onLaunchNetworkPreview}),(0,Eo.YZ)("OPEN_HOME_PAGE",!0,{handler:e.onOpenHomePage}),(0,Eo.YZ)("CREATE_NEW_PROJECT",!0,{handler:e.onCreateBlank}),(0,Eo.YZ)("OPEN_PROJECT",!0,{handler:e.onOpenProject}),(0,Eo.YZ)("SAVE_PROJECT",!!e.project,{handler:e.onSaveProject}),(0,Eo.YZ)("SAVE_PROJECT_AS",!!e.project,{handler:e.onSaveProjectAs}),(0,Eo.YZ)("CLOSE_PROJECT",!!e.project,{handler:e.onCloseProject}),(0,Eo.YZ)("EXPORT_GAME",!!e.project,{handler:e.onExportGame}),(0,Eo.YZ)("OPEN_COMMAND_PALETTE",!0,{handler:e.onOpenCommandPalette}),(0,Eo.gT)("OPEN_LAYOUT",!!e.project,{generateOptions:u.useCallback((function(){return vS(e.project,pr,e.onOpenLayout)}),[e.project,e.onOpenLayout])}),(0,Eo.gT)("OPEN_EXTERNAL_EVENTS",!!e.project,{generateOptions:u.useCallback((function(){return vS(e.project,hr,e.onOpenExternalEvents)}),[e.project,e.onOpenExternalEvents])}),(0,Eo.gT)("OPEN_EXTERNAL_LAYOUT",!!e.project,{generateOptions:u.useCallback((function(){return vS(e.project,fr,e.onOpenExternalLayout)}),[e.project,e.onOpenExternalLayout])}),(0,Eo.gT)("OPEN_EXTENSION",!!e.project,{generateOptions:u.useCallback((function(){return vS(e.project,gr,e.onOpenEventsFunctionsExtension)}),[e.project,e.onOpenEventsFunctionsExtension])})},jS=n(59788),CS=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{d:"M6.00016 6.16663C5.72402 6.16663 5.50016 6.39048 5.50016 6.66663C5.50016 6.94277 5.72402 7.16663 6.00016 7.16663H7.41741L8.1925 9.49144C8.26056 9.69559 8.45163 9.83329 8.66683 9.83329H11.3335C11.6096 9.83329 11.8335 9.60944 11.8335 9.33329C11.8335 9.05715 11.6096 8.83329 11.3335 8.83329H9.02719L8.2521 6.50848C8.18403 6.30433 7.99297 6.16663 7.77776 6.16663H6.00016Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M9.7335 6.16663C9.45735 6.16663 9.2335 6.39048 9.2335 6.66663C9.2335 6.94277 9.45735 7.16663 9.7335 7.16663H11.3335C11.6096 7.16663 11.8335 6.94277 11.8335 6.66663C11.8335 6.39048 11.6096 6.16663 11.3335 6.16663H9.7335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.51868 2.16663C4.07174 2.16663 3.64311 2.34417 3.32708 2.66021C3.01104 2.97624 2.8335 3.40487 2.8335 3.85181V12.1481C2.8335 12.595 3.01104 13.0237 3.32708 13.3397C3.64311 13.6557 4.07174 13.8333 4.51868 13.8333H12.815C13.2619 13.8333 13.6905 13.6557 14.0066 13.3397C14.3226 13.0237 14.5002 12.595 14.5002 12.1481V3.85181C14.5002 3.40487 14.3226 2.97624 14.0066 2.66021C13.6905 2.34417 13.2619 2.16663 12.815 2.16663H4.51868ZM4.03418 3.36731C4.16268 3.23882 4.33696 3.16663 4.51868 3.16663H12.815C12.9967 3.16663 13.171 3.23881 13.2995 3.36731C13.428 3.49581 13.5002 3.67009 13.5002 3.85181V12.1481C13.5002 12.3298 13.428 12.5041 13.2995 12.6326C13.171 12.7611 12.9967 12.8333 12.815 12.8333H4.51868C4.33696 12.8333 4.16268 12.7611 4.03418 12.6326C3.90568 12.5041 3.8335 12.3298 3.8335 12.1481V3.85181C3.8335 3.67009 3.90569 3.49581 4.03418 3.36731Z",fill:"currentColor"})]}))})),yS=(0,Hr.Z)({scrollPaper:{alignItems:"flex-start"}}),ZS=(0,Hr.Z)({rounded:{borderRadius:4}}),kS=u.forwardRef((function(e,t){var n=yS(),r=ZS(),o="small"===(0,T.L)(),s=u.useState(""),l=(0,a.Z)(s,2),d=l[0],p=l[1],h=u.useContext(jS.Z),g=u.useState("closed"),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useState(null),j=(0,a.Z)(b,2),C=j[0],y=j[1],Z=(0,BT.b)(),k=Z.results,w=Z.status,E=(0,_T.l)().refine,S=u.useState("ok"),P=(0,a.Z)(S,2),I=P[0],D=P[1];u.useEffect((function(){"ok"===I&&"error"===w?D("error"):"error"===I&&"idle"===w&&D("ok")}),[w,I]);var A=!d||"error"===I,L=u.useCallback((function(e){e.handler?(e.handler(),"OPEN_COMMAND_PALETTE"!==e.name&&v("closed")):(y(e),v("option"))}),[y,v]),M=function(e){e.handler(),v("closed")},O=u.useCallback((function(){v(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?"command":"closed")}),[]),R=u.useCallback((function(e){var t=h.getNamedCommand(e);t&&L(t)}),[L,h]);u.useImperativeHandle(t,(function(){return{open:O,launchCommand:R}}));var B=(0,zs.N)((function(){d&&E(d)}),200);u.useEffect(B,[d,B]);var _=u.useMemo((function(){var e=h.getAllNamedCommands().filter((function(e){return!ce.Z[e.name].ghost})).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{icon:(0,f.jsx)(CS,{})})}));if(A)return e;var t=k.hits.map((function(e){return{hit:e,handler:function(){return F.ZP.openExternalURL(e.url)}}}));return e.concat(t)}),[h,k.hits,A]),N=u.useCallback((function(){v("closed")}),[]);return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(ui.Z,{onClose:N,"aria-label":"command-palette",open:"closed"!==x,fullWidth:!0,hideBackdrop:!0,maxWidth:"sm",classes:n,transitionDuration:0,PaperProps:{classes:r},children:["command"===x&&(0,f.jsx)(XT,{i18n:t,onInputChange:p,items:_,placeholder:o?{id:"Search"}:{id:"Start typing a command or searching something..."},onClose:N,onSelect:L}),"option"===x&&C&&(0,f.jsx)(XT,{i18n:t,items:C.generateOptions(),placeholder:ce.Z[C.name],onClose:N,onSelect:M})]})}})})),wS=u.forwardRef((function(e,t){return(0,f.jsx)(NT.p,{searchClient:FT,indexName:OT,children:(0,f.jsx)(kS,{ref:t})})})),TS=n(10293),ES=(0,lt.Z)((function e(t){var n=this;(0,st.Z)(this,e),this.setActive=function(e){n._isActive=e},this.registerCommand=function(e,t){n._commands[e]=t,n._isActive&&n._centralManager.registerCommand(e,t)},this.deregisterCommand=function(e){delete n._commands[e],n._isActive&&n._centralManager.deregisterCommand(e)},this.registerAllCommandsToCentralManager=function(){Object.keys(n._commands).forEach((function(e){n._centralManager.registerCommand(e,n._commands[e])}))},this.deregisterAllCommandsFromCentralManager=function(){Object.keys(n._commands).forEach((function(e){n._centralManager.deregisterCommand(e)}))},this.getAllNamedCommands=function(){return Object.keys(n._commands).map((function(e){var t=n._commands[e];return(0,i.Z)((0,i.Z)({},t),{},{name:e})}))},this.getNamedCommand=function(e){var t=n._commands[e];return t?(0,i.Z)({name:e},t):n._centralManager.getNamedCommand(e)},this._commands={},this._isActive=!1,this._centralManager=t})),SS=function(e){var t=u.useContext(jS.Z),n=(0,TS.Z)((function(){return new ES(t)}));return u.useEffect((function(){if(e.active)return n.setActive(!0),n.registerAllCommandsToCentralManager(),function(){n.setActive(!1),n.deregisterAllCommandsFromCentralManager()}}),[e.active,n]),(0,f.jsx)(jS.Z.Provider,{value:n,children:e.children})};function PS(e){var t=e.onClose,n=e.onLaunchNewPreview;return function(e){return e.filter((function(e){return"error"===e.kind||"fatal"===e.kind})).length>0}(e.logs)?(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Restarting the preview from scratch is required"}),actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:t},"close"),(0,f.jsx)(V.vF,{icon:(0,f.jsx)(y,{}),label:(0,f.jsx)(c.Trans,{id:"Close and launch a new preview"}),primary:!0,onClick:n},"new-preview")],secondaryActions:[(0,f.jsx)(zn.Z,{helpPagePath:"/interface/preview"},"help")],onRequestClose:t,open:!0,children:(0,f.jsx)(C.ak,{noMargin:!0,children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Your latest changes could not be applied to the preview(s) being run. You should start a new preview instead to make sure that all your changes are reflected in the game."})})})}):null}var IS,DS=q()("electron"),AS=DS?DS.ipcRenderer:null,LS=Date.now(),MS=function(e){(0,u.useEffect)((function(){!function(e){if(null!==AS){var t={details:e?"Working on:":"Not working on",state:e?e.getName():"any game",startTimestamp:LS,largeImageKey:"gdicon",largeImageText:"SpeXEngine"};AS.send("update-discord-rich-presence",t)}}(e)}),[e])},FS=n(58336),OS=function(e){var t=e.project,n=e.fileMetadata,r=e.getStorageProvider,i=e.options,s=e.i18n,d=e.resourceSources,p=e.onClose,h=e.onChooseResources,g="small"===(0,T.L)(),m=u.useMemo((function(){return r()}),[r]),x=u.useContext(X.ZP),v=d.filter((function(e){return e.kind===i.resourceKind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===m.internalName})),b=v.filter((function(e){return"standalone"===e.displayTab})),y=v.filter((function(e){return"import"===e.displayTab})),Z=v.filter((function(e){return"import-advanced"===e.displayTab})),k=v.find((function(e){return e.name===i.initialSourceName})),w=k&&k.selectResourcesHeadless,E=u.useState((function(){return k?"import"===k.displayTab?"import":"standalone"===k.displayTab?"standalone-"+k.name:"import":"import"})),S=(0,a.Z)(E,2),P=S[0],I=S[1],D=u.useState(!1),A=(0,a.Z)(D,2),M=A[0],F=A[1],O=u.useState(!1),R=(0,a.Z)(O,2),B=R[0],N=R[1];return u.useEffect((function(){return function(){return F(!0)}}),[P]),u.useEffect((function(){if(k){var e=k.selectResourcesHeadless;e&&(0,o.Z)(l().mark((function o(){var a;return l().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e({i18n:s,options:i,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath});case 3:a=o.sent,h(a),o.next=11;break;case 7:o.prev=7,o.t0=o.catch(0),console.error("Unexpected error from a resource source:",o.t0),h([]);case 11:case"end":return o.stop()}}),o,null,[[0,7]])})))()}}),[]),w?null:(0,f.jsxs)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"New resource"}),open:!0,fullHeight:!0,flexColumnBody:!0,actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:p},"close")],secondaryActions:[Z.length>0?(0,f.jsx)(L.sg,{children:(0,f.jsx)(H.Z,{onToggle:function(e,t){return N(t)},toggled:B,labelPosition:"right",label:(0,f.jsx)(c.Trans,{id:"Show advanced import options"})})},"show-advanced-toggle"):null],onRequestClose:p,fixedContent:(0,f.jsx)(K.m,{value:P,onChange:I,options:[].concat((0,j.Z)(b.map((function(e){var t=e.name,n=e.displayName;return{label:s._(n),value:"standalone-"+t}}))),[{label:(0,f.jsx)(c.Trans,{id:"Choose a file"}),value:"import"}]),variant:g?"scrollable":void 0}),children:[b.map((function(e){return P!=="standalone-"+e.name?null:e.renderComponent({i18n:s,options:i,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,onChooseResources:h})})),"import"===P?(0,f.jsx)(L.x1,{expand:!0,noMargin:!0,children:(0,f.jsxs)(C.ak,{expand:!0,noMargin:!0,children:[y.map((function(e){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{size:"block-title",children:s._(e.displayName)}),e.renderComponent({i18n:s,options:i,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,onChooseResources:h,automaticallyOpenIfPossible:k===e&&!M})]},e.name)})),B&&Z.map((function(e){return(0,f.jsxs)(u.Fragment,{children:[(0,f.jsx)(J.Z,{size:"block-title",children:s._(e.displayName)}),e.renderComponent({i18n:s,options:i,project:t,fileMetadata:n,getStorageProvider:r,getLastUsedPath:x.getLastUsedPath,setLastUsedPath:x.setLastUsedPath,onChooseResources:h})]},e.name)}))]})}):null]})},RS={imgContainer:{marginBottom:16}},BS=function(e){var t=e.learningKeys;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You're about to start this guided lesson."})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"A new project will be opened, so before beginning please ensure you have closed and saved your current project."})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"In this tutorial you will learn:"})}),t.map((function(e,t){return(0,f.jsx)(J.Z,{displayAsListItem:!0,noMargin:!0,children:e},t)}))]})},_S=(IS={},(0,r.Z)(IS,Sw.bs,{title:(0,f.jsx)(c.Trans,{id:"Let's make a Fling Game"}),content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You're about to start the first chapter of this guided lesson."})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"SpeXEngine will save your progress so you can take a break when you need it."})})]})}),(0,r.Z)(IS,Sw.Xj,{title:(0,f.jsx)(c.Trans,{id:"Let's improve a scoring system"}),content:BS({learningKeys:[(0,f.jsx)(c.Trans,{id:"Making objects disappear or appear when colliding"}),(0,f.jsx)(c.Trans,{id:"Creating, modifying and accessing a scene variable"}),(0,f.jsx)(c.Trans,{id:"Updating a score accordingly"})]})}),(0,r.Z)(IS,Sw.HD,{title:(0,f.jsx)(c.Trans,{id:"Let's use time to measure a score"}),content:BS({learningKeys:[(0,f.jsx)(c.Trans,{id:"Create and modify a text"}),(0,f.jsx)(c.Trans,{id:"Start a timer"}),(0,f.jsx)(c.Trans,{id:"Use the timer to display a score"})]})}),(0,r.Z)(IS,Sw.UO,{title:(0,f.jsx)(c.Trans,{id:"Let's improve the camera and the background"}),content:BS({learningKeys:[(0,f.jsx)(c.Trans,{id:"Add a background with parallax effect"}),(0,f.jsx)(c.Trans,{id:"Add a new layer"}),(0,f.jsx)(c.Trans,{id:"Add an extension"}),(0,f.jsx)(c.Trans,{id:"Use basic camera movements to follow the player"})]})}),(0,r.Z)(IS,Sw.yw,{title:(0,f.jsx)(c.Trans,{id:"Let's communicate to the player the remaining health points"}),content:BS({learningKeys:[(0,f.jsx)(c.Trans,{id:"Add a new layer"}),(0,f.jsx)(c.Trans,{id:"Use a prefab to display the player's health bar"})]})}),(0,r.Z)(IS,Sw.EB,{title:(0,f.jsx)(c.Trans,{id:"Let's add mobile controls to our game"}),content:BS({learningKeys:[(0,f.jsx)(c.Trans,{id:"Add a new layer"}),(0,f.jsx)(c.Trans,{id:"Add a joystick prefab"}),(0,f.jsx)(c.Trans,{id:"Add a behavior"})]})}),(0,r.Z)(IS,Sw.Rv,{title:(0,f.jsx)(c.Trans,{id:"Let's add a 3D object to our game"}),content:BS({learningKeys:[(0,f.jsx)(c.Trans,{id:"Add a 3D Box"}),(0,f.jsx)(c.Trans,{id:"Add a behavior"}),(0,f.jsx)(c.Trans,{id:"Update the elevation of a 3D box"})]})}),IS),NS=function(e){var t=e.open,n=e.tutorialId,r=e.onClose,o=e.tutorialCompletionStatus,i=e.isProjectOpened,s=e.startTutorial,l=function(){return s("startOver")},d=(0,u.useContext(to.Z).getInAppTutorialShortHeader)(n),p=d?d.availableLocales:null,h={notStarted:{title:_S[n].title,content:_S[n].content,availableLocalesLabels:p?p.map((function(e){return[e,aE(e)]})):null,primaryAction:{label:(0,f.jsx)(c.Trans,{id:"Yes"}),onClick:function(){return s("start")}},secondaryAction:{label:(0,f.jsx)(c.Trans,{id:"No"}),onClick:r},tertiaryAction:null},started:{title:(0,f.jsx)(c.Trans,{id:"Welcome back!"}),content:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Let's finish your Fling Game, shall we?"})}),primaryAction:{label:(0,f.jsx)(c.Trans,{id:"Let's go"}),onClick:function(){return s("resume")}},secondaryAction:{label:i?(0,f.jsx)(c.Trans,{id:"No, close project"}):(0,f.jsx)(c.Trans,{id:"No"}),onClick:r},tertiaryAction:{label:(0,f.jsx)(c.Trans,{id:"Restart tutorial"}),onClick:l}},complete:{title:(0,f.jsx)(c.Trans,{id:"Restart the Tutorial"}),content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You're about to restart this 3-chapter guided lesson."})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"SpeXEngine will save your progress, so you can take a break if you need."})})]}),primaryAction:{label:(0,f.jsx)(c.Trans,{id:"Yes"}),onClick:l},secondaryAction:{label:(0,f.jsx)(c.Trans,{id:"No"}),onClick:r},tertiaryAction:null}}[(0,Sw.d1)(n)?"notStarted":o],g=h.title,m=h.content,x=h.primaryAction,v=h.secondaryAction,b=h.tertiaryAction,j=[(0,f.jsx)(_.Z,{label:v.label,onClick:v.onClick},"close"),(0,f.jsx)(V.vF,{label:x.label,primary:!0,onClick:x.onClick},"start")],y=b?[(0,f.jsx)(_.Z,{label:b.label,onClick:b.onClick},"other")]:void 0;return(0,f.jsx)(V.ZP,{title:g,actions:j,secondaryActions:y,open:t,onRequestClose:r,onApply:x.onClick,maxWidth:"xs",cannotBeDismissed:!0,children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(L.x1,{alignItems:"center",justifyContent:"center",noMargin:!0,children:(0,f.jsx)("div",{style:RS.imgContainer,children:(0,f.jsx)("img",{alt:"hero",src:"res/hero.png",width:48,height:48})})}),m,h.availableLocalesLabels?(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"This tutorial is available in the following languages:"})}),h.availableLocalesLabels.map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,f.jsx)(J.Z,{displayAsListItem:!0,noMargin:!0,children:r},n)}))]}):null,(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Are you ready?"})})]})})},US=n(84360),HS=n.g.gd,VS=function(e){e.leaderboardsToReplace;var t=e.onClose,n=e.onTriggerReplace,r=u.useContext(ir.ZP),o=r.authenticated,i=r.onLogin;return(0,f.jsx)(V.ZP,{title:(0,f.jsx)(c.Trans,{id:"Set up new leaderboards for this game"}),actions:o?[(0,f.jsx)(_.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Close"}),onClick:t},"register-close"),(0,f.jsx)(V.vF,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Create new leaderboards now"}),onClick:n,id:"create-and-replace-new-leaderboard"},"register-game-now")]:[(0,f.jsx)(_.Z,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Close"}),onClick:t},"login-close"),(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Login now"}),primary:!0,onClick:function(){return i()},id:"login-now"},"login-now")],open:!0,maxWidth:"sm",onRequestClose:t,children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsxs)(C.ak,{noMargin:!0,children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"This game is using leaderboards. SpeXEngine will create new leaderboards for this game in your account, so that the game is ready to be played and players can send their scores."})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"If you skip this step, you can still do it manually later from the leaderboards panel in your Games Dashboard."})})]})})})},WS=function(e){var t=e.erroredLeaderboards,n=e.onRetry,r=e.onAbandon,o=e.progress,i=t.length>0;return(0,f.jsx)(V.ZP,{title:null,actions:[n?(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Retry"}),primary:!0,onClick:n},"retry"):null,(0,f.jsx)(_.Z,{label:r?(0,f.jsx)(c.Trans,{id:"Abandon"}):(0,f.jsx)(c.Trans,{id:"Please wait..."}),disabled:!r,onClick:r},"close")],cannotBeDismissed:!i,open:!0,maxWidth:"sm",children:(0,f.jsx)(L.x1,{noMargin:!0,children:(0,f.jsxs)(C.ak,{expand:!0,children:[(0,f.jsx)(J.Z,{children:i&&100===o?(0,f.jsx)(c.Trans,{id:"There were errors when preparing new leaderboards for the project."}):(0,f.jsx)(c.Trans,{id:"Preparing the leaderboard for your game..."})}),(0,f.jsx)(L.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(Vs.Z,{variant:"determinate",value:o})}),i&&100===o?(0,f.jsxs)(uv.iA,{children:[(0,f.jsx)(uv.xD,{children:(0,f.jsxs)(uv.SC,{children:[(0,f.jsx)(uv.bY,{children:"Leaderboard ID"}),(0,f.jsx)(uv.bY,{children:"Error"})]})}),(0,f.jsx)(uv.RM,{children:t.map((function(e){var t=e.leaderboardId,n=e.error;return(0,f.jsxs)(uv.SC,{children:[(0,f.jsx)(uv.Nn,{children:t}),(0,f.jsx)(uv.Nn,{children:n.toString()})]},t)}))})]}):null]})})})},zS=n(78602),GS=n.n(zS),YS=["abandoned","abashed","aberrant","abhorrent","abiding","abject","ablaze","able","abounding","abrasive","abrupt","absent","absorbed","absorbing","abstracted","absurd","abundant","acceptable","accessible","accidental","accurate","acidic","acoustic","acrid","actionable","active","actual","adamant","adaptable","adept","adhesive","adjoining","adorable","adroit","adventurous","affable","affectionate","afraid","aggressive","agile","agonizing","agreeable","airy","alert","alive","alleged","alluring","aloof","amazing","ambiguous","ambitious","amiable","ample","amused","amusing","ancient","angry","animated","annoyed","annoying","anxious","apathetic","apt","aquatic","ardent","aromatic","arrogant","ashamed","aspiring","assorted","astonishing","astute","attractive","august","auspicious","automatic","available","average","avid","aware","awesome","awful","axiomatic","bad","balmy","barbarous","bashful","bawdy","beautiful","befitting","belligerent","beneficial","benevolent","bent","berserk","best","better","bewildered","big","billowing","billowy","bitter","bizarre","blessed","bloody","blue","blushing","boiling","bold","boorish","bored","boring","boss","bouncy","boundless","brainy","brash","brave","brawny","breakable","breezy","brief","bright","brisk","broad","broken","bumpy","burly","bustling","busy","cagey","calculating","callous","calm","can","canny","capable","capricious","cared","careful","careless","caring","casual","cautious","ceaseless","celestial","certain","changeable","charming","cheap","cheerful","chemical","chic","chief","childlike","chilly","chivalrous","choice","chosen","chubby","chummy","chunky","civic","civil","clammy","classy","clean","clear","clever","cloistered","close","closed","cloudy","clumsy","cluttered","cogent","coherent","cold","colorful","colossal","combative","comfortable","common","complete","complex","composed","concerned","condemned","confused","conscious","cooing","cool","cooperative","coordinated","cosmic","courageous","cowardly","cozy","crabby","craven","crazy","creepy","crooked","crowded","cruel","cuddly","cultured","cumbersome","curious","curly","curved","curvy","cut","cute","cynical","daffy","daily","dainty","damaged","damaging","damp","dandy","dangerous","dapper","daring","dark","dashing","dazzling","dead","deadpan","deafening","dear","debonair","decent","decisive","decorous","deep","deeply","defeated","defective","defiant","deft","delicate","delicious","delightful","delirious","deluxe","demonic","dependent","deranged","descriptive","deserted","detailed","determined","devilish","devout","didactic","different","difficult","diligent","direct","direful","dirty","disagreeable","disastrous","discreet","disgusted","disgusting","disillusioned","dispensable","distinct","disturbed","divergent","divine","dizzy","domineering","doted","doting","doubtful","drab","draconian","dramatic","dreamy","dreary","driven","dry","dull","dusty","dynamic","dysfunctional","eager","early","earsplitting","earthy","easy","eatable","economic","educated","efficacious","efficient","eight","elastic","elated","electric","elegant","elfin","elite","embarrassed","eminent","empty","enchanted","enchanting","encouraging","end","endurable","energetic","energized","enigmatic","enormous","entertaining","enthusiastic","envious","equable","equal","erect","erratic","ethereal","evanescent","evasive","even","evil","exact","excellent","excited","exciting","exclusive","exotic","expensive","expert","exuberant","exultant","fabulous","faded","faint","fair","faithful","fallacious","false","famed","familiar","famous","fanatical","fancy","fantastic","far","fascinated","fast","faulty","fearful","fearless","feigned","fertile","festive","few","fierce","fiery","filthy","fine","finicky","first","fit","fixed","flagrant","flaky","flashy","flat","flawless","fleet","flimsy","flippant","flowery","flowing","fluent","fluffy","fluttering","flying","foamy","fond","foolish","for","foregoing","forgetful","forlorn","fortunate","fragile","frail","frank","frantic","free","freezing","frequent","fresh","fretful","friendly","frightened","frightening","full","fumbling","fun","functional","funny","furry","furtive","fuscia","future","futuristic","fuzzy","gabby","gainful","gamy","gaping","garrulous","gas","gaudy","general","genial","gentle","giant","giddy","gifted","gigantic","giving","glad","glamorous","gleaming","glib","glistening","glorious","glossy","gnarly","godly","gold","golden","good","goodly","goofy","gorgeous","graceful","grand","grandiose","grateful","gratis","gray","greasy","great","greedy","green","grey","grieving","groovy","grotesque","grouchy","grubby","gruesome","grumpy","guarded","guided","guiltless","gullible","gusty","gutsy","guttural","habitual","half","hallowed","haloed","halting","handsome","handsomely","handy","hanging","hapless","happy","hard","hardy","harmonious","harsh","heady","healthy","heartbreaking","hearty","heavenly","heavy","hellish","helpful","helpless","heroic","hesitant","hideous","high","highfalutin","hilarious","hip","hissing","historical","holistic","hollow","holy","homely","honest","honorable","horrible","hospitable","hot","huge","hulking","human","humane","humble","humdrum","humorous","hungry","hunky","hurried","hurt","hushed","husky","hypnotic","hysterical","icky","icy","ideal","ignorant","ill","illegal","illustrious","imaginary","immense","imminent","immune","impartial","imperfect","impolite","important","imported","impossible","incandescent","incompetent","inconclusive","incredible","indigo","industrious","inexpensive","infamous","innate","innocent","inquisitive","insidious","instinctive","intelligent","interesting","internal","invincible","irate","irritating","itchy","jaded","jagged","jazzed","jazzy","jealous","jittery","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbled","jumpy","just","kaput","keen","khaki","kind","kindhearted","kindly","kingly","knotty","knowing","knowledgeable","known","labored","lackadaisical","lacking","lame","lamentable","languid","large","last","late","laughable","lavish","lawful","lazy","lean","legal","legit","lethal","level","lewd","light","like","likeable","likely","limber","limitless","limping","literate","little","lively","living","lonely","long","longing","loose","lopsided","loud","lousy","loutish","loved","lovely","loving","low","lowly","loyal","lucid","lucky","ludicrous","lumpy","lush","luxuriant","lying","lyrical","macabre","macho","maddening","madly","magenta","magical","magnificent","main","majestic","major","makeshift","malicious","mammoth","maniacal","many","marked","married","marvelous","massive","material","materialistic","max","maxed","mean","measly","meaty","medical","meek","mellow","melodic","melted","merciful","mere","merry","messy","mighty","military","milky","mindless","miniature","minor","mint","mirthful","miscreant","misty","mixed","moaning","modern","modest","moldy","momentous","money","moonlit","moral","motionless","mountainous","moving","mucho","muddled","mundane","murky","mushy","mute","mutual","mysterious","naive","nappy","narrow","nasty","native","natural","naughty","nauseating","near","neat","nebulous","necessary","needed","needless","needy","neighborly","nervous","new","next","nice","nifty","nimble","nippy","noble","noiseless","noisy","nonchalant","nondescript","nonstop","normal","nostalgic","nosy","noted","novel","noxious","null","numberless","numero","numerous","nutritious","nutty","oafish","obedient","obeisant","obnoxious","obscene","obsequious","observant","obsolete","obtainable","oceanic","odd","offbeat","okay","omniscient","onerous","open","opposite","optimal","orange","ordinary","organic","ossified","outgoing","outrageous","outstanding","oval","overconfident","overjoyed","overrated","overt","overwrought","pacific","painful","painstaking","pale","paltry","panicky","panoramic","parallel","parched","parsimonious","past","pastoral","pathetic","peaceful","peachy","penitent","peppy","perfect","periodic","permissible","perpetual","petite","phobic","physical","picayune","pink","piquant","pithy","placid","plain","plant","plastic","plausible","pleasant","plucky","plum","poetic","pointless","poised","polite","political","posh","possessive","possible","potent","powerful","precious","premium","present","pretty","previous","pricey","prickly","prime","primo","private","prized","pro","probable","productive","profuse","prompt","proper","protective","proud","psychedelic","psychotic","public","puffy","pumped","punchy","puny","pure","purple","purring","pushy","puzzled","puzzling","quack","quaint","quarrelsome","questionable","quick","quickest","quiet","quirky","quixotic","quizzical","rabid","rad","radioactive","ragged","rainy","rambunctious","rampant","rapid","rare","raspy","ratty","reach","ready","real","rebel","receptive","recondite","red","redundant","reflective","regal","regular","relieved","remarkable","reminiscent","repulsive","resilient","resolute","resonant","responsible","rhetorical","rich","right","righteous","rightful","rigid","ripe","ritzy","roasted","robust","romantic","roomy","rooted","rosy","rotten","rough","round","royal","ruddy","rude","rugged","rural","rustic","ruthless","sable","sad","safe","salty","same","sassy","satisfying","saucy","savory","savvy","scandalous","scarce","scared","scary","scattered","scenic","scientific","scintillating","scrawny","screeching","second","secret","secretive","sedate","seemly","selective","selfish","sensitive","separate","serene","serious","shaggy","shaky","shallow","sharp","shiny","shivering","shocking","short","showy","shrewd","shrill","shut","shy","sick","silent","silky","silly","simple","simplistic","sincere","skillful","skinny","sleek","sleepy","slick","slim","slimy","slippery","sloppy","slow","small","smart","smelly","smiley","smiling","smoggy","smooth","snappy","snazzy","sneaky","snobbish","snotty","snowy","snugly","social","soft","soggy","sole","solid","solitary","somber","sophisticated","sordid","sore","sound","sour","spacial","sparkling","special","spectacular","spicy","spiffy","spiky","spiritual","spiteful","splendid","spooky","spotless","spotted","spotty","spry","spurious","squalid","square","squealing","squeamish","stable","staking","stale","standing","star","stark","statuesque","steadfast","steady","steep","stereotyped","sticky","stiff","stimulating","stingy","stoic","stormy","straight","strange","striped","strong","stunning","stupendous","sturdy","suave","subdued","subsequent","substantial","subtle","successful","succinct","sudden","sulky","sunny","sunset","super","superb","superficial","supreme","sure","swank","swanky","sweet","swell","sweltering","swift","symptomatic","synonymous","taboo","tacit","tacky","talented","tall","tame","tan","tangible","tangy","tart","tasteful","tasteless","tasty","tawdry","teal","tearful","tedious","teeny","telling","temporary","tender","tense","tenuous","terrible","terrific","tested","testy","thankful","therapeutic","thin","thinkable","third","thoughtful","thoughtless","threatening","thriving","thundering","tidy","timely","tiny","tired","tiresome","toothsome","top","tops","torpid","tough","touted","towering","tranquil","trashy","tremendous","tricky","trim","trite","tropical","troubled","truculent","true","trusty","truthful","try","typical","ubiquitous","ultra","unable","unaccountable","unadvised","unarmed","unbecoming","unbiased","uncovered","understood","undisturbed","unequal","unequaled","uneven","unhealthy","uninterested","unique","united","unkempt","unknown","unnatural","unruly","unsightly","unsuitable","untidy","unused","unusual","unwavering","unwieldy","unwritten","upbeat","uplifting","uppity","upset","uptight","urbane","usable","used","useful","utmost","utopian","utter","uttermost","vacuous","vagabond","vague","valid","valuable","various","vast","vengeful","venomous","verdant","versed","vestal","viable","victorious","vigorous","violent","violet","vital","vivacious","vivid","vocal","vogue","voiceless","volatile","voracious","wacky","waggish","waiting","wakeful","wandering","wanted","wanting","warlike","warm","wary","wasteful","watery","weak","wealthy","weary","wet","whimsical","whispering","whole","wholesale","wicked","wide","wiggly","wild","willing","windy","winged","wired","wiry","wise","wistful","witty","woebegone","wonderful","wooden","woozy","workable","worried","worthy","wrathful","wretched","wrong","wry","yielding","young","youthful","yummy","zany","zealous","zesty","zippy","zonked"],qS=["account","achiever","acoustics","act","action","activity","actor","addition","adjustment","advertisement","advice","aftermath","afternoon","afterthought","agreement","air","airplane","airport","alarm","amount","amusement","anger","angle","animal","ants","apparatus","apparel","appliance","approval","arch","argument","arithmetic","arm","army","art","attack","attraction","authority","back","badge","bag","bait","balance","ball","base","baseball","basin","basket","basketball","bat","bath","battle","bead","bear","bed","bedroom","beds","bee","beef","beginner","behavior","belief","believe","bell","bells","berry","bike","bikes","bird","birds","birth","birthday","bit","bite","blade","blood","blow","board","boat","bomb","bone","book","books","boot","border","bottle","boundary","box","brake","branch","brass","breath","brick","bridge","bubble","bucket","building","bulb","burst","bushes","business","butter","button","cabbage","cable","cactus","cake","cakes","calculator","calendar","camera","camp","can","cannon","canvas","cap","caption","car","card","care","carpenter","carriage","cars","cart","cast","cat","cats","cattle","cause","cave","celery","cellar","cemetery","cent","chalk","chance","change","channel","cheese","cherries","cherry","chess","chicken","chickens","chin","church","circle","clam","class","cloth","clover","club","coach","coal","coast","coat","cobweb","coil","collar","color","committee","company","comparison","competition","condition","connection","control","cook","copper","corn","cough","country","cover","cow","cows","crack","cracker","crate","crayon","cream","creator","creature","credit","crib","crime","crook","crow","crowd","crown","cub","cup","current","curtain","curve","cushion","day","death","debt","decision","deer","degree","design","desire","desk","destruction","detail","development","digestion","dime","dinner","dinosaurs","direction","dirt","discovery","discussion","distance","distribution","division","dock","doctor","dog","dogs","doll","dolls","donkey","door","downtown","drain","drawer","dress","drink","driving","drop","duck","ducks","dust","ear","earth","earthquake","edge","education","effect","egg","eggnog","eggs","elbow","end","engine","error","event","example","exchange","existence","expansion","experience","expert","eye","eyes","face","fact","fairies","fall","fang","farm","fear","feeling","field","finger","fire","fish","flag","flame","flavor","flesh","flight","flock","floor","flower","flowers","fly","fog","fold","food","foot","force","fork","form","fowl","frame","friction","friend","friends","frog","frogs","front","fruit","fuel","furniture","gate","geese","ghost","giants","giraffe","glass","glove","gold","government","governor","grade","grain","grape","grass","grip","ground","group","growth","guide","guitar","gun","hair","haircut","hall","hammer","hand","hands","harbor","harmony","hat","head","health","heat","hill","history","hobbies","hole","holiday","home","honey","hook","hope","horn","horse","horses","hose","hospital","hot","hour","house","houses","humor","hydrant","ice","icicle","idea","impulse","income","increase","industry","ink","insect","instrument","insurance","interest","invention","iron","island","jail","jam","jar","jeans","jelly","jellyfish","jewel","join","judge","juice","jump","kettle","key","kick","kiss","kittens","kitty","knee","knife","knot","knowledge","laborer","lace","ladybug","lake","lamp","land","language","laugh","leather","leg","legs","letter","letters","lettuce","level","library","limit","line","linen","lip","liquid","loaf","lock","locket","look","loss","love","low","lumber","lunch","lunchroom","machine","magic","maid","mailbox","marble","mark","market","mask","mass","match","meal","measure","meat","meeting","memory","metal","mice","middle","milk","mind","mine","minister","mint","minute","mist","mitten","money","month","moon","morning","mother","motion","mountain","mouth","move","muscle","name","nation","neck","need","needle","nerve","nest","night","noise","north","nose","note","notebook","number","nut","oatmeal","observation","ocean","offer","office","oil","orange","oranges","order","oven","page","pail","pan","pancake","paper","parcel","part","partner","party","passenger","payment","peace","pear","pen","pencil","person","pest","pet","pets","pickle","picture","pie","pies","pig","pigs","pin","pipe","pizzas","place","plane","planes","plant","plantation","plants","plastic","plate","play","playground","pleasure","plot","plough","pocket","point","poison","pollution","popcorn","porter","position","pot","potato","powder","power","price","produce","profit","property","prose","protest","pull","pump","punishment","purpose","push","quarter","quartz","question","quicksand","quiet","quill","quilt","quince","quiver","rabbit","rabbits","rail","railway","rain","rainstorm","rake","range","rat","rate","ray","reaction","reading","reason","receipt","recess","record","regret","relation","religion","representative","request","respect","rest","reward","rhythm","rice","riddle","rifle","ring","rings","river","road","robin","rock","rod","roll","roof","room","root","rose","route","rub","rule","run","sack","sail","salt","sand","scale","scarecrow","scarf","scene","scent","school","science","scissors","screw","sea","seashore","seat","secretary","seed","selection","self","sense","servant","shade","shake","shame","shape","sheep","sheet","shelf","ship","shirt","shock","shoe","shoes","shop","show","side","sidewalk","sign","silk","silver","sink","size","skate","skin","skirt","sky","sleep","sleet","slip","slope","smash","smell","smile","smoke","snail","snails","snake","snakes","sneeze","snow","soap","society","sock","soda","sofa","song","songs","sort","sound","soup","space","spade","spark","spiders","sponge","spoon","spot","spring","spy","square","squirrel","stage","stamp","star","start","statement","station","steam","steel","stem","step","stew","stick","sticks","stitch","stocking","stomach","stone","stop","store","story","stove","stranger","straw","stream","street","stretch","string","structure","substance","sugar","suggestion","suit","summer","sun","support","surprise","sweater","swim","swing","system","table","tail","talk","tank","taste","tax","teaching","team","teeth","temper","tendency","tent","territory","test","texture","theory","thing","things","thought","thread","thrill","throat","throne","thumb","thunder","ticket","tiger","time","tin","title","toad","toe","toes","tomatoes","tongue","tooth","toothbrush","toothpaste","top","touch","town","toy","toys","trade","trail","train","trains","tramp","transport","tray","treatment","tree","trees","trick","trip","trouble","trousers","truck","trucks","tub","turkey","turn","twig","twist","umbrella","underwear","unit","use","vacation","value","van","vase","vegetable","veil","vein","verse","vessel","vest","view","visitor","voice","volcano","volleyball","voyage","walk","wall","war","wash","waste","watch","water","wave","waves","wax","way","wealth","weather","week","weight","wheel","whip","whistle","wilderness","wind","window","wine","wing","winter","wire","wish","wood","wool","word","work","worm","wound","wren","wrench","wrist","writer","writing","yak","yam","yard","yarn","year","yoke","zebra","zephyr","zinc","zipper","zoo"],XS=function(){return"".concat(cc()(GS()(YS))," ").concat(cc()(GS()(qS)))},JS=n(37489),KS=function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,o,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,o=n.generatedProjectId,e.next=3,t();case 3:return i=e.sent,e.next=6,Xe().get("".concat(Je.xP.baseUrl,"/generated-project/").concat(o),{params:{userId:r},headers:{Authorization:i}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),QS=function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,o,i,a,s,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,o=n.prompt,i=n.width,a=n.height,s=n.projectName,e.next=3,t();case 3:return c=e.sent,e.next=6,Xe().post("".concat(Je.xP.baseUrl,"/generated-project"),{prompt:o,width:i,height:a,projectName:s},{params:{userId:r},headers:{Authorization:c}});case 6:return u=e.sent,e.abrupt("return",u.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$S=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"54",height:"38",viewBox:"0 0 54 38",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51 2.09815e-06C52.6569 2.17057e-06 54 1.34315 54 3V35C54 36.6569 52.6569 38 51 38L3 38C1.34315 38 0 36.6569 0 35V3C0 1.34315 1.34315 0 3 0L51 2.09815e-06ZM51 1C52.1046 1 53 1.89543 53 3V35C53 36.1046 52.1046 37 51 37L3 37C1.89543 37 1 36.1046 1 35L1 3C1 1.89543 1.89543 1 3 1L51 1Z",fill:"currentColor"})}))})),eP=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"40",height:"26",viewBox:"0 0 40 26",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 0C38.6569 0 40 1.34315 40 3V23C40 24.6569 38.6569 26 37 26L3 26C1.34314 26 0 24.6569 0 23V3C0 1.34315 1.34315 0 3 0H37ZM37 1C38.1046 1 39 1.89543 39 3V23C39 24.1046 38.1046 25 37 25L3 25C1.89543 25 1 24.1046 1 23L1 3C1 1.89543 1.89543 1 3 1L37 1Z",fill:"currentColor"})}))})),tP=u.memo((function(e){return(0,f.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"26",height:"40",viewBox:"0 0 26 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3C0 1.34315 1.34315 0 3 0H23C24.6569 0 26 1.34315 26 3V37C26 38.6569 24.6569 40 23 40H3C1.34315 40 0 38.6569 0 37V3ZM1 3C1 1.89543 1.89543 1 3 1H23C24.1046 1 25 1.89543 25 3V37C25 38.1046 24.1046 39 23 39H3C1.89543 39 1 38.1046 1 37V3Z",fill:"currentColor"})}))})),nP=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"60",height:"46",viewBox:"0 0 60 46",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.9614 6.1923L6.1922 6.1923L6.19219 39.8077H53.9614V6.1923ZM7.1922 7.1923L7.19219 38.8077H52.9614V7.1923L7.1922 7.1923Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.0769 46L7.0769 41.5769H6.0769L6.0769 46H7.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.0769 0V4.42308H6.0769V0H7.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M0 7.07689H4.42308V6.07689H0V7.07689Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M53.0769 0V4.42308H54.0769V0H53.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M60.1538 7.07689H55.7307V6.07689H60.1538V7.07689Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M53.0769 46V41.5769H54.0769V46H53.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M60.1538 38.9231H55.7307V39.9231H60.1538V38.9231Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M0 38.9231H4.42308V39.9231H0V38.9231Z",fill:"currentColor"})]}))})),rP={optionsContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(8rem, 1fr))",gridGap:"0.5rem",margin:2},optionContainer:{display:"flex",flexDirection:"column",flex:1,marginLeft:4,marginRight:4},buttonBase:{height:"100%",width:"100%",borderRadius:8,padding:8,cursor:"default",overflow:"hidden",boxSizing:"border-box"},contentWrapper:{height:"100%",width:"100%",display:"flex"},largeIcon:{transform:"scale(1.5)"},customSizeField:{fontSize:12,padding:2}},oP={mobilePortrait:{label:(0,f.jsx)(c.Trans,{id:"Mobile portrait"}),width:720,height:1280,orientation:"portrait",icon:(0,f.jsx)(tP,{fontSize:"large"})},desktopMobileLandscape:{label:(0,f.jsx)(c.Trans,{id:"Desktop & Mobile landscape"}),width:1280,height:720,orientation:"landscape",icon:(0,f.jsx)(eP,{fontSize:"large"})},desktopHD:{label:(0,f.jsx)(c.Trans,{id:"Desktop Full HD"}),width:1920,height:1080,orientation:"default",icon:(0,f.jsx)($S,{fontSize:"large",style:rP.largeIcon})},custom:{label:(0,f.jsx)(c.Trans,{id:"Custom size"}),orientation:"default",icon:(0,f.jsx)(nP,{fontSize:"large",style:rP.largeIcon})}},iP=function(e){var t=e.value,n=e.onChange,r=e.defaultValue;e.disabled;return(0,f.jsx)(Dt.Z,{margin:"none",style:rP.customSizeField,inputStyle:{padding:0},type:"number",value:t?t.toString(10):"",onChange:function(e){var t=parseInt(e,10),r=isNaN(t)?null:t;n(r)},onBlur:function(){var e=parseInt(t||r,10),o=Math.min(Math.max(e,1),9999);n(o)},min:0,max:9999,step:10})},aP=function(e){var t=e.children,n=e.onClick,r=e.selected,o=e.disabled,a=function(e){return(0,St.Z)((function(t){return(0,vw.Z)({root:{outline:e?"2px solid ".concat(t.palette.secondary.dark):"1px solid ".concat(t.palette.text.disabled),"&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover}}})}))()}(r);return(0,f.jsx)(Zr.Z,{onClick:n,elevation:2,style:(0,i.Z)({},rP.buttonBase),classes:a,tabIndex:0,onKeyPress:function(e){(0,Io.ph)(e)&&!r&&n()},disableTouchRipple:r,disabled:o,children:(0,f.jsx)("div",{style:rP.contentWrapper,children:t})})},sP=function(e){var t=e.selectedOption,n=e.onClick,r=e.disabled,o=e.customWidth,i=e.customHeight,a=e.onCustomWidthChange,s=e.onCustomHeightChange;return(0,f.jsx)("div",{style:rP.optionsContainer,children:Object.keys(oP).map((function(e,l){var c=oP[e],u=c.width,d=c.height,p=c.label,h=c.icon;return(0,f.jsx)(L.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(aP,{onClick:function(){return n(e)},selected:t===e,disabled:r,children:(0,f.jsxs)(L.sg,{expand:!0,alignItems:"center",justifyContent:"center",noMargin:!0,children:[h,(0,f.jsx)(L.LZ,{}),(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{size:"body2",noMargin:!0,children:p}),u&&d?(0,f.jsxs)(J.Z,{size:"body-small",noMargin:!0,color:"secondary",children:[u,"x",d]}):(0,f.jsxs)(L.x1,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(J.Z,{size:"body-small",noMargin:!0,color:"secondary",children:"W"}),(0,f.jsx)(iP,{value:o,onChange:a,defaultValue:800,disabled:r}),(0,f.jsx)(J.Z,{size:"body-small",noMargin:!0,color:"secondary",children:"H"}),(0,f.jsx)(iP,{value:i,onChange:s,defaultValue:600,disabled:r})]})]})]})})},e)}))})},lP=["knight","warrior","wizard","mage","rogue","ninja","bunny","animal","robot","alien","monster","zombie","ghost","vampire","werewolf","clown","pirate","ninja","elf","dwarf","orc","goblin","troll","spider","snake","dragon","demon","angel","god","goddess","hero","heroine","prince","princess","king","queen","knight","warrior","wizard","mage","rogue","ninja","bunny","animal","robot","alien","monster","zombie","ghost","vampire","werewolf","clown","pirate","ninja","elf","dwarf","orc","goblin","troll","spider","snake","dragon","demon","angel","god","goddess","hero","heroine","prince","princess","king","queen"],cP=["dungeon","castle","forest","cave","mountain","desert","swamp","city","village","town","island","ship","space station"],uP=["coins","treasure","gems","crystals","artifacts","weapons","armor","potions","scrolls","books","runes","orbs","rings"],dP=["the exit","the treasure","the key","the door","the portal","the artifact","the weapon"],pP=["platformer","top-down","side-shooter","twinstick-shooter","flappy-bird","endless-runner","megaman"],hP=function(e){return"".concat(function(e){return["a","e","i","o","u"].includes(e[0].toLowerCase())}(e)?"an":"a"," ").concat(e)},fP=function(){var e=GS()(pP),t=GS()(lP),n=GS()(cP),r=GS()(uP),o=GS()(dP);return"".concat(hP(e)," game with ").concat(hP(t)," in ").concat(hP(n)," collecting ").concat(r," and trying to reach ").concat(o)},gP=n(77791),mP=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[(0,f.jsx)("path",{d:"M2.625 0.75C1.99264 0.75 1.4887 1.08656 1.18306 1.49408C0.882583 1.89471 0.75 2.37906 0.75 2.83333C0.75 3.28761 0.882583 3.77196 1.18306 4.17259C1.4887 4.58011 1.99264 4.91667 2.625 4.91667C3.25736 4.91667 3.7613 4.58011 4.06694 4.17259C4.36742 3.77196 4.5 3.28761 4.5 2.83333C4.5 2.37906 4.36742 1.89471 4.06694 1.49408C3.7613 1.08656 3.25736 0.75 2.625 0.75Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M11.375 0.75C10.7426 0.75 10.2387 1.08656 9.93306 1.49408C9.63258 1.89471 9.5 2.37906 9.5 2.83333C9.5 3.28761 9.63258 3.77196 9.93306 4.17259C10.2387 4.58011 10.7426 4.91667 11.375 4.91667C12.0074 4.91667 12.5113 4.58011 12.8169 4.17259C13.1174 3.77196 13.25 3.28761 13.25 2.83333C13.25 2.37906 13.1174 1.89471 12.8169 1.49408C12.5113 1.08656 12.0074 0.75 11.375 0.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.87464 9.4403C2.38579 8.96131 1.6012 8.96436 1.11612 9.44945C0.627961 9.93761 0.627961 10.7291 1.11612 11.2172L1.11792 11.219L1.11989 11.221L1.12432 11.2254L1.13514 11.2359L1.1646 11.264C1.18773 11.2857 1.21786 11.3132 1.25499 11.3457C1.32923 11.4106 1.43171 11.4957 1.5625 11.5938C1.82391 11.7898 2.19993 12.0392 2.69098 12.2847C3.67718 12.7778 5.11738 13.25 7 13.25C8.88262 13.25 10.3228 12.7778 11.309 12.2847C11.8001 12.0392 12.1761 11.7898 12.4375 11.5938C12.5683 11.4957 12.6708 11.4106 12.745 11.3457C12.7821 11.3132 12.8123 11.2857 12.8354 11.264L12.8649 11.2359L12.8757 11.2254L12.8801 11.221L12.8821 11.219C12.8846 11.2165 12.8839 11.2172 12.8839 11.2172C13.372 10.7291 13.372 9.93761 12.8839 9.44945C12.3989 8.96443 11.6144 8.96131 11.1256 9.44011C11.1217 9.44369 11.1123 9.4524 11.0987 9.46423C11.0688 9.49041 11.015 9.53559 10.9375 9.59375C10.7822 9.71019 10.5333 9.87749 10.191 10.0486C9.51051 10.3889 8.45071 10.75 7 10.75C5.54929 10.75 4.48949 10.3889 3.80902 10.0486C3.46673 9.87749 3.21776 9.71019 3.0625 9.59375C2.98496 9.53559 2.93118 9.49041 2.90126 9.46423C2.88661 9.45141 2.87773 9.44319 2.87464 9.4403Z",fill:"currentColor"})]}))}));function xP(e){var t=function(e){return(0,Hr.Z)((function(t){return{container:{position:"relative",overflow:"hidden",padding:"0.75rem",borderRadius:"0.75rem",display:"flex",justifyContent:"center",alignItems:"center","&::before":{content:"''",display:"block",background:"conic-gradient(".concat("light"===t.palette.type?"#f0f0f0":"#262231",", #b07bf7)"),width:"calc(100% * 1.41421356237)",paddingBottom:"calc(100% * 1.41421356237)",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"100%",zIndex:0,animation:e?"spin-background 3s linear infinite":"none"},"&::after":{content:"''",position:"absolute",inset:"0.35rem",background:t.palette.background.alternate,zIndex:1,borderRadius:"0.5rem"}},svgContainer:{display:"flex",zIndex:2}}}))()}(e.rotating);return(0,f.jsx)("div",{className:t.container,children:(0,f.jsx)("div",{className:t.svgContainer,children:(0,f.jsx)(mP,{})})})}var vP=[(0,f.jsx)(c.Trans,{id:"Talking to the AI... beep boop beep boop..."}),(0,f.jsx)(c.Trans,{id:"The AI has accepted your request. It is now thinking about the best way to create your game..."}),(0,f.jsx)(c.Trans,{id:"It is now choosing objects from the asset store..."}),(0,f.jsx)(c.Trans,{id:"It is now placing everything in the scene..."}),(0,f.jsx)(c.Trans,{id:"Almost done..."})],bP=function(e){var t=e.generatingProjectId,n=e.storageProvider,r=e.saveAsLocation,i=e.onClose,s=e.onCreate,d=u.useContext(ir.ZP),p=d.getAuthorizationHeader,h=d.profile,g=u.useState(!1),x=(0,a.Z)(g,2),v=x[0],b=x[1],j=u.useState(!1),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=u.useContext(m.Z),T=u.useState(0),S=(0,a.Z)(T,2),P=S[0],I=S[1],D=u.useState(0),A=(0,a.Z)(D,2),M=A[0],F=A[1],O=u.useCallback((function(){F(M+5),P>=vP.length-1||I(P+1)}),[P,I,M]);(0,Pa.Y)(O,5e3);var R=M>35,B=u.useCallback((0,o.Z)(l().mark((function e(){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,KS(p,{generatedProjectId:t,userId:h.id});case 5:if("ready"!==(o=e.sent).status){e.next=14;break}if(k(!0),o.fileUrl){e.next=10;break}throw new Error("Generated project has no fileUrl");case 10:return e.next=12,s(o,{projectName:o.projectName,storageProvider:n,saveAsLocation:r});case 12:e.next=16;break;case 14:if("error"!==o.status){e.next=16;break}throw new Error("Generated project has an error");case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),b(!0);case 22:case"end":return e.stop()}}),e,null,[[2,18]])}))),[t,p,h,s,r,n]),N=!Z&&!v&&t;return(0,Pa.Y)((function(){B()}),N?3e3:null),(0,f.jsx)(V.ZP,{open:!0,title:null,id:"project-generating-dialog",maxWidth:"sm",actions:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:i},"cancel")],cannotBeDismissed:!0,onRequestClose:i,children:v?(0,f.jsxs)(C.ak,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{size:"section-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"Oh. We lost contact with the AI."})}),(0,f.jsx)(gP.Z,{style:{color:w.message.error,width:40,height:40}}),(0,f.jsx)(J.Z,{size:"sub-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"It's probably tired."})}),(0,f.jsx)(J.Z,{size:"sub-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"Try making your prompt more specific."})}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Try again"}),primary:!0,onClick:i})]}):(0,f.jsxs)(C.ak,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(J.Z,{size:"section-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"Creating new project"})}),(0,f.jsx)(L.hS,{}),(0,f.jsx)(xP,{rotating:!0}),(0,f.jsx)(J.Z,{size:"sub-title",align:"center",children:R?(0,f.jsx)(c.Trans,{id:"This is taking longer than expected... We might have lost contact with the AI."}):vP[P]}),R&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J.Z,{size:"sub-title",align:"center",children:(0,f.jsx)(c.Trans,{id:"You can wait a bit more, or try refining your prompt."})}),(0,f.jsx)(E.Z,{label:(0,f.jsx)(c.Trans,{id:"Try again"}),primary:!0,onClick:i})]})]})})},jP=q()("electron"),CP=q()("@electron/remote"),yP=CP?CP.app:null,ZP=function(e){var t=e.isOpeningProject,n=e.onClose,r=e.onCreateEmptyProject,i=e.onCreateFromExample,s=e.onCreateWithLogin,d=e.onCreateFromAIGeneration,p=e.selectedExampleShortHeader,h=e.storageProviders,g=e.authenticatedUser,m=function(){return p?"".concat(XS()," (").concat(p.name,")"):XS()},x=u.useContext(ir.ZP),v=x.getAuthorizationHeader,b=x.profile,j=(0,ft.Z)().showAlert,y=(0,wa.k)(),Z=u.useContext(X.ZP),k=Z.values,w=Z.setNewProjectsDefaultStorageProviderName,T=u.useContext(to.Z).currentlyRunningInAppTutorial,E=u.useContext(nr.o).openSubscriptionDialog,S=u.useState(null),P=(0,a.Z)(S,2),I=P[0],D=P[1],M=u.useState(m()),F=(0,a.Z)(M,2),O=F[0],R=F[1],N=u.useState(""),H=(0,a.Z)(N,2),W=H[0],z=H[1],G=u.useState(!1),Y=(0,a.Z)(G,2),q=Y[0],K=Y[1],Q=u.useState(null),$=(0,a.Z)(Q,2),te=$[0],ne=$[1],oe=u.useState("desktopMobileLandscape"),ie=(0,a.Z)(oe,2),ae=ie[0],se=ie[1],le=u.useState(800),ce=(0,a.Z)(le,2),ue=ce[0],de=ce[1],pe=u.useState(600),he=(0,a.Z)(pe,2),fe=he[0],ge=he[1],me=u.useState(!1),xe=(0,a.Z)(me,2),ve=xe[0],be=xe[1],je=u.useState(!(T||!y)),Ce=(0,a.Z)(je,2),ye=Ce[0],Ze=Ce[1],ke=yP?(0,JS.X)(yP,k.newProjectsDefaultFolder||""):"",we=u.useState(null),Te=(0,a.Z)(we,2),Ee=Te[0],Se=Te[1],Pe=u.useState((function(){var e=h.find((function(e){return"LocalFile"===e.internalName})),t=h.find((function(e){return"Cloud"===e.internalName}));if(T)return e||eC.H;if("Empty"===k.newProjectsDefaultStorageProviderName)return eC.H;var n=h.find((function(e){return e.internalName===k.newProjectsDefaultStorageProviderName}));return n||(g.authenticated&&t?t:e||eC.H)})),Ie=(0,a.Z)(Pe,2),De=Ie[0],Ae=Ie[1],Le=g.limits?g.limits.limits["ai-project-generation"]:null,Me=Le&&!Le.limitReached,Fe=De.needUserAuthentication&&!g.authenticated,Oe=g.limits,Re="Cloud"===De.internalName&&Yw(g),Be=oP[ae].width||ue||800,_e=oP[ae].height||fe||600,Ue=oP[ae].orientation,He=u.useCallback((0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(!Fe&&b){e.next=4;break}return e.abrupt("return");case 4:return K(!0),e.prev=5,e.next=8,QS(v,{userId:b.id,prompt:W,width:Be,height:_e,projectName:O});case 8:n=e.sent,ne(n.id),e.next=22;break;case 12:if(e.prev=12,e.t0=e.catch(5),!e.t0.response||!e.t0.response.data||"project-generation/quota-exceeded"!==e.t0.response.data.code){e.next=20;break}return z(""),e.next=18,g.onSubscriptionUpdated();case 18:e.next=21;break;case 20:j({title:{id:"Unable to generate project"},message:{id:"Looks like the AI service is not available. Please try again later or create a project without a prompt."}});case 21:K(!1);case 22:case"end":return e.stop()}}),e,null,[[5,12]])}))),[t,Fe,v,W,b,O,j,g,_e,Be]),Ve=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=3;break}return He(),e.abrupt("return");case 3:if(!t){e.next=5;break}return e.abrupt("return");case 5:if(!Fe){e.next=7;break}return e.abrupt("return");case 7:if(D(null),O){e.next=11;break}return D((0,f.jsx)(c.Trans,{id:"Please enter a name for your project."})),e.abrupt("return");case 11:if(o={projectName:O,storageProvider:De,saveAsLocation:Ee,height:_e,width:Be,orientation:Ue,optimizeForPixelArt:ve,allowPlayersToLogIn:ye},!p){e.next=17;break}return e.next=15,i(p,{projectName:O,storageProvider:De,saveAsLocation:Ee},n);case 15:e.next=25;break;case 17:if(!ye){e.next=23;break}return e.next=20,s(o);case 20:return e.abrupt("return");case 23:return e.next=25,r(o);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,Fe,O,De,Ee,_e,Be,Ue,ve,ye,He,W,p,i,s,r]),We=u.useCallback((function(e,t){I&&D(null),R(t)}),[R,I]),ze=q||t;return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(V.ZP,{open:!0,title:(0,f.jsx)(c.Trans,{id:"New Project"}),id:"project-pre-creation-dialog",maxWidth:"sm",actions:[(0,f.jsx)(_.Z,{disabled:ze,label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:n},"cancel"),(0,f.jsx)(Mr.Z,{isLoading:ze,children:(0,f.jsx)(V.vF,{primary:!0,disabled:ze||Fe||Re,label:(0,f.jsx)(c.Trans,{id:"Create project"}),onClick:function(){return Ve(t)},id:"create-project-button"})},"create")],cannotBeDismissed:ze,onRequestClose:n,onApply:function(){return Ve(t)},children:[(0,f.jsxs)(C.ak,{noMargin:!0,children:[!p&&(0,f.jsx)(sP,{onClick:function(e){return se(e)},selectedOption:ae,disabled:ze,customHeight:fe,customWidth:ue,onCustomHeightChange:ge,onCustomWidthChange:de}),(0,f.jsx)(po.ZP,{type:"text",errorText:I,disabled:ze,value:O,onChange:We,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Project name"}),endAdornment:(0,f.jsx)(A.Z,{size:"small",onClick:function(){return R(m())},tooltip:{id:"Generate random name"},disabled:ze,children:(0,f.jsx)(Ne,{})}),autoFocus:"desktop",maxLength:100}),(0,f.jsxs)(B.Z,{fullWidth:!0,disabled:ze,floatingLabelText:(0,f.jsx)(c.Trans,{id:"Where to store this project"}),value:De.internalName,onChange:function(e,t,n){w(n);var r=h.find((function(e){return e.internalName===n}))||eC.H;Ae(r),Se(null)},children:[h.filter((function(e){return!!e.onRenderNewProjectSaveAsLocationChooser})).map((function(e){return(0,f.jsx)(U.Z,{value:e.internalName,label:e.name,disabled:e.disabled},e.internalName)})),!jP&&(0,f.jsx)(U.Z,{value:eC.H.internalName,label:{id:"Don't save this project now"}})]}),Fe&&(0,f.jsx)(ee.Z,{background:"dark",variant:"outlined",children:(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(hl.Z,{onLogin:g.onLogin,onCreateAccount:g.onCreateAccount,message:(0,f.jsx)(c.Trans,{id:"Create an account to store your project online."})})})}),!Fe&&De.onRenderNewProjectSaveAsLocationChooser&&De.onRenderNewProjectSaveAsLocationChooser({projectName:O,saveAsLocation:Ee,setSaveAsLocation:Se,newProjectsDefaultFolder:ke}),!p&&(0,f.jsxs)(C.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(re.Z,{kind:"info",identifier:"new-generate-project-from-prompt",children:(0,f.jsx)(c.Trans,{id:"NEW! Generate a pre-made AI scene with assets."})}),(0,f.jsxs)(C.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(xP,{}),(0,f.jsx)(po.ZP,{type:"text",multiline:!0,maxLength:200,fullWidth:!0,disabled:ze||!g.authenticated||!y||!Me,value:W,onChange:function(e,t){return z(t)},floatingLabelText:(0,f.jsx)(c.Trans,{id:"AI prompt"}),floatingLabelFixed:!0,translatableHintText:g.authenticated&&y?{id:"Type a prompt yourself or generate a random one"}:{id:"Log in to generate a project from a prompt"},endAdornment:(0,f.jsx)(A.Z,{size:"small",onClick:function(){return z(fP())},tooltip:{id:"Generate random prompt"},disabled:ze||!g.authenticated||!y||!Me,children:(0,f.jsx)(Ne,{})})})]}),g.authenticated&&!Me&&(0,f.jsx)(or,{subscriptionDialogOpeningReason:"Generate project from prompt",children:(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"You've used all your daily pre-made AI scenes! Generate as many as you want with a subscription."})})})})}),(0,f.jsx)(J.Z,{size:"sub-title",children:(0,f.jsx)(c.Trans,{id:"Advanced File options"})}),(0,f.jsx)(Yn.Z,{checked:ve,label:(0,f.jsx)(c.Trans,{id:"Optimize for Pixel Art"}),onCheck:function(e,t){be(t)},disabled:ze}),(0,f.jsx)(Yn.Z,{checked:ye,label:(0,f.jsx)(c.Trans,{id:"Allow players to authenticate in-game"}),onCheck:function(e,t){Ze(t)},disabled:ze||!y,tooltipOrHelperText:(0,f.jsx)($e.r,{translatableSource:{id:"Learn more about [player authentication](https://wiki.engine.spacexpanse.org/spexengine5/all-features/player-authentication)."}})})]}),Oe&&Re?(0,f.jsx)(qw,{limits:Oe,onUpgrade:function(){return E({reason:"Cloud Project limit reached"})}}):null]}),q&&te&&(0,f.jsx)(bP,{generatingProjectId:te,storageProvider:De,saveAsLocation:Ee,onCreate:d,onClose:function(){ne(null),K(!1)}})]})}})},kP=n(51063),wP=function(e){var t=e.resourceMover,n=(0,kP.s)({onDoProcess:u.useCallback((function(e,n){return t.moveAllProjectResources((0,i.Z)((0,i.Z)({},e),{},{onProgress:n}))}),[t])}),r=n.ensureProcessIsDone,o=n.renderProcessDialog;return u.useMemo((function(){return{ensureResourcesAreMoved:r,renderResourceMoverDialog:o}}),[r,o])},TP=function(e){var t=e.onSaveProject,n=e.canEndTutorial,r=e.endTutorial,o=e.onClose,i=e.isSavingProject,s=u.useState(!1),l=(0,a.Z)(s,2),d=l[0],p=l[1],h=u.useState((0,f.jsx)(c.Trans,{id:"Leave the tutorial"})),g=(0,a.Z)(h,2),m=g[0],x=g[1];u.useEffect((function(){d&&(i?x((0,f.jsx)(c.Trans,{id:"Saving project"})):n&&x((0,f.jsx)(c.Trans,{id:"Project saved"})))}),[i,n,d]);var v=function(){r(),o()},b=function(){p(!0),n?v():t()},j=i?(0,f.jsx)(c.Trans,{id:"Saving..."}):n?(0,f.jsx)(c.Trans,{id:"Close Project"}):(0,f.jsx)(c.Trans,{id:"Save Project"});return(0,f.jsxs)(V.ZP,{open:!0,maxWidth:"sm",title:m,onRequestClose:function(){i||o()},onApply:b,secondaryActions:[(0,f.jsx)(_.Z,{onClick:v,label:(0,f.jsx)(c.Trans,{id:"Exit without saving"})},"exit")],actions:[(0,f.jsx)(_.Z,{onClick:o,label:(0,f.jsx)(c.Trans,{id:"Cancel"})},"cancel"),(0,f.jsx)(Mr.Z,{isLoading:i,children:(0,f.jsx)(V.vF,{primary:!0,label:j,disabled:i,onClick:b})},"save-and-exit")],flexColumnBody:!0,children:[(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You are about to quit the tutorial."})}),(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"You can save your project to come back to it later. What do you want to do?"})})]})},EP=function(e){var t=e.openInAppTutorialDialog,n=e.openProfileDialog,r=u.useContext(ll.Z),o=r.routeArguments,i=r.removeRouteArguments,a=u.useContext(nr.o).openSubscriptionDialog,s=u.useContext(ir.ZP),l=s.onCreateAccount,c=s.authenticated;u.useEffect((function(){switch(o["initial-dialog"]){case"subscription":a({reason:"Landing dialog at opening"}),i(["initial-dialog"]);break;case"signup":var e=setTimeout((function(){c?n(!0):l(),i(["initial-dialog"])}),2e3);return function(){return clearTimeout(e)};case"onboarding":case"guided-lesson":var r=o["tutorial-id"];t(r||Sw.bs),i(["initial-dialog","tutorial-id"]);break;case"games-dashboard":n(!0)}}),[o,t,n,i,a,c,l])},SP=(n(25625),{image:{maxWidth:350},imageLink:{cursor:"pointer",maxWidth:350}});var PP=function(e){var t=e.dialogContent,n=e.endTutorial,r=e.goToNextStep,o=e.isLastStep,i=function(){o?n():r&&r()},a=o?[(0,f.jsx)(V.vF,{onClick:i,label:(0,f.jsx)(c.Trans,{id:"Close"})},"close")]:[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Leave the tutorial"}),onClick:n},"leave"),(0,f.jsx)(V.vF,{primary:!0,onClick:i,label:(0,f.jsx)(c.Trans,{id:"Start next chapter"})},"next")];return(0,f.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(V.ZP,{title:null,onApply:i,open:!0,actions:a,maxWidth:"sm",flexColumnBody:!0,cannotBeDismissed:!0,children:(0,f.jsx)(C.ak,{noMargin:!0,children:t.content.map((function(e,t){if(e.messageDescriptor)return(0,f.jsx)($e.r,{translatableSource:e.messageDescriptor},e.messageDescriptor.id||e.messageDescriptor);if(e.messageByLocale)return(0,f.jsx)($e.r,{source:iE(n,e.messageByLocale)},Object.values(e.messageByLocale)[0]);if(e.image){var r=e.image,o=r.linkHref,i=r.imageSource;return o?(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(ve.Z,{href:o,onClick:function(){return F.ZP.openExternalURL(o)},children:(0,f.jsx)(jf.W,{style:SP.imageLink,src:i,alt:"End of tutorial dialog image"})})},"image-".concat(t)):(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(jf.W,{style:SP.image,src:i,alt:"End of tutorial dialog image"})},"image-".concat(t))}return null}))})})}})},IP=function(e,t){return getComputedStyle(e).getPropertyValue(t)},DP=function e(t,n){return t.parentElement?e(t.parentElement,n.concat([t])):n},AP=function(e){return/(auto|scroll)/.test(function(e){return IP(e,"overflow")+IP(e,"overflow-y")+IP(e,"overflow-x")}(e))},LP=function(e){return"in-app-tutorial-avatar"===e.id?Ph.BI:function(e){var t=document.querySelector("#root");return!!t&&t.contains(e)}(e)?getComputedStyle(e).getPropertyPriority("z-index")+10:Ph.BI},MP=n(51265),FP=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66669C8.13664 2.66669 8.26733 2.72261 8.36168 2.82145L11.8617 6.48812C12.0523 6.68787 12.045 7.00436 11.8452 7.19503C11.6455 7.3857 11.329 7.37834 11.1383 7.17859L8 3.89083L4.86168 7.17859C4.67101 7.37834 4.35451 7.3857 4.15476 7.19503C3.95501 7.00436 3.94765 6.68787 4.13832 6.48812L7.63832 2.82145C7.73267 2.72261 7.86336 2.66669 8 2.66669Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.33335C8.27614 3.33335 8.5 3.55721 8.5 3.83335V12.8334C8.5 13.1095 8.27614 13.3334 8 13.3334C7.72386 13.3334 7.5 13.1095 7.5 12.8334V3.83335C7.5 3.55721 7.72386 3.33335 8 3.33335Z",fill:"currentColor"})]}))})),OP=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.15476 8.80501C4.35451 8.61434 4.67101 8.6217 4.86168 8.82145L8 12.1092L11.1383 8.82145C11.329 8.6217 11.6455 8.61434 11.8452 8.80501C12.045 8.99568 12.0523 9.31218 11.8617 9.51193L8.36168 13.1786C8.26733 13.2774 8.13664 13.3334 8 13.3334C7.86336 13.3334 7.73267 13.2774 7.63832 13.1786L4.13832 9.51193C3.94765 9.31218 3.95501 8.99568 4.15476 8.80501Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66669C8.27614 2.66669 8.5 2.89054 8.5 3.16669V12.1667C8.5 12.4428 8.27614 12.6667 8 12.6667C7.72386 12.6667 7.5 12.4428 7.5 12.1667V3.16669C7.5 2.89054 7.72386 2.66669 8 2.66669Z",fill:"currentColor"})]}))})),RP="#FF8629",BP={rectangleHighlight:{position:"fixed",outline:"1px solid ".concat(RP),boxShadow:"0 0 8px 6px ".concat(RP),boxSizing:"border-box",pointerEvents:"none"},scrollIndicator:{position:"fixed",zIndex:Ph.BI},scrollDirectionArrow:{color:"#1D1D26",display:"flex",backgroundColor:RP,boxShadow:"0 0 12px 2px ".concat(RP),padding:2,borderRadius:3}};var _P=function(e){var t=e.element,n=(0,_t.Z)();(0,MP.Z)(n);var r=u.useState(!0),o=(0,a.Z)(r,2),s=o[0],l=o[1],c=function(e){if(!(e instanceof HTMLElement))return null;var t=e.parentElement;if(!t)return null;var n,r=DP(t,[]),o=(0,an.Z)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(AP(i))return i}}catch(a){o.e(a)}finally{o.f()}return document.scrollingElement||document.documentElement}(t),d=c?wy.fromDOMRect(c.getBoundingClientRect()):void 0,p=wy.fromDOMRect(t.getBoundingClientRect()),h=u.useCallback((function(){return d?p.left<d.left?"left":p.right>d.right?"right":p.top<d.top?"top":p.bottom>d.bottom?"bottom":null:null}),[d,p]),g=u.useState(h()),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useCallback((function(e){var t=e[0].isIntersecting;l(t),!t&&d&&v(h()),n()}),[n,d,h]);fl(t,b),u.useEffect((function(){if(c)return c.addEventListener("scroll",n),function(){c.removeEventListener("scroll",n)}}),[c,n]);var j=getComputedStyle(t),C=u.useMemo((function(){switch(x){case"top":return FP;case"bottom":return OP;case"left":return yb;case"right":return Cb;default:return null}}),[x]);return(0,f.jsxs)(f.Fragment,{children:[s&&(0,f.jsx)("div",{id:"in-app-tutorial-element-highlighter",style:(0,i.Z)((0,i.Z)((0,i.Z)({},BP.rectangleHighlight),p.toCSSPosition()),{},{borderRadius:j.getPropertyValue("border-radius"),zIndex:LP(t)})}),!s&&d&&(0,f.jsx)("div",{id:"in-app-tutorial-scroll-indicator",style:(0,i.Z)((0,i.Z)({},BP.scrollIndicator),{},{animation:"0.5s ease-in-out 0s infinite alternate none running ".concat("top"===x||"bottom"===x?"vertical":"horizontal","-translate"),top:"top"===x?d.top+15:"bottom"===x?d.bottom-50:p.centerY()-15,left:"left"===x?d.left+15:"right"===x?d.right-50:p.centerX()-15}),children:(0,f.jsx)("div",{style:BP.scrollDirectionArrow,children:C&&(0,f.jsx)(C,{fontSize:"large"})})})]})},NP=n(32694),UP=n(89765),HP="#EBEBED",VP="#D9D9DE",WP="#C5C5C9",zP="#A6A6AB",GP="#7F7F85",YP="#1D1D26",qP={paper:{padding:"10px 12px",minWidth:180},title:{color:YP},description:{color:"#494952"},divider:{backgroundColor:VP,height:1},descriptionImage:{margin:"auto"},iconButtonContainer:{cursor:"pointer",borderRadius:5,display:"flex",alignItems:"center"},iconButtonContainerWithPadding:{paddingRight:5},headerText:{fontSize:12},headerContentPreview:{color:YP}},XP=(0,Hr.Z)({popper:{'&[x-placement*="bottom"] #arrow-popper':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] #arrow-popper':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] #arrow-popper':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] #arrow-popper':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box","&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}),JP=function(e){var t=e.tooltip,n=e.buttonLabel,r=e.goToNextStep,o="small"===(0,T.L)(),a=(0,f.jsxs)(L.sg,{noMargin:!0,children:[t.title&&(0,f.jsx)(vi.Z,{style:qP.title,variant:"subtitle1",translate:"no",children:(0,f.jsx)($e.r,{source:t.title,allowParagraphs:!0})}),t.title&&t.description&&(0,f.jsx)("span",{style:qP.divider}),t.description&&(0,f.jsx)(vi.Z,{style:qP.description,translate:"no",children:(0,f.jsx)($e.r,{source:t.description,allowParagraphs:!0})})]}),s=t.image&&(0,f.jsx)("img",{src:t.image.dataUrl,alt:"Tutorial helper",style:(0,i.Z)((0,i.Z)({},qP.descriptionImage),{},{width:t.image.width||"100%",maxWidth:o?150:"100%",maxHeight:o?150:"100%"})}),l=n&&(0,f.jsxs)(L.sg,{noMargin:!0,expand:!0,children:[t.image?(0,f.jsx)(L.LZ,{}):null,(0,f.jsx)(E.Z,{primary:!0,label:n,onClick:r})]}),c=o?(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",children:[s,l]}):(0,f.jsxs)(L.sg,{noMargin:!0,alignItems:"center",children:[s,l]});return(0,f.jsxs)(L.sg,{noMargin:!0,children:[a,c]})},KP=function(e){var t=e.paletteType,n=e.progress,r=e.showFoldButton,o=e.showQuitButton,a=e.onClickFoldButton,s=e.tooltipContent,l=e.endTutorial,u="light"===t?zP:WP,d="light"===t?{color:GP,backgroundColor:VP}:{color:zP,backgroundColor:HP};return(0,f.jsxs)(C.pJ,{alignItems:"center",noMargin:!0,justifyContent:s?void 0:"space-between",children:[(0,f.jsxs)(vi.Z,{style:(0,i.Z)((0,i.Z)({},qP.headerText),{},{color:u}),translate:"no",children:[n,"%"]}),(0,f.jsxs)(C.pJ,{noMargin:!0,alignItems:"center",overflow:"hidden",children:[s||!o?null:(0,f.jsx)(Zr.Z,{disableRipple:!0,onClick:l,children:(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)((0,i.Z)({},qP.iconButtonContainer),qP.iconButtonContainerWithPadding),d),children:[(0,f.jsx)(bi.Z,{}),(0,f.jsx)(vi.Z,{style:qP.headerText,translate:"no",children:(0,f.jsx)(c.Trans,{id:"Quit tutorial"})})]})}),s&&(0,f.jsx)(vi.Z,{variant:"body2",style:(0,i.Z)((0,i.Z)({},qP.headerContentPreview),Do.t),translate:"no",children:s}),r?(0,f.jsx)(Zr.Z,{disableRipple:!0,onClick:a,children:(0,f.jsx)("span",{style:(0,i.Z)((0,i.Z)({},qP.iconButtonContainer),d),children:s?(0,f.jsx)(Re,{}):(0,f.jsx)(Be.Z,{})})}):null]})]})},QP=function(e){var t=e.anchorElement,n=e.tooltip,r=e.showQuitButton,o=e.buttonLabel,s=e.progress,l=e.endTutorial,c=e.goToNextStep,d="small"===(0,T.L)(),p=u.useContext(m.Z).palette.type,h=u.useState(!1),g=(0,a.Z)(h,2),x=g[0],v=g[1],b=u.useState(!1),j=(0,a.Z)(b,2),C=j[0],y=j[1],Z=u.useCallback((function(e){v(e[0].isIntersecting)}),[]),k=((n.title||"")+(n.description||"")).replace(/\(.+\)/g,"");u.useEffect((function(){y(!1)}),[k]),fl(t,Z);var w=u.useRef(null),E=XP(),S=d&&n.mobilePlacement?n.mobilePlacement:n.placement||"bottom",P="light"===p?"#EBEBED":"#FAFAFA";return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Jc.Z,{id:"in-app-tutorial-tooltip-displayer",open:x,className:E.popper,anchorEl:t,transition:!0,placement:S,popperOptions:{modifiers:{arrow:{enabled:!0,element:"#arrow-popper"},offset:{enabled:!0,offset:"0,10"},preventOverflow:{enabled:!0,boundariesElement:document.querySelector(".main-frame")}}},style:{zIndex:LP(t),maxWidth:"min(90%, 300px)",width:d?"100%":void 0},children:function(e){var t=e.TransitionProps;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(UP.Z,(0,i.Z)((0,i.Z)({},t),{},{timeout:{enter:350,exit:0},children:(0,f.jsxs)(NP.Z,{style:(0,i.Z)((0,i.Z)({},qP.paper),{},{backgroundColor:P}),elevation:4,children:[(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(KP,{paletteType:p,showFoldButton:!!n.standalone,showQuitButton:r,progress:s,tooltipContent:C?n.title||n.description:void 0,onClickFoldButton:function(){return y(!C)},endTutorial:l}),!C&&(0,f.jsx)(JP,{tooltip:n,buttonLabel:o,goToNextStep:c})]}),(0,f.jsx)("span",{id:"arrow-popper",className:E.arrow,ref:w,style:{color:P}})]})}))})}})})},$P={avatarContainer:{position:"absolute",left:20,bottom:20,zIndex:Ph.BI,display:"flex",visibility:"hidden",boxShadow:"0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%)",borderRadius:30},link:{cursor:"pointer"},avatarImage:{cursor:"pointer"}};var eI=function(e){var t=e.step,n=t.elementToHighlightId,r=t.tooltip,o=t.nextStepTrigger,s=t.isOnClosableDialog,l=t.dialog,d=e.expectedEditor,p=e.goToFallbackStep,h=e.endTutorial,g=e.progress,m=e.goToNextStep,x=u.useState(null),v=(0,a.Z)(x,2),b=v[0],j=v[1],C=u.useState(!1),y=(0,a.Z)(C,2),Z=y[0],k=y[1],w=u.useState(null),T=(0,a.Z)(w,2),E=T[0],S=T[1],P=u.useCallback((function(e){e&&S(e)}),[]),I=u.useCallback((function(){n&&j(function(e){var t=document.querySelector(e);if(t instanceof HTMLTextAreaElement){var n=t.closest("div");n instanceof HTMLElement&&(0,Ph.h$)(n)&&(t=n)}else if(t instanceof HTMLInputElement&&"searchBar"in t.dataset){var r=t.closest("div[data-search-bar-container]");r instanceof HTMLElement&&(t=r)}return t}(n))}),[n]);(0,Pa.Y)(I,500);var D=u.useCallback((function(){if(b){k(!1);var e=function(e){for(var t=DP(e,[]),n=t.length-1;n>=0;n--){var r=t[n];if((0,Ph.yP)(r))return r}return null}(b);e&&function(e){for(var t=e.nextElementSibling;t;){if((0,Ph.yP)(t,{isVisible:!0}))return!0;t=t.nextElementSibling}return!1}(e)&&k(!0)}}),[b]);(0,Pa.Y)(D,1e3),u.useEffect((function(){j(null),k(!1)}),[n]),u.useEffect((function(){if(n&&!b&&!d){var e=setTimeout(p,1e3);return function(){return clearTimeout(e)}}}),[n,b,p,d]);var A=function(){if(!b&&!d||Z)return null;if(d){var e=document.querySelector(cI({editor:d.editor,sceneName:d.scene}));return e?(0,f.jsx)(_P,{element:e}):null}return b?(0,f.jsx)(_P,{element:b}):null},L=function(e){if(r&&!d){var t=r.standalone?E:b||null;return t?(0,f.jsx)(QP,{endTutorial:h,showQuitButton:!s,anchorElement:t,tooltip:r,progress:g,goToNextStep:m,buttonLabel:o&&o.clickOnTooltipButton?o.clickOnTooltipButton:void 0}):null}var n=function(e,t){if(!t)return null;var n="Scene"===t.editor?e._({id:"the scene editor"}):"Home"===t.editor?e._({id:"the home page"}):e._({id:"the events sheet"}),r=t.scene?' for scene "'.concat(t.scene,'"'):"";return{title:e._({id:"You're leaving the game tutorial"}),placement:"top",description:e._({id:"Go back to {translatedExpectedEditor}{sceneMention} to keep creating your game.",values:{translatedExpectedEditor:n,sceneMention:r}}),standalone:!0}}(e,d);return n&&E?(0,f.jsx)(QP,{endTutorial:h,showQuitButton:!s,anchorElement:E,tooltip:n,progress:g,goToNextStep:m}):null};return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n,n=d||r&&r.standalone;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},$P.avatarContainer),{},{visibility:n?"visible":"hidden"}),ref:P,id:"in-app-tutorial-avatar",children:(0,f.jsx)("img",{alt:"SpeXEngine mascot red hero",src:"res/hero60.png",width:60,height:60,style:$P.avatarImage})}),A(),L(t),l?(0,f.jsx)(PP,{dialogContent:l,goToNextStep:m,endTutorial:h}):null]})}})},tI="instancesCount:",nI="objectInObjectsList:",rI="sceneInProjectManager:",oI="objectInObjectOrResourceSelector:",iI="editorTab:",aI=function(e){return e.map((function(t,n){return 0===n?0:e[n-1]+1}))},sI=function(e){var t=e.text,n=e.data,r=e.i18n,o=e.project;if(t)return function(e,t,n){var r=e.matchAll(/\$\(([\w:]+)\)/g),o=e;return(0,j.Z)(r).forEach((function(e){var r,i=e[0],a=e[1];if(a.startsWith(tI)){var s=a.split(":")[1],l=t[s];if(l&&n&&n.getLayoutsCount()>0){var c=n.getLayoutAt(0);r=gj(c.getInitialInstances(),l).toString()}}!r&&Object.keys(t).includes(a)&&(r=t[a]),r&&(o=o.replace(i,r))})),o}(t.messageByLocale?iE(r,t.messageByLocale):r._(t.messageDescriptor,n),n,o)},lI=function(e,t){return e?(0,i.Z)((0,i.Z)({},e),{},{scene:e.scene?t[e.scene]:void 0}):null},cI=function(e){var t=e.editor,n=e.sceneName;if("Home"===t)return'button[id="tab-start-page-button"]';var r=n?'[data-scene="'.concat(n,'"]'):"";return'button[id^="tab"][data-type="'.concat("Scene"===t?"layout":"layout-events",'"]').concat(r)},uI=function(e,t){if(e.startsWith(iI)){var n=e.split(":"),r=n[1],o=n[2];if(!o)throw new Error('There might be missing a ":" in the element id '.concat(e));return cI({editor:o,sceneName:t[r]})}if(e.startsWith(nI)){var i=e.split(":")[1];return'#scene-editor[data-active] #objects-list div[data-object-name="'.concat(t[i],'"]')}if(e.startsWith(rI)){var a=e.split(":")[1];return'div[role="presentation"][data-open="true"] #project-manager [id^="scene-item"][data-scene="'.concat(t[a],'"]')}if(e.startsWith(oI)){var s=e.split(":")[1];return'#instruction-or-object-selector div[data-object-name="'.concat(t[s],'"]')}return e},dI=function(e,t){return!!e&&(!(!e.presenceOfElement||!document.querySelector(uI(e.presenceOfElement,t)))||(!(!e.absenceOfElement||document.querySelector(uI(e.absenceOfElement,t)))||!(!e.editorIsActive||!document.querySelector(function(e,t){var n=e.split(":"),r=(0,a.Z)(n,2),o=r[0],i=r[1];if(!i)throw new Error('There might be missing a ":" in the trigger '.concat(e));if("Home"===i)return'button[id="tab-start-page-button"][data-active="true"]';var s=o?'[data-scene="'.concat(t[o],'"]'):"";return'button[id^="tab"][data-active="true"][data-type="'.concat("Scene"===i?"layout":"layout-events",'"]').concat(s)}(e.editorIsActive,t)))))},pI=function(e){return(0,Ph.NL)(e)?(0,Ph.Rz)(e):"TEXTAREA"===e.tagName?e.textContent:e.value},hI=u.forwardRef((function(e,t){var n=e.tutorial,r=e.endTutorial,o=e.project,s=e.currentEditor,l=e.currentSceneName,d=e.startStepIndex,p=e.startProjectData,h=(0,_t.Z)(),g=u.useState(!1),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=u.useState(d),j=(0,a.Z)(b,2),C=j[0],y=j[1],Z=u.useState(null),k=(0,a.Z)(Z,2),w=k[0],T=k[1],E=u.useState(p),S=(0,a.Z)(E,2),P=S[0],I=S[1],D=u.useState(!1),A=(0,a.Z)(D,2),L=A[0],M=A[1],F=u.useRef(0),O=u.useState(null),R=(0,a.Z)(O,2),B=R[0],_=R[1],N=u.useState(null),U=(0,a.Z)(N,2),H=U[0],V=U[1],W=u.useRef(null),z=u.useState(null),G=(0,a.Z)(z,2),Y=G[0],q=G[1],J=u.useRef(null),K=u.useState(null),Q=(0,a.Z)(K,2),$=Q[0],ee=Q[1],te=u.useRef(null),ne=u.useState(!1),re=(0,a.Z)(ne,2),oe=re[0],ie=re[1],ae=u.useContext(X.ZP),se=u.useContext(ir.ZP),le=n.flow,ce=n.endDialog,ue=n.editorSwitches,de=n.id,pe=le.length,he=le[C],fe=u.useCallback((function(e){y(e),(0,Nr.xN)({tutorialId:de,step:e,isCompleted:e>=pe-1})}),[de,pe]);u.useEffect((function(){fe(d);for(var e=d;e>=0;e--)if(!n.flow[e].isOnClosableDialog){F.current=e;break}for(var t={editor:"Home"},r=d;r>=0;r--)if(n.flow[r].id&&n.editorSwitches.hasOwnProperty(n.flow[r].id)){t=n.editorSwitches[n.flow[r].id];break}_(t)}),[n,fe,d]);var ge=u.useCallback((function(e){if(e>=pe)M(!0);else{for(var t=e;t<pe-1&&le[t]&&(le[t].deprecated||le[t].skippable&&dI(le[t].nextStepTrigger,P));)t+=1;fe(t)}}),[le,fe,pe,P]);u.useEffect((function(){for(var e=[],t=0;t<n.flow.length;t++)n.flow[t].isCheckpoint&&e.push(t);e.push(n.flow.length-1),T(e)}),[n.flow]);var me=u.useCallback((function(){if(!w)return[0];var e=aI(w);return w.map((function(t,n){if(C>=t)return 100;var r=e[n];return C<r?0:Math.floor((C-r)/(t-r)*100)}))}),[C,w]),xe=function(){return{step:C,progress:me(),projectData:P}},ve=u.useCallback((function(){for(var e=C;le[e].skippable;)e+=1;for(var t=null,n=e;n>=C;n--){if(dI(le[n].nextStepTrigger,P)){t=n+1;break}}if(null===t){var r=le[C].shortcuts;if(!r)return;var s,l=(0,an.Z)(r);try{var c=function(){var e=s.value;if(dI(e.trigger,P))return(t=le.findIndex((function(t){return t.id===e.stepId})))<0?(console.warn("Step with id ".concat(e.stepId," could not be found. Shortcut not taken.")),{v:void 0}):"break"};for(l.s();!(s=l.n()).done;){var u=c();if("break"===u)break;if("object"===typeof u)return u.v}}catch(p){l.e(p)}finally{l.f()}if(null==t)return}var d=function(e){var t=e.flow,n=e.startIndex,r=e.endIndex,o=e.data,s=e.project;if(!s)return o;for(var l=(0,i.Z)({},o),c=function(e){var n=t[e].mapProjectData;n&&Object.entries(n).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];if("projectLastSceneName"===i){if(!s)return;if(0===s.getLayoutsCount())throw new Error("No layout was found in project after step ".concat(e," of flow"));l[r]=s.getLayoutAt(s.getLayoutsCount()-1).getName()}else if(i.startsWith("sceneLastObjectName")){if(!s||0===s.getLayoutsCount())return;var c=i.split(":")[1],u=c?o[c]:void 0,d=u&&s.hasLayoutNamed(u)?s.getLayout(u):s.getLayoutAt(0);if(0===d.getObjectsCount())throw new Error("No object was found in layout after step ".concat(e," of flow"));l[r]=d.getObjectAt(d.getObjectsCount()-1).getName()}}))},u=n;u<=r;u++)c(u);return l}({flow:le,startIndex:C,endIndex:t-1,data:P,project:o});I(d),ge(t)}),[C,o,ge,P,le]),be=(0,zs.N)(ve,200),je=u.useCallback((function(){ge(C+1)}),[C,ge]),Ce=function(e,t){var n=null;Object.entries(P).forEach((function(t){var r=(0,a.Z)(t,2),o=r[0];r[1]!==e||(n=o)})),n&&(P[n]=t)};u.useImperativeHandle(t,(function(){return{onPreviewLaunch:ye,getProgress:xe,changeData:Ce}}));var ye=u.useCallback((function(){if(he){var e=he.nextStepTrigger;e&&e.previewLaunched&&je()}}),[je,he]);u.useEffect((function(){var e=document.querySelector("body");if(e){var t=new MutationObserver(be);return t.observe(e,{childList:!0,attributes:!1,subtree:!0,characterData:!0}),te.current=t,function(){te.current&&(te.current.disconnect(),te.current=null)}}}),[be]),u.useEffect((function(){if(he){var e=he.id,t=he.isOnClosableDialog;e&&ue.hasOwnProperty(e)&&_(ue[e]),t||(F.current=C),V(null),q(null),ee(null),ie(!1),C>=pe&&M(!0)}}),[he,C,pe,ue]),u.useEffect((function(){if(he){var e=he.nextStepTrigger,t=he.elementToHighlightId;if(e&&e.valueEquals){if(!t)return;J.current=e.valueEquals,q(t)}else if(e&&e.valueHasChanged){if(!t)return;var n=document.querySelector(t);n&&(W.current=pI(n)),V(t)}else if(e&&e.instanceAddedOnScene){var r=e.instanceAddedOnScene.split(":"),o=(0,a.Z)(r,2),i=o[0],s=o[1],l=P[i];if(!l)return;var c=s?P[s]:void 0;ee({objectName:l,sceneName:c,count:e.instancesCount})}}}),[he,P]),u.useEffect((function(){if(he){var e=he.tooltip;e&&[e.description,e.title].some((function(e){return!!(t=e)&&(t.messageByLocale?Object.values(t.messageByLocale).some((function(e){return e.includes("$(".concat(tI))})):"string"===typeof t.messageDescriptor&&t.messageDescriptor.includes("$(".concat(tI))||"object"===typeof t.messageDescriptor&&Object.values(t.messageDescriptor).some((function(e){return"string"===typeof e&&e.includes("$(".concat(tI))})));var t}))&&ie(!0)}}),[he]);var Ze=u.useCallback((function(){if(H){var e=document.querySelector(H),t=W.current;e&&pI(e)!==t&&je()}}),[je,H]),ke=u.useCallback((function(){if(Y){var e=document.querySelector(Y),t=J.current;t&&e&&pI(e).replace(/\s/g,"")===t.replace(/\s/g,"")&&je()}}),[je,Y]),we=u.useCallback((function(){if($&&o&&0!==o.getLayoutsCount()){var e=$.objectName,t=$.sceneName,n=$.count,r=t&&o.hasLayoutNamed(t)?o.getLayout(t):o.getLayoutAt(0);if(n)gj(r.getInitialInstances(),e)>=n&&je();else r.getInitialInstances().hasInstancesOfObject(e)&&je()}}),[o,je,$]);(0,Pa.Y)(h,oe?500:null),(0,Pa.Y)(Ze,H?1e3:null),(0,Pa.Y)(ke,Y?1e3:null),(0,Pa.Y)(we,$?500:null),(0,Pa.Y)(ve,he&&he.isTriggerFlickering?500:null);var Te=u.useMemo((function(){return(0,Sw.d1)(n.id)}),[n.id]),Ee="touch"===(0,eo.BF)(),Se=function(e){if(!he)return null;var t,n,a=he.tooltip;if(a){var s=sI({text:a.title,data:P,i18n:e,project:o}),l=sI({text:Ee&&a.touchDescription?a.touchDescription:a.description,data:P,i18n:e,project:o});t=(0,i.Z)((0,i.Z)({},a),{},{title:s,description:l})}var c=he.nextStepTrigger;if(c&&c.clickOnTooltipButton){var u=sI({text:c.clickOnTooltipButton,data:P,i18n:e,project:o});n=u?{clickOnTooltipButton:u}:void 0}var d=(0,i.Z)((0,i.Z)({},he),{},{tooltip:t,nextStepTrigger:n});he.elementToHighlightId&&(d.elementToHighlightId=uI(he.elementToHighlightId,P));var p=0;if(w){var h=aI(w);p=w.map((function(e,t){return C<=e&&C>=h[t]})).indexOf(!0)}return(0,f.jsx)(eI,{step:d,expectedEditor:x?lI(B,P):null,goToFallbackStep:function(){fe(F.current)},endTutorial:function(){return r({shouldCloseProject:!Te,shouldWarnAboutUnsavedChanges:!Te})},progress:me()[p],goToNextStep:je})},Pe=(0,zs.N)((function(){v(!!B&&(B.editor!==s||!!B.scene&&P[B.scene]!==l))}),x?0:1e3);return u.useEffect((function(){Pe()}),[Pe,s,l]),(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[Se(t),L&&(0,f.jsx)(PP,{isLastStep:!0,dialogContent:ce,endTutorial:function(){M(!1),Te&&ae.saveTutorialProgress((0,i.Z)({tutorialId:n.id,userId:se.profile?se.profile.id:void 0},xe())),r({shouldCloseProject:!1,shouldWarnAboutUnsavedChanges:!Te})}})]})}})})),fI=hI,gI=function(e){var t=e.editorTabs,n=u.useState(null),r=(0,a.Z)(n,2),o=r[0],i=r[1],s=u.useState(null),l=(0,a.Z)(s,2),c=l[0],d=l[1];return u.useEffect((function(){var e=tw(t);if(e){var n=e.key.startsWith("start page")?"Home":e.key.startsWith("layout event")?"EventsSheet":e.key.startsWith("external events")?"ExternalEvents":e.key.startsWith("external layout")?"ExternalLayout":e.key.startsWith("events functions extension")?"Extension":e.key.startsWith("resources")?"Resources":"Scene";i(n),e.key.startsWith("layout")&&e.projectItemName&&d(e.projectItemName)}else i(null)}),[t]),{InAppTutorialOrchestrator:fI,orchestratorProps:{currentEditor:o,currentSceneName:c}}},mI=u.memo((function(e){return(0,f.jsxs)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H5C4.58579 7.75 4.25 7.41421 4.25 7C4.25 6.58579 4.58579 6.25 5 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 17C21.75 17.4142 21.4142 17.75 21 17.75H5C4.58579 17.75 4.25 17.4142 4.25 17C4.25 16.5858 4.58579 16.25 5 16.25H21C21.4142 16.25 21.75 16.5858 21.75 17Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.5858 4.58579 11.25 5 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12Z",fill:"currentColor"})]}))})),xI=q()("electron"),vI="title-bar-draggable-part",bI={container:{display:"flex",flexShrink:0,alignItems:"flex-end"},leftSideArea:{alignSelf:"stretch"},rightSideArea:{alignSelf:"stretch",flex:1},menuIcon:{marginLeft:4,marginRight:4}};function jI(e){var t=e.children,n=e.onBuildMenuTemplate,r=(0,_t.Z)(),o=u.useContext(m.Z).titlebar.backgroundColor;u.useEffect((function(){F.ZP.setTitleBarColor(o)}),[o]),(0,F.C)({onChanged:r});var a=!!xI&&(0,Zi.z1)()?76:0,s=!!xI&&!(0,Zi.z1)()?150:0,l=navigator.windowControlsOverlay;if(l&&l.visible){var c=l.getTitlebarAreaRect(),d=c.x,p=c.width;a=d,s=window.innerWidth-d-p}return(0,f.jsxs)("div",{style:(0,i.Z)((0,i.Z)({},bI.container),{},{backgroundColor:o}),children:[(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},bI.leftSideArea),{},{width:a}),className:vI}),(0,f.jsx)(Ie.Z,{element:(0,f.jsx)(A.Z,{size:"small",id:"gdevelop-main-menu",style:bI.menuIcon,color:"default",children:(0,f.jsx)(mI,{})}),buildMenuTemplate:n}),t,(0,f.jsx)("div",{style:(0,i.Z)((0,i.Z)({},bI.rightSideArea),{},{minWidth:s+30}),className:vI})]})}function CI(e){var t=u.useRef(e);return u.useEffect((function(){t.current=e}),[e]),t}n(51497);var yI={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},ZI=function(e){var t=e.clientOffset,n=e.previewPosition,r=e.screenType;if(!t)return{display:"none"};var o=t.x,i=t.y,a="touch"===r?80:48,s="center"===n?i-a/2:i-16,l="translate(".concat("center"===n?o-a/2:o+16,"px, ").concat(s,"px)");return{transform:l,WebkitTransform:l}},kI=(0,lh.DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}}))((function(e){var t=e.item,n=(e.itemType,e.isDragging),r=(e.initialOffset,e.currentOffset,e.clientOffset),o=(0,eo.BF)(),i=u.useMemo((function(){if(!t||!r)return null;if(function(e){var t=e.x,n=e.y,r=document.querySelector("#scene-editor[data-active=true] #".concat(nZ));if(r){var o=r.getBoundingClientRect();if(t>=o.left&&t<=o.right&&n>=o.top&&n<=o.bottom)return!0}return!1}(r))return null;var e="touch"===o?80:48;return t.thumbnail?(0,f.jsx)(jf.W,{alt:t.name,src:t.thumbnail,style:{maxWidth:e,maxHeight:e}}):(0,f.jsx)(J.Z,{children:t.name})}),[t,r,o]);return n?(0,f.jsx)("div",{style:yI,children:(0,f.jsx)("div",{style:ZI({clientOffset:r,previewPosition:t&&!t.thumbnail?"aboveRight":"center",screenType:o}),children:i})}):null})),wI=function(e){var t=e.cloudProjectId,n=e.onClose,r=e.onOpenPreviousVersion,i=u.useContext(ir.ZP),s=i.profile,d=u.useState(null),p=(0,a.Z)(d,2),h=p[0],g=p[1],m=u.useState(!1),x=(0,a.Z)(m,2),v=x[0],b=x[1],j=u.useState(!1),C=(0,a.Z)(j,2),y=C[0],Z=C[1],k=u.useState(!0),w=(0,a.Z)(k,2),T=w[0],E=w[1];u.useEffect((function(){t&&s&&s.id&&(0,Nr.eN)({cloudProjectId:t,userId:s.id})}),[t,s]),u.useEffect((function(){var e,n=function(){var e=(0,o.Z)(l().mark((function e(){var n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Gw.MH)(i,t);case 2:if(n=e.sent){e.next=5;break}throw new Error("We couldn't get the project last versions.");case 5:r=1;case 6:if(!(r<n.length)){e.next=17;break}return o=n[r],e.next=10,(0,Gw.Rn)(i,t,o.id);case 10:if(!e.sent){e.next=14;break}return g(o),e.abrupt("return");case 14:r++,e.next=6;break;case 17:Z(!0);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(t){return new Promise((function(n){e=setTimeout((function(){n()}),t)}))},a=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n(),r(15e3)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),b(!0);case 8:return e.prev=8,E(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,5,8,11]])})));return function(){return e.apply(this,arguments)}}();return a(),function(){return clearTimeout(e)}}),[t,i]);var S=v||y?[(0,f.jsx)(V.vF,{label:(0,f.jsx)(c.Trans,{id:"Close"}),onClick:n},"close")]:T?[]:h?[(0,f.jsx)(_.Z,{label:(0,f.jsx)(c.Trans,{id:"Cancel"}),onClick:n},"cancel"),(0,f.jsx)(V.vF,{primary:!0,label:(0,f.jsx)(c.Trans,{id:"Accept"}),onClick:function(){return r(h.id)}},"restore")]:[],P=v||y?n:T?void 0:h?function(){return r(h.id)}:void 0,I=i.cloudProjects?i.cloudProjects.find((function(e){return e.id===t})):null,D=I?I.name:null;return(0,f.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(V.ZP,{open:!0,flexColumnBody:!0,maxWidth:"sm",onRequestClose:n,onApply:P,actions:S,title:h&&!T?(0,f.jsx)(c.Trans,{id:"A functioning save has been found!"}):(0,f.jsx)(c.Trans,{id:"This file is corrupt"}),children:v?(0,f.jsx)(we.Z,{kind:"error",children:(0,f.jsx)(c.Trans,{id:"An error occurred while trying to recover your project last versions. Please try again later."})}):T?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:D?(0,f.jsx)(c.Trans,{id:'The latest save of "{cloudProjectName}" is corrupt and cannot be opened.',values:{cloudProjectName:D}}):(0,f.jsx)(c.Trans,{id:"The latest save of this project is corrupt and cannot be opened."})}),(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Please wait while we scan your project to find a solution."})})]})}),(0,f.jsx)(L.x1,{justifyContent:"center",children:(0,f.jsx)(pi.Z,{})})]}):y?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(L.x1,{children:(0,f.jsxs)(L.sg,{noMargin:!0,children:[(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"We couldn't find a version to go back to."})}),(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"Please get in touch with us to find a solution."})})]})})}):h?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(L.x1,{children:(0,f.jsx)(L.sg,{noMargin:!0,children:(0,f.jsx)(J.Z,{noMargin:!0,children:(0,f.jsx)(c.Trans,{id:"We have found a non-corrupt save from {0} available for modification.",values:{0:t.date(h.createdAt,{dateStyle:"long",timeStyle:"short"})}})})})}),(0,f.jsx)(L.x1,{children:(0,f.jsx)(J.Z,{children:(0,f.jsx)(c.Trans,{id:"Would you like to open the non-corrupt version instead?"})})})]}):null})}})},TI=function(e){var t=e.onClose,n=e.isLoading,r=e.onSaveAsDuplicate,o=e.onSaveAsMainVersion,i=[(0,f.jsx)(_.Z,{disabled:n,label:(0,f.jsx)(c.Trans,{id:"Save as..."}),onClick:r},"save-copy"),(0,f.jsx)(Mr.Z,{isLoading:n,children:(0,f.jsx)(V.vF,{primary:!0,disabled:n,label:(0,f.jsx)(c.Trans,{id:"Save as main version"}),onClick:o})},"save-main")];return(0,f.jsx)(V.ZP,{open:!0,flexColumnBody:!0,cannotBeDismissed:n,maxWidth:"sm",onRequestClose:t,onApply:o,actions:i,title:(0,f.jsx)(c.Trans,{id:"What would you like to do with this uncorrupted version of your project?"}),children:(0,f.jsx)(L.x1,{})})},EI=function(e){var t=e.beforeCreatingProject,n=e.afterCreatingProject,r=e.onSuccessOrError,a=e.onError,s=e.getStorageProviderOperations,c=e.loadFromProject,d=e.openFromFileMetadata,p=e.resourceMover,h=e.onProjectSaved,f=u.useContext(ir.ZP),g=u.useContext(O.Z),m=u.useContext(X.ZP),x=wP({resourceMover:p}).ensureResourcesAreMoved,v=(0,ft.Z)().showAlert,b=u.useContext(to.Z).getInAppTutorialShortHeader,j=function(e,t){e.resetProjectUuid(),e.setVersion("1.0.0"),e.getAuthorIds().clear(),e.setAuthor(""),t.templateSlug&&e.setTemplateSlug(t.templateSlug),t.width&&t.height&&e.setGameResolutionSize(t.width,t.height),t.orientation&&e.setOrientation(t.orientation),t.optimizeForPixelArt&&(e.setPixelsRounding(!0),e.setScaleMode("nearest")),t.projectName&&e.setName(t.projectName||"New game")},C=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t,i){var u,p,b,C,y,Z,k,w,T,E,S,P,I,D,A;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,p=t.storageProvider,b=p?s(t.storageProvider):null,!t.project){e.next=11;break}return e.next=8,c(t.project,null);case 8:u=e.sent,e.next=15;break;case 11:if(!t.fileMetadata||!p){e.next=15;break}return e.next=14,d(t.fileMetadata);case 14:u=e.sent;case 15:if(u){e.next=17;break}throw new Error("Neither a project nor a file metadata to load was provided for the new project");case 17:if(y=(C=u).currentProject,Z=C.editorTabs,y){e.next=20;break}throw new Error("The new project could not be opened.");case 20:if(k=y.getProjectUuid(),j(y,i),!f.profile){e.next=31;break}return e.prev=23,e.next=26,(0,qi.r$)(f.getAuthorizationHeader,f.profile.id,{gameId:y.getProjectUuid(),authorName:y.getAuthor()||"Unspecified publisher",gameName:y.getName()||"Untitled game",templateSlug:y.getTemplateSlug()});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(23),console.error("Unable to register the game to the user profile, the game will not be listed in the user profile.",e.t0);case 31:if(w=s(i.storageProvider),!(T=w.onSaveProjectAs)){e.next=40;break}return e.next=36,T(y,i.saveAsLocation,{onStartSaving:function(){console.log("Start saving as the new project...")},onMoveResources:function(){var e=(0,o.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.newFileMetadata,p&&b&&t.fileMetadata){e.next=4;break}return console.log("No storage provider set or no previous FileMetadata (probably creating a blank project) - skipping resources copy."),e.abrupt("return");case 4:return e.next=6,x({project:y,newFileMetadata:r,newStorageProvider:i.storageProvider,newStorageProviderOperations:w,oldFileMetadata:t.fileMetadata,oldStorageProvider:p,oldStorageProviderOperations:b,authenticatedUser:f});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 36:E=e.sent,S=E.wasSaved,P=E.fileMetadata,S&&(h(P),g.sealUnsavedChanges(),"LocalFile"===i.storageProvider.internalName&&m.setHasProjectOpened(!0));case 40:return e.next=42,n({project:y,editorTabs:Z,oldProjectId:k});case 42:e.next=50;break;case 44:e.prev=44,e.t1=e.catch(2),I=s(),D=I.getWriteErrorMessage,A=D?D(e.t1):{id:"An error occurred when opening or saving the project. Try again later or choose another location to save the project to."},v({title:{id:"Unable to create the project"},message:A}),a();case 50:return e.prev=50,r(),e.finish(50);case 53:case"end":return e.stop()}}),e,null,[[2,44,50,53],[23,28]])})));return function(t,n){return e.apply(this,arguments)}}(),[f,s,c,a,h,d,m,v,n,x,r,g]),y=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),r=oS(),e.next=4,C(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,C]),Z=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n,r,o){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,aS({i18n:o,exampleShortHeader:n});case 3:return a=e.sent,e.next=6,C(a,(0,i.Z)((0,i.Z)({},r),{},{templateSlug:n.slug}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,C]),k=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n,r){var o,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),o=b(n),i=o&&o.initialTemplateUrl){e.next=5;break}throw new Error('No initial template URL for the in-app tutorial "'.concat(n,'"'));case 5:return e.next=7,s=i,(0,Nr.tP)({exampleUrl:s,exampleSlug:"tutorial-template"}),rS(s);case 7:return a=e.sent,e.next=10,C(a,r);case 10:case"end":return e.stop()}var s}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,C,b]),w=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),r=iS(),e.next=4,C(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,C]),T=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(n,r){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),i=n,(0,Nr.tP)({exampleUrl:i,exampleSlug:"generated-project"}),o=rS(i),e.next=4,C(o,r);case 4:case"end":return e.stop()}var i}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,C]);return{createEmptyProject:y,createProjectFromExample:Z,createProjectFromInAppTutorial:k,createProjectWithLogin:w,createProjectFromAIGeneration:T}},SI=n(93849),PI=n.g.GD_STARTUP_TIMES||[],II=n.g.gd,DI={drawerContent:{width:320,overflowX:"hidden",display:"flex",flexDirection:"column"}},AI=3e3,LI=function(e,t,n){var r=n.storageProviderName,o=t.filter((function(e){return e.internalName===r}))[0];if(o)return o;(0,Xr.gR)({message:e._({id:"Unable to open the project because this provider is unknown: {storageProviderName}. Try to open the project again from another location.",values:{storageProviderName:r}}),rawError:new Error("Can't find storage provider called \"".concat(r,'"')),errorId:"unknown-storage-provider"})},MI=function(e,t){return e.current&&t.ptr===e.current.ptr},FI={previewLayoutName:null,previewExternalLayoutName:null,isPreviewOverriden:!1,overridenPreviewLayoutName:null,overridenPreviewExternalLayoutName:null},OI=function(e){var t=function(e){var t=u.useState(e),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=u.useRef(null),s=u.useCallback((function(e){return new Promise((function(t){i.current=t,o(e)}))}),[o]);return u.useEffect((function(){null!==i.current&&(i.current(r),i.current=null)}),[r]),[r,s]}({createDialogOpen:!1,currentProject:null,currentFileMetadata:null,editorTabs:{editors:[],currentTab:0},snackMessage:"",snackMessageOpen:!1,snackDuration:AI,updateStatus:{message:"",status:"unknown"},openFromStorageProviderDialogOpen:!1,saveToStorageProviderDialogOpen:!1,eventsFunctionsExtensionsError:null,gdjsDevelopmentWatcherEnabled:!1,initialExampleShortHeader:null}),n=(0,a.Z)(t,2),s=n[0],h=n[1],m=u.useRef(null),x=u.useContext(ir.ZP),v=u.useState(null),b=(0,a.Z)(v,2),C=b[0],y=b[1],Z=u.useState(null),k=(0,a.Z)(Z,2),w=k[0],T=k[1],E=u.useState(!1),S=(0,a.Z)(E,2),P=S[0],I=S[1],D=u.useState(null),A=(0,a.Z)(D,2),L=A[0],B=A[1],_=u.useState(null),N=(0,a.Z)(_,2),U=N[0],H=N[1],V=u.useRef(null),W=(0,_t.Z)(),z=u.useState(!1),G=(0,a.Z)(z,2),Y=G[0],q=G[1],J=u.useState(!1),K=(0,a.Z)(J,2),Q=K[0],ee=K[1],te=u.useState(!1),ne=(0,a.Z)(te,2),re=ne[0],oe=ne[1],ie=u.useState(!1),ae=(0,a.Z)(ie,2),se=ae[0],le=ae[1],ce=u.useState(!1),ue=(0,a.Z)(ce,2),de=ue[0],pe=ue[1],he=u.useState(!1),fe=(0,a.Z)(he,2),ge=fe[0],me=fe[1],xe=u.useState(!1),ve=(0,a.Z)(xe,2),be=ve[0],je=ve[1],Ce=u.useState(!1),ye=(0,a.Z)(Ce,2),Ze=ye[0],ke=ye[1],we=u.useState(!1),Te=(0,a.Z)(we,2),Se=Te[0],Pe=Te[1],Ie=u.useState(null),De=(0,a.Z)(Ie,2),Le=De[0],Me=De[1],Fe=u.useState(!1),Oe=(0,a.Z)(Fe,2),Re=Oe[0],Be=Oe[1],_e=u.useState(!1),Ne=(0,a.Z)(_e,2),Ue=Ne[0],He=Ne[1],Ve=u.useState(!1),We=(0,a.Z)(Ve,2),ze=We[0],Ge=We[1],Ye=(0,ft.Z)(),qe=Ye.showConfirmation,Xe=Ye.showAlert,Je=u.useContext(X.ZP),Qe=Je.setHasProjectOpened,$e=u.useState(!1),et=(0,a.Z)($e,2),tt=et[0],nt=et[1],rt=u.useState(FI),ot=(0,a.Z)(rt,2),it=ot[0],st=ot[1],lt=u.useRef(null),ct=u.useRef(null),ut=u.useContext(qr.Z),dt=V.current&&V.current.getPreviewDebuggerServer(),pt=function(e){var t=u.useState([]),n=(0,a.Z)(t,2),r=n[0],o=n[1],i=u.useState([]),s=(0,a.Z)(i,2),l=s[0],c=s[1];return u.useEffect((function(){if(e){var t=e.registerCallbacks({onErrorReceived:function(e){},onConnectionClosed:function(e){e.id;var t=e.debuggerIds;o((0,j.Z)(t))},onConnectionOpened:function(e){e.id;var t=e.debuggerIds;o((0,j.Z)(t))},onConnectionErrored:function(e){e.id},onServerStateChanged:function(){},onHandleParsedMessage:function(e){e.id;var t=e.parsedMessage;"hotReloader.logs"===t.command&&c(t.payload)}});return function(){t()}}o([])}),[e]),{previewDebuggerIds:r,hotReloadLogs:l,clearHotReloadLogs:u.useCallback((function(){return c([])}),[c])}}(dt),ht=pt.previewDebuggerIds,gt=pt.hotReloadLogs,mt=pt.clearHotReloadLogs,xt=!!ht.length,vt=function(){var e=u.useRef(!1),t=u.useRef(null),n=u.useState(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1];return{ensureInteractionHappened:function(n){return new Promise((function(r){!e.current&&n.doesInitialOpenRequireUserInteraction?(console.info("Displaying confirmation dialog to ensure an interaction is made before continuing."),t.current=r,i(!0)):r(!0)}))},renderOpenConfirmDialog:function(){if(!o)return null;var n=function(n){e.current=!0,i(!1);var r=t.current;r&&(r(n),t.current=null)};return(0,f.jsx)(gS,{onClose:function(){return n(!1)},onConfirm:function(){return n(!0)}})}}}(),bt=vt.ensureInteractionHappened,jt=vt.renderOpenConfirmDialog,Ct=function(){var e=u.useState(null),t=(0,a.Z)(e,2),n=t[0],r=t[1],i=u.useState(null),s=(0,a.Z)(i,2),c=s[0],d=s[1],p=u.useState(!1),h=(0,a.Z)(p,2),g=h[0],m=h[1],x=u.useState(null),v=(0,a.Z)(x,2),b=v[0],j=v[1],C=u.useContext(ir.ZP),y=u.useState([]),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=u.useState(0),E=(0,a.Z)(T,2),S=E[0],P=E[1],I=u.useState(null),D=(0,a.Z)(I,2),A=D[0],L=D[1],M=u.useState(null),F=(0,a.Z)(M,2),O=F[0],R=F[1],B=u.useCallback((0,o.Z)(l().mark((function e(){var t,r,i,a,s,u,d,p,h,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.getAuthorizationHeader,r=C.profile,b&&n&&c){e.next=3;break}throw new Error("No leaderboards found in events sheet.");case 3:if(r){e.next=5;break}throw new Error("User is not connected.");case 5:return i=b.length+2,a=1/i*100,s={},P(0),L(null),R(null),w([]),e.prev=12,e.next=15,(0,qi.r$)(t,r.id,{gameId:n.getProjectUuid(),authorName:n.getAuthor()||"Unspecified publisher",gameName:n.getName()||"Untitled game",templateSlug:n.getTemplateSlug()});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.error("Could not register game: ",e.t0);case 20:return P(a),u=function(){var e=(0,o.Z)(l().mark((function e(t,r){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Ta.vW)(t,n.getProjectUuid(),{sourceGameId:c,sourceLeaderboardId:r.replace(/"/g,"")});case 3:return o=e.sent,s[r]='"'.concat(o.id,'"'),P((function(e){return e+a})),e.abrupt("return",null);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Could not duplicate leaderboard ".concat(r),e.t0),P((function(e){return e+a})),e.abrupt("return",{leaderboardId:r,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),e.next=24,Promise.all(Array.from(b).map(function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u(C,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 24:if(d=e.sent,p=d.filter(Boolean),w(p),Object.keys(s).length&&(h=(0,US.R)(s),f=new HS.EventsLeaderboardsRenamer(n,h),h.delete(),HS.ProjectBrowserHelper.exposeProjectEvents(n,f),f.delete()),P(100),0!==p.length){e.next=33;break}return m(!1),j(null),e.abrupt("return",{someLeaderboardsWereDuplicated:!0});case 33:return e.abrupt("return",new Promise((function(e){L((function(){return function(){j(b.filter((function(e){return p.some((function(t){return t.leaderboardId===e}))}))),e(B())}})),R((function(){return function(){w([]),m(!1),j(null),e({someLeaderboardsWereDuplicated:!0})}}))})));case 34:case"end":return e.stop()}}),e,null,[[12,17]])}))),[C,c,b,n]),_=u.useCallback((function(e,t){r(e),d(t);var n=new HS.EventsLeaderboardsLister(e);HS.ProjectBrowserHelper.exposeProjectEvents(e,n);var o=n.getLeaderboardIds();j(o.toNewVectorString().toJSArray()),n.delete()}),[]);return{findLeaderboardsToReplace:_,renderLeaderboardReplacerDialog:function(){return b&&b.length?c&&n&&g&&C.authenticated?(0,f.jsx)(WS,{erroredLeaderboards:k,onRetry:A,onAbandon:O,progress:S}):(0,f.jsx)(VS,{leaderboardsToReplace:b,onClose:function(){return j(null)},onTriggerReplace:function(){m(!0),B()}}):null}}}(),yt=Ct.findLeaderboardsToReplace,Zt=Ct.renderLeaderboardReplacerDialog,kt=u.useContext(qr.Z),wt=u.useContext(O.Z),Tt=u.useContext(to.Z),Et=Tt.currentlyRunningInAppTutorial,St=Tt.getInAppTutorialShortHeader,Pt=Tt.endTutorial,It=Tt.startTutorial,Dt=Tt.startStepIndex,At=Tt.startProjectData,Lt=u.useState(null),Mt=(0,a.Z)(Lt,2),Ft=Mt[0],Ot=Mt[1],Rt=gI({editorTabs:s.editorTabs}),Bt=Rt.InAppTutorialOrchestrator,Nt=Rt.orchestratorProps,Ht=u.useState(!1),Vt=(0,a.Z)(Ht,2),Wt=Vt[0],zt=Vt[1],Gt=u.useState(null),Yt=(0,a.Z)(Gt,2),qt=Yt[0],Xt=Yt[1],Jt=u.useState(null),Kt=(0,a.Z)(Jt,2),Qt=Kt[0],$t=Kt[1],en=s.currentProject,tn=s.currentFileMetadata,nn=s.updateStatus,rn=s.eventsFunctionsExtensionsError,on=e.renderExportDialog,an=e.resourceSources,sn=e.renderPreviewLauncher,ln=e.resourceExternalEditors,cn=e.resourceMover,un=e.resourceFetcher,dn=e.getStorageProviderOperations,pn=e.getStorageProviderResourceOperations,hn=e.getStorageProvider,fn=e.initialFileMetadataToOpen,gn=e.i18n,mn=e.renderGDJSDevelopmentWatcher,xn=e.renderMainMenu,vn=wP({resourceMover:cn}),bn=vn.ensureResourcesAreMoved,jn=vn.renderResourceMoverDialog,Cn=function(e){var t=e.resourceFetcher,n=(0,kP.s)({onDoProcess:u.useCallback((function(e,n){var r=e(),o=r.project,i=r.fileMetadata,a=r.storageProvider,s=r.storageProviderOperations,l=r.authenticatedUser;return o&&i?t.fetchAllProjectResources({project:o,fileMetadata:i,storageProvider:a,storageProviderOperations:s,authenticatedUser:l,onProgress:n}):Promise.resolve({erroredResources:[]})}),[t])}),r=n.ensureProcessIsDone,o=n.renderProcessDialog;return u.useMemo((function(){return{ensureResourcesAreFetched:r,renderResourceFetcherDialog:o}}),[r,o])}({resourceFetcher:un}),yn=Cn.ensureResourcesAreFetched,Zn=Cn.renderResourceFetcherDialog,kn=CI(en),wn=CI(tn);u.useEffect((function(){cr(),PI.push(["MainFrameComponentDidMount",performance.now()]),Ln().then((function(){return h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{gdjsDevelopmentWatcherEnabled:!0})}))})).then(function(){var t=(0,o.Z)(l().mark((function t(n){var r,o,i,a,s,c,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(PI.push(["MainFrameComponentDidMountFinished",performance.now()]),console.info("Startup times:",cS()),r=Je.getAutoOpenMostRecentProject,o=Je.getRecentProjectFiles,i=Je.hadProjectOpenedDuringLastSession,!fn){t.next=11;break}return a=dn(),t.next=7,bt(a);case 7:t.sent&&In(),t.next=21;break;case 11:if(!(r()&&i()&&o()[0])){t.next=21;break}if(s=o()[0],c=LI(gn,e.storageProviders,s)){t.next=16;break}return t.abrupt("return");case 16:return u=dn(c),t.next=19,bt(u);case 19:t.sent&&Zr(s);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){}))}),[]),EP({openInAppTutorialDialog:function(e){Sw.W3.includes(e)&&Dr(e)},openProfileDialog:je});var Tn=u.useContext(ll.Z).navigateToRoute,En=u.useCallback((function(){h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{snackMessageOpen:!1,snackDuration:AI})}))}),[h]),Sn=u.useCallback((function(e,t){h((function(n){return(0,i.Z)((0,i.Z)({},n),{},{snackMessage:e,snackMessageOpen:!0,snackDuration:void 0!==t?t:AI})}))}),[h]),Pn=u.useCallback((function(e,t){En(),setTimeout((function(){return Sn(e,t)}),200)}),[En,Sn]),In=function(){var e=(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fn){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bn(fn);case 4:(t=e.sent)&&jr({currentProject:t.currentProject,editorTabs:t.editorTabs});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dn=u.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.editorTabs,t=tw(e);t&&t.editorRef?t.editorRef.updateToolbar():Yn(null)}),[s.editorTabs]);u.useEffect((function(){Dn()}),[Dn]);var An=function(){II.MeasurementUnit.applyTranslation(),II.JsPlatform.get().reloadBuiltinExtensions(),Ln().catch((function(){}))},Ln=function(){var t=e.extensionsLoader,n=e.i18n;return t?t.loadAllExtensions((0,$E.L)(n)).then((function(e){var t=e.filter((function(e){return!e.result.error})),n=e.filter((function(e){return e.result.error&&!e.result.dangerous})),r=e.filter((function(e){return e.result.error&&e.result.dangerous}));console.info("Loaded ".concat(t.length," JS extensions.")),n.length&&console.error("\u26a0\ufe0f Unable to load ".concat(n.length," JS extensions. Please check these errors:"),n),r.length&&console.error("\ud83d\udca3 Dangerous exceptions while loading ".concat(r.length," JS extensions. \ud83d\udd25 Please check these errors as they will CRASH SpeXEngine:"),r)})):(console.info("No extensions loader specified, skipping extensions loading."),Promise.reject(new Error("No extension loader specified.")))};MS(en);var Mn=u.useCallback((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qe(!1),st(FI),console.info("Closing project..."),He(!0),t=kn.current){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentProject:null,currentFileMetadata:null,editorTabs:nw(e.editorTabs,t)})}));case 9:return console.info("Deleting project from memory..."),kt.unloadProjectEventsFunctionsExtensions(t),e.next=13,kt.ensureLoadFinished();case 13:t.delete(),wt.hasUnsavedChanges&&wt.sealUnsavedChanges(),console.info("Project closed.");case 16:case"end":return e.stop()}}),e)}))),[kn,kt,Qe,h,wt]),Fn=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,o,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(r=hn(),o=dn(r),o.onSaveProject&&Je.insertRecentProjectFile({fileMetadata:(0,i.Z)((0,i.Z)({},n),{},{name:t.getName(),gameId:t.getProjectUuid()}),storageProviderName:r.internalName})),e.next=3,Mn();case 3:return ti.Z.burstAllUrlsCache(),e.next=6,h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentProject:t,currentFileMetadata:n,createDialogOpen:!1})}));case 6:if(a=e.sent,kt.loadProjectEventsFunctionsExtensions(t),!n){e.next=15;break}return t.setProjectFile(n.fileIdentifier),s=hn(),c=dn(s),e.next=14,yn((function(){return{project:t,fileMetadata:n,storageProvider:s,storageProviderOperations:c,authenticatedUser:x}}));case 14:He(!1);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[h,Mn,Je,kt,hn,dn,yn,x]),On=u.useCallback((function(e,t){var n=Date.now(),r=II.ProjectHelper.createNewGDJSProject();r.unserializeFrom(e);var o=Date.now()-n;return console.info("Unserialization took ".concat(o.toFixed(2)," ms")),Fn(r,t)}),[Fn]),Rn=function(e,t){Xt(e),$t(t)},Bn=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,i,a,s,c,u,d,p,h,f,g,m,x,v,b;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=dn(),r=n.getAutoSaveCreationDate,i=n.onGetAutoSave,a=n.onOpen,s=n.getOpenErrorMessage,a){e.next=5;break}return console.error("Tried to open a file for a storage without onOpen support:",t,n),e.abrupt("return");case 5:return c=function(){var e=(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&i){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,r(t,!0);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,qe({title:{id:"This project has an auto-saved version"},message:{id:"SpeXEngine automatically saved a newer version of this project on {0}. This new version might differ from the one that you manually saved. Which version would you like to open?",values:{0:new Date(n).toLocaleString()}},dismissButtonLabel:{id:"My manual save"},confirmButtonLabel:{id:"SpeXEngine auto-save"}});case 9:if(e.sent){e.next=12;break}return e.abrupt("return",t);case 12:return e.abrupt("return",i(t));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,o.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&i){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,r(t,!1);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,qe({title:{id:"This project cannot be opened"},message:{id:"The project file appears to be corrupted, but an autosave file exists (backup made automatically by SpeXEngine on {0}). Would you like to try to load it instead?",values:{0:new Date(n).toLocaleString()}},confirmButtonLabel:{id:"Load autosave"}});case 9:if(e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.abrupt("return",i(t));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q(!0),e.prev=8,e.next=11,(0,FS.g)(150);case 11:return e.next=13,c();case 13:return d=e.sent,h=null,e.prev=15,e.next=18,a(d,Rn);case 18:f=e.sent,p=f.content,e.next=33;break;case 22:return e.prev=22,e.t0=e.catch(15),h=e.t0,e.next=27,u();case 27:if(!(g=e.sent)){e.next=33;break}return e.next=31,a(g);case 31:m=e.sent,p=m.content;case 33:if(p){e.next=35;break}throw h||new Error("The project file content could not be read. It might be corrupted/malformed.");case 35:if(mS(gn,p)){e.next=39;break}return q(!1),Rn(null,null),e.abrupt("return");case 39:return x=II.Serializer.fromJSObject(p),e.prev=40,v=On(x,t),e.abrupt("return",v);case 43:return e.prev=43,x.delete(),e.finish(43);case 46:e.next=62;break;case 48:if(e.prev=48,e.t1=e.catch(8),"CloudProjectReadingError"!==e.t1.name){e.next=56;break}q(!1),Rn(null,null),y(t),e.next=62;break;case 56:return b=s?s(e.t1):{id:"Ensure that you are connected to internet and that the URL used is correct, then try again."},e.next=59,Xe({title:{id:"Unable to open the project"},message:b});case 59:throw q(!1),Rn(null,null),e.t1;case 62:case"end":return e.stop()}}),e,null,[[8,48],[15,22],[40,,43,46]])})));return function(t){return e.apply(this,arguments)}}(),[gn,dn,On,qe,Xe]),_n=EI({beforeCreatingProject:function(){Be(!0)},getStorageProviderOperations:dn,afterCreatingProject:function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.editorTabs,o=t.oldProjectId,Pe(!1),Me(null),e.next=5,h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{createDialogOpen:!1})}));case 5:yt(n,o),jr({currentProject:n,editorTabs:r}),He(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(){He(!0)},onSuccessOrError:function(){Be(!1),q(!1),Rn(null,null)},loadFromProject:Fn,openFromFileMetadata:Bn,resourceMover:cn,onProjectSaved:function(e){h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{currentFileMetadata:e})}))}}),Nn=_n.createEmptyProject,Un=_n.createProjectFromExample,Hn=_n.createProjectFromInAppTutorial,Vn=_n.createProjectWithLogin,Wn=_n.createProjectFromAIGeneration,zn=u.useCallback((function(){return F.ZP.quit()}),[]),Gn=u.useCallback((function(){m.current&&oe((function(e){return!e}))}),[oe]),Yn=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];m.current&&t&&m.current.setEditorToolbar(e)},Xn=function(e,t){st((function(n){return(0,i.Z)((0,i.Z)({},n),{},{previewLayoutName:e,previewExternalLayoutName:t})}))},Jn=u.useCallback((0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(en){e.next=2;break}return e.abrupt("return");case 2:if(t=dn(),!(wt.hasUnsavedChanges&&Je.values.autosaveOnPreview&&t.onAutoSaveProject&&tn)){e.next=14;break}return e.prev=5,e.next=8,t.onAutoSaveProject(en,tn);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error while auto-saving the project: ",e.t0),Sn(gn._({id:"There was an error while making an auto-save of the project. Verify that you have permissions to write in the project folder."}));case 14:case"end":return e.stop()}}),e,null,[[5,10]])}))),[gn,Sn,en,tn,dn,Je.values.autosaveOnPreview,wt.hasUnsavedChanges]),Kn=u.useCallback((function(e){var t=e.networkPreview,n=e.hotReload,r=e.projectDataOnlyExport,o=e.fullLoadingScreen;if(en&&0!==en.getLayoutsCount()){var i=V.current;if(i){nt(!0),function(e){e.editors.forEach((function(e){var t=e.editorRef;t instanceof AC&&t.previewWillStart()}))}(s.editorTabs);var a=it.isPreviewOverriden?it.overridenPreviewLayoutName:it.previewLayoutName,l=it.isPreviewOverriden?it.overridenPreviewExternalLayoutName:it.previewExternalLayoutName,c=a&&en.hasLayoutNamed(a)?en.getLayout(a):en.getLayoutAt(0),u=l&&en.hasExternalLayoutNamed(l)?en.getExternalLayout(l):null;Jn(),(0,qn.IE)(en);var d=x.profile?{username:x.profile.username||"",id:x.profile.id}:null;kt.ensureLoadFinished().then((function(){return i.launchPreview({project:en,layout:c,externalLayout:u,networkPreview:!!t,hotReload:!!n,projectDataOnlyExport:!!r,fullLoadingScreen:!!o,fallbackAuthor:d,getIsMenuBarHiddenInPreview:Je.getIsMenuBarHiddenInPreview,getIsAlwaysOnTopInPreview:Je.getIsAlwaysOnTopInPreview})})).catch((function(e){console.error("Error caught while launching preview, this should never happen.",e)})).then((function(){nt(!1),ct.current&&ct.current.onPreviewLaunch()}))}}}),[Jn,en,kt,it,s.editorTabs,Je.getIsMenuBarHiddenInPreview,Je.getIsAlwaysOnTopInPreview,x.profile]),Qn=(0,ro.zi)(x,ro.SH,Kn),$n=u.useCallback((function(){return Qn({networkPreview:!1})}),[Qn]),er=u.useCallback((function(){return Qn({networkPreview:!1,hotReload:!0})}),[Qn]),tr=u.useCallback((function(){return Qn({networkPreview:!0,hotReload:!1})}),[Qn]),nr=u.useMemo((function(){return{hasPreviewsRunning:xt,launchProjectWithLoadingScreenPreview:function(){return Qn({fullLoadingScreen:!0})},launchProjectDataOnlyPreview:function(){return Qn({hotReload:!0,projectDataOnlyExport:!0})}}}),[xt,Qn]),rr=u.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.openEventsEditor,r=void 0===n||n,o=t.openSceneEditor,a=void 0===o||o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.editorTabs,c={label:e,projectItemName:e,tabOptions:{data:{scene:e,type:"layout"}},renderEditorContainer:Gk,key:"layout "+e},u={label:e+" "+gn._({id:"(Events)"}),projectItemName:e,tabOptions:{data:{scene:e,type:"layout-events"}},renderEditorContainer:Im,key:"layout events "+e,dontFocusTab:a},d=a?Yk(l,c):l,p=r?Yk(d,u):d;return h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:p})})),q(!1),Rn(null,null),oe(!1),p}),[gn,h,s.editorTabs]),or=u.useCallback((function(e){h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{editorTabs:Yk(t.editorTabs,{label:e,projectItemName:e,renderEditorContainer:BC,key:"external events "+e})})})),oe(!1)}),[h]),ar=u.useCallback((function(e){h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{editorTabs:Yk(t.editorTabs,{label:e,projectItemName:e,renderEditorContainer:vk,key:"external layout "+e})})})),oe(!1)}),[h,oe]),sr=u.useCallback((function(e,t,n){h((function(r){return(0,i.Z)((0,i.Z)({},r),{},{editorTabs:Yk(r.editorTabs,{label:e+" "+gn._({id:"(Extension)"}),projectItemName:e,extraEditorProps:{initiallyFocusedFunctionName:t,initiallyFocusedBehaviorName:n},renderEditorContainer:LC,key:"events functions extension "+e})})})),oe(!1)}),[h,oe,gn]),lr=u.useCallback((function(){h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:Yk(e.editorTabs,{label:gn._({id:"Resources"}),projectItemName:null,renderEditorContainer:Wk,key:"resources",extraEditorProps:{fileMetadata:tn}})})}))}),[tn,gn,h]),cr=u.useCallback((function(){h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{editorTabs:Yk(t.editorTabs,{icon:(0,f.jsx)(g,{titleAccess:"Home"}),label:gn._({id:"Home"}),projectItemName:null,renderEditorContainer:XE,key:"start page",extraEditorProps:{storageProviders:e.storageProviders},closable:!1})})}))}),[h,gn,e.storageProviders]),ur=u.useCallback((function(){h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:Yk(e.editorTabs,{label:gn._({id:"Debugger"}),projectItemName:null,renderEditorContainer:Tx,key:"debugger"})})}))}),[gn,h]),dr=(0,ro.zi)(x,ro.x9,ur),pr=u.useCallback((function(){dr(),er()}),[dr,er]),hr=function(e,t){var n=s.currentProject,r=s.editorTabs;if(n){var o=e.getName();if(n.hasEventsFunctionsExtensionNamed(o)){var a=n.getEventsFunctionsExtension(o),l=(0,Jp._u)(t),c=lw(r,a);c?(c.editor.selectEventsFunctionByName(l.name,l.behaviorName),h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:qk(r,c.tabIndex)})}))):sr(o,l.name,l.behaviorName)}else console.warn("Extension with name=".concat(o," can not be opened (no editor for this)"))}},fr=function(e,t){var n=s.currentProject,r=s.editorTabs;if(n)if(n.hasEventsFunctionsExtensionNamed(e)){var o=n.getEventsFunctionsExtension(e),a=lw(r,o);a?(a.editor.selectEventsBasedBehaviorByName(t),h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:qk(r,a.tabIndex)})}))):sr(e,null,t)}else console.warn("Extension with name=".concat(e," can not be opened (no editor for this)"))},gr=function(){wt&&wt.triggerUnsavedChanges(),W()},mr=function(e,t,n){var r=s.currentProject;if(r){(0,Nr.cc)({step:"end",parentEditor:n});var o=!r.hasEventsFunctionsExtensionNamed(e),i=o?r.insertNewEventsFunctionsExtension(e,0):r.getEventsFunctionsExtension(e);o&&(i.setFullName(e),i.setDescription("Originally automatically extracted from events of the project")),i.insertEventsFunction(t,0),kt.loadProjectEventsFunctionsExtensions(r)}},xr=u.useCallback((function(e,t){h((function(n){return(0,i.Z)((0,i.Z)({},n),{},{initialExampleShortHeader:t,createDialogOpen:e})}))}),[h]),vr=u.useCallback((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{openFromStorageProviderDialogOpen:e})}))}),[h]),jr=u.useCallback((function(e){var t=e.currentProject,n=e.editorTabs;t&&(0===t.getLayoutsCount()&&t.insertNewLayout(gn._({id:"Untitled scene"}),0),rr(t.getLayoutAt(0).getName(),{openSceneEditor:!0,openEventsEditor:!0},n),t.getLayoutsCount()>1&&oe(!0))}),[rr,gn]),Cr=u.useCallback((function(e){var t=e.currentProject;if(t){var n=t.getLayoutsCount();if(0!==n)for(var r=s.editorTabs,o=0;o<n;o++)r=rr(t.getLayoutAt(o).getName(),{openSceneEditor:!0,openEventsEditor:!0},r)}}),[rr,s.editorTabs]),yr=u.useCallback((function(){var e=dn();if(e.onOpenWithPicker)return e.onOpenWithPicker().then((function(e){if(e)return Bn(e).then((function(e){e&&(jr({currentProject:e.currentProject,editorTabs:e.editorTabs}),"LocalFile"===hn().internalName&&Qe(!0))}))})).catch((function(t){var n=e.getOpenErrorMessage?e.getOpenErrorMessage(t):{id:"Verify that you have the authorization for reading the file you're trying to access."};(0,Xr.gR)({message:[gn._({id:"Unable to open the project."}),gn._(n)].join("\n"),errorId:"project-open-with-picker-error",rawError:t})}))}),[gn,dn,Bn,jr,hn,Qe]),Zr=u.useCallback((function(t,n){if(wt.hasUnsavedChanges){if(!F.ZP.showConfirmDialog(gn._({id:"Open a new project? Any changes that have not been saved will be lost."})))return;wt.sealUnsavedChanges()}var r=t.fileMetadata,o=LI(gn,e.storageProviders,t);o&&(dn(o),Bn(r).then((function(e){e&&(n&&n.openAllScenes?Cr({currentProject:e.currentProject,editorTabs:e.editorTabs}):jr({currentProject:e.currentProject,editorTabs:e.editorTabs}),"LocalFile"===hn().internalName&&Qe(!0))})).catch((function(e){})))}),[gn,Bn,jr,e.storageProviders,dn,wt,hn,Qe,Cr]),kr=u.useCallback((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&oe(!1),h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{saveToStorageProviderDialogOpen:e})}))}),[h]),wr=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,a,c,u,d,p,f,g,m,v,b,j,C,y,Z;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(en){e.next=2;break}return e.abrupt("return");case 2:if(rw(s.editorTabs),!Q){e.next=6;break}return console.info("Project is already being saved, not triggering save."),e.abrupt("return");case 6:if(n=hn(),r=dn(),a=dn(t),c=hn(),u=a.onSaveProjectAs,d=a.onChooseSaveProjectAsLocation,p=a.getWriteErrorMessage,u){e.next=13;break}return e.abrupt("return");case 13:if(ee(!0),f=c.internalName,e.prev=15,g=null,!d){e.next=29;break}return e.next=20,d({project:en,fileMetadata:tn});case 20:if(m=e.sent,v=m.saveAsLocation){e.next=24;break}return e.abrupt("return");case 24:if("LocalFile"!==c.internalName||!v.fileIdentifier||!(0,SI.w6)(v.fileIdentifier)){e.next=28;break}return e.next=27,Xe({title:{id:"Choose another location"},message:{id:"You are trying to save the project in the same folder as the application. This folder will be deleted when the application is updated. Please choose another location."}});case 27:return e.abrupt("return");case 28:g=v;case 29:return e.next=31,u(en,g,{onStartSaving:function(){return Pn(gn._({id:"Saving..."}),null)},onMoveResources:function(){var e=(0,o.Z)(l().mark((function e(t){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.newFileMetadata,!tn){e.next=4;break}return e.next=4,bn({project:en,newFileMetadata:o,newStorageProvider:c,newStorageProviderOperations:a,oldFileMetadata:tn,oldStorageProvider:n,oldStorageProviderOperations:r,authenticatedUser:x});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 31:if(b=e.sent,j=b.wasSaved,C=b.fileMetadata,j){e.next=36;break}return e.abrupt("return");case 36:if(wt.sealUnsavedChanges(),Pn(gn._({id:"Project properly saved"})),I(!1),T(null),C){e.next=42;break}return e.abrupt("return");case 42:y={fileMetadata:C,storageProviderName:f},Je.insertRecentProjectFile(y),Et&&!(0,Sw.d1)(Et.id)&&ct.current&&Je.saveTutorialProgress((0,i.Z)((0,i.Z)({tutorialId:Et.id,userId:x.profile?x.profile.id:null},ct.current.getProgress()),{},{fileMetadataAndStorageProviderName:y})),x.onCloudProjectsChanged(),ti.Z.burstAllUrlsCache(),MI(kn,en)&&h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentFileMetadata:C})})),e.next=55;break;case 50:e.prev=50,e.t0=e.catch(15),En(),Z=p?p(e.t0):{id:"An error occurred when saving the project. Please try again later."},(0,Xr.gR)({message:gn._(Z),rawError:e.t0,errorId:"project-save-as-error"});case 55:return e.prev=55,ee(!1),e.finish(55);case 58:case"end":return e.stop()}}),e,null,[[15,50,55,58]])})));return function(t){return e.apply(this,arguments)}}(),[gn,Q,en,kn,tn,dn,wt,h,s.editorTabs,Pn,En,hn,Je,bn,x,Et,Xe]),Tr=u.useCallback((function(){if(en)if(!w||P){var t=dn();e.storageProviders.filter((function(e){return!e.hiddenInSaveDialog})).length>1||!t.onSaveProjectAs?kr():wr()}else I(!0)}),[en,dn,kr,e.storageProviders,wr,w,P]),Er=u.useCallback((0,o.Z)(l().mark((function e(){var t,n,r,o,a,c,u,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(en){e.next=2;break}return e.abrupt("return");case 2:if(tn){e.next=4;break}return e.abrupt("return",Tr());case 4:if(!w||P){e.next=7;break}return I(!0),e.abrupt("return");case 7:if(t=dn(),n=t.onSaveProject){e.next=11;break}return e.abrupt("return",Tr());case 11:if(rw(s.editorTabs),Sn(gn._({id:"Saving..."}),null),!Q){e.next=16;break}return console.info("Project is already being saved, not triggering save."),e.abrupt("return");case 16:if(ee(!0),e.prev=17,r=performance.now(),"LocalFile"!==(o=hn().internalName)||!(0,SI.w6)(tn.fileIdentifier)){e.next=23;break}return e.next=23,Xe({title:{id:"Choose another location"},message:{id:"Your project is saved in the same folder as the application. This folder will be deleted when the application is updated. Please choose another location if you don't want to lose your project."}});case 23:return e.next=25,n(en,tn,w?{previousVersion:w}:void 0);case 25:a=e.sent,c=a.wasSaved,u=a.fileMetadata,c&&(console.info("Project saved in ".concat(performance.now()-r,"ms.")),I(!1),T(null),d={fileMetadata:u,storageProviderName:o},Je.insertRecentProjectFile(d),Et&&!(0,Sw.d1)(Et.id)&&ct.current&&Je.saveTutorialProgress((0,i.Z)((0,i.Z)({tutorialId:Et.id,userId:x.profile?x.profile.id:null},ct.current.getProgress()),{},{fileMetadataAndStorageProviderName:d})),MI(kn,en)&&h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentFileMetadata:u})})),wt.sealUnsavedChanges(),Pn(gn._({id:"Project properly saved"}))),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(17),(0,Xr.gR)({message:gn._({id:"Unable to save the project! Please try again later or save the project in another location."}),rawError:e.t0,errorId:"project-save-error"}),En();case 35:return e.prev=35,ee(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[17,31,35,38]])}))),[Q,en,kn,tn,dn,Sn,En,Pn,gn,wt,Tr,s.editorTabs,hn,Je,h,x,Et,w,P,Xe]),Sr=u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(en){e.next=2;break}return e.abrupt("return",!0);case 2:if(!wt.hasUnsavedChanges){e.next=6;break}if(F.ZP.showConfirmDialog(gn._({id:"Close the project? Any changes that have not been saved will be lost."}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,Mn();case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),[en,wt,gn,Mn]),Pr=function(e){Dn((arguments.length>1&&void 0!==arguments[1]?arguments[1]:s).editorTabs),e.editorRef&&e.editorRef.forceUpdateEditor()},Ir=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Mn();case 3:Pt(),e.next=7;break;case 6:Pt();case 7:cr();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Pt,Mn,cr]),Dr=u.useCallback((function(e){var t=Je.getTutorialProgress({tutorialId:e,userId:x.profile?x.profile.id:void 0});Ot({tutorialId:e,userProgress:t})}),[Je,x.profile]),Ar=function(){var e=(0,o.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(en&&tn){e.next=2;break}return e.abrupt("return");case 2:if(!(n=dn()).onChangeProjectProperty){e.next=8;break}return e.next=6,n.onChangeProjectProperty(en,tn,{name:t});case 6:e.sent&&wt.sealUnsavedChanges();case 8:return e.next=10,h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentFileMetadata:(0,i.Z)((0,i.Z)({},tn),{},{name:t})})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lr=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"!==hn().internalName||!t.newName){e.next=3;break}return e.abrupt("return",qe({title:{id:"Project name changed"},message:{id:"Your project name has changed, this will also save the whole project, continue?"},confirmButtonLabel:{id:"Save and continue"}}));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mr=u.useCallback((function(e){C&&(Zr({storageProviderName:"Cloud",fileMetadata:(0,i.Z)((0,i.Z)({},C),{},{version:e})}),y(null),T(e))}),[Zr,C]),Fr=u.useCallback((function(){var e=hn();return"LocalFile"===e.internalName||"Cloud"===e.internalName}),[hn]),Or=u.useCallback((function(e){return new Promise((function(t){B(e);H((function(){return t}))}))}),[H,B]),Rr=u.useCallback(function(){var e=(0,o.Z)(l().mark((function e(t){var n,r,o,i,a,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ft){e.next=2;break}return e.abrupt("return");case 2:if(n=Ft.userProgress,r=Ft.tutorialId,o=n?n.fileMetadataAndStorageProviderName:null,!n||"resume"!==t||!o){e.next=21;break}if(!en){e.next=18;break}if(!tn||tn.fileIdentifier===o.fileMetadata.fileIdentifier){e.next=15;break}return e.next=9,Sr();case 9:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:Zr(o,{openAllScenes:!0}),e.next=16;break;case 15:Cr({currentProject:en,editorTabs:s.editorTabs});case 16:e.next=19;break;case 18:Zr(o,{openAllScenes:!0});case 19:e.next=26;break;case 21:return e.next=23,Sr();case 23:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:if(i=St(r)){e.next=29;break}return e.abrupt("return");case 29:if(!(a=i.initialTemplateUrl)){e.next=40;break}return e.prev=31,e.next=34,Hn(i.id,{storageProvider:eC.H,saveAsLocation:null});case 34:e.next=40;break;case 36:return e.prev=36,e.t0=e.catch(31),(0,Xr.gR)({message:gn._({id:"Unable to create a new project for the tutorial. Try again later."}),rawError:new Error("Can't create project from template \"".concat(a,'"')),errorId:"cannot-create-project-from-template"}),e.abrupt("return");case 40:return c=n&&"resume"===t?n.step:0,u=n&&"resume"===t?n.projectData:i.initialProjectData||{},e.next=44,It({tutorialId:r,initialStepIndex:c,initialProjectData:u});case 44:(0,Nr.ei)({tutorialId:r,scenario:t}),Ot(null);case 46:case"end":return e.stop()}}),e,null,[[31,36]])})));return function(t){return e.apply(this,arguments)}}(),[gn,St,Hn,Sr,It,Ft,Zr,s.editorTabs,en,tn,Cr]),Br=function(e){var t=u.useRef(e);return u.useEffect((function(){t.current=e}),[e]),u.useCallback((function(){return t.current()}),[])}(u.useCallback((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kn.current&&wn.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,yn((function(){return{project:kn.current,fileMetadata:wn.current,storageProvider:hn(),storageProviderOperations:dn(),authenticatedUser:x}}));case 4:case"end":return e.stop()}}),e)}))),[kn,wn,yn,hn,dn,x]));(0,$.aL)(lt.current?lt.current.launchCommand:function(){});var _r=u.useCallback((function(){lt.current&&lt.current.open()}),[]);bS({i18n:gn,project:s.currentProject,previewEnabled:!!s.currentProject&&s.currentProject.getLayoutsCount()>0,onOpenProjectManager:Gn,hasPreviewsRunning:xt,allowNetworkPreview:!!V.current&&V.current.canDoNetworkPreview(),onLaunchPreview:$n,onHotReloadPreview:er,onLaunchDebugPreview:pr,onLaunchNetworkPreview:tr,onOpenHomePage:cr,onCreateBlank:function(){return Pe(!0)},onOpenProject:function(){return vr()},onSaveProject:Er,onSaveProjectAs:Tr,onCloseApp:zn,onCloseProject:function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sr();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onExportGame:u.useCallback((function(){return Ge(!0)}),[]),onOpenLayout:function(e){rr(e)},onOpenExternalEvents:or,onOpenExternalLayout:ar,onOpenEventsFunctionsExtension:sr,onOpenCommandPalette:_r,onOpenProfile:function(){return je(!0)},onOpenGamesDashboard:function(){return Tn("games-dashboard")}});var Ur=u.useMemo((function(){return{resourceSources:an,onChooseResource:Or,resourceExternalEditors:ln,getStorageProvider:hn,onFetchNewlyAddedResources:Br,getStorageProviderResourceOperations:pn}}),[an,Or,ln,hn,Br,pn]),Hr=Y||tt,Vr=(0,$.LB)(),Wr={i18n:gn,project:s.currentProject,recentProjectFiles:Je.getRecentProjectFiles(),shortcutMap:Vr,isApplicationTopLevelMenu:!1},zr={onChooseProject:function(){return vr()},onOpenRecentFile:Zr,onSaveProject:Er,onSaveProjectAs:Tr,onCloseProject:Sr,onCloseApp:zn,onExportProject:function(){return Ge(!0)},onCreateProject:function(){return xr(!0,null)},onCreateBlank:function(){return Pe(!0)},onOpenProjectManager:function(){return oe(!0)},onOpenHomePage:cr,onOpenDebugger:dr,onOpenAbout:function(){return me(!0)},onOpenPreferences:function(){return ke(!0)},onOpenLanguage:function(){return le(!0)},onOpenProfile:function(){return je(!0)},onOpenGamesDashboard:function(){return Tn("games-dashboard")},setElectronUpdateStatus:function(e){h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{updateStatus:e})}));var t=function(e){return"update-available"===e.status?"A new update is available!":""}(e),n=function(e){return"update-available"===e.status?"It will be downloaded and installed automatically (unless you deactivated this in preferences)":""}(e);t&&(new window.Notification(t,{body:n}).onclick=function(){return me(!0)})}};return(0,f.jsxs)("div",{className:"main-frame",children:[!!xn&&xn((0,i.Z)((0,i.Z)({},Wr),{},{isApplicationTopLevelMenu:!0}),zr,{onClosePreview:V.current&&V.current.closePreview?V.current.closePreview:null}),(0,f.jsx)(R,{projectName:en?en.getName():null,fileMetadata:tn,storageProvider:hn(),i18n:gn}),(0,f.jsxs)(d.ZP,(0,i.Z)((0,i.Z)({open:re,PaperProps:{style:DI.drawerContent,className:"safe-area-aware-left-container"},ModalProps:{keepMounted:!0},onClose:Gn},(0,Ae.Y)({open:re?"true":void 0})),{},{children:[(0,f.jsx)(yi,{title:s.currentProject?s.currentProject.getName():"No project",onClose:Gn,id:"project-manager-drawer"}),en&&(0,f.jsx)(ei,{project:en,onChangeProjectName:Ar,onSaveProjectProperties:Lr,onOpenExternalEvents:or,onOpenLayout:function(e){rr(e)},onOpenExternalLayout:ar,onOpenEventsFunctionsExtension:sr,onInstallExtension:function(e){var t=s.currentProject;if(t){var n=e.name;t.hasEventsFunctionsExtensionNamed(n)&&h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:sw(e.editorTabs,n)})}))}},onDeleteLayout:function(t){var n=s.currentProject,r=e.i18n;n&&(F.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this scene? This can't be undone."}))&&h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:ow(e.editorTabs,t)})})).then((function(e){n.getFirstLayout()===t.getName()&&n.setFirstLayout(""),n.removeLayout(t.getName()),gr()})))},onDeleteExternalLayout:function(t){var n=s.currentProject,r=e.i18n;n&&(F.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this external layout? This can't be undone."}))&&h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:iw(e.editorTabs,t)})})).then((function(e){e.currentProject&&e.currentProject.removeExternalLayout(t.getName()),gr()})))},onDeleteEventsFunctionsExtension:function(t){var n=s.currentProject,r=e.i18n;if(n&&F.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this extension? This can't be undone."}))){var o=t.getName();h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:sw(e.editorTabs,o)})})).then((function(e){kt.unloadProjectEventsFunctionsExtension(n,o),n.removeEventsFunctionsExtension(o),gr(),kt.reloadProjectEventsFunctionsExtensions(n)}))}},onDeleteExternalEvents:function(t){var n=e.i18n;s.currentProject&&(F.ZP.showConfirmDialog(n._({id:"Are you sure you want to remove these external events? This can't be undone."}))&&h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:aw(e.editorTabs,t)})})).then((function(e){e.currentProject&&e.currentProject.removeExternalEvents(t.getName()),gr()})))},onRenameLayout:function(t,n){var r=s.currentProject,o=e.i18n;if(r&&r.hasLayoutNamed(t)&&n!==t){var a=(0,Ut.Z)(n||o._({id:"Unnamed"}),(function(e){return r.hasLayoutNamed(e)})),l=r.getLayout(t),c=t===r.getFirstLayout();h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:ow(e.editorTabs,l)})})).then((function(e){l.setName(a),II.WholeProjectRefactorer.renameLayout(r,t,a),ct.current&&ct.current.changeData(t,a),c&&r.setFirstLayout(a),gr()}))}},onRenameExternalLayout:function(t,n){var r=s.currentProject,o=e.i18n;if(r&&r.hasExternalLayoutNamed(t)&&n!==t){var a=(0,Ut.Z)(n||o._({id:"Unnamed"}),(function(e){return r.hasExternalLayoutNamed(e)})),l=r.getExternalLayout(t);h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:iw(e.editorTabs,l)})})).then((function(e){l.setName(a),II.WholeProjectRefactorer.renameExternalLayout(r,t,a),gr()}))}},onRenameEventsFunctionsExtension:function(e,t){var n=s.currentProject;if(n&&n.hasEventsFunctionsExtensionNamed(e)&&t!==e){var r=(0,Ut.Z)(II.Project.getSafeName(t),(function(e){return To(e,n)})),o=n.getEventsFunctionsExtension(e);II.WholeProjectRefactorer.renameEventsFunctionsExtension(n,o,e,r),o.setName(r),kt.unloadProjectEventsFunctionsExtension(n,e),h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{editorTabs:sw(t.editorTabs,e)})})).then((function(e){kt.reloadProjectEventsFunctionsExtensions(n),gr()}))}},onRenameExternalEvents:function(t,n){var r=s.currentProject,o=e.i18n;if(r&&r.hasExternalEventsNamed(t)&&n!==t){var a=(0,Ut.Z)(n||o._({id:"Unnamed"}),(function(e){return r.hasExternalEventsNamed(e)})),l=r.getExternalEvents(t);h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:aw(e.editorTabs,l)})})).then((function(e){l.setName(a),II.WholeProjectRefactorer.renameExternalEvents(r,t,a),gr()}))}},onOpenResources:function(){lr(),oe(!1)},onOpenPlatformSpecificAssets:function(){return pe(!0)},eventsFunctionsExtensionsError:rn,onReloadEventsFunctionsExtensions:function(){Ue||kt.reloadProjectEventsFunctionsExtensions(en)},freezeUpdate:!re,unsavedChanges:wt,hotReloadPreviewButtonProps:nr,resourceManagementProps:Ur,shortcutMap:Vr}),!s.currentProject&&(0,f.jsx)(Ke.Z,{children:(0,f.jsx)(c.Trans,{id:"To begin, open or create a new project."})})]})),(0,f.jsx)(jI,{onBuildMenuTemplate:function(){return(0,xS.z)((0,xS.c)(Wr),zr)},children:(0,f.jsx)(pw,{hideLabels:!1,editorTabs:s.editorTabs,onClickTab:function(e){return t=e,void h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:qk(e.editorTabs,t)})})).then((function(e){return Pr(tw(e.editorTabs),e)}));var t},onCloseTab:function(e){return function(e){rw(s.editorTabs),h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{editorTabs:Kk(t.editorTabs,e)})}))}(e)},onCloseOtherTabs:function(e){return function(e){rw(s.editorTabs),h((function(t){return(0,i.Z)((0,i.Z)({},t),{},{editorTabs:Qk(t.editorTabs,e)})}))}(e)},onCloseAll:function(){rw(s.editorTabs),h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{editorTabs:Jk(e.editorTabs)})}))},onTabActivated:function(e){return Pr(e)},onDropTab:function(e,t){h((function(n){return(0,i.Z)((0,i.Z)({},n),{},{editorTabs:(r=n.editorTabs,o=e,a=t,cw(r,o,o>a?a+1:a))});var r,o,a}))}})}),(0,f.jsx)(M,{ref:m,showProjectButtons:!["start page","debugger",null].includes(tw(s.editorTabs)?tw(s.editorTabs).key:null),canSave:!!s.currentProject&&!Q,onSave:Er,toggleProjectManager:Gn,exportProject:function(){return Ge(!0)},onOpenDebugger:pr,hasPreviewsRunning:xt,onPreviewWithoutHotReload:$n,onNetworkPreview:tr,onHotReloadPreview:er,canDoNetworkPreview:!!V.current&&V.current.canDoNetworkPreview(),setPreviewOverride:function(e){var t=e.isPreviewOverriden,n=e.overridenPreviewLayoutName,r=e.overridenPreviewExternalLayoutName;st((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isPreviewOverriden:t,overridenPreviewLayoutName:n,overridenPreviewExternalLayoutName:r})}))},isPreviewEnabled:!!en&&en.getLayoutsCount()>0,previewState:it}),(0,f.jsx)(Aa,{gameId:s.currentProject?s.currentProject.getProjectUuid():"",children:$k(s.editorTabs).map((function(t,n){var o=ew(s.editorTabs)===n;return(0,f.jsx)(xl,{active:o,children:(0,f.jsx)(SS,{active:o,children:(0,f.jsx)(br.C,{title:"This editor encountered a problem",scope:"mainframe",children:t.renderEditorContainer({isActive:o,extraEditorProps:t.extraEditorProps,project:en,ref:function(e){return t.editorRef=e},setToolbar:function(e){return Yn(e,o)},projectItemName:t.projectItemName,setPreviewedLayout:Xn,onOpenExternalEvents:or,onOpenEvents:function(e){rr(e,{openEventsEditor:!0,openSceneEditor:!1})},previewDebuggerServer:dt,hotReloadPreviewButtonProps:nr,onOpenLayout:function(e){rr(e,{openEventsEditor:!0,openSceneEditor:!1})},resourceManagementProps:Ur,onSave:Er,canSave:!!s.currentProject&&!Q,onCreateEventsFunction:mr,openInstructionOrExpression:hr,unsavedChanges:wt,canOpen:!!e.storageProviders.filter((function(e){return!e.hiddenInOpenDialog})).length,canInstallPrivateAsset:Fr,onChooseProject:function(){return vr()},onOpenRecentFile:Zr,onOpenNewProjectSetupDialog:function(e){Me(e),Pe(!0)},onOpenProjectManager:function(){return oe(!0)},onCloseProject:function(){return Sr()},onCreateProject:function(e){return xr(!0,e)},onOpenProfile:function(){return je(!0)},onOpenHelpFinder:_r,onOpenLanguageDialog:function(){return le(!0)},onOpenPreferences:function(){return ke(!0)},onOpenAbout:function(){return me(!0)},selectInAppTutorial:Dr,onLoadEventsFunctionsExtensions:function(){return Ue?Promise.resolve():kt.loadProjectEventsFunctionsExtensions(en)},onReloadEventsFunctionsExtensionMetadata:function(e){Ue||kt.reloadProjectEventsFunctionsExtensionMetadata(en,e)},onDeleteResource:function(e,t){t(!0)},onRenameResource:function(e,t,n){en&&(0,bk.jJ)(en,(0,r.Z)({},e.getName(),t)),n(!0)},openBehaviorEvents:fr})})})},t.key)}))}),(0,f.jsx)(wS,{ref:lt}),(0,f.jsx)(gi,{show:Hr,progress:qt,message:Qt}),(0,f.jsx)(p.Z,{open:s.snackMessageOpen,autoHideDuration:s.snackDuration,onClose:En,ContentProps:{"aria-describedby":"snackbar-message"},message:(0,f.jsx)("span",{id:"snackbar-message",children:s.snackMessage})}),!!on&&ze&&on({onClose:function(){return Ge(!1)},onChangeSubscription:function(){Ge(!1)},project:s.currentProject,onSaveProject:Er}),s.createDialogOpen&&(0,f.jsx)(sS,{open:!0,onClose:function(){h((function(e){return(0,i.Z)((0,i.Z)({},e),{},{createDialogOpen:!1})}))},initialExampleShortHeader:s.initialExampleShortHeader,isProjectOpening:Re,onChoose:function(e){Me(e),Pe(!0)}}),!!en&&de&&(0,f.jsx)(ci,{project:en,open:!0,onApply:function(){return pe(!1)},onClose:function(){return pe(!1)},resourceManagementProps:Ur}),!!sn&&sn({getIncludeFileHashs:ut.getIncludeFileHashs,onExport:function(){return Ge(!0)}},(function(e){V.current=e})),L&&U&&!!en&&(0,f.jsx)(OS,{project:en,fileMetadata:tn,getStorageProvider:hn,i18n:gn,resourceSources:an,onChooseResources:function(e){H(null),B(null),U(e)},onClose:function(){H(null),B(null),U([])},options:L}),be&&(0,f.jsx)(gl,{currentProject:en,open:!0,onClose:function(){je(!1)}}),Se&&(0,f.jsx)(ZP,{authenticatedUser:x,isOpeningProject:Re,onClose:function(){return Pe(!1)},onCreateEmptyProject:Nn,onCreateFromExample:Un,onCreateWithLogin:Vn,onCreateFromAIGeneration:function(){var e=(0,o.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fileUrl){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Wn(r,n);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),storageProviders:e.storageProviders,selectedExampleShortHeader:Le}),C&&(0,f.jsx)(wI,{cloudProjectId:C.fileIdentifier,onClose:function(){return y(null)},onOpenPreviousVersion:Mr}),P&&(0,f.jsx)(TI,{isLoading:Q,onClose:function(){return I(!1)},onSaveAsMainVersion:Er,onSaveAsDuplicate:Tr}),Ze&&(0,f.jsx)(Ee,{i18n:e.i18n,onClose:function(e){ke(!1),e&&An()}}),se&&(0,f.jsx)(eS,{open:!0,onClose:function(e){le(!1),e&&An()}}),ge&&(0,f.jsx)(at,{open:!0,onClose:function(){return me(!1)},updateStatus:nn}),s.openFromStorageProviderDialogOpen&&(0,f.jsx)(hS,{onClose:function(){return vr(!1)},storageProviders:e.storageProviders,onChooseProvider:function(e){vr(!1),dn(e),yr()}}),s.saveToStorageProviderDialogOpen&&(0,f.jsx)(fS,{onClose:function(){return kr(!1)},storageProviders:e.storageProviders,onChooseProvider:function(e){kr(!1),wr(e)}}),jt(),Zt(),jn(),Zn(),(0,f.jsx)(Ti,{shouldPrompt:!!s.currentProject,i18n:e.i18n,language:e.i18n.language,hasUnsavedChanges:wt.hasUnsavedChanges}),(0,f.jsx)(QE,{}),Ft&&(0,f.jsx)(NS,{open:!0,tutorialCompletionStatus:Ft.userProgress?Ft.userProgress.progress.every((function(e){return 100===e}))?"complete":"started":"notStarted",tutorialId:Ft.tutorialId,startTutorial:Rr,onClose:function(){Ot(null)}}),s.gdjsDevelopmentWatcherEnabled&&mn&&mn(),!!gt.length&&(0,f.jsx)(PS,{logs:gt,onClose:mt,onLaunchNewPreview:function(){mt(),$n()}}),Et&&(0,f.jsx)(Bt,(0,i.Z)({ref:ct,tutorial:Et,startStepIndex:Dt,startProjectData:At,project:en,endTutorial:function(e){var t=e.shouldCloseProject;e.shouldWarnAboutUnsavedChanges&&en&&(!tn||wt.hasUnsavedChanges)?zt(!0):Ir(t)}},Nt)),Wt&&(0,f.jsx)(TP,{onSaveProject:Er,onClose:function(){return zt(!1)},isSavingProject:Q,canEndTutorial:!!tn&&!wt.hasUnsavedChanges,endTutorial:function(){Ir(!0)}}),(0,f.jsx)(kI,{})]})}},35924:function(e,t,n){"use strict";var r=n(29439),o=n(36600),i=n(28381),a=n(40243),s=n(61325),l=n(3290),c=n(2597),u=n(25588),d=n(42986),p=n(67835),h=n(86278),f=n(38501),g=n(78081),m=n(14331),x=n(58758),v=n(96355),b=n(29343),j={imageContainer:{position:"relative",display:"flex",flex:1,width:"100%",height:"calc(100% - 80px)"},loaderContainer:{position:"absolute",left:"calc(50% - 30px)",top:"calc(50% - 30px)"},timeField:{width:75},timeIcon:{paddingLeft:6,paddingRight:8}};t.Z=function(e){var t=e.animationName,n=e.resourceNames,C=e.getImageResourceSource,y=e.isImageResourceSmooth,Z=e.timeBetweenFrames,k=e.onChangeTimeBetweenFrames,w=e.isLooping,T=e.hideCheckeredBackground,E=e.deactivateControls,S=e.displaySpacedView,P=e.fixedHeight,I=e.fixedWidth,D=e.isAssetPrivate,A=e.hideAnimationLoader,L=(0,f.Z)(),M=Number.parseFloat((1/Z).toFixed(4)),F=i.useRef(),O=i.useRef(),R=i.useRef(0),B=i.useRef(Z),_=i.useRef(!1),N=i.useRef(0),U=i.useRef(n[0]),H=i.useRef(w),V=i.useRef(t),W=i.useRef(new Array(n.length).fill(!1)),z=i.useRef(null),G=i.useState(!0),Y=(0,r.Z)(G,2),q=Y[0],X=Y[1];i.useEffect((function(){w!==H.current&&(H.current=w),t!==V.current&&(V.current=t,W.current=new Array(n.length).fill(!1))}),[Z,w,t,n]);var J=function(){N.current=0,R.current=0,_.current=!1,L()},K=i.useCallback((function(e){var t=O.current,r=N.current,o=R.current,i=B.current,a=_.current,s=H.current,l=n.length,c=W.current[r];if(t&&c){var u=r,d=o+(a?0:(e-t)/1e3);if(d>i){var p=Math.floor(d/i);u+=p,(d-=p*i)<0&&(d=0)}u>=l&&(u=s?u%l:l-1),u<0&&(u=0),N.current=u,R.current=d;var h=n[N.current];r!==u&&(h===U.current?W.current[N.current]=!0:(W.current[N.current]=!1,z.current=setTimeout((function(){console.warn("The image took too long to load, displaying a loader."),X(!0)}),500)),U.current=h,L())}F.current=requestAnimationFrame(K),O.current=e}),[L,n]);i.useEffect((function(){return F.current=requestAnimationFrame(K),function(){F.current&&cancelAnimationFrame(F.current)}}),[K]);var Q=i.useCallback((function(){W.current[N.current]=!0,!W.current.some((function(e){return!e}))&&X(!1),z.current&&(clearTimeout(z.current),z.current=null),L()}),[L]);N.current>=n.length&&(N.current=0);var $=n[N.current];return(0,b.jsxs)(a.sg,{expand:!0,noOverflowParent:!0,noMargin:!0,children:[(0,b.jsxs)("div",{style:j.imageContainer,children:[(0,b.jsx)(l.Z,{resourceName:$,imageResourceSource:C($),isImageResourceSmooth:y($),displaySpacedView:S,hideCheckeredBackground:T,deactivateControls:E,fixedHeight:P,fixedWidth:I,onImageLoaded:Q,isImagePrivate:D,hideLoader:!0}),!A&&q&&(0,b.jsx)("div",{style:j.loaderContainer,children:(0,b.jsx)(g.Z,{})})]}),!E&&(0,b.jsx)(a.sg,{noMargin:!0,children:(0,b.jsxs)(s.ep,{alignItems:"center",children:[(0,b.jsxs)(s.pJ,{alignItems:"center",justifyContent:"center",noMargin:!0,children:[(0,b.jsx)(h.Z,{children:(0,b.jsx)(o.Trans,{id:"FPS:"})}),(0,b.jsx)(d.Z,{commitOnBlur:!0,margin:"none",value:M.toString(),onChange:function(e){if(e){var t=Number.parseFloat(e);if(t>0){var n=1/t;B.current=n,k&&k(n),J()}}},id:"direction-time-between-frames",type:"number",min:0,max:100,style:j.timeField}),(0,b.jsx)(u.Z,{style:j.timeIcon}),(0,b.jsx)(d.Z,{commitOnBlur:!0,margin:"none",value:(0,v.q)(B.current,6),onChange:function(e){if(e){var t=Number.parseFloat(e);t>0&&(B.current=t,k&&k(t),J())}},id:"direction-time-between-frames",type:"number",step:.005,precision:2,min:.01,max:5,style:j.timeField})]}),(0,b.jsxs)(s.pJ,{alignItems:"center",justifyContent:"center",noMargin:!0,children:[(0,b.jsx)(p.Z,{leftIcon:(0,b.jsx)(c.Z,{}),label:(0,b.jsx)(o.Trans,{id:"Replay"}),onClick:J}),(0,b.jsx)(p.Z,{leftIcon:_.current?(0,b.jsx)(m.Z,{}):(0,b.jsx)(x.Z,{}),label:_.current?"Play":"Pause",onClick:function(){_.current=!_.current,L()}})]})]})})]})}},8278:function(e,t,n){"use strict";n.d(t,{CO:function(){return b},DJ:function(){return T},Gn:function(){return Z},Mr:function(){return m},Vv:function(){return v},__:function(){return c},c:function(){return h},eS:function(){return k},fd:function(){return x},ge:function(){return u},ir:function(){return g},lg:function(){return w},rY:function(){return y},sL:function(){return C},tY:function(){return l},xw:function(){return p}});var r=n(93433),o=n(18455),i=n(49179),a=n.n(i),s=n.g.gd,l=function(e,t,n,r){var o=t<e.getAnimationsCount()?e.getAnimation(t):null;if(!o)return{animation:null,direction:null,sprite:null};var i=n<o.getDirectionsCount()?o.getDirection(n):null;if(!i)return{animation:o,direction:null,sprite:null};var a=r<i.getSpritesCount()?i.getSprite(r):null;return{animation:o,direction:i,sprite:a}},c=function(e){for(var t=0,n=0;n<e.getAnimationsCount();n++)for(var r=e.getAnimation(n),o=0;o<r.getDirectionsCount();o++){t+=r.getDirection(o).getSpritesCount()}return t},u=function(e){for(var t=new Set,n=0;n<e.getAnimationsCount();n++)for(var o=e.getAnimation(n),i=0;i<o.getDirectionsCount();i++)for(var a=o.getDirection(i),s=0;s<a.getSpritesCount();s++)for(var l=a.getSprite(s).getAllNonDefaultPoints(),c=0;c<l.size();c++){var u=l.at(c);t.add(u.getName())}return(0,r.Z)(t)},d=function(e,t){t.setX(e.getX()),t.setY(e.getY()),t.setName(e.getName())},p=function(e,t){e.ptr!==t.ptr&&(d(e.getCenter(),t.getCenter()),d(e.getOrigin(),t.getOrigin()),t.setDefaultCenterPoint(e.isDefaultCenterPoint()),t.getAllNonDefaultPoints().clear(),(0,o.mapVector)(e.getAllNonDefaultPoints(),(function(e){t.addPoint(e)})))},h=function(e,t){(0,o.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);(0,o.mapFor)(0,r.getSpritesCount(),(function(t){var n=r.getSprite(t);p(e,n)}))}))},f=function(e,t){return e.getX()===t.getX()&&e.getY()===t.getY()&&e.getName()===t.getName()},g=function(e,t){return a()((0,o.mapFor)(0,t.getSpritesCount(),(function(n){var r,i,s=t.getSprite(n);return i=e,!!f((r=s).getCenter(),i.getCenter())&&!!f(r.getOrigin(),i.getOrigin())&&r.isDefaultCenterPoint()===i.isDefaultCenterPoint()&&r.getAllNonDefaultPoints().size()===i.getAllNonDefaultPoints().size()&&a()((0,o.mapVector)(r.getAllNonDefaultPoints(),(function(e){return!!i.hasPoint(e.getName())&&f(e,i.getPoint(e.getName()))})))})))},m=function(e,t){return a()((0,o.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);return g(e,r)})))},x=function(e,t){return a()((0,o.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);return m(e,r)})))},v=function(e,t){e.ptr!==t.ptr&&(t.setFullImageCollisionMask(e.isFullImageCollisionMask()),t.getCustomCollisionMask().clear(),(0,o.mapVector)(e.getCustomCollisionMask(),(function(e){t.getCustomCollisionMask().push_back(e)})))},b=function(e,t){(0,o.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);(0,o.mapFor)(0,r.getSpritesCount(),(function(t){var n=r.getSprite(t);v(e,n)}))}))},j=function(e,t){if(e.isFullImageCollisionMask()!==t.isFullImageCollisionMask())return!1;if(e.isFullImageCollisionMask()&&t.isFullImageCollisionMask())return!0;var n=e.getCustomCollisionMask(),r=t.getCustomCollisionMask();return n.size()===r.size()&&a()((0,o.mapVector)(n,(function(e,t){return function(e,t){var n=e.getVertices(),r=t.getVertices();return n.size()===r.size()&&a()((0,o.mapVector)(n,(function(e,t){var n=r.at(t);return e.get_x()===n.get_x()&&e.get_y()===n.get_y()})))}(e,r.at(t))})))},C=function(e,t){return a()((0,o.mapFor)(0,t.getSpritesCount(),(function(n){var r=t.getSprite(n);return j(r,e)})))},y=function(e,t){return a()((0,o.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);return C(e,r)})))},Z=function(e,t){return a()((0,o.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);return y(e,r)})))},k=function(e){var t=l(e,0,0,0).sprite;return!!t&&t.isFullImageCollisionMask()},w=function(e,t){(0,o.mapFor)(0,e.getDirectionsCount(),(function(n){for(var r=e.getDirection(n),i=(0,o.mapFor)(0,r.getSpritesCount(),(function(e){var n=r.getSprite(e);return!!t[n.ptr]})),a=r.getSpritesCount()-1;a>=0;a--)i[a]&&r.removeSprite(a)}))},T=function(e,t){(0,o.mapFor)(0,e.getDirectionsCount(),(function(n){for(var r=e.getDirection(n),i=(0,o.mapFor)(0,r.getSpritesCount(),(function(e){var n=r.getSprite(e);return!!t[n.ptr]})),a=r.getSpritesCount()-1;a>=0;a--)if(i[a]){var l=r.getSprite(a),c=new s.Sprite;c.setImageName(l.getImageName()),p(l,c),v(l,c),r.addSprite(c),r.moveSprite(r.getSpritesCount()-1,a),c.delete()}}))}},14212:function(e,t,n){"use strict";n.d(t,{Z:function(){return vn}});var r=n(15671),o=n(43144),i=n(60136),a=n(29388),s=n(1413),l=n(36600),c=n(28381),u=n(21601),d=n(40243),p=n(37237),h=n(94854),f=n(61325),g=n(74661),m=n(72410),x=n(42986),v=n(89267),b=n(51535),j=n(3781),C=n(78118),y=n(29343),Z=c.memo((function(e){return(0,y.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 6.66667C3.5 6.39052 3.72386 6.16667 4 6.16667H11.3333C11.6095 6.16667 11.8333 6.39052 11.8333 6.66667C11.8333 6.94281 11.6095 7.16667 11.3333 7.16667H4C3.72386 7.16667 3.5 6.94281 3.5 6.66667Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 12C3.5 11.7239 3.72386 11.5 4 11.5H11.3333C11.6095 11.5 11.8333 11.7239 11.8333 12C11.8333 12.2761 11.6095 12.5 11.3333 12.5H4C3.72386 12.5 3.5 12.2761 3.5 12Z",fill:"currentColor"})]}))})),k=c.memo((function(e){return(0,y.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6.66667C5.5 6.39052 5.72386 6.16667 6 6.16667H11.3333C11.6095 6.16667 11.8333 6.39052 11.8333 6.66667C11.8333 6.94281 11.6095 7.16667 11.3333 7.16667H6C5.72386 7.16667 5.5 6.94281 5.5 6.66667Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.7239 5.72386 11.5 6 11.5H11.3333C11.6095 11.5 11.8333 11.7239 11.8333 12C11.8333 12.2761 11.6095 12.5 11.3333 12.5H6C5.72386 12.5 5.5 12.2761 5.5 12Z",fill:"currentColor"})]}))})),w=c.memo((function(e){return(0,y.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6.66667C5.5 6.39052 5.72386 6.16667 6 6.16667H13.3333C13.6095 6.16667 13.8333 6.39052 13.8333 6.66667C13.8333 6.94281 13.6095 7.16667 13.3333 7.16667H6C5.72386 7.16667 5.5 6.94281 5.5 6.66667Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.7239 5.72386 11.5 6 11.5H13.3333C13.6095 11.5 13.8333 11.7239 13.8333 12C13.8333 12.2761 13.6095 12.5 13.3333 12.5H6C5.72386 12.5 5.5 12.2761 5.5 12Z",fill:"currentColor"})]}))})),T=n.g.gd,E={marginRight:10},S={sizeTextField:(0,s.Z)({width:90},E),resourcesSelector:{alignSelf:"center"},toolbarItem:E,checkbox:E},P=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,o=t.resourceManagementProps,i=T.asTextObjectConfiguration(n),a=i.getTextAlignment();return(0,y.jsxs)(d.sg,{noMargin:!0,children:[(0,y.jsxs)(f.ep,{noMargin:!0,alignItems:"center",children:[(0,y.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(h.c,{firstChild:!0,children:(0,y.jsx)(l.Trans,{id:"Size:"})}),(0,y.jsx)(x.Z,{commitOnBlur:!0,id:"text-object-font-size",type:"number",margin:"none",style:S.sizeTextField,value:i.getCharacterSize(),onChange:function(t){i.setCharacterSize(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(h.c,{children:(0,y.jsx)(l.Trans,{id:"Color:"})}),(0,y.jsx)(p.Z,{style:S.toolbarItem,disableAlpha:!0,color:{r:i.getColorR(),g:i.getColorG(),b:i.getColorB(),a:255},onChangeComplete:function(t){i.setColor(t.rgb.r,t.rgb.g,t.rgb.b),e.forceUpdate()}})]}),(0,y.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Bold"}),checked:i.isBold(),onCheck:function(t,n){i.setBold(n),e.forceUpdate()},style:S.checkbox}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Italic"}),checked:i.isItalic(),onCheck:function(t,n){i.setItalic(n),e.forceUpdate()},style:S.checkbox}),(0,y.jsxs)(v.Z,{size:"small",children:[(0,y.jsx)(j.ZP,{title:(0,y.jsx)(l.Trans,{id:"Align text on the left"}),children:(0,y.jsx)(b.Z,{variant:"left"===a?"contained":"outlined",color:"left"===a?"secondary":"default",onClick:function(){i.setTextAlignment("left"),e.forceUpdate()},children:(0,y.jsx)(Z,{})})}),(0,y.jsx)(j.ZP,{title:(0,y.jsx)(l.Trans,{id:"Align text on the center"}),children:(0,y.jsx)(b.Z,{variant:"center"===a?"contained":"outlined",color:"center"===a?"secondary":"default",onClick:function(){i.setTextAlignment("center"),e.forceUpdate()},children:(0,y.jsx)(k,{})})}),(0,y.jsx)(j.ZP,{title:(0,y.jsx)(l.Trans,{id:"Align text on the right"}),children:(0,y.jsx)(b.Z,{variant:"right"===a?"contained":"outlined",color:"right"===a?"secondary":"default",onClick:function(){i.setTextAlignment("right"),e.forceUpdate()},children:(0,y.jsx)(w,{})})})]})]})]}),(0,y.jsx)(d.x1,{children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,y.jsx)(g.Z,{project:r,resourceManagementProps:o,resourcesLoader:m.Z,resourceKind:"font",fullWidth:!0,canBeReset:!0,initialResourceName:i.getFontName(),onChange:function(t){i.setFontName(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Choose a font"}),hintText:(0,y.jsx)(l.Trans,{id:"Choose a font"})})})}),(0,y.jsx)(d.x1,{noMargin:!0,children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,y.jsx)(d.x1,{children:(0,y.jsx)(x.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Initial text to display"}),floatingLabelFixed:!0,id:"text-object-initial-text",commitOnBlur:!0,translatableHintText:{id:"Enter the text to be displayed by the object"},fullWidth:!0,multiline:!0,rows:8,rowsMax:8,value:i.getString(),onChange:function(t){i.setString(t),e.forceUpdate(),e.props.onSizeUpdated()}})})})})]})}}]),n}(c.Component),I=n(3115),D=n.g.gd,A=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,o=t.resourceManagementProps,i=D.asTiledSpriteConfiguration(n);return(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(I.Z,{project:r,resourceManagementProps:o,resourceKind:"image",resourceName:i.getTexture(),onChange:function(t){i.setTexture(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Select an image"})}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default width (in pixels)"}),fullWidth:!0,type:"number",value:i.getWidth(),onChange:function(t){i.setWidth(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default height (in pixels)"}),fullWidth:!0,type:"number",value:i.getHeight(),onChange:function(t){i.setHeight(parseInt(t,10)||0),e.forceUpdate()}})]})]})}}]),n}(c.Component),L=n.g.gd,M=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,o=t.resourceManagementProps,i=L.asPanelSpriteConfiguration(n);return(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(I.Z,{project:r,resourceManagementProps:o,resourceKind:"image",resourceName:i.getTexture(),onChange:function(t){i.setTexture(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Select an image"})}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Repeat borders and center textures (instead of stretching them)"}),checked:i.isTiled(),onCheck:function(t,n){i.setTiled(n),e.forceUpdate()}}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Top margin"}),fullWidth:!0,type:"number",value:i.getTopMargin(),onChange:function(t){i.setTopMargin(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Bottom margin"}),fullWidth:!0,type:"number",value:i.getBottomMargin(),onChange:function(t){i.setBottomMargin(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Left margin"}),fullWidth:!0,type:"number",value:i.getLeftMargin(),onChange:function(t){i.setLeftMargin(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Right margin"}),fullWidth:!0,type:"number",value:i.getRightMargin(),onChange:function(t){i.setRightMargin(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default width (in pixels)"}),fullWidth:!0,type:"number",value:i.getWidth(),onChange:function(t){i.setWidth(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Default height (in pixels)"}),fullWidth:!0,type:"number",value:i.getHeight(),onChange:function(t){i.setHeight(parseInt(t,10)||0),e.forceUpdate()}})]})]})}}]),n}(c.Component),F=n(4942),O=n(15861),R=n(29439),B=n(64687),_=n.n(B),N=n(93433),U=n(59863),H=n(18455),V=n(25588),W=n(42699),z=n(73693),G=n(1773),Y=n(35924),q=n(46448),X=n(3290),J=n(38501),K=n(86278),Q=n(37571),$=n(14331),ee=n(96355),te=n(24910),ne={container:{paddingLeft:12,paddingRight:12,display:"flex",alignItems:"center"},timeField:{width:75,fontSize:14},timeIcon:{paddingLeft:6,paddingRight:6},spacer:{width:16}},re=function(e){var t=e.animationName,n=e.direction,r=e.resourcesLoader,o=e.project,i=e.resourceExternalEditors,a=e.onEditWith,u=e.onDirectionUpdated,d=(0,J.Z)(),p=c.useState(!1),h=(0,R.Z)(p,2),g=h[0],m=h[1],v=n.getTimeBetweenFrames(),b=(0,ee.q)(n.getTimeBetweenFrames(),6),C=0===n.getSpritesCount(),Z=c.useContext(te.Z),k=function(e){if(e){var t=Math.max(parseFloat(e),1e-5);if(v!==t)!isNaN(t)&&(n.setTimeBetweenFrames(t),u&&u(),d())}},w=function(e){m(e)},T=i.filter((function(e){return"image"===e.kind})),E=n.getSpritesCount(),S="small"===(0,q.L)();return(0,y.jsx)(l.I18n,{children:function(e){var i=e.i18n;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(f.ep,{alignItems:"center",justifyContent:"flex-end",noColumnMargin:!0,children:[(0,y.jsxs)(f.pJ,{noMargin:!0,children:[!!T.length&&(0,y.jsx)(W.Z,{label:i._(S?E?{id:"Edit"}:{id:"Create"}:E?T[0].editDisplayName:T[0].createDisplayName),icon:(0,y.jsx)(Q.Z,{}),onClick:function(){return a(i,T[0])}}),(0,y.jsx)(W.Z,{label:(0,y.jsx)(l.Trans,{id:"Preview"}),icon:(0,y.jsx)($.Z,{}),onClick:function(){return w(!0)},disabled:C})]}),(0,y.jsxs)(f.pJ,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)(j.ZP,{title:(0,y.jsx)(l.Trans,{id:"Time between frames"}),children:(0,y.jsx)(V.Z,{style:(0,s.Z)((0,s.Z)({},ne.timeIcon),{},{color:C?Z.text.color.disabled:Z.text.color.primary})})}),(0,y.jsx)(x.Z,{id:"direction-time-between-frames",margin:"none",style:ne.timeField,type:"number",step:.005,precision:2,min:.01,max:5,commitOnBlur:!0,value:b,onChange:k,disabled:C}),(0,y.jsx)(z.Z,{checked:n.isLooping(),label:(0,y.jsx)(K.Z,{size:"body-small",color:"primary",style:{opacity:C?.5:1},children:(0,y.jsx)(l.Trans,{id:"Loop"})}),onCheck:function(e,t){return function(e){n.setLoop(!!e),d(),u&&u()}(t)},disabled:C})]})]}),g&&(0,y.jsx)(G.ZP,{title:(0,y.jsx)(l.Trans,{id:"Preview {animationName}",values:{animationName:t}}),actions:[(0,y.jsx)(G.vF,{label:(0,y.jsx)(l.Trans,{id:"Ok"}),primary:!0,onClick:function(){return w(!1)}},"ok")],onRequestClose:function(){return w(!1)},onApply:function(){return w(!1)},open:g,fullHeight:!0,flexBody:!0,children:(0,y.jsx)(Y.Z,{animationName:t,resourceNames:n.getSpriteNames().toJSArray(),getImageResourceSource:function(e){return r.getResourceFullUrl(o,e,{})},isImageResourceSmooth:function(e){return(0,X.X)(o,e)},timeBetweenFrames:v,onChangeTimeBetweenFrames:k,isLooping:n.isLooping(),hideAnimationLoader:!0})})]})}})},oe=n(70729),ie=n(8278),ae=n(57974),se=n(57244),le=n(85076),ce=n(30141),ue=n(1491),de=n(32628),pe=n(65056),he=n.g.gd,fe={spritesList:{whiteSpace:"nowrap",overflowY:"hidden",flex:1},thumbnailExtraStyle:{marginLeft:5},spriteThumbnailImage:{maxWidth:100,maxHeight:100,verticalAlign:"middle"}},ge=(0,U.SortableElement)((function(e){var t=e.sprite,n=e.project,r=e.resourcesLoader,o=e.selected,i=e.onSelect,a=e.onContextMenu,s=e.isFirst;return(0,y.jsx)(oe.Z,{selectable:!0,selected:o,onSelect:i,onContextMenu:a,resourceName:t.getImageName(),resourcesLoader:r,project:n,style:s?{}:fe.thumbnailExtraStyle})})),me=(0,U.SortableContainer)((function(e){var t=e.direction,n=e.project,r=e.resourcesLoader,o=(e.resourceManagementProps,e.selectedSprites),i=e.onSelectSprite,a=e.onOpenSpriteContextMenu,s=t.getSpritesCount(),l=s>1;return(0,y.jsx)("div",{style:fe.spritesList,children:[].concat((0,N.Z)((0,H.mapFor)(0,s,(function(e){var s=t.getSprite(e);return l?(0,y.jsx)(ge,{sprite:s,index:e,isFirst:0===e,selected:!!o[s.ptr],onContextMenu:function(e,t){return a(e,t,s)},onSelect:function(e){return i(s,e)},resourcesLoader:r,project:n},s.ptr):(0,y.jsx)(oe.Z,{selectable:!0,selected:!!o[s.ptr],onSelect:function(e){return i(s,e)},onContextMenu:function(e,t){return a(e,t,s)},resourceName:s.getImageName(),resourcesLoader:r,project:n},s.ptr)}))),[0===s&&(0,y.jsx)(oe.Z,{project:n,resourceName:"",resourcesLoader:r},"empty")])})})),xe=function(e){var t=e.lastIndexOf(".");return t<0?e:e.substring(0,t)},ve=function(e){var t=e.spriteConfiguration,n=e.direction,r=e.project,o=e.resourcesLoader,i=e.resourceManagementProps,a=e.onReplaceByDirection,u=e.onSpriteAdded,p=e.onSpriteUpdated,h=e.onFirstSpriteUpdated,g=e.onChangeName,m=e.objectName,x=e.animationName,v=c.useState(!1),b=(0,R.Z)(v,2),j=b[0],C=b[1],Z=c.useRef({}),k=c.useRef(null),w=(0,J.Z)(),T=(0,pe.Z)().showConfirmation,E=c.useCallback((function(e,t,r){for(var o=e;o<=t;++o){var i=n.getSprite(o);if(o===t)Z.current[i.ptr]=r;else{var a=o+1,s=!!Z.current[n.getSprite(a).ptr];Z.current[i.ptr]=s}}}),[n]),S=c.useCallback((function(e,t,r){for(var o=e;o>=t;--o){var i=n.getSprite(o);if(o===t)Z.current[i.ptr]=r;else{var a=o-1,s=!!Z.current[n.getSprite(a).ptr];Z.current[i.ptr]=s}}}),[n]),P=c.useCallback((function(e){var t=e.oldIndex,r=e.newIndex;if(t!==r){var o=!!Z.current[n.getSprite(t).ptr];n.moveSprite(t,r),t<r?E(t,r,o):S(t,r,o),w(),p&&p(),0!==t&&0!==r||h&&h()}}),[n,w,p,h,S,E]),I=c.useCallback((function(e){var r=function(e){var t=!1,n=!1,r=e.getSpritesCount()>0?e.getSprite(0):null;return r&&(t=(0,ie.ir)(r,e),n=(0,ie.sL)(r,e)),{allDirectionSpritesHaveSamePoints:t,allDirectionSpritesHaveSameCollisionMasks:n}}(n),o=r.allDirectionSpritesHaveSameCollisionMasks,i=r.allDirectionSpritesHaveSamePoints,a=function(e){var t=!1,n=!1,r=(0,ie.tY)(e,0,0,0).sprite;return r&&(t=(0,ie.fd)(r,e),n=(0,ie.Gn)(r,e)),{allObjectSpritesHaveSamePoints:t,allObjectSpritesHaveSameCollisionMasks:n}}(t),s=a.allObjectSpritesHaveSameCollisionMasks,l=a.allObjectSpritesHaveSamePoints,c=(0,ie.eS)(t),u=(0,ie.tY)(t,0,0,0).sprite,d=n.getSpritesCount()>0?n.getSprite(0):null;l&&u?(0,ie.xw)(u,e):i&&d&&(0,ie.xw)(d,e),s&&u?(0,ie.Vv)(u,e):o&&d&&(0,ie.Vv)(d,e),c&&e.setFullImageCollisionMask(!0)}),[n,t]),D=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t){var o,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.getSpritesCount(),e.next=3,i.onChooseResource({initialSourceName:t.name,multiSelection:!0,resourceKind:"image"});case 3:return(a=e.sent).forEach((function(e){(0,ae.r3)(r,e),r.getResourcesManager().addResource(e);var t=new he.Sprite;t.setImageName(e.getName()),I(t),u(t),n.addSprite(t),t.delete()})),a.forEach((function(e){return e.delete()})),w(),e.next=9,i.onFetchNewlyAddedResources();case 9:a.length&&p&&p(),0===o&&h&&h();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,r,i,w,p,u,h,I]),A=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t,s){var l,c,d,f,v,b;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=(0,H.mapFor)(0,n.getSpritesCount(),(function(e){return n.getSprite(e).getImageName()})),e.prev=1,C(!0),e.next=5,s.edit({project:r,i18n:t,getStorageProvider:i.getStorageProvider,resourceManagementProps:i,resourceNames:l,extraOptions:{singleFrame:!1,fps:n.getTimeBetweenFrames()>0?1/n.getTimeBetweenFrames():1,name:x||l[0]&&xe(l[0])||m,isLooping:n.isLooping(),existingMetadata:n.getMetadata()}});case 5:if(c=e.sent,C(!1),c){e.next=9;break}return e.abrupt("return");case 9:d=c.resources,f=c.newMetadata,v=c.newName,(b=new he.Direction).setTimeBetweenFrames(n.getTimeBetweenFrames()),b.setLoop(n.isLooping()),d.forEach((function(e){var t=new he.Sprite;if(t.setImageName(e.name),void 0!==e.originalIndex&&null!==e.originalIndex){var r=n.getSprite(e.originalIndex);(0,ie.xw)(r,t),(0,ie.Vv)(r,t)}else I(t);u(t),b.addSprite(t),t.delete()})),f&&b.setMetadata(JSON.stringify(f)),o.burstUrlsCacheForResources(r,l),a(b),v&&g(v),b.delete(),p&&p(),h&&h(),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(1),C(!1),console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,ce.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"});case 28:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t,n){return e.apply(this,arguments)}}(),[x,n,m,a,p,u,h,r,i,o,g,I]),L=c.useCallback((0,O.Z)(_().mark((function e(){var r,o,i,a,s,l,c,u;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z.current,o=t.getAnimation(0).getDirection(0).getSprite(0).ptr,i=!!r[o],a=(0,ie.__)(t),s=Object.keys(r).length===a,l=n.getSpritesCount()>0?n.getSprite(0):null,c=!t.adaptCollisionMaskAutomatically()&&l&&!l.isFullImageCollisionMask(),!(u=s&&c)){e.next=14;break}return e.next=11,T({title:{id:"Remove the sprite"},message:{id:"You are about to remove the last sprite of this object, which has a custom collision mask. The custom collision mask will be lost. Are you sure you want to continue?"},confirmButtonLabel:{id:"Remove"},dismissButtonLabel:{id:"Cancel"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:(0,H.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,ie.lg)(n,r)})),Z.current={},w(),p&&p(),i&&h&&h(),u&&t.setAdaptCollisionMaskAutomatically(!0);case 20:case"end":return e.stop()}}),e)}))),[p,h,t,w,T,n]),M=c.useCallback((function(){var e=Z.current;(0,H.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);(0,ie.DJ)(r,e)})),Z.current={},w(),p&&p()}),[p,t,w]),B=c.useCallback((function(e,t){Z.current=(0,s.Z)((0,s.Z)({},Z.current),{},(0,F.Z)({},e.ptr,t)),w()}),[w]),N=c.useCallback((function(e){Z.current=(0,F.Z)({},e.ptr,!0),w()}),[w]),U=c.useCallback((function(e,t,n){Z.current[n.ptr]||N(n),k.current&&k.current.open(e,t)}),[N]),V=i.getStorageProvider(),W=i.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===V.internalName}));return(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(re,{animationName:x,direction:n,resourcesLoader:o,project:r,resourceExternalEditors:i.resourceExternalEditors,onEditWith:A,onDirectionUpdated:p}),(0,y.jsxs)(f.ep,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,y.jsx)(me,{resourcesLoader:o,direction:n,project:r,onSortEnd:P,onAddSprite:D,resourceManagementProps:i,selectedSprites:Z.current,onSelectSprite:B,onOpenSpriteContextMenu:U,helperClass:"sortable-helper",lockAxis:"x",axis:"x"}),(0,y.jsx)(de.Z,{ref:k,buildMenuTemplate:function(e){return[{label:e._({id:"Delete selection"}),click:L},{label:e._({id:"Duplicate selection"}),click:M}]}}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsx)(se.Z,{onClick:function(){D(W[0])},label:(0,y.jsx)(l.Trans,{id:"Add a sprite"}),icon:(0,y.jsx)(ue.Z,{}),primary:!0,buildMenuTemplate:function(e){var t=i.getStorageProvider();return i.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(t){return{label:e._(t.displayName),click:function(){return D(t)}}}))}})})]}),j&&(0,y.jsx)(le.G,{})]})},be=n(51598),je=n(67835),Ce=n(32484),ye=n(4076),Ze=n(86578),ke=n(11374),we=n(79431),Te=n(2066),Ee=n(45987),Se={nameColumn:{width:"40%"},coordinateColumn:{width:96},toolColumn:{width:24,height:32}},Pe=n(53162),Ie=["pointX","pointY"],De=function(e){var t=e.pointX,n=e.pointY,r=(0,Ee.Z)(e,Ie),o=c.useContext(te.Z);return(0,y.jsxs)(ke.SC,{style:{backgroundColor:r.selected?o.listItem.selectedBackgroundColor:o.list.itemsBackgroundColor},onClick:function(){return r.onClick(r.pointName)},onPointerEnter:function(){return r.onPointerEnter(r.pointName)},onPointerLeave:r.onPointerLeave,children:[(0,y.jsx)(ke.Nn,{style:Se.nameColumn,children:(0,y.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:o.listItem.selectedTextColor}:void 0,value:r.pointName,id:r.pointName,fullWidth:!0,errorText:r.nameError?"This name is already taken":void 0,disabled:!r.onChangePointName,commitOnBlur:!0,onChange:r.onChangePointName||function(e){}})}),(0,y.jsx)(ke.Nn,{style:Se.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:r.isAutomatic?(0,y.jsx)(K.Z,{noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"(auto)"})}):(0,y.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:o.listItem.selectedTextColor}:void 0,value:(0,ee.R)(t,4).toString(),type:"number",id:"point-x",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangePointX(t)},onBlur:function(e){r.onChangePointX(parseFloat(e.currentTarget.value)||0)}})})}),(0,y.jsx)(ke.Nn,{style:Se.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:r.isAutomatic?(0,y.jsx)(K.Z,{noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"(auto)"})}):(0,y.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:o.listItem.selectedTextColor}:void 0,value:(0,ee.R)(n,4).toString(),type:"number",id:"point-y",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangePointY(t)},onBlur:function(e){r.onChangePointY(parseFloat(e.currentTarget.value)||0)}})})}),(0,y.jsxs)(ke.Nn,{style:Se.toolColumn,children:[!!r.onRemove&&(0,y.jsx)(be.Z,{size:"small",onClick:r.onRemove,children:(0,y.jsx)(Pe.Z,{})}),!!r.onEdit&&(0,y.jsx)(be.Z,{size:"small",onClick:r.onEdit,children:(0,y.jsx)(Q.Z,{})})]})]})},Ae=n.g.gd,Le=function(e){var t=c.useState({}),n=(0,R.Z)(t,2),r=n[0],o=n[1],i=e.pointsContainer,a=e.onHoverPoint,l=(0,J.Z)(),u=function(){l(),e.onPointsUpdated()},d=c.useCallback((function(){return a(null)}),[a]),p=i.getAllNonDefaultPoints(),h=(0,H.mapVector)(p,(function(t,n){var a=t.getName();return(0,y.jsx)(De,{pointX:t.getX(),pointY:t.getY(),onChangePointX:function(e){return function(e,t){e.setX(t),u()}(t,e)},onChangePointY:function(e){return function(e,t){e.setY(t),u()}(t,e)},pointName:a,selected:a===e.selectedPointName,nameError:r[a],onChangePointName:function(n){if(a!==n&&n){var r=!0;if(i.hasPoint(n))r=!1;else{var l=t.getName();t.setName(n),e.onRenamedPoint(l,n),e.selectedPointName===a&&e.onSelectPoint(n),u()}o((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,F.Z)({},a,!r))}))}},onPointerEnter:e.onHoverPoint,onPointerLeave:d,onClick:e.onSelectPoint,onRemove:function(){Te.ZP.showConfirmDialog("Are you sure you want to remove this point? This can't be undone.")&&(i.delPoint(a),u())}},"point-".concat(t.ptr))})),f=i.getOrigin(),g=i.getCenter(),m=(0,y.jsx)(De,{pointName:"Origin",pointX:f.getX(),pointY:f.getY(),onChangePointX:function(e){i.getOrigin().setX(e),u()},onChangePointY:function(e){i.getOrigin().setY(e),u()},onPointerEnter:e.onHoverPoint,onPointerLeave:d,onClick:e.onSelectPoint,selected:"Origin"===e.selectedPointName},"origin-point-row"),x=(0,y.jsx)(De,{pointName:"Center",isAutomatic:i.isDefaultCenterPoint(),pointX:g.getX(),pointY:g.getY(),onChangePointX:function(e){i.getCenter().setX(e),u()},onChangePointY:function(e){i.getCenter().setY(e),u()},onPointerEnter:e.onHoverPoint,onPointerLeave:d,onClick:e.onSelectPoint,selected:"Center"===e.selectedPointName,onEdit:i.isDefaultCenterPoint()?function(){i.setDefaultCenterPoint(!1),u()}:null,onRemove:i.isDefaultCenterPoint()?null:function(){i.setDefaultCenterPoint(!0),u()}},"center-point-row");return(0,y.jsx)(ke.RM,{children:[m,x].concat((0,N.Z)(h))})},Me=function(e){return(0,y.jsxs)(d.sg,{expand:!0,children:[(0,y.jsxs)(ke.iA,{children:[(0,y.jsx)(ke.xD,{children:(0,y.jsxs)(ke.SC,{children:[(0,y.jsx)(ke.bY,{style:Se.nameColumn,children:(0,y.jsx)(l.Trans,{id:"Point name"})}),(0,y.jsx)(ke.bY,{style:Se.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:"X"})}),(0,y.jsx)(ke.bY,{style:Se.coordinateColumn,padding:"none",children:(0,y.jsx)(d.sg,{children:"Y"})}),(0,y.jsx)(ke.bY,{style:Se.toolColumn})]})}),(0,y.jsx)(Le,{pointsContainer:e.pointsContainer,onHoverPoint:e.onHoverPoint,onSelectPoint:e.onSelectPoint,selectedPointName:e.selectedPointName,onPointsUpdated:e.onPointsUpdated,onRenamedPoint:e.onRenamedPoint})]}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(d.x1,{alignItems:"center",justifyContent:"center",children:(0,y.jsx)(Ce.Z,{primary:!0,icon:(0,y.jsx)(ue.Z,{}),label:(0,y.jsx)(l.Trans,{id:"Add a point"}),onClick:function(){var t=(0,we.Z)("Point",(function(t){return e.pointsContainer.hasPoint(t)})),n=new Ae.Point(t);e.pointsContainer.addPoint(n),n.delete(),e.onSelectPoint(t),e.onPointsUpdated()}})})]})},Fe=n(16792),Oe=1,Re=2,Be=3,_e=function(e,t){return e===Re?"Origin":e===Be?"Center":t.getName()},Ne=function(e){var t=c.useRef(null),n=c.useState({draggedPoint:null,draggedPointKind:null}),r=(0,R.Z)(n,2),o=r[0],i=r[1],a=e.pointsContainer,l=e.imageWidth,u=e.imageHeight,d=e.imageOffsetTop,p=e.imageOffsetLeft,h=e.imageZoomFactor,f=e.highlightedPointName,g=e.selectedPointName,m=e.onClickPoint,x=e.onPointsUpdated,v=e.forcedCursor,b=e.deactivateControls;b&&(o.draggedPoint||o.draggedPointKind)&&i({draggedPoint:null,draggedPointKind:null});var j=(0,J.Z)(),C=c.useCallback((function(e){if(!t.current)return null;var n=t.current.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var r=t.current.getScreenCTM().inverse(),o=n.matrixTransform(r);return[o.x,o.y]}),[]),Z=c.useCallback((function(e,t){o.draggedPoint||i({draggedPoint:e,draggedPointKind:t})}),[o.draggedPoint]),k=c.useCallback((function(){var e;o.draggedPoint&&((e=o.draggedPoint).setX(Math.round(2*e.getX())/2),e.setY(Math.round(2*e.getY())/2),x(),o.draggedPointKind&&o.draggedPoint&&m(_e(o.draggedPointKind,o.draggedPoint))),i({draggedPoint:null,draggedPointKind:null})}),[o.draggedPoint,o.draggedPointKind,x,m]),w=c.useCallback((function(t){var n=C(t);if(n){var r=o.draggedPoint,i=o.draggedPointKind;if(r&&i){var a=n[0]/h,s=n[1]/h;i===Be&&e.pointsContainer.setDefaultCenterPoint(!1),r.setX(a),r.setY(s),j()}}}),[j,C,h,e.pointsContainer,o]),T=c.useCallback((function(e){var t=e.x,n=e.y,r=e.kind,o=e.point,i=_e(r,o),a={cursor:v||"move"};return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)("line",{x1:"0",y1:-7,x2:"0",y2:7,style:{stroke:"white",strokeWidth:1,transform:"translate(".concat(t,"px, ").concat(n,"px)")}}),(0,y.jsx)("line",{x1:-7,y1:"0",x2:7,y2:"0",style:{stroke:"white",strokeWidth:1,transform:"translate(".concat(t,"px, ").concat(n,"px)")}}),(0,y.jsx)("circle",(0,s.Z)((0,s.Z)({onPointerDown:function(){return Z(o,r)}},(0,Fe.Y)({draggable:"true"})),{},{fill:i===f?"rgba(0,0,0,0.75)":i===g?"rgba(107,175,255,0.6)":"rgba(255,133,105,0.6)",stroke:i===f?"white":void 0,strokeWidth:2,cx:t,cy:n,r:7,style:a}))]},"point-".concat(i))}),[v,f,Z,g]),E=a.isDefaultCenterPoint(),S=c.useCallback((function(e){if("Origin"===e){var t=a.getOrigin();return T({x:t.getX()*h,y:t.getY()*h,kind:Re,point:t})}if("Center"===e){var n=a.getCenter();return T({x:(E?l/2:n.getX())*h,y:(E?u/2:n.getY())*h,kind:Be,point:n})}var r=a.getPoint(e);return T({x:r.getX()*h,y:r.getY()*h,kind:Oe,point:r})}),[E,u,l,h,a,T]),P=v?{cursor:v}:{},I=(0,s.Z)({position:"relative",width:"100%",height:"100%"},P),D=(0,s.Z)({position:"absolute",top:d||0,left:p||0,width:l*h,height:u*h,overflow:"visible"},P),A=a.getAllNonDefaultPoints(),L=[].concat((0,N.Z)((0,H.mapVector)(A,(function(e,t){return e.getName()}))),["Origin","Center"]).filter((function(e){return e!==g&&e!==f}));return(0,y.jsx)("div",{style:I,onPointerMove:b?null:w,onPointerUp:b?null:k,children:(0,y.jsxs)("svg",{style:D,ref:t,children:[L.map((function(e){return S(e)})),f&&g&&g===f?null:g?S(g):null,f&&S(f)]})})},Ue=n(81683),He=n(90242),Ve=n(57597),We=function(e){var t=e.spriteConfiguration,n=e.animationIndex,r=e.directionIndex,o=e.spriteIndex,i=e.sameForAllAnimations,a=e.sameForAllSprites,s=e.chooseAnimation,u=e.chooseDirection,d=e.chooseSprite,p=e.setSameForAllAnimations,h=e.setSameForAllSprites,g=e.setSameForAllAnimationsLabel,m=e.setSameForAllSpritesLabel,x=e.hideControlsForSprite,v=(0,ie.tY)(t,n,r,o),b=v.animation,j=v.direction,C=v.sprite,Z=!j||!j.getSpritesCount()||!C||x&&x(C);return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsxs)(f.ep,{noColumnMargin:!0,children:[(0,y.jsx)(Ue.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Animation"}),value:n,onChange:function(e,t,n){return s(parseInt(n,10)||0)},children:(0,H.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);return(0,y.jsx)(He.Z,{value:e,label:{id:"Animation #{i} {0}",values:{0:n.getName(),i:e}}},e)}))}),b&&b.getDirectionsCount()>1&&(0,y.jsx)(Ue.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Direction"}),value:r,onChange:function(e,t,n){return u(parseInt(n,10)||0)},children:(0,H.mapFor)(0,b.getDirectionsCount(),(function(e){return(0,y.jsx)(He.Z,{value:e,label:{id:"Direction #{i}",values:{i:e}}},e)}))}),j&&(0,y.jsx)(Ue.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Frame"}),value:o,onChange:function(e,t,n){return d(parseInt(n,10)||0)},children:(0,H.mapFor)(0,j.getSpritesCount(),(function(e){return(0,y.jsx)(He.Z,{value:e,label:{id:"Frame #{i}",values:{i:e}}},e)}))})]}),!Z&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ve.Z,{label:g,labelPosition:"right",toggled:i,onToggle:function(e,t){return p(t)}}),(0,y.jsx)(Ve.Z,{label:m,labelPosition:"right",toggled:a,onToggle:function(e,t){return h(t)}})]})]})},ze=n(59936),Ge=n(2632),Ye=n(20914),qe=n.g.gd,Xe={leftContainer:{display:"flex",overflow:"hidden",flexDirection:"column"},rightContainer:{display:"flex"}},Je={direction:"row",first:"preview",second:"properties",splitPercentage:66.67},Ke={direction:"column",first:"preview",second:"properties",splitPercentage:50},Qe=function(e){var t=e.objectConfiguration,n=e.resourcesLoader,r=e.project,o=e.onPointsUpdated,i=e.onRenamedPoint,a=c.useState(0),u=(0,R.Z)(a,2),p=u[0],h=u[1],f=c.useState(0),g=(0,R.Z)(f,2),m=g[0],x=g[1],v=c.useState(0),b=(0,R.Z)(v,2),j=b[0],C=b[1],Z=c.useState(null),k=(0,R.Z)(Z,2),w=k[0],T=k[1],E=c.useState(null),S=(0,R.Z)(E,2),P=S[0],I=S[1],D=(0,J.Z)(),A=(0,pe.Z)().showConfirmation,L=qe.asSpriteConfiguration(t),M=(0,ie.tY)(L,p,m,j),F=M.animation,B=M.sprite,N=c.useState(!!B&&(0,ie.fd)(B,t)),U=(0,R.Z)(N,2),V=U[0],W=U[1],z=c.useState(!(!B||!F)&&(0,ie.Mr)(B,F)),G=(0,R.Z)(z,2),Y=G[0],K=G[1],Q=c.useCallback((function(e,t){F&&B&&(e?(0,H.mapFor)(0,L.getAnimationsCount(),(function(e){var t=L.getAnimation(e);(0,ie.c)(B,t)})):t&&(0,ie.c)(B,F)),D(),o&&o()}),[F,B,L,D,o]),$=function(e){h(e),x(0),C(0)},ee=function(e){x(e),C(0)},te=function(e){C(e)};c.useEffect((function(){B&&F&&K((0,ie.Mr)(B,F))}),[F,B]);var ne=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,A({title:{id:"Use same points for all animations?"},message:{id:"Having the same points for all animations will erase and reset all the other animations points. This can't be undone. Are you sure you want to share these points amongst all the animations of the object?"},confirmButtonLabel:{id:"Use same points"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t||Y,W(n=t),K(r),Q(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Y,Q,A]),re=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,A({title:{id:"Use same points for all frames?"},message:{id:"Having the same points for all frames will erase and reset all the other frames points. This can't be undone. Are you sure you want to share these points amongst all the frames of the animation?"},confirmButtonLabel:{id:"Use same points"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t,W(n=t&&V),K(r),Q(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[V,Q,A]),oe="small"===(0,q.L)()?Ke:Je;if(!t.getAnimationsCount())return null;var ae=B?B.getImageName():"",se={preview:{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,y.jsx)(Ye.Z,{background:"medium",style:Xe.leftContainer,square:!0,children:(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:(0,y.jsx)(X.Z,{resourceName:ae,imageResourceSource:n.getResourceFullUrl(r,ae,{}),isImageResourceSmooth:(0,X.X)(r,ae),renderOverlay:function(e){return B&&(0,y.jsx)(Ne,(0,s.Z)((0,s.Z)({},e),{},{pointsContainer:B,onPointsUpdated:function(){return Q(V,Y)},selectedPointName:w,highlightedPointName:P,onClickPoint:T}))}})})})}},properties:{type:"secondary",noTitleBar:!0,renderEditor:function(){return(0,y.jsx)(Ye.Z,{background:"medium",style:Xe.rightContainer,square:!0,children:(0,y.jsxs)(d.sg,{noMargin:!0,expand:!0,children:[(0,y.jsx)(d.x1,{children:(0,y.jsx)(d.sg,{expand:!0,children:(0,y.jsx)(We,{spriteConfiguration:L,animationIndex:p,directionIndex:m,spriteIndex:j,chooseAnimation:$,chooseDirection:ee,chooseSprite:te,sameForAllAnimations:V,sameForAllSprites:Y,setSameForAllAnimations:ne,setSameForAllSprites:re,setSameForAllAnimationsLabel:(0,y.jsx)(l.Trans,{id:"Share same points for all animations"}),setSameForAllSpritesLabel:(0,y.jsx)(l.Trans,{id:"Share same points for all sprites of this animation"})})})}),(0,y.jsxs)(Ge.Z,{children:[!!B&&(0,y.jsx)(Me,{pointsContainer:B,onPointsUpdated:function(){return Q(V,Y)},selectedPointName:w,onHoverPoint:I,onSelectPoint:T,onRenamedPoint:i}),!B&&(0,y.jsx)(Ze.Z,{children:(0,y.jsx)(l.Trans,{id:"Choose an animation and frame to edit the points"})})]})]})})}}};return(0,y.jsx)("div",{style:{flex:1},children:(0,y.jsx)(ze.Z,{editors:se,initialNodes:oe})})},$e={coordinateColumn:{width:96},toolColumn:{width:24}},et=["verticeX","verticeY","parentVerticeId"],tt=function(e){var t=e.verticeX,n=e.verticeY,r=(e.parentVerticeId,(0,Ee.Z)(e,et)),o=c.useContext(te.Z);return(0,y.jsxs)(ke.SC,{style:{backgroundColor:r.selected?o.listItem.selectedBackgroundColor:o.list.itemsBackgroundColor},onPointerEnter:r.onPointerEnter,onPointerLeave:r.onPointerLeave,onClick:r.onClick,children:[(0,y.jsx)(ke.Nn,{style:$e.coordinateColumn,children:(0,y.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:o.listItem.selectedTextColor}:void 0,value:(0,ee.R)(t,4).toString(),type:"number",id:"vertice-x",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangeVerticeX(t)},onBlur:function(e){r.onChangeVerticeX(parseFloat(e.currentTarget.value)||0)}})}),(0,y.jsx)(ke.Nn,{style:$e.coordinateColumn,children:(0,y.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:o.listItem.selectedTextColor}:void 0,value:(0,ee.R)(n,4).toString(),type:"number",id:"vertice-y",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangeVerticeY(t)},onBlur:function(e){r.onChangeVerticeY(parseFloat(e.currentTarget.value)||0)}})}),(0,y.jsx)(ke.Nn,{style:$e.toolColumn,children:!!r.onRemove&&(0,y.jsx)(be.Z,{size:"small",onClick:r.onRemove,disabled:!r.canRemove,children:(0,y.jsx)(Pe.Z,{})})})]})},nt=n(3108),rt=n(6403),ot=n.g.gd,it=function(e,t,n,r,o){var i=r*r,a=o*o,s=Number.POSITIVE_INFINITY,l=0,c=0,u=[0,0];if((0,H.mapVector)(e,(function(e,r){var o=e.getVertices(),a=o.at(o.size()-1),d=a.x,p=a.y;(0,H.mapVector)(o,(function(e,o){var a=e.x,h=e.y;u=lt(t,n,d,p,a,h,u);var f=st(u[0],u[1],d,p)>i&&st(u[0],u[1],a,h)>i,g=st(t,n,u[0],u[1]);g<s&&f&&(s=g,l=r,c=o),d=a,p=h}))})),s<a){var d=e.at(l).getVertices(),p=d.at(at(c-1,d.size())),h=d.at(c);return{x:(u=lt(t,n,p.x,p.y,h.x,h.y,u))[0],y:u[1],polygonIndex:l,vertexIndex:c}}return null},at=function(e,t){return(e%t+t)%t},st=function(e,t,n,r){var o=e-n,i=t-r;return o*o+i*i},lt=function(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=st(n,r,o,i);if(0===s)return[n,r];var l=Math.max(0,Math.min(1,((e-n)*(o-n)+(t-r)*(i-r))/s));return a[0]=n+l*(o-n),a[1]=r+l*(i-r),a},ct=n(75779),ut=n.g.gd,dt=function(e){return(0,y.jsxs)(d.sg,{expand:!0,children:[(0,y.jsxs)(ke.iA,{children:[(0,y.jsx)(ke.xD,{children:(0,y.jsxs)(ke.SC,{children:[(0,y.jsx)(ke.bY,{style:$e.coordinateColumn,children:"X"}),(0,y.jsx)(ke.bY,{style:$e.coordinateColumn,children:"Y"}),(0,y.jsx)(ke.Nn,{style:$e.toolColumn})]})}),(0,y.jsx)(ke.RM,{children:(0,H.mapVector)(e.vertices,(function(t,n){return(0,y.jsx)(tt,{parentVerticeId:e.vertices.ptr.toString(),onPointerEnter:function(){return e.onHoverVertice(t.ptr)},onPointerLeave:e.onHoverVertice,selected:e.selectedVerticePtr===t.ptr,onClick:function(){return e.onClickVertice(t.ptr)},verticeX:t.get_x(),verticeY:t.get_y(),onChangeVerticeX:function(n){return function(t,n){t.set_x(Math.min(e.spriteWidth,Math.max(n,0))),e.onUpdated()}(t,n)},onChangeVerticeY:function(n){return function(t,n){t.set_y(Math.min(e.spriteHeight,Math.max(n,0))),e.onUpdated()}(t,n)},onRemove:function(){ut.removeFromVectorVector2f(e.vertices,n),e.onUpdated()},canRemove:e.vertices.size()>3},t.ptr)}))})]}),(0,y.jsx)(d.LZ,{}),e.hasWarning&&(0,y.jsx)(rt.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"The polygon is not convex. Ensure it is, otherwise the collision mask won't work."})}),(0,y.jsx)(d.x1,{justifyContent:"center",children:(0,y.jsx)(je.Z,{leftIcon:(0,y.jsx)(ue.Z,{}),label:(0,y.jsx)(l.Trans,{id:"Add a vertex"}),onClick:function(){!function(e){var t=e.size();if(t>0){var n=0,r=e.at(t-1),o=r.x,i=r.y,a=-1;(0,H.mapFor)(0,t,(function(t){var r=e.at(t),s=r.x,l=r.y,c=s-o,u=l-i,d=c*c+u*u;d>a&&(a=d,n=t),o=s,i=l}));var s=e.at(at(n-1,t)),l=e.at(n),c=new ot.Vector2f;c.x=(s.x+l.x)/2,c.y=(s.y+l.y)/2,e.push_back(c),e.moveVector2fInVector(t,n),c.delete()}else{var u=new ot.Vector2f;e.push_back(u),u.delete()}}(e.vertices),e.onUpdated()}})})]})},pt=function(e){var t=c.useContext(te.Z).message.warning,n=e.polygon.getVertices(),r=n.size(),o=e.polygon.isConvex(),i=[o?null:(0,y.jsx)(be.Z,{size:"small",tooltip:{id:"Polygon is not convex!"},children:(0,y.jsx)(ct.Z,{style:{color:t}})},"not-convex"),(0,y.jsx)(be.Z,{size:"small",onClick:function(t){t.stopPropagation(),e.onRemove()},tooltip:{id:"Delete collision mask"},children:(0,y.jsx)(Pe.Z,{})},"delete-mask")];return(0,y.jsxs)(nt.UQ,{defaultExpanded:!0,children:[(0,y.jsx)(nt._m,{actions:i,children:(0,y.jsxs)(K.Z,{displayInlineAsSpan:!0,children:[3===r&&(0,y.jsx)(l.Trans,{id:"Triangle"}),4===r&&(0,y.jsx)(l.Trans,{id:"Quadrilateral"}),r>=5&&(0,y.jsx)(l.Trans,{id:"Polygon with {verticesCount} vertices",values:{verticesCount:r}})]})}),(0,y.jsx)(nt.X1,{disableGutters:!0,children:(0,y.jsx)(dt,{vertices:n,hasWarning:!o,onHoverVertice:e.onHoverVertice,onClickVertice:e.onClickVertice,selectedVerticePtr:e.selectedVerticePtr,onUpdated:e.onUpdated,spriteWidth:e.spriteWidth,spriteHeight:e.spriteHeight})})]})},ht=function(e){var t=e.polygons,n=e.spriteHeight,r=e.spriteWidth,o=e.onPolygonsUpdated,i=e.onSetFullImageCollisionMask,a=e.onSetAutomaticallyAdaptCollisionMasks,s=e.onHoverVertice,u=e.onClickVertice,p=e.selectedVerticePtr,h=c.useCallback((function(){var e=ut.Polygon2d.createRectangle(r,n);e.move(r/2,n/2),t.push_back(e),o()}),[n,r,t,o]),f=c.useCallback((function(e){ut.removeFromVectorPolygon2d(t,e),0===t.size()&&i(),o()}),[t,o,i]);return c.useEffect((function(){0===t.size()&&h()}),[t,h]),(0,y.jsx)(c.Fragment,{children:(0,y.jsxs)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:[(0,y.jsx)(Ge.Z,{children:(0,H.mapVector)(t,(function(e,t){return(0,y.jsx)(pt,{polygon:e,onUpdated:o,onRemove:function(){return f(t)},onHoverVertice:s,onClickVertice:u,selectedVerticePtr:p,spriteWidth:r,spriteHeight:n},"polygon-".concat(t))}))}),(0,y.jsx)(d.sg,{children:(0,y.jsx)(d.x1,{alignItems:"center",justifyContent:"center",children:(0,y.jsx)(se.Z,{primary:!0,icon:(0,y.jsx)(ue.Z,{}),label:(0,y.jsx)(l.Trans,{id:"Add collision mask"}),onClick:h,buildMenuTemplate:function(e){return[{label:e._({id:"Reset to automatic collision mask"}),click:a},{label:e._({id:"Use full image as collision mask"}),click:i}]}})})})]})})},ft=n.g.gd,gt=function(e){var t=c.useRef(null),n=c.useState(null),r=(0,R.Z)(n,2),o=r[0],i=r[1],a=c.useState(null),l=(0,R.Z)(a,2),u=l[0],d=l[1],p=e.polygons,h=e.imageZoomFactor,f=e.imageHeight,g=e.imageWidth,m=e.imageOffsetTop,x=e.imageOffsetLeft,v=e.isDefaultBoundingBox,b=e.onPolygonsUpdated,j=e.onClickVertice,C=e.forcedCursor,Z=e.deactivateControls,k=e.hideControls;Z&&(o&&i(null),u&&d(null));var w=(0,J.Z)(),T=c.useCallback((function(e,t,n){o||i({vertex:e,polygonIndex:t,vertexIndex:n})}),[o]),E=c.useCallback((function(e){if(!t.current)return null;var n=t.current.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var r=t.current.getScreenCTM().inverse(),o=n.matrixTransform(r);return[o.x,o.y]}),[]),S=c.useCallback((function(e,t){var n=g*h,r=f*h;return{frameX:Math.min(n,Math.max(e,0)),frameY:Math.min(r,Math.max(t,0))}}),[h,f,g]),P=c.useCallback((function(e){var t=p.at(e.polygonIndex).getVertices(),n=t.size(),r=new ft.Vector2f;r.x=e.x,r.y=e.y,t.push_back(r),r.delete(),t.moveVector2fInVector(n,e.vertexIndex);var o=t.at(e.vertexIndex);i({vertex:o,polygonIndex:e.polygonIndex,vertexIndex:e.vertexIndex}),d(null),j(o.ptr),b()}),[j,b,p]),I=c.useCallback((function(){if(!o)return!1;var e=p.at(o.polygonIndex).getVertices(),t=10/h,n=5/h,r=function(e,t,n,r){var o=n*n,i=r*r,a=e.at(t);if(e.size()<=3)return null;var s=e.at(at(t-1,e.size())),l=e.at(at(t+1,e.size())),c=a.x,u=a.y,d=s.x,p=s.y,h=l.x,f=l.y;if(st(c,u,d,p)<o)return[d,p];if(st(c,u,h,f)<o)return[h,f];var g=lt(c,u,s.x,s.y,l.x,l.y);return st(c,u,g[0],g[1])<i?g:null}(e,o.vertexIndex,t,n);return!!r&&(o.vertex.set_x(r[0]),o.vertex.set_y(r[1]),!0)}),[o,h,p]),D=c.useCallback((function(){if(o)if(I()){var e=p.at(o.polygonIndex).getVertices();ft.removeFromVectorVector2f(e,o.vertexIndex),b(),j(null)}else(t=o.vertex).set_x(Math.round(2*t.get_x())/2),t.set_y(Math.round(2*t.get_y())/2),b(),j(o.vertex.ptr);var t;i(null)}),[p,o,b,j,I]),A=c.useCallback((function(e){var t=E(e);if(t){var n=S(t[0],t[1]),r=n.frameX/h,o=n.frameY/h,i=it(p,r,o,20/h,10/h);i&&P(i)}}),[p,P,S,E,h]),L=C?{cursor:C}:{},M=(0,s.Z)({cursor:"move"},L),F=(0,s.Z)({},L),O=(0,s.Z)({position:"relative",width:"100%",height:"100%"},L),B=(0,s.Z)({position:"absolute",top:m||0,left:x||0,width:g*h,height:f*h,overflow:"visible"},L);return(0,y.jsx)("div",{style:O,onPointerMove:Z?null:function(e){var t=E(e);if(t)if(o){var n=S(t[0],t[1]),r=n.frameX/h,i=n.frameY/h;o.vertex.set_x(r),o.vertex.set_y(i),I(),w()}else{var a=t[0]/h,s=t[1]/h;d(it(p,a,s,20/h,40/h))}},onPointerUp:Z?null:D,onPointerDown:Z?null:A,children:(0,y.jsxs)("svg",{style:B,ref:t,children:[v&&(0,y.jsx)("polygon",{style:L,fill:"rgba(255,133,105,0.2)",stroke:"rgba(255,133,105,0.5)",strokeWidth:1,fillRule:"evenodd",points:"0,0 ".concat(g*h,",0 ").concat(g*h,",").concat(f*h," 0,").concat(f*h)}),!v&&(0,y.jsxs)(c.Fragment,{children:[(0,H.mapVector)(p,(function(e,t){var n=e.getVertices();return(0,y.jsx)("polygon",{fill:"rgba(255,133,105,0.2)",stroke:"rgba(255,133,105,0.5)",strokeWidth:2,fillRule:"evenodd",points:(0,H.mapVector)(n,(function(e,t){return"".concat(e.get_x()*h,",").concat(e.get_y()*h)})).join(" "),style:F},"polygon-".concat(t))})),!k&&(0,H.mapVector)(p,(function(t,n){var r=t.getVertices();return(0,H.mapVector)(r,(function(t,r){return(0,c.createElement)("circle",(0,s.Z)((0,s.Z)({onPointerDown:Z?null:function(){return T(t,n,r)}},(0,Fe.Y)({draggable:"true"})),{},{key:"polygon-".concat(n,"-vertex-").concat(r),fill:t.ptr===e.highlightedVerticePtr?"rgba(0,0,0,0.75)":t.ptr===e.selectedVerticePtr?"rgba(107,175,255,0.75)":"rgba(255,133,105,0.75)",stroke:t.ptr===e.highlightedVerticePtr?"white":void 0,strokeWidth:2,cx:t.get_x()*h,cy:t.get_y()*h,r:7,style:M}))}))})),!k&&u&&(0,y.jsx)("circle",{onPointerDown:Z?null:function(){return P(u)},fill:"rgba(0,0,0,0.75)",stroke:"white",strokeWidth:2,cx:u.x*h,cy:u.y*h,r:5,style:M},"new-vertex")]})]})})},mt=n.g.gd,xt={leftContainer:{display:"flex",overflow:"hidden",flexDirection:"column"},rightContainer:{display:"flex",paddingLeft:4,paddingRight:4}},vt={direction:"row",first:"preview",second:"properties",splitPercentage:66.67},bt={direction:"column",first:"preview",second:"properties",splitPercentage:50},jt=function(e){var t=e.objectConfiguration,n=e.resourcesLoader,r=e.project,o=e.onMasksUpdated,i=e.onCreateMatchingSpriteCollisionMask,a=c.useState(0),u=(0,R.Z)(a,2),p=u[0],h=u[1],f=c.useState(0),g=(0,R.Z)(f,2),m=g[0],x=g[1],v=c.useState(0),b=(0,R.Z)(v,2),j=b[0],C=b[1],Z=c.useState(null),k=(0,R.Z)(Z,2),w=k[0],T=k[1],E=c.useState(null),S=(0,R.Z)(E,2),P=S[0],I=S[1],D=c.useState(0),A=(0,R.Z)(D,2),L=A[0],M=A[1],F=c.useState(0),B=(0,R.Z)(F,2),N=B[0],U=B[1],V=(0,J.Z)(),W=(0,pe.Z)().showConfirmation,z=mt.asSpriteConfiguration(t),G=(0,ie.tY)(z,p,m,j),Y=G.animation,K=G.sprite,Q=c.useState(!!K&&(0,ie.Gn)(K,z)),$=(0,R.Z)(Q,2),ee=$[0],te=$[1],ne=c.useState(!(!K||!Y)&&(0,ie.rY)(K,Y)),re=(0,R.Z)(ne,2),oe=re[0],ae=re[1],se=c.useCallback((function(e,t){Y&&K&&(e?(0,H.mapFor)(0,z.getAnimationsCount(),(function(e){var t=z.getAnimation(e);(0,ie.CO)(K,t)})):t&&(0,ie.CO)(K,Y)),V(),o&&o()}),[Y,K,z,V,o]),le=function(e){h(e),x(0),C(0)},ce=function(e){x(e),C(0)},ue=function(e){C(e)};c.useEffect((function(){Y&&K&&ae((0,ie.rY)(K,Y))}),[Y,K]);var de=c.useCallback((0,O.Z)(_().mark((function e(){var t,n=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],K){e.next=3;break}return e.abrupt("return");case 3:t&&z.setAdaptCollisionMaskAutomatically(!1),K.setFullImageCollisionMask(t),se(ee,oe);case 6:case"end":return e.stop()}}),e)}))),[K,se,ee,oe,z]),he=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,W({title:{id:"Use same collision mask for all animations?"},message:{id:"Having the same collision masks for all animations will erase and reset all the other animations collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the animations of the object?"},confirmButtonLabel:{id:"Use same collision mask"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t||oe,te(n=t),ae(r),se(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[oe,se,W]),fe=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,W({title:{id:"Use same collision mask for all frames?"},message:{id:"Having the same collision masks for all frames will erase and reset all the other frames collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the frames of the animation?"},confirmButtonLabel:{id:"Use same collision mask"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t,te(n=t&&ee),ae(r),se(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ee,se,W]),ge=function(e,t){M(e),U(t)},me=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!K||K.isFullImageCollisionMask()){e.next=6;break}return e.next=3,W({title:{id:"Adapt collision mask?"},message:{id:"You will lose all custom collision masks. Do you want to continue?"},confirmButtonLabel:{id:"Adapt automatically"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:z.setAdaptCollisionMaskAutomatically(t),t&&(i(),te(!0),ae(!0)),V();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[z,V,i,W,K]),xe=c.useCallback((function(){de(!1),me(!1)}),[de,me]),ve=c.useCallback((function(){z.setAdaptCollisionMaskAutomatically(!1),se(ee,oe)}),[z,se,ee,oe]),be="small"===(0,q.L)()?bt:vt;if(!t.getAnimationsCount())return null;var Ce=K?K.getImageName():"",ye={preview:{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,y.jsx)(Ye.Z,{background:"medium",style:xt.leftContainer,square:!0,children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:(0,y.jsx)(X.Z,{resourceName:Ce,imageResourceSource:n.getResourceFullUrl(r,Ce,{}),isImageResourceSmooth:(0,X.X)(r,Ce),onSize:ge,renderOverlay:function(e){return K&&(0,y.jsx)(gt,(0,s.Z)((0,s.Z)({},e),{},{isDefaultBoundingBox:K.isFullImageCollisionMask(),hideControls:z.adaptCollisionMaskAutomatically(),polygons:K.getCustomCollisionMask(),onPolygonsUpdated:ve,highlightedVerticePtr:w,selectedVerticePtr:P,onClickVertice:I}))}})})})}},properties:{type:"secondary",noTitleBar:!0,renderEditor:function(){return(0,y.jsx)(Ye.Z,{background:"medium",style:xt.rightContainer,square:!0,children:(0,y.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,y.jsx)(d.x1,{children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,y.jsx)(We,{spriteConfiguration:z,animationIndex:p,directionIndex:m,spriteIndex:j,chooseAnimation:le,chooseDirection:ce,chooseSprite:ue,sameForAllAnimations:ee,sameForAllSprites:oe,setSameForAllAnimations:he,setSameForAllSprites:fe,setSameForAllAnimationsLabel:(0,y.jsx)(l.Trans,{id:"Share same collision masks for all animations"}),setSameForAllSpritesLabel:(0,y.jsx)(l.Trans,{id:"Share same collision masks for all sprites of this animation"}),hideControlsForSprite:function(e){return z.adaptCollisionMaskAutomatically()||e.isFullImageCollisionMask()}})})}),(0,y.jsxs)(Ge.Z,{children:[!!K&&!K.isFullImageCollisionMask()&&!z.adaptCollisionMaskAutomatically()&&(0,y.jsx)(c.Fragment,{children:(0,y.jsx)(ht,{polygons:K.getCustomCollisionMask(),onPolygonsUpdated:ve,onSetFullImageCollisionMask:function(){return de(!0)},onSetAutomaticallyAdaptCollisionMasks:function(){return me(!0)},onHoverVertice:T,onClickVertice:I,selectedVerticePtr:P,spriteWidth:L,spriteHeight:N})}),!!K&&!K.isFullImageCollisionMask()&&z.adaptCollisionMaskAutomatically()&&(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(rt.Z,{kind:"info",children:(0,y.jsx)(l.Trans,{id:"Automatic collision mask activated. Click on the button to replace it with a custom one."})}),(0,y.jsx)(d.x1,{justifyContent:"center",children:(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Use a custom collision mask"}),primary:!1,onClick:xe})})]}),!!K&&K.isFullImageCollisionMask()&&(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(rt.Z,{kind:"info",children:(0,y.jsx)(l.Trans,{id:"This sprite uses a rectangle that is as large as the sprite for its collision mask."})}),(0,y.jsx)(d.x1,{justifyContent:"center",children:(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Use a custom collision mask"}),primary:!1,onClick:xe})})]}),!K&&(0,y.jsx)(Ze.Z,{children:(0,y.jsx)(l.Trans,{id:"Choose an animation and frame to edit the collision masks"})})]})]})})}}};return(0,y.jsx)("div",{style:{flex:1},children:(0,y.jsx)(ze.Z,{editors:ye,initialNodes:be})})},Ct=n(68196),yt=n(3429),Zt=function(){var e=(0,yt.Z)("intermediate-changing-animations").DismissableTutorialMessage;return e?(0,y.jsxs)(d.sg,{noMargin:!0,children:[e,(0,y.jsx)(d.LZ,{})]}):null},kt=n(9383),wt=n(38589),Tt=n(62572),Et=n(65752),St=n(85919),Pt=n.g.gd,It=function(e,t){return new Promise((function(n,r){e.addEventListener("load",(function(){return n(e)})),e.addEventListener("error",(function(){return r(new Error("Failed to load image"))})),e.src=t}))},Dt=function(e,t,n,r){return e[(n*r+t<<2)+3]>=64},At=function(){var e=(0,O.Z)(_().mark((function e(t){var n,r,o,i,a,s,l,c,u,d,p,h,f,g,m,x,v,b,j,C,y,Z,k,w,T,E,S,P,I;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Image,(t.startsWith("http://")||t.startsWith("https://"))&&(n.crossOrigin=(0,St.bc)(t)?"use-credentials":"anonymous"),e.prev=2,e.next=5,It(n,t);case 5:if(r=document.createElement("canvas"),o=n.width,i=n.height,r.width=o,r.height=i,a=r.getContext("2d")){e.next=13;break}throw new Error("Unable to get 2D context.");case 13:a.drawImage(n,0,0),s=a.getImageData(0,0,r.width,r.height),l=s.data,c=null,u=null,d=null,p=null,h=0;case 21:if(!(h<i)){e.next=37;break}f=!1,g=0;case 24:if(!(g<o)){e.next=32;break}if(!Dt(l,g,h,o)){e.next=29;break}return d=h,f=!0,e.abrupt("break",32);case 29:g++,e.next=24;break;case 32:if(!f){e.next=34;break}return e.abrupt("break",37);case 34:h++,e.next=21;break;case 37:if(null!==d){e.next=39;break}throw new Error("No non-transparent pixel found while scanning rows from top to bottom.");case 39:m=i-1;case 40:if(!(m>=0)){e.next=56;break}x=!1,v=0;case 43:if(!(v<o)){e.next=51;break}if(!Dt(l,v,m,o)){e.next=48;break}return p=m,x=!0,e.abrupt("break",51);case 48:v++,e.next=43;break;case 51:if(!x){e.next=53;break}return e.abrupt("break",56);case 53:m--,e.next=40;break;case 56:if(null!==p){e.next=58;break}throw new Error("No non-transparent pixel found while scanning rows from bottom to top.");case 58:b=0;case 59:if(!(b<o)){e.next=75;break}j=!1,C=d;case 62:if(!(C<=p)){e.next=70;break}if(!Dt(l,b,C,o)){e.next=67;break}return c=b,j=!0,e.abrupt("break",70);case 67:C++,e.next=62;break;case 70:if(!j){e.next=72;break}return e.abrupt("break",75);case 72:b++,e.next=59;break;case 75:if(null!==c){e.next=77;break}throw new Error("No non-transparent pixel found while scanning columns from left to right.");case 77:y=o-1;case 78:if(!(y>=0)){e.next=94;break}Z=!1,k=d;case 81:if(!(k<=p)){e.next=89;break}if(!Dt(l,y,k,o)){e.next=86;break}return u=y,Z=!0,e.abrupt("break",89);case 86:k++,e.next=81;break;case 89:if(!Z){e.next=91;break}return e.abrupt("break",94);case 91:y--,e.next=78;break;case 94:if(null!==u){e.next=96;break}throw new Error("No non-transparent pixel found while scanning columns from right to left.");case 96:if(T=p-d+1,E=(c+u+1)/2,S=(d+p+1)/2,!((w=u-c+1)<=0||T<=0)){e.next=102;break}throw new Error("Invalid collision mask size.");case 102:return(P=Pt.Polygon2d.createRectangle(w,T)).move(E,S),(I=new Pt.VectorPolygon2d).push_back(P),e.abrupt("return",I);case 109:throw e.prev=109,e.t0=e.catch(2),new Error("Unable to load image: "+e.t0);case 112:case"end":return e.stop()}}),e,null,[[2,109]])})));return function(t){return e.apply(this,arguments)}}(),Lt=n.g.gd,Mt=(0,wt.x)("sprite-animations-list"),Ft={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"},animationLine:{marginBottom:16}};function Ot(e){var t=e.objectConfiguration,n=e.project,r=e.layout,o=e.object,i=e.objectName,a=e.resourceManagementProps,p=e.onSizeUpdated,h=e.onObjectUpdated,g=e.isAnimationListLocked,v=void 0!==g&&g,b=c.useState(!1),j=(0,R.Z)(b,2),C=j[0],Z=j[1],k=c.useState(!1),w=(0,R.Z)(k,2),T=w[0],E=w[1],S=c.useState(!1),P=(0,R.Z)(S,2),I=P[0],D=P[1],A=(0,J.Z)(),L=Lt.asSpriteConfiguration(t),M="small"===(0,q.L)(),B=function(){for(var e=0;e<L.getAnimationsCount();e++)for(var t=L.getAnimation(e),n=0;n<t.getDirectionsCount();n++){if(t.getDirection(n).getSpritesCount()>0)return!1}return!0},N=c.useRef(null),U=c.useState(null),V=(0,R.Z)(U,2),W=V[0],z=V[1],Y=c.useRef(null);c.useEffect((function(){N.current&&Y.current&&W&&(N.current.scrollTo(Y.current),z(null),Y.current=null)}),[W]);var X=(0,pe.Z)().showConfirmation,Q=c.useRef(null),$=c.useContext(te.Z),ee=c.useState({}),ne=(0,R.Z)(ee,2),re=ne[0],oe=ne[1],ae=c.useCallback((0,O.Z)(_().mark((function e(){var t,r,o,i,a,s,l,c,u,d,p,h;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==L.getAnimationsCount()){e.next=2;break}return e.abrupt("return");case 2:if(0!==(t=L.getAnimation(0)).getDirectionsCount()){e.next=5;break}return e.abrupt("return");case 5:if(0!==(r=t.getDirection(0)).getSpritesCount()){e.next=8;break}return e.abrupt("return");case 8:return o=r.getSprite(0),i=o.getImageName(),a=m.Z.getResourceFullUrl(n,i,{}),s=null,e.prev=12,e.next=15,At(a);case 15:s=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),console.error("Unable to create a matching collision mask for the sprite, fallback to full image collision mask.",e.t0);case 21:for(l=0;l<L.getAnimationsCount();l++)for(c=L.getAnimation(l),u=0;u<c.getDirectionsCount();u++)for(d=c.getDirection(u),p=0;p<d.getSpritesCount();p++)(h=d.getSprite(p)).setFullImageCollisionMask(!s),s&&h.setCustomCollisionMask(s);A();case 23:case"end":return e.stop()}}),e,null,[[12,18]])}))),[L,n,A]),se=c.useCallback((function(e){if(0!==L.getAnimationsCount()){var t=L.getAnimation(0);if(0!==t.getDirectionsCount()){var n=t.getDirection(0);if(0!==n.getSpritesCount()){var r=n.getSprite(0);e.setFullImageCollisionMask(r.isFullImageCollisionMask()),e.setCustomCollisionMask(r.getCustomCollisionMask()),A()}}}}),[L,A]),le=c.useCallback((function(e){var t=Q.current;null!==t&&(oe({}),L.moveAnimation(t,e>t?e-1:e),0!==t&&0!==e||!L.adaptCollisionMaskAutomatically()||ae(),A())}),[L,A,ae]),ce=c.useCallback((function(){oe({});var e=new Lt.Animation;e.setDirectionsCount(1),L.addAnimation(e),e.delete(),A(),p(),h&&h(),setTimeout((function(){N.current&&N.current.scrollToBottom()}),100)}),[A,h,p,L]),de=c.useCallback(function(){var e=(0,O.Z)(_().mark((function e(t,n){var r,o,i,a,s,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,ie.__)(L),o=L.getAnimation(t).getDirection(0).getSpritesCount()===r,i=(0,ie.tY)(L,t,0,0).sprite,a=!L.adaptCollisionMaskAutomatically()&&i&&!i.isFullImageCollisionMask(),l=(s=o&&a)?{id:"Are you sure you want to remove this animation? You will lose the custom collision mask you have set for this object."}:{id:"Are you sure you want to remove this animation?"},e.next=8,X({title:{id:"Remove the animation"},message:l,confirmButtonLabel:{id:"Remove"},dismissButtonLabel:{id:"Cancel"}});case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:oe({}),L.removeAnimation(t),A(),p(),0===t&&L.adaptCollisionMaskAutomatically()&&ae(),s&&L.setAdaptCollisionMaskAutomatically(!0),h&&h();case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[A,h,p,X,L,ae]),he=c.useCallback((function(e,t){var i=L.getAnimation(e),a=i.getName();if(a!==t){oe({});var c=(0,H.mapFor)(0,L.getAnimationsCount(),(function(t){return t===e?void 0:L.getAnimation(t).getName()})).filter(Boolean);""!==t&&c.some((function(e){return e===t}))?oe((0,s.Z)((0,s.Z)({},re),{},(0,F.Z)({},e,(0,y.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(i.setName(t),r&&o&&Lt.WholeProjectRefactorer.renameObjectAnimation(n,r,o,a,t),A(),h&&h())}}),[A,r,re,o,h,n,L]),fe=c.useCallback((function(e,t,n){L.getAnimation(e).setDirection(n,t),A(),h&&h()}),[A,h,L]);return(0,y.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,y.jsxs)(y.Fragment,{children:[0===L.getAnimationsCount()?(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,y.jsx)(Ct.$,{title:(0,y.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,y.jsx)(l.Trans,{id:"Animations are a sequence of images."}),actionLabel:(0,y.jsx)(l.Trans,{id:"Add an animation"}),helpPagePath:"/objects/sprite",tutorialId:"intermediate-changing-animations",onAction:ce})}):(0,y.jsx)(Ge.Z,{ref:N,children:(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(Zt,{}),(0,H.mapFor)(0,L.getAnimationsCount(),(function(e){var r=L.getAnimation(e),o=r.getName(),c=W===o?Y:null;return(0,y.jsx)(Mt,{beginDrag:function(){return Q.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){le(e)},children:function(u){var p=u.connectDragSource,f=u.connectDropTarget,g=u.isOver,b=u.canDrop;return f((0,y.jsxs)("div",{style:Ft.rowContainer,children:[v&&(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,y.jsx)(K.Z,{size:"block-title",children:o})}),!v&&g&&(0,y.jsx)(Et.Z,{canDrop:b}),!v&&(0,y.jsxs)("div",{ref:c,style:(0,s.Z)((0,s.Z)({},Ft.rowContent),{},{backgroundColor:$.list.itemsBackgroundColor}),children:[(0,y.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[p((0,y.jsx)("span",{children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(Tt.V,{})})})),(0,y.jsx)(K.Z,{noMargin:!0,noShrink:!0,children:(0,y.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(x.Z,{margin:"none",commitOnBlur:!0,errorText:re[e],translatableHintText:{id:"Optional animation name"},value:r.getName(),onChange:function(t){return he(e,t)},fullWidth:!0}),(0,y.jsx)(be.Z,{size:"small",onClick:function(){return de(e,t)},children:(0,y.jsx)(Pe.Z,{})})]}),(0,y.jsx)(d.LZ,{})]}),(0,y.jsx)("div",{style:Ft.animationLine,children:(0,y.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,H.mapFor)(0,r.getDirectionsCount(),(function(t){var s=r.getDirection(t);return(0,y.jsx)(ve,{spriteConfiguration:L,direction:s,project:n,resourcesLoader:m.Z,resourceManagementProps:a,onReplaceByDirection:function(n){return fe(e,t,n)},objectName:i,animationName:o,onChangeName:function(t){return he(e,t)},onSpriteUpdated:h,onFirstSpriteUpdated:0===e?function(){L.adaptCollisionMaskAutomatically()&&ae()}:void 0,onSpriteAdded:function(e){L.adaptCollisionMaskAutomatically()&&se(e)}},t)}))})})]},e))}},e)}))]})}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsxs)(f.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[M?(0,y.jsx)(kt.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return D(!0)},disabled:B(),buildMenuTemplate:function(e){return[{label:e._({id:"Edit points"}),disabled:B(),click:function(){return Z(!0)}},{label:e._({id:"Advanced options"}),disabled:B(),click:function(){return E(!0)}}]}}):(0,y.jsxs)(f.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return D(!0)},disabled:B()}),!v&&(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Edit points"}),onClick:function(){return Z(!0)},disabled:B()}),!v&&(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Advanced options"}),onClick:function(){return E(!0)},disabled:B()})]}),!v&&(0,y.jsx)(Ce.Z,{label:(0,y.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:ce,icon:(0,y.jsx)(ue.Z,{})})]})}),T&&(0,y.jsx)(G.ZP,{title:(0,y.jsx)(l.Trans,{id:"Advanced options"}),actions:[(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return E(!1)}},"close")],maxWidth:"sm",flexBody:!0,onRequestClose:function(){return E(!1)},open:!0,children:(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Don't play the animation when the object is far from the camera or hidden (recommended for performance)"}),checked:!L.getUpdateIfNotVisible(),onCheck:function(e,t){L.setUpdateIfNotVisible(!t),A(),h&&h()}})})}),C&&(0,y.jsx)(G.ZP,{title:(0,y.jsx)(l.Trans,{id:"Edit points"}),actions:[(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return Z(!1)}},"close")],secondaryActions:[(0,y.jsx)(ye.Z,{helpPagePath:"/objects/sprite/edit-points"},"help")],onRequestClose:function(){return Z(!1)},maxWidth:"lg",flexBody:!0,fullHeight:!0,open:C,children:(0,y.jsx)(Qe,{objectConfiguration:L,resourcesLoader:m.Z,project:n,onPointsUpdated:h,onRenamedPoint:function(e,t){return r&&o&&Lt.WholeProjectRefactorer.renameObjectPoint(n,r,o,e,t)}})}),I&&(0,y.jsx)(G.ZP,{title:(0,y.jsx)(l.Trans,{id:"Edit collision masks"}),actions:[(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return D(!1)}},"close")],secondaryActions:[(0,y.jsx)(ye.Z,{helpPagePath:"/objects/sprite/collision-mask"},"help")],maxWidth:"lg",flexBody:!0,fullHeight:!0,onRequestClose:function(){return D(!1)},open:I,children:(0,y.jsx)(jt,{objectConfiguration:L,resourcesLoader:m.Z,project:n,onMasksUpdated:h,onCreateMatchingSpriteCollisionMask:ae})})]})}})}var Rt=n(90286),Bt=n(11858),_t=n.g.gd,Nt=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.objectConfiguration,n=_t.asShapePainterConfiguration(t);return(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Draw the shapes relative to the object position on the scene"}),checked:!n.areCoordinatesAbsolute(),onCheck:function(t,r){r?n.setCoordinatesRelative():n.setCoordinatesAbsolute(),e.forceUpdate()}}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Clear the rendered image between each frame"}),checked:n.isClearedBetweenFrames(),onCheck:function(t,r){n.setClearBetweenFrames(r),e.forceUpdate()}}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(Rt.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Outline color"}),disableAlpha:!0,fullWidth:!0,color:(0,Bt.KC)({r:n.getOutlineColorR(),g:n.getOutlineColorG(),b:n.getOutlineColorB()}),onChange:function(t){var r=(0,Bt.A0)(t);r&&(n.setOutlineColor(r.r,r.g,r.b),e.forceUpdate())}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Outline opacity (0-255)"}),fullWidth:!0,type:"number",value:n.getOutlineOpacity(),onChange:function(t){n.setOutlineOpacity(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Outline size (in pixels)"}),fullWidth:!0,type:"number",value:n.getOutlineSize(),onChange:function(t){n.setOutlineSize(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(Rt.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Fill color"}),disableAlpha:!0,fullWidth:!0,color:(0,Bt.KC)({r:n.getFillColorR(),g:n.getFillColorG(),b:n.getFillColorB()}),onChange:function(t){var r=(0,Bt.A0)(t);r&&(n.setFillColor(r.r,r.g,r.b),e.forceUpdate())}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Fill opacity (0-255)"}),fullWidth:!0,type:"number",value:n.getFillOpacity(),onChange:function(t){n.setFillOpacity(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsx)(f.ep,{alignItems:"center",noMargin:!0,children:(0,y.jsxs)(Ue.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Anti-aliasing"}),value:n.getAntialiasing(),onChange:function(t,r,o){n.setAntialiasing(o),e.forceUpdate()},children:[(0,y.jsx)(He.Z,{value:"none",label:{id:"None"}},"none"),(0,y.jsx)(He.Z,{value:"low",label:{id:"Low quality"}},"low"),(0,y.jsx)(He.Z,{value:"medium",label:{id:"Medium quality"}},"medium"),(0,y.jsx)(He.Z,{value:"high",label:{id:"High quality"}},"high")]})})]})}}]),n}(c.Component),Ut=n(95644),Ht=n(94446),Vt=n.g.gd,Wt=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,o=t.resourceManagementProps,i=Vt.asParticleEmitterConfiguration(n),a=(0,Ht.cG)(n.getType());return(0,y.jsxs)(f.ak,{noMargin:!0,children:[a.map((function(e){return(0,y.jsx)(Ut.Z,{tutorialId:e},e)})),(0,y.jsxs)(Ue.Z,{fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle type"}),value:i.getRendererType(),onChange:function(t,n,r){var o=parseInt(r,10)||0;i.setRendererType(o),o!==Vt.ParticleEmitterObject.Quad&&i.setParticleTexture(""),e.forceUpdate()},children:[(0,y.jsx)(He.Z,{value:Vt.ParticleEmitterObject.Point,label:{id:"Circle"}}),(0,y.jsx)(He.Z,{value:Vt.ParticleEmitterObject.Line,label:{id:"Line"}}),(0,y.jsx)(He.Z,{value:Vt.ParticleEmitterObject.Quad,label:{id:"Image"}})]}),i.getRendererType()===Vt.ParticleEmitterObject.Point&&(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Size"}),fullWidth:!0,type:"number",value:i.getRendererParam1(),onChange:function(t){i.setRendererParam1(parseFloat(t)),e.forceUpdate()}}),i.getRendererType()===Vt.ParticleEmitterObject.Line&&(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Lines length"}),fullWidth:!0,type:"number",value:i.getRendererParam1(),onChange:function(t){i.setRendererParam1(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Lines thickness"}),fullWidth:!0,type:"number",value:i.getRendererParam2(),onChange:function(t){i.setRendererParam2(parseFloat(t)),e.forceUpdate()}})]}),i.getRendererType()===Vt.ParticleEmitterObject.Quad&&(0,y.jsx)(I.Z,{project:r,resourceManagementProps:o,resourceKind:"image",resourceName:i.getParticleTexture(),onChange:function(t){i.setParticleTexture(t),e.forceUpdate()},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Select an image"})}),i.getRendererType()===Vt.ParticleEmitterObject.Quad&&(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles start width"}),fullWidth:!0,type:"number",value:i.getRendererParam1(),onChange:function(t){i.setRendererParam1(Math.max(0,parseFloat(t))),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles start height"}),fullWidth:!0,type:"number",value:i.getRendererParam2(),onChange:function(t){i.setRendererParam2(Math.max(0,parseFloat(t))),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(Rt.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles start color"}),disableAlpha:!0,fullWidth:!0,color:(0,Bt.KC)({r:i.getParticleRed1(),g:i.getParticleGreen1(),b:i.getParticleBlue1()}),onChange:function(t){var n=(0,Bt.A0)(t);n&&(i.setParticleRed1(n.r),i.setParticleGreen1(n.g),i.setParticleBlue1(n.b),e.forceUpdate())}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Start opacity (0-255)"}),fullWidth:!0,type:"number",value:i.getParticleAlpha1(),onChange:function(t){i.setParticleAlpha1(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(Rt.Z,{floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particles end color"}),disableAlpha:!0,fullWidth:!0,color:(0,Bt.KC)({r:i.getParticleRed2(),g:i.getParticleGreen2(),b:i.getParticleBlue2()}),onChange:function(t){var n=(0,Bt.A0)(t);n&&(i.setParticleRed2(n.r),i.setParticleGreen2(n.g),i.setParticleBlue2(n.b),e.forceUpdate())}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"End opacity (0-255)"}),fullWidth:!0,type:"number",value:i.getParticleAlpha2(),onChange:function(t){i.setParticleAlpha2(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Additive rendering"}),checked:i.isRenderingAdditive(),onCheck:function(t,n){n?i.setRenderingAdditive():i.setRenderingAlpha(),e.forceUpdate()}}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Delete when out of particles"}),checked:i.getDestroyWhenNoParticles(),onCheck:function(t,n){i.setDestroyWhenNoParticles(n),e.forceUpdate()}}),(0,y.jsx)(f.ep,{noMargin:!0,children:(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Maximum number of particles displayed"}),fullWidth:!0,type:"number",value:i.getMaxParticleNb(),onChange:function(t){i.setMaxParticleNb(parseInt(t,10)||0),e.forceUpdate()}})}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Number of particles in tank (-1 for infinite)"}),fullWidth:!0,type:"number",value:i.getTank(),onChange:function(t){i.setTank(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Flow of particles (particles/seconds)"}),fullWidth:!0,type:"number",value:i.getFlow(),onChange:function(t){i.setFlow(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Minimum emitter force applied on particles"}),fullWidth:!0,type:"number",value:i.getEmitterForceMin(),onChange:function(t){i.setEmitterForceMin(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Maximum emitter force applied on particles"}),fullWidth:!0,type:"number",value:i.getEmitterForceMax(),onChange:function(t){i.setEmitterForceMax(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Spray cone angle (in degrees)"}),fullWidth:!0,type:"number",value:i.getConeSprayAngle(),onChange:function(t){i.setConeSprayAngle(parseInt(t,10)||0),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Radius of the emitter"}),fullWidth:!0,type:"number",value:i.getZoneRadius(),onChange:function(t){i.setZoneRadius(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Gravity on particles on X axis"}),fullWidth:!0,type:"number",value:i.getParticleGravityX(),onChange:function(t){i.setParticleGravityX(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Gravity on particles on Y axis"}),fullWidth:!0,type:"number",value:i.getParticleGravityY(),onChange:function(t){i.setParticleGravityY(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle minimum lifetime (in seconds)"}),fullWidth:!0,type:"number",value:i.getParticleLifeTimeMin(),onChange:function(t){i.setParticleLifeTimeMin(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle maximum lifetime (in seconds)"}),fullWidth:!0,type:"number",value:i.getParticleLifeTimeMax(),onChange:function(t){i.setParticleLifeTimeMax(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle start size (in percents)"}),fullWidth:!0,type:"number",value:i.getParticleSize1(),onChange:function(t){i.setParticleSize1(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle end size (in percents)"}),fullWidth:!0,type:"number",value:i.getParticleSize2(),onChange:function(t){i.setParticleSize2(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsxs)(f.ep,{noMargin:!0,children:[(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle minimum rotation speed (degrees/second)"}),fullWidth:!0,type:"number",value:i.getParticleAngle1(),onChange:function(t){i.setParticleAngle1(parseFloat(t)),e.forceUpdate()}}),(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Particle maximum rotation speed (degrees/second)"}),fullWidth:!0,type:"number",value:i.getParticleAngle2(),onChange:function(t){i.setParticleAngle2(parseFloat(t)),e.forceUpdate()}})]}),(0,y.jsx)(f.ep,{noMargin:!0,children:(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Jump forward in time on creation (in seconds)"}),fullWidth:!0,type:"number",value:i.getJumpForwardInTimeOnCreation(),onChange:function(t){i.setJumpForwardInTimeOnCreation(parseFloat(t)),e.forceUpdate()}})})]})}}]),n}(c.Component),zt=n(72611),Gt=n(94258),Yt=n(44397),qt=n.g.gd,Xt=function(e){var t=e.objectConfiguration,n=e.project,r=e.resourceManagementProps,o=e.unsavedChanges,i=qt.castObject(t,qt.ObjectConfiguration),a=i.getProperties(),s=(0,Gt.Z)(a,(function(e){return e.getProperties()}),(function(e,t,n){return e.updateProperty(t,n)})),u=(0,Yt.gF)()[i.getType()],p=(0,Ht.cG)(i.getType());return(0,y.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,y.jsxs)(f.ak,{noMargin:!0,children:[p.map((function(e){return(0,y.jsx)(Ut.Z,{tutorialId:e},e)})),s.length?(0,y.jsxs)(c.Fragment,{children:[u?(0,y.jsx)(d.x1,{children:(0,y.jsx)(f.ak,{noMargin:!0,children:u.map((function(e,n){var r=e.kind,o=e.message;return(0,y.jsx)(rt.Z,{kind:r,children:t._(o)},n)}))})}):null,(0,y.jsx)(zt.Z,{unsavedChanges:o,schema:s,instances:[i],project:n,resourceManagementProps:r})]}):(0,y.jsx)(Ze.Z,{children:(0,y.jsx)(l.Trans,{id:"There is nothing to configure for this object. You can still use events to interact with the object."})})]})}})},Jt=n(33133),Kt=n(36262),Qt=n.g.gd,$t=function(e){var t=(0,J.Z)(),n=e.objectConfiguration,r=e.project,o=e.layout,i=e.objectName,a=e.resourceManagementProps,s=e.unsavedChanges,u=Qt.asCustomObjectConfiguration(n),p=u.getProperties(),h=(0,Gt.Z)(p,(function(e){return e.getProperties()}),(function(e,t,n){return e.updateProperty(t,n)})),g=(0,Yt.gF)()[u.getType()],m=c.useContext(Kt.ZP).values,x=(0,Ht.cG)(u.getType()),v=r.hasEventsBasedObject(u.getType())?r.getEventsBasedObject(u.getType()):null;return(0,y.jsx)(l.I18n,{children:function(e){var n=e.i18n;return(0,y.jsxs)(f.ak,{noMargin:!0,children:[x.map((function(e){return(0,y.jsx)(Ut.Z,{tutorialId:e},e)})),h.length||v&&v.getObjectsCount()?(0,y.jsxs)(c.Fragment,{children:[g?(0,y.jsx)(d.x1,{children:(0,y.jsx)(f.ak,{noMargin:!0,children:g.map((function(e,t){var r=e.kind,o=e.message;return(0,y.jsx)(rt.Z,{kind:r,children:n._(o)},t)}))})}):null,(0,y.jsx)(zt.Z,{unsavedChanges:s,schema:h,instances:[u],project:r,resourceManagementProps:a}),v&&(0,H.mapFor)(0,v.getObjectsCount(),(function(e){var n=v.getObjectAt(e),s=u.getChildObjectConfiguration(n.getName()),l=vn.getEditorConfigurationForCustomObject(r,s.getType()).component,c=Qt.MetadataProvider.getObjectMetadata(Qt.JsPlatform.get(),s.getType()).getIconFilename(),p=(0,Ht.cG)(s.getType()),h=p.filter((function(e){return!m.hiddenTutorialHints[e]}));return(0,y.jsxs)(nt.UQ,{defaultExpanded:!0,children:[(0,y.jsxs)(nt._m,{children:[c?(0,y.jsx)(Jt.q,{src:c,alt:n.getName(),size:20}):null,(0,y.jsx)(d.sg,{expand:!0,children:(0,y.jsx)(K.Z,{size:"block-title",children:n.getName()})})]}),(0,y.jsx)(nt.X1,{children:(0,y.jsxs)(d.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[h.length?(0,y.jsx)(d.x1,{children:(0,y.jsx)(f.ak,{expand:!0,children:p.map((function(e){return(0,y.jsx)(Ut.Z,{tutorialId:e},e)}))})}):null,(0,y.jsx)(d.x1,{noMargin:!0,children:(0,y.jsx)(d.sg,{expand:!0,children:(0,y.jsx)(l,{objectConfiguration:s,project:r,layout:o,resourceManagementProps:a,onSizeUpdated:t,objectName:i+" "+n.getName()})})})]})})]},n.getName())}))]}):(0,y.jsx)(Ze.Z,{children:(0,y.jsx)(l.Trans,{id:"There is nothing to configure for this object. You can still use events to interact with the object."})})]})}})},en=n(66733),tn=n(51626),nn=n(32832),rn=n(13923),on=n(37762),an=n(58247),sn=n.g.gd,ln=(0,wt.x)("model3d-animations-list"),cn={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},un=function(e){if(!e)return!0;for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);if("2d"!==n.getRenderingType())for(var r=n.getEffects(),o=0;o<r.getEffectsCount();o++){var i=r.getEffectAt(o).getEffectType();if("Scene3D::AmbientLight"===i||"Scene3D::DirectionalLight"===i||"Scene3D::HemisphereLight"===i)return!0}}return!1},dn=function(e){var t=e.objectConfiguration,n=e.propertyName,r=(0,J.Z)(),o=t.getProperties(),i=c.useCallback((function(e,n){t.updateProperty(e,n),r()}),[t,r]),a=o.get(n),s=a.getMeasurementUnit(),l={label:(0,Gt.j)(s),tooltipContent:(0,y.jsx)(rn.Z,{label:s.getLabel(),description:s.getDescription(),elementsWithWords:s.getElementsWithWords()})};return(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelFixed:!0,floatingLabelText:a.getLabel(),onChange:function(e){return i(n,e)},value:a.getValue(),endAdornment:(0,y.jsx)(j.ZP,{title:l.tooltipContent,children:(0,y.jsx)(tn.Z,{position:"end",children:l.label})})})},n)},pn=function(e){var t=e.objectConfiguration,n=e.propertyName,r=(0,J.Z)(),o=t.getProperties(),i=c.useCallback((function(e,n){t.updateProperty(e,n),r()}),[t,r]),a=o.get(n);return(0,y.jsx)(u.Z,{checked:"true"===a.getValue(),label:(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(d.x1,{noMargin:!0,children:a.getLabel()}),(0,y.jsx)(en.Z,{style:{display:"inline"},children:(0,y.jsx)(nn.r,{source:a.getDescription()})})]}),onCheck:function(e,t){i(n,t?"1":"0")}})},hn=function(e){var t=e.objectConfiguration,n=e.propertyName,r=e.project,o=e.resourceManagementProps,i=e.onChange,a=(0,J.Z)(),s=c.useRef(m.Z).current,l=t.getProperties(),u=c.useCallback((function(e,n){t.updateProperty(e,n),i(n),a()}),[t,i,a]),d=l.get(n),p=d.getExtraInfo();return(0,y.jsx)(g.Z,{project:r,resourceKind:p.size()>0?p.at(0):"",floatingLabelText:d.getLabel(),resourceManagementProps:o,initialResourceName:d.getValue(),onChange:function(e){return u(n,e)},resourcesLoader:s,fullWidth:!0})},fn=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,o=e.object,i=e.onSizeUpdated,a=e.onObjectUpdated,p=e.resourceManagementProps,h=c.useRef(null),g=c.useState(null),m=(0,R.Z)(g,2),v=m[0],b=m[1],j=c.useRef(null);c.useEffect((function(){h.current&&j.current&&v&&(h.current.scrollTo(j.current),b(null),j.current=null)}),[v]);var C=(0,pe.Z)().showAlert,Z=c.useRef(null),k=c.useContext(te.Z),w=(0,J.Z)(),T=sn.asModel3DConfiguration(t),E=t.getProperties(),S=c.useState({}),P=(0,R.Z)(S,2),I=P[0],D=P[1],A=c.useState(null),L=(0,R.Z)(A,2),M=L[0],O=L[1],B=c.useCallback((function(e){an.Z.get3DModel(n,e).then((function(e){O(e)}))}),[n]);B(E.get("modelResourceName").getValue());var _=c.useCallback((function(e,n){t.updateProperty(e,n),w()}),[t,w]),N=c.useCallback((function(e){B(e)}),[B]),U=c.useCallback((function(){if(M){D({});var e,t=(0,H.mapFor)(0,T.getAnimationsCount(),(function(e){return T.getAnimation(e).getSource()})),n=!1,r=(0,on.Z)(M.animations);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(!t.includes(o.name)){var s=T.hasAnimationNamed(o.name)?"":o.name,l=new sn.Model3DAnimation;l.setName(s),l.setSource(o.name),T.addAnimation(l),l.delete(),n=!0}}}catch(c){r.e(c)}finally{r.f()}n?(w(),i(),a&&a(),setTimeout((function(){h.current&&h.current.scrollToBottom()}),100)):C({title:{id:"No new animation"},message:{id:"Every animation from the GLB file is already in the list."}})}}),[w,M,T,a,i,C]),V=c.useCallback((function(){D({});var e=new sn.Model3DAnimation;T.addAnimation(e),e.delete(),w(),i(),a&&a(),setTimeout((function(){h.current&&h.current.scrollToBottom()}),100)}),[w,a,i,T]),W=c.useCallback((function(e){D({}),T.removeAnimation(e),w(),i(),a&&a()}),[w,a,i,T]),z=c.useCallback((function(e){var t=Z.current;null!==t&&(D({}),T.moveAnimation(t,e>t?e-1:e),w())}),[T,w]),G=c.useCallback((function(e,t){var i=T.getAnimation(e).getName();if(i!==t){var c=T.getAnimation(e);D({}),""!==t&&T.hasAnimationNamed(t)?D((0,s.Z)((0,s.Z)({},I),{},(0,F.Z)({},e,(0,y.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(c.setName(t),r&&o&&sn.WholeProjectRefactorer.renameObjectAnimation(n,r,o,i,t),w(),a&&a())}}),[T,r,o,w,a,I,n]),Y=M?M.animations.map((function(e){return(0,y.jsx)(He.Z,{value:e.name,label:e.name,shouldNotTranslate:!0},e.name)})):[];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Ge.Z,{ref:h,children:(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(hn,{objectConfiguration:t,propertyName:"modelResourceName",project:n,resourceManagementProps:p,onChange:N}),(0,y.jsxs)(Ue.Z,{value:E.get("materialType").getValue(),floatingLabelText:E.get("materialType").getLabel(),helperMarkdownText:E.get("materialType").getDescription(),onChange:function(e,t,n){_("materialType",n)},children:[(0,y.jsx)(He.Z,{label:{id:"No lighting effect"},value:"Basic"},"Basic"),(0,y.jsx)(He.Z,{label:{id:"Emit all ambient light"},value:"StandardWithoutMetalness"},"StandardWithoutMetalness"),(0,y.jsx)(He.Z,{label:{id:"Keep model material"},value:"KeepOriginal"},"KeepOriginal")]}),"Basic"!==E.get("materialType").getValue()&&!un(r)&&(0,y.jsx)(rt.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:'Make sure to set up a light in the effects of the layer or chose "No lighting effect" - otherwise the object will appear black.'})}),(0,y.jsx)(K.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default orientation"})}),(0,y.jsxs)(f.ep,{expand:!0,noColumnMargin:!0,children:[(0,y.jsx)(dn,{objectConfiguration:t,propertyName:"rotationX"}),(0,y.jsx)(dn,{objectConfiguration:t,propertyName:"rotationY"}),(0,y.jsx)(dn,{objectConfiguration:t,propertyName:"rotationZ"})]}),(0,y.jsx)(K.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default size"})}),(0,y.jsxs)(f.ep,{expand:!0,noColumnMargin:!0,children:[(0,y.jsx)(dn,{objectConfiguration:t,propertyName:"width"}),(0,y.jsx)(dn,{objectConfiguration:t,propertyName:"height"}),(0,y.jsx)(dn,{objectConfiguration:t,propertyName:"depth"})]}),(0,y.jsx)(pn,{objectConfiguration:t,propertyName:"keepAspectRatio"}),(0,y.jsx)(K.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Points"})}),(0,y.jsxs)(f.ep,{expand:!0,noColumnMargin:!0,children:[(0,y.jsxs)(Ue.Z,{value:E.get("originLocation").getValue(),floatingLabelText:E.get("originLocation").getLabel(),helperMarkdownText:E.get("originLocation").getDescription(),onChange:function(e,t,n){_("originLocation",n)},fullWidth:!0,children:[(0,y.jsx)(He.Z,{label:{id:"Model origin"},value:"ModelOrigin"},"ModelOrigin"),(0,y.jsx)(He.Z,{label:{id:"Top-left corner"},value:"TopLeft"},"TopLeftCorner"),(0,y.jsx)(He.Z,{label:{id:"Object center"},value:"ObjectCenter"},"ObjectCenter"),(0,y.jsx)(He.Z,{label:{id:"Bottom center (on Z axis)"},value:"BottomCenterZ"},"BottomCenterZ"),(0,y.jsx)(He.Z,{label:{id:"Bottom center (on Y axis)"},value:"BottomCenterY"},"BottomCenterY")]}),(0,y.jsxs)(Ue.Z,{value:E.get("centerLocation").getValue(),floatingLabelText:E.get("centerLocation").getLabel(),helperMarkdownText:E.get("centerLocation").getDescription(),onChange:function(e,t,n){_("centerLocation",n)},fullWidth:!0,children:[(0,y.jsx)(He.Z,{label:{id:"Model origin"},value:"ModelOrigin"},"ModelOrigin"),(0,y.jsx)(He.Z,{label:{id:"Object center"},value:"ObjectCenter"},"ObjectCenter"),(0,y.jsx)(He.Z,{label:{id:"Bottom center (on Z axis)"},value:"BottomCenterZ"},"BottomCenterZ"),(0,y.jsx)(He.Z,{label:{id:"Bottom center (on Y axis)"},value:"BottomCenterY"},"BottomCenterY")]})]}),(0,y.jsx)(K.Z,{size:"block-title",children:"Animations"}),(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0===T.getAnimationsCount()?(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,y.jsx)(Ct.$,{title:(0,y.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,y.jsx)(l.Trans,{id:"Animations are a sequence of images."}),actionLabel:(0,y.jsx)(l.Trans,{id:"Add an animation"}),helpPagePath:"/objects/sprite",tutorialId:"intermediate-changing-animations",onAction:V})}):(0,y.jsx)(c.Fragment,{children:(0,H.mapFor)(0,T.getAnimationsCount(),(function(e){var t=T.getAnimation(e),n=v===t.getName()?j:null;return(0,y.jsx)(ln,{beginDrag:function(){return Z.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){z(e)},children:function(r){var o=r.connectDragSource,i=r.connectDropTarget,a=r.isOver,c=r.canDrop;return i((0,y.jsxs)("div",{style:cn.rowContainer,children:[a&&(0,y.jsx)(Et.Z,{canDrop:c}),(0,y.jsxs)("div",{ref:n,style:(0,s.Z)((0,s.Z)({},cn.rowContent),{},{backgroundColor:k.list.itemsBackgroundColor}),children:[(0,y.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[o((0,y.jsx)("span",{children:(0,y.jsx)(d.sg,{children:(0,y.jsx)(Tt.V,{})})})),(0,y.jsx)(K.Z,{noMargin:!0,noShrink:!0,children:(0,y.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,y.jsx)(d.LZ,{}),(0,y.jsx)(x.Z,{margin:"none",commitOnBlur:!0,errorText:I[e],translatableHintText:{id:"Optional animation name"},value:t.getName(),onChange:function(t){return G(e,t)},fullWidth:!0}),(0,y.jsx)(be.Z,{size:"small",onClick:function(){return W(e)},children:(0,y.jsx)(Pe.Z,{})})]}),(0,y.jsx)(d.LZ,{})]}),(0,y.jsx)(d.LZ,{}),(0,y.jsxs)(f.ak,{expand:!0,children:[(0,y.jsx)(Ue.Z,{id:"animation-source-field",value:t.getSource(),onChange:function(e,n){t.setSource(e.target.value),w()},margin:"dense",fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"GLB animation name"}),translatableHintText:{id:"Choose an animation"},children:Y}),(0,y.jsx)(u.Z,{label:(0,y.jsx)(l.Trans,{id:"Loop"}),checked:t.shouldLoop(),onCheck:function(e,n){t.setShouldLoop(n),w()}})]})]},e))}},e)}))})})]})}),(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsxs)(f.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[(0,y.jsx)(je.Z,{label:(0,y.jsx)(l.Trans,{id:"Scan missing animations"}),onClick:U}),(0,y.jsx)(Ce.Z,{label:(0,y.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:V,icon:(0,y.jsx)(ue.Z,{})})]})})]})},gn=[{id:"frontFace",blockName:(0,y.jsx)(l.Trans,{id:"Front face"}),visibilityProperty:"frontFaceVisible",resourceRepeatProperty:"frontFaceResourceRepeat",resourceNameProperty:"frontFaceResourceName"},{id:"backFace",blockName:(0,y.jsx)(l.Trans,{id:"Back face"}),visibilityProperty:"backFaceVisible",resourceRepeatProperty:"backFaceResourceRepeat",resourceNameProperty:"backFaceResourceName"},{id:"leftFace",blockName:(0,y.jsx)(l.Trans,{id:"Left face"}),visibilityProperty:"leftFaceVisible",resourceRepeatProperty:"leftFaceResourceRepeat",resourceNameProperty:"leftFaceResourceName"},{id:"rightFace",blockName:(0,y.jsx)(l.Trans,{id:"Right face"}),visibilityProperty:"rightFaceVisible",resourceRepeatProperty:"rightFaceResourceRepeat",resourceNameProperty:"rightFaceResourceName"},{id:"topFace",blockName:(0,y.jsx)(l.Trans,{id:"Top face"}),visibilityProperty:"topFaceVisible",resourceRepeatProperty:"topFaceResourceRepeat",resourceNameProperty:"topFaceResourceName"},{id:"bottomFace",blockName:(0,y.jsx)(l.Trans,{id:"Bottom face"}),visibilityProperty:"bottomFaceVisible",resourceRepeatProperty:"bottomFaceResourceRepeat",resourceNameProperty:"bottomFaceResourceName"}],mn=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,o=e.resourceManagementProps,i=(0,J.Z)(),a=t.getProperties(),s=c.useCallback((function(e,n){t.updateProperty(e,n),i()}),[t,i]),p=a.get("facesOrientation").getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}})),h=a.get("backFaceUpThroughWhichAxisRotation").getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(K.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Default size"})}),(0,y.jsx)(f.ep,{expand:!0,noColumnMargin:!0,children:["width","height","depth"].map((function(e){var t=a.get(e),n=t.getMeasurementUnit(),r={label:(0,Gt.j)(n),tooltipContent:(0,y.jsx)(rn.Z,{label:n.getLabel(),description:n.getDescription(),elementsWithWords:n.getElementsWithWords()})};return(0,y.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,y.jsx)(x.Z,{commitOnBlur:!0,floatingLabelFixed:!0,floatingLabelText:t.getLabel(),onChange:function(t){return s(e,t)},value:t.getValue(),endAdornment:(0,y.jsx)(j.ZP,{title:r.tooltipContent,children:(0,y.jsx)(tn.Z,{position:"end",children:r.label})}),id:"cube3d-object-".concat(e)})},e)}))}),(0,y.jsx)(K.Z,{size:"block-title",noMargin:!0,children:(0,y.jsx)(l.Trans,{id:"Settings"})}),(0,y.jsxs)(f.ak,{noMargin:!0,expand:!0,children:[(0,y.jsx)(u.Z,{checked:"true"===a.get("enableTextureTransparency").getValue(),label:(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(d.x1,{noMargin:!0,children:a.get("enableTextureTransparency").getLabel()}),(0,y.jsx)(en.Z,{style:{display:"inline"},children:(0,y.jsx)(nn.r,{source:a.get("enableTextureTransparency").getDescription()})})]}),onCheck:function(e,t){s("enableTextureTransparency",t?"1":"0")}}),(0,y.jsx)(Ue.Z,{value:a.get("facesOrientation").getValue(),floatingLabelText:a.get("facesOrientation").getLabel(),helperMarkdownText:a.get("facesOrientation").getDescription(),onChange:function(e,t,n){s("facesOrientation",n)},children:p.map((function(e){return(0,y.jsx)(He.Z,{label:e.label,value:e.value},e.value)}))}),(0,y.jsx)(Ue.Z,{value:a.get("backFaceUpThroughWhichAxisRotation").getValue(),floatingLabelText:a.get("backFaceUpThroughWhichAxisRotation").getLabel(),helperMarkdownText:a.get("backFaceUpThroughWhichAxisRotation").getDescription(),onChange:function(e,t,n){s("backFaceUpThroughWhichAxisRotation",n)},children:h.map((function(e){return(0,y.jsx)(He.Z,{label:e.label,value:e.value},e.value)}))}),(0,y.jsxs)(Ue.Z,{value:a.get("materialType").getValue(),floatingLabelText:a.get("materialType").getLabel(),helperMarkdownText:a.get("materialType").getDescription(),onChange:function(e,t,n){s("materialType",n)},children:[(0,y.jsx)(He.Z,{label:{id:"No lighting effect"},value:"Basic"},"Basic"),(0,y.jsx)(He.Z,{label:{id:"React to lights"},value:"StandardWithoutMetalness"},"StandardWithoutMetalness")]}),"Basic"!==a.get("materialType").getValue()&&!un(r)&&(0,y.jsx)(rt.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:'Make sure to set up a light in the effects of the layer or chose "No lighting effect" - otherwise the object will appear black.'})})]}),gn.map((function(e){return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(K.Z,{size:"block-title",children:e.blockName}),(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsxs)(f.ak,{noMargin:!0,children:[(0,y.jsx)(u.Z,{checked:"true"===a.get(e.visibilityProperty).getValue(),label:a.get(e.visibilityProperty).getLabel(),onCheck:function(t,n){s(e.visibilityProperty,n?"1":"0")},id:"cube3d-object-".concat(e.visibilityProperty)}),(0,y.jsx)(u.Z,{checked:"true"===a.get(e.resourceRepeatProperty).getValue(),label:a.get(e.resourceRepeatProperty).getLabel(),onCheck:function(t,n){s(e.resourceRepeatProperty,n?"1":"0")},id:"cube3d-object-".concat(e.resourceRepeatProperty)})]}),(0,y.jsx)(I.Z,{project:n,resourceKind:"image",floatingLabelText:a.get(e.resourceNameProperty).getLabel(),resourceManagementProps:o,resourceName:a.get(e.resourceNameProperty).getValue(),onChange:function(t){return s(e.resourceNameProperty,t)},id:"cube3d-object-".concat(e.resourceNameProperty)})]})]},e.id)}))]})},xn=n.g.gd,vn={getEditorConfiguration:function(e,t){if(this.editorConfigurations[t])return this.editorConfigurations[t];if(e.hasEventsBasedObject(t)){var n=xn.MetadataProvider.getObjectMetadata(xn.JsPlatform.get(),t);return this.getCustomObjectPropertiesEditor({helpPagePath:n.getHelpPath()})}return console.warn("Object with type ".concat(t," has no editor configuration registered. Please use registerEditorConfiguration to register your editor.")),this.getDefaultObjectJsImplementationPropertiesEditor({helpPagePath:""})},getEditorConfigurationForCustomObject:function(e,t){return this.editorConfigurationsSpecificToCustomObject[t]?this.editorConfigurationsSpecificToCustomObject[t]:this.getEditorConfiguration(e,t)},registerEditorConfiguration:function(e,t){t.component?t.createNewObject?t.castToObjectType?this.editorConfigurations.hasOwnProperty(e)?console.warn('Tried to register editor configuration for object "'.concat(e,'", but an editor configuration already exists.')):this.editorConfigurations[e]=t:console.warn('Tried to register editor configuration for object "'.concat(e,'", but "castToObjectType" property is not defined.')):console.warn('Tried to register editor configuration for object "'.concat(e,'", but "createNewObject" property is not defined.')):console.warn('Tried to register editor configuration for object "'.concat(e,'", but "component" property is not defined.'))},getDefaultObjectJsImplementationPropertiesEditor:function(e){return{component:Xt,createNewObject:function(e){return xn.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return xn.asObjectJsImplementation(e)},helpPagePath:e.helpPagePath}},getCustomObjectPropertiesEditor:function(e){return{component:$t,createNewObject:function(e){return xn.asCustomObjectConfiguration(xn.asCustomObjectConfiguration(e).clone().release())},castToObjectType:function(e){return xn.asCustomObjectConfiguration(e)},helpPagePath:e.helpPagePath}},editorConfigurationsSpecificToCustomObject:{Sprite:{component:function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,o=e.object,i=e.objectName,a=e.resourceManagementProps,s=e.onSizeUpdated,l=e.onObjectUpdated;return(0,y.jsx)(Ot,{isAnimationListLocked:!0,objectConfiguration:t,project:n,layout:r,object:o,objectName:i,resourceManagementProps:a,onSizeUpdated:s,onObjectUpdated:l})},createNewObject:function(){return new xn.SpriteObject},castToObjectType:function(e){return xn.asSpriteConfiguration(e)},helpPagePath:"/objects/sprite"}},editorConfigurations:{Sprite:{component:Ot,createNewObject:function(){return new xn.SpriteObject},castToObjectType:function(e){return xn.asSpriteConfiguration(e)},helpPagePath:"/objects/sprite"},"Scene3D::Cube3DObject":{component:mn,createNewObject:function(e){return xn.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return xn.asObjectJsImplementation(e)},helpPagePath:"/objects/3d-box"},"Scene3D::Model3DObject":{component:fn,createNewObject:function(e){return xn.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return xn.asObjectJsImplementation(e)},helpPagePath:"/objects/3d-model"},"TiledSpriteObject::TiledSprite":{component:A,createNewObject:function(){return new xn.TiledSpriteObject},castToObjectType:function(e){return xn.asTiledSpriteConfiguration(e)},helpPagePath:"/objects/tiled_sprite"},"PanelSpriteObject::PanelSprite":{component:M,createNewObject:function(){return new xn.PanelSpriteObject},castToObjectType:function(e){return xn.asPanelSpriteConfiguration(e)},helpPagePath:"/objects/panel_sprite"},"TextObject::Text":{component:P,createNewObject:function(){return new xn.TextObject},castToObjectType:function(e){return xn.asTextObjectConfiguration(e)},helpPagePath:"/objects/text"},"PrimitiveDrawing::Drawer":{component:Nt,createNewObject:function(){return new xn.ShapePainterObject},castToObjectType:function(e){return xn.asShapePainterConfiguration(e)},helpPagePath:"/objects/shape_painter"},"TextEntryObject::TextEntry":{component:function(){return(0,y.jsx)(d.sg,{noMargin:!0,children:(0,y.jsx)(d.x1,{children:(0,y.jsx)(Ze.Z,{children:(0,y.jsx)(l.Trans,{id:"This object does not have any specific configuration. Add it on the scene and use events to interact with it."})})})})},createNewObject:function(){return new xn.TextEntryObject},castToObjectType:function(e){return xn.asTextEntryConfiguration(e)},helpPagePath:"/objects/text_entry"},"ParticleSystem::ParticleEmitter":{component:Wt,createNewObject:function(){return new xn.ParticleEmitterObject},castToObjectType:function(e){return xn.asParticleEmitterConfiguration(e)},helpPagePath:"/objects/particles_emitter"}}}},90505:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}});var r=n(15671),o=n(43144),i=n(60136),a=n(29388),s=n(79916),l=n(58247),c=n(72410),u=n(87080),d=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,l){var c;return(0,r.Z)(this,n),(c=t.call(this,e,o,i,a,s,l))._pixiObject=new u.Graphics,c._pixiContainer.addChild(c._pixiObject),c}return(0,o.Z)(n,[{key:"update",value:function(){var e=this.getWidth(),t=this.getHeight();this._pixiObject.clear(),this._pixiObject.beginFill(13311),this._pixiObject.lineStyle(1,16767232,1),this._pixiObject.moveTo(-e/2,-t/2),this._pixiObject.lineTo(e/2,-t/2),this._pixiObject.lineTo(e/2,t/2),this._pixiObject.lineTo(-e/2,t/2),this._pixiObject.endFill(),this._pixiObject.position.x=this._instance.getX()+e/2,this._pixiObject.position.y=this._instance.getY()+t/2,this._pixiObject.angle=this._instance.getAngle()}}],[{key:"getThumbnail",value:function(e,t,n){return"res/unknown32.png"}}]),n}(s.Z),p=n.g.gd,h=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,l){var c;return(0,r.Z)(this,n),(c=t.call(this,e,o,i,a,s,l))._sprite=null,c._shouldNotRotate=!1,c._renderedAnimation=0,c._renderedDirection=0,c._centerX=0,c._centerY=0,c._originX=0,c._originY=0,c._pixiObject=new u.Sprite(c._pixiResourcesLoader.getInvalidPIXITexture()),c._pixiContainer.addChild(c._pixiObject),c.updatePIXITextureAndSprite(),c}return(0,o.Z)(n,[{key:"updatePIXISprite",value:function(){this._pixiObject.anchor.x=this._centerX/this._pixiObject.texture.frame.width,this._pixiObject.anchor.y=this._centerY/this._pixiObject.texture.frame.height,this._pixiObject.rotation=this._shouldNotRotate?0:s.Z.toRad(this._instance.getAngle()),this._instance.hasCustomSize()?(this._pixiObject.scale.x=this.getCustomWidth()/this._pixiObject.texture.frame.width,this._pixiObject.scale.y=this.getCustomHeight()/this._pixiObject.texture.frame.height):(this._pixiObject.scale.x=1,this._pixiObject.scale.y=1),this._pixiObject.position.x=this._instance.getX()+(this._centerX-this._originX)*Math.abs(this._pixiObject.scale.x),this._pixiObject.position.y=this._instance.getY()+(this._centerY-this._originY)*Math.abs(this._pixiObject.scale.y)}},{key:"updateSprite",value:function(){this._sprite=null,this._shouldNotRotate=!1;var e=p.asSpriteConfiguration(this._associatedObjectConfiguration);if(e.hasNoAnimations())return!1;this._renderedAnimation=this._instance.getRawDoubleProperty("animation"),this._renderedAnimation>=e.getAnimationsCount()&&(this._renderedAnimation=0);var t=e.getAnimation(this._renderedAnimation);if(t.hasNoDirections())return!1;if(this._renderedDirection=0,t.useMultipleDirections()){var n=Math.floor(this._instance.getAngle())%360;n<0&&(n+=360),this._renderedDirection=Math.round(n/45)%8}this._renderedDirection>=t.getDirectionsCount()&&(this._renderedDirection=0);var r=t.getDirection(this._renderedDirection);return 0!==r.getSpritesCount()&&(this._shouldNotRotate=t.useMultipleDirections(),this._sprite=r.getSprite(0),!0)}},{key:"updatePIXITextureAndSprite",value:function(){var e=this;this.updateSprite();var t=this._sprite;if(t){var n=this._pixiResourcesLoader.getPIXITexture(this._project,t.getImageName());if(this._pixiObject.texture=n,n.baseTexture.valid){var r=t.getOrigin();if(this._originX=r.getX(),this._originY=r.getY(),t.isDefaultCenterPoint())this._centerX=n.width/2,this._centerY=n.height/2;else{var o=t.getCenter();this._centerX=o.getX(),this._centerY=o.getY()}this.updatePIXISprite()}else n.once("update",(function(){return e.updatePIXITextureAndSprite()}))}}},{key:"update",value:function(){var e=this._instance.getRawDoubleProperty("animation");this._renderedAnimation!==e?this.updatePIXITextureAndSprite():this.updatePIXISprite()}},{key:"getOriginX",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getX()*this._pixiObject.scale.x:0}},{key:"getOriginY",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getY()*this._pixiObject.scale.y:0}},{key:"getDefaultWidth",value:function(){return Math.abs(this._pixiObject.texture.frame.width)}},{key:"getDefaultHeight",value:function(){return Math.abs(this._pixiObject.texture.frame.height)}},{key:"getCenterX",value:function(){return this._sprite&&this._pixiObject?this._centerX*this._pixiObject.scale.x:0}},{key:"getCenterY",value:function(){return this._sprite&&this._pixiObject?this._centerY*this._pixiObject.scale.y:0}}],[{key:"getThumbnail",value:function(e,t,n){var r=p.asSpriteConfiguration(n);if(r.getAnimationsCount()>0&&r.getAnimation(0).getDirectionsCount()>0&&r.getAnimation(0).getDirection(0).getSpritesCount()>0){var o=r.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,o,{})}return"res/unknown32.png"}}]),n}(s.Z),f=n.g.gd,g=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,c){var d;(0,r.Z)(this,n),d=t.call(this,e,o,i,a,s,c);var p=f.asTiledSpriteConfiguration(a);return d._texture=p.getTexture(),d._pixiObject=new u.TilingSprite(l.Z.getPIXITexture(e,p.getTexture()),p.getWidth(),p.getHeight()),d._pixiObject.anchor.x=.5,d._pixiObject.anchor.y=.5,d._pixiContainer.addChild(d._pixiObject),d}return(0,o.Z)(n,[{key:"update",value:function(){var e=f.asTiledSpriteConfiguration(this._associatedObjectConfiguration);this._instance.hasCustomSize()?(this._pixiObject.width=this.getCustomWidth(),this._pixiObject.height=this.getCustomHeight()):(this._pixiObject.width=e.getWidth(),this._pixiObject.height=e.getHeight()),this._texture!==e.getTexture()&&(this._texture=e.getTexture(),this._pixiObject.texture=l.Z.getPIXITexture(this._project,e.getTexture())),this._pixiObject.x=this._instance.getX()+this._pixiObject.width/2,this._pixiObject.y=this._instance.getY()+this._pixiObject.height/2,this._pixiObject.rotation=s.Z.toRad(this._instance.getAngle())}},{key:"getDefaultWidth",value:function(){return f.asTiledSpriteConfiguration(this._associatedObjectConfiguration).getWidth()}},{key:"getDefaultHeight",value:function(){return f.asTiledSpriteConfiguration(this._associatedObjectConfiguration).getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=f.asTiledSpriteConfiguration(n);return c.Z.getResourceFullUrl(e,r.getTexture(),{})}}]),n}(s.Z),m=n.g.gd,x=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,l){var c;return(0,r.Z)(this,n),(c=t.call(this,e,o,i,a,s,l)).makeObjects(),c.updateTexture(),c}return(0,o.Z)(n,[{key:"update",value:function(){var e=m.asPanelSpriteConfiguration(this._associatedObjectConfiguration);e.isTiled()!==this._tiled&&this.makeObjects(),e.getTexture()!==this._textureName&&this.updateTexture(),this.updateAngle(),this.updatePosition();var t=this._width,n=this._height;if(this._instance.hasCustomSize())this._width=this.getCustomWidth(),this._height=this.getCustomHeight();else{var r=m.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._width=r.getWidth(),this._height=r.getHeight()}this._width===t&&this._height===n||this.updateWidthHeight()}},{key:"makeObjects",value:function(){var e=m.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._textureName=e.getTexture();var t=l.Z.getPIXITexture(this._project,this._textureName);this._tiled=e.isTiled();var n=this._tiled?u.TilingSprite:u.Sprite;this._pixiObject||(this._pixiObject=new u.Container,this._pixiContainer.addChild(this._pixiObject)),this._centerSprite=new n(new u.Texture(t)),this._borderSprites=[new n(new u.Texture(t)),new u.Sprite(t),new n(new u.Texture(t)),new u.Sprite(t),new n(new u.Texture(t)),new u.Sprite(t),new n(new u.Texture(t)),new u.Sprite(t)],this._pixiObject.removeChildren(),this._pixiObject.addChild(this._centerSprite);for(var r=0;r<this._borderSprites.length;++r)this._pixiObject.addChild(this._borderSprites[r])}},{key:"updateAngle",value:function(){this._pixiObject.rotation=s.Z.toRad(this._instance.getAngle())}},{key:"updatePosition",value:function(){this._pixiObject.x=this._instance.getX()+this._width/2,this._pixiObject.y=this._instance.getY()+this._height/2}},{key:"_updateLocalPositions",value:function(){var e=m.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._centerSprite.position.x=e.getLeftMargin(),this._centerSprite.position.y=e.getTopMargin(),this._borderSprites[0].position.x=this._width-e.getRightMargin(),this._borderSprites[0].position.y=e.getTopMargin(),this._borderSprites[1].position.x=this._width-this._borderSprites[1].width,this._borderSprites[1].position.y=0,this._borderSprites[2].position.x=e.getLeftMargin(),this._borderSprites[2].position.y=0,this._borderSprites[3].position.x=0,this._borderSprites[3].position.y=0,this._borderSprites[4].position.x=0,this._borderSprites[4].position.y=e.getTopMargin(),this._borderSprites[5].position.x=0,this._borderSprites[5].position.y=this._height-this._borderSprites[5].height,this._borderSprites[6].position.x=e.getLeftMargin(),this._borderSprites[6].position.y=this._height-e.getBottomMargin(),this._borderSprites[7].position.x=this._width-this._borderSprites[7].width,this._borderSprites[7].position.y=this._height-this._borderSprites[7].height}},{key:"_updateSpritesAndTexturesSize",value:function(){var e=m.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._centerSprite.width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._centerSprite.height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0),this._borderSprites[0].width=e.getRightMargin(),this._borderSprites[0].height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0),this._borderSprites[2].height=e.getTopMargin(),this._borderSprites[2].width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._borderSprites[4].width=e.getLeftMargin(),this._borderSprites[4].height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0),this._borderSprites[6].height=e.getBottomMargin(),this._borderSprites[6].width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._wasRendered=!0,this._pixiObject.cacheAsBitmap=!1}},{key:"updateTexture",value:function(){var e=this,t=m.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._textureName=t.getTexture();var n=l.Z.getPIXITexture(this._project,this._textureName);function r(e){return e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x>n.width&&(e.x=n.width),e.y>n.height&&(e.y=n.height),e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y),e}n.baseTexture.valid?(this._centerSprite.texture=new u.Texture(n,r(new u.Rectangle(t.getLeftMargin(),t.getTopMargin(),n.width-t.getLeftMargin()-t.getRightMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[0].texture=new u.Texture(n,r(new u.Rectangle(n.width-t.getRightMargin(),t.getTopMargin(),t.getRightMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[1].texture=new u.Texture(n,r(new u.Rectangle(n.width-t.getRightMargin(),0,t.getRightMargin(),t.getTopMargin()))),this._borderSprites[2].texture=new u.Texture(n,r(new u.Rectangle(t.getLeftMargin(),0,n.width-t.getLeftMargin()-t.getRightMargin(),t.getTopMargin()))),this._borderSprites[3].texture=new u.Texture(n,r(new u.Rectangle(0,0,t.getLeftMargin(),t.getTopMargin()))),this._borderSprites[4].texture=new u.Texture(n,r(new u.Rectangle(0,t.getTopMargin(),t.getLeftMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[5].texture=new u.Texture(n,r(new u.Rectangle(0,n.height-t.getBottomMargin(),t.getLeftMargin(),t.getBottomMargin()))),this._borderSprites[6].texture=new u.Texture(n,r(new u.Rectangle(t.getLeftMargin(),n.height-t.getBottomMargin(),n.width-t.getLeftMargin()-t.getRightMargin(),t.getBottomMargin()))),this._borderSprites[7].texture=new u.Texture(n,r(new u.Rectangle(n.width-t.getRightMargin(),n.height-t.getBottomMargin(),t.getRightMargin(),t.getBottomMargin()))),this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition()):n.once("update",(function(){return e.updateTexture()}))}},{key:"updateWidthHeight",value:function(){this._pixiObject.pivot.x=this._width/2,this._pixiObject.pivot.y=this._height/2,this._updateSpritesAndTexturesSize(),this._updateLocalPositions(),this.updatePosition()}},{key:"getDefaultWidth",value:function(){return m.asPanelSpriteConfiguration(this._associatedObjectConfiguration).getWidth()}},{key:"getDefaultHeight",value:function(){return m.asPanelSpriteConfiguration(this._associatedObjectConfiguration).getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=m.asPanelSpriteConfiguration(n);return c.Z.getResourceFullUrl(e,r.getTexture(),{})}}]),n}(s.Z),v=n.g.gd,b=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,l){var c;(0,r.Z)(this,n),(c=t.call(this,e,o,i,a,s,l))._isItalic=!1,c._isBold=!1,c._characterSize=0,c._wrapping=!1,c._wrappingWidth=0,c._styleFontDirty=!0,c._fontName="",c._fontFamily="",c._colorR=0,c._colorG=0,c._colorB=0,c._textAlignment="left";var d=new u.TextStyle({fontFamily:"Arial",fontSize:20,align:"left",padding:5});return c._pixiObject=new u.Text("",d),c._pixiObject.anchor.x=.5,c._pixiObject.anchor.y=.5,c._pixiContainer.addChild(c._pixiObject),c._styleFontDirty=!0,c.update(),c}return(0,o.Z)(n,[{key:"update",value:function(){var e=this,t=v.asTextObjectConfiguration(this._associatedObjectConfiguration);if(this._pixiObject.text=t.getString(),(t.isItalic()!==this._isItalic||t.isBold()!==this._isBold||t.getCharacterSize()!==this._characterSize||t.getTextAlignment()!==this._textAlignment||this._instance.hasCustomSize()!==this._wrapping||this.getCustomWidth()!==this._wrappingWidth&&this._wrapping)&&(this._isItalic=t.isItalic(),this._isBold=t.isBold(),this._characterSize=t.getCharacterSize(),this._textAlignment=t.getTextAlignment(),this._wrapping=this._instance.hasCustomSize(),this._wrappingWidth=this.getCustomWidth(),this._styleFontDirty=!0),this._fontName!==t.getFontName()&&(this._fontName=t.getFontName(),l.Z.loadFontFamily(this._project,t.getFontName()).then((function(t){e._fontFamily=t,e._styleFontDirty=!0})).catch((function(e){console.warn("Unable to load font family for RenderedTextInstance",e)}))),this._styleFontDirty&&(this._pixiObject.style.fontFamily=this._fontFamily||"Arial",this._pixiObject.style.fontSize=Math.max(1,this._characterSize),this._pixiObject.style.fontStyle=this._isItalic?"italic":"normal",this._pixiObject.style.fontWeight=this._isBold?"bold":"normal",this._pixiObject.style.wordWrap=this._wrapping,this._pixiObject.style.wordWrapWidth=this._wrappingWidth<=1?1:this._wrappingWidth,this._pixiObject.style.breakWords=!0,this._pixiObject.style.align=this._textAlignment,this._pixiObject.dirty=!0,this._styleFontDirty=!1),t.getColorR()===this._colorR&&t.getColorG()===this._colorG&&t.getColorB()===this._colorB||(this._colorR=t.getColorR(),this._colorG=t.getColorG(),this._colorB=t.getColorB(),this._pixiObject.style.fill="rgb("+this._colorR+","+this._colorG+","+this._colorB+")",this._pixiObject.dirty=!0),this._instance.hasCustomSize()){var n="right"===this._textAlignment?1:"center"===this._textAlignment?.5:0,r=this.getCustomWidth(),o=(r-this._pixiObject.width)*(n-.5);this._pixiObject.position.x=this._instance.getX()+r/2,this._pixiObject.anchor.x=.5-o/this._pixiObject.width}else this._pixiObject.position.x=this._instance.getX()+this._pixiObject.width/2,this._pixiObject.anchor.x=.5;this._pixiObject.position.y=this._instance.getY()+this._pixiObject.height/2,this._pixiObject.rotation=s.Z.toRad(this._instance.getAngle())}},{key:"getDefaultWidth",value:function(){return this._pixiObject.width}},{key:"getDefaultHeight",value:function(){return this._pixiObject.height}}],[{key:"getThumbnail",value:function(e,t,n){return"CppPlatform/Extensions/texticon24.png"}}]),n}(s.Z);function j(e){return function(t){(0,i.Z)(s,t);var n=(0,a.Z)(s);function s(t,o,i,a,l,c){var d;return(0,r.Z)(this,s),(d=n.call(this,t,o,i,a,l,c))._pixiObject=new u.Sprite(u.Texture.from(e)),d._pixiContainer.addChild(d._pixiObject),d}return(0,o.Z)(s,[{key:"update",value:function(){this._pixiObject.position.x=this._instance.getX(),this._pixiObject.position.y=this._instance.getY(),this._pixiObject.angle=this._instance.getAngle()}}],[{key:"getThumbnail",value:function(t,n,r){return e}}]),s}(s.Z)}var C=j("CppPlatform/Extensions/primitivedrawingicon.png"),y=j("CppPlatform/Extensions/textentry.png"),Z=n(11858),k=n.g.gd,w=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,l){var c;return(0,r.Z)(this,n),(c=t.call(this,e,o,i,a,s,l))._pixiObject=new u.Graphics,c._pixiContainer.addChild(c._pixiObject),c.updateGraphics(),c}return(0,o.Z)(n,[{key:"update",value:function(){this._pixiObject.position.x=this._instance.getX(),this._pixiObject.position.y=this._instance.getY(),this.updateGraphics()}},{key:"updateGraphics",value:function(){var e=k.asParticleEmitterConfiguration(this._associatedObjectConfiguration);this._pixiObject.clear();var t=this._instance.getAngle()/180*3.14159,n=e.getConeSprayAngle(),r=t-n/2/180*3.14159,o=t+n/2/180*3.14159;this._pixiObject.beginFill(0,0),this._pixiObject.lineStyle(3,(0,Z.Y9)(e.getParticleRed2(),e.getParticleGreen2(),e.getParticleBlue2()),1),this._pixiObject.moveTo(0,0),this._pixiObject.lineTo(64*Math.cos(r),64*Math.sin(r)),this._pixiObject.moveTo(0,0),this._pixiObject.lineTo(64*Math.cos(o),64*Math.sin(o)),this._pixiObject.endFill(),this._pixiObject.lineStyle(0,0,1),this._pixiObject.beginFill((0,Z.Y9)(e.getParticleRed1(),e.getParticleGreen1(),e.getParticleBlue1())),this._pixiObject.drawCircle(0,0,8),this._pixiObject.endFill()}},{key:"getDefaultWidth",value:function(){return 128}},{key:"getDefaultHeight",value:function(){return 128}},{key:"getOriginX",value:function(){return 64}},{key:"getOriginY",value:function(){return 64}}],[{key:"getThumbnail",value:function(e,t,n){return"CppPlatform/Extensions/particleSystemicon.png"}}]),n}(s.Z),T=n(82963),E=n(77672),S=n(18455),P=["Show","LeftPadding","TopPadding","RightPadding","BottomPadding","HorizontalAnchorOrigin","HorizontalAnchorTarget","VerticalAnchorOrigin","VerticalAnchorTarget","AnchorOrigin","AnchorTarget","AnchorDeltaX","AnchorDeltaY","IsScaledProportionallyOnX","IsScaledProportionallyOnY","IsScaledProportionally"],I=function(e){var t=(e.includes("-")?e.split("-")[1]:e).toLowerCase();return"left"===t?0:"right"===t?1:"center"===t?.5:null},D=function(e){var t=(e.includes("-")?e.split("-")[0]:e).toLowerCase();return"top"===t?0:"bottom"===t?1:"center"===t?.5:null},A=function(e,t){var n=I(e);return null!==n?n:t&&t.has(e)?I(t.get(e).getValue()):null},L=function(e,t){var n=D(e);return null!==n?n:t&&t.has(e)?D(t.get(e).getValue()):null},M=function(e,t,n){var r=(e.includes("-")?e.split("-")[1]:e).toLowerCase();return"same"===r?n:"opposite"===r&&null!==n?1-n:A(r,t)},F=function(e,t,n){var r=(e.includes("-")?e.split("-")[0]:e).toLowerCase();return"same"===r?n:"opposite"===r&&null!==n?1-n:L(r,t)},O=function(){function e(){(0,r.Z)(this,e),this.x=0,this.y=0,this._customWidth=0,this._customHeight=0,this._hasCustomSize=!1}return(0,o.Z)(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getZ",value:function(){return 0}},{key:"getAngle",value:function(){return 0}},{key:"getRotationX",value:function(){return 0}},{key:"getRotationY",value:function(){return 0}},{key:"setObjectName",value:function(e){}},{key:"getObjectName",value:function(){return""}},{key:"setX",value:function(e){}},{key:"setY",value:function(e){}},{key:"setZ",value:function(e){}},{key:"setAngle",value:function(e){}},{key:"setRotationX",value:function(e){}},{key:"setRotationY",value:function(e){}},{key:"isLocked",value:function(){return!1}},{key:"setLocked",value:function(e){}},{key:"isSealed",value:function(){return!1}},{key:"setSealed",value:function(e){}},{key:"getZOrder",value:function(){return 0}},{key:"setZOrder",value:function(e){}},{key:"getLayer",value:function(){return""}},{key:"setLayer",value:function(e){}},{key:"setHasCustomSize",value:function(e){this._hasCustomSize=e}},{key:"hasCustomSize",value:function(){return this._hasCustomSize}},{key:"hasCustomDepth",value:function(){return!1}},{key:"setCustomWidth",value:function(e){this._customWidth=e,this._hasCustomSize=!0}},{key:"getCustomWidth",value:function(){return this._customWidth}},{key:"setCustomHeight",value:function(e){this._customHeight=e,this._hasCustomSize=!0}},{key:"getCustomHeight",value:function(){return this._customHeight}},{key:"setCustomDepth",value:function(e){}},{key:"getCustomDepth",value:function(){return 0}},{key:"resetPersistentUuid",value:function(){return this}},{key:"updateCustomProperty",value:function(e,t,n,r){}},{key:"getCustomProperties",value:function(e,t){return null}},{key:"getRawDoubleProperty",value:function(e){return 0}},{key:"getRawStringProperty",value:function(e){return""}},{key:"setRawDoubleProperty",value:function(e,t){}},{key:"setRawStringProperty",value:function(e,t){}},{key:"getVariables",value:function(){return[]}},{key:"serializeTo",value:function(e){}},{key:"unserializeFrom",value:function(e){}}]),e}(),R=n(46564),B=n.g.gd,_=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o,i,a,s,c,d){var p;(0,r.Z)(this,n),(p=t.call(this,e,o,i,a,s,c,d))._pixiObject=new u.Container,p._pixiContainer.addChild(p._pixiObject),p._threeGroup&&(p._threeObject=new R.Group,p._threeGroup.add(p._threeObject));var h=B.asCustomObjectConfiguration(a),f=h.getProperties(),g=f.has("ParentOrigin")&&f.get("ParentOrigin").getValue(),m=f.has("ParentOriginX")&&f.get("ParentOriginX").getValue(),x=f.has("ParentOriginY")&&f.get("ParentOriginY").getValue();p._proportionalOriginX=g&&I(g)||m&&I(m)||0,p._proportionalOriginY=g&&D(g)||x&&D(x)||0;var v=e.hasEventsBasedObject(h.getType())?e.getEventsBasedObject(h.getType()):null;if(p.childrenInstances=[],p.childrenLayouts=[],p.childrenRenderedInstances=[],p.childrenRenderedInstanceByNames=new Map,!v)return(0,T.Z)(p);var j=function(e,t){for(var n=new Map,r=e.getPropertyDescriptors(),o=t.getProperties(),i=function(e){var t=r.getAt(e),i=t.getExtraInfo();if(!i)return"continue";var a=t.getName(),s=o.get(a).getValue(),l="true"===s,c=Number.parseFloat(s)||0,u=P.find((function(e){return a.includes(e)})),d="",p=null,h=null;if("HorizontalAnchorOrigin"===u||"VerticalAnchorOrigin"===u||"AnchorOrigin"===u){var f=a.replace("AnchorOrigin","AnchorTarget");if(r.has(f)){var g=r.get(f);d=g.getExtraInfo().size()>0?g.getExtraInfo().at(0):"";var m=o.get(f).getValue(),x=Number.parseFloat(m)||0;"HorizontalAnchorOrigin"!==u&&"AnchorOrigin"!==u||(p=A(m,o)||x),"VerticalAnchorOrigin"!==u&&"AnchorOrigin"!==u||(h=L(m,o)||x)}}for(var v=0;v<i.size();v++){var b=i.at(v),j=n.get(b);if(j||(j={isShown:!0,horizontalLayout:{},verticalLayout:{}},n.set(b,j)),"Show"===u)"true"!==s&&(j.isShown=!1);else if("LeftPadding"===u)j.horizontalLayout.minSideAbsoluteMargin=c;else if("RightPadding"===u)j.horizontalLayout.maxSideAbsoluteMargin=c;else if("TopPadding"===u)j.verticalLayout.minSideAbsoluteMargin=c;else if("BottomPadding"===u)j.verticalLayout.maxSideAbsoluteMargin=c;else if("AnchorDeltaX"===u)j.horizontalLayout.anchorDelta=c;else if("AnchorDeltaY"===u)j.verticalLayout.anchorDelta=c;else if("IsScaledProportionallyOnX"===u)j.horizontalLayout.isScaledProportionally=l;else if("IsScaledProportionallyOnY"===u)j.verticalLayout.isScaledProportionally=l;else if("IsScaledProportionally"===u)j.horizontalLayout.isScaledProportionally=l,j.verticalLayout.isScaledProportionally=l;else{if("HorizontalAnchorOrigin"===u||"AnchorOrigin"===u){var C=M(s,o,p)||c;null!==C&&(j.horizontalLayout.anchorOrigin=C),null!==p&&(j.horizontalLayout.anchorTarget=p),j.horizontalLayout.anchorTargetObject=d}if("VerticalAnchorOrigin"===u||"AnchorOrigin"===u){var y=F(s,o,p)||c;null!==y&&(j.verticalLayout.anchorOrigin=y),null!==h&&(j.verticalLayout.anchorTarget=h),j.verticalLayout.anchorTargetObject=d}}}},a=0;a<r.getCount();a++)i(a);return n}(v,h);return(0,S.mapReverseFor)(0,v.getObjectsCount(),(function(t){var n=v.getObjectAt(t),r=j.get(n.getName())||{isShown:!0,horizontalLayout:{},verticalLayout:{}},i=h.getChildObjectConfiguration(n.getName()),a=new O,s=Y.createNewInstanceRenderer(e,o,a,i,p._pixiObject,p._threeObject);r.isShown||p._pixiObject.removeChild(s._pixiObject),s instanceof b&&(s._pixiObject.style.align="center"),p.childrenInstances.push(a),p.childrenLayouts.push(r),p.childrenRenderedInstances.push(s),p.childrenRenderedInstanceByNames.set(n.getName(),s)})),0===p.childrenRenderedInstances.length&&(p._pixiObject=new u.Sprite(l.Z.getInvalidPIXITexture()),p._pixiContainer.addChild(p._pixiObject)),p}return(0,o.Z)(n,[{key:"update",value:function(){!function(e){for(var t=e.getWidth(),n=e.getHeight(),r=0;r<e.childrenRenderedInstances.length;r++){var o=e.childrenRenderedInstances[r],i=e.childrenInstances[r],a=e.childrenLayouts[r];if(null==a.horizontalLayout.anchorOrigin){var s=a.horizontalLayout.minSideAbsoluteMargin||(a.horizontalLayout.minSideProportionalMargin||0)*t,l=t-(a.horizontalLayout.maxSideAbsoluteMargin||(a.horizontalLayout.maxSideProportionalMargin||0)*t);i.x=s,i.setCustomWidth(l-s)}else{var c=a.horizontalLayout.anchorOrigin||0,u=a.horizontalLayout.anchorTarget||0,d=e.childrenRenderedInstanceByNames.get(a.horizontalLayout.anchorTargetObject||"")||e.childrenRenderedInstances[0],p=d._instance,h=p.hasCustomSize()?p.getCustomWidth():d.getDefaultWidth(),f=a.horizontalLayout.isScaledProportionally?h*o.getDefaultWidth()/d.getDefaultWidth():o.getDefaultWidth();i.x=p.getX()+(a.horizontalLayout.anchorDelta||0)+u*h-c*f,i.setCustomWidth(f)}if(null==a.verticalLayout.anchorOrigin){var g=a.verticalLayout.minSideAbsoluteMargin||(a.verticalLayout.minSideProportionalMargin||0)*n,m=n-(a.verticalLayout.maxSideAbsoluteMargin||(a.verticalLayout.maxSideProportionalMargin||0)*n);i.y=g;var x=m-g;i.setCustomHeight(m-g),o.update(),i.y+=(x-o._pixiObject.height)/2}else{var v=a.verticalLayout.anchorOrigin||0,b=a.verticalLayout.anchorTarget||0,j=e.childrenRenderedInstanceByNames.get(a.horizontalLayout.anchorTargetObject||"")||e.childrenRenderedInstances[0],C=j._instance,y=C.hasCustomSize()?C.getCustomHeight():j.getDefaultHeight(),Z=a.horizontalLayout.isScaledProportionally?y*o.getDefaultHeight()/j.getDefaultHeight():o.getDefaultHeight();i.y=C.getY()+(a.verticalLayout.anchorDelta||0)+b*y-v*Z,i.setCustomHeight(Z)}o.update()}}(this);var e=this.getWidth(),t=this.getHeight(),n=this._proportionalOriginX*e,r=this._proportionalOriginY*t,o=e/2,i=t/2;this._pixiObject.pivot.x=o,this._pixiObject.pivot.y=i,this._pixiObject.rotation=s.Z.toRad(this._instance.getAngle()),this._pixiObject.scale.x=1,this._pixiObject.scale.y=1,this._pixiObject.position.x=this._instance.getX()+o-n,this._pixiObject.position.y=this._instance.getY()+i-r,this._threeObject&&this._threeObject.position.set(this._instance.getX(),this._instance.getY(),0)}},{key:"getDefaultWidth",value:function(){return this.childrenRenderedInstances.length>0?this.childrenRenderedInstances[0].getDefaultWidth():48}},{key:"getDefaultHeight",value:function(){return this.childrenRenderedInstances.length>0?this.childrenRenderedInstances[0].getDefaultHeight():48}},{key:"getOriginX",value:function(){return this._proportionalOriginX*this.getWidth()}},{key:"getOriginY",value:function(){return this._proportionalOriginY*this.getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=B.asCustomObjectConfiguration(n),o=e.hasEventsBasedObject(r.getType())?e.getEventsBasedObject(r.getType()):null;if(!o)return"res/unknown32.png";for(var i=0;i<o.getObjectsCount();i++){var a=o.getObjectAt(i),s=r.getChildObjectConfiguration(a.getName()),l=s.getType();if("Sprite"===l||"TiledSpriteObject::TiledSprite"===l||"PanelSpriteObject::PanelSprite"===l)return Y.getThumbnail(e,s)}return"res/unknown32.png"}}]),n}(E.Z),N=n(94002),U=n(50057),H=n.n(U),V=H()("path"),W=H()("electron"),z=n.g.gd;n.g.PIXI=u,n.g.GlobalPIXIModule={PIXI:u};var G={},Y={renderers:{unknownObjectType:d,Sprite:h,"TiledSpriteObject::TiledSprite":g,"PanelSpriteObject::PanelSprite":x,"TextObject::Text":b,"PrimitiveDrawing::Drawer":C,"TextEntryObject::TextEntry":y,"ParticleSystem::ParticleEmitter":w},renderers3D:{},getThumbnail:function(e,t){var n=t.getType();return this.renderers.hasOwnProperty(n)?this.renderers[n].getThumbnail(e,c.Z,t):e.hasEventsBasedObject(n)?_.getThumbnail(e,c.Z,t):this.renderers.unknownObjectType.getThumbnail(e,c.Z,t)},createNewInstanceRenderer:function(e,t,n,r,o,i){var a=r.getType();return i&&this.renderers3D.hasOwnProperty(a)?new this.renderers3D[a](e,t,n,r,o,i,l.Z):this.renderers.hasOwnProperty(a)?new this.renderers[a](e,t,n,r,o,l.Z):e.hasEventsBasedObject(a)?new _(e,t,n,r,o,i,l.Z):(console.warn("Object with type ".concat(a," has no instance renderer registered. Please use registerInstanceRenderer to register your renderer.")),new this.renderers.unknownObjectType(e,t,n,r,o,l.Z))},registerInstanceRenderer:function(e,t){t.getThumbnail?this.renderers.hasOwnProperty(e)?console.warn('Tried to register renderer for object "'.concat(e,'", but a renderer already exists.')):this.renderers[e]=t:console.warn('Tried to register renderer for object "'.concat(e,'", but getThumbnail is not defined.'))},registerInstance3DRenderer:function(e,t){this.renderers3D.hasOwnProperty(e)?console.warn('Tried to register 3D renderer for object "'.concat(e,'", but a renderer already exists.')):this.renderers3D[e]=t},registerModule:function(e,t){G[e]=t},requireModule:function(e,t){if(W&&V){var r=V.join(e,t),o=H()("module");if(!o._load)throw new Error('module._load does not exist. This is possibly a change in Node.js that is breaking the custom loader, in ObjectsRenderingService.requireModule, that is injected to expose Pixi.js to extensions using "require".');var i=o._load,a={"pixi.js-legacy":u,"pixi.js":u,"@pixi/core":u,"@pixi/display":u,"@pixi/constants":u,"@pixi/sprite":u,"@pixi/math":u,"@pixi/utils":u,"@pixi/graphics":u};o._load=function(e,t,n){var o=a[e];return o||(0===e.indexOf("./")||e===r?i(e,t,n):(console.error('A module ("'.concat(e,'") was required from ').concat(r,' but is not an allowed module or a relative file path starting with "./". null will be returned instead.')),console.warn("Allowed modules are: ",Object.keys(a)),console.warn("Please use only allowed modules or a reference a local file."),null))};var s=null;try{s=n.g.require(r)}catch(l){console.error('Unable to load module "'.concat(t,'". Only files located in ').concat(e," are supported. Exception was:"),l),s=null}return o._load=i,s}return G[t]?G[t]:(console.error('Unable to load module "'.concat(t,'". Are you sure you registered it using ObjectsRenderingService.registerModule? This is mandatory for the web-app to have the file bundled.')),null)},rgbOrHexToHexNumber:Z.gO,gd:z,PIXI:u,THREE:R,THREE_ADDONS:{SkeletonUtils:N},RenderedInstance:s.Z,Rendered3DInstance:E.Z}},58247:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(15671),o=n(43144),i=n(91479),a=n.n(i),s=n(14446),l=n.n(s),c=n(87080),u=n(46564),d=n(79362),p=n(87845),h=n(72410),f=n(38830),g=n.n(f),m=n(85919),x=n.g.gd,v={},b={},j={},C=c.Texture.from("res/error48.png"),y={},Z={},k={},w=function(){var e=new u.Group;return e.add(new u.Mesh(new u.BoxGeometry(1,1,1),new u.MeshBasicMaterial({color:"#ff00ff"}))),{scene:e,animations:[],cameras:[],scenes:[],asset:{},userData:{},parser:null}}(),T=null,E=function(){if(!T){T=new d.E;var e=new p._;e.setDecoderPath("./external/draco/gltf/"),T.setDRACOLoader(e)}return T},S=function(e){return(0,m.bc)(e)?"use-credentials":"anonymous"},P=function(e,t){"image"===e.getKind()&&(x.asImageResource(e).isSmooth()||(t.baseTexture.scaleMode=c.SCALE_MODES.NEAREST))},I=function(e){var t=new u.MeshBasicMaterial;return e.color&&(t.color=e.color),e.map&&(t.map=e.map),t},D=function(e){var t=e;if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)t.material[n]=I(t.material[n]);else t.material=I(t.material)},A=function(e){return e.traverse(D)},L=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,null,[{key:"loadTextures",value:function(e,t,n,r){var o=e.getResourcesManager(),i=c.Loader.shared;i.reset();var a={};t.forEach((function(t){if(o.hasResource(t)){var n=o.getResource(t);if("image"===n.getKind()){var r=h.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});i.add({name:t,url:r,loadType:c.LoaderResource.LOAD_TYPE.IMAGE,crossOrigin:S(r)}),a[t]=n}}}));var s=Object.keys(a).length;if(s){var l=0,u=i.onProgress.add((function(){l++,n(l,s)}));i.load((function(e,t){for(var n in e.onProgress.detach(u),t)if(t.hasOwnProperty(n)){var i=o.getResource(n);if("image"!==i.getKind())continue;var a=t[n].texture;a&&(j[n]=a,P(i,j[n]))}r()}))}else r()}},{key:"getPIXITexture",value:function(e,t){if(j[t])return j[t];if(!e.getResourcesManager().hasResource(t))return C;var n=e.getResourcesManager().getResource(t);if("image"!==n.getKind())return C;var r=h.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return j[t]=c.Texture.from(r,{resourceOptions:{crossorigin:S(r)}}),P(n,j[t]),j[t]}},{key:"getThreeTexture",value:function(t,n){var r=y[n];if(r)return r;var o=e.getPIXITexture(t,n).baseTexture.resource.source;if(!(o instanceof HTMLImageElement))throw new Error("Can't load texture for resource \"".concat(n,"\" as it's not an image."));var i=new u.Texture(o);return i.magFilter=u.LinearFilter,i.minFilter=u.LinearFilter,i.wrapS=u.RepeatWrapping,i.wrapT=u.RepeatWrapping,i.colorSpace=u.SRGBColorSpace,i.needsUpdate=!0,function(e,t){"image"===e.getKind()&&(x.asImageResource(e).isSmooth()||(t.magFilter=u.NearestFilter,t.minFilter=u.NearestFilter))}(t.getResourcesManager().getResource(n),i),y[n]=i,i}},{key:"getThreeMaterial",value:function(e,t,n){var r=n.useTransparentTexture,o="".concat(t,"|transparent:").concat(r.toString()),i=Z[o];if(i)return i;var a=new u.MeshBasicMaterial({map:this.getThreeTexture(e,t),side:r?u.DoubleSide:u.FrontSide,transparent:r});return Z[o]=a,a}},{key:"get3DModel",value:function(e,t){var n=k[t];if(n)return n;var r=function(e,t){if(!e.getResourcesManager().hasResource(t))return Promise.resolve(w);if("model3D"!==e.getResourcesManager().getResource(t).getKind())return Promise.resolve(w);var n=h.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0}),r=E();return r.withCredentials=(0,m.bc)(n),new Promise((function(e,t){r.load(n,(function(t){A(t.scene),e(t)}),void 0,(function(e){t(e)}))}))}(e,t);return k[t]=r,r}},{key:"getPIXIVideoTexture",value:function(e,t){if(j[t])return j[t];if(!e.getResourcesManager().hasResource(t))return C;if("video"!==e.getResourcesManager().getResource(t).getKind())return C;var n=h.Z.getResourceFullUrl(e,t,{disableCacheBurst:!0,isResourceForPixi:!0});return j[t]=c.Texture.from(n,{scaleMode:c.SCALE_MODES.LINEAR,resourceOptions:{autoPlay:!1,crossorigin:S(n)}}),j[t]}},{key:"loadFontFamily",value:function(e,t){if(b[t])return Promise.resolve(b[t]);var n=a()(t),r=null;e.getResourcesManager().hasResource(t)?"font"===e.getResourcesManager().getResource(t).getKind()&&(r=h.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0})):r=h.Z.getFullUrl(e,t,{isResourceForPixi:!0});return r?function(e,t){if("undefined"!==typeof FontFace)return fetch(t,{credentials:(0,m.bc)(t)?"include":"same-origin"}).then((function(e){if(!e.ok){var n="Unable to fetch "+t+" to be loaded as a font. HTTP status is: "+e.status+".";throw console.error(n),new Error(n)}return e.arrayBuffer()})).then((function(t){var n=new FontFace(e,t,{});document.fonts.add(n)}));var n=document.createElement("style");return n.appendChild(document.createTextNode("@font-face {\n          font-family: ".concat(e,";\n          src: ").concat(t,";\n        }"))),document.head.appendChild(n),new(g())(e,{}).load().catch((function(t){throw console.warn("Error while loading font ".concat(e),t),t}))}(n,r).then((function(e){return b[t]=n,n})):Promise.resolve("Arial")}},{key:"getFontFamily",value:function(e,t){return b[t]?b[t]:a()(t)}},{key:"getBitmapFontData",value:function(e,t){if(v[t])return Promise.resolve(v[t].data);if(!e.getResourcesManager().hasResource(t))return Promise.reject(new Error("Can't find resource called ".concat(t,".")));if("bitmapFont"!==e.getResourcesManager().getResource(t).getKind())return Promise.reject(new Error("The resource called ".concat(t," is not a bitmap font file. Require .fnt or .xml format.")));var n=h.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return n?l().get(n,{withCredentials:(0,m.bc)(n)}).then((function(e){return v[t]=e,e.data})):Promise.reject(new Error("The resource called ".concat(t," was no found.\nThe default bitmap font will be used.")))}},{key:"getInvalidPIXITexture",value:function(){return C}},{key:"getResourceJsonData",value:function(e,t){if(!e.getResourcesManager().hasResource(t))return Promise.reject(new Error("Can't find resource called ".concat(t,".")));var n=e.getResourcesManager().getResource(t);if("json"!==n.getKind()&&"tilemap"!==n.getKind()&&"tileset"!==n.getKind())return Promise.reject(new Error("The resource called ".concat(t," is not a json file.")));var r=h.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return l().get(r,{withCredentials:(0,m.bc)(r)}).then((function(e){return e.data}))}}]),e}()},77672:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(15671),o=n(43144),i=(n(87080),n(58247),function(){function e(t,n,o,i,a,s,l){(0,r.Z)(this,e),this._pixiObject=null,this._threeObject=null,this._instance=o,this._associatedObjectConfiguration=i,this._pixiContainer=a,this._threeGroup=s,this._project=t,this._layout=n,this._pixiResourcesLoader=l,this.wasUsed=!0}return(0,o.Z)(e,[{key:"update",value:function(){}},{key:"getPixiObject",value:function(){return this._pixiObject}},{key:"getThreeObject",value:function(){return this._threeObject}},{key:"getInstance",value:function(){return this._instance}},{key:"onRemovedFromScene",value:function(){null!==this._pixiObject&&this._pixiContainer.removeChild(this._pixiObject),null!==this._threeObject&&this._threeGroup.remove(this._threeObject)}},{key:"getOriginX",value:function(){return 0}},{key:"getOriginY",value:function(){return 0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getWidth",value:function(){return this._instance.hasCustomSize()?this._instance.getCustomWidth():this.getDefaultWidth()}},{key:"getHeight",value:function(){return this._instance.hasCustomSize()?this._instance.getCustomHeight():this.getDefaultHeight()}},{key:"getDepth",value:function(){return this._instance.hasCustomDepth()?this._instance.getCustomDepth():this.getDefaultDepth()}},{key:"getDefaultWidth",value:function(){return 32}},{key:"getDefaultHeight",value:function(){return 32}},{key:"getDefaultDepth",value:function(){return 32}}],[{key:"toRad",value:function(e){return e/180*Math.PI}}]),e}())},79916:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(15671),o=n(43144),i=(n(87080),n(58247),function(){function e(t,n,o,i,a,s){(0,r.Z)(this,e),this._pixiObject=null,this._instance=o,this._associatedObjectConfiguration=i,this._pixiContainer=a,this._project=t,this._layout=n,this._pixiResourcesLoader=s,this.wasUsed=!0}return(0,o.Z)(e,[{key:"update",value:function(){}},{key:"getPixiObject",value:function(){return this._pixiObject}},{key:"getInstance",value:function(){return this._instance}},{key:"onRemovedFromScene",value:function(){null!==this._pixiObject&&this._pixiContainer.removeChild(this._pixiObject)}},{key:"getOriginX",value:function(){return 0}},{key:"getOriginY",value:function(){return 0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCustomWidth",value:function(){return this._instance.getCustomWidth()}},{key:"getCustomHeight",value:function(){return this._instance.getCustomHeight()}},{key:"getWidth",value:function(){return this._instance.hasCustomSize()?this.getCustomWidth():this.getDefaultWidth()}},{key:"getHeight",value:function(){return this._instance.hasCustomSize()?this.getCustomHeight():this.getDefaultHeight()}},{key:"getDepth",value:function(){return 0}},{key:"getDefaultWidth",value:function(){return 32}},{key:"getDefaultHeight",value:function(){return 32}},{key:"getDefaultDepth",value:function(){return 0}}],[{key:"toRad",value:function(e){return e/180*Math.PI}}]),e}())},71106:function(e,t,n){"use strict";n.d(t,{Pu:function(){return l},aZ:function(){return s}});var r=n(15861),o=n(64687),i=n.n(o),a=n(28381),s=(n(71445),{authenticated:!1,firebaseUser:null,profile:null,loginState:null,badges:null,cloudProjects:null,cloudProjectsFetchingErrorLabel:null,receivedAssetPacks:null,receivedAssetShortHeaders:null,subscription:null,usages:null,limits:null,onLogout:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onLogin:function(){},onForgotPassword:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onEdit:function(){},onChangeEmail:function(){},onCreateAccount:function(){},onBadgesChanged:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCloudProjectsChanged:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshUserProfile:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshFirebaseProfile:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSubscriptionUpdated:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onPurchaseSuccessful:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSendEmailVerification:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onOpenEmailVerificationDialog:function(){},onAcceptGameStatsEmail:function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAuthorizationHeader:function(){return Promise.reject(new Error("Unimplemented"))}}),l={authenticated:!1,firebaseUser:null,profile:null,loginState:"done",badges:null,cloudProjects:[],cloudProjectsFetchingErrorLabel:null,receivedAssetPacks:[],receivedAssetShortHeaders:[],subscription:null,usages:null,limits:null},c=a.createContext(s);t.ZP=c},54458:function(e,t,n){"use strict";var r=n(36600),o=(n(28381),n(67835)),i=n(32484),a=n(40243),s=n(86278),l=n(61325),c=n(29343),u={container:{maxWidth:"480px",whiteSpace:"normal"}};t.Z=function(e){var t=e.message,n=e.onLogin,d=e.onCreateAccount;e.justifyContent;return(0,c.jsx)(a.sg,{alignItems:"center",children:(0,c.jsx)("div",{style:u.container,children:(0,c.jsxs)(l.ak,{children:[(0,c.jsx)(s.Z,{noMargin:!0,children:t||(0,c.jsx)(r.Trans,{id:"You are not connected. Create an account to build your game for Android, Windows, macOS and Linux in one click, and get access to metrics for your game."})}),(0,c.jsxs)(l.ep,{justifyContent:"center",noMargin:!0,children:[(0,c.jsx)(i.Z,{id:"create-account-button",label:(0,c.jsx)(r.Trans,{id:"Create my account"}),onClick:d,primary:!0}),(0,c.jsx)(o.Z,{label:(0,c.jsx)(r.Trans,{id:"Login"}),onClick:n})]})]})})})}},48853:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(28381),o=n(46538),i=n(40243),a=n(61325),s=n(78081),l=n(73298),c=n(86278),u=n(36600),d=n(75383),p=n(32484),h=n(2066),f=n(45911),g=n(67835),m=n(1413),x=n(78118),v=n(29343),b=r.memo((function(e){return(0,v.jsxs)(x.Z,(0,m.Z)((0,m.Z)({},e),{},{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",children:[(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.50049 3.99996C8.50049 3.72382 8.72435 3.49996 9.00049 3.49996H9.53382C10.2222 3.49996 10.8883 3.75602 11.3843 4.22098C11.8813 4.68696 12.1672 5.32612 12.1672 5.99996C12.1672 6.6738 11.8813 7.31296 11.3843 7.77894C10.8883 8.2439 10.2222 8.49996 9.53382 8.49996H9.00049C8.72435 8.49996 8.50049 8.2761 8.50049 7.99996C8.50049 7.72382 8.72435 7.49996 9.00049 7.49996H9.53382C9.97705 7.49996 10.3961 7.33459 10.7003 7.0494C11.0035 6.76524 11.1672 6.38699 11.1672 5.99996C11.1672 5.61293 11.0035 5.23468 10.7003 4.95051C10.3961 4.66533 9.97705 4.49996 9.53382 4.49996H9.00049C8.72435 4.49996 8.50049 4.2761 8.50049 3.99996Z",fill:"currentColor"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.500488 3.99996C0.500488 3.72382 0.724346 3.49996 1.00049 3.49996H9.00049C9.27663 3.49996 9.50049 3.72382 9.50049 3.99996V8.61534C9.50049 9.28796 9.24009 9.9355 8.7727 10.4149C8.30489 10.8947 7.66767 11.1666 7.00049 11.1666H3.00049C2.3333 11.1666 1.69608 10.8947 1.22827 10.4149C0.760885 9.93549 0.500488 9.28796 0.500488 8.61534V3.99996ZM1.50049 4.49996V8.61534C1.50049 9.0308 1.66152 9.42676 1.94427 9.71677C2.22661 10.0063 2.60681 10.1666 3.00049 10.1666H7.00049C7.39417 10.1666 7.77437 10.0063 8.0567 9.71677C8.33946 9.42676 8.50049 9.0308 8.50049 8.61534V4.49996H1.50049Z",fill:"currentColor"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.00049 0.166626C3.27663 0.166626 3.50049 0.390484 3.50049 0.666626V1.99996C3.50049 2.2761 3.27663 2.49996 3.00049 2.49996C2.72435 2.49996 2.50049 2.2761 2.50049 1.99996V0.666626C2.50049 0.390484 2.72435 0.166626 3.00049 0.166626Z",fill:"currentColor"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00049 0.166626C5.27663 0.166626 5.50049 0.390484 5.50049 0.666626V1.99996C5.50049 2.2761 5.27663 2.49996 5.00049 2.49996C4.72435 2.49996 4.50049 2.2761 4.50049 1.99996V0.666626C4.50049 0.390484 4.72435 0.166626 5.00049 0.166626Z",fill:"currentColor"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.00049 0.166626C7.27663 0.166626 7.50049 0.390484 7.50049 0.666626V1.99996C7.50049 2.2761 7.27663 2.49996 7.00049 2.49996C6.72435 2.49996 6.50049 2.2761 6.50049 1.99996V0.666626C6.50049 0.390484 6.72435 0.166626 7.00049 0.166626Z",fill:"currentColor"})]}))})),j=n(35038),C=n(46448),y=n(67724),Z=n(44634),k=n(96591),w=n(93431),T=n(8304),E=n(71106),S=function(e){switch(e){case"small":return 1;case"medium":default:return 3;case"large":case"xlarge":return 4}},P={grid:{margin:0,overflow:"unset"}},I=function(e){var t=e.isAuthenticatedUserProfile,n=e.communityLinks;return(0,v.jsx)(a.ak,{expand:!0,noMargin:!0,children:n.map((function(e,n){var r=e.url,o=e.icon;return r?(0,v.jsxs)(a.pJ,{noMargin:!0,alignItems:"center",children:[o,t?(0,v.jsx)(c.Z,{noMargin:!0,children:r}):(0,v.jsx)(k.Z,{href:r,onClick:function(){return h.ZP.openExternalURL(r)},children:(0,v.jsx)(c.Z,{noMargin:!0,color:"inherit",children:r})})]},n):null}))})},D=function(e){var t=e.profile,n=e.isAuthenticatedUserProfile,m=e.error,x=e.onRetry,k=e.onChangeEmail,D=e.onEditProfile,A=e.assetPacksListingDatas,L=e.onAssetPackOpen,M=t?t.donateLink:null,F=t&&t.communityLinks||{},O=F?F.personalWebsiteLink:null,R=t?F.personalWebsite2Link:null,B=t?F.twitterUsername:null,_=t?F.facebookUsername:null,N=t?F.youtubeUsername:null,U=t?F.tiktokUsername:null,H=t?F.instagramUsername:null,V=t?F.redditUsername:null,W=t?F.snapchatUsername:null,z=t?F.discordServerLink:null,G=(0,C.L)(),Y=r.useContext(E.ZP).receivedAssetPacks,q=r.useMemo((function(){if(!L||!A||!A.length)return null;var e=[],t=[],n=[],r=[];return A.forEach((function(o){var i=!!Y&&!!Y.find((function(e){return e.id===o.id})),a=(0,v.jsx)(T.c7,{assetPackListingData:o,onSelect:function(){(0,y.BA)({assetPackName:o.name,assetPackId:o.id,assetPackTag:null,assetPackKind:"private",source:"author-profile"}),L(o)},owned:i},o.id);o.includedListableProductIds&&o.includedListableProductIds.length?i?r.push(a):n.push(a):i?t.push(a):e.push(a)})),[].concat(r,n,t,e)}),[A,L,Y]);return m?(0,v.jsx)(d.Z,{onRetry:x,children:(0,v.jsx)(u.Trans,{id:"Unable to load the profile, please verify your internet connection or try again later."})}):t&&(n||A)?(0,v.jsx)(u.I18n,{children:function(e){var r=e.i18n;return(0,v.jsxs)(a.ep,{children:[(0,v.jsx)(o.Z,{src:(0,l.y)(t.email||"",{size:40})}),(0,v.jsxs)(a.ak,{noMargin:!0,expand:!0,children:[(0,v.jsxs)(a.ep,{justifyContent:"space-between",noMargin:!0,children:[(0,v.jsx)(c.Z,{size:"block-title",allowBrowserAutoTranslate:!t.username,style:{opacity:t.username?1:.5},children:t.username||(n?r._({id:"Edit your profile to pick a username!"}):r._({id:"No username"}))}),t.id&&!n&&!!M&&(0,v.jsx)(p.Z,{label:(0,v.jsx)(u.Trans,{id:"Buy me a coffee"}),primary:!0,onClick:function(){return h.ZP.openExternalURL(M)},icon:(0,v.jsx)(b,{})})]}),n&&t.email&&(0,v.jsxs)(i.sg,{noMargin:!0,children:[(0,v.jsx)(c.Z,{noMargin:!0,size:"body-small",children:(0,v.jsx)(u.Trans,{id:"Email"})}),(0,v.jsx)(c.Z,{children:t.email})]}),(0,v.jsxs)(i.sg,{noMargin:!0,children:[(0,v.jsx)(c.Z,{noMargin:!0,size:"body-small",children:(0,v.jsx)(u.Trans,{id:"Bio"})}),(0,v.jsx)(c.Z,{children:t.description||(0,v.jsx)(u.Trans,{id:"No bio defined."})})]}),(0,v.jsx)(I,{communityLinks:[{url:O,icon:w.Ty.personalWebsiteLink.icon},{url:R,icon:w.Ty.personalWebsite2Link.icon},{url:B?w.Ty.twitterUsername.prefix+B:void 0,icon:w.Ty.twitterUsername.icon},{url:_?w.Ty.facebookUsername.prefix+_:void 0,icon:w.Ty.facebookUsername.icon},{url:N?w.Ty.youtubeUsername.prefix+N:void 0,icon:w.Ty.youtubeUsername.icon},{url:U?w.Ty.tiktokUsername.prefix+U:void 0,icon:w.Ty.tiktokUsername.icon},{url:H?w.Ty.instagramUsername.prefix+H:void 0,icon:w.Ty.instagramUsername.icon},{url:V?w.Ty.redditUsername.prefix+V:void 0,icon:w.Ty.redditUsername.icon},{url:W?w.Ty.snapchatUsername.prefix+W:void 0,icon:w.Ty.snapchatUsername.icon},{url:z,icon:w.Ty.discordServerLink.icon}],isAuthenticatedUserProfile:!!n}),n&&(0,v.jsxs)(i.sg,{noMargin:!0,children:[(0,v.jsx)(c.Z,{noMargin:!0,size:"body-small",children:(0,v.jsx)(u.Trans,{id:"Donate link"})}),(0,v.jsx)(c.Z,{children:t.donateLink||(0,v.jsx)(u.Trans,{id:"No link defined."})})]}),n&&(0,v.jsxs)(a.ep,{justifyContent:"flex-start",noMargin:!0,children:[(0,v.jsx)(p.Z,{label:(0,v.jsx)(u.Trans,{id:"Edit my profile"}),primary:!0,onClick:D}),(0,v.jsx)(g.Z,{label:(0,v.jsx)(u.Trans,{id:"Change my email"}),onClick:k,disabled:t.isEmailAutogenerated}),(0,v.jsx)(g.Z,{label:(0,v.jsx)(u.Trans,{id:"Access public profile"}),onClick:function(){return h.ZP.openExternalURL(f.Zw.getUserPublicProfileUrl(t.id,t.username))},leftIcon:(0,v.jsx)(Z.Z,{})})]}),!n&&q&&(0,v.jsxs)(a.ak,{expand:!0,noMargin:!0,children:[(0,v.jsx)(i.x1,{noMargin:!0,children:(0,v.jsx)(c.Z,{size:"block-title",children:(0,v.jsx)(u.Trans,{id:"Asset packs"})})}),(0,v.jsx)(i.x1,{expand:!0,noMargin:!0,justifyContent:"start",children:(0,v.jsx)(j.Z,{cols:S(G),cellHeight:"auto",spacing:4,style:P.grid,children:q})})]})]})]})}}):(0,v.jsx)(s.Z,{})}},56596:function(e,t,n){"use strict";var r={openUserPublicProfile:function(e){}},o=n(28381).createContext(r);t.Z=o},86778:function(e,t,n){"use strict";var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(36600),l=n(28381),c=n(1773),u=n(67835),d=n(93431),p=n(36465),h=n(48853),f=n(29343);t.Z=function(e){var t=e.userId,n=e.onClose,i=e.onAssetPackOpen,g=l.useState(null),m=(0,o.Z)(g,2),x=m[0],v=m[1],b=l.useState(null),j=(0,o.Z)(b,2),C=j[0],y=j[1],Z=l.useState(null),k=(0,o.Z)(Z,2),w=k[0],T=k[1],E=l.useCallback((0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return v(null),e.prev=3,e.next=6,(0,d.D1)(t);case 6:n=e.sent,v(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),T(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[t]),S=l.useCallback((0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return y(null),e.prev=3,e.next=6,(0,p.zu)({sellerId:t,productType:"asset-pack"});case 6:n=e.sent,y(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),T(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[t]);l.useEffect((function(){E(),S()}),[t,E,S]);var P=C&&C.length>4?"md":"sm";return(0,f.jsx)(c.ZP,{title:null,open:!0,maxWidth:P,actions:[(0,f.jsx)(u.Z,{label:(0,f.jsx)(s.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],onRequestClose:n,children:(0,f.jsx)(h.Z,{profile:x,error:w,onRetry:function(){T(null),E()},assetPacksListingDatas:C,onAssetPackOpen:i})})}},5880:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(36600),a=n(87284),s=n(86278),l=n(40243),c=n(24910),u=n(61325),d=n(82422),p=n(29343),h={bulletIcon:{width:20,height:20,marginRight:10},bulletText:{flex:1}},f=function(e){var t=e.plan;if(e.hidePrice||null===t.monthlyPriceInEuros)return null;if(0===t.monthlyPriceInEuros)return(0,p.jsx)(s.Z,{noMargin:!0,color:"secondary",children:(0,p.jsx)(i.Trans,{id:"Free"})});var n=[];return n.push(t.isPerUser?(0,p.jsx)(s.Z,{noMargin:!0,color:"secondary",children:(0,p.jsx)(i.Trans,{id:"{0}\u20ac/seat/month",values:{0:t.monthlyPriceInEuros}})},"month"):(0,p.jsx)(s.Z,{noMargin:!0,color:"secondary",children:(0,p.jsx)(i.Trans,{id:"{0}\u20ac/month",values:{0:t.monthlyPriceInEuros}})},"month")),t.yearlyPriceInEuros&&n.push(t.isPerUser?(0,p.jsx)(s.Z,{noMargin:!0,color:"secondary",children:(0,p.jsx)(i.Trans,{id:"or {0}\u20ac/seat/year",values:{0:t.yearlyPriceInEuros}})},"year"):(0,p.jsx)(s.Z,{noMargin:!0,color:"secondary",children:(0,p.jsx)(i.Trans,{id:"or {0}\u20ac/year",values:{0:t.yearlyPriceInEuros}})},"year")),n};t.Z=function(e){var t=o.useContext(c.Z);return(0,p.jsx)(i.I18n,{children:function(n){var o=n.i18n;return(0,p.jsxs)(a.Z,{isHighlighted:e.isHighlighted,background:e.background,children:[(0,p.jsxs)(l.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,p.jsx)(s.Z,{size:"block-title",children:(0,p.jsx)("span",{children:(0,p.jsx)("b",{children:e.plan.name})})}),(0,p.jsx)(l.sg,{noMargin:!0,alignItems:"flex-end",children:f({plan:e.plan,hidePrice:e.hidePrice})})]}),(0,p.jsx)(s.Z,{color:"secondary",noMargin:!0,children:e.plan.smallDescription?o._(e.plan.smallDescription):""}),(0,p.jsx)(l.x1,{children:(0,p.jsx)(l.sg,{noMargin:!0,children:e.plan.descriptionBullets.map((function(n,i){return(0,p.jsx)(l.sg,{expand:!0,noMargin:!0,children:(0,p.jsxs)(l.x1,{noMargin:!0,alignItems:"center",children:[e.isHighlighted?(0,p.jsx)(d.Z,{style:(0,r.Z)((0,r.Z)({},h.bulletIcon),{},{color:t.message.valid})}):(0,p.jsx)(d.Z,{style:h.bulletIcon}),(0,p.jsx)(s.Z,{style:h.bulletText,children:o._(n.message)})]})},i)}))})}),e.actions&&(0,p.jsx)(u.ep,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:e.actions})]})}})}},79987:function(e,t,n){"use strict";var r=n(29439),o=n(36600),i=n(28381),a=n(67835),s=n(1773),l=n(85131),c=n(25256),u=n(71106),d=n(40243),p=n(67724),h=n(28641),f=n(86278),g=n(68151),m=n(48409),x=n(29343),v={icon:{width:40,height:40,marginRight:20},iconText:{flex:1}},b=i.forwardRef((function(e,t){var n=e.mode,b=e.id,j=e.title,C=e.onChangeSubscription,y=i.useContext(u.ZP),Z=i.useState(!1),k=(0,r.Z)(Z,2),w=k[0],T=k[1],E=i.useContext(h.o).openSubscriptionDialog,S=function(){(0,p.KT)(),T(!1)},P=function(){return(0,g.e_)(y.subscription)?(T(!1),!0):((0,m._F)()||(T(!0),(0,p.w1)({mode:n,id:b})),!1)};return i.useImperativeHandle(t,(function(){return{checkUserHasSubscription:P}})),(0,x.jsx)(s.ZP,{open:w,title:"try"===n?(0,x.jsx)(o.Trans,{id:"We need your support!"}):j,actions:[(0,x.jsx)(a.Z,{label:"try"===n?(0,x.jsx)(o.Trans,{id:"Continue anyway"}):(0,x.jsx)(o.Trans,{id:"Not now, thanks!"}),primary:!1,onClick:S},"close"),(0,x.jsx)(s.vF,{label:(0,x.jsx)(o.Trans,{id:"Get a subscription or login"}),primary:!0,onClick:function(){C&&C(),T(!1),E({reason:b,preStep:"subscriptionChecker"})}},"subscribe")],onRequestClose:S,maxWidth:"sm",children:(0,x.jsxs)(d.sg,{noMargin:!0,children:[(0,x.jsx)(d.x1,{noMargin:!0,alignItems:"center",children:"try"===n?(0,x.jsx)(f.Z,{children:(0,x.jsx)(o.Trans,{id:"Please get a subscription to keep SpeXEngine running."})}):(0,x.jsx)(f.Z,{children:(0,x.jsx)(o.Trans,{id:"To use this feature, you need a SpeXEngine subscription."})})}),(0,x.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,x.jsx)(l.Z,{style:v.icon}),(0,x.jsx)(f.Z,{style:v.iconText,children:(0,x.jsx)(o.Trans,{id:"Get a subscription to gain more one-click exports, cloud projects, leaderboards and remove the SpeXEngine splashscreen."})})]}),(0,x.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,x.jsx)(c.Z,{style:v.icon}),(0,x.jsx)(f.Z,{style:v.iconText,children:(0,x.jsx)(o.Trans,{id:"You're also supporting the development of SpeXEngine, an open-source software! In the future, more online services will be available for users with a subscription."})})]}),(0,x.jsx)(d.hS,{}),(0,x.jsx)(f.Z,{align:"right",children:(0,x.jsx)("b",{children:(0,x.jsx)(o.Trans,{id:"Thanks!"})})})]})})}));t.Z=b},28641:function(e,t,n){"use strict";n.d(t,{o:function(){return Y},p:function(){return q}});var r=n(29439),o=n(28381),i=n(15861),a=n(64687),s=n.n(a),l=n(36600),c=n(67835),u=n(1773),d=n(71106),p=n(40243),h=n(68151),f=n(86578),g=n(30141),m=n(67724),x=n(1589),v=n(49536),b=n(86278),j=n(21676),C=n(66789),y=n(29343);function Z(e){var t=e.onClose,n=e.authenticatedUser,r=!!n&&!!n.subscription&&!!n.subscription.planId;return(0,j.Y)((function(){n.onRefreshUserProfile().catch((function(){}))}),r?null:3900),(0,y.jsx)(u.ZP,{title:(0,y.jsx)(l.Trans,{id:"Confirming your subscription"}),actions:[r?(0,y.jsx)(u.vF,{label:(0,y.jsx)(l.Trans,{id:"Done!"}),primary:!0,onClick:t},"close"):(0,y.jsx)(c.Z,{label:(0,y.jsx)(l.Trans,{id:"Cancel and close"}),primary:!1,onClick:t},"close")],onRequestClose:t,maxWidth:"sm",open:!0,children:r?(0,y.jsxs)(p.sg,{noMargin:!0,children:[(0,y.jsx)(p.x1,{children:(0,y.jsxs)(b.Z,{children:[(0,y.jsx)(l.Trans,{id:"Thanks for getting a subscription and supporting SpeXEngine!"})," ","\ud83d\udc9c"]})}),(0,y.jsxs)(p.x1,{justifyContent:"center",alignItems:"center",children:[(0,y.jsx)(v.Z,{}),(0,y.jsx)(p.LZ,{}),(0,y.jsx)(b.Z,{children:(0,y.jsx)("b",{children:(0,y.jsx)(l.Trans,{id:"Your new plan is now activated."})})})]}),(0,y.jsx)(p.LZ,{}),(0,y.jsx)(p.x1,{justifyContent:"center",children:(0,y.jsx)(x.Z,{children:(0,y.jsx)(l.Trans,{id:"Your account is upgraded, with the extra exports and online services. If you wish to change later, come back to your profile and choose another plan."})})})]}):(0,y.jsxs)(p.sg,{noMargin:!0,children:[(0,y.jsx)(p.x1,{children:(0,y.jsxs)(b.Z,{children:[(0,y.jsx)(l.Trans,{id:"Thanks for getting a subscription and supporting SpeXEngine!"})," ","\ud83d\udc9c"," ",(0,y.jsx)("b",{children:(0,y.jsx)(l.Trans,{id:"Your browser will now open to enter your payment details."})})]})}),(0,y.jsxs)(p.x1,{justifyContent:"center",alignItems:"center",children:[(0,y.jsx)(C.Z,{size:20}),(0,y.jsx)(p.LZ,{}),(0,y.jsx)(b.Z,{children:(0,y.jsx)(l.Trans,{id:"Waiting for the subscription confirmation..."})})]}),(0,y.jsx)(p.LZ,{}),(0,y.jsx)(p.x1,{justifyContent:"center",children:(0,y.jsx)(x.Z,{children:(0,y.jsx)(l.Trans,{id:"Once you're done, come back to SpeXEngine and your account will be upgraded automatically, unlocking the extra exports and online services."})})})]})})}var k=n(2066),w=n(61325),T=n(1413),E=n(78118),S=o.memo((function(e){return(0,y.jsxs)(E.Z,(0,T.Z)((0,T.Z)({},e),{},{viewBox:"0 0 17 16",style:{fill:"none"},children:[(0,y.jsx)("path",{d:"M10.6668 6.66663C11.035 6.66663 11.3334 6.36815 11.3334 5.99996C11.3334 5.63177 11.035 5.33329 10.6668 5.33329C10.2986 5.33329 10.0001 5.63177 10.0001 5.99996C10.0001 6.36815 10.2986 6.66663 10.6668 6.66663Z",fill:"currentColor"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.32027 2.80616C8.41341 2.71663 8.53758 2.66663 8.66677 2.66663H13.5001C13.7762 2.66663 14.0001 2.89048 14.0001 3.16663V7.99996C14.0001 8.1329 13.9472 8.26037 13.853 8.35419L9.38864 12.8014C8.65615 13.531 7.46558 13.5111 6.758 12.7572L3.82881 9.63613C3.14175 8.90408 3.1713 7.75557 3.89511 7.05982L8.32027 2.80616ZM8.86811 3.66663L4.58811 7.78076C4.25911 8.09701 4.24567 8.61904 4.55797 8.95179L7.48713 12.0728C7.80876 12.4155 8.34992 12.4246 8.6829 12.0929L13.0001 7.79229V3.66663H8.86811Z",fill:"currentColor"})]}))})),P=n(65056),I=n(42986),D=n(63854),A=n(91),L=n(6403),M=function(e){if(e){var t=(0,A.T)(e);if(t){if(404===t.status)return(0,y.jsx)(l.Trans,{id:"This code is not valid - verify you've entered it properly."});if("redemption-code/cannot-be-redeemed-anymore"===t.code)return(0,y.jsx)(l.Trans,{id:"This code was valid but can't be redeemed anymore. If this is unexpected, contact us or the code provider."});if("user-redeemed-code/already-redeemed-by-user"===t.code)return(0,y.jsx)(l.Trans,{id:"You already used this code - you can't reuse a code multiple times."})}return(0,y.jsx)(l.Trans,{id:"There was an unknown error when trying to apply the code. Double check the code, try again later or contact us if this persists."})}};function F(e){var t=e.onClose,n=e.authenticatedUser,a=o.useState(""),d=(0,r.Z)(a,2),p=d[0],f=d[1],g=o.useState(!1),m=(0,r.Z)(g,2),x=m[0],v=m[1],b=o.useState(null),j=(0,r.Z)(b,2),C=j[0],Z=j[1],k=function(){var e=(0,i.Z)(s().mark((function e(){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),r=n.getAuthorizationHeader,o=n.profile,e.prev=2,o){e.next=5;break}throw new Error("User should be logged in");case 5:return e.next=7,(0,h.XT)(r,o.id,p.trim().toLowerCase());case 7:t(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),Z(e.t0);case 13:return e.prev=13,v(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),T=!!p&&!x,E=n.subscription;return(0,y.jsx)(l.I18n,{children:function(e){var n=e.i18n;return(0,y.jsx)(u.ZP,{title:(0,y.jsx)(l.Trans,{id:"Redeem a code"}),actions:[(0,y.jsx)(c.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!1,disabled:x,onClick:function(){return t(!1)}},"close"),(0,y.jsx)(D.Z,{isLoading:x,children:(0,y.jsx)(u.vF,{label:(0,y.jsx)(l.Trans,{id:"Redeem"}),disabled:!T,primary:!0,onClick:k},"redeem")})],cannotBeDismissed:x,onRequestClose:function(){return t(!1)},onApply:function(){T&&k()},maxWidth:"sm",open:!0,children:(0,y.jsx)("form",{onSubmit:function(e){e.preventDefault(),k()},autoComplete:"on",name:"redeemSubscriptionCoupon",children:(0,y.jsxs)(w.ak,{noMargin:!0,children:[(0,y.jsx)(I.Z,{value:p,onChange:f,translatableHintText:{id:"Enter your code here"},floatingLabelText:(0,y.jsx)(l.Trans,{id:"Redemption code"}),floatingLabelFixed:!0,errorText:M(C),autoFocus:"desktop"}),E&&E.planId?E.redemptionCodeValidUntil?E.redemptionCodeValidUntil>Date.now()?(0,y.jsx)(L.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"You currently have a subscription, applied thanks to a redemption code, valid until {0}. If you redeem another code, your existing subscription will be canceled and not redeemable anymore!",values:{0:n.date(E.redemptionCodeValidUntil)}})}):null:(0,y.jsx)(L.Z,{kind:"info",children:(0,y.jsx)(l.Trans,{id:"You currently have a subscription. If you redeem a code, the existing subscription will be cancelled and replaced by the one given by the code."})}):null]})})})}})}var O=n(5880),R=n(32484),B=n(81683),_=n(90242),N={descriptionText:{marginLeft:16,marginRight:16},bulletIcon:{width:20,height:20,marginRight:10},bulletText:{flex:1},diamondIcon:{width:90,height:90,flexShrink:0,objectFit:"contain"}},U={title:{id:"Cancel your subscription"},message:{id:"Are you sure you want to cancel your subscription?"},confirmButtonLabel:{id:"Cancel my subscription"},dismissButtonLabel:{id:"Go back"}},H={title:{id:"Update your subscription"},message:{id:"Are you sure you want to subscribe to this new plan? Your next payment will be pro-rated."},confirmButtonLabel:{id:"Update my subscription"},dismissButtonLabel:{id:"Go back"}},V={title:{id:"Update your subscription"},message:{id:"To get this new subscription, we need to cancel your existing one before you can pay for the new one. The change will be immediate but your payment will NOT be pro-rated (you will have to pay as for a new subscription)."},confirmButtonLabel:{id:"Cancel my subscription"},dismissButtonLabel:{id:"Go back"}},W={title:{id:"Update your subscription"},message:{id:"To get this new subscription, we need to cancel your existing one before you can pay for the new one. The change will be immediate. You will also lose your redeemed code."},confirmButtonLabel:{id:"Update my subscription"},dismissButtonLabel:{id:"Go back"}};function z(e){var t=e.open,n=e.onClose,a=e.analyticsMetadata,x=o.useState(!1),v=(0,r.Z)(x,2),j=v[0],C=v[1],T=o.useState("yearly"),E=(0,r.Z)(T,2),A=E[0],L=E[1],M=o.useState(20),z=(0,r.Z)(M,2),G=z[0],Y=z[1],q=o.useState(!1),X=(0,r.Z)(q,2),J=X[0],K=X[1],Q=o.useState(!1),$=(0,r.Z)(Q,2),ee=$[0],te=$[1],ne=o.useContext(d.ZP),re=(0,P.Z)(),oe=re.showConfirmation,ie=re.showAlert;o.useEffect((function(){t&&(0,m.Bn)(a)}),[t,a]);var ae=function(){var e=(0,i.Z)(s().mark((function e(t,n){var r,o,i,a,l,c,u,d,p,f,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ne.getAuthorizationHeader,o=ne.subscription,(i=ne.profile)&&o){e.next=3;break}return e.abrupt("return");case 3:if((0,m.Ct)(n.planId),o.planId){e.next=11;break}return K(!0),a="gdevelop_education"===n.planId,l=a?"gdevelop_education_".concat(A):n.planId||"",c=a?G:void 0,k.ZP.openExternalURL((0,h.f3)({planId:l,userId:i.id,userEmail:i.email,quantity:c})),e.abrupt("return");case 11:if(u=n.planId){e.next=37;break}return e.next=15,oe(U);case 15:if(e.sent){e.next=18;break}return e.abrupt("return");case 18:return C(!0),e.prev=19,e.next=22,(0,h.YB)(r,i.id,{planId:null});case 22:return e.next=24,ne.onSubscriptionUpdated();case 24:ie({title:{id:"Subscription cancelled"},message:{id:"Your subscription is now cancelled."}}),e.next=32;break;case 27:return e.prev=27,e.t0=e.catch(19),e.next=31,ne.onSubscriptionUpdated();case 31:(0,g.gR)({message:t._({id:"Your subscription could not be cancelled. Please try again later!"}),rawError:e.t0,errorId:"subscription-update-error"});case 32:return e.prev=32,C(!1),e.finish(32);case 35:e.next=82;break;case 37:if(d=!(0,h.Bg)(o,u),p=!!o.redemptionCodeValidUntil&&o.redemptionCodeValidUntil>Date.now(),f=!!o.redemptionCodeValidUntil&&o.redemptionCodeValidUntil<Date.now(),x=!d||f?H:p?W:V,!(d&&!f||p)){e.next=48;break}return e.next=45,oe(x);case 45:if(e.sent){e.next=48;break}return e.abrupt("return");case 48:if(d){e.next=66;break}return C(!0),e.prev=50,e.next=53,(0,h.YB)(r,i.id,{planId:n.planId});case 53:return e.next=55,ne.onSubscriptionUpdated();case 55:ie({title:{id:"Subscription updated"},message:{id:"Congratulations, your new subscription is now active! You can now use the services unlocked with this plan."}}),e.next=61;break;case 58:e.prev=58,e.t1=e.catch(50),(0,g.gR)({message:t._({id:"Your subscription could not be updated. Please try again later!"}),rawError:e.t1,errorId:"subscription-update-error"});case 61:return e.prev=61,C(!1),e.finish(61);case 64:e.next=82;break;case 66:return C(!0),e.prev=67,e.next=70,(0,h.YB)(r,i.id,{planId:""});case 70:return e.next=72,ne.onSubscriptionUpdated();case 72:e.next=77;break;case 74:e.prev=74,e.t2=e.catch(67),(0,g.gR)({message:t._({id:"Your subscription could not be cancelled. Please try again later!"}),rawError:e.t2,errorId:"subscription-update-error"});case 77:return e.prev=77,C(!1),e.finish(77);case 80:K(!0),k.ZP.openExternalURL((0,h.f3)({planId:u,userId:i.id,userEmail:i.email}));case 82:case"end":return e.stop()}}),e,null,[[19,27,32,35],[50,58,61,64],[67,74,77,80]])})));return function(t,n){return e.apply(this,arguments)}}(),se=!ne.subscription||!ne.profile||j,le=(0,h.e_)(ne.subscription);return(0,y.jsx)(l.I18n,{children:function(e){var r=e.i18n;return(0,y.jsx)(u.ZP,{title:(0,y.jsx)(l.Trans,{id:"SpeXEngine Premium"}),actions:[(0,y.jsx)(c.Z,{label:(0,y.jsx)(l.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],secondaryActions:[(0,y.jsx)(c.Z,{leftIcon:(0,y.jsx)(S,{}),label:(0,y.jsx)(l.Trans,{id:"Redeem a code"}),disabled:!ne.authenticated||se,primary:!1,onClick:function(){return te(!0)}},"redeem-code")],onRequestClose:n,open:t,children:(0,y.jsxs)(w.ak,{noMargin:!0,expand:!0,children:[(0,y.jsxs)(w.pJ,{noMargin:!0,alignItems:"center",children:[(0,y.jsx)("img",{src:"res/diamond.svg",style:N.diamondIcon,alt:""}),(0,y.jsx)(b.Z,{children:(0,y.jsx)(l.Trans,{id:"Get a subscription to unlock more one-click exports and other exclusive features as a premium creator in our community. With a subscription, you're also supporting the development of SpeXEngine, which is an open-source software."})}),(0,y.jsx)(c.Z,{style:{flexShrink:0},label:(0,y.jsx)(l.Trans,{id:"Read more"}),onClick:function(){return k.ZP.openExternalURL("https://engine.spacexpanse.org/pricing")}})]}),(0,h.Hm)().filter((function(e){return!e.hideInSubscriptionDialog})).map((function(e){var t=ne.subscription?ne.subscription.planId:null,n=!e.planId,o=t===e.planId||!!t&&t===e.legacyPlanId,i=null;return n||(i="gdevelop_education"===e.planId?o?[(0,y.jsx)(b.Z,{children:(0,y.jsx)(l.Trans,{id:"Contact us for more information."})},"contact")]:[(0,y.jsxs)(w.ep,{expand:!0,noColumnMargin:!0,noMargin:!0,children:[(0,y.jsx)(I.Z,{value:G.toString(),floatingLabelFixed:!0,fullWidth:!0,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Number of seats"}),commitOnBlur:!0,type:"number",onChange:function(e){var t=parseInt(e);Y(Math.min(h.VZ,Math.max(Number.isNaN(t)?h.Gs:t,h.Gs)))},min:h.Gs,max:h.VZ,step:1,helperMarkdownText:r._({id:"As a teacher, you will use one seat in the plan so make sure to include yourself!"})}),(0,y.jsxs)(B.Z,{value:A,floatingLabelText:(0,y.jsx)(l.Trans,{id:"Engagement"}),fullWidth:!0,onChange:function(e,t,n){L(n)},children:[(0,y.jsx)(_.Z,{value:"yearly",label:{id:"Per year"}}),(0,y.jsx)(_.Z,{value:"monthly",label:{id:"Per month"}})]})]},"options"),(0,y.jsx)(R.Z,{primary:!0,disabled:se,label:(0,y.jsx)(D.Z,{isLoading:se,children:(0,y.jsx)(l.Trans,{id:"Choose this plan"})}),onClick:function(){return ae(r,e)}},"upgrade")]:o&&le?[(0,y.jsx)(c.Z,{disabled:se,label:(0,y.jsx)(D.Z,{isLoading:se,children:(0,y.jsx)(l.Trans,{id:"Cancel your subscription"})}),onClick:function(){return ae(r,{planId:null})}},"cancel")]:[(0,y.jsx)(R.Z,{primary:!0,disabled:se,label:(0,y.jsx)(D.Z,{isLoading:se,children:(0,y.jsx)(l.Trans,{id:"Choose this plan"})}),onClick:function(){return ae(r,e)}},"upgrade")]),(0,y.jsx)(O.Z,{plan:e,actions:i,isPending:se,isHighlighted:o,background:"medium"},e.planId||"free")})),(0,y.jsx)(O.Z,{plan:h.jt,actions:(0,y.jsx)(R.Z,{primary:!0,label:(0,y.jsx)(l.Trans,{id:"Learn more"}),onClick:function(){k.ZP.openExternalURL("https://engine.spacexpanse.org/pricing")}}),isPending:!1,isHighlighted:!1,background:"dark"}),(0,y.jsx)(p.sg,{children:(0,y.jsx)(p.x1,{children:(0,y.jsx)(f.Z,{children:(0,y.jsx)(l.Trans,{id:"Subscriptions can be stopped at any time. SpeXEngine uses Stripe.com and PayPal for secure payment. No credit card data is stored by SpeXEngine: everything is managed by Stripe.com or PayPal secure infrastructure."})})})}),!ne.authenticated&&"loggingIn"!==ne.loginState&&(0,y.jsx)(u.ZP,{open:!0,title:(0,y.jsx)(l.Trans,{id:"Create a SpeXEngine account to continue"}),maxWidth:"sm",cannotBeDismissed:!0,secondaryActions:[(0,y.jsx)(c.Z,{label:(0,y.jsx)(l.Trans,{id:"Maybe later"}),onClick:n},"later")],actions:[(0,y.jsx)(c.Z,{label:(0,y.jsx)(l.Trans,{id:"Login"}),onClick:ne.onLogin},"login"),(0,y.jsx)(u.vF,{label:(0,y.jsx)(l.Trans,{id:"Create my account"}),primary:!0,onClick:ne.onCreateAccount},"create-account")],children:(0,y.jsx)(b.Z,{children:(0,y.jsx)(l.Trans,{id:"It is free and you will get access to online services: cloud projects, leaderboards, player feedbacks, cloud builds..."})})}),J&&(0,y.jsx)(Z,{authenticatedUser:ne,onClose:function(){K(!1),ne.onSubscriptionUpdated()}}),ee&&(0,y.jsx)(F,{authenticatedUser:ne,onClose:function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te(!1),!t){e.next=10;break}return e.prev=2,C(!0),e.next=6,ne.onSubscriptionUpdated();case 6:return e.prev=6,C(!1),K(!0),e.finish(6);case 10:case"end":return e.stop()}}),e,null,[[2,,6,10]])})));return function(t){return e.apply(this,arguments)}}()})]})})}})}var G=n(48409),Y=o.createContext({openSubscriptionDialog:function(){}}),q=function(e){var t=e.children,n=e.simulateMobileApp,i=o.useState(null),a=(0,r.Z)(i,2),s=a[0],l=a[1],c=o.useContext(d.ZP),u=(0,P.Z)().showAlert,p=o.useCallback((function(e){if((0,G._F)()||n){if((0,h.e_)(c.subscription)&&!(0,h.rq)(c.subscription))return void u({title:{id:"Subscription outside the app store"},message:{id:"The subscription of this account comes from outside the app store. Connect with your account on engine.spacexpanse.org from your web-browser to manage it."}})}else{if((0,h.rq)(c.subscription))return void u({title:{id:"Subscription with the Apple App store or Google Play store"},message:{id:"The subscription of this account was done using Apple or Google Play. Connect on your account on your Apple or Google device to manage it."}});l(e)}}),[c.subscription,u,n]),f=o.useMemo((function(){return{openSubscriptionDialog:p}}),[p]);return(0,y.jsxs)(Y.Provider,{value:f,children:[t,s&&(0,y.jsx)(z,{open:!0,onClose:function(){return l(null)},analyticsMetadata:s})]})}},10641:function(e,t,n){"use strict";n.d(t,{D:function(){return g}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(68009),c=n(98094),u=n(93431),d=n(38501),p=n(71106),h=n(29343),f=function(e){if(e)return"Error while loading users"},g=function(e){var t=e.userIds,n=e.onChange,i=e.floatingLabelText,g=e.helperText,m=e.disabled,x=(0,d.Z)(),v=s.useState([]),b=(0,o.Z)(v,2),j=b[0],C=b[1],y=(0,s.useState)(""),Z=(0,o.Z)(y,2),k=Z[0],w=Z[1],T=(0,s.useState)(!1),E=(0,o.Z)(T,2),S=E[0],P=E[1],I=s.useContext(p.ZP).profile,D=I?[{text:I.username||"Yourself (no username)",value:I.id}]:[],A=s.useState([]),L=(0,o.Z)(A,2),M=L[0],F=L[1],O=s.useState(null),R=(0,o.Z)(O,2),B=R[0],_=R[1],N=s.useRef(null),U=(0,l.N)((0,r.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(null),k){e.next=4;break}return F([]),e.abrupt("return");case 4:return e.prev=4,P(!0),e.next=8,(0,u.me)(k);case 8:t=e.sent,n=I?t.filter((function(e){return e.id!==I.id})):t,F(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),_(e.t0),console.error("Could not load the users: ",e.t0);case 17:return e.prev=17,P(!1),V(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[4,13,17,21]])}))),500);s.useEffect((function(){U()}),[U,k]);var H=s.useCallback((0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(null),t.length){e.next=4;break}return C([]),e.abrupt("return");case 4:return e.prev=4,P(!0),e.next=8,(0,u.TL)(t);case 8:n=e.sent,C(t.map((function(e){var t=n[e];return t?{text:t.username||"".concat(I&&t.id===I.id?"Yourself":"Unknown"," (no username)"),value:t.id}:null})).filter(Boolean)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),_(e.t0),console.error("Could not load the users: ",e.t0);case 16:return e.prev=16,P(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,12,16,19]])}))),[t,I]),V=s.useCallback((function(){N.current&&N.current.focusInput()}),[]);return s.useEffect((function(){H()}),[H]),(0,h.jsx)(c.Z,{hintText:{id:"Start typing a username"},floatingLabelText:i,helperText:g,value:j,onChange:function(e,t){t&&(C(t),n(t.map((function(e){return{username:e.text,userId:e.value}}))),x())},inputValue:k,onInputChange:function(e,t){w(t)},ref:N,dataSource:D.concat(M.map((function(e){return e.username&&e.id?{text:e.username,value:e.id}:null})).filter(Boolean)),loading:S||m,fullWidth:!0,error:f(B),disableAutoTranslate:!0})}},794:function(e,t,n){"use strict";n.d(t,{C7:function(){return x},Cf:function(){return C},Ib:function(){return g},cX:function(){return b},gr:function(){return y},rM:function(){return Z},uB:function(){return j}});var r=n(1413),o=n(15861),i=n(43144),a=n(15671),s=n(97326),l=n(60136),c=n(29388),u=n(98737),d=n(64687),p=n.n(d),h=n(34517),f=n(4964),g="gdevelop-cloud-project-autosave",m="cache-autosave:",x="undefined"!==typeof window&&"caches"in window,v=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),e=t.call(this),Error.captureStackTrace&&Error.captureStackTrace((0,s.Z)(e),n),e.name="CloudProjectReadingError",e}return(0,i.Z)(n)}((0,u.Z)(Error)),b=function(e){return function(){var t=(0,o.Z)(p().mark((function t(n,r){var o,i,a,s,l,c,u,d,b,j,C;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=n.fileIdentifier).startsWith(m)){t.next=25;break}if(x){t.next=4;break}throw new Error("Cache API is not available.");case 4:if(i=e.profile){t.next=7;break}throw new Error("User seems not to be logged in. Cannot retrieve autosaved filed from cache.");case 7:return t.next=9,caches.has(g);case 9:if(t.sent){t.next=12;break}throw new Error("Cloud project autosave cache could not be retrieved.");case 12:return a=n.fileIdentifier.replace(m,""),t.next=15,caches.open(g);case 15:return s=t.sent,l="".concat(i.id,"/").concat(a),t.next=19,s.match(l);case 19:return c=t.sent,t.next=22,c.text();case 22:return u=t.sent,d=JSON.parse(u).project,t.abrupt("return",{content:JSON.parse(d)});case 25:return r&&r(25,{id:"Calibrating sensors"}),t.next=28,(0,h.Xj)(e,o);case 28:if(b=t.sent){t.next=31;break}throw new Error("Cloud project couldn't be fetched.");case 31:return r&&r(50,{id:"Starting engine"}),t.next=34,(0,h.LG)(e,o);case 34:return r&&r(75,{id:"Checking tools"}),t.next=37,(0,h.Sx)(b,n.version);case 37:return j=t.sent,r&&r(100,{id:"Opening portal"}),t.prev=39,t.next=42,(0,f.H)(j);case 42:return C=t.sent,t.abrupt("return",{content:JSON.parse(C)});case 46:throw t.prev=46,t.t0=t.catch(39),new v;case 49:case"end":return t.stop()}}),t,null,[[39,46]])})));return function(e,n){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=(0,o.Z)(p().mark((function t(n,r,o){var i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.fileIdentifier,t.next=3,(0,h.LG)(e,i);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},C=function(e){return x?function(){var t=(0,o.Z)(p().mark((function t(n,r){var o,i,a,s,l,c,u,d;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.profile){t.next=3;break}return t.abrupt("return",null);case 3:return t.next=5,caches.has(g);case 5:if(t.sent){t.next=8;break}return t.abrupt("return",null);case 8:return i=n.fileIdentifier,t.next=11,caches.open(g);case 11:return a=t.sent,s="".concat(o.id,"/").concat(i),t.next=15,a.match(s);case 15:if(l=t.sent){t.next=18;break}return t.abrupt("return",null);case 18:return t.next=20,l.text();case 20:if(c=t.sent,u=JSON.parse(c).createdAt,r){t.next=24;break}return t.abrupt("return",u);case 24:if(d=n.lastModifiedDate){t.next=27;break}return t.abrupt("return",null);case 27:return t.abrupt("return",u>d+5e3?u:null);case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}():void 0},y=function(e){return x?function(){var e=(0,o.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.Z)((0,r.Z)({},t),{},{fileIdentifier:m+t.fileIdentifier}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0},Z=function(){var e=(0,o.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,caches.delete(g);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},527:function(e,t,n){"use strict";n.d(t,{f:function(){return d}});var r=n(15861),o=n(64687),i=n.n(o),a=n(34517),s=n(81303),l=n(36465),c=n(57974),u=n(72702),d=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,d,p,h,f,g,m,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.fileMetadata,o=t.authenticatedUser,d=t.onProgress,p={erroredResources:[]},h=r.fileIdentifier,f=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n=t.getResource(e),r=n.getFile();if((0,c.PX)(r)){if((0,l.bW)(r))return{resource:n,url:r,filename:(0,l.SV)(r)};if((0,c.Gu)(r)){var o=(0,c.OI)(n).extension;return{resource:n,url:r,filename:(0,u.B)(n.getName()+(o||""))}}return null}return p.erroredResources.push({resourceName:n.getName(),error:new Error("Unsupported relative file.")}),null})).filter(Boolean)},g=f(n),e.next=7,(0,s.R7)({urlContainers:g,onProgress:function(e,t){d(e,2*t)}});case 7:return m=e.sent,x=(0,s.At)(m,(function(e,t){p.erroredResources.push({resourceName:e,error:t})})),e.next=11,(0,a.LG)(o,h);case 11:return e.next=13,(0,a.ll)(o,h,x.map((function(e){return e.file})),(function(e,t){d(t+e,2*t)}));case 13:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,o=x[t].resource;!r&&n?o.setFile(n):p.erroredResources.push({resourceName:o.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},10822:function(e,t,n){"use strict";n.d(t,{x:function(){return u}});var r=n(15861),o=n(64687),i=n.n(o),a=n(34517),s=n(85919),l=n(81303),c=n(57974),u=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,u,d,p,h,f,g,m,x,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.authenticatedUser,o=t.oldFileMetadata,u=t.newFileMetadata,t.oldStorageProvider,d=t.oldStorageProviderOperations,t.newStorageProvider,t.newStorageProviderOperations,p=t.onProgress,h={erroredResources:[]},f=u.fileIdentifier,g=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n=t.getResource(e),r=n.getFile();return(0,c.PX)(r)?(0,s.yk)(r)?(0,a.u_)(r)===f?null:{resource:n,url:r,filename:(0,a.zu)(r)}:(0,c.Gu)(r)?(h.erroredResources.push({resourceName:n.getName(),error:new Error("Unsupported blob URL.")}),null):null:(h.erroredResources.push({resourceName:n.getName(),error:new Error("Unsupported relative file.")}),null)})).filter(Boolean)},m=g(n),d.onEnsureCanAccessResources&&d.onEnsureCanAccessResources(n,o),e.next=8,(0,l.R7)({urlContainers:m,onProgress:function(e,t){p(e,2*t)}});case 8:return x=e.sent,v=(0,l.At)(x,(function(e,t){h.erroredResources.push({resourceName:e,error:t})})),e.next=12,(0,a.LG)(r,f);case 12:return e.next=14,(0,a.ll)(r,f,v.map((function(e){return e.file})),(function(e,t){p(t+e,2*t)}));case 14:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,o=v[t].resource;!r&&n?o.setFile(n):h.erroredResources.push({resourceName:o.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",h);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},32438:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(28381),o=n(1413),i=n(29439),a=n(15861),s=n(64687),l=n.n(s),c=n(34517),u=n(41006),d=n(36600),p=n(1773),h=n(67835),f=n(29277),g=n(29343),m=function(e){var t=r.useState(e.nameSuggestion),n=(0,i.Z)(t,2),o=n[0],a=n[1],s=r.useState(null),l=(0,i.Z)(s,2),u=l[0],m=l[1],x=function(t){m(null),o?e.onSave(o):m(t._({id:"Project name cannot be empty."}))};return(0,g.jsx)(d.I18n,{children:function(t){var n=t.i18n;return(0,g.jsx)(p.ZP,{title:(0,g.jsx)(d.Trans,{id:"Choose a name for your new project"}),onApply:function(){return x(n)},actions:[(0,g.jsx)(h.Z,{label:(0,g.jsx)(d.Trans,{id:"Cancel"}),primary:!1,onClick:e.onCancel},"cancel"),(0,g.jsx)(p.vF,{label:(0,g.jsx)(d.Trans,{id:"Save"}),primary:!0,onClick:function(){return x(n)}},"save")],open:!0,onRequestClose:e.onCancel,maxWidth:"sm",flexBody:!0,children:(0,g.jsx)(f.ZP,{autoFocus:"desktop",fullWidth:!0,maxLength:c.v9,errorText:u,translatableHintText:{id:"Project name"},type:"text",value:o,onChange:function(e,t){a(t)}})})}})},x=n(4964),v=n(794),b=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.h_)(t),e.next=3,(0,x.G)(n,"game.json");case 3:return r=e.sent,e.abrupt("return",[r,n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.H)(t);case 3:return r=e.sent,e.abrupt("return",r===n&&!!JSON.parse(r));case 7:return e.prev=7,e.t0=e.catch(0),console.error("An error occurred when checking zipped project.",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(l().mark((function e(t){var n,r,o,a,s,u,d,p,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authenticatedUser,r=t.project,o=t.cloudProjectId,a=t.options,e.next=3,b(r);case 3:return s=e.sent,u=(0,i.Z)(s,2),d=u[0],p=u[1],e.next=9,j(d,p);case 9:if(e.sent){e.next=12;break}throw new Error("Project compression failed before saving the project.");case 12:return e.next=14,(0,c.Z7)({authenticatedUser:n,cloudProjectId:o,zippedProject:d,previousVersion:a?a.previousVersion:null});case 14:return h=e.sent,e.abrupt("return",h);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return function(){var t=(0,a.Z)(l().mark((function t(n,r,i){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.gameId){t.next=10;break}return console.info("Game id was never set, updating the cloud project."),t.prev=2,t.next=5,(0,c.np)(e,r.fileIdentifier,{gameId:n.getProjectUuid()});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error("Could not update cloud project with gameId",t.t0);case 10:return a=(0,o.Z)((0,o.Z)({},r),{},{gameId:n.getProjectUuid()}),t.next=13,C({authenticatedUser:e,project:n,cloudProjectId:a.fileIdentifier,options:i});case 13:if(t.sent){t.next=16;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:a});case 16:return t.abrupt("return",{wasSaved:!0,fileMetadata:a});case 17:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()},Z=function(e){return function(){var t=(0,a.Z)(l().mark((function t(n,r,o){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authenticated){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,(0,c.np)(e,r.fileIdentifier,o);case 5:return t.next=7,C({authenticatedUser:e,project:n,cloudProjectId:r.fileIdentifier});case 7:if(t.sent){t.next=10;break}throw new Error("Couldn't save project following property update.");case 10:return t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(2),console.warn("An error occurred while changing cloud project name. Ignoring.",t.t0),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()},k=function(e){return e.response&&e.response.data&&"project-creation/too-many-projects"===e.response.data.code?{id:"You've reached the limit of cloud projects you can have. Delete some existing cloud projects of yours before trying again."}:{id:"An error occurred when saving the project, please verify your internet connection or try again later."}},w=function(e){var t=e.authenticatedUser,n=e.setDialog,r=e.closeDialog;return function(){var e=(0,a.Z)(l().mark((function e(o){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.project,o.fileMetadata,t.authenticated){e.next=3;break}return e.abrupt("return",{saveAsLocation:null});case 3:return e.next=5,new Promise((function(e){n((function(){return(0,g.jsx)(m,{onCancel:function(){r(),e(null)},nameSuggestion:i.getName(),onSave:function(t){r(),e(t)}})}))}));case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",{saveAsLocation:null});case 8:return e.abrupt("return",{saveAsLocation:{name:a}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(e,t,n){return function(){var t=(0,a.Z)(l().mark((function t(n,r,o){var i,a,s,u,d;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(i=r.name,a=r.gameId,i){t.next=5;break}throw new Error("A name was not chosen before saving as.");case 5:if(e.authenticated){t.next=7;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:null});case 7:return o.onStartSaving(),t.prev=8,t.next=11,(0,c.eM)(e,{name:i,gameId:a});case 11:if(s=t.sent){t.next=14;break}throw new Error("No cloud project was returned from creation api call.");case 14:return u={fileIdentifier:s.id,gameId:a},t.next=17,o.onMoveResources({newFileMetadata:u});case 17:return d=u.fileIdentifier,t.next=20,(0,c.LG)(e,d);case 20:return t.next=22,C({authenticatedUser:e,project:n,cloudProjectId:d});case 22:if(t.sent){t.next=25;break}throw new Error("No version id was returned from committing api call.");case 25:return t.abrupt("return",{wasSaved:!0,fileMetadata:u});case 28:throw t.prev=28,t.t0=t.catch(8),console.error("An error occurred while creating a cloud project",t.t0),t.t0;case 32:case"end":return t.stop()}}),t,null,[[8,28]])})));return function(e,n,r){return t.apply(this,arguments)}}()},E=function(e){return v.C7?function(){var t=(0,a.Z)(l().mark((function t(n,r){var o,i,a,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.profile){t.next=3;break}return t.abrupt("return");case 3:return i=r.fileIdentifier,t.next=6,caches.open(v.Ib);case 6:a=t.sent,s="".concat(o.id,"/").concat(i),a.put(s,new Response(JSON.stringify({project:(0,u.h_)(n),createdAt:Date.now()})));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}():void 0},S=n(2066),P=n(78118),I=r.memo((function(e){return(0,g.jsx)(P.Z,(0,o.Z)((0,o.Z)({},e),{},{viewBox:"0 0 16 12",style:{fill:"none"},children:(0,g.jsx)("path",{d:"M0.75 8C0.75 9.7949 2.20507 11.25 4 11.25H12C13.7949 11.25 15.25 9.7949 15.25 8C15.25 6.2869 13.9246 4.8834 12.2433 4.759C12.1183 2.5239 10.2663 0.75 8 0.75C5.73368 0.75 3.88168 2.5239 3.75672 4.759C2.07542 4.8834 0.75 6.2869 0.75 8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))})),D=n(50057),A=n.n(D),L=n(19431),M=n(72410),F=A()("path"),O=A()("electron"),R=A()("@electron/remote"),B=R?R.app:null,_={internalName:"Cloud",name:{id:"SpeXEngine Cloud"},renderIcon:function(e){return(0,g.jsx)(I,{fontSize:e.size})},hiddenInOpenDialog:!0,needUserAuthentication:!0,getFileMetadataFromAppArguments:function(e){if(!e[S.rM])return null;if(!e[S.rM].length)return null;var t,n=e[S.rM][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")?null:{fileIdentifier:n}},onRenderNewProjectSaveAsLocationChooser:function(e){var t=e.projectName,n=e.saveAsLocation,r=e.setSaveAsLocation;return n&&n.name===t||r({name:t}),null},createOperations:function(e){var t=e.setDialog,n=e.closeDialog,r=e.authenticatedUser;return{onOpen:(0,v.cX)(r),onEnsureCanAccessResources:(0,v.uB)(r),onSaveProject:y(r),onChooseSaveProjectAsLocation:w({authenticatedUser:r,setDialog:t,closeDialog:n}),onSaveProjectAs:T(r),onAutoSaveProject:E(r),getAutoSaveCreationDate:(0,v.Cf)(r),onGetAutoSave:(0,v.gr)(r),onChangeProjectProperty:Z(r),getOpenErrorMessage:function(e){return{id:"An error occurred when opening the project. Check that your internet connection is working and that your browser allows the use of cookies."}},getWriteErrorMessage:k}},createResourceOperations:function(e){e.authenticatedUser;return function(e){var t=e.project,n=e.resource,r=e.i18n,o=(e.fileMetadata,e.informUser),i=B&&F?{id:'Save in the "Downloads" folder'}:{id:"Open resource in browser"},s=function(){var e=(0,a.Z)(l().mark((function e(r){var i,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.askUserForDownloadDestination,a=M.Z.getResourceFullUrl(t,n.getName(),{}),!(B&&F&&O)){e.next=16;break}if(s=F.join(B.getPath("downloads"),n.getName()),!i){e.next=10;break}if(c=R.dialog.showSaveDialogSync(null,{defaultPath:s,properties:["createDirectory","showOverwriteConfirmation"]})){e.next=8;break}return e.abrupt("return");case 8:e.next=11;break;case 10:c=s;case 11:return e.next=13,(0,L.t)({urlContainers:[{url:a,filePath:c}],onProgress:function(){},throwIfAnyError:!1});case 13:o({actionLabel:(0,g.jsx)(d.Trans,{id:"Open folder"}),message:(0,g.jsx)(d.Trans,{id:"The resource has been downloaded"}),onActionClick:function(){return O.shell.showItemInFolder(F.resolve(c))}}),e.next=17;break;case 16:S.ZP.openExternalURL(a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=[{label:r._(i),click:function(){return s({askUserForDownloadDestination:!1})}}];return B&&F&&c.push({label:r._({id:"Save as..."}),click:function(){return s({askUserForDownloadDestination:!0})}}),c}}}},93849:function(e,t,n){"use strict";n.d(t,{CM:function(){return S},Kx:function(){return w},P_:function(){return k},WM:function(){return y},mc:function(){return C},uH:function(){return Z},w6:function(){return P}});var r=n(1413),o=n(15861),i=n(64687),a=n.n(i),s=(n(28381),n(41006)),l=n(50057),c=n.n(l),u=n(59603),d=n(73818),p=n(29343),h=c()("fs-extra"),f=c()("path"),g=c()("@electron/remote"),m=g?g.dialog:null,x=function(e,t){var n=performance.now();return new Promise((function(r,o){h.readFile(e,{encoding:"utf8"},(function(i,a){if(i)return o(i);""===a&&o(new Error("Written file is empty, did the write fail?")),a!==t&&o(new Error("Written file is not containing the expected content, did the write fail?"));var s=performance.now()-n;console.info("Verified ".concat(e," content in ").concat(s.toFixed(),"ms.")),r()}))}))},v=function(){var e=(0,o.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==t){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,h.ensureDir(f.dirname(n));case 6:return e.next=8,h.writeFile(n,t);case 8:return e.next=10,x(n,t);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t,null,2),e.next=3,v(r,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(e,t,n){var r=(0,s.XH)(e);if(e.isFolderProject()){var o=(0,u.Vl)(r,{pathSeparator:"/",getArrayItemReferenceName:(0,u.tF)("name"),shouldSplit:(0,u.IR)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(o.map((function(e){return b(e.object,f.join(n,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return b(r,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return b(r,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},C=function(e,t){var n=t.fileIdentifier,o=Date.now();if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');var i=(0,r.Z)((0,r.Z)({},t),{},{name:e.getName(),gameId:e.getProjectUuid(),lastModifiedDate:o}),a=f.dirname(n);return j(e,n,a).then((function(){return{wasSaved:!0,fileMetadata:i}}))},y=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.project,n=t.fileMetadata,r=n?n.fileIdentifier:"",o=g.getCurrentWindow(),i={defaultPath:r,filters:[{name:"SpeXEngine 5 project",extensions:["json"]}]},m){e.next=6;break}throw new Error("Unsupported");case 6:if(s=m.showSaveDialogSync(o,i)){e.next=9;break}return e.abrupt("return",{saveAsLocation:null});case 9:return e.abrupt("return",{saveAsLocation:{fileIdentifier:s}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,o.Z)(a().mark((function e(t,n,r){var o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(o=n.fileIdentifier){e.next=5;break}throw new Error("A file path was not chosen before saving as.");case 5:return r.onStartSaving(),i={fileIdentifier:o,name:t.getName(),gameId:t.getProjectUuid(),lastModifiedDate:Date.now()},e.next=9,r.onMoveResources({newFileMetadata:i});case 9:return s=f.dirname(o),t.setProjectFile(o),e.next=13,j(t,o,s);case 13:return e.abrupt("return",{wasSaved:!0,fileMetadata:i});case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(e,t){var n=t.fileIdentifier+".autosave";return v((0,s.h_)(e),n).catch((function(e){throw console.error("Unable to write ".concat(n,":"),e),e}))},w=function(e){return{id:"An error occurred when saving the project. Please try again by choosing another location."}},T=/\\ | \/ | : | \* | \? | " | < | > | \|/g,E=/\s+/g,S=function(e){var t=e.projectName,n=e.saveAsLocation,r=e.setSaveAsLocation,o=e.newProjectsDefaultFolder,i=n?f.dirname(n.fileIdentifier):o||"",a=t?function(e){return(e.length>200?e.substring(0,200):e).replace(T," ").replace(E," ").trim()}(t)+".json":"game.json";return n||r({fileIdentifier:f.join(i,a)}),(0,p.jsx)(d.Z,{fullWidth:!0,value:i,onChange:function(e){return r({fileIdentifier:f.join(e,a)})},type:"create-game"})},P=function(e){if(!g)return!1;var t=g.app.getPath("exe");if(!t)return!1;var n=f.dirname(t);return e.startsWith(n)}},56924:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(29439),o=n(28381),i=n(71106),a=n(29343),s={internalName:"Empty",name:"No storage",createOperations:function(){return{}}};t.Z=function(e){var t=o.useRef(null),n=o.useRef(null),l=o.useState(null),c=(0,r.Z)(l,2),u=c[0],d=c[1],p=function(e,t,n){var r=t.map((function(e){return{currentStorageProvider:e,initialFileMetadataToOpen:e.getFileMetadataFromAppArguments?e.getFileMetadataFromAppArguments(n):null}})).filter((function(e){return!!e.initialFileMetadataToOpen}));return 0===r.length?{currentStorageProvider:e,initialFileMetadataToOpen:null}:(r.length>1&&console.warn("More than one storage provider can understand the app arguments. Selecting the first one."),r[0])}(e.defaultStorageProvider,e.storageProviders,e.appArguments),h=o.useRef(p.currentStorageProvider),f=o.useContext(i.ZP),g=o.useCallback((function(e){d((function(){return e}))}),[d]),m=o.useCallback((function(){d(null)}),[]),x=o.useCallback((function(e){if(!e)return t.current||(h.current=s,n.current=null,t.current=s.createOperations({setDialog:g,closeDialog:m,authenticatedUser:f})),t.current;if(e===h.current&&t.current)return t.current;var r=e.createOperations({setDialog:g,closeDialog:m,authenticatedUser:f});return!!r.onOpen&&(h.current=e,t.current=r,n.current=e.createResourceOperations?e.createResourceOperations({authenticatedUser:f}):null),r}),[f,g,m]),v=o.useCallback((function(){return h.current||s}),[]),b=o.useCallback((function(){return n.current}),[]);return o.useEffect((function(){var e=h.current;e&&(t.current=e.createOperations({setDialog:g,closeDialog:m,authenticatedUser:f}),n.current=e.createResourceOperations?e.createResourceOperations({authenticatedUser:f}):null)}),[f,g,m]),(0,a.jsxs)(o.Fragment,{children:[e.children({storageProviders:e.storageProviders,getStorageProviderOperations:x,initialFileMetadataToOpen:p.initialFileMetadataToOpen,getStorageProvider:v,getStorageProviderResourceOperations:b}),u&&u()]})}},58271:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var r=n(15861),o=n(64687),i=n.n(o),a=n(38428),s=n.n(a),l=n(14446),c=n.n(l),u=n(57974),d=function(){var e=(0,r.Z)(i().mark((function e(t){var n,o,a,l,d,p,h,f,g,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,o=t.fileMetadata,a=t.onProgress,l=n.getResourcesManager(),d=l.getAllResourceNames().toJSArray(),p=[],h=o.fileIdentifier,f=h.substr(0,h.lastIndexOf("/")+1),(0,u.MX)(f)){e.next=8;break}return e.abrupt("return",{erroredResources:[]});case 8:return g=0,m=d.filter((function(e){var t=l.getResource(e);return!(0,u.PX)(t.getFile())})),e.next=12,s().withConcurrency(20).for(m).process(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.getResource(t),e.prev=1,r=new URL(n.getFile(),f).href,e.next=5,c().get(r,{timeout:3e3});case 5:n.setFile(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.push({resourceName:t,error:e.t0});case 11:a(g++,m.length);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",{erroredResources:p});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},8018:function(e,t,n){"use strict";var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(2066),c=function(e){return e.startsWith("example://")};t.Z={internalName:"UrlStorageProvider",name:{id:"URL"},hiddenInOpenDialog:!0,hiddenInSaveDialog:!0,getFileMetadataFromAppArguments:function(e){if(!e[l.rM])return null;if(!e[l.rM].length)return null;var t,n=e[l.rM][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")||c(n)?{fileIdentifier:n}:null},createOperations:function(e){e.setDialog,e.closeDialog;return{onOpen:function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileIdentifier,c(n)&&(r=n.replace("example://",""),n="https://resources.gdevelop-app.com/examples/".concat(r,"/").concat(r,".json")),e.next=4,s().get(n);case 4:if((o=e.sent).data){e.next=7;break}throw new Error("Can't parse data from the URL (is it valid JSON?)");case 7:return e.abrupt("return",{content:o.data});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}},13923:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(36600),o=(n(28381),n(40243)),i=n(86278),a=n(29343);function s(e){var t=e.label,n=e.description,s=e.elementsWithWords;return(0,a.jsxs)(o.sg,{noMargin:!0,children:[(0,a.jsx)(i.Z,{size:"sub-title",children:t}),n&&(0,a.jsx)(i.Z,{size:"body",children:n}),s&&(0,a.jsx)(i.Z,{size:"body",children:(0,a.jsx)("i",{children:(0,a.jsx)(r.Trans,{id:"in {elementsWithWords}",values:{elementsWithWords:s}})})})]})}},94258:function(e,t,n){"use strict";n.d(t,{j:function(){return p}});var r=n(93433),o=n(37762),i=(n(28381),n(18455)),a=n(13923),s=n(29343),l=function(e,t,n,r,o){var i=t.getDescription(),l=function(t){var r=n(t).get(e).getLabel();return r||e.charAt(0).toUpperCase()+e.slice(1).split(/(?=[A-Z])/).join(" ")},c=function(){return i},u=t.getType().toLowerCase();if("number"===u)return{name:e,valueType:u,getValue:function(t){return parseFloat(n(t).get(e).getValue())||0},setValue:function(t,n){r(t,e,""+n)},getLabel:l,getDescription:c,getEndAdornment:function(t){var r=n(t).get(e).getMeasurementUnit();return{label:p(r),tooltipContent:(0,s.jsx)(a.Z,{label:r.getLabel(),description:r.getDescription(),elementsWithWords:r.getElementsWithWords()})}}};if("string"===u||""===u)return{name:e,valueType:"string",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c};if("boolean"===u)return{name:e,valueType:u,getValue:function(t){return"true"===n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n?"1":"0")},getLabel:l,getDescription:c};if("choice"===u){var d=t.getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return{name:e,valueType:"string",getChoices:function(){return d},getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}}if("behavior"===u){var h=t.getExtraInfo().size()>0?t.getExtraInfo().at(0):"";return{name:e,valueType:"string",getChoices:function(){return o&&""!==h?o.getAllBehaviorNames().toJSArray().map((function(e){return o.getBehavior(e).getTypeName()===h?e:null})).filter(Boolean).map((function(e){return{value:e,label:e}})):[]},getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}}if("resource"===u){var f=t.getExtraInfo().toJSArray(),g=f[0]||"",m=f[1]||"";return{name:e,valueType:"resource",resourceKind:g,fallbackResourceKind:m,getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}}return"color"===u?{name:e,valueType:"color",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}:"textarea"===u?{name:e,valueType:"textarea",getValue:function(t){return n(t).get(e).getValue()},setValue:function(t,n){r(t,e,n)},getLabel:l,getDescription:c}:(console.error("A property with type=".concat(u," could not be mapped to a field. Ensure that this type is correct and understood by the IDE.")),null)},c=[["X","Y","Z"],["Width","Height","Depth"],["Top","Bottom"],["Left","Right"],["Front","Back"],["Up","Down"],["Min","Max"],["Low","High"],["Color","Opacity"],["Horizontal","Vertical"],["Acceleration","Deceleration"],["Duration","Easing"]],u=function(e){return e?e[0].toLowerCase()+e.substr(1):e},d=["\u2070","\xb9","\xb2","\xb3","\u2074","\u2075"],p=function(e){return(0,i.mapFor)(0,e.getElementsCount(),(function(t){var n=e.getElementBaseUnit(t),r=e.getElementPower(t),o=Math.abs(r),i=r<0||o>1&&o<6;return n.getSymbol()+(r<0?"\u207b":"")+(i?d[o]:"")})).join(" \xb7 ")};t.Z=function(e,t,n,a){var s=e.keys(),d=new Map,p=new Set;if((0,i.mapFor)(0,s.size(),(function(r){var i=s.at(r),h=e.get(i);if(h.isHidden())return null;if(p.has(i))return null;var f=h.getGroup()||"",g=d.get(f);g||(g=[],d.set(f,g));var m,x=null,v=(0,o.Z)(c);try{for(v.s();!(m=v.n()).done;){for(var b=m.value,j=[],C=function(t){var n=b[t];if(i.includes(n)){var r,a=b.map((function(e){return i.replace(n,e)})),s=(0,o.Z)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value;e.has(l)&&j.push(l)}}catch(g){s.e(g)}finally{s.f()}}var c=u(n);if(i.startsWith(c)){var d,p=b.map((function(e){return i.replace(c,u(e))})),h=(0,o.Z)(p);try{for(h.s();!(d=h.n()).done;){var f=d.value;e.has(f)&&j.push(f)}}catch(g){h.e(g)}finally{h.f()}}},y=0;y<b.length;y++)C(y);j.length>1&&function(){var r=j.map((function(t){return e.get(t)}));if(r.every((function(e){return e.getGroup()===r[0].getGroup()}))){for(var o=[],i=0;i<r.length&&i<j.length;i++){var s=r[i],c=j[i],u=l(c,s,t,n,a);u&&o.push(u)}o.length===r.length&&(x={name:j.join("-"),type:"row",children:o},j.forEach((function(e){p.add(e)})))}}()}}catch(Z){v.e(Z)}finally{v.f()}x||(x=l(i,h,t,n,a)),x&&g.push(x)})),0===d.size)return[];var h=d.get("");return 1===d.size&&h?h:(0,r.Z)(d.keys()).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{name:e,type:"column",title:e,children:d.get(e)||[]}}))}},72611:function(e,t,n){"use strict";var r=n(36600),o=n(28381),i=n(42986),a=n(73693),s=n(3115),l=n(36607),c=n(81683),u=n(90242),d=n(90286),p=n(32832),h=n(11858),f=n(66733),g=n(51626),m=n(61325),x=n(32484),v=n(19174),b=n(40243),j=n(86278),C=n(38501),y=n(57244),Z=n(3781),k=n(37571),w=n(29343),T={columnContainer:{display:"flex",flexDirection:"column"},fieldContainer:{flex:1,display:"flex",flexDirection:"row",alignItems:"baseline"},field:{flex:1,width:"auto"},subHeader:{paddingLeft:0}},E=function(e){var t=e.instances,n=e.field;return"boolean"===typeof n.disabled?n.disabled:"function"===typeof n.disabled&&n.disabled(t)},S=function(e){var t=e.instances,n=e.field,r=e.defaultValue;if(!t[0])return console.log("getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed"),r;var o=n.getValue;if(!o)return null;for(var i=o(t[0]),a=1;a<t.length;++a)if(i!==o(t[a])){"undefined"!==typeof r&&(i=r);break}return i},P=function(e){var t=e.instances,n=e.field;return t[0]?n.getLabel?n.getLabel(t[0]):n.name:(console.log("PropertiesEditor._getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed"),n.name)};t.Z=function e(t){var n=t.onInstancesModified,I=t.instances,D=t.schema,A=t.mode,L=t.renderExtraDescriptionText,M=t.unsavedChanges,F=t.project,O=t.resourceManagementProps,R=(0,C.Z)(),B=o.useCallback((function(e){M&&M.triggerUnsavedChanges(),n&&n(e),R()}),[M,n,R]),_=o.useCallback((function(e){if(I[0]){var t=[];return e.getDescription&&t.push(e.getDescription(I[0])),L&&e.getExtraDescription&&t.push(L(e.getExtraDescription(I[0]))),t.join("\n")||void 0}console.log("PropertiesEditor._getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed")}),[I,L]),N=o.useCallback((function(e){if("PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS"===e.name)return null;if("boolean"===e.valueType){var t=e.setValue,n=_(e);return(0,w.jsx)(a.Z,{label:n?(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(b.x1,{noMargin:!0,children:P({instances:I,field:e})}),(0,w.jsx)(f.Z,{style:{display:"inline"},children:(0,w.jsx)(p.r,{source:n})})]}):P({instances:I,field:e}),id:e.name,checked:S({instances:I,field:e}),onCheck:function(e,n){I.forEach((function(e){return t(e,!!n)})),B(I)},disabled:E({instances:I,field:e})},e.name)}if("number"===e.valueType){var s=e.setValue,l=e.getEndAdornment,c=l&&l(I[0]);return(0,w.jsx)(i.Z,{value:S({instances:I,field:e}),id:e.name,floatingLabelText:P({instances:I,field:e}),floatingLabelFixed:!0,helperMarkdownText:_(e),onChange:function(e){var t=parseFloat(e);isNaN(t)||(I.forEach((function(e){return s(e,t)})),B(I))},type:"number",style:T.field,disabled:E({instances:I,field:e}),endAdornment:c&&(0,w.jsx)(Z.ZP,{title:c.tooltipContent,children:(0,w.jsx)(g.Z,{position:"end",children:c.label})})},e.name)}if("color"===e.valueType){var u=e.setValue;return(0,w.jsx)(b.sg,{expand:!0,noMargin:!0,children:(0,w.jsx)(d.Z,{id:e.name,floatingLabelText:P({instances:I,field:e}),helperMarkdownText:_(e),disableAlpha:!0,fullWidth:!0,color:S({instances:I,field:e}),onChange:function(e){var t=0===e.length?"":(0,h.JO)(e);I.forEach((function(e){return u(e,t)})),B(I)}})},e.name)}if("textarea"===e.valueType){var v=e.setValue;return(0,w.jsx)(i.Z,{id:e.name,onChange:function(e){I.forEach((function(t){return v(t,e||"")})),B(I)},value:S({instances:I,field:e}),floatingLabelText:P({instances:I,field:e}),floatingLabelFixed:!0,helperMarkdownText:_(e),multiline:!0,style:T.field},e.name)}var j=e.onEditButtonBuildMenuTemplate,C=e.onEditButtonClick,D=e.setValue;return(0,w.jsx)(m.ad,{renderTextField:function(){return(0,w.jsx)(i.Z,{value:S({instances:I,field:e,defaultValue:"(Multiple values)"}),id:e.name,floatingLabelText:P({instances:I,field:e}),floatingLabelFixed:!0,helperMarkdownText:_(e),onChange:function(e){I.forEach((function(t){return D(t,e||"")})),B(I)},style:T.field,disabled:E({instances:I,field:e})})},renderButton:function(e){return C&&!j?(0,w.jsx)(x.Z,{style:e,primary:!0,disabled:1!==I.length,icon:(0,w.jsx)(k.Z,{}),label:(0,w.jsx)(r.Trans,{id:"Edit"}),onClick:C}):j?(0,w.jsx)(y.Z,{style:e,primary:!0,disabled:1!==I.length,icon:(0,w.jsx)(k.Z,{}),label:(0,w.jsx)(r.Trans,{id:"Edit"}),onClick:C,buildMenuTemplate:j}):null}},e.name)}),[I,_,B]),U=o.useCallback((function(e){if(e.getChoices&&e.getValue){var t=e.getChoices().map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,w.jsx)(u.Z,{value:t,label:n,shouldNotTranslate:r},t)}));if("number"===e.valueType){var n=e.setValue;return(0,w.jsx)(c.Z,{value:S({instances:I,field:e}),id:e.name,floatingLabelText:P({instances:I,field:e}),helperMarkdownText:_(e),onChange:function(e,t,r){I.forEach((function(e){return n(e,parseFloat(r)||0)})),B(I)},style:T.field,disabled:e.disabled,children:t},e.name)}if("string"===e.valueType){var r=e.setValue;return(0,w.jsx)(c.Z,{value:S({instances:I,field:e,defaultValue:"(Multiple values)"}),id:e.name,floatingLabelText:P({instances:I,field:e}),helperMarkdownText:_(e),onChange:function(e,t,n){I.forEach((function(e){return r(e,n||"")})),B(I)},style:T.field,disabled:E({instances:I,field:e}),children:t},e.name)}}}),[I,B,_]),H=o.useCallback((function(e){var t=!1;if("onValuesDifferent"===e.disabled){var n="DIFFERENT_VALUES";t=S({instances:I,field:e,defaultValue:n})===n}return(0,w.jsx)(x.Z,{fullWidth:!0,primary:!0,icon:(0,w.jsx)(k.Z,{}),disabled:t,label:e.label,onClick:function(){e.onClick(I[0])}},"button-".concat(e.label))}),[I]),V="row"===A?function(e){return(0,w.jsx)(m.ep,{noMargin:!0,children:e})}:function(e){return(0,w.jsx)(m.ak,{noMargin:!0,children:e})},W=o.useCallback((function(e){var t=null;if(e.getValue){var n=S({instances:I,field:e,defaultValue:e.defaultValue||"Multiple Values"});n&&(t=n)}return t?(0,w.jsxs)(b.x1,{alignItems:"baseline",children:[(0,w.jsx)(j.Z,{displayInlineAsSpan:!0,children:e.name}),(0,w.jsx)(b.LZ,{}),(0,w.jsx)(j.Z,{allowSelection:!0,displayInlineAsSpan:!0,size:"body2",children:"- ".concat(t)})]},"section-title-".concat(e.name)):(0,w.jsx)(b.x1,{children:(0,w.jsx)(j.Z,{displayInlineAsSpan:!0,children:e.name})},"section-title-".concat(e.name))}),[I]);return V(D.map((function(t){if(t.nonFieldType)return"sectionTitle"===t.nonFieldType?W(t):"button"===t.nonFieldType?H(t):null;if(t.children){if("row"===t.type){var r=(0,w.jsx)(v.Z.Consumer,{children:function(r){return(0,w.jsx)(e,{project:F,resourceManagementProps:O,schema:t.children,instances:I,mode:"row",unsavedChanges:r,onInstancesModified:n})}},t.name);return t.title?[(0,w.jsx)(j.Z,{size:"block-title",children:t.title},t.name+"-title"),r]:r}return(0,w.jsxs)("div",{children:[(0,w.jsx)(l.Z,{children:t.name}),(0,w.jsx)(v.Z.Consumer,{children:function(r){return(0,w.jsx)(e,{project:F,resourceManagementProps:O,schema:t.children,instances:I,mode:"column",unsavedChanges:r,onInstancesModified:n})}},t.name)]},t.name)}return"resource"===t.valueType?function(e){if(!F||!O)return console.error("You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceManagementProps)."),null;var t=e.setValue;return(0,w.jsx)(s.Z,{project:F,resourceManagementProps:O,resourceKind:e.resourceKind,fallbackResourceKind:e.fallbackResourceKind,resourceName:S({instances:I,field:e,defaultValue:"(Multiple values)"}),onChange:function(e){I.forEach((function(n){return t(n,e)})),B(I)},floatingLabelText:P({instances:I,field:e}),helperMarkdownText:_(e)},e.name)}(t):t.getChoices&&t.getValue?U(t):t.getValue?N(t):null})))}},58893:function(e,t,n){"use strict";var r=n(28381),o=n(24910),i=n(29343);t.Z=function(){var e={position:"absolute",top:0,left:0,width:"100%",height:"100%",background:'url("res/transparentback.png") repeat',filter:r.useContext(o.Z).imagePreview.backgroundFilter||"none"};return(0,i.jsx)("div",{style:e})}},15684:function(e,t,n){"use strict";n.d(t,{V:function(){return E}});var r=n(15861),o=n(29439),i=n(93433),a=n(64687),s=n.n(a),l=n(36600),c=n(28381),u=n(70983),d=n.n(u),p=n(17037),h=n(71106),f=n(6403),g=n(61325),m=n(34517),x=n(40243),v=n(64480),b=n(20914),j=n(24910),C=n(32484),y=n(29343),Z={audio:["audio/aac","audio/x-wav","audio/mpeg","audio/mp3","audio/ogg"],image:["image/jpeg","image/png","image/webp"],font:["font/ttf","font/otf"],video:["video/mp4","video/webm"],json:["application/json"],tilemap:["application/json"],tileset:["application/json"],bitmapFont:[],model3D:["file"]},k=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=p.Q.find((function(t){return t.kind===e}))||null;return n?t?n.fileExtensions.map((function(e){return"."+e})):n.fileExtensions:[]},w=function(e){return Z[e]||[]},T=function(e){var t=k(e),n=w(e);return[].concat((0,i.Z)(n),(0,i.Z)(t)).join(",")},E=function(e){var t=e.options,n=e.fileMetadata,i=e.getStorageProvider,a=e.onChooseResources,u=e.createNewResource,p=e.automaticallyOpenInput,Z=c.useRef(null),E=c.useRef(!1),S=c.useContext(j.Z),P=c.useContext(h.ZP),I=c.useState(null),D=(0,o.Z)(I,2),A=D[0],L=D[1],M=c.useState(!1),F=(0,o.Z)(M,2),O=F[0],R=F[1],B=c.useState([]),_=(0,o.Z)(B,2),N=_[0],U=_[1],H=c.useState([]),V=(0,o.Z)(H,2),W=V[0],z=V[1],G=N.length>0,Y=c.useMemo(i,[i]),q=n?n.fileIdentifier:null,X=c.useState(0),J=(0,o.Z)(X,2),K=J[0],Q=J[1],$=c.useCallback((0,r.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z.current){e.next=3;break}return e.abrupt("return");case 3:if(q){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,R(!0),L(null),Q(0),e.next=11,(0,m.ll)(P,q,N,(function(e,t){Q(e/t*100)}));case 11:if(t=e.sent,n=t.filter((function(e){return!!e.error})),r=t.filter((function(e){return!!e.url})),!n.length){e.next=18;break}throw n[0];case 18:r.length&&a(r.map((function(e){var t=e.url,n=e.resourceFile,r=u();return r.setFile(t||""),r.setName(n.name),r.setOrigin("cloud-project-resource",t||""),r})));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),L(e.t0);case 24:return e.prev=24,R(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[5,21,24,27]])}))),[N,P,a,u,q]),ee=N.map((function(e){return e.size>m.j4?{filename:e.name,error:"too-large"}:null})).filter(Boolean),te="Cloud"===Y.internalName&&!!n,ne=!!P.authenticated,re=!O&&ne&&te;c.useLayoutEffect((function(){p&&!E.current&&(E.current=!0,Z.current&&Z.current.click())}),[p]);var oe=!O&&re&&G&&0===ee.length;c.useEffect((function(){oe&&!A&&$()}),[oe,$,A]);var ie=c.useMemo((function(){var e=w(t.resourceKind);return 1===e.length&&"file"===e[0]}),[t.resourceKind]),ae=c.useCallback((function(e){return k(t.resourceKind,!1).includes(d().extname(e.name).replace(/^\./,""))}),[t.resourceKind]);return(0,y.jsxs)(g.ak,{noMargin:!0,children:[ne?te?null:(0,y.jsx)(f.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"Your need to first save your game on SpeXEngine Cloud to upload your own resources."})}):(0,y.jsx)(f.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"Your need to first create your account, or login, to upload your own resources."})}),(0,y.jsx)(b.Z,{variant:"outlined",background:"medium",children:(0,y.jsx)(x.x1,{expand:!0,children:(0,y.jsxs)(x.sg,{expand:!0,children:[(0,y.jsx)("input",{accept:T(t.resourceKind),style:{color:S.text.color.primary},multiple:t.multiSelection,type:"file",ref:Z,disabled:!re,onChange:function(e){for(var t=[],n=[],r=0;r<e.currentTarget.files.length;r++){var o=e.currentTarget.files[r];!ie||ae(o)?t.push(o):n.push(o)}z(n),U(t),L(null)}}),W.length>0&&(0,y.jsx)(f.Z,{kind:"warning",children:(0,y.jsx)(l.Trans,{id:"The following file(s) cannot be used for this kind of object: {0}",values:{0:W.map((function(e){return e.name})).join(", ")}})})]})})}),ee.map((function(e){return"too-large"===e.error?(0,y.jsx)(f.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:"The file {0} is too large. Use files that are smaller for your game: each must be less than {1} MB.",values:{0:e.filename,1:m.j4/1e3/1e3}})}):(0,y.jsx)(f.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:"The file {0} is invalid.",values:{0:e.filename}})})})),A&&(0,y.jsx)(f.Z,{kind:"error",children:(0,y.jsx)(l.Trans,{id:"There was an error while uploading some resources. Verify your internet connection or try again later."})}),(0,y.jsx)(g.pJ,{alignItems:"center",justifyContent:"stretch",expand:!0,children:O?(0,y.jsx)(v.Z,{expand:!0,value:K,variant:"determinate"}):null}),A&&(0,y.jsx)(x.x1,{noMargin:!0,expand:!0,justifyContent:"flex-end",children:(0,y.jsx)(C.Z,{primary:!0,label:(0,y.jsx)(l.Trans,{id:"Retry"}),onClick:$})})]})}},32705:function(e,t,n){"use strict";n.d(t,{$N:function(){return p},TD:function(){return h},Z2:function(){return f},Zv:function(){return d}});var r=n(4942),o=n(15861),i=n(64687),a=n.n(i),s=n(17037),l=n(79431),c=n(57974),u=n(81303),d=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,o,i,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.baseNameForNewResources,o=t.resources,i=t.resourceKind,d=n.getResourcesManager(),p=o.map((function(e){var t=e.name,o=e.dataUrl,a=e.localFilePath,p=e.extension,h=e.originalIndex,f=(0,u.Um)(o),g=f?URL.createObjectURL(f):"";if(t&&d.hasResource(t)){console.info("Updating resource "+t+".");var m=d.getResource(t);return m.setFile(g),(0,c.kX)(m,{localFilePath:a,extension:p}),{resource:m,originalIndex:h,blobUrl:g}}var x=(0,l.Z)(r,(function(e){return d.hasResource(e)}));console.info("Creating new resource "+x+"...");var v=(0,s.h)(i);return v?(v.setName(x),v.setFile(g),v.setMetadata(JSON.stringify({localFilePath:a,extension:p})),(0,c.r3)(n,v),d.addResource(v),v.delete(),{resource:d.getResource(x),originalIndex:h,blobUrl:g}):(console.error("Could not create a resource for kind: "+i),null)})).filter(Boolean),e.abrupt("return",p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.modifiedResources,n=e.metadataKey,o=e.metadata;t.forEach((function(e){var t=e.resource,i=e.blobUrl;URL.revokeObjectURL(i),o&&(0,c.kX)(t,(0,r.Z)({},n,o))}))},h=function(e,t){t&&"object"===typeof t&&Array.isArray(t.resourceNames)&&(t.resourceNames=e)},f=function(e,t){if(!t)return null;try{var n=JSON.parse(t);if(n&&"object"===typeof n&&n[e])return n[e]}catch(r){console.warn("Malformed metadata for a resource - ignoring it.",r)}return null}},3290:function(e,t,n){"use strict";n.d(t,{Z:function(){return L},X:function(){return A}});var r=n(1413),o=n(15861),i=n(29439),a=n(64687),s=n.n(a),l=n(36600),c=n(51598),u=n(50301),d=n(28381),p=n(94854),h=n(87199),f=n(78118),g=n(29343),m=d.memo((function(e){return(0,g.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 3.66663C5.30828 3.66663 3.66666 5.30825 3.66666 7.33329C3.66666 9.35834 5.30828 11 7.33332 11C9.35837 11 11 9.35834 11 7.33329C11 5.30825 9.35837 3.66663 7.33332 3.66663ZM2.66666 7.33329C2.66666 4.75596 4.75599 2.66663 7.33332 2.66663C9.91065 2.66663 12 4.75596 12 7.33329C12 9.91062 9.91065 12 7.33332 12C4.75599 12 2.66666 9.91062 2.66666 7.33329Z",fill:"currentColor"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.97977 9.97974C10.175 9.78448 10.4916 9.78448 10.6869 9.97974L13.1869 12.4797C13.3821 12.675 13.3821 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L9.97977 10.6868C9.78451 10.4916 9.78451 10.175 9.97977 9.97974Z",fill:"currentColor"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33332 7.33329C5.33332 7.05715 5.55718 6.83329 5.83332 6.83329H8.83332C9.10947 6.83329 9.33332 7.05715 9.33332 7.33329C9.33332 7.60944 9.10947 7.83329 8.83332 7.83329H5.83332C5.55718 7.83329 5.33332 7.60944 5.33332 7.33329Z",fill:"currentColor"})]}))})),x=n(75268),v=n(41332),b=n(86278),j=n(23818),C=n(24910),y=n(58893),Z=n(39909),k=n(65111),w=n(91153),T=n(76683),E=n(5675),S=n(86268),P=n.g.gd,I=function(e,t){return[(e.x+t.x)/2,(e.y+t.y)/2]},D={previewImagePixelated:{imageRendering:(0,Z.g)()},contentContainer:{position:"relative",height:"100%",overflow:"hidden"},container:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minHeight:0,width:"100%"},imagePreviewContainer:{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",outline:"none",touchAction:"none"},spriteThumbnailImage:{},sliderContainer:{maxWidth:150,width:"100%",display:"flex",padding:"0 10px"}},A=function(e,t){var n=e.getResourcesManager().getResource(t);return"image"===n.getKind()&&P.asImageResource(n).isSmooth()},L=function(e){var t=e.resourceName,n=e.imageResourceSource,a=e.isImageResourceSmooth,f=e.fixedHeight,Z=e.fixedWidth,P=e.renderOverlay,A=e.onSize,L=e.hideCheckeredBackground,M=e.deactivateControls,F=e.displaySpacedView,O=e.isImagePrivate,R=e.onImageLoaded,B=e.hideLoader,_=d.useState(!1),N=(0,i.Z)(_,2),U=N[0],H=N[1],V=d.useState(null),W=(0,i.Z)(V,2),z=W[0],G=W[1],Y=d.useState(null),q=(0,i.Z)(Y,2),X=q[0],J=q[1],K=d.useState(null),Q=(0,i.Z)(K,2),$=Q[0],ee=Q[1],te=d.useState(null),ne=(0,i.Z)(te,2),re=ne[0],oe=ne[1],ie=d.useState({factor:1,xOffset:0,yOffset:0}),ae=(0,i.Z)(ie,2),se=ae[0],le=ae[1],ce=se.xOffset,ue=se.yOffset,de=se.factor,pe=d.useRef(null),he=d.useRef(null),fe=d.useRef(null),ge=d.useRef(!1),me=d.useRef(null),xe=function(){H(!0)},ve=d.useState(!1),be=(0,i.Z)(ve,2),je=be[0],Ce=be[1],ye=d.useRef(new S.Z({isActive:function(){return!M},shortcutCallbacks:{onToggleGrabbingTool:Ce}})),Ze=d.useCallback((function(){if(!z||!X||!re||!$)return 1;var e=Math.min($/z,re/X)*(F?.7:.95);return e>1&&(e=Math.floor(e)),e}),[z,X,re,$,F]),ke=d.useCallback((function(){if(!z||!X||!re||!$)return!1;var e=Ze();return le({factor:e,xOffset:($-z*e)/2,yOffset:(re-X*e)/2}),!0}),[z,X,re,$,Ze]),we=d.useCallback((function(e){var t=Ze();return Math.max(Math.min(e,4*t),.25*t)}),[Ze]),Te=d.useCallback(function(){var e=(0,o.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=we(de*t),se.factor!==r&&le((function(e){return{xOffset:e.xOffset+(n[0]-e.xOffset)*(1-r/e.factor),yOffset:e.yOffset+(n[1]-e.yOffset)*(1-r/e.factor),factor:r}}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[we,de,se.factor]),Ee=d.useCallback(function(){var e=(0,o.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le((function(e){return{xOffset:e.xOffset+(n[0]-e.xOffset)*(1-t/e.factor),yOffset:e.yOffset+(n[1]-e.yOffset)*(1-t/e.factor),factor:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),Se=d.useCallback((function(e){var t=e.deltaY,n=e.deltaX,o=e.clientX,i=e.clientY;if(e.preventDefault(),e.stopPropagation(),(0,k.DM)(e)&&me.current){var a=me.current.getBoundingClientRect();Te((0,E.$u)(-t),[o-a.left,i-a.top])}else le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset-n/4,yOffset:e.yOffset-t/4})}))}),[Te]),Pe=d.useCallback(function(){var e=(0,o.Z)(s().mark((function e(t){var n,o,a,l,c,u,d,p,h,f,g,m,x,v,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.touches.length||!me.current){e.next=11;break}return n=me.current.getBoundingClientRect(),t.preventDefault(),t.stopPropagation(),o=t.touches[0],a=o.clientX,l=o.clientY,c=t.touches[1],u=c.clientX,d=c.clientY,s={x:a,y:l},j={x:u,y:d},p=Math.sqrt(Math.pow(j.x-s.x,2)+Math.pow(j.y-s.y,2)),h=I({x:a-n.left,y:l-n.top},{x:u-n.left,y:d-n.top}),pe.current&&(le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(h[0]-pe.current.center[0]),yOffset:e.yOffset+(h[1]-pe.current.center[1])})})),Te(p/pe.current.distance,h)),pe.current={distance:p,center:h},e.abrupt("return");case 11:if(!(t.target&&(t.target instanceof HTMLElement||t.target instanceof SVGElement)&&t.target.dataset&&"draggable"in t.target.dataset)){e.next=13;break}return e.abrupt("return");case 13:f=t.touches[0],g=f.clientX,m=f.clientY,t.preventDefault(),t.stopPropagation(),he.current&&(x=(0,i.Z)(he.current,2),v=x[0],b=x[1],le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(g-v),yOffset:e.yOffset+(m-b)})}))),he.current=[g,m];case 18:case"end":return e.stop()}var s,j}),e)})));return function(t){return e.apply(this,arguments)}}(),[Te]);d.useEffect((function(){if(!M)return me.current?(me.current.addEventListener("wheel",Se,{passive:!1}),function(){me.current&&me.current.removeEventListener("wheel",Se,{passive:!1})}):void 0}),[Se,M]),d.useEffect((function(){ge.current=!1}),[n]);var Ie=d.useMemo((function(){return[($||0)/2,(re||0)/2]}),[$,re]);d.useEffect((function(){ge.current||(ge.current=ke())}),[ke]);var De=d.useCallback((function(e){var t=e.target,n=t?t.naturalWidth||t.clientWidth:0,r=t?t.naturalHeight||t.clientHeight:0;J(r),G(n),A&&A(n,r),R&&R()}),[R,A]),Ae=d.useCallback((function(e){1===e.touches.length&&(he.current=[e.touches[0].clientX,e.touches[0].clientY]),pe.current=null}),[]),Le=d.useCallback((function(e){1===e.touches.length?he.current=[e.touches[0].clientX,e.touches[0].clientY]:2===e.touches.length&&(he.current=null)}),[]),Me=d.useCallback((function(e){me.current&&me.current.focus(),je&&(fe.current=[e.clientX,e.clientY])}),[je]),Fe=d.useCallback((function(e){if(je&&fe.current){var t=(0,i.Z)(fe.current,2),n=t[0],o=t[1],a=[e.clientX,e.clientY];fe.current=a,le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(a[0]-n),yOffset:e.yOffset+(a[1]-o)})}))}}),[je]),Oe=d.useCallback((function(e){fe.current=null}),[]),Re=d.useCallback((function(e){fe.current=null,Ce(!1)}),[]),Be=d.useContext(C.Z).imagePreview.frameBorderColor||"#aaa",_e=!!$&&!!re,Ne=!!z&&!!X&&!U,Ue=_e?void 0:"hidden",He=je?"grab":null,Ve=He?{cursor:He}:{},We={transform:"translate(".concat(ce,"px, ").concat(ue,"px)"),outline:P?"1px solid ".concat(Be):void 0,width:null!=z?z*de:null,height:null!=X?X*de:null,transformOrigin:"0 0"},ze={transform:"scale(".concat(de,")"),width:z,height:X,transformOrigin:"0 0",display:"flex"},Ge=(0,r.Z)((0,r.Z)((0,r.Z)({},D.spriteThumbnailImage),{},{visibility:Ue},a?void 0:D.previewImagePixelated),{},{cursor:He}),Ye={position:"absolute",top:0,left:0,width:"100%",height:"100%",visibility:Ue};return(0,g.jsx)(u.Z,{bounds:!0,onResize:function(e){ee(e.bounds.width),oe(e.bounds.height)},children:function(e){var o=e.measureRef;return(0,g.jsxs)("div",{style:D.container,children:[!M&&(0,g.jsxs)(p.Z,{noPadding:!0,children:[(0,g.jsx)(c.Z,{onClick:function(){return Te(E.e_,Ie)},tooltip:{id:"Zoom out (you can also use Ctrl + Mouse wheel)"},children:(0,g.jsx)(m,{})}),(0,g.jsx)("div",{style:D.sliderContainer,children:(0,g.jsx)(w.Z,{min:Math.log2(.25*Ze()),max:Math.log2(4*Ze()),step:1/16,value:Math.log2(de),onChange:function(e){Ee(Math.pow(2,e),Ie)}})}),(0,g.jsx)(c.Z,{onClick:function(){return Te(E.Qi,Ie)},tooltip:{id:"Zoom in (you can also use Ctrl + Mouse wheel)"},children:(0,g.jsx)(h.Z,{})}),(0,g.jsx)(c.Z,{onClick:function(){ke()},tooltip:{id:"Fit content to window"},children:(0,g.jsx)(x.Z,{})})]}),(0,g.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},D.contentContainer),{},{height:f||"100%",width:Z}),children:[!L&&(0,g.jsx)(y.Z,{}),(0,g.jsxs)("div",{dir:"ltr",style:(0,r.Z)((0,r.Z)({},D.imagePreviewContainer),{},{overflow:_e?"unset":"hidden"},Ve),ref:function(e){o(e),me.current=e},onTouchStart:M?null:Le,onTouchMove:M?null:Pe,onTouchEnd:M?null:Ae,tabIndex:0,onPointerDown:M?null:Me,onPointerMove:M?null:Fe,onPointerUp:M?null:Oe,onPointerLeave:M?null:Re,onKeyDown:M?null:ye.current.onKeyDown,onKeyUp:M?null:ye.current.onKeyUp,children:[!!U&&(0,g.jsx)(v.Z,{children:(0,g.jsx)(b.Z,{children:(0,g.jsx)(l.Trans,{id:"Unable to load the image"})})}),!U&&(0,g.jsx)("div",{style:We,children:(0,g.jsx)("div",{style:ze,children:O?(0,g.jsx)(T.Z,{style:Ge,alt:t,url:n,onError:xe,onLoad:De,hideLoader:B}):(0,g.jsx)(j.W,{style:Ge,alt:t,src:n,onError:xe,onLoad:De})})}),Ne&&P&&(0,g.jsx)("div",{style:Ye,children:P({imageWidth:z||0,imageHeight:X||0,imageOffsetTop:ue,imageOffsetLeft:ce,imageZoomFactor:de,forcedCursor:He,deactivateControls:je})})]})]})]})}})}},74661:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(15861),o=n(93433),i=n(29439),a=n(64687),s=n.n(a),l=n(28381),c=n(36600),u=n(72402),d=(n(72410),n(57974)),p=n(9383),h=n(61325),f=n(51598),g=n(32484),m=n(67835),x=n(40243),v=n(30141),b=n(85076),j=n(1491),C=n(37571),y=n(23198),Z=n(23865),k=n.n(Z),w={},T=function(e){return w[e.ptr.toString()]},E=function(e){var t=e.project,n=e.callback,r=l.useCallback((function(e){var n=function(e){var t=e.ptr.toString();return w.hasOwnProperty(t)||(w[t]={}),w[t]}(t),r=k()();return n[r]=e,r}),[t]),o=l.useCallback((function(e){var n=T(t);n&&delete n[e]}),[t]),i=l.useCallback((function(){var e=T(t);e&&Object.keys(e).forEach((function(t){try{e[t]()}catch(n){}}))}),[t]);return l.useEffect((function(){var e=r(n);return function(){o(e)}}),[n,r,o]),{triggerResourcesHaveChanged:i}},S=n(38501),P=n(29343),I={textFieldStyle:{display:"flex",flex:1}},D=l.forwardRef((function(e,t){var n=e.project,a=e.initialResourceName,Z=e.resourceManagementProps,k=e.resourcesLoader,w=e.resourceKind,T=e.fallbackResourceKind,D=e.onChange,A=(0,S.Z)(),L=l.useRef(null),M=l.useRef([]),F=l.useState(!1),O=(0,i.Z)(F,2),R=O[0],B=O[1],_=l.useState(e.initialResourceName),N=(0,i.Z)(_,2),U=N[0],H=N[1],V=l.useState(!1),W=(0,i.Z)(V,2),z=W[0],G=W[1],Y=l.useCallback((function(e){L.current&&L.current.focus(e)}),[]);l.useImperativeHandle(t,(function(){return{focus:Y}})),l.useEffect((function(){H(a)}),[a]);var q=l.useCallback((function(){H(""),B(!1),D&&D("")}),[D]),X=l.useCallback((function(e){if(""!==e){var t=-1===M.current.indexOf(e);t||D&&D(e),H(e),B(t)}else q()}),[D,q]),J=l.useCallback((function(e){var t=e.getAllResourceNames().toJSArray();if(w){var n=t.filter((function(t){return e.getResource(t).getKind()===w}));T&&n.push.apply(n,(0,o.Z)(t.filter((function(t){return e.getResource(t).getKind()===T})))),M.current=n}}),[w,T]),K=l.useCallback((function(){n&&(J(n.getResourcesManager()),A())}),[n,A,J]);l.useEffect(K,[K]);var Q=E({project:n,callback:K}).triggerResourcesHaveChanged,$=l.useCallback(function(){var e=(0,r.Z)(s().mark((function e(t){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Z.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:w});case 5:if((r=e.sent).length){e.next=8;break}return e.abrupt("return");case 8:return o=r[0],(0,d.r3)(n,o),n.getResourcesManager().addResource(o),i=o.getName(),L.current&&L.current.forceInputValueTo(i),r.forEach((function(e){return e.delete()})),e.next=16,Z.onFetchNewlyAddedResources();case 16:Q(),X(i),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Unable to choose a resource",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),[n,Z,w,X,Q]),ee=l.useCallback((function(){var e=Z.resourceSources||[],t=Z.getStorageProvider();return[].concat((0,o.Z)(e.filter((function(e){return e.kind===w})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(e){return{text:"",value:"",translatableValue:e.displayName,renderIcon:function(){return(0,P.jsx)(j.Z,{})},onClick:function(){return $(e)}}}))),[{type:"separator"}])}),[$,Z,w]),te=l.useCallback(function(){var e=(0,r.Z)(s().mark((function e(t,r){var o,i,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.getResourcesManager(),i=o.getResource(U),e.prev=2,G(!0),e.next=6,r.edit({project:n,i18n:t,getStorageProvider:Z.getStorageProvider,resourceManagementProps:Z,resourceNames:[U],extraOptions:{existingMetadata:i.getMetadata(),singleFrame:!0,fps:0,name:U,isLooping:!1}});case 6:if(a=e.sent,G(!1),a){e.next=10;break}return e.abrupt("return");case 10:if((l=a.resources).length){e.next=13;break}return e.abrupt("return");case 13:k.burstUrlsCacheForResources(n,[l[0].name]),D(l[0].name),Q(),A(),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(2),G(!1),console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,v.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"});case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}(),[A,D,n,Z,U,k,Q]),ne=R?(0,P.jsx)(c.Trans,{id:"This resource does not exist in the game"}):null,re=Z.resourceExternalEditors.filter((function(e){return e.kind===w})),oe=ee(),ie=M.current.map((function(e){return{text:e,value:e}})),ae=[].concat((0,o.Z)(oe),(0,o.Z)(ie));return(0,P.jsx)(c.I18n,{children:function(t){var n=t.i18n;return(0,P.jsxs)(h.ep,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,P.jsx)(x.sg,{expand:!0,noMargin:!0,children:(0,P.jsxs)(h.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,P.jsx)(u.ZP,{style:e.style,textFieldStyle:I.textFieldStyle,floatingLabelText:e.floatingLabelText,helperMarkdownText:e.helperMarkdownText,hintText:e.hintText,openOnFocus:!0,dataSource:ae,value:U,onChange:X,errorText:ne,fullWidth:e.fullWidth,margin:e.margin,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:L,id:e.id}),e.canBeReset&&(0,P.jsx)(f.Z,{size:"small",onClick:q,children:(0,P.jsx)(y.Z,{})})]})}),(0,P.jsx)(g.Z,{label:U?(0,P.jsx)(c.Trans,{id:"Replace"}):(0,P.jsx)(c.Trans,{id:"Choose a file"}),onClick:function(){L.current&&L.current.focus()},primary:!0}),1===re.length&&(0,P.jsx)(m.Z,{leftIcon:(0,P.jsx)(C.Z,{fontSize:"small"}),label:n._(U?re[0].editDisplayName:re[0].createDisplayName),onClick:function(){return te(n,re[0])}}),re.length>1?(0,P.jsx)(p.Z,{icon:(0,P.jsx)(C.Z,{fontSize:"small"}),label:n._(U?re[0].editDisplayName:re[0].createDisplayName),onClick:function(){return te(n,re[0])},buildMenuTemplate:function(e){return re.map((function(t){return{label:e._(U?t.editDisplayName:t.createDisplayName),click:function(){return te(e,t)}}}))}}):null,z&&(0,P.jsx)(b.G,{})]})}})})),A=D},3115:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});n(28381);var r=n(72410),o=n(74661),i=n(70729),a=n(29343),s=["image"],l=function(e){var t=e.project,n=e.resourceName,r=e.resourcesLoader,o=e.resourceKind,s=e.style,l=e.selectable,c=e.selected,u=e.onSelect,d=e.onContextMenu;return"image"===o?(0,a.jsx)(i.Z,{project:t,resourceName:n,resourcesLoader:r,style:s,selectable:l,selected:c,onSelect:u,onContextMenu:d}):null},c=n(61325),u=n(46448),d=n(40243),p=function(e){var t=e.project,n=e.resourceManagementProps,i=e.resourceKind,p=e.resourceName,h=e.onChange,f=e.floatingLabelText,g=e.hintText,m=e.helperMarkdownText,x=e.fallbackResourceKind,v=e.id,b="small"===(0,u.L)()?"center":"flex-end",j=s.includes(i),C=(0,a.jsx)(o.Z,{project:t,resourceManagementProps:n,resourcesLoader:r.Z,resourceKind:i,fullWidth:!0,initialResourceName:p,onChange:h,floatingLabelText:f,hintText:g,helperMarkdownText:m,fallbackResourceKind:x,id:v});return j?(0,a.jsxs)(c.pJ,{noMargin:!0,expand:!0,alignItems:b,children:[(0,a.jsx)(l,{resourceName:p,resourcesLoader:r.Z,project:t,resourceKind:i}),C]}):(0,a.jsx)(d.x1,{noMargin:!0,expand:!0,children:C})}},17037:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},h:function(){return d}});n(28381);for(var r=n.g.gd,o=[{kind:"audio",displayName:{id:"Audio"},fileExtensions:["aac","wav","mp3","ogg"],createNewResource:function(){return new r.AudioResource}},{kind:"image",displayName:{id:"Image"},fileExtensions:["png","jpg","jpeg","webp"],createNewResource:function(){return new r.ImageResource}},{kind:"font",displayName:{id:"Font"},fileExtensions:["ttf","otf"],createNewResource:function(){return new r.FontResource}},{kind:"video",displayName:{id:"Video"},fileExtensions:["mp4","webm"],createNewResource:function(){return new r.VideoResource}},{kind:"json",displayName:{id:"Json"},fileExtensions:["json"],createNewResource:function(){return new r.JsonResource}},{kind:"tilemap",displayName:{id:"Tile Map"},fileExtensions:["json","ldtk","tmj"],createNewResource:function(){return new r.TilemapResource}},{kind:"tileset",displayName:{id:"Tile Set"},fileExtensions:["json","tsj"],createNewResource:function(){return new r.TilesetResource}},{kind:"bitmapFont",displayName:{id:"Bitmap Font"},fileExtensions:["fnt","xml"],createNewResource:function(){return new r.BitmapFontResource}},{kind:"model3D",displayName:{id:"3D model"},fileExtensions:["glb"],createNewResource:function(){return new r.Model3DResource}}],i={},a=0,s=o;a<s.length;a++){var l=s[a],c=l.kind,u=l.createNewResource;i[c]=u}function d(e){return i[e]?i[e]():null}},70729:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=(n(72410),n(21601)),a=n(23818),s=n(24910),l=n(39631),c=n(58893),u=n(29343),d=100,p={position:"relative",display:"inline-block",width:d,height:d,justifyContent:"center",alignItems:"center",lineHeight:d+"px",textAlign:"center"},h={spriteThumbnail:(0,r.Z)({},p),spriteThumbnailImage:{position:"relative",maxWidth:d,maxHeight:d,verticalAlign:"middle",pointerEvents:"none"},checkboxContainer:{textAlign:"initial",position:"absolute",width:34,height:64,bottom:0,right:0}};t.Z=function(e){var t=e.onContextMenu,n=e.resourcesLoader,d=e.resourceName,p=e.project,f=o.useContext(s.Z),g=(0,l.i)(o.useCallback((function(e){t&&t(e.clientX,e.clientY)}),[t])),m=f.imagePreview.borderColor,x=e.selected?f.palette.secondary:m,v=(0,r.Z)((0,r.Z)({},h.spriteThumbnail),{},{border:"2px solid ".concat(x),borderRadius:4},e.style);return(0,u.jsxs)("div",(0,r.Z)((0,r.Z)({title:d,style:v,onContextMenu:function(e){e.stopPropagation(),t&&t(e.clientX,e.clientY)}},g),{},{children:[(0,u.jsx)(c.Z,{}),(0,u.jsx)(a.W,{style:h.spriteThumbnailImage,alt:d,src:n.getResourceFullUrl(p,d,{})}),e.selectable&&(0,u.jsx)("div",{style:h.checkboxContainer,children:(0,u.jsx)(i.Z,{checked:!!e.selected,onCheck:function(t,n){return e.onSelect&&e.onSelect(n)}})})]}))}},57974:function(e,t,n){"use strict";n.d(t,{Gu:function(){return y},MX:function(){return j},OI:function(){return v},PX:function(){return C},Te:function(){return h},U3:function(){return p},ZC:function(){return f},iz:function(){return g},jJ:function(){return x},kX:function(){return b},r3:function(){return m}});var r=n(1413),o=n(72410),i=n(50057),a=n.n(i),s=n(79431),l=n(84360),c=a()("fs"),u=a()("path"),d=n.g.gd,p=function(e,t){var n=o.Z.getResourceFullUrl(e,t,{}).substring(7);return-1!==n.indexOf("?cache=")&&(n=n.substring(0,n.lastIndexOf("?cache="))),n},h=function(e,t){var n=u.dirname(e.getProjectFile());return t.includes(n)},f=function(e,t,n){if(!c||!u)return Promise.resolve(t);var r=u.dirname(e.getProjectFile());return Promise.all(t.map((function(t){if(h(e,t))return n.set(t,t),t;var o=u.basename(t),i=u.extname(o),a=u.basename(o,i),l=(0,s.Z)(a,(function(e){var t=u.join(r,e)+i;return c.existsSync(t)})),d=u.join(r,l+i);return new Promise((function(e){c.copyFile(t,d,(function(r){return r?(n.set(t,t),e(t)):(n.set(d,t),e(d))}))}))})))},g=function(e,t){if(!e.getResourcesManager().hasResource(t))return"";if(!c)return"";var n=e.getResourcesManager().getResource(t).getFile();if(C(n))return"";var r=u.resolve(u.dirname(e.getProjectFile()),n);return c.existsSync(r)?h(e,r)?"":"warning":"error"},m=function(e,t){t instanceof d.ImageResource&&t.setSmooth("nearest"!==e.getScaleMode())},x=function(e,t){var n=(0,l.R)(t),r=new d.ResourcesRenamer(n);n.delete(),d.ResourceExposer.exposeWholeProjectResources(e,r),r.delete()},v=function(e){var t=e.getMetadata();if(t)try{var n=JSON.parse(t);if(n&&"object"===typeof n)return{localFilePath:n.localFilePath&&"string"===typeof n.localFilePath?n.localFilePath:null,extension:n.extension&&"string"===typeof n.extension?n.extension:null}}catch(r){console.warn("Malformed metadata for resource with name "+e.getName()+" - ignoring it.")}return{localFilePath:null,extension:null}},b=function(e,t){var n=e.getMetadata();try{var o=n?JSON.parse(n):{};return void e.setMetadata(JSON.stringify((0,r.Z)((0,r.Z)({},o),t)))}catch(i){}e.setMetadata(JSON.stringify(t))},j=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")},C=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},y=function(e){return e.startsWith("blob:")}},72410:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15671),o=n(43144),i=n(85919),a=n(50057),s=n.n(a),l=s()("electron"),c=s()("path"),u=function(){function e(){(0,r.Z)(this,e),this.projectCache={}}return(0,o.Z)(e,[{key:"_getProjectCache",value:function(e){var t=this.projectCache[e.ptr];return t||(this.projectCache[e.ptr]={})}},{key:"getCachedUrl",value:function(e,t){return this._getProjectCache(e)[t]}},{key:"cacheUrl",value:function(e,t){return this._getProjectCache(e)[t]=t}},{key:"burstUrl",value:function(e,t){delete this._getProjectCache(e)[t]}},{key:"cacheLocalFileUrl",value:function(e,t,n,r){var o=this._getProjectCache(e);return o[t]=r?n:"".concat(n,"?cache=").concat(Date.now())}}]),e}(),d=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,null,[{key:"burstUrlsCacheForResources",value:function(t,n){var r=t.getResourcesManager();n.forEach((function(n){r.hasResource(n)&&e._cache.burstUrl(t,r.getResource(n).getFile())}))}},{key:"burstAllUrlsCache",value:function(){e._cache=new u}},{key:"getFullUrl",value:function(t,n,r){var o=r.isResourceForPixi,a=r.disableCacheBurst;if(l&&function(e){return!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:"))}(n)){var s=e._cache.getCachedUrl(t,n);if(s)return s;var u=t.getProjectFile(),d=c.dirname(u),p=c.resolve(d,n).replace(/\\/g,"/");return console.info("Caching resolved local filename:",p),this._cache.cacheLocalFileUrl(t,n,"file://"+p,!!a)}var h=(0,i.WN)(n);o&&(h=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n}(h,"gdUsage","pixi"));var f=e._cache.getCachedUrl(t,h);return f||(console.info("Caching resolved url:",h),this._cache.cacheUrl(t,h))}},{key:"getResourceFullUrl",value:function(t,n,r){if(t.getResourcesManager().hasResource(n)){var o=t.getResourcesManager().getResource(n).getFile();return e.getFullUrl(t,o,r)}return n}}]),e}();d._cache=new u},72291:function(e,t,n){"use strict";n.d(t,{b:function(){return d},n:function(){return u}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(28381),l=n(94446),c=n(29343),u=s.createContext({tutorials:null,fetchTutorials:function(){},error:null}),d=function(e){var t=e.children,n=s.useState(null),i=(0,o.Z)(n,2),d=i[0],p=i[1],h=s.useState(null),f=(0,o.Z)(h,2),g=f[0],m=f[1],x=s.useRef(!1),v=s.useCallback((function(){d||x.current||(0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),x.current=!0,e.prev=2,e.next=5,(0,l.Qp)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," tutorials.")),p(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the tutorials:",e.t0),m(e.t0);case 14:x.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[d,x]),b=s.useMemo((function(){return{tutorials:d,fetchTutorials:v,error:g}}),[d,v,g]);return(0,c.jsx)(u.Provider,{value:b,children:t})}},67412:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var r=n(48409),o=function(e){return(0,r.tq)()?"":(0,r.z1)()?e.replace(/CmdOrCtrl\+/,"\u2318").replace(/CommandOrControl\+/,"\u2318").replace(/Super\+/,"\u2318").replace(/Shift\+/,"\u21e7").replace(/Alt\+/,"\u2325").replace(/Option\+/,"\u2325").replace(/Delete/,"\u2326").replace(/Backspace/,"\u232b").replace(/numadd/,"+").replace(/numsub/,"-").replace(/num1/,"1").replace(/num2/,"2").replace(/num3/,"3"):e.replace(/CmdOrCtrl\+/,"Ctrl+").replace(/CommandOrControl\+/,"Ctrl+").replace(/Super\+/,"Win+").replace(/Option\+/,"Alt+").replace(/Delete/,"DEL").replace(/numadd/,"+").replace(/numsub/,"-").replace(/num1/,"1").replace(/num2/,"2").replace(/num3/,"3")}},3108:function(e,t,n){"use strict";n.d(t,{UQ:function(){return v},X1:function(){return x},_m:function(){return m}});var r=n(45987),o=n(1413),i=n(28381),a=n(53220),s=n(35008),l=n(6180),c=n(51598),u=n(24910),d=n(40243),p=n(25638),h=n(29343),f=["costlyBody"],g={bodyRoot:{padding:0},accordionSummaryWithExpandOnLeft:{flexDirection:"row-reverse",paddingLeft:0,paddingRight:0},accordionSummaryContent:{flexGrow:1,display:"flex",alignItems:"center",marginLeft:16},actionsContainer:{flexGrow:0,flexShrink:0,alignSelf:"center"}},m=function(e){return(0,h.jsx)(d.sg,{expand:!0,children:(0,h.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,h.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,h.jsx)(s.Z,{style:g.accordionSummaryWithExpandOnLeft,expandIcon:e.expandIcon||(0,h.jsx)(c.Z,{size:"small",children:(0,h.jsx)(p.Z,{})}),children:(0,h.jsx)("div",{style:g.accordionSummaryContent,children:e.children})})}),e.actions&&(0,h.jsx)("div",{style:g.actionsContainer,children:e.actions})]})})},x=function(e){return(0,h.jsx)(l.Z,{style:(0,o.Z)((0,o.Z)({},e.disableGutters&&g.bodyRoot),e.style),children:e.children})},v=i.forwardRef((function(e,t){var n=e.costlyBody,s=(0,r.Z)(e,f),l=i.useContext(u.Z);return(0,h.jsx)(a.Z,(0,o.Z)((0,o.Z)({},s),{},{ref:t,square:!0,elevation:0,style:{border:"1px solid ".concat(l.toolbar.separatorColor),backgroundColor:l.paper.backgroundColor.medium,marginLeft:0},TransitionProps:{unmountOnExit:!!n}}))}))},91739:function(e,t,n){"use strict";var r={showAlertDialog:function(e){},showConfirmDialog:function(e){},showConfirmDeleteDialog:function(e){}},o=n(28381).createContext(r);t.Z=o},65056:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(91739);t.Z=function(){var e=o.useContext(i.Z),t=e.showAlertDialog,n=e.showConfirmDialog,a=e.showConfirmDeleteDialog;return{showAlert:o.useCallback((function(e){return new Promise((function(n){t((0,r.Z)({callback:n},e))}))}),[t]),showConfirmation:o.useCallback((function(e){return new Promise((function(t){n((0,r.Z)({callback:t},e))}))}),[n]),showDeleteConfirmation:o.useCallback((function(e){return new Promise((function(t){a((0,r.Z)({callback:t},e))}))}),[a])}}},6403:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(1413),o=n(28381),i=n(40243),a=n(98411),s=n(89141),l=n(86278),c=n(24910),u=n(61325),d=n(51598),p=n(20914),h=n(23198),f=n(78118),g=n(29343),m=o.memo((function(e){return(0,g.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,g.jsx)("path",{d:"M2.96262 18.0041L10.2087 3.52252C11.2247 1.49207 14.1171 1.49261 15.1323 3.52342L22.3719 18.0051C23.2889 19.8397 21.9577 22 19.9099 22H5.42417C3.37586 22 2.04457 19.8389 2.96262 18.0041Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M12.667 8C13.2193 8 13.667 8.44772 13.667 9V12C13.667 12.5523 13.2193 13 12.667 13C12.1147 13 11.667 12.5523 11.667 12V9C11.667 8.44772 12.1147 8 12.667 8Z",fill:"#32323B"}),(0,g.jsx)("path",{d:"M12.667 17C13.2193 17 13.667 16.5523 13.667 16C13.667 15.4477 13.2193 15 12.667 15C12.1147 15 11.667 15.4477 11.667 16C11.667 16.5523 12.1147 17 12.667 17Z",fill:"#32323B"})]}))})),x=n(77791),v=n(47956),b={icon:{width:28,height:28,marginRight:10,marginLeft:10},topRightHideButton:{position:"absolute",right:0,top:0},paper:{position:"relative",overflow:"hidden"},content:{flex:1}},j=function(e){var t=e.kind,n=e.children,f=e.onHide,j=e.hideButtonSize,C=e.renderRightButton,y=e.renderLeftIcon,Z=e.markdownImageOnly,k=o.useContext(c.Z),w=(0,a.Z)(),T=(0,r.Z)({},b.paper),E={display:"flex",alignItems:"center",borderLeft:"1px solid ".concat(w.palette.divider)};return"error"!==t&&"warning"!==t||(T.borderColor=k.message[t],"light"===w.palette.type&&(T.backgroundColor=(0,s.$n)(k.message[t],.9))),(0,g.jsxs)(p.Z,{variant:"outlined",style:T,background:"dark",children:[Z?n:(0,g.jsxs)(i.x1,{noMargin:!0,children:[(0,g.jsx)(i.sg,{expand:!0,children:(0,g.jsx)(i.x1,{expand:!0,children:(0,g.jsxs)(u.ep,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,g.jsxs)(i.x1,{noMargin:!0,alignItems:"center",children:[y?(0,g.jsxs)(o.Fragment,{children:[y(),(0,g.jsx)(i.LZ,{})]}):(0,g.jsxs)(o.Fragment,{children:["info"===t&&(0,g.jsx)(v.Z,{style:b.icon}),"warning"===t&&(0,g.jsx)(m,{style:(0,r.Z)((0,r.Z)({},b.icon),{},{color:k.message.warning})}),"error"===t&&(0,g.jsx)(x.Z,{style:(0,r.Z)((0,r.Z)({},b.icon),{},{color:k.message.error})})]}),(0,g.jsx)(l.Z,{style:b.content,children:n})]}),C&&C()]})})}),f&&!("small"===j)&&(0,g.jsx)("div",{style:E,children:(0,g.jsx)(d.Z,{onClick:f,color:"default",children:(0,g.jsx)(h.Z,{fontSize:"small"})})})]}),f&&"small"===j&&(0,g.jsx)("div",{style:b.topRightHideButton,children:(0,g.jsx)(d.Z,{"aria-label":"hide",onClick:function(){return f()},size:"small",children:(0,g.jsx)(h.Z,{fontSize:"small"})})})]})}},1589:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(38295),a=n(24910),s=n(29343);t.Z=function(e){var t=o.useContext(a.Z);return(0,s.jsx)(i.Z,{variant:"body2",align:"center",component:"div",style:(0,r.Z)({opacity:.6,textShadow:"1px 1px 0px ".concat(t.emptyMessage.shadowColor),userSelect:e.allowSelection?"text":void 0,cursor:e.allowSelection?"text":void 0},e.style),title:e.tooltipText,children:e.children})}},87284:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(57216),a=n(58396),s=n(24910),l=n(40243),c=n(46448),u=n(29343),d={minWidth:0,flex:1},p={paddingBottom:32,paddingTop:0,minWidth:0};t.Z=function(e){var t=e.children,n=e.header,h=e.background,f=e.cardCornerAction,g=e.isHighlighted,m=e.disabled,x="small"===(0,c.L)(),v=o.useContext(s.Z);return(0,u.jsx)(i.Z,{style:(0,r.Z)({opacity:m?.5:1,backgroundColor:"dark"===h?v.paper.backgroundColor.dark:v.paper.backgroundColor.medium},g?{borderLeftWidth:4,borderLeftColor:v.palette.secondary}:{}),variant:"outlined",children:(0,u.jsxs)(l.sg,{expand:!0,noMargin:!0,children:[(0,u.jsxs)(l.x1,{justifyContent:"space-between",expand:!0,children:[(0,u.jsx)("div",{style:(0,r.Z)((0,r.Z)({},d),{},{paddingLeft:x?8:32,paddingRight:f?x?8:32:0}),children:n}),(0,u.jsx)(l.sg,{children:f})]}),(0,u.jsx)(a.Z,{style:(0,r.Z)((0,r.Z)({},p),{},{paddingRight:x?8:32,paddingLeft:x?8:32}),children:t})]})})}},21601:function(e,t,n){"use strict";var r=n(1413),o=(n(28381),n(69186)),i=n(19345),a=n(62802),s=n(7172),l=n(66733),c=n(29343),u=(0,o.Z)({root:{marginLeft:9,marginRight:9,marginTop:0,marginBottom:0,padding:0}}),d=(0,o.Z)({root:{display:"block"}});t.Z=function(e){var t=e.onCheck,n=u(),o=d(),p=(0,c.jsx)(s.Z,{className:n.root,disabled:e.disabled,checked:e.checked,onChange:t?function(e){return t(e,e.target.checked)}:void 0,icon:e.uncheckedIcon,checkedIcon:e.checkedIcon,style:e.label?void 0:e.style,id:e.id});return e.label?(0,c.jsxs)(a.Z,{classes:o,children:[(0,c.jsx)(i.Z,{control:p,label:e.label,style:(0,r.Z)((0,r.Z)({},e.style),{},{cursor:"default"})}),e.tooltipOrHelperText&&(0,c.jsx)(l.Z,{children:e.tooltipOrHelperText})]}):p}},8511:function(e,t,n){"use strict";var r=n(28381),o=n(33028),i=n(69186),a=n(29343),s=(0,i.Z)({root:{cursor:"default"},deleteIcon:{cursor:"default"}}),l=r.forwardRef((function(e,t){var n=r.useRef(null),i=function(){n.current&&n.current.focus()};return r.useImperativeHandle(t,(function(){return{focus:i}})),(0,a.jsx)(o.Z,{label:e.label,icon:e.icon,size:e.size,variant:e.variant,avatar:e.avatar,style:e.style,onClick:e.onClick,onBlur:e.onBlur,onFocus:e.onFocus,onDelete:e.onDelete,classes:s(),className:e.disableAutoTranslate?"notranslate":"",ref:n})}));t.Z=l},66789:function(e,t,n){"use strict";n(28381);var r=n(92709),o=n(29343);t.Z=function(e){return(0,o.jsx)(r.Z,{color:"secondary",style:e.style,size:e.size,disableShrink:e.disableShrink,variant:"determinate"===e.variant?"static":e.variant,value:e.value})}},37237:function(e,t,n){"use strict";var r=n(1413),o=n(29439),i=n(28381),a=n(14238),s=n(64684),l=n(80845),c=n(29343),u={color:{width:"36px",height:"14px",borderRadius:"2px",textAlign:"center",fontSize:"10px"},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},disabled:{opacity:.2,cursor:"default"},popover:{zIndex:l.default.tooltip+100}};t.Z=function(e){var t=e.color,n=e.style,l=e.onChange,d=e.onChangeComplete,p=e.disableAlpha,h=e.disabled,f=i.useRef(null),g=i.useState(!1),m=(0,o.Z)(g,2),x=m[0],v=m[1],b=t||{r:200,g:200,b:200,a:1};return(0,c.jsxs)("div",{style:n,children:[(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},u.swatch),h?u.disabled:{}),onClick:function(){h||v(!x)},ref:f,children:(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},u.color),{},{background:"rgba(".concat(b.r,", ").concat(b.g,", ").concat(b.b,", ").concat(b.a||1,")")}),children:t?null:"?"})}),x&&f.current?(0,c.jsx)(s.ZP,{open:!0,onClose:function(){v(!1)},anchorEl:f.current,style:u.popover,children:(0,c.jsx)(a.xS,{color:b,onChange:l,onChangeComplete:d,disableAlpha:p})}):null]})}},90286:function(e,t,n){"use strict";var r=n(1413),o=n(29439),i=n(28381),a=n(29277),s=n(37237),l=n(11858),c=n(29343),u={container:{position:"relative",display:"inline-block"},picker:{position:"absolute",right:"8px",top:"19px"}};t.Z=function(e){var t=e.fullWidth,n=e.disableAlpha,d=e.id,p=e.floatingLabelText,h=e.helperMarkdownText,f=e.onChange,g=e.color,m=e.alpha,x=e.disabled,v=i.useState(g),b=(0,o.Z)(v,2),j=b[0],C=b[1],y=i.useState(n||void 0===m?1:m),Z=(0,o.Z)(y,2),k=Z[0],w=Z[1],T=i.useRef(null),E=function(e,t){C(e),w(t)},S=function(){var e=parseFloat(k);e<0&&(e=0),e>1&&(e=1),w(e),f(j,e)};return(0,c.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},u.container),{},{width:t?"100%":void 0}),children:[(0,c.jsx)(a.ZP,{id:d,fullWidth:n,style:n?void 0:{width:"70%"},floatingLabelText:p,floatingLabelFixed:!x,helperMarkdownText:h,type:"text",translatableHintText:x?null:{id:"R;G;B, like 100;200;180"},value:j,onChange:function(e){return E(e.target.value,k)},onBlur:S,ref:T,disabled:x}),!n&&(0,c.jsx)(a.ZP,{id:"".concat(d||"","-alpha"),floatingLabelText:"Alpha",floatingLabelFixed:!0,style:{width:"30%"},translatableHintText:{id:"Number between 0 and 1"},value:k.toString(),onChange:function(e,t){return E(j,parseFloat(t))},onBlur:S,ref:T,type:"number",step:.1,disabled:x}),(0,c.jsx)("div",{style:u.picker,children:(0,c.jsx)(s.Z,{disableAlpha:n,onChangeComplete:function(e){var t=(0,l.KC)(e.rgb),r=n?1:e.rgb.a;C(t),r&&w(r),f(t,r)},color:(0,l.A0)(j,k),disabled:x})})]})}},23818:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(1413),o=(n(28381),n(29343)),i=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n},a=function(e){return(0,o.jsx)("img",(0,r.Z)((0,r.Z)({},e),{},{src:e.src?i(e.src,"gdUsage","img"):void 0}))}},1491:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 3.33337C8.27612 3.33337 8.49998 3.55723 8.49998 3.83337V12.1667C8.49998 12.4428 8.27612 12.6667 7.99998 12.6667C7.72384 12.6667 7.49998 12.4428 7.49998 12.1667V3.83337C7.49998 3.55723 7.72384 3.33337 7.99998 3.33337Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 8.00004C3.33331 7.7239 3.55717 7.50004 3.83331 7.50004H12.1666C12.4428 7.50004 12.6666 7.7239 12.6666 8.00004C12.6666 8.27618 12.4428 8.50004 12.1666 8.50004H3.83331C3.55717 8.50004 3.33331 8.27618 3.33331 8.00004Z",fill:"currentColor"})]}))}))},60274:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16683 4.49996C8.16683 3.48744 8.98762 2.66663 10.0002 2.66663H12.8335C13.4778 2.66663 14.0002 3.18897 14.0002 3.83329V10.8333C14.0002 11.4776 13.4778 12 12.8335 12H11.1048C10.5301 12 9.97901 12.2282 9.57265 12.6346L9.02038 13.1868C8.87738 13.3298 8.66232 13.3726 8.47549 13.2952C8.28865 13.2178 8.16683 13.0355 8.16683 12.8333V4.49996ZM10.0002 3.66663C9.53991 3.66663 9.16683 4.03972 9.16683 4.49996V11.6622C9.71864 11.2352 10.3996 11 11.1048 11H12.8335C12.9256 11 13.0002 10.9253 13.0002 10.8333V3.83329C13.0002 3.74124 12.9255 3.66663 12.8335 3.66663H10.0002Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50016 3.66663C4.40812 3.66663 4.3335 3.74125 4.3335 3.83329V10.8333C4.3335 10.9253 4.40811 11 4.50016 11H6.22893C6.93411 11 7.61502 11.2352 8.16683 11.6622V4.49996C8.16683 4.03972 7.79375 3.66663 7.3335 3.66663H4.50016ZM3.3335 3.83329C3.3335 3.18896 3.85583 2.66663 4.50016 2.66663H7.3335C8.34604 2.66663 9.16683 3.48744 9.16683 4.49996V12.8333C9.16683 13.0355 9.04501 13.2178 8.85817 13.2952C8.67133 13.3726 8.45627 13.3298 8.31328 13.1868L7.76101 12.6346C7.35464 12.2282 6.80356 12 6.22893 12H4.50016C3.85584 12 3.3335 11.4776 3.3335 10.8333V3.83329Z",fill:"currentColor"})]}))}))},82422:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.74883 6.06628C9.98835 6.20371 10.0711 6.50928 9.93367 6.7488L8.4046 9.41367C7.9347 10.2325 6.73757 10.1833 6.33649 9.32864L6.04733 8.71233C5.93004 8.46234 6.03762 8.16459 6.28762 8.0473C6.53761 7.93001 6.83536 8.03759 6.95265 8.28759L7.24176 8.90381C7.24175 8.9038 7.24177 8.90382 7.24176 8.90381C7.29909 9.0259 7.47008 9.03298 7.53724 8.91599C7.53724 8.916 7.53725 8.91598 7.53724 8.91599L9.06631 6.25112C9.20374 6.0116 9.50932 5.92885 9.74883 6.06628Z",fill:"currentColor"})]}))}))},25638:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49309 6.80023C5.69544 6.61233 6.01181 6.62405 6.19971 6.8264L7.99998 8.76515L9.80025 6.8264C9.98815 6.62405 10.3045 6.61233 10.5069 6.80023C10.7092 6.98813 10.7209 7.3045 10.533 7.50685L8.36638 9.84019C8.27177 9.94207 8.13902 9.99996 7.99998 9.99996C7.86095 9.99996 7.72819 9.94207 7.63358 9.84019L5.46692 7.50685C5.27902 7.3045 5.29073 6.98813 5.49309 6.80023Z",fill:"currentColor"})}))}))},84900:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80029 5.49309C6.98819 5.29073 7.30456 5.27902 7.50691 5.46692L9.84025 7.63358C9.94213 7.72819 10 7.86095 10 7.99998C10 8.13902 9.94213 8.27177 9.84025 8.36638L7.50691 10.533C7.30456 10.7209 6.98819 10.7092 6.80029 10.5069C6.61239 10.3045 6.62411 9.98815 6.82646 9.80025L8.76522 7.99998L6.82646 6.19971C6.62411 6.01181 6.61239 5.69544 6.80029 5.49309Z",fill:"currentColor"})}))}))},51375:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.jsx)("path",{d:"M 12.008 20 L 15.468 14 L 15.458 14 C 15.798 13.4 16.008 12.73 16.008 12 C 16.008 10.8 15.468 9.73 14.628 9 L 19.418 9 C 19.798 9.93 20.008 10.94 20.008 12 C 20.008 16.418 16.426 20 12.008 20 M 4.008 12 C 4.008 10.54 4.398 9.18 5.078 8 L 8.548 14 L 8.558 14 C 9.248 15.19 10.508 16 12.008 16 C 12.458 16 12.888 15.91 13.298 15.77 L 10.898 19.91 C 7.008 19.37 4.008 16.04 4.008 12 M 15.008 12 C 15.008 13.657 13.665 15 12.008 15 C 10.351 15 9.008 13.657 9.008 12 C 9.008 10.343 10.351 9 12.008 9 C 13.665 9 15.008 10.343 15.008 12 M 12.008 4 C 14.968 4 17.548 5.61 18.928 8 L 12.008 8 C 10.068 8 8.458 9.38 8.088 11.21 L 5.708 7.08 C 7.168 5.21 9.448 4 12.008 4 M 12.008 3.054 C 7.684 3.054 3.008 6.477 3.008 12 C 3.008 16.341 6.485 21 12.008 21 C 17.531 21 20.883 16.5 20.883 12 C 20.883 6.571 16.469 3.054 12.008 3.054 Z"})}))}))},90264:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49999 3.66663C4.03975 3.66663 3.66666 4.03972 3.66666 4.49996V8.99996C3.66666 9.36815 3.96513 9.66663 4.33332 9.66663C4.60947 9.66663 4.83332 9.89048 4.83332 10.1666C4.83332 10.4428 4.60947 10.6666 4.33332 10.6666C3.41285 10.6666 2.66666 9.92043 2.66666 8.99996V4.49996C2.66666 3.48744 3.48747 2.66663 4.49999 2.66663H8.99999C9.92047 2.66663 10.6667 3.41282 10.6667 4.33329C10.6667 4.60944 10.4428 4.83329 10.1667 4.83329C9.89051 4.83329 9.66666 4.60944 9.66666 4.33329C9.66666 3.9651 9.36818 3.66663 8.99999 3.66663H4.49999Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.16666 6.33329C6.70642 6.33329 6.33332 6.70639 6.33332 7.16663V11.5C6.33332 11.9602 6.70642 12.3333 7.16666 12.3333H11.5C11.9602 12.3333 12.3333 11.9602 12.3333 11.5V7.16663C12.3333 6.70639 11.9602 6.33329 11.5 6.33329H7.16666ZM5.33332 7.16663C5.33332 6.1541 6.15413 5.33329 7.16666 5.33329H11.5C12.5125 5.33329 13.3333 6.1541 13.3333 7.16663V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H7.16666C6.15413 13.3333 5.33332 12.5125 5.33332 11.5V7.16663Z",fill:"currentColor"})]}))}))},23198:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8536 4.14645C12.0488 4.34171 12.0488 4.65829 11.8536 4.85355L4.85355 11.8536C4.65829 12.0488 4.34171 12.0488 4.14645 11.8536C3.95118 11.6583 3.95118 11.3417 4.14645 11.1464L11.1464 4.14645C11.3417 3.95118 11.6583 3.95118 11.8536 4.14645Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.14645 4.14645C4.34171 3.95118 4.65829 3.95118 4.85355 4.14645L11.8536 11.1464C12.0488 11.3417 12.0488 11.6583 11.8536 11.8536C11.6583 12.0488 11.3417 12.0488 11.1464 11.8536L4.14645 4.85355C3.95118 4.65829 3.95118 4.34171 4.14645 4.14645Z",fill:"currentColor"})]}))}))},50583:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33337 4.49996C3.33337 3.48744 4.15418 2.66663 5.16671 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V8.83329C14 9.84583 13.1792 10.6666 12.1667 10.6666H10.671C10.6819 10.8097 10.7023 10.9741 10.7389 11.1452C10.8512 11.669 11.0908 12.153 11.557 12.3861C11.7644 12.4898 11.8733 12.7225 11.82 12.9482C11.7667 13.1739 11.5653 13.3333 11.3334 13.3333H6.00004C5.76815 13.3333 5.56669 13.1739 5.51342 12.9482C5.46014 12.7225 5.56903 12.4898 5.77643 12.3861C6.24265 12.153 6.48223 11.669 6.59447 11.1452C6.63115 10.9741 6.65156 10.8097 6.66238 10.6666H5.16671C4.15419 10.6666 3.33337 9.84584 3.33337 8.83329V4.49996ZM7.66465 10.6666C7.65285 10.8628 7.62668 11.1008 7.57228 11.3547C7.50754 11.6568 7.3973 12.0046 7.20863 12.3333H10.1248C9.93611 12.0046 9.82588 11.6568 9.76114 11.3547C9.70673 11.1008 9.68056 10.8628 9.66876 10.6666H7.66465ZM10.1714 9.66663H12.1667C12.627 9.66663 13 9.29355 13 8.83329V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H5.16671C4.70647 3.66663 4.33337 4.03972 4.33337 4.49996V8.83329C4.33337 9.29355 4.70646 9.66663 5.16671 9.66663H7.162C7.16552 9.66659 7.16903 9.66659 7.17253 9.66663H10.1609C10.1644 9.66659 10.1679 9.66659 10.1714 9.66663Z",fill:"currentColor"})}))}))},3570:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M16.9309 3.64148C15.6562 3.0566 14.2892 2.62566 12.86 2.37883C12.8339 2.37406 12.8079 2.38598 12.7945 2.40977C12.6187 2.72246 12.424 3.13035 12.2876 3.45098C10.7504 3.22082 9.22101 3.22082 7.7153 3.45098C7.5789 3.12324 7.3771 2.72246 7.2005 2.40977C7.1871 2.38676 7.16108 2.37484 7.13507 2.37883C5.70663 2.62484 4.33968 3.05578 3.06413 3.64148C3.05308 3.64625 3.04362 3.65418 3.03733 3.66449C0.444522 7.53813 -0.265791 11.3166 0.0826466 15.0481C0.0842091 15.0664 0.0944825 15.0838 0.108662 15.0949C1.81933 16.3512 3.47643 17.1139 5.10272 17.6194C5.12874 17.6273 5.15632 17.6179 5.17288 17.5964C5.55757 17.0711 5.9005 16.5171 6.19452 15.9346C6.21186 15.9005 6.1953 15.86 6.15983 15.8465C5.61589 15.6402 5.09796 15.3886 4.59972 15.1029C4.5603 15.0799 4.55714 15.0235 4.59343 14.9965C4.69827 14.918 4.80315 14.8362 4.90327 14.7537C4.9214 14.7386 4.94663 14.7354 4.96792 14.7449C8.24104 16.2393 11.7846 16.2393 15.0191 14.7449C15.0404 14.7346 15.0656 14.7378 15.0845 14.7529C15.1847 14.8354 15.2895 14.9179 15.3951 14.9965C15.4314 15.0235 15.429 15.0798 15.3896 15.1029C14.8914 15.3941 14.3735 15.6401 13.8287 15.8457C13.7933 15.8591 13.7775 15.9004 13.7949 15.9345C14.0952 16.5163 14.4382 17.0702 14.8157 17.5956C14.8315 17.6178 14.8599 17.6273 14.8859 17.6194C16.5201 17.1139 18.1772 16.3512 19.8878 15.0949C19.9028 15.0838 19.9123 15.0671 19.9139 15.0489C20.3309 10.7348 19.2154 6.9873 16.9568 3.66523C16.9514 3.65418 16.9419 3.64625 16.9309 3.64148ZM6.68339 12.776C5.69796 12.776 4.88597 11.8713 4.88597 10.7602C4.88597 9.6491 5.68218 8.74441 6.68339 8.74441C7.69241 8.74441 8.49655 9.65707 8.48077 10.7602C8.48077 11.8713 7.68452 12.776 6.68339 12.776ZM13.329 12.776C12.3436 12.776 11.5316 11.8713 11.5316 10.7602C11.5316 9.6491 12.3278 8.74441 13.329 8.74441C14.338 8.74441 15.1421 9.65707 15.1264 10.7602C15.1264 11.8713 14.3381 12.776 13.329 12.776Z",fill:"currentColor"})}))}))},17361:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16666 9.33329C3.44281 9.33329 3.66666 9.55715 3.66666 9.83329V10.8333C3.66666 11.6617 4.33823 12.3333 5.16666 12.3333H10.8333C11.6618 12.3333 12.3333 11.6618 12.3333 10.8333V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1095 9.33329 13.3333 9.55715 13.3333 9.83329V10.8333C13.3333 12.214 12.2141 13.3333 10.8333 13.3333H5.16666C3.78596 13.3333 2.66666 12.214 2.66666 10.8333V9.83329C2.66666 9.55715 2.89052 9.33329 3.16666 9.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66663C8.27614 2.66663 8.5 2.89048 8.5 3.16663V9.49996C8.5 9.7761 8.27614 9.99996 8 9.99996C7.72386 9.99996 7.5 9.7761 7.5 9.49996V3.16663C7.5 2.89048 7.72386 2.66663 8 2.66663Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49311 6.80023C5.69546 6.61233 6.01183 6.62405 6.19973 6.8264L8 8.76515L9.80027 6.8264C9.98817 6.62405 10.3045 6.61233 10.5069 6.80023C10.7092 6.98813 10.721 7.3045 10.5331 7.50685L8.36639 9.84019C8.27179 9.94207 8.13903 9.99996 8 9.99996C7.86096 9.99996 7.72821 9.94207 7.6336 9.84019L5.46693 7.50685C5.27903 7.3045 5.29075 6.98813 5.49311 6.80023Z",fill:"currentColor"})]}))}))},37571:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5126 5.17677C15.196 4.49332 16.3041 4.49332 16.9875 5.17677L18.8232 7.01253C19.5066 7.69595 19.5066 8.80397 18.8233 9.48739L9.53034 18.7803C9.43172 18.8789 9.30756 18.9481 9.17179 18.98L4.92179 19.98C4.66896 20.0395 4.40335 19.964 4.21968 19.7803C4.03602 19.5966 3.96046 19.331 4.01995 19.0782L5.01995 14.8282C5.0519 14.6924 5.12106 14.5683 5.21969 14.4696L14.5126 5.17677ZM15.9268 6.23739C15.8292 6.13978 15.6709 6.13978 15.5733 6.23739L6.43121 15.3794L5.75757 18.2424L8.62055 17.5688L17.7626 8.42677C17.7626 8.42678 17.7626 8.42677 17.7626 8.42677C17.8602 8.32913 17.8602 8.17081 17.7626 8.07317L15.9268 6.23739Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 19.25C13 18.8358 13.3358 18.5 13.75 18.5H19.25C19.6642 18.5 20 18.8358 20 19.25C20 19.6642 19.6642 20 19.25 20H13.75C13.3358 20 13 19.6642 13 19.25Z",fill:"currentColor"})]}))}))},77791:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,a.jsx)("path",{d:"M2.66699 12C2.66699 6.47716 7.14415 2 12.667 2C18.1899 2 22.667 6.47716 22.667 12C22.667 17.5229 18.1899 22 12.667 22C7.14415 22 2.66699 17.5229 2.66699 12Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M15.9285 10.0114C16.28 9.6599 16.28 9.09005 15.9285 8.73858C15.577 8.38711 15.0072 8.38711 14.6557 8.73858L12.6671 10.7272L10.6785 8.73858C10.327 8.38711 9.75717 8.38711 9.40569 8.73858C9.05422 9.09005 9.05422 9.6599 9.40569 10.0114L11.3943 12L9.40569 13.9886C9.05422 14.3401 9.05422 14.9099 9.40569 15.2614C9.75717 15.6128 10.327 15.6128 10.6785 15.2614L12.6671 13.2728L14.6557 15.2614C15.0072 15.6128 15.577 15.6128 15.9285 15.2614C16.28 14.9099 16.28 14.3401 15.9285 13.9886L13.9399 12L15.9285 10.0114Z",fill:"#32323B"})]}))}))},22853:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M11.3916 18.6667V10.7607H14.1423L14.555 7.67868H11.3916V5.71127C11.3916 4.81923 11.6475 4.21132 12.9754 4.21132L14.6663 4.21065V1.45399C14.3739 1.41735 13.3701 1.33333 12.2018 1.33333C9.76223 1.33333 8.09203 2.76936 8.09203 5.40603V7.67868H5.33301V10.7607H8.09203V18.6667H11.3916Z",fill:"currentColor"})}))}))},62981:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.00024 4.49996C4.00024 3.48744 4.82106 2.66663 5.83358 2.66663H10.0002C10.1329 2.66663 10.26 2.7193 10.3538 2.81307L13.1871 5.64641C13.2809 5.74017 13.3336 5.86735 13.3336 5.99996V11.5C13.3336 12.5125 12.5128 13.3333 11.5002 13.3333H5.83358C4.82106 13.3333 4.00024 12.5125 4.00024 11.5V4.49996ZM5.83358 3.66663C5.37334 3.66663 5.00024 4.03972 5.00024 4.49996V11.5C5.00024 11.9602 5.37333 12.3333 5.83358 12.3333H11.5002C11.9605 12.3333 12.3336 11.9602 12.3336 11.5V6.20707L9.79314 3.66663H5.83358Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.83358 2.83329C10.1097 2.83329 10.3336 3.05715 10.3336 3.33329V5.66663H12.6669C12.9431 5.66663 13.1669 5.89048 13.1669 6.16663C13.1669 6.44277 12.9431 6.66663 12.6669 6.66663H9.83358C9.55743 6.66663 9.33358 6.44277 9.33358 6.16663V3.33329C9.33358 3.05715 9.55743 2.83329 9.83358 2.83329Z",fill:"currentColor"})]}))}))},9311:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.71604 2.95003C2.7993 2.7768 2.97449 2.66663 3.16669 2.66663H12.8334C13.0256 2.66663 13.2007 2.7768 13.284 2.95003C13.3673 3.12326 13.3439 3.32889 13.2238 3.47897L10.1827 7.28044C10.0644 7.42819 10 7.61179 10 7.80103V12.1666C10 12.811 9.4777 13.3333 8.83336 13.3333H7.16669C6.52235 13.3333 6.00003 12.811 6.00003 12.1666V7.80103C6.00003 7.61176 5.93562 7.42819 5.81743 7.28045L2.77626 3.47897C2.65619 3.32889 2.63278 3.12326 2.71604 2.95003ZM4.207 3.66663L6.59828 6.65573C6.59827 6.65573 6.59828 6.65574 6.59828 6.65573C6.85834 6.9808 7.00003 7.3847 7.00003 7.80103V12.1666C7.00003 12.2587 7.07463 12.3333 7.16669 12.3333H8.83336C8.92542 12.3333 9.00002 12.2587 9.00002 12.1666V7.80103C9.00002 7.38467 9.14175 6.98078 9.4018 6.65573L11.7931 3.66663H4.207Z",fill:"currentColor"})}))}))},68262:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75C4 7.33579 4.33579 7 4.75 7H17.25C18.7688 7 20 8.23122 20 9.75V17.25C20 18.7688 18.7688 20 17.25 20H6.75C5.23122 20 4 18.7688 4 17.25V7.75ZM5.5 8.5V17.25C5.5 17.9404 6.05964 18.5 6.75 18.5H17.25C17.9404 18.5 18.5 17.9404 18.5 17.25V9.75C18.5 9.05964 17.9404 8.5 17.25 8.5H5.5Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 6.75C4 5.23122 5.23122 4 6.75 4H10.8127C11.819 4 12.7451 4.54965 13.227 5.43322L14.1584 7.14085C14.3568 7.50449 14.2228 7.96007 13.8591 8.15842C13.4955 8.35677 13.0399 8.22278 12.8416 7.85915L11.9101 6.15145C11.6911 5.74995 11.2702 5.5 10.8127 5.5H6.75C6.05964 5.5 5.5 6.05964 5.5 6.75V11C5.5 11.4142 5.16421 11.75 4.75 11.75C4.33579 11.75 4 11.4142 4 11V6.75Z",fill:"currentColor"})]}))}))},24893:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"115",height:"93",viewBox:"-5 -1 115 93",fill:"none",children:[(0,a.jsx)("path",{d:"M60.9224 67.0771C52.3232 67.0771 44.0446 64.752 36.7313 59.6893C31.6337 56.1619 25.7339 48.197 25.7339 34.6939C25.7339 9.64282 38.5302 0.5 64.2455 0.5H110.542L115 14.7683H67.7736C50.801 14.7683 40.7089 16.0919 40.7089 34.6939C40.7089 40.8384 42.4416 45.2112 46.008 48.0604C52.0354 52.8764 63.7507 53.0813 70.9092 52.3913C70.9092 52.3913 73.8463 42.9467 74.33 41.4134C74.8966 39.6166 74.6485 39.188 72.881 39.188C70.328 39.188 65.7384 39.188 60.8673 39.188C57.4536 39.188 54.0998 37.4699 54.0998 33.3432C54.0998 29.3579 57.2201 27.0447 61.4974 27.0447C68.9034 27.0447 84.1565 27.0447 87.0113 27.0447C90.754 27.0447 94.5734 27.5814 92.6247 33.5063L82.3047 64.8043C82.3054 64.805 73.8741 67.0771 60.9224 67.0771V67.0771Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M89.8255 72.3901C84.6241 76.0318 76.9198 78.0446 63.8468 78.0446C41.3145 78.0446 24.8236 69.9479 18.0999 54.2515C14.9211 46.8323 15.227 38.4234 15.227 27.051H0.252679C0.252679 39.043 0.0463766 48.4458 3.25452 57.1063C11.6669 79.8247 33.3301 92.0307 62.4312 92.0307C90.5999 92.0307 102.273 83.9981 109.882 72.3901H89.8255Z",fill:"currentColor"})]}))}))},86065:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99689 6.72225C6.9968 6.72298 6.99672 6.72371 6.99664 6.72444C6.99658 6.72489 6.99661 6.72465 6.99664 6.72444L6.99677 6.72329L6.99689 6.72225ZM8.47298 7.42017C8.04992 7.58361 7.49999 7.99263 7.49999 8.66663V8.83329C7.49999 9.10944 7.72385 9.33329 7.99999 9.33329C8.27613 9.33329 8.49999 9.10944 8.49999 8.83329V8.66663C8.49999 8.63219 8.51235 8.58558 8.56778 8.52461C8.62638 8.46015 8.71978 8.39685 8.83338 8.35296C9.60577 8.05452 9.99999 7.35738 9.99999 6.66663C9.99999 6.31089 9.96035 5.80089 9.65686 5.37601C9.32845 4.91624 8.77702 4.66663 7.99999 4.66663C7.09835 4.66663 6.58004 5.19298 6.31291 5.6738C6.18242 5.9087 6.10646 6.13862 6.06287 6.30677C6.04081 6.39184 6.02636 6.46376 6.01721 6.51617C6.01262 6.54245 6.00933 6.56401 6.00707 6.5801L6.0044 6.60009L6.00357 6.60686L6.00327 6.60942L6.00315 6.61049C6.00313 6.61071 6.00305 6.61141 6.49999 6.66663L6.00305 6.61141C5.97255 6.88586 6.17032 7.13307 6.44477 7.16357C6.71836 7.19397 6.96488 6.99754 6.99664 6.72444L6.99731 6.71946C6.99814 6.71358 6.99973 6.70292 7.0023 6.68817C7.00748 6.65855 7.01646 6.61328 7.03086 6.55773C7.06019 6.44463 7.10923 6.29956 7.18707 6.15945C7.33661 5.89028 7.56829 5.66663 7.99999 5.66663C8.55629 5.66663 8.75486 5.83368 8.84312 5.95725C8.9563 6.11569 8.99999 6.35569 8.99999 6.66663C8.99999 6.9776 8.82964 7.28234 8.47298 7.42017Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 10.6666C7.33332 10.2985 7.63183 9.99996 7.99999 9.99996C8.36815 9.99996 8.66666 10.2985 8.66666 10.6666C8.66666 11.0348 8.36815 11.3333 7.99999 11.3333C7.63183 11.3333 7.33332 11.0348 7.33332 10.6666Z",fill:"currentColor"})]}))}))},75268:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.83337 9.33329C4.10952 9.33329 4.33337 9.55715 4.33337 9.83329V11.5C4.33337 11.9602 4.70646 12.3333 5.16671 12.3333H6.83337C7.10952 12.3333 7.33337 12.5572 7.33337 12.8333C7.33337 13.1094 7.10952 13.3333 6.83337 13.3333H5.16671C4.15419 13.3333 3.33337 12.5125 3.33337 11.5V9.83329C3.33337 9.55715 3.55723 9.33329 3.83337 9.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 9.33329C13.7762 9.33329 14 9.55715 14 9.83329V11.5C14 12.5125 13.1792 13.3333 12.1667 13.3333H10.5C10.2239 13.3333 10 13.1094 10 12.8333C10 12.5572 10.2239 12.3333 10.5 12.3333H12.1667C12.627 12.3333 13 11.9602 13 11.5V9.83329C13 9.55715 13.2239 9.33329 13.5 9.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3.16663C10 2.89048 10.2239 2.66663 10.5 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V6.16663C14 6.44277 13.7762 6.66663 13.5 6.66663C13.2239 6.66663 13 6.44277 13 6.16663V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H10.5C10.2239 3.66663 10 3.44277 10 3.16663Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16671 3.66663C4.70647 3.66663 4.33337 4.03972 4.33337 4.49996V6.16663C4.33337 6.44277 4.10952 6.66663 3.83337 6.66663C3.55723 6.66663 3.33337 6.44277 3.33337 6.16663V4.49996C3.33337 3.48744 4.15418 2.66663 5.16671 2.66663H6.83337C7.10952 2.66663 7.33337 2.89048 7.33337 3.16663C7.33337 3.44277 7.10952 3.66663 6.83337 3.66663H5.16671Z",fill:"currentColor"})]}))}))},51224:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16671 3.66669C4.70647 3.66669 4.33337 4.03978 4.33337 4.50002V11.5C4.33337 11.9603 4.70646 12.3334 5.16671 12.3334H9.50004C9.9603 12.3334 10.3334 11.9603 10.3334 11.5V4.50002C10.3334 4.03978 9.96029 3.66669 9.50004 3.66669H5.16671ZM3.33337 4.50002C3.33337 3.4875 4.15418 2.66669 5.16671 2.66669H9.50004C10.5126 2.66669 11.3334 3.4875 11.3334 4.50002V11.5C11.3334 12.5126 10.5126 13.3334 9.50004 13.3334H5.16671C4.15419 13.3334 3.33337 12.5126 3.33337 11.5V4.50002Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66671 11.1667C6.66671 10.8905 6.89057 10.6667 7.16671 10.6667H7.50004C7.77618 10.6667 8.00004 10.8905 8.00004 11.1667C8.00004 11.4428 7.77618 11.6667 7.50004 11.6667H7.16671C6.89057 11.6667 6.66671 11.4428 6.66671 11.1667Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9252 6.06224C13.1669 5.92883 13.4711 6.01669 13.6045 6.25847L13.1667 6.50002C13.6045 6.25847 13.6044 6.25833 13.6045 6.25847L13.6051 6.25966L13.6059 6.26108L13.6078 6.26459L13.613 6.27434C13.6171 6.28204 13.6223 6.29212 13.6284 6.30451C13.6408 6.32929 13.6571 6.36337 13.676 6.40612C13.7138 6.49153 13.7622 6.61219 13.81 6.76305C13.9054 7.06405 14 7.49057 14 8.00002C14 8.50947 13.9054 8.936 13.81 9.23699C13.7622 9.38785 13.7138 9.50851 13.676 9.59392C13.6571 9.63667 13.6408 9.67075 13.6284 9.69553C13.6223 9.70792 13.6171 9.71801 13.613 9.7257L13.6078 9.73545L13.6059 9.73897L13.6051 9.74038L13.6048 9.741C13.6047 9.74114 13.6045 9.74157 13.1667 9.50002M12.7276 6.73915L12.7284 6.7406L12.7276 6.73915Z",fill:"currentColor"})]}))}))},58758:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1666 4C10.4427 4 10.6666 4.22386 10.6666 4.5V11.5C10.6666 11.7761 10.4427 12 10.1666 12C9.89044 12 9.66659 11.7761 9.66659 11.5V4.5C9.66659 4.22386 9.89044 4 10.1666 4Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.83325 4C6.10939 4 6.33325 4.22386 6.33325 4.5V11.5C6.33325 11.7761 6.10939 12 5.83325 12C5.55711 12 5.33325 11.7761 5.33325 11.5V4.5C5.33325 4.22386 5.55711 4 5.83325 4Z",fill:"currentColor"})]}))}))},14331:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.23713 3.40805C4.38454 3.31695 4.56861 3.30866 4.72361 3.38616L13.0569 7.55283C13.2263 7.63752 13.3333 7.81066 13.3333 8.00004C13.3333 8.18943 13.2263 8.36256 13.0569 8.44726L4.72361 12.6139C4.56861 12.6914 4.38454 12.6831 4.23713 12.592C4.08973 12.5009 4 12.34 4 12.1667V3.83337C4 3.66009 4.08973 3.49915 4.23713 3.40805ZM5 4.64239V11.3577L11.7153 8.00004L5 4.64239Z",fill:"currentColor"})}))}))},45658:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M16.6664 10C16.6664 9.19299 16.0114 8.53802 15.2044 8.53802C14.8067 8.53802 14.4559 8.69007 14.1986 8.94738C13.2044 8.23393 11.8243 7.76609 10.3038 7.70761L10.9705 4.5848L13.1342 5.04094C13.1576 5.59065 13.6138 6.0351 14.1752 6.0351C14.7483 6.0351 15.2161 5.56726 15.2161 4.99416C15.2161 4.42106 14.7483 3.95322 14.1752 3.95322C13.7658 3.95322 13.4149 4.18714 13.2512 4.53802L10.8301 4.0234C10.76 4.0117 10.6898 4.0234 10.6313 4.05849C10.5728 4.09358 10.5377 4.15205 10.5143 4.22223L9.7775 7.70761C8.22194 7.75439 6.83013 8.21053 5.82428 8.94738C5.56697 8.70176 5.2044 8.53802 4.81843 8.53802C4.01142 8.53802 3.35645 9.19299 3.35645 10C3.35645 10.5965 3.70732 11.0994 4.22194 11.3333C4.19855 11.4737 4.18685 11.6257 4.18685 11.7778C4.18685 14.0234 6.79504 15.8363 10.0231 15.8363C13.2512 15.8363 15.8594 14.0234 15.8594 11.7778C15.8594 11.6257 15.8477 11.4854 15.8243 11.345C16.3038 11.1111 16.6664 10.5965 16.6664 10ZM6.66639 11.0409C6.66639 10.4678 7.13422 10 7.70732 10C8.28042 10 8.74826 10.4678 8.74826 11.0409C8.74826 11.614 8.28042 12.0819 7.70732 12.0819C7.13422 12.0819 6.66639 11.614 6.66639 11.0409ZM12.4793 13.7895C11.7658 14.5029 10.4091 14.5497 10.0114 14.5497C9.61376 14.5497 8.24533 14.4912 7.54358 13.7895C7.43832 13.6842 7.43832 13.5088 7.54358 13.4035C7.64884 13.2983 7.82428 13.2983 7.92954 13.4035C8.37399 13.848 9.33305 14.0117 10.0231 14.0117C10.7132 14.0117 11.6605 13.848 12.1167 13.4035C12.2219 13.2983 12.3974 13.2983 12.5026 13.4035C12.5845 13.5205 12.5845 13.6842 12.4793 13.7895ZM12.2921 12.0819C11.719 12.0819 11.2512 11.614 11.2512 11.0409C11.2512 10.4678 11.719 10 12.2921 10C12.8652 10 13.3331 10.4678 13.3331 11.0409C13.3331 11.614 12.8652 12.0819 12.2921 12.0819Z",fill:"currentColor"})}))}))},72662:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{},{children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33334 3.66663C5.30829 3.66663 3.66667 5.30825 3.66667 7.33329C3.66667 9.35835 5.30829 11 7.33334 11C9.3584 11 11 9.35835 11 7.33329C11 5.30825 9.3584 3.66663 7.33334 3.66663ZM2.66667 7.33329C2.66667 4.75596 4.75601 2.66663 7.33334 2.66663C9.91068 2.66663 12 4.75596 12 7.33329C12 8.44185 11.6135 9.46012 10.9678 10.2607L13.1869 12.4797C13.3822 12.675 13.3822 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L10.2607 10.9678C9.46017 11.6134 8.4419 12 7.33334 12C4.75601 12 2.66667 9.91064 2.66667 7.33329Z",fill:"currentColor"})}))}))},83689:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55532 5.61476C9.93868 5.95799 10.445 6.16671 11 6.16671C12.1967 6.16671 13.1667 5.19666 13.1667 4.00004C13.1667 2.80342 12.1967 1.83337 11 1.83337C9.80342 1.83337 8.83337 2.80342 8.83337 4.00004C8.83337 4.27671 8.88523 4.54126 8.97975 4.78451L6.18159 6.18359C5.84176 5.96209 5.43593 5.83337 5.00004 5.83337C3.80342 5.83337 2.83337 6.80342 2.83337 8.00004C2.83337 9.19666 3.80342 10.1667 5.00004 10.1667C5.5437 10.1667 6.0406 9.96647 6.421 9.63572L8.99411 11.1796C8.89049 11.4326 8.83337 11.7097 8.83337 12C8.83337 13.1967 9.80342 14.1667 11 14.1667C12.1967 14.1667 13.1667 13.1967 13.1667 12C13.1667 10.8034 12.1967 9.83337 11 9.83337C10.4564 9.83337 9.95947 10.0336 9.57907 10.3644L7.00597 8.82051C7.10959 8.56744 7.16671 8.29041 7.16671 8.00004C7.16671 7.61733 7.06748 7.25779 6.89335 6.94575L9.55532 5.61476ZM11 2.83337C10.3557 2.83337 9.83337 3.35571 9.83337 4.00004C9.83337 4.25845 9.91739 4.49723 10.0596 4.69057C10.0642 4.69642 10.0687 4.70238 10.073 4.70847C10.2862 4.98704 10.6221 5.16671 11 5.16671C11.6444 5.16671 12.1667 4.64437 12.1667 4.00004C12.1667 3.35571 11.6444 2.83337 11 2.83337ZM5.00004 6.83337C4.35571 6.83337 3.83337 7.35571 3.83337 8.00004C3.83337 8.64437 4.35571 9.16671 5.00004 9.16671C5.3788 9.16671 5.71541 8.98621 5.92854 8.70655C5.93198 8.70178 5.9355 8.69709 5.93909 8.69248C6.08214 8.4988 6.16671 8.2593 6.16671 8.00004C6.16671 7.35571 5.64437 6.83337 5.00004 6.83337ZM9.83337 12C9.83337 11.7407 9.91797 11.5012 10.0611 11.3075C10.0646 11.303 10.0681 11.2983 10.0714 11.2937C10.2846 11.0139 10.6212 10.8334 11 10.8334C11.6444 10.8334 12.1667 11.3557 12.1667 12C12.1667 12.6444 11.6444 13.1667 11 13.1667C10.3557 13.1667 9.83337 12.6444 9.83337 12Z",fill:"currentColor"})}))}))},44634:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66663 4.49996C2.66663 3.48744 3.48744 2.66663 4.49996 2.66663H6.16663C6.44277 2.66663 6.66663 2.89048 6.66663 3.16663C6.66663 3.44277 6.44277 3.66663 6.16663 3.66663H4.49996C4.03972 3.66663 3.66663 4.03972 3.66663 4.49996V11.5C3.66663 11.9602 4.03972 12.3333 4.49996 12.3333H11.5C11.9602 12.3333 12.3333 11.9602 12.3333 11.5V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1094 9.33329 13.3333 9.55715 13.3333 9.83329V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H4.49996C3.48744 13.3333 2.66663 12.5125 2.66663 11.5V4.49996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33329 3.16663C9.33329 2.89048 9.55715 2.66663 9.83329 2.66663H12.8333C13.1094 2.66663 13.3333 2.89048 13.3333 3.16663V6.16663C13.3333 6.44277 13.1094 6.66663 12.8333 6.66663C12.5572 6.66663 12.3333 6.44277 12.3333 6.16663V3.66663H9.83329C9.55715 3.66663 9.33329 3.44277 9.33329 3.16663Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0202 2.97974C13.2154 3.175 13.2154 3.49158 13.0202 3.68685L8.18685 8.52018C7.99158 8.71544 7.675 8.71544 7.47974 8.52018C7.28448 8.32492 7.28448 8.00834 7.47974 7.81307L12.3131 2.97974C12.5083 2.78448 12.8249 2.78448 13.0202 2.97974Z",fill:"currentColor"})]}))}))},47956:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.01074 4.6875C6.99145 4.6875 5.35449 6.32446 5.35449 8.34375V15.6562C5.35449 17.6755 6.99146 19.3125 9.01074 19.3125H16.3232C18.3425 19.3125 19.9795 17.6755 19.9795 15.6562V8.34375C19.9795 6.32446 18.3425 4.6875 16.3232 4.6875H9.01074ZM3.66699 8.34375C3.66699 5.39248 6.05947 3 9.01074 3H16.3232C19.2745 3 21.667 5.39247 21.667 8.34375V15.6562C21.667 18.6075 19.2745 21 16.3232 21H9.01074C6.05946 21 3.66699 18.6075 3.66699 15.6562V8.34375Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.667 12C13.2883 12 13.792 12.5037 13.792 13.125V15.375C13.792 15.9963 13.2883 16.5 12.667 16.5C12.0457 16.5 11.542 15.9963 11.542 15.375V13.125C11.542 12.5037 12.0457 12 12.667 12Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M12.667 9.75C13.2883 9.75 13.792 9.24632 13.792 8.625C13.792 8.00368 13.2883 7.5 12.667 7.5C12.0457 7.5 11.542 8.00368 11.542 8.625C11.542 9.24632 12.0457 9.75 12.667 9.75Z",fill:"currentColor"})]}))}))},61804:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{d:"M8.66668 8.00002C8.66668 8.36822 8.36821 8.66669 8.00001 8.66669C7.63181 8.66669 7.33334 8.36822 7.33334 8.00002C7.33334 7.63182 7.63181 7.33335 8.00001 7.33335C8.36821 7.33335 8.66668 7.63182 8.66668 8.00002Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66668 5.33335C8.66668 5.70154 8.36821 6.00002 8.00001 6.00002C7.63181 6.00002 7.33334 5.70154 7.33334 5.33335C7.33334 4.96517 7.63181 4.66669 8.00001 4.66669C8.36821 4.66669 8.66668 4.96517 8.66668 5.33335Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66668 10.6667C8.66668 11.0349 8.36821 11.3334 8.00001 11.3334C7.63181 11.3334 7.33334 11.0349 7.33334 10.6667C7.33334 10.2985 7.63181 10 8.00001 10C8.36821 10 8.66668 10.2985 8.66668 10.6667Z",fill:"currentColor"})]}))}))},44023:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",children:(0,a.jsx)("path",{fill:"currentColor",d:"M16.708 0.027c1.745-0.027 3.48-0.011 5.213-0.027 0.105 2.041 0.839 4.12 2.333 5.563 1.491 1.479 3.6 2.156 5.652 2.385v5.369c-1.923-0.063-3.855-0.463-5.6-1.291-0.76-0.344-1.468-0.787-2.161-1.24-0.009 3.896 0.016 7.787-0.025 11.667-0.104 1.864-0.719 3.719-1.803 5.255-1.744 2.557-4.771 4.224-7.88 4.276-1.907 0.109-3.812-0.411-5.437-1.369-2.693-1.588-4.588-4.495-4.864-7.615-0.032-0.667-0.043-1.333-0.016-1.984 0.24-2.537 1.495-4.964 3.443-6.615 2.208-1.923 5.301-2.839 8.197-2.297 0.027 1.975-0.052 3.948-0.052 5.923-1.323-0.428-2.869-0.308-4.025 0.495-0.844 0.547-1.485 1.385-1.819 2.333-0.276 0.676-0.197 1.427-0.181 2.145 0.317 2.188 2.421 4.027 4.667 3.828 1.489-0.016 2.916-0.88 3.692-2.145 0.251-0.443 0.532-0.896 0.547-1.417 0.131-2.385 0.079-4.76 0.095-7.145 0.011-5.375-0.016-10.735 0.025-16.093z"})}))}))},53162:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.315 7.00282C17.7276 7.0387 18.0331 7.40232 17.9972 7.81498L17.156 17.4882C17.156 17.4882 17.156 17.4882 17.156 17.4882C17.0325 18.9093 15.8428 20 14.4164 20H9.58363C8.15721 20 6.96754 18.9094 6.84397 17.4883L6.00282 7.81497C5.96694 7.40232 6.27237 7.0387 6.68503 7.00282C7.09768 6.96694 7.4613 7.27237 7.49718 7.68503L8.33833 17.3583C8.3945 18.0042 8.93523 18.5 9.58363 18.5H14.4164C15.0648 18.5 15.6055 18.0042 15.6616 17.3584L16.5028 7.68502C16.5387 7.27237 16.9023 6.96693 17.315 7.00282Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.75 5.5C11.0596 5.5 10.5 6.05964 10.5 6.75V7.5C10.5 7.91421 10.1642 8.25 9.75 8.25C9.33579 8.25 9 7.91421 9 7.5V6.75C9 5.23122 10.2312 4 11.75 4H12.25C13.7688 4 15 5.23122 15 6.75V7.5C15 7.91421 14.6642 8.25 14.25 8.25C13.8358 8.25 13.5 7.91421 13.5 7.5V6.75C13.5 6.05964 12.9404 5.5 12.25 5.5H11.75Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.25 7.75C4.25 7.33579 4.58579 7 5 7H19C19.4142 7 19.75 7.33579 19.75 7.75C19.75 8.16421 19.4142 8.5 19 8.5H5C4.58579 8.5 4.25 8.16421 4.25 7.75Z",fill:"currentColor"})]}))}))},42839:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.jsx)("path",{fill:"currentColor",d:"M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"})}))}))},49536:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"11",height:"12",viewBox:"0 0 11 12",style:{fill:"none"},children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1.66663C4.07953 1.66663 3.33333 2.41282 3.33333 3.33329C3.33333 4.25377 4.07953 4.99996 5 4.99996C5.92048 4.99996 6.66667 4.25377 6.66667 3.33329C6.66667 2.41282 5.92048 1.66663 5 1.66663ZM2.33333 3.33329C2.33333 1.86053 3.52724 0.666626 5 0.666626C6.47276 0.666626 7.66667 1.86053 7.66667 3.33329C7.66667 4.80605 6.47276 5.99996 5 5.99996C3.52724 5.99996 2.33333 4.80605 2.33333 3.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16667 7.83329C2.6693 7.83329 1.58173 8.88923 1.0908 9.71832C0.998733 9.8738 1.02215 9.99692 1.10056 10.1007C1.1926 10.2224 1.38217 10.3333 1.63302 10.3333H5.16667C5.44281 10.3333 5.66667 10.5572 5.66667 10.8333C5.66667 11.1094 5.44281 11.3333 5.16667 11.3333H1.63302C1.09754 11.3333 0.600568 11.0976 0.302804 10.7036C-0.00859044 10.2917 -0.0782384 9.72992 0.230335 9.2088C0.901565 8.07522 2.3165 6.83329 5.16667 6.83329C5.44281 6.83329 5.66667 7.05715 5.66667 7.33329C5.66667 7.60944 5.44281 7.83329 5.16667 7.83329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1261 7.42795C10.3499 7.58963 10.4004 7.90217 10.2387 8.12604L8.07201 11.126C7.98157 11.2513 7.83834 11.3276 7.68398 11.333C7.52961 11.3383 7.38144 11.272 7.28256 11.1534L6.44922 10.1534C6.27244 9.94125 6.3011 9.62596 6.51324 9.44918C6.72538 9.2724 7.04066 9.30106 7.21744 9.5132L7.63844 10.0184L9.42799 7.54055C9.58967 7.31668 9.90222 7.26627 10.1261 7.42795Z",fill:"currentColor"})]}))}))},72392:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.66228 10.0458C4.21997 9.3592 5.07644 8.83335 6.33333 8.83335C7.59023 8.83335 8.44671 9.3592 9.0044 10.0458C9.54559 10.7121 9.7885 11.5061 9.89964 12.0527C10.0474 12.7795 9.45363 13.3334 8.8122 13.3334H3.85445C3.213 13.3334 2.61924 12.7795 2.76702 12.0527C2.87817 11.5061 3.12109 10.7121 3.66228 10.0458ZM4.43848 10.6763C4.04155 11.1649 3.84285 11.7804 3.74697 12.252C3.74408 12.2662 3.74562 12.2737 3.74668 12.2775C3.74798 12.282 3.751 12.2888 3.75818 12.2967C3.77307 12.3133 3.80507 12.3334 3.85445 12.3334H8.8122C8.86159 12.3334 8.89359 12.3133 8.90848 12.2967C8.91567 12.2887 8.91868 12.282 8.91998 12.2775C8.92105 12.2737 8.92258 12.2662 8.9197 12.252C8.82383 11.7804 8.62514 11.1649 8.2282 10.6763C7.84776 10.2079 7.26957 9.83335 6.33333 9.83335C5.3971 9.83335 4.81892 10.2079 4.43848 10.6763Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9.33335C10 9.05721 10.2239 8.83335 10.5 8.83335C11.3981 8.83335 12.0238 9.30952 12.4336 9.88998C12.8329 10.4556 13.0502 11.146 13.1707 11.689C13.3754 12.6108 12.6195 13.3334 11.7846 13.3334H11.1667C10.8905 13.3334 10.6667 13.1095 10.6667 12.8334C10.6667 12.5572 10.8905 12.3334 11.1667 12.3334H11.7846C11.93 12.3334 12.0487 12.2727 12.1207 12.1918C12.189 12.1151 12.2194 12.0182 12.1945 11.9057C12.0859 11.4166 11.9048 10.875 11.6166 10.4667C11.3388 10.0732 10.9877 9.83335 10.5 9.83335C10.2239 9.83335 10 9.6095 10 9.33335Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.33333 3.66669C5.59695 3.66669 5 4.26364 5 5.00002C5 5.7364 5.59695 6.33335 6.33333 6.33335C7.06971 6.33335 7.66667 5.7364 7.66667 5.00002C7.66667 4.26364 7.06971 3.66669 6.33333 3.66669ZM4 5.00002C4 3.71136 5.04467 2.66669 6.33333 2.66669C7.622 2.66669 8.66667 3.71136 8.66667 5.00002C8.66667 6.28868 7.622 7.33335 6.33333 7.33335C5.04467 7.33335 4 6.28868 4 5.00002Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33333 3.16669C9.33333 2.89054 9.55719 2.66669 9.83333 2.66669C11.1829 2.66669 12 3.7765 12 5.00002C12 6.22354 11.1829 7.33335 9.83333 7.33335C9.55719 7.33335 9.33333 7.1095 9.33333 6.83335C9.33333 6.55721 9.55719 6.33335 9.83333 6.33335C10.5088 6.33335 11 5.80154 11 5.00002C11 4.1985 10.5088 3.66669 9.83333 3.66669C9.55719 3.66669 9.33333 3.44283 9.33333 3.16669Z",fill:"currentColor"})]}))}))},81730:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66663C4.03978 3.66663 3.66669 4.03972 3.66669 4.49996V11.5C3.66669 11.9602 4.03978 12.3333 4.50002 12.3333H11.5C11.9603 12.3333 12.3334 11.9602 12.3334 11.5V4.49996C12.3334 4.03972 11.9603 3.66663 11.5 3.66663H4.50002ZM2.66669 4.49996C2.66669 3.48744 3.4875 2.66663 4.50002 2.66663H11.5C12.5126 2.66663 13.3334 3.48744 13.3334 4.49996V11.5C13.3334 12.5125 12.5126 13.3333 11.5 13.3333H4.50002C3.4875 13.3333 2.66669 12.5125 2.66669 11.5V4.49996Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25221 5.39902C6.40815 5.31004 6.59982 5.31149 6.75438 5.40283L10.4211 7.5695C10.5733 7.65945 10.6667 7.82313 10.6667 7.99996C10.6667 8.17679 10.5733 8.34046 10.4211 8.43042L6.75438 10.5971C6.59982 10.6884 6.40815 10.6899 6.25221 10.6009C6.09628 10.5119 6.00002 10.3462 6.00002 10.1666V5.83329C6.00002 5.65376 6.09628 5.488 6.25221 5.39902ZM7.00002 6.70952V9.2904L9.18385 7.99996L7.00002 6.70952Z",fill:"currentColor"})]}))}))},57588:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.53835 7.25146C4.38004 7.65217 4.33374 7.92675 4.33374 8.00004C4.33374 8.07334 4.38004 8.34791 4.53835 8.74862C4.69005 9.13261 4.92797 9.58926 5.26916 10.0252C5.94493 10.8887 7.01801 11.6667 8.66707 11.6667C10.3161 11.6667 11.3892 10.8887 12.065 10.0252C12.4062 9.58926 12.6441 9.13261 12.7958 8.74862C12.9541 8.34791 13.0004 8.07334 13.0004 8.00004C13.0004 7.92675 12.9541 7.65217 12.7958 7.25146C12.6441 6.86747 12.4062 6.41082 12.065 5.97486C11.3892 5.11138 10.3161 4.33337 8.66707 4.33337C7.01801 4.33337 5.94493 5.11138 5.26916 5.97486C4.92797 6.41082 4.69005 6.86747 4.53835 7.25146ZM4.48165 5.35855C5.30589 4.30537 6.64947 3.33337 8.66707 3.33337C10.6847 3.33337 12.0283 4.30537 12.8525 5.35855C13.2613 5.88092 13.5442 6.42428 13.7259 6.88403C13.9009 7.32708 14.0004 7.74 14.0004 8.00004C14.0004 8.26008 13.9009 8.67301 13.7259 9.11605C13.5442 9.5758 13.2613 10.1192 12.8525 10.6415C12.0283 11.6947 10.6847 12.6667 8.66707 12.6667C6.64947 12.6667 5.30589 11.6947 4.48165 10.6415C4.07284 10.1192 3.78993 9.5758 3.6083 9.11605C3.43327 8.67301 3.33374 8.26008 3.33374 8.00004C3.33374 7.74 3.43327 7.32708 3.6083 6.88403C3.78993 6.42428 4.07284 5.88092 4.48165 5.35855Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66707 7.00004C8.11479 7.00004 7.66707 7.44776 7.66707 8.00004C7.66707 8.55233 8.11479 9.00004 8.66707 9.00004C9.21936 9.00004 9.66707 8.55233 9.66707 8.00004C9.66707 7.44776 9.21936 7.00004 8.66707 7.00004ZM6.66707 8.00004C6.66707 6.89547 7.5625 6.00004 8.66707 6.00004C9.77164 6.00004 10.6671 6.89547 10.6671 8.00004C10.6671 9.10461 9.77164 10 8.66707 10C7.5625 10 6.66707 9.10461 6.66707 8.00004Z",fill:"currentColor"})]}))}))},75779:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,a.jsx)("path",{d:"M8.66705 5.5C8.9432 5.5 9.16705 5.72386 9.16705 6V8C9.16705 8.27614 8.9432 8.5 8.66705 8.5C8.39091 8.5 8.16705 8.27614 8.16705 8V6C8.16705 5.72386 8.39091 5.5 8.66705 5.5Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M8.66703 11.3333C9.03522 11.3333 9.3337 11.0349 9.3337 10.6667C9.3337 10.2985 9.03522 10 8.66703 10C8.29884 10 8.00037 10.2985 8.00037 10.6667C8.00037 11.0349 8.29884 11.3333 8.66703 11.3333Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5935 2.69047C9.80011 1.10352 7.53887 1.10307 6.74495 2.68977L2.39727 11.3787C1.68083 12.8106 2.71895 14.5 4.32135 14.5H13.0128C14.6148 14.5 15.6529 12.8112 14.9372 11.3795L10.5935 2.69047ZM7.63925 3.13725C8.06446 2.28742 9.27407 2.28762 9.69902 3.13762L14.0427 11.8266C14.4275 12.5964 13.8681 13.5 13.0128 13.5H4.32135C3.46577 13.5 2.90635 12.5961 3.29157 11.8262L7.63925 3.13725Z",fill:"currentColor"})]}))}))},44579:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsx)(i.Z,(0,r.Z)((0,r.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,a.jsx)("path",{d:"M18.9789 5.31353C18.7628 4.51027 18.1295 3.87707 17.3264 3.66077C15.8591 3.25932 9.99001 3.25932 9.99001 3.25932C9.99001 3.25932 4.12113 3.25932 2.65388 3.64555C1.86619 3.86162 1.21742 4.51038 1.00136 5.31353C0.615234 6.78066 0.615234 9.8233 0.615234 9.8233C0.615234 9.8233 0.615234 12.8813 1.00136 14.3331C1.21765 15.1362 1.85074 15.7694 2.654 15.9857C4.13658 16.3873 9.99023 16.3873 9.99023 16.3873C9.99023 16.3873 15.8591 16.3873 17.3264 16.0011C18.1296 15.7849 18.7628 15.1517 18.9791 14.3485C19.3651 12.8813 19.3651 9.83875 19.3651 9.83875C19.3651 9.83875 19.3806 6.78066 18.9789 5.31353ZM8.12141 12.6342V7.01241L13.0019 9.8233L8.12141 12.6342Z",fill:"currentColor"})}))}))},87199:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(78118),a=n(29343);t.Z=o.memo((function(e){return(0,a.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 3.66663C5.30828 3.66663 3.66666 5.30825 3.66666 7.33329C3.66666 9.35834 5.30828 11 7.33332 11C9.35837 11 11 9.35834 11 7.33329C11 5.30825 9.35837 3.66663 7.33332 3.66663ZM2.66666 7.33329C2.66666 4.75596 4.75599 2.66663 7.33332 2.66663C9.91065 2.66663 12 4.75596 12 7.33329C12 9.91062 9.91065 12 7.33332 12C4.75599 12 2.66666 9.91062 2.66666 7.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.97977 9.97974C10.175 9.78448 10.4916 9.78448 10.6869 9.97974L13.1869 12.4797C13.3821 12.675 13.3821 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L9.97977 10.6868C9.78451 10.4916 9.78451 10.175 9.97977 9.97974Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 5.33329C7.60947 5.33329 7.83332 5.55715 7.83332 5.83329V8.83329C7.83332 9.10944 7.60947 9.33329 7.33332 9.33329C7.05718 9.33329 6.83332 9.10944 6.83332 8.83329V5.83329C6.83332 5.55715 7.05718 5.33329 7.33332 5.33329Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33332 7.33329C5.33332 7.05715 5.55718 6.83329 5.83332 6.83329H8.83332C9.10947 6.83329 9.33332 7.05715 9.33332 7.33329C9.33332 7.60944 9.10947 7.83329 8.83332 7.83329H5.83332C5.55718 7.83329 5.33332 7.60944 5.33332 7.33329Z",fill:"currentColor"})]}))}))},1773:function(e,t,n){"use strict";n.d(t,{pi:function(){return P},vF:function(){return M}});var r=n(4942),o=n(1413),i=n(28381),a=n(69186),s=n(37477),l=n(44827),c=n(97865),u=n(46448),d=n(82954),p=n.n(d),h=n(36262),f=n(65111),g=n(61325),m=n(32484),x=n(86278),v=n(23198),b=n(51598),j=n(40243),C=n(24910),y=n(50057),Z=n.n(y),k=n(38501),w=n(2066),T=n(64207),E=n(29343),S=Z()("electron"),P=function(e){var t=e.backgroundColor,n=(0,k.Z)();(0,w.C)({onChanged:n});var r=navigator.windowControlsOverlay;return S||r&&r.visible?(0,E.jsx)("div",{className:"title-bar-draggable-part",style:{height:38,backgroundColor:t,flexShrink:0}}):null},I=function(e){switch(e){case"small":return!1;case"medium":case"large":default:return"md";case"xlarge":return"lg"}},D={dialogContainer:{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",scrollbarWidth:"thin"},dialogContent:{overflowX:"hidden",paddingLeft:0,paddingRight:0},flexColumnBody:{display:"flex",flexDirection:"column"},flexBody:{display:"flex"},titleContainer:{paddingBottom:16,textAlign:"left",overflowWrap:"anywhere"},fixedContentContainer:{paddingBottom:8},actionsContainer:{paddingTop:24,paddingBottom:0,paddingLeft:0,paddingRight:0},actionsContainerWithSecondaryActions:{display:"flex",justifyContent:"space-between"},fullHeightModal:{minHeight:"calc(100% - 64px)"}},A=(0,a.Z)((function(e){return{paper:{"&:before":{content:'""',height:60,background:"repeating-linear-gradient(110deg, ".concat(e.palette.error.dark,", ").concat(e.palette.error.dark," 25px, ").concat(e.palette.error.main," 25px, ").concat(e.palette.error.main," 40px)")}}}})),L=(0,a.Z)({root:{"&::-webkit-scrollbar":{width:11},"&::-webkit-scrollbar-track":{background:"rgba(0, 0, 0, 0.04)",borderRadius:6},"&::-webkit-scrollbar-thumb":{border:"3px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:6}}}),M=m.Z;t.ZP=function(e){var t=e.onApply,n=e.secondaryActions,a=e.isDangerous,d=e.actions,m=e.open,y=e.onRequestClose,Z=e.maxWidth,k=e.title,w=e.fixedContent,S=e.children,M=e.flexColumnBody,F=e.flexBody,O=e.fullHeight,R=e.id,B=e.cannotBeDismissed,_=e.exceptionallyStillAllowRenderingInstancesEditors,N=e.noMobileFullScreen,U=i.useContext(h.ZP),H=i.useContext(C.Z),V=U.values.backdropClickBehavior,W=(0,u.L)(),z="small"===W,G=d&&d.filter(Boolean).length>0||n&&n.filter(Boolean).length>0,Y=z&&!N,q=A(),X=L(),J=i.useMemo((function(){return(0,E.jsxs)(i.Fragment,{children:[n&&(0,E.jsx)(g.pJ,{noMargin:!0,children:n},"secondary-actions"),d&&(0,E.jsx)(g.pJ,{noMargin:!0,children:d},"actions")]})}),[d,n]),K=M?D.flexColumnBody:F?D.flexBody:{},Q={paddingTop:k?0:16,paddingBottom:G?0:24},$=(0,o.Z)((0,o.Z)((0,o.Z)({},D.dialogContent),K),Q),ee=(0,o.Z)((0,o.Z)({},D.dialogContainer),{},{margin:Y?8:"".concat(16,"px ").concat(24,"px ").concat(24,"px ").concat(24,"px")}),te=i.useCallback((function(e,n){if(!B)if("escapeKeyDown"===n)y&&y();else if("backdropClick"===n)if("cancel"===V)y&&y();else if("apply"===V)t?t():y&&y();else if("nothing"===V)return}),[y,t,V,B]),ne=i.useCallback((function(e){if((0,f.W$)(e))return te(e,"escapeKeyDown"),void e.stopPropagation();if(t&&(0,f.Fc)(e)){e.stopPropagation();var n=document.activeElement;n&&n.blur(),t()}}),[te,t]);return(0,E.jsxs)(s.Z,{classes:a?q:void 0,open:m,onClose:te,fullWidth:!0,fullScreen:Y,className:p()((0,r.Z)({"safe-area-aware-container":Y},T.zL,_)),PaperProps:{id:R,style:(0,o.Z)({backgroundColor:H.dialog.backgroundColor},O?D.fullHeightModal:{})},maxWidth:void 0!==Z?Z:I(W),disableBackdropClick:!1,onKeyDown:ne,children:[Y&&(0,E.jsx)(P,{backgroundColor:H.titlebar.backgroundColor}),(0,E.jsxs)("div",{style:ee,children:[k&&(0,E.jsx)("div",{style:D.titleContainer,children:(0,E.jsxs)(j.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"flex-start",children:[(0,E.jsx)(x.Z,{noMargin:!0,size:"section-title",children:k}),y&&!B&&(0,E.jsx)(b.Z,{onClick:y,size:"small",disabled:B,children:(0,E.jsx)(v.Z,{})})]})}),w&&(0,E.jsx)("div",{style:D.fixedContentContainer,children:w}),(0,E.jsx)(c.Z,{classes:X,style:$,children:S}),G&&(0,E.jsx)(l.Z,{style:(0,o.Z)((0,o.Z)({},D.actionsContainer),n?D.actionsContainerWithSecondaryActions:{}),children:J})]})]})}},24830:function(e,t,n){"use strict";n(28381);var r=n(36262),o=n(6403),i=n(2066),a=n(29343);t.Z=function(e){var t=e.identifier,n=e.kind,s=e.children;return(0,a.jsx)(r.ZP.Consumer,{children:function(e){var r=e.values,l=e.showAlertMessage;return!r.hiddenAlertMessages[t]&&(0,a.jsx)(o.Z,{kind:n,children:s,onHide:function(){i.ZP.showConfirmDialog("Are you sure you want to hide this hint? You won't see it again, unless you re-activate it from the preferences.")&&l(t,!1)}})}})}},38589:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var r=n(1413),o=(n(28381),n(17777)),i=n(29343),a=function(e){var t=(0,o.DragSource)(e,{canDrag:function(e,t){var n=t.getItem(),r=e.canDrag||null;return!r||r(n)},beginDrag:function(e){return e.beginDrag()},endDrag:function(e,t){e.endDrag&&e.endDrag()}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((0,o.DropTarget)(e,{canDrop:function(e,t){var n=t.getItem();return n&&e.canDrop(n)},drop:function(e,t){t.didDrop()||e.drop()}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),isOverLazy:t.isOver({shallow:!1}),canDrop:t.canDrop()}}))((function(e){return(0,e.children)({connectDragSource:e.connectDragSource,connectDropTarget:e.connectDropTarget,connectDragPreview:e.connectDragPreview,isDragging:e.isDragging,isOver:e.isOver,isOverLazy:e.isOverLazy,canDrop:e.canDrop})})));return function(e){return(0,i.jsx)(t,(0,r.Z)({},e))}}},62572:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});n(28381);var r=n(43662),o=n(59863),i=n(29343),a={handle:{display:"flex",cursor:"move"},disabledHandle:{display:"flex",opacity:.4},handleColor:"#DDD"},s=function(e){return(0,i.jsx)("span",{style:e.disabled?a.disabledHandle:a.handle,children:(0,i.jsx)(r.Z,{htmlColor:e.color||a.handleColor})})},l=(0,o.SortableHandle)(s);t.Z=l},18624:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(28381),o=n(51598),i=n(23198),a=n(99855),s=n(29343),l={container:{padding:0,width:32,height:32},icon:{width:16,height:16}};function c(e){var t=r.useContext(a.DF).mosaicActions,n=r.useContext(a.Jy).mosaicWindowActions;return(0,s.jsx)(o.Z,{onClick:function(){t.remove(n.getPath())},style:l.container,children:(0,s.jsx)(i.Z,{htmlColor:"inherit",style:l.icon})})}},59936:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z},J:function(){return m}});var r=n(15671),o=n(43144),i=n(60136),a=n(29388),s=n(1413),l=n(36600),c=n(28381),u=n(99855),d=n(18624),p=n(24910),h=n(71046),f=n.n(h),g=(n(47021),n(29343)),m=function e(t,n){return!!t&&(t===n||!!t.first&&e(t.first,n)||!!t.second&&e(t.second,n))},x=function e(t,n,r,o,i){if(!t)return n;if("string"!==typeof t){if("end"===r&&t.second&&"string"!==typeof t.second)return(0,s.Z)((0,s.Z)({},t),{},{second:e(t.second,n,r,o,i)});if("start"===r&&t.first&&"string"!==typeof t.first)return(0,s.Z)((0,s.Z)({},t),{},{first:e(t.first,n,r,o,i)})}return{direction:"row"===i?"column":"row",first:"end"===r?t:n,second:"end"===r?n:t,splitPercentage:o}},v=function e(t,n,r){return t?"string"===typeof t?t===n?r:t:t===n?r:(0,s.Z)((0,s.Z)({},t),{},{first:e(t.first,n,r),second:e(t.second,n,r)}):t},b=function e(t,n){if(t){if("string"===typeof t)return t===n?null:t;if(t===n)return null;var r=e(t.first,n),o=e(t.second,n);return r&&o?(0,s.Z)((0,s.Z)({},t),{},{first:r,second:o}):r||o}return t},j=[(0,g.jsx)(d.Z,{},"close")],C=function(e){return(0,g.jsxs)("div",{className:"mosaic-preview",children:[(0,g.jsx)("div",{className:"mosaic-window-toolbar",children:(0,g.jsx)("div",{className:"mosaic-window-title",children:e.title})}),(0,g.jsx)("div",{className:"mosaic-window-body"})]})},y=function(e){return(0,g.jsx)(u.h1,(0,s.Z)((0,s.Z)({},e),{},{toolbarControls:e.toolbarControls||j,renderPreview:C}))},Z=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={mosaicNode:e.props.initialNodes},e.toggleEditor=function(t,n,r,o){return!!e.props.editors[t]&&(-1!==(0,u.fY)(e.state.mosaicNode).indexOf(t)?(e._onChanged(b(e.state.mosaicNode,t)),!1):e.openEditor(t,n,r,o))},e.openEditor=function(t,n,r,o){var i=e.props,a=i.editors,s=i.limitToOneSecondaryEditor,l=e.props.editors[t];if(!l)return!1;var c=(0,u.fY)(e.state.mosaicNode);if(-1!==c.indexOf(t))return!1;if(s&&"secondary"===l.type){var d=c.find((function(e){return"secondary"===a[e].type}));if(d)return e._onChanged(v(e.state.mosaicNode,d,t)),!0}return e._onChanged(x(e.state.mosaicNode,t,n,r,o)),!0},e.getOpenedEditorNames=function(){return(0,u.fY)(e.state.mosaicNode)},e._onChange=function(t){e.setState({mosaicNode:t})},e._onChanged=function(t){e.setState({mosaicNode:t},(function(){e._onOpenedEditorsChanged()}))},e._onOpenedEditorsChanged=function(){e.props.onOpenedEditorsChanged&&e.props.onOpenedEditorsChanged(),e._persistNodes()},e._persistNodes=f()((function(){e.props.onPersistNodes&&e.state.mosaicNode&&e.props.onPersistNodes(e.state.mosaicNode)}),2e3),e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.editors;return(0,g.jsx)(p.Z.Consumer,{children:function(n){return(0,g.jsx)(u.wB,{className:"".concat(n.mosaicRootClassName," mosaic-blueprint-theme mosaic-gd-theme"),renderTile:function(e,n){var r=t[e];return r?r.noTitleBar?r.renderEditor():(0,g.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,g.jsx)(y,{path:n,title:t._(r.title),toolbarControls:r.toolbarControls,children:r.renderEditor()})}}):(console.error("Trying to render un unknown editor: "+e),null)},value:e.state.mosaicNode,onChange:e._onChange,onRelease:e._onChanged})}})}}]),n}(c.Component)},86578:function(e,t,n){"use strict";var r=n(1413),o=(n(28381),n(1589)),i=n(29343),a={display:"flex",alignItems:"center",justifyContent:"center",flex:1,padding:10};t.Z=function(e){return(0,i.jsx)("div",{style:(0,r.Z)((0,r.Z)({},a),e.style),children:(0,i.jsx)(o.Z,{style:e.messageStyle,children:e.children})})}},68196:function(e,t,n){"use strict";n.d(t,{$:function(){return m}});var r=n(36600),o=(n(28381),n(89317)),i=n(61325),a=n(32484),s=n(67835),l=n(40243),c=n(4076),u=n(86278),d=n(36595),p=n(66789),h=n(1491),f=n(29343),g=function(e){var t=e.helpPagePath,n=e.helpPageAnchor;return(0,f.jsx)(c.Z,{label:(0,f.jsx)(r.Trans,{id:"Read the doc"}),helpPagePath:t,anchor:n})},m=function(e){return(0,f.jsx)(l.sg,{alignItems:"center",children:(0,f.jsx)(o.Z,{style:{maxWidth:"480px",whiteSpace:"normal"},children:(0,f.jsxs)(l.sg,{children:[(0,f.jsx)(u.Z,{size:"block-title",align:"center",children:e.title}),(0,f.jsx)(u.Z,{align:"center",noMargin:!0,children:e.description}),(0,f.jsx)(l.hS,{}),(0,f.jsxs)(i.ak,{alignItems:"center",noMargin:!0,children:[(0,f.jsxs)(i.ep,{noMargin:!0,children:[e.secondaryActionLabel&&e.onSecondaryAction&&(0,f.jsx)(s.Z,{label:e.secondaryActionLabel,primary:!0,onClick:e.onSecondaryAction,disabled:!!e.isLoading,leftIcon:e.secondaryActionIcon}),(0,f.jsx)(a.Z,{label:e.actionLabel,primary:!0,onClick:e.onAction,disabled:!!e.isLoading,icon:e.isLoading?(0,f.jsx)(p.Z,{size:24}):e.actionIcon?e.actionIcon:(0,f.jsx)(h.Z,{}),id:e.actionButtonId})]}),e.tutorialId?(0,f.jsx)(d.Z,{tutorialId:e.tutorialId,label:(0,f.jsx)(r.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,f.jsx)(g,{helpPagePath:e.helpPagePath,helpPageAnchor:e.helpPageAnchor})}):(0,f.jsx)(g,{helpPagePath:e.helpPagePath,helpPageAnchor:e.helpPageAnchor})]})]})})})}},61651:function(e,t,n){"use strict";var r=n(1413),o=n(36600),i=(n(28381),n(27734)),a=n(52975),s=n(41332),l=n(18930),c=n(32484),u=n(67724),d=n(2066),p=n(86278),h=n(40243),f=n(52578),g=n(48409),m=n(29343),x=function(e){var t=e.componentStack,n=e.error,r=e.title;return(0,m.jsxs)(s.Z,{children:[(0,m.jsxs)(h.x1,{children:[(0,m.jsx)(a.Z,{fontSize:"large"}),(0,m.jsx)(h.LZ,{}),(0,m.jsx)(p.Z,{size:"block-title",children:r})]}),(0,m.jsx)(l.Z,{}),(0,m.jsxs)(p.Z,{children:["Something wrong happened :(",(0,m.jsx)("br",{}),"Please ",(0,m.jsx)("b",{children:"backup your game file"})," and save your game to ensure that you don't lose anything."]}),(0,m.jsxs)(p.Z,{children:["The error was automatically reported.",(0,m.jsx)("br",{}),"To make sure it's fixed, you may report it on GitHub, the platform where SpeXEngine is developed:"]}),(0,m.jsx)(c.Z,{label:(0,m.jsx)(o.Trans,{id:"Report the issue on GitHub"}),onClick:function(){var e="\n=> Please write here a short description of when the error occurred and how to reproduce it.\nYou also may have to create an account on GitHub before posting.\n\nWhen you're ready, click on \"Submit new issue\". Don't change the rest of the message. Thanks!\n\n## Error stack (don't write anything here)\n```\n".concat(n?n.stack:"No error found","\n```\n\n## Component stack (don't write anything here)\n```\n").concat(t||"No component stack found","\n```\n\n## Other details\n* IDE version: ").concat((0,f.Us)(),"\n* Arch: ").concat((0,g.bj)(),",\n* Platform Name: ").concat((0,g.y8)(),",\n* System Version: ").concat((0,g.eP)(),",\n* User Agent: ").concat((0,g.ij)(),",\n        ");d.ZP.openExternalURL("https://github.com/SpaceXpanse/SpeXEngine/issues/new?body=".concat(encodeURIComponent(e),"&title=Crash%20while%20using%20an%20editor"))}})]})};t.C=function(e){return(0,m.jsx)(i.ZP,{FallbackComponent:function(t){return(0,m.jsx)(x,(0,r.Z)((0,r.Z)({},t),{},{title:e.title}))},onError:function(t,n){return function(e,t,n){console.error("Error caught by Boundary:",e,t),(0,u.pl)("Error caught by error boundary","error-boundary_".concat(n),{error:e,componentStack:t},"error-boundary-error")}(t,n,e.scope)},children:e.children})}},85076:function(e,t,n){"use strict";n.d(t,{G:function(){return u}});var r=n(36600),o=n(50057),i=n.n(o),a=n(1773),s=n(86278),l=n(29343),c=i()("electron"),u=function(){return c?null:(0,l.jsx)(a.ZP,{title:(0,l.jsx)(r.Trans,{id:"An external editor is opened."}),cannotBeDismissed:!0,noMobileFullScreen:!0,open:!0,maxWidth:"sm",id:"external-editor-opened-dialog",children:(0,l.jsx)(s.Z,{children:(0,l.jsx)(r.Trans,{id:"Save your changes or close the external editor to continue."})})})}},67835:function(e,t,n){"use strict";var r=n(1413),o=n(45987),i=n(28381),a=n(51535),s=n(40243),l=n(29343),c=["label","primary","leftIcon","rightIcon","keyboardFocused","disabled","id"],u=i.forwardRef((function(e,t){var n=e.label,i=e.primary,u=e.leftIcon,d=e.rightIcon,p=e.keyboardFocused,h=e.disabled,f=e.id,g=(0,o.Z)(e,c);return(0,l.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"outlined",size:"small",color:i?"secondary":"default",autoFocus:p,focusRipple:!0,disabled:h,id:f},g),{},{ref:t,children:[u,u&&n&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null,d&&n&&(0,l.jsx)(s.LZ,{}),d]}))}));t.Z=u},9383:function(e,t,n){"use strict";n(28381);var r=n(54168),o=n(89267),i=n(51535),a=n(40243),s=n(25638),l=n(29343),c=function(){throw new Error("This FlatButtonWithSplitMenu onClick should never be called")},u={mainButton:{flex:1},arrowDropDownButton:{minWidth:30,paddingLeft:0,paddingRight:0}};t.Z=function(e){var t=e.id,n=e.buildMenuTemplate,d=e.onClick,p=e.label,h=e.primary,f=e.icon,g=e.disabled;return(0,l.jsxs)(o.Z,{variant:"outlined",disableElevation:!0,color:h?"secondary":"default",disabled:g,size:"small",style:e.style,children:[(0,l.jsxs)(i.Z,{id:t,focusRipple:true,onClick:d,style:u.mainButton,children:[f,!!f&&!!p&&(0,l.jsx)(a.LZ,{}),p]}),(0,l.jsx)(r.Z,{passExtraProps:!0,element:(0,l.jsx)(i.Z,{onClick:c,focusRipple:true,style:u.arrowDropDownButton,children:(0,l.jsx)(s.Z,{})}),buildMenuTemplate:n})]})}},73298:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(59847),o=n.n(r),i=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:40}).size,n=o()(e.trim().toLowerCase());return"https://www.gravatar.com/avatar/".concat(n,"?s=").concat(t,"&d=retro")}},40243:function(e,t,n){"use strict";n.d(t,{LZ:function(){return s},XW:function(){return o},hS:function(){return l},sg:function(){return a},x1:function(){return i}});n(28381);var r=n(29343),o=8,i=function(e){return(0,r.jsx)("div",{id:e.id,style:{display:"flex",marginTop:e.noMargin?0:o,marginBottom:e.noMargin?0:o,alignItems:e.alignItems,justifyContent:e.justifyContent,flex:e.expand?1:void 0,overflow:e.overflow,minHeight:e.useFullHeight?"0":void 0},children:e.children})},a=function(e){return(0,r.jsx)("div",{id:e.id,style:{display:"flex",marginLeft:e.noMargin?0:o,marginRight:e.noMargin?0:o,flexDirection:"column",alignItems:e.alignItems||"stretch",justifyContent:e.justifyContent,flex:e.expand?1:void 0,minHeight:e.useFullHeight?"0":void 0,minWidth:e.noOverflowParent?0:void 0},children:e.children})},s=function(){return(0,r.jsx)("span",{style:{width:o,height:o,flexShrink:0}})},l=function(){return(0,r.jsx)("span",{style:{width:24,height:24,flexShrink:0}})}},4076:function(e,t,n){"use strict";var r=n(36600),o=(n(28381),n(42699)),i=n(2066),a=n(39949),s=n(46448),l=n(14932),c=n(86065),u=n(29343);t.Z=function(e){var t="small"===(0,s.L)();if(!e.helpPagePath)return null;var n=(0,a.vA)(e.helpPagePath,e.anchor);if(!n)return null;return t?(0,u.jsx)(l.Z,{size:"small",helpPagePath:e.helpPagePath}):(0,u.jsx)(o.Z,{onClick:function(){e.helpPagePath&&i.ZP.openExternalURL(n)},target:"_blank",label:e.label||(0,u.jsx)(r.Trans,{id:"Help"}),icon:(0,u.jsx)(c.Z,{})})}},14932:function(e,t,n){"use strict";n(28381);var r=n(51598),o=n(39949),i=n(2066),a=n(86065),s=n(29343);t.Z=function(e){var t=e.helpPagePath;return t?(0,s.jsx)(r.Z,{onClick:function(){return i.ZP.openExternalURL((0,o.vA)(t))},disabled:e.disabled,style:e.style,size:e.size,children:(0,s.jsx)(a.Z,{})}):null}},51598:function(e,t,n){"use strict";var r=n(1413),o=n(45987),i=n(28381),a=n(65512),s=n(3781),l=n(36600),c=n(67412),u=n(84361),d=n(24910),p=n(69186),h=n(29343),f=["selected","tooltip","acceleratorString","color","style"],g=(0,p.Z)({root:function(e){return e.color?{color:e.color}:void 0},label:function(e){return e.backgroundColor?{backgroundColor:e.backgroundColor,borderRadius:4}:void 0}}),m=i.forwardRef((function(e,t){var n=e.selected,p=e.tooltip,m=e.acceleratorString,x=e.color,v=e.style,b=(0,o.Z)(e,f),j=i.useContext(d.Z),C=g({color:n?j.iconButton.selectedColor:void 0,backgroundColor:n?j.iconButton.selectedBackgroundColor:void 0}),y=(0,h.jsx)(a.Z,(0,r.Z)((0,r.Z)({},b),{},{classes:C,style:v,color:n?"inherit":x||"secondary",ref:t}));return p&&!e.disabled?(0,h.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,h.jsx)(s.ZP,{title:t._(p)+(m?" "+(0,c.Q)(m):""),placement:"bottom",enterDelay:u.K,children:y})}}):y}));t.Z=m},33133:function(e,t,n){"use strict";n.d(t,{b:function(){return a},q:function(){return l}});var r=n(1413),o=(n(28381),n(23818)),i=n(29343),a={background:"linear-gradient(45deg, #FFFFFF33, #FFFFFF)",borderRadius:4},s={iconBackground:{flex:0,display:"flex",justifyContent:"center"},icon:a},l=function(e){var t=e.src,n=e.alt,a=e.size,l=a>24?4:2;return(0,i.jsx)("div",{style:s.iconBackground,children:(0,i.jsx)(o.W,{style:(0,r.Z)((0,r.Z)({},s.icon),{},{padding:l,width:a-2*l,height:a-2*l}),src:t,alt:n})})}},73693:function(e,t,n){"use strict";n(28381);var r=n(69186),o=n(19345),i=n(62802),a=n(66733),s=n(7172),l=n(3781),c=n(29343),u=(0,r.Z)({root:{cursor:"default"}}),d=(0,r.Z)({root:{display:"block"}}),p=(0,r.Z)({root:{padding:3}});t.Z=function(e){var t=e.id,n=e.onCheck,r=e.disabled,h=e.checked,f=e.label,g=e.uncheckedIcon,m=e.checkedIcon,x=e.tooltipOrHelperText,v=e.paddingSize,b=u(),j=d(),C=p(),y=(0,c.jsx)(s.Z,{id:t,disabled:r,checked:h,onChange:n?function(e){return n(e,e.target.checked)}:void 0,classes:"small"===v?C:null,icon:g,checkedIcon:m,color:"secondary"});return f?(0,c.jsxs)(i.Z,{classes:j,children:[(0,c.jsx)(o.Z,{control:y,label:f,classes:b}),x&&(0,c.jsx)(a.Z,{children:x})]}):x&&!r?(0,c.jsx)(l.ZP,{title:x,children:y}):y}},65111:function(e,t,n){"use strict";n.d(t,{DM:function(){return l},Fc:function(){return s},W$:function(){return r},Zq:function(){return i},_x:function(){return a},bo:function(){return u},ph:function(){return o},xj:function(){return c}});var r=function(e){return"Escape"===e.key},o=function(e){return"Enter"===e.key&&!e.shiftKey},i=function(e){return e.shiftKey&&"Enter"===e.key},a=function(e){return"Enter"===e.key||" "===e.key},s=function(e){return(e.metaKey||e.ctrlKey)&&"Enter"===e.key},l=function(e){return e.metaKey||e.ctrlKey},c=function(e){return"Tab"===e.key&&!e.shiftKey},u=function(e){return"Tab"===e.key&&e.shiftKey}},86268:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},r:function(){return a}});var r=n(15671),o=n(43144),i=n(48409),a=5,s=function(){function e(t){var n=this,o=t.isActive,i=t.shortcutCallbacks;(0,r.Z)(this,e),this._shiftPressed=!1,this._ctrlPressed=!1,this._altPressed=!1,this._metaPressed=!1,this._mouseMidButtonPressed=!1,this._spacePressed=!1,this.resetModifiers=function(){n._metaPressed=!1,n._altPressed=!1,n._ctrlPressed=!1,n._shiftPressed=!1,n._setMouseMidButtonPressed(!1),n._setSpacePressed(!1)},this._updateModifiersFromEvent=function(e){var t=n._metaPressed!==e.metaKey||n._altPressed!==e.altKey||n._ctrlPressed!==e.ctrlKey||n._shiftPressed!==e.shiftKey;return n._metaPressed=e.metaKey,n._altPressed=e.altKey,n._ctrlPressed=e.ctrlKey,n._shiftPressed=e.shiftKey,t},this._updateSpecialKeysStatus=function(e,t){32===e.which&&(n._shortcutCallbacks.onToggleGrabbingTool&&(e.preventDefault(),e.stopPropagation()),n._setSpacePressed(t))},this._isControlOrCmdPressed=function(){return n._metaPressed||n._ctrlPressed},this.onMouseDown=function(e){1===e.button?n._setMouseMidButtonPressed(!0):n._setMouseMidButtonPressed(!1)},this.onMouseUp=function(e){1===e.button&&n._setMouseMidButtonPressed(!1)},this.onDragOver=function(e){n._updateModifiersFromEvent(e)},this.onKeyUp=function(e){n._updateModifiersFromEvent(e),n._updateSpecialKeysStatus(e,!1)},this.onKeyDown=function(e){if(n._updateModifiersFromEvent(e),!n._isActive||n._isActive()){if(!e.target||!e.target.closest('textarea, input, [contenteditable="true"]')){n._updateSpecialKeysStatus(e,!0);var t=n._shortcutCallbacks,r=t.onDelete,o=t.onMove,i=t.onCopy,a=t.onCut,s=t.onPaste,l=t.onDuplicate,c=t.onUndo,u=t.onRedo,d=t.onSearch,p=t.onZoomOut,h=t.onZoomIn,f=t.onEscape,g=t.onShift1,m=t.onShift2,x=t.onShift3;o&&(38===e.which?(e.preventDefault(),n._shiftPressed?o(0,-5):o(0,-1)):40===e.which?(e.preventDefault(),n._shiftPressed?o(0,5):o(0,1)):37===e.which?(e.preventDefault(),n._shiftPressed?o(-5,0):o(-1,0)):39===e.which&&(e.preventDefault(),n._shiftPressed?o(5,0):o(1,0))),!r||8!==e.which&&46!==e.which||(e.preventDefault(),r()),i&&n._isControlOrCmdPressed()&&67===e.which&&(e.preventDefault(),i()),a&&n._isControlOrCmdPressed()&&88===e.which&&(e.preventDefault(),a()),s&&n._isControlOrCmdPressed()&&86===e.which&&(e.preventDefault(),s()),l&&n._isControlOrCmdPressed()&&68===e.which&&(e.preventDefault(),l()),(c||u)&&n._isControlOrCmdPressed()&&90===e.which&&(e.preventDefault(),e.shiftKey?u&&u():c&&c()),u&&n._isControlOrCmdPressed()&&89===e.which&&(e.preventDefault(),u()),d&&n._isControlOrCmdPressed()&&70===e.which&&(e.preventDefault(),d()),f&&27===e.which&&(e.preventDefault(),f()),p&&n._isControlOrCmdPressed()&&189===e.which&&(e.preventDefault(),p(e)),p&&109===e.which&&(e.preventDefault(),p(e)),h&&n._isControlOrCmdPressed()&&187===e.which&&(e.preventDefault(),h(e)),h&&107===e.which&&(e.preventDefault(),h(e)),g&&n._shiftPressed&&(49===e.which||97===e.which)&&(e.preventDefault(),g()),m&&n._shiftPressed&&(50===e.which||98===e.which)&&(e.preventDefault(),m()),x&&n._shiftPressed&&(51===e.which||99===e.which)&&(e.preventDefault(),x())}}},this._shortcutCallbacks=i,this._isActive=o}return(0,o.Z)(e,[{key:"shouldCloneInstances",value:function(){return this._isControlOrCmdPressed()}},{key:"shouldMultiSelect",value:function(){return this._shiftPressed}},{key:"shouldFollowAxis",value:function(){return this._shiftPressed}},{key:"shouldNotSnapToGrid",value:function(){return this._altPressed}},{key:"shouldResizeProportionally",value:function(){return this._shiftPressed}},{key:"shouldScrollHorizontally",value:function(){return this._altPressed}},{key:"shouldMoveView",value:function(){return this._spacePressed||this._mouseMidButtonPressed}},{key:"_setSpacePressed",value:function(e){var t=this.shouldMoveView();this._spacePressed=e,this._callOnToggleGrabbingToolIfNeeded(t)}},{key:"_setMouseMidButtonPressed",value:function(e){var t=this.shouldMoveView();this._mouseMidButtonPressed=e,this._callOnToggleGrabbingToolIfNeeded(t)}},{key:"_callOnToggleGrabbingToolIfNeeded",value:function(e){var t=this.shouldMoveView();if(t!==e){var n=this._shortcutCallbacks.onToggleGrabbingTool;n&&n(t)}}},{key:"shouldZoom",value:function(e){return!(!e.ctrlKey&&!e.metaKey)||((0,i.z1)()?this._isControlOrCmdPressed():!this._isControlOrCmdPressed()&&!this._altPressed&&!this._shiftPressed)}},{key:"shouldIgnoreDoubleClick",value:function(){return this._metaPressed||this._altPressed||this._ctrlPressed||this._shiftPressed}}]),e}()},61325:function(e,t,n){"use strict";n.d(t,{ad:function(){return u},ak:function(){return h},ep:function(){return p},pJ:function(){return d}});var r=n(1413),o=n(28381),i=n(40243),a=n(46448),s=n(29343),l={flexShrink:0},c={filledTextFieldWithLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:15,marginLeft:8}),filledTextFieldWithoutLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:6,marginLeft:8}),standardTextFieldWithLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:17,marginLeft:8}),standardTextFieldWithoutLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:0,marginLeft:8})},u=function(e){var t=e.margin,n=e.noFloatingLabelText,r=e.renderTextField,o=e.renderButton;return(0,s.jsxs)(p,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[r(),o("none"===t?n?c.standardTextFieldWithoutLabelRightButtonMargins:c.standardTextFieldWithLabelRightButtonMargins:n?c.filledTextFieldWithoutLabelRightButtonMargins:c.filledTextFieldWithLabelRightButtonMargins)]})},d=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,a=e.expand,l=e.noMargin,c=e.children,u=e.useLargeSpacer,d=e.overflow,p=!0;return(0,s.jsx)(i.x1,{id:t,alignItems:n,justifyContent:r,expand:a,noMargin:l,overflow:d,children:o.Children.map(c,(function(e,t){if(!e)return null;var n=!p;return p=!1,(0,s.jsxs)(o.Fragment,{children:[n&&(u?(0,s.jsx)(i.hS,{}):(0,s.jsx)(i.LZ,{})),e]})}))})},p=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,o=e.expand,i=e.noMargin,l=e.noColumnMargin,c=e.width,u=e.useLargeSpacer,p=e.children,f=(0,a.L)();return"small"===c||"small"===f?(0,s.jsx)(h,{id:t,noMargin:i||l,expand:!0,useLargeSpacer:u,children:p}):(0,s.jsx)(d,{id:t,alignItems:n,justifyContent:r,expand:o,noMargin:i,useLargeSpacer:u,children:p})},h=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,a=e.expand,l=e.noMargin,c=e.children,u=e.noOverflowParent,d=e.useFullHeight,p=e.useLargeSpacer,h=!0;return(0,s.jsx)(i.sg,{id:t,alignItems:n,justifyContent:r,expand:a,noMargin:l,noOverflowParent:u,useFullHeight:d,children:o.Children.map(c,(function(e,t){if(!e)return null;var n=!h;return h=!1,(0,s.jsxs)(o.Fragment,{children:[n&&(p?(0,s.jsx)(i.hS,{}):(0,s.jsx)(i.LZ,{})),e]})}))})}},63854:function(e,t,n){"use strict";n(28381);var r=n(66789),o=n(29343),i={progress:{marginRight:8,verticalAlign:"middle"}};t.Z=function(e){var t=e.children,n=e.isLoading;return(0,o.jsxs)("span",{children:[n&&(0,o.jsx)(r.Z,{size:18,style:i.progress}),t]})}},64480:function(e,t,n){"use strict";var r=n(1413),o=(n(28381),n(63307)),i=n(29343);t.Z=function(e){return(0,i.jsx)(o.Z,{color:"secondary",style:(0,r.Z)({flex:1},e.style),variant:e.variant,value:e.value})}},96591:function(e,t,n){"use strict";var r=n(28381),o=n(38742),i=n(24910),a=n(69186),s=n(29343);t.Z=function(e){var t,n,l=r.useContext(i.Z),c=(t=l,n=!!e.disabled,(0,a.Z)({root:{color:t.link.color.default,textDecoration:"underline","&:hover":{color:n?void 0:t.link.color.hover,cursor:n?"default":"pointer"},"&:focus":{color:n?void 0:t.link.color.hover}}})());return(0,s.jsx)(o.Z,{color:"secondary",href:e.href,onClick:function(t){t.preventDefault(),e.disabled||e.onClick()},classes:c,children:e.children})}},74044:function(e,t,n){"use strict";var r=n(28381),o=n(23818),i=n(24910),a=n(29343);function s(e){var t=r.useContext(i.Z),n=t.palette.type,s=e.src,l=e.tooltip,c=e.disabled,u=e.isGDevelopIcon,d=e.cssAnimation,p=e.useExactIconSize,h=void 0!==e.iconWidth?e.iconWidth:e.iconSize,f=void 0!==e.iconHeight?e.iconHeight:e.iconSize,g=h>40?16:0,m=s.startsWith("data:image/svg+xml")||s.includes("_black"),x=void 0;"dark"===n&&m?x="grayscale(1) invert(1)":u&&!m&&(x=c?"grayscale(100%)":t.gdevelopIconsCSSFilter);var v={maxWidth:p?void 0:h,maxHeight:p?void 0:f,width:p?h:void 0,height:p?f:void 0,verticalAlign:"middle",animation:d,filter:x};return(0,a.jsx)("div",{style:{width:h,height:f,lineHeight:"".concat(f,"px"),textAlign:"center",paddingRight:g},children:u?(0,a.jsx)("img",{title:l,alt:l,src:s,style:v}):(0,a.jsx)(o.W,{title:l,alt:l,src:s,style:v})})}var l=r.memo(s);t.Z=l},73818:function(e,t,n){"use strict";var r=n(1413),o=n(15861),i=n(29439),a=n(64687),s=n.n(a),l=n(36600),c=n(28381),u=n(29277),d=n(50057),p=n.n(d),h=n(67835),f=n(29343),g=p()("electron"),m=p()("@electron/remote"),x=m?m.dialog:null,v={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};t.Z=function(e){var t=e.type,n=e.value,a=e.onChange,d=e.defaultPath,p=e.fullWidth,b=c.useState(n),j=(0,i.Z)(b,2),C=j[0],y=j[1],Z=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,o,i,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.message,x&&g){e.next=3;break}return e.abrupt("return");case 3:return o=m.getCurrentWindow(),e.next=6,x.showOpenDialog(o,{title:n,properties:["openDirectory","createDirectory"],message:r,defaultPath:d});case 6:if(i=e.sent,(l=i.filePaths)&&l.length){e.next=10;break}return e.abrupt("return");case 10:c=l[0],a(c),y(c);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){a(C)};return(0,f.jsx)(l.I18n,{children:function(e){var n=function(e){return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"default-workspace"===t?{title:e._({id:"Choose a workspace folder"}),message:e._({id:"Choose where to create your projects"})}:{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}}(e.i18n);return(0,f.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},v.container),{},{width:p?"100%":void 0}),children:[(0,f.jsx)(u.ZP,{margin:"dense",style:v.textField,type:"text",hintText:n.title,value:C,onChange:function(e,t){return y(t)},onBlur:k}),(0,f.jsx)(h.Z,{label:(0,f.jsx)(l.Trans,{id:"Choose folder"}),style:v.button,onClick:function(){return Z(n)}})]})}})}},32832:function(e,t,n){"use strict";n.d(t,{r:function(){return m}});var r=n(4942),o=n(1413),i=n(45987),a=n(28381),s=n(15092),l=n(62407),c=n(36600),u=n(24910),d=n(82954),p=n.n(d),h=n(2066),f=n(29343),g=["node"],m=function(e){var t,n=a.useContext(u.Z),d=a.useMemo((function(){return t=e.isStandaloneText||!1,n=e.allowParagraphs||!1,{a:function(e){return e.href?(0,f.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(t){t.preventDefault(),h.ZP.openExternalURL(e.href)},children:e.children}):e.children},p:function(e){return t||n?(0,f.jsx)("p",{children:e.children}):e.children},img:function(e){e.node;var t=(0,i.Z)(e,g);return(0,f.jsx)("img",(0,o.Z)({style:{display:"flex"}},t))}};var t,n}),[e.isStandaloneText,e.allowParagraphs]),m=(0,f.jsx)(c.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(s.D,{components:d,remarkPlugins:[l.Z],children:e.translatableSource?n._(e.translatableSource):e.source})}}),x=p()((t={"gd-markdown":!0},(0,r.Z)(t,n.markdownRootClassName,!0),(0,r.Z)(t,"standalone-text-container",e.isStandaloneText),t));return e.isStandaloneText?(0,f.jsx)("div",{className:x,children:m}):(0,f.jsx)("span",{className:x,children:m})}},64207:function(e,t,n){"use strict";n.d(t,{BI:function(){return r},EU:function(){return i},NL:function(){return s},Rz:function(){return l},h$:function(){return u},le:function(){return c},yP:function(){return a},zL:function(){return o}});var r=1501,o="allow-rendering-instances",i=function(){var e=document.querySelector('body > div[role="presentation"].MuiDialog-root');return!!e&&!e.classList.contains(o)},a=function(e,t){return!("DIV"!==e.tagName||"presentation"!==e.getAttribute("role"))&&(!(!t||!t.isVisible)&&!e.getAttribute("aria-hidden"))},s=function(e){var t=e.attributes.getNamedItem("type");return t&&"checkbox"===t.value&&"indeterminate"in e.dataset},l=function(e){var t=e.parentElement;if(t){var n=t.parentElement;return!!n&&n.classList.contains("Mui-checked")}return!0},c=function(e){try{return a(e[e.length-5],{isVisible:!0})}catch(t){return console.error("An error occurred when determining if path ".concat(e&&e.join?e.join(" > "):"[not serializable]"," leads to a dialog"),t),!1}},u=function(e){return e.classList.contains("MuiInputBase-root")}},32628:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r=n(1413),o=n(29439),i=n(28381),a=n(36600),s=n(48556),l=n(89765),c=n(15671),u=n(43144),d=n(50057),p=n.n(d),h=p()("electron"),f=p()("@electron/remote"),g=function(){function e(){(0,c.Z)(this,e)}return(0,u.Z)(e,[{key:"buildFromTemplate",value:function(e){this.menuTemplate=e}},{key:"showMenu",value:function(e){if(h){var t=f.Menu,n=f.getCurrentWindow();this.menu=t.buildFromTemplate(this.menuTemplate),this.menu.popup({window:n,x:Math.round(e.left),y:Math.round(e.top+e.height),async:!0})}}},{key:"getMenuProps",value:function(){return{open:!1}}}]),e}(),m=n(15861),x=n(64687),v=n.n(x),b=n(58369),j=n(59239),C=n(67413),y=n(81666),Z=n(99415),k=n(18930),w=n(17358),T=n(67412),E=n(84900),S=n(29343),P=(0,w.Z)({backdropRootForMouse:{pointerEvents:"none"}}),I={divider:{marginLeft:16,marginRight:16},labelWithAccelerator:{width:"100%",display:"flex",justifyContent:"space-between"},accelerator:{opacity:.65,marginLeft:16},menuItemWithSubMenu:{height:32,justifyContent:"space-between"},menuItem:{height:32,paddingLeft:16,paddingRight:16}},D=function(e){var t=e.item,n=e.buildFromTemplate,r=P(),a=i.useState(null),c=(0,o.Z)(a,2),u=c[0],d=c[1],p=i.useRef(!1),h=i.useState(null),f=(0,o.Z)(h,2),g=f[0],m=f[1];function x(){m(null)}function v(e){"mouse"===e.pointerType&&(p.current=!1,setTimeout((function(){p.current||x()}),75))}return(0,S.jsxs)(i.Fragment,{children:[(0,S.jsxs)(b.Z,{dense:!0,style:I.menuItemWithSubMenu,disabled:!1===t.enabled,onClick:function(e){!1!==t.enabled&&(g||m(e.currentTarget))},onPointerOver:function(e){!1!==t.enabled&&(d("mouse"===e.pointerType?"mouse":"other"),"mouse"===e.pointerType&&(g||m(e.currentTarget)))},onPointerLeave:v,children:[t.label,(0,S.jsx)(E.Z,{})]},t.label),(0,S.jsx)(s.Z,{open:!!g,anchorEl:g,onClose:x,TransitionComponent:l.Z,MenuListProps:{onPointerEnter:function(){p.current=!0},onPointerLeave:v,style:{pointerEvents:"auto"}},getContentAnchorEl:null,anchorOrigin:{horizontal:"right",vertical:"top"},PopoverClasses:{root:"mouse"===u?r.backdropRootForMouse:void 0},children:n(t.submenu)})]})},A=function(){function e(t){var n=t.onClose;(0,c.Z)(this,e),this._onClose=n}return(0,u.Z)(e,[{key:"buildFromTemplate",value:function(e,t){var n=this;return e.map((function(e,r){if(!1===e.visible)return null;var o=e.accelerator?(0,T.Q)(e.accelerator):void 0;return"separator"===e.type?(0,S.jsx)(k.Z,{style:I.divider},"separator"+r):"checkbox"===e.type?(0,S.jsxs)(b.Z,{dense:!0,checked:e.checked,disabled:!1===e.enabled,onClick:function(){var r=(0,m.Z)(v().mark((function r(o){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.stopPropagation(),!1!==e.enabled){r.next=3;break}return r.abrupt("return");case 3:if(!e.click){r.next=9;break}return r.next=6,e.click();case 6:if("checkbox"!==e.type){r.next=9;break}return t&&t(),r.abrupt("return");case 9:n._onClose();case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),style:I.menuItem,children:[(0,S.jsx)(y.Z,{children:e.checked?(0,S.jsx)(j.Z,{fontSize:"small"}):(0,S.jsx)(C.Z,{fontSize:"small"})}),(0,S.jsx)(Z.Z,{primary:e.label})]},"checkbox"+e.label):e.submenu?(0,S.jsx)(D,{item:e,buildFromTemplate:function(e){return n.buildFromTemplate(e,t)}},"submenu"+e.label):(0,S.jsx)(b.Z,{dense:!0,disabled:!1===e.enabled,onClick:function(t){t.stopPropagation(),!1!==e.enabled&&e.click&&(e.click(),n._onClose())},style:I.menuItem,children:o?(0,S.jsxs)("div",{style:I.labelWithAccelerator,children:[(0,S.jsx)("span",{children:e.label}),(0,S.jsx)("span",{style:I.accelerator,children:o})]}):e.label},"item"+e.label)})).filter(Boolean)}},{key:"showMenu",value:function(){}},{key:"getMenuProps",value:function(){return{}}}]),e}(),L=n(38501),M=p()("electron"),F=i.forwardRef((function(e,t){var n=i.useState([0,0]),c=(0,o.Z)(n,2),u=c[0],d=c[1],p=i.useState(!1),h=(0,o.Z)(p,2),f=h[0],g=h[1],m=i.useState({}),x=(0,o.Z)(m,2),v=x[0],b=x[1],j=(0,L.Z)(),C=new A({onClose:function(){return g(!1)}}),y=function(e,t,n){d([e,t]),b(n),g(!0)};return i.useImperativeHandle(t,(function(){return{open:y}})),f?(0,S.jsx)(a.I18n,{children:function(t){var n=t.i18n;return(0,S.jsx)(s.Z,(0,r.Z)((0,r.Z)({open:!0,anchorPosition:{left:u[0],top:u[1]},anchorReference:"anchorPosition",onClose:function(e,t){"backdropClick"===t&&e.stopPropagation(),g(!1)},TransitionComponent:l.Z},C.getMenuProps()),{},{children:C.buildFromTemplate(e.buildMenuTemplate(n,v),j)}))}}):null})),O=i.forwardRef((function(e,t){var n=new g,r=function(t,r,o){n.buildFromTemplate(e.buildMenuTemplate(e.i18n,o)),n.showMenu({left:t||0,top:r||0,width:0,height:0})};return i.useImperativeHandle(t,(function(){return{open:r}})),null})),R=M?i.forwardRef((function(e,t){var n=i.useRef(null);return i.useImperativeHandle(t,(function(){return{open:function(e,t,r){n.current&&n.current.open(e,t,r)}}})),(0,S.jsx)(a.I18n,{children:function(t){var o=t.i18n;return(0,S.jsx)(O,(0,r.Z)((0,r.Z)({},e),{},{i18n:o,ref:n}))}})})):F},54168:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(1413),o=n(45987),i=n(15671),a=n(43144),s=n(97326),l=n(60136),c=n(29388),u=n(28381),d=n(1412),p=n(32628),h=n(29343),f=["element","buildMenuTemplate","openMenuWithSecondaryClick","passExtraProps"],g=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).open=function(t){t&&t.stopPropagation&&t.stopPropagation();var n=(0,s.Z)(e)._contextMenu;if(n){var r=d.findDOMNode(e._wrappedElement);if(r instanceof HTMLElement){var o=r.getBoundingClientRect();n.open(Math.round(o.left+o.width/2),Math.round(o.top+o.height))}}},e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.element,i=t.buildMenuTemplate,a=t.openMenuWithSecondaryClick,s=t.passExtraProps,l=(0,o.Z)(t,f);return(0,h.jsxs)(u.Fragment,{children:[u.cloneElement(n,(0,r.Z)((0,r.Z)({onContextMenu:this.open},a?{}:{onClick:this.open}),{},{ref:function(t){return e._wrappedElement=t}},s?l:{})),(0,h.jsx)(p.Z,{ref:function(t){return e._contextMenu=t},buildMenuTemplate:i})]})}}]),n}(u.Component)},22537:function(e,t,n){"use strict";var r=n(28381),o=n(51535),i=n(53385),a=n(65570),s=n(24910),l=n(29343);t.Z=function(e){var t=e.visible,n=e.touchScreenMessage,c=e.message,u=e.hide,d=e.actionLabel,p=e.onActionClick,h=e.duration,f=void 0===h?3e3:h,g=r.useContext(s.Z),m=(0,a.BF)();return r.useEffect((function(){if(t){var e=setTimeout((function(){u()}),f);return function(){return clearTimeout(e)}}}),[t,u,f]),(0,l.jsx)(i.Z,{open:t,message:"touch"===m&&n?n:c,action:d&&p?(0,l.jsx)(o.Z,{color:"light"===g.palette.type?"secondary":"primary",size:"small",onClick:p,children:d}):null})}},94854:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(1413),o=(n(28381),n(86278)),i=n(29343),a={display:"flex",alignItems:"center",paddingLeft:8,paddingRight:8},s={marginRight:4},l={marginLeft:4,marginRight:4},c=function(e){var t=e.children,n=e.firstChild;return(0,i.jsx)(o.Z,{noShrink:!0,style:n?s:l,children:t})};t.Z=function(e){var t=e.justifyContent,n=e.children,o=e.noPadding;return(0,i.jsx)("div",{style:(0,r.Z)((0,r.Z)((0,r.Z)({},a),o?{padding:0}:{}),{},{height:32,justifyContent:t}),children:n})}},20914:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(1413),o=n(28381),i=n(32694),a=n(24910),s=n(29343),l=function(e,t){return"dark"===t?e.paper.backgroundColor.dark:"medium"===t?e.paper.backgroundColor.medium:e.paper.backgroundColor.light};t.Z=function(e){var t=e.id,n=e.children,c=e.background,u=e.elevation,d=e.variant,p=e.style,h=e.square,f=o.useContext(a.Z),g=l(f,c);return(0,s.jsx)(i.Z,{id:t,variant:d,elevation:u||0,style:(0,r.Z)({backgroundColor:g},p),square:!!h,children:n})}},75383:function(e,t,n){"use strict";var r=n(36600),o=(n(28381),n(40243)),i=n(32484),a=n(86578),s=n(61325),l=n(29343);t.Z=function(e){var t=e.onRetry,n=e.children;return(0,l.jsx)(o.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,l.jsx)(o.x1,{noMargin:!0,children:(0,l.jsxs)(s.ak,{noMargin:!0,alignItems:"center",children:[(0,l.jsx)(a.Z,{children:n}),(0,l.jsx)(o.x1,{noMargin:!0,children:t&&(0,l.jsx)(i.Z,{primary:!0,label:(0,l.jsx)(r.Trans,{id:"Retry"}),onClick:t})})]})})})}},78081:function(e,t,n){"use strict";var r=n(1413),o=(n(28381),n(66789)),i=n(29343),a={display:"flex",alignItems:"center",justifyContent:"center",flex:1,padding:10};t.Z=function(e){return(0,i.jsx)("div",{style:(0,r.Z)((0,r.Z)({},a),e.style),children:(0,i.jsx)(o.Z,{size:40})})}},41332:function(e,t,n){"use strict";n(28381);var r=n(20914),o=n(29343);t.Z=function(e){return(0,o.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(r.Z,{elevation:3,style:{padding:10,margin:5},background:"dark",children:e.children})})}},32484:function(e,t,n){"use strict";var r=n(1413),o=n(45987),i=n(28381),a=n(51535),s=n(40243),l=n(29343),c=["label","primary","icon","disabled","style"],u=i.forwardRef((function(e,t){var n=e.label,i=e.primary,u=e.icon,d=e.disabled,p=e.style,h=(0,o.Z)(e,c);return(0,l.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"contained",size:"small",disableElevation:!0,color:i?"primary":"default",focusRipple:!0,disabled:d,style:p||!n?(0,r.Z)({minWidth:n?void 0:0},p):void 0},h),{},{ref:t,children:[u,!!u&&!!n&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null]}))}));t.Z=u},57244:function(e,t,n){"use strict";n(28381);var r=n(54168),o=n(89267),i=n(51535),a=n(40243),s=n(25638),l=n(29343),c=function(){throw new Error("This RaisedButtonWithSplitMenu onClick should never be called")},u={mainButton:{flex:1},arrowDropDownButton:{minWidth:30,paddingLeft:0,paddingRight:0}};t.Z=function(e){var t=e.id,n=e.buildMenuTemplate,d=e.onClick,p=e.label,h=e.icon,f=e.disabled;return(0,l.jsxs)(o.Z,{variant:"contained",disableElevation:!0,color:"primary",disabled:f,size:"small",style:e.style,children:[(0,l.jsxs)(i.Z,{id:t,focusRipple:true,onClick:d,style:u.mainButton,children:[h,!!h&&!!p&&(0,l.jsx)(a.LZ,{}),p]}),(0,l.jsx)(r.Z,{passExtraProps:!0,element:(0,l.jsx)(i.Z,{onClick:c,focusRipple:true,style:u.arrowDropDownButton,children:(0,l.jsx)(s.Z,{})}),buildMenuTemplate:n})]})}},46448:function(e,t,n){"use strict";n.d(t,{I:function(){return i},L:function(){return a}});n(28381);var r=n(38501),o=n(51265),i=function(e){return(0,e.children)(a())},a=function(){return(0,o.Z)((0,r.Z)()),"undefined"===typeof window?"medium":window.innerWidth<500||window.innerHeight<500?"small":window.innerWidth<1150?"medium":window.innerWidth<1500?"large":"xlarge"}},65570:function(e,t,n){"use strict";n.d(t,{BF:function(){return a},bX:function(){return s},wh:function(){return i}});n(28381);var r=!1,o=!1;"undefined"!==typeof window&&(window.addEventListener("touchstart",(function e(){console.info("Touch detected, considering the screen as touch enabled."),r=!0,window.removeEventListener("touchstart",e,!1)}),!1),window.addEventListener("pointermove",(function e(t){console.info("Pointer move detected."),"mouse"===t.pointerType&&(console.info("Pointer type is mouse, considering the device is a desktop/laptop computer."),o=!0),window.removeEventListener("pointermove",e,!1)}),!1));var i=function(e){return(0,e.children)(a())},a=function(){return"undefined"===typeof window?"normal":r?"touch":"normal"},s=function(){return!("touch"===a()&&!o)}},2632:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(1412),a=n(16792),s=n(29343),l={flex:1,scrollbarWidth:"thin"};t.Z=o.forwardRef((function(e,t){var n=e.id,c=e.data,u=e.children,d=e.autoHideScrollbar,p=e.style,h=e.onScroll,f=o.useRef(null);o.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=f.current;if(!e)return 0;var t=e.getBoundingClientRect().top;return e.scrollTop+t},scrollTo:function(e){var t=f.current;if(t){var n=i.findDOMNode(e);if(n instanceof HTMLElement){var r=n.getBoundingClientRect().top,o=t.getBoundingClientRect().top;t.scrollTop+=r-o}else console.error("Tried to scroll to something that is not a HTMLElement")}},scrollToPosition:function(e){var t=f.current;if(t){var n=t.getBoundingClientRect().top;t.scrollTop=e-n}},scrollToBottom:function(){var e=f.current;e&&(e.scrollTop=e.scrollHeight)}}}));var g=o.useCallback((function(){if(h){var e=f.current;if(e){var t=e.getBoundingClientRect().top;h(e.scrollTop+t)}}}),[h]);return(0,s.jsx)("div",(0,r.Z)((0,r.Z)({id:n},(0,a.Y)(c)),{},{style:(0,r.Z)((0,r.Z)({},l),{},{overflowY:d?"auto":"scroll"},p),onScroll:g,ref:f,children:u}))}))},81442:function(e,t,n){"use strict";n.d(t,{T:function(){return g},m:function(){return f}});var r=n(37762),o=n(29439),i=n(36600),a=n(28381),s=n(65522),l=n.n(s),c=n(73693),u=n(61325),d=n(78081),p=n(86578),h=n(29343),f=function(){var e=a.useState(null),t=(0,o.Z)(e,2),n=t[0],i=t[1],s=a.useState((function(){return new Set})),l=(0,o.Z)(s,2),c=l[0],u=l[1];return{chosenCategory:n,setChosenCategory:a.useCallback((function(e){if(e){var t,n=new Set,o=(0,r.Z)(c.keys());try{for(o.s();!(t=o.n()).done;){var a=t.value;e.node.allChildrenTags.includes(a)&&n.add(a)}}catch(s){o.e(s)}finally{o.f()}u(n),i(e)}else i(null)}),[c]),chosenFilters:c,addFilter:function(e){var t=new Set(c);t.add(e),u(t)},removeFilter:function(e){var t=new Set(c);t.delete(e),u(t)}}},g=function(e){var t=e.filtersState,n=e.allFilters,r=e.error;if(!n)return(0,h.jsx)(d.Z,{});if(r)return null;var o=t.chosenCategory?t.chosenCategory.node.allChildrenTags:n.defaultTags;return(0,h.jsx)(u.ak,{children:o?o.length?o.map((function(e){return(0,h.jsx)(c.Z,{label:l()(e),checked:t.chosenFilters.has(e),onCheck:function(){t.chosenFilters.has(e)?t.removeFilter(e):t.addFilter(e)}},e)})):(0,h.jsx)(p.Z,{children:(0,h.jsx)(i.Trans,{id:"No filters in this category."})}):(0,h.jsx)(p.Z,{children:(0,h.jsx)(i.Trans,{id:"Choose a category to display filters"})})})}},49819:function(e,t,n){"use strict";n.d(t,{az:function(){return f},hM:function(){return p}});var r=n(29439),o=n(37762),i=n(15671),a=n(43144),s=n(28381),l=n(16243),c=n.n(l),u=n(92417),d=n.n(u),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;(0,i.Z)(this,e),this.tags=t}return(0,a.Z)(e,[{key:"getPertinence",value:function(e){var t=this;return 0===this.tags.size||e.tags.some((function(e){return t.tags.has(e)}))?1:0}},{key:"hasFilters",value:function(){return this.tags.size>0}}]),e}(),h=function(e,t,n,r){if(!e)return null;var i=performance.now(),a=e.filter((function(e){if(!t)return!0;if(t&&!e.tags)return!1;if(!(t.node.isTagContainerOnly||e.tags&&e.tags.some((function(e){return e===t.node.name}))))return!1;var n,r=(0,o.Z)(t.parentNodes);try{var i=function(){var t=n.value;return t.isTagContainerOnly?{v:!0}:e.tags&&e.tags.some((function(e){return e===t.name}))?void 0:{v:!1}};for(r.s();!(n=r.n()).done;){var a=i();if("object"===typeof a)return a.v}}catch(s){r.e(s)}finally{r.f()}return!0})).filter((function(e){return!n||0===n.size||e.tags&&e.tags.some((function(e){return n.has(e)}))})),s=a;if(r){var l=1,c=0,u=a.map((function(e){var t,n=1,i=(0,o.Z)(r);try{for(i.s();!(t=i.n()).done;){if(0===(n*=t.value.getPertinence(e)))return null}}catch(a){i.e(a)}finally{i.f()}return l=Math.min(l,n),c=Math.max(c,n),{pertinence:n,searchItem:e}})).filter(Boolean);!function(e,t,n,r){if(!(n>=r))for(var o=e.length-1,i=.5;i>1/128&&o>0;i/=2)for(var a=n+(r-n)*(1-i),s=-1,l=o+1;;){do{s++}while(s<o&&t(e[s])>a);if(s===o)break;do{l--}while(l>0&&t(e[l])<a);if(0===l)return;if(s>=l){o=l;break}var c=e[s];e[s]=e[l],e[l]=c}}(u,(function(e){return e.pertinence}),l,c),s=u.map((function(e){return e.searchItem}))}var d=performance.now()-i;return console.info("Filtered items by category/filters in ".concat(d.toFixed(3),"ms.")),s},f=function(e,t,n,o,i,a){var l=s.useRef(null),u=s.useState(null),p=(0,r.Z)(u,2),f=p[0],g=p[1],m=s.useMemo((function(){return e?c()(Object.keys(e).map((function(t){return e[t]}))):null}),[e]),x=s.useMemo((function(){return e?Object.keys(e).map((function(t){return e[t]})):null}),[e]);s.useEffect((function(){if(e){var n=performance.now();l.current&&(l.current.terminate(),l.current=null);try{var r=new(d()),o=Object.keys(e);o.forEach((function(n){var o=e[n];r.indexDocument(n,t(o))}));var i=performance.now()-n;console.info("Indexed ".concat(o.length," items in ").concat(i.toFixed(3),"ms.")),l.current=r}catch(a){console.error("Error while indexing items: ",a)}}}),[e,t]);var v=l.current;return s.useEffect((function(){var t=!1;if(n){if(!e||!v)return void console.info("Search for items skipped because items are not ready - will be retried when ready");var r=performance.now();v.search(n).then((function(n){if(t)console.info("Discarding search results as a new search was launched.");else{var s=n.map((function(t){return e[t]})).filter(Boolean),l=performance.now()-r;console.info("Found ".concat(s.length," items in ").concat(l.toFixed(3),"ms.")),g(h(s,o,i,a))}}))}else g(h(o?x:m,o,i,a));return function(){t=!0}}),[m,x,e,n,o,i,a,v]),f}},82069:function(e,t,n){"use strict";n.d(t,{G9:function(){return h},KE:function(){return d},dr:function(){return p},qg:function(){return x},zi:function(){return g}});var r=n(93433),o=n(29439),i=n(37762),a=n(4942),s=n(28381),l=n(16243),c=n.n(l),u=n(40755),d={minMatchCharLength:1,threshold:.35,includeMatches:!0,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0},p=function(e){var t=e.trim().split(" ");return"'".concat(t.join(" '"))},h=function(e,t){return{$and:e.trim().split(" ").map((function(e){return{$or:t.map((function(t){return(0,a.Z)({},t,e)}))}}))}},f=function(e,t){var n=t.toLowerCase();return e.indices.map((function(r){var o=e.value.slice(r[0],r[1]+1).toLowerCase();if(o===n)return r;var i=o.indexOf(n);return-1!==i?[r[0]+i,r[0]+i+t.length-1]:void 0})).filter(Boolean)},g=function(e,t){return e.matches.map((function(e){return{key:e.key,value:e.value,indices:f(e,t)}}))},m=function(e,t,n,r,o){if(!e)return null;var a=performance.now(),s=e.filter((function(e){var n=e.item;return!t||n.category===t})).filter((function(e){var t=e.item.tags;if(!n)return!0;if(!(n.node.isTagContainerOnly||t.some((function(e){return e===n.node.name}))))return!1;var r,o=(0,i.Z)(n.parentNodes);try{var a=function(){var e=r.value;return e.isTagContainerOnly?{v:!0}:t.some((function(t){return t===e.name}))?void 0:{v:!1}};for(o.s();!(r=o.n()).done;){var s=a();if("object"===typeof s)return s.v}}catch(l){o.e(l)}finally{o.f()}return!0})).filter((function(e){var t=e.item,n=t.tags,i=t.tier,a=!i||!o.has(i),s=0===r.size||n.some((function(e){return r.has(e)}));return a&&s})),l=performance.now()-a;return console.info("Filtered items by category/filters/tier in ".concat(l.toFixed(3),"ms.")),s},x=function(e,t){var n=t.searchText,i=t.chosenItemCategory,a=t.chosenCategory,l=t.chosenFilters,d=t.excludedTiers,p=t.defaultFirstSearchItemIds,f=t.shuffleResults,x=void 0===f||f,v=s.useRef(null),b=s.useState(null),j=(0,o.Z)(b,2),C=j[0],y=j[1],Z=s.useMemo((function(){if(!e||!Object.keys(e).length)return null;var t=new Set(p),n=Object.keys(e).filter((function(e){return!t.has(e)}));return[].concat((0,r.Z)(p),(0,r.Z)(x?c()(n):n)).map((function(t){return{item:e[t],matches:[]}}))}),[e,p,x]);s.useEffect((function(){if(e){var t=performance.now();v.current&&(v.current=null);try{var n=new u.Z(Object.values(e),{keys:[{name:"name",weight:2},{name:"fullName",weight:5},{name:"shortDescription",weight:1},{name:"tags",weight:4}],minMatchCharLength:2,threshold:.35,includeMatches:!0,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0}),r=performance.now()-t;console.info("Indexed ".concat(Object.keys(e).length," items in ").concat(r.toFixed(3),"ms.")),v.current=n}catch(o){console.error("Error while indexing items: ",o)}}}),[e]);var k=v.current;return s.useEffect((function(){var t=!1;if(n){if(!e||!k)return void console.info("Search for items skipped because items are not ready - will be retried when ready");var r=performance.now(),o=k.search(h(n,["name","fullName","shortDescription","tags"])),s=performance.now()-r;if(console.info("Found ".concat(o.length," items in ").concat(s.toFixed(3),"ms.")),t)return void console.info("Discarding search results as a new search was launched.");y(m(o.map((function(e){return{item:e.item,matches:g(e,n)}})),i,a,l,d))}else y(m(Z,i,a,l,d));return function(){t=!0}}),[Z,e,n,i,a,l,k,d]),C}},64903:function(e,t,n){"use strict";var r=n(1413),o=n(29439),i=n(28381),a=n(29277),s=n(87622),l=n(39173),c=n(86278),u=n(98237),d=n(65570),p=n(65111),h=n(31595),f=n(36600),g=n(68009),m=n(35595),x=n(29343),v=function(){},b=i.forwardRef((function(e,t){var n=e.id,b=e.disabled,j=e.placeholder,C=e.onChange,y=e.onRequestSearch,Z=e.value,k=e.aspect,w=e.tagsHandler,T=e.tags,E=e.buildMenuTemplate,S=e.helpPagePath,P=e.autoFocus;i.useImperativeHandle(t,(function(){return{focus:I,blur:D}}));var I=function(){W.current&&W.current.focus()},D=function(){W.current&&W.current.blur()},A=i.useState(!1),L=(0,o.Z)(A,2),M=L[0],F=L[1],O=i.useState(Z),R=(0,o.Z)(O,2),B=R[0],_=R[1],N=i.useState(Z),U=(0,o.Z)(N,2),H=U[0],V=U[1],W=i.useRef(null),z=!!B&&B.length>0,G=(0,g.N)(C||v,250),Y=i.useCallback((function(e){_(e),G(e)}),[G,_]),q=i.useCallback((function(e){_(e),C&&C(e)}),[C,_]);i.useEffect((function(){_(Z)}),[Z]);var X=(0,d.bX)(),J=!!P&&("desktopAndMobileDevices"===P||X),K=i.useRef(w?w.chosenTags.size:0);i.useEffect((function(){J&&w&&0===w.chosenTags.size&&K.current>0&&I()}),[w,J]);var Q=function(){F(!1),B&&""!==B.trim()||q("")},$=function(){F(!0)},ee=function(e){Y(e.target.value)},te=function(){q(""),I()},ne=function(e){(0,p.ph)(e)&&y(B)},re=function(e,t,n){"select-option"===n?(w&&w.add(t||""),q(""),V("")):q(t||"")},oe=function(e,t,n){"reset"===n?(q(""),V("")):Y(t||"")};return(0,x.jsx)(f.I18n,{children:function(e){var t=e.i18n;return(0,x.jsx)(m.Z,{onCancel:te,isFocused:M,disabled:b,isSearchBarEmpty:!z,helpPagePath:S,aspect:k,buildMenuTemplate:E,renderSubLine:w?function(){return(0,x.jsx)(s.Z,{in:w.chosenTags.size>0,children:(0,x.jsx)(h.Z,{tags:Array.from(w.chosenTags),onRemove:function(e){1===w.chosenTags.size&&I(),w.remove(e)}})})}:null,renderContent:function(e){var o=e.inputStyle,i=e.popperContainerStyle;return T?(0,x.jsx)(u.ZP,{id:n,options:T,freeSolo:!0,fullWidth:!0,defaultValue:"",inputValue:B,value:H,onChange:re,onInputChange:oe,onKeyPress:ne,onBlur:Q,onFocus:$,getOptionDisabled:function(e){return e.disabled||!!w&&!!w.chosenTags.has(e)},getOptionSelected:function(e,t){return!!w&&w.chosenTags.has(e)},PopperComponent:function(e){return(0,x.jsx)("div",{style:i,children:e.children})},renderOption:function(e){return(0,x.jsx)(c.Z,{noMargin:!0,children:e})},renderInput:function(e){return(0,x.jsx)(l.Z,(0,r.Z)((0,r.Z)({margin:"none"},e),{},{autoFocus:J,inputRef:W,InputProps:(0,r.Z)((0,r.Z)({},e.InputProps),{},{disableUnderline:!0,endAdornment:null,placeholder:t._(j||{id:"Search"}),style:o})}))}}):(0,x.jsx)(a.ZP,{id:n,margin:"none",dataset:{searchBar:"true"},translatableHintText:j||{id:"Search"},onBlur:Q,value:B,onChange:ee,onKeyUp:ne,fullWidth:!0,underlineShow:!1,disabled:b,ref:W,inputStyle:o,onFocus:$,autoFocus:P})}})}})}));t.Z=b},35595:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(40243),a=n(32694),s=n(69186),l=n(24910),c=n(31318),u=n(72662),d=n(16792),p=n(9311),h=n(14932),f=n(51598),g=n(23198),m=n(54168),x=n(29343);t.Z=function(e){var t=e.renderContent,n=e.disabled,v=e.isSearchBarEmpty,b=e.isFocused,j=e.helpPagePath,C=e.aspect,y=e.buildMenuTemplate,Z=e.onCancel,k=e.renderSubLine,w=o.useContext(l.Z),T=function(e){var t=e.nonEmpty,n=e.disabled,o=e.theme,i=e.aspect,a=e.focused,s=e.hasHelpPage,l=n?.38:1;return{root:{height:30,display:"flex",flex:1,justifyContent:"space-between",backgroundColor:n?o.searchBar.backgroundColor.disabled:o.searchBar.backgroundColor.default,borderRadius:"integrated-search-bar"===i?0:4},iconButtonClose:{style:{opacity:l,visibility:t&&!n?"visible":"hidden",transition:"visibility 0s linear 0.1s"}},iconButtonSearch:{container:{padding:"5px 10px"},iconStyle:{fontSize:18,opacity:a?1:.5,transition:"opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},iconButtonFilter:{style:{opacity:l,transform:t?"translateX(0)":"translateX(".concat(30,"px)"),transition:"transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},iconButtonHelp:{style:{opacity:l,transform:t?"translateX(0)":"translateX(".concat(30,"px)"),transition:"transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},inputStyle:(0,r.Z)({padding:0,color:n?o.searchBar.textColor.disabled:t&&a?o.searchBar.textColor.focused:o.searchBar.textColor.default},c.t),searchContainer:{position:"relative",display:"flex",width:"100%"},inputContainer:{margin:"auto 4px",flex:1},popperContainer:{left:"-".concat(43,"px"),right:"-".concat(s?66:33,"px"),position:"absolute",zIndex:1}}}({nonEmpty:!v,disabled:!!n,theme:w,aspect:C,focused:b,hasHelpPage:!!j}),E=function(e){var t=e.theme,n=e.disabled,r=(e.nonEmpty,e.focused);return(0,s.Z)({root:{border:"1px solid ".concat(r?t.searchBar.borderColor.focused:"transparent"),"&:hover":{border:!r&&!n&&"1px solid ".concat(t.searchBar.borderColor.hovered)}}})()}({theme:w,disabled:!!n,nonEmpty:!v,focused:b}),S=o.useMemo((function(){return t({inputStyle:T.inputStyle,popperContainerStyle:T.popperContainer})}),[t,T.inputStyle,T.popperContainer]);return(0,x.jsxs)(i.sg,{noMargin:!0,children:[(0,x.jsx)(i.x1,{noMargin:!0,children:(0,x.jsxs)(a.Z,{classes:E,style:T.root,children:[(0,x.jsx)("div",{style:T.iconButtonSearch.container,children:(0,x.jsx)(u.Z,{style:T.iconButtonSearch.iconStyle,viewBox:"2 2 12 12"})}),(0,x.jsx)("div",(0,r.Z)((0,r.Z)({style:T.searchContainer},(0,d.Y)({searchBarContainer:"true"})),{},{children:(0,x.jsx)("div",{style:T.inputContainer,children:S})})),y&&(0,x.jsx)(m.Z,{element:(0,x.jsx)(f.Z,{style:T.iconButtonFilter.style,disabled:n,size:"small",children:(0,x.jsx)(p.Z,{})}),buildMenuTemplate:y}),j&&(0,x.jsx)(h.Z,{disabled:n,helpPagePath:j,style:T.iconButtonHelp.style,size:"small"}),(0,x.jsx)(f.Z,{onClick:Z,style:T.iconButtonClose.style,disabled:n,size:"small",children:(0,x.jsx)(g.Z,{})})]})}),k&&k()]})}},81683:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(36600),a=n(39173),s=n(29277),l=n(32832),c=n(69186),u=n(29343),d=function(e){return e.stopPropagation()},p=o.forwardRef((function(e,t){var n=o.useRef(null),p=function(e){n.current&&n.current.focus()};o.useImperativeHandle(t,(function(){return{focus:p}}));var h,f=(h=e.textAlign,(0,c.Z)({root:{textAlign:h||"left",cursor:"default"}})()),g=e.onChange||void 0,m=!0,x=o.Children.map(e.children,(function(e){return null!==e&&e.props?e.props.value:null}));x?m=0!==x.filter((function(t){return t===e.value})).length:console.error("SelectField has been passed no or invalid children. Only SelectOption and null are supported.");var v=m?e.value:"",b=e.errorText?e.errorText:e.helperMarkdownText?(0,u.jsx)(l.r,{source:e.helperMarkdownText}):null;return(0,u.jsx)(i.I18n,{children:function(t){var o=t.i18n;return(0,u.jsxs)(a.Z,(0,r.Z)((0,r.Z)({id:e.id,select:!0,color:"secondary"},(0,s.P8)(e)),{},{disabled:e.disabled,fullWidth:e.fullWidth,label:e.floatingLabelText,helperText:b,error:!!e.errorText,value:v,onClick:e.stopPropagationOnClick?d:void 0,onChange:g?function(e){g(e,-1,e.target.value)}:void 0,InputProps:{style:e.inputStyle,disableUnderline:!!e.disableUnderline},InputLabelProps:{shrink:!0},SelectProps:{native:!0,classes:f},style:e.style,inputRef:n,children:[m?null:(0,u.jsx)("option",{value:"",disabled:!0,children:e.translatableHintText?o._(e.translatableHintText):o._({id:"Choose an option"})}),e.children]}))}})}));t.Z=p},90242:function(e,t,n){"use strict";var r=n(28381),o=n(36600),i=n(24910),a=n(29343);t.Z=function(e){var t=r.useContext(i.Z);return(0,a.jsx)(o.I18n,{children:function(n){var r=n.i18n;return(0,a.jsx)("option",{value:e.value,disabled:e.disabled,style:{color:t.text.color.primary,backgroundColor:t.palette.canvasColor},children:e.shouldNotTranslate?e.label:r._(e.label)})}})}},72402:function(e,t,n){"use strict";n.d(t,{lp:function(){return Z},nT:function(){return k}});var r=n(29439),o=n(45987),i=n(1413),a=n(28381),s=n(36600),l=n(39173),c=(n(74044),n(81666)),u=n(99415),d=n(32832),p=n(98237),h=n(33620),f=n(29277),g=n(69186),m=n(80845),x=n(65111),v=n(31318),b=n(20914),j=n(29343),C=["InputProps","inputProps","InputLabelProps"],y=["InputProps","inputProps"],Z=function(e){return(0,j.jsx)(b.Z,(0,i.Z)((0,i.Z)({},e),{},{background:"light"}))},k={container:{position:"relative",width:"100%"},listItem:{padding:0,margin:0},listbox:{padding:0,margin:0},listItemText:{margin:"1px 0"}},w=(0,g.Z)({option:{cursor:"default"},listbox:k.listbox,input:{width:"auto",flexGrow:1},inputRoot:{flexWrap:"wrap"},popper:{zIndex:m.default.tooltip+100}}),T=function(e){return function(t,n){if(t.type&&"separator"===t.type)return(0,j.jsx)(h.Z,{divider:!0,disableGutters:!0,component:"div",style:k.listItem});var r=t.translatableValue?e._(t.translatableValue):t.value;return(0,j.jsxs)(h.Z,{dense:!0,component:"div",style:k.listItem,children:[t.renderIcon&&(0,j.jsx)(c.Z,{children:t.renderIcon()}),(0,j.jsx)(u.Z,{style:k.listItemText,primary:(0,j.jsx)("div",{title:r,style:v.t,children:r})})]})}},E=function(e){return"separator"===e.type};t.ZP=a.forwardRef((function(e,t){var n=a.useRef(null),c=(0,a.useState)(null),u=(0,r.Z)(c,2),h=u[0],g=u[1],m=(0,a.useState)(!1),v=(0,r.Z)(m,2),b=v[0],S=v[1],P=w(),I=function(e){var t=n.current;t&&(t.focus(),e&&e.selectAll&&t.select())};a.useImperativeHandle(t,(function(){return{focus:I,forceInputValueTo:function(e){null!==h&&g(e)}}}));var D=null!==h?h:e.value,A=e.helperMarkdownText?(0,j.jsx)(d.r,{source:e.helperMarkdownText}):null,L=function(t,n,r){g(n),b||S(!0),e.commitOnInputChange&&e.onChange(n)};return(0,j.jsx)(s.I18n,{children:function(t){var r=t.i18n;return(0,j.jsx)(p.ZP,{freeSolo:!0,classes:P,onChange:function(t,r){null!==r&&n.current&&(!function(e,t,n){"separator"!==t.type&&(t.onClick?t.onClick():(e.value=t.value,n.onChoose?n.onChoose(t.value):n.onChange(t.value),n.onApply?n.onApply():n.onRequestClose&&n.onRequestClose()))}(n.current,r,e),g(null),S(!1))},open:b,style:(0,i.Z)((0,i.Z)({},e.style),k.container),inputValue:D,value:D,onInputChange:L,PaperComponent:Z,options:e.dataSource,renderOption:T(r),getOptionDisabled:E,getOptionLabel:function(e){return function(e,t){return e.value?e.value:t}(e,D)},filterOptions:function(e,t){return function(e,t,n){var r=n.toLowerCase(),o=e.filter((function(e){return"separator"===e.type||!e.text||-1!==e.text.toLowerCase().indexOf(r)}));if(!o.filter((function(e){return"separator"!==e.type&&(e.value||e.translatableValue)})).length)return[];for(;void 0!==o[o.length-1]&&void 0!==o[o.length-1].type;)o.pop();for(;void 0!==o[0]&&void 0!==o[0].type;)o.shift();return o}(e,0,D)},id:e.id,renderInput:function(t){var a=function(e,t){var n=e.InputProps,r=e.inputProps,a=(e.InputLabelProps,(0,o.Z)(e,C));return(0,i.Z)((0,i.Z)({},a),{},{InputProps:(0,i.Z)((0,i.Z)({},n),{},{className:null,endAdornment:null,style:t.inputStyle}),inputProps:(0,i.Z)((0,i.Z)({},r),{},{className:null,disabled:t.disabled,onKeyDown:function(e){(0,x.W$)(e)?t.onRequestClose&&t.onRequestClose():(0,x.Fc)(e)?(t.onChange(e.currentTarget.value),t.onApply?t.onApply():t.onRequestClose&&t.onRequestClose()):(0,x.ph)(e)&&t.onChange(e.currentTarget.value)}})})}(t,e),s=a.InputProps,c=a.inputProps,u=(0,o.Z)(a,y);return(0,j.jsx)(l.Z,(0,i.Z)((0,i.Z)((0,i.Z)({color:"secondary",InputProps:(0,i.Z)((0,i.Z)({},s),{},{placeholder:"string"===typeof e.hintText?e.hintText:r._(e.hintText)}),inputProps:(0,i.Z)((0,i.Z)({},c),{},{onClick:e.onClick,onFocus:function(e){S(!0),n.current&&(n.current.selectionStart=n.current.value.length)},onBlur:function(t){g(null),S(!1),e.onChange(t.currentTarget.value),e.onBlur&&e.onBlur(t)},onMouseDown:function(e){n.current&&!n.current.value.length&&S(!b)}})},u),(0,f.P8)(e)),{},{style:e.textFieldStyle,label:e.floatingLabelText,inputRef:n,disabled:e.disabled,error:!!e.errorText,helperText:A||e.errorText,fullWidth:e.fullWidth}))}})}})}))},98094:function(e,t,n){"use strict";var r=n(1413),o=n(28381),i=n(36600),a=n(39173),s=n(98237),l=n(69186),c=n(72402),u=n(33620),d=n(99415),p=n(31318),h=n(86278),f=n(29343),g=function(e,t){return(0,f.jsx)(u.Z,{dense:!0,component:"div",style:c.nT.listItem,children:(0,f.jsx)(d.Z,{style:c.nT.listItemText,primary:(0,f.jsx)("div",{title:e.value,style:p.t,children:e.text})})})},m={maxHeight:250,overflowY:"scroll",scrollbarWidth:"thin"},x=(0,l.Z)({root:{height:25},deleteIcon:{cursor:"default"}}),v=o.forwardRef((function(e,t){var n=x(),l=o.useRef(null);return o.useImperativeHandle(t,(function(){return{focusInput:function(){l.current&&l.current.focus()}}})),(0,f.jsx)(i.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(s.ZP,{multiple:!0,value:e.value,onChange:e.onChange,inputValue:e.inputValue,onInputChange:e.onInputChange,options:e.dataSource,PaperComponent:c.lp,renderOption:g,getOptionLabel:function(e){return e.text},getOptionDisabled:function(t){return t.disabled||!!e.value.find((function(e){return e&&e.value===t.value}))||e.optionsLimit&&e.value.length>=e.optionsLimit},getOptionSelected:function(e,t){return e.value===t.value},loading:e.loading,ListboxProps:{className:e.disableAutoTranslate?"notranslate":"",style:(0,r.Z)((0,r.Z)({},c.nT.listbox),m)},renderInput:function(t){return(0,f.jsx)(a.Z,(0,r.Z)((0,r.Z)({},t),{},{color:"secondary",InputProps:(0,r.Z)((0,r.Z)({},t.InputProps),{},{placeholder:e.hintText&&o._(e.hintText)}),label:e.floatingLabelText,helperText:e.error||e.helperText,variant:"filled",error:!!e.error,inputRef:l,disabled:e.disabled||e.loading}))},fullWidth:e.fullWidth,disabled:e.disabled||e.loading,noOptionsText:(0,f.jsx)(h.Z,{noMargin:!0,children:(0,f.jsx)(i.Trans,{id:"No options"})}),loadingText:(0,f.jsx)(h.Z,{noMargin:!0,children:(0,f.jsx)(i.Trans,{id:"Loading..."})}),ChipProps:{classes:n,className:e.disableAutoTranslate?"notranslate":""}})}})}));t.Z=v},42986:function(e,t,n){"use strict";var r=n(1413),o=n(45987),i=n(29439),a=n(28381),s=n(29277),l=n(29343),c=["value","onChange","commitOnBlur","onFocus","onBlur","type"],u=a.forwardRef((function(e,t){var n=a.useState(!1),u=(0,i.Z)(n,2),d=u[0],p=u[1],h=a.useState(null),f=(0,i.Z)(h,2),g=f[0],m=f[1],x=a.useRef(null),v=function(e){m(e)},b=function(e,t){var n=C();n&&(n.selectionStart=e,n.selectionEnd=t)},j=function(e){x.current&&x.current.focus(e)},C=function(){if(x.current)return x.current.getInputNode()},y=function(){if(x.current)return x.current.getFieldWidth()},Z=function(){if(x.current)return x.current.getCaretPosition()};a.useImperativeHandle(t,(function(){return{focus:j,getInputNode:C,forceSetSelection:b,forceSetValue:v,getFieldWidth:y,getCaretPosition:Z}}));var k=e.value,w=e.onChange,T=e.commitOnBlur,E=e.onFocus,S=e.onBlur,P=e.type,I=(0,o.Z)(e,c);return(0,l.jsx)(s.ZP,(0,r.Z)((0,r.Z)({},I),{},{type:P||"text",ref:x,value:d?g:k,onFocus:function(e){p(!0),m(k),E&&E(e)},onChange:function(e,t){m(t),T||w(t)},onBlur:function(e){w(e.currentTarget.value),p(!1),m(null),S&&S(e)}}))}));t.Z=u},78966:function(e,t,n){"use strict";var r=n(15861),o=n(64687),i=n.n(o),a=n(36600),s=(n(28381),n(67835)),l=n(40243),c=n(83689),u=n(29343);t.Z=function(e){var t=e.url,n=function(){var e=(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&navigator.share){e.next=2;break}return e.abrupt("return");case 2:return n={title:"My SpeXEngine game",text:"Try the game I just created with #gdevelop",url:t},e.prev=3,e.next=6,navigator.share(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Couldn't share the game",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return navigator.share?(0,u.jsx)(l.x1,{justifyContent:"flex-end",children:(0,u.jsx)(s.Z,{label:(0,u.jsx)(a.Trans,{id:"Share"}),onClick:n,leftIcon:(0,u.jsx)(c.Z,{})})}):null}},75087:function(e,t,n){"use strict";var r=n(29439),o=n(36600),i=n(28381),a=n(90264),s=n(51598),l=n(61325),c=n(32484),u=n(29277),d=n(2066),p=n(22537),h=n(29343);t.Z=function(e){var t=e.url,n=i.useState(!1),f=(0,r.Z)(n,2),g=f[0],m=f[1],x=function(){t&&(navigator.clipboard.writeText(t),m(!0))},v=function(){t&&d.ZP.openExternalURL(t)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.ad,{noFloatingLabelText:!0,renderTextField:function(){return(0,h.jsx)(u.ZP,{value:t,readOnly:!0,fullWidth:!0,endAdornment:(0,h.jsx)(s.Z,{onClick:x,tooltip:{id:"Copy"},edge:"end",children:(0,h.jsx)(a.Z,{})})})},renderButton:function(e){return(0,h.jsx)(c.Z,{primary:!0,id:"open-online-export-button",label:(0,h.jsx)(o.Trans,{id:"Open"}),onClick:v,style:e})}}),(0,h.jsx)(p.Z,{message:(0,h.jsx)(o.Trans,{id:"Copied to clipboard!"}),visible:g,hide:function(){return m(!1)}})]})}},65911:function(e,t,n){"use strict";n(28381);var r=n(83126),o=n(68518),i=n(7614),a=n(97599),s=n(48651),l=n(64739),c=n(81476),u=n(43473),d=n(91622),p=n(7123),h=n(40243),f=n(29343),g={icon:{padding:5}};t.Z=function(e){var t=e.url;return(0,f.jsxs)(h.x1,{children:[(0,f.jsx)(r.Z,{url:t,style:g.icon,quote:"Try the game I just created with SpeXEngine.io",hashtag:"#gdevelop",children:(0,f.jsx)(o.Z,{size:32,round:!0})}),(0,f.jsx)(i.Z,{url:t,title:"Try the game I just created with r/gdevelop",style:g.icon,children:(0,f.jsx)(a.Z,{size:32,round:!0})}),(0,f.jsx)(s.Z,{title:"Try the game I just created with SpeXEngine.io",hashtags:["gdevelop"],url:t,style:g.icon,children:(0,f.jsx)(l.Z,{size:32,round:!0})}),(0,f.jsx)(c.Z,{title:"Try the game I just created with SpeXEngine.io",url:t,style:g.icon,children:(0,f.jsx)(u.Z,{size:32,round:!0})}),(0,f.jsx)(d.Z,{subject:"My SpeXEngine game",body:"Try the game I just created with SpeXEngine.io",url:t,style:g.icon,children:(0,f.jsx)(p.Z,{size:32,round:!0})})]})}},91153:function(e,t,n){"use strict";n(28381);var r=n(26086),o=n(17358),i=n(29343),a=(0,o.Z)((function(e){return{valueLabel:{"& > span > span":{color:e.palette.secondary.contrastText}}}}));t.Z=function(e){var t=a();return(0,i.jsx)(r.Z,{classes:t,color:"secondary",marks:e.marks,valueLabelDisplay:e.valueLabelDisplay,value:e.value,scale:e.scale,track:!1,onChange:function(t,n){return e.onChange(n)},min:e.min,max:e.max,step:e.step})}},65752:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),o=n(28381),i=n(24910),a=n(29343),s={dropIndicator:{borderTop:"2px solid black",height:0,marginTop:"-1px",marginBottom:"-1px",width:"100%",boxSizing:"border-box"}};function l(e){var t=e.canDrop,n=e.zIndex,l=o.useContext(i.Z);return(0,a.jsx)("div",{style:(0,r.Z)((0,r.Z)({},s.dropIndicator),{},{borderColor:t?l.dropIndicator.canDrop:l.dropIndicator.cannotDrop,zIndex:n||void 0})})}},36607:function(e,t,n){"use strict";n(28381);var r=n(38295),o=n(29343),i={paddingLeft:8};t.Z=function(e){var t=e.children;return t?(0,o.jsx)(r.Z,{variant:"overline",style:i,children:t}):null}},11374:function(e,t,n){"use strict";n.d(t,{Nn:function(){return j},RM:function(){return m},SC:function(){return b},bY:function(){return v},iA:function(){return g},xD:function(){return x}});var r=n(1413),o=n(15671),i=n(43144),a=n(60136),s=n(29388),l=n(28381),c=n(33114),u=n(38962),d=n(79337),p=n(98470),h=n(9940),f=n(29343),g=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(c.Z,(0,r.Z)({size:"small"},this.props))}}]),n}(l.Component),m=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(u.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),x=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(p.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),v=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(d.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),b=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(h.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),j=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,f.jsx)(d.Z,(0,r.Z)({},this.props))}}]),n}(l.Component)},28894:function(e,t,n){"use strict";n.d(t,{m:function(){return f}});var r=n(1413),o=n(28381),i=n(93196),a=n(64623),s=n(69186),l=n(46448),c=n(24910),u=n(29343),d={tabs:{borderTopLeftRadius:5,borderTopRightRadius:5},tab:{flexGrow:1},selectedTab:{borderTopLeftRadius:5,borderTopRightRadius:5},tabIndicator:{height:3},tabScrollButton:{display:"none"}},p=(0,s.Z)({wrapper:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});function h(e){var t=p();return(0,u.jsx)(a.Z,(0,r.Z)({classes:t},e))}function f(e){var t=e.value,n=e.onChange,a=e.options,s=e.variant,p=(0,l.L)(),f=o.useContext(c.Z),g="small"===p&&a.length>=2||"medium"===p&&a.length>=4||"large"===p&&a.length>=7||"xlarge"===p&&a.length>=8,m=g?"scrollable":"fullWidth";return(0,u.jsx)(i.Z,{variant:s||m,textColor:"primary",value:t,onChange:function(e,t){return n(t)},scrollButtons:s||g?"on":"off",style:d.tabs,TabIndicatorProps:{style:(0,r.Z)((0,r.Z)({},d.tabIndicator),{},{backgroundColor:f.tabs.indicator.backgroundColor})},TabScrollButtonProps:{style:d.tabScrollButton},children:a.map((function(e,n){var o=e.value===t,i=a.findIndex((function(e){return e.value===t})),s=0!==n&&(n-i>=2||i-n>=1);return(0,u.jsx)(h,{value:e.value,disabled:e.disabled,label:e.label,id:e.id,tabIndex:n,style:(0,r.Z)((0,r.Z)({},d.tab),o?d.selectedTab:s?{borderLeft:"1px solid ".concat(f.tabs.separator.color)}:{})},n)}))})}},31595:function(e,t,n){"use strict";var r=n(1413),o=n(29439),i=n(28381),a=n(8511),s=n(10684),l=n(29343),c={chipContainer:{display:"flex",flexWrap:"wrap",overflowX:"auto",scrollbarWidth:"thin",marginTop:4},chip:{marginRight:4,marginBottom:4}};t.Z=function(e){var t=e.tags,n=e.onChange,u=e.onRemove,d=i.useState(null),p=(0,o.Z)(d,2),h=p[0],f=p[1],g=i.useRef([]),m=i.useCallback((function(e){var t=!!h&&h===e;return(0,r.Z)((0,r.Z)({},c.chip),{},{filter:t?"brightness(1.2)":void 0})}),[h]),x=function(e){return function(r){var o=t.indexOf(e);if(g.current.splice(o,1),r.nativeEvent instanceof KeyboardEvent){var i=Math.min(g.current.length-1,o),a=g.current[i];a&&a.current&&a.current.focus()}n?n((0,s.tc)(t,e)):u&&u(e)}};return t.length?(0,l.jsx)("div",{style:c.chipContainer,children:t.map((function(e,t){var r=i.createRef();return g.current[t]=r,(0,l.jsx)(a.Z,{size:"small",style:m(e),onBlur:function(){return f(null)},onFocus:function(){return f(e)},onDelete:n||u?x(e):null,label:e,ref:r},e)}))}):null}},86278:function(e,t,n){"use strict";var r=n(1413),o=n(45987),i=n(28381),a=n(38295),s=n(29343),l=["children","style","size","color","align","noShrink","noMargin","allowSelection","allowBrowserAutoTranslate","displayInlineAsSpan","displayAsListItem"],c=function(e){switch(e){case"bold-title":return"h1";case"title":return"h2";case"section-title":return"h3";case"block-title":return"h4";case"sub-title":return"h5";case"body2":return"body2";case"body-small":return"caption";default:return"body1"}},u=function(e){switch(e){case"error":return"error";case"primary":default:return"textPrimary";case"secondary":return"textSecondary";case"inherit":return"inherit"}},d=i.forwardRef((function(e,t){var n=e.children,i=e.style,d=e.size,p=e.color,h=e.align,f=e.noShrink,g=e.noMargin,m=e.allowSelection,x=e.allowBrowserAutoTranslate,v=void 0===x||x,b=e.displayInlineAsSpan,j=e.displayAsListItem,C=(0,o.Z)(e,l);return(0,s.jsx)(a.Z,(0,r.Z)((0,r.Z)({variant:c(d),ref:t,translate:v?void 0:"no",color:u(p),component:b?"span":j?"li":void 0,style:(0,r.Z)((0,r.Z)({},i),{},{display:b?"inline-block":j?"list-item":void 0,flexShrink:f?0:void 0,marginTop:g?0:6,marginBottom:g?0:6,userSelect:m?"text":void 0,cursor:m?"text":void 0}),align:h||"inherit"},C),{},{children:n}))}));t.Z=d},42699:function(e,t,n){"use strict";var r=n(1413),o=n(45987),i=n(28381),a=n(51535),s=n(40243),l=n(29343),c=["label","primary","icon","keyboardFocused","disabled","id","allowBrowserAutoTranslate"],u=i.forwardRef((function(e,t){var n=e.label,i=e.primary,u=e.icon,d=e.keyboardFocused,p=e.disabled,h=e.id,f=e.allowBrowserAutoTranslate,g=void 0===f||f,m=(0,o.Z)(e,c);return(0,l.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"text",size:"small",translate:g?void 0:"no",color:i?"secondary":"default",autoFocus:d,focusRipple:!0,disabled:p,id:h},m),{},{ref:t,children:[u,u&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null]}))}));t.Z=u},31318:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},29277:function(e,t,n){"use strict";n.d(t,{B2:function(){return x},P8:function(){return g}});var r=n(1413),o=n(29439),i=n(28381),a=n(36600),s=n(65512),l=n(39173),c=n(51626),u=n(57588),d=n(32832),p=n(65570),h=n(16792),f=n(29343),g=function(e){return{variant:"none"===e.margin?"standard":"filled",margin:"none"===e.margin?"none":"dense",hiddenLabel:"none"!==e.margin&&!e.floatingLabelText}},m=i.forwardRef((function(e,t){var n=i.useRef(null),m=i.useRef(null),x=i.useState(!1),v=(0,o.Z)(x,2),b=v[0],j=v[1],C=function(t){var r=n.current;if(r&&(r.focus(),t&&t.selectAll&&r.select(),t&&"end"===t.caretPosition&&e.value&&r.setSelectionRange(e.value.toString().length,e.value.toString().length),t&&Number.isInteger(t.caretPosition)&&e.value)){var o=Number(t.caretPosition);r.setSelectionRange(o,o)}},y=function(){n.current&&n.current.blur()},Z=function(){return n.current?n.current:null},k=function(){return m.current?m.current.clientWidth:null},w=function(){return n.current?n.current.selectionStart:null};i.useImperativeHandle(t,(function(){return{focus:C,blur:y,getInputNode:Z,getFieldWidth:k,getCaretPosition:w}}));var T=e.onChange||void 0,E=e.helperMarkdownText?(0,f.jsx)(d.r,{source:e.helperMarkdownText}):null,S=(0,p.bX)(),P=!!e.autoFocus&&("desktopAndMobileDevices"===e.autoFocus||S);return(0,f.jsx)(a.I18n,{children:function(t){var o=t.i18n;return(0,f.jsx)(l.Z,(0,r.Z)((0,r.Z)({ref:m,color:"secondary",type:void 0!==e.type?"password"===e.type?b?"text":"password":e.type:void 0,value:void 0!==e.value?e.value:void 0,defaultValue:void 0!==e.defaultValue?e.defaultValue:void 0,onChange:T?function(e){return T(e,e.target.value)}:void 0,error:!!e.errorText,helperText:e.errorText||E,disabled:e.disabled,required:e.required,InputLabelProps:{shrink:!!e.floatingLabelFixed||void 0},label:e.floatingLabelText,name:e.name,placeholder:e.hintText?e.hintText:e.translatableHintText?o._(e.translatableHintText):void 0,id:e.id,autoFocus:P,multiline:e.multiline,rows:e.rows,rowsMax:e.rowsMax},g(e)),{},{fullWidth:e.fullWidth,InputProps:{disableUnderline:void 0!==e.underlineShow&&!e.underlineShow,style:{fontSize:e.style?e.style.fontSize:void 0,fontStyle:e.style?e.style.fontStyle:void 0,padding:e.style?e.style.padding:void 0},readOnly:e.readOnly,inputProps:(0,r.Z)({onKeyPress:e.onKeyPress,onKeyUp:e.onKeyUp,onKeyDown:e.onKeyDown,onClick:e.onClick,maxLength:e.maxLength,max:e.max,min:e.min,step:e.step,autoCapitalize:"off",style:e.inputStyle},(0,h.Y)(e.dataset)),endAdornment:void 0!==e.type&&"password"===e.type?(0,f.jsx)(c.Z,{position:"end",children:(0,f.jsx)(s.Z,{size:"small",onClick:function(){return j(!b)},children:(0,f.jsx)(u.Z,{})})}):e.endAdornment?(0,f.jsx)(c.Z,{position:"end",children:e.endAdornment}):void 0,startAdornment:e.startAdornment?(0,f.jsx)(c.Z,{position:"start",children:e.startAdornment}):void 0},style:e.style?{width:e.style.width||void 0,flex:e.style.flex||void 0,top:e.style.top||void 0}:void 0,onFocus:e.onFocus,onBlur:e.onBlur,inputRef:n,spellCheck:"false"}))}})}));t.ZP=m;var x=0},24910:function(e,t,n){"use strict";var r=n(28381),o=n(2297),i=r.createContext(o.Z.gdevelopTheme);t.Z=i},57597:function(e,t,n){"use strict";var r=n(28381),o=n(19345),i=n(54204),a=n(69186),s=n(24910),l=n(29343),c=(0,a.Z)({root:{cursor:"default"},labelPlacementStart:{marginLeft:0},label:{flex:1}});t.Z=function(e){var t=e.label,n=e.toggled,u=e.onToggle,d=e.disabled,p=e.labelPosition,h=e.style,f=c(),g=function(e){var t=e.theme,n=e.toggled,r=e.disabled;return(0,a.Z)({thumb:{backgroundColor:r?t.switch.thumbColor.disabled:n?t.switch.thumbColor.toggled:t.switch.thumbColor.default},track:{backgroundColor:r?t.switch.trackColor.disabled:n?t.switch.trackColor.toggled:t.switch.trackColor.default,opacity:"1 !important"}})()}({theme:r.useContext(s.Z),toggled:n,disabled:!!d});return(0,l.jsx)(o.Z,{control:(0,l.jsx)(i.Z,{checked:n,onChange:function(e){return u(e,e.target.checked)},classes:g,color:"default"}),labelPlacement:"right"===p?"end":"start",label:t,disabled:d,classes:f,style:h})}},84361:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var r=300},36595:function(e,t,n){"use strict";var r=n(36600),o=n(28381),i=n(42699),a=n(2066),s=n(72291),l=n(81730),c=n(29343);t.Z=function(e){var t=o.useContext(s.n).tutorials;if(!t||!e.tutorialId)return e.renderIfNotFound||null;var n=t.find((function(t){return t.id===e.tutorialId}));return n?(0,c.jsx)(i.Z,{onClick:function(){n.link&&a.ZP.openExternalURL(n.link)},target:"_blank",label:e.label||(0,c.jsx)(r.Trans,{id:"Tutorial"}),icon:(0,c.jsx)(l.Z,{})}):(console.warn("Tutorial with id ".concat(e.tutorialId||""," not found")),e.renderIfNotFound||null)}},51137:function(e,t,n){"use strict";n.d(t,{PN:function(){return a},ZA:function(){return l},e_:function(){return s}});var r=n(15861),o=n(64687),i=n.n(o),a=function(){return!1},s=function(e){return null},l=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},81303:function(e,t,n){"use strict";n.d(t,{At:function(){return d},R7:function(){return u},Um:function(){return h},oT:function(){return p}});var r=n(15861),o=n(64687),i=n.n(o),a=n(85919),s=n(38428),l=n.n(s),c=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n},u=function(){var e=(0,r.Z)(i().mark((function e(t){var n,o,s,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlContainers,o=t.onProgress,s=0,e.next=4,l().withConcurrency(20).for(n).process(function(){var e=(0,r.Z)(i().mark((function e(t){var r,l,u,d,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,e.prev=1,l=c(r,"gdUsage","export"),e.next=5,fetch(l,{credentials:(0,a.bc)(l)?"include":"same-origin"});case 5:if((u=e.sent).ok){e.next=8;break}throw new Error('Error while downloading "'.concat(l,'" (status: ').concat(u.status,")"));case 8:return e.next=10,u.blob();case 10:return d=e.sent,p={item:t,blob:d},e.abrupt("return",p);case 15:return e.prev=15,e.t0=e.catch(1),h={item:t,error:e.t0},e.abrupt("return",h);case 19:return e.prev=19,o(s++,n.length),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t){return e.apply(this,arguments)}}());case 4:return u=e.sent,d=u.results,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e,t){return e.map((function(e){var n=e.item,r=e.blob,o=e.error;return o||!r?(t(n.resource.getName(),o||new Error("Unknown error during download")),null):{resource:n.resource,file:new File([r],n.filename,{type:r.type})}})).filter(Boolean)};function p(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.onabort=function(e){return n(new Error("Read aborted"))},r.readAsDataURL(e)}))}function h(e){var t=e.split(",");if(t.length<2)return null;for(var n=t[0].match(/:(.*?);/),r=n?n[1]:"application/octet-stream",o=atob(t[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new Blob([a],{type:r})}},29514:function(){throw new Error("This is a fake @blueprintjs/core (or @blueprintjs/icons) package that is just throwing an error. It's used by react-mosaic, which will fallback to using something else.This is useful for avoiding webpack/create-react-app warnings in the developmentconsole about a missing package - while avoiding to import blueprint.")},85919:function(e,t,n){"use strict";n.d(t,{WN:function(){return s},bc:function(){return a},yk:function(){return i}});var r=n(48409),o=n(34517),i=function(e){return e.startsWith("https://project-resources.engine.spacexpanse.org/")||e.startsWith("https://project-resources-dev.engine.spacexpanse.org/")},a=function(e){return!(0,r._F)()&&!!i(e)},s=function(e){return(0,r._F)()&&i(e)?(0,o.so)(e):e}},39909:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var r=null,o=function(){return r||(r=n.g.CSS.supports("image-rendering: crisp-edges")?"crisp-edges":"pixelated")}},58336:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},72702:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var r=/[/?<>\\:*|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,i=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,s=/[. ]+$/,l=/[&$+/=?@#]/g,c=/[|^%]/g,u="_";function d(e){return e.replace(r,u).replace(l,u).replace(c,u).replace(o,u).replace(i,u).replace(a,u).replace(s,u)}},84140:function(e,t,n){"use strict";n.d(t,{$l:function(){return Z},Dz:function(){return y},LG:function(){return m},O3:function(){return g},QR:function(){return S},R5:function(){return C},Tm:function(){return E},V0:function(){return w},WY:function(){return v},Xt:function(){return x},_N:function(){return b},bX:function(){return j},d0:function(){return P},kt:function(){return T},s0:function(){return f},tL:function(){return k},uD:function(){return A}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(14446),l=n.n(s),c=n(45911),u=n(55736),d=n.n(u),p=n(36465),h=l().create({baseURL:c.Ud.baseUrl}),f=function(e){var t=Object.keys(e.content);return 1===t.length&&"audio"===t[0]},g=function(e){return!!e.content.audio&&e.content.audio>0},m=function(e,t){return!t.gdevelopVersion||d()(e,t.gdevelopVersion,{includePrerelease:!0})},x=function(e){var t=e.environment;return h.get("/asset",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.assetShortHeadersUrl,n=e.filtersUrl,r=e.assetPacksUrl;if(!t||!n||!r)throw new Error("Unexpected response from the resource endpoint.");return Promise.all([h.get(t).then((function(e){return e.data})),h.get(n).then((function(e){return e.data})),h.get(r).then((function(e){return e.data}))]).then((function(e){var t=(0,o.Z)(e,3),n=t[0],r=t[1],i=t[2];if(!n||!r||!i)throw new Error("Unexpected response from the assets endpoints.");return{publicAssetShortHeaders:n,publicFilters:r,publicAssetPacks:i}}))}))},v=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.environment,e.next=3,h.get("/asset/".concat(t.id),{params:{environment:r}});case 3:if((o=e.sent).data.assetUrl){e.next=6;break}throw new Error("Unexpected response from the asset endpoint.");case 6:return e.next=8,h.get(o.data.assetUrl);case 8:return i=e.sent,e.abrupt("return",i.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)(a().mark((function e(t,n,r){var o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.environment,o=t.assetPackId){e.next=4;break}throw new Error("The asset does not have a private asset pack id.");case 4:return i="".concat(c.kw.baseUrl,"/").concat(o,"/").concat(t.id,".json"),s=(0,p.mR)(i,n),e.next=8,h.get(s);case 8:return l=e.sent,e.abrupt("return",l.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),j=function(e,t){var n="".concat(c.kw.baseUrl,"/").concat(e,"/resources/audio.zip");return(0,p.mR)(n,t)},C=function(e){var t=e.environment;return h.get("/resource",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.resourcesUrl,n=e.filtersUrl;if(!t||!n)throw new Error("Unexpected response from the resource endpoint.");return Promise.all([h.get(t).then((function(e){return e.data})),h.get(n).then((function(e){return e.data}))]).then((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];if(!n||!r)throw new Error("Unexpected response from the resources endpoints.");return{resources:n,filters:r}}))}))},y=function(e){var t=e.environment;return h.get("/author",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.authorsUrl;if(!t)throw new Error("Unexpected response from author endpoint.");return h.get(t)})).then((function(e){return e.data}))},Z=function(e){var t=e.environment;return h.get("/license",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.licensesUrl;if(!t)throw new Error("Unexpected response from license endpoint.");return h.get(t)})).then((function(e){return e.data}))},k=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/asset-pack/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return e.tags.some((function(e){return"pixel art"===e.toLowerCase()}))},T=function(e){var t=e.previewImageUrls[0];return!!t&&(0,p.bW)(t)},E=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,h.get("/asset-short-header",{headers:{Authorization:o},params:{userId:r}});case 6:return i=e.sent,e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(a().mark((function e(t,n){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,h.get("/asset-pack",{headers:{Authorization:o},params:{userId:r}});case 6:return i=e.sent,e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){return e.startsWith(c.Ck)||e.startsWith(c.vF)},I=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},D=new RegExp("(".concat(I(c.Ck),"|").concat(I(c.vF),")\\/public-resources\\/(.*)\\/([a-z0-9]{64})_(.*)")),A=function(e){var t=D.exec(e);if(!t)throw new Error("The URL is not a valid public asset resource URL: "+e);return t[4]}},2861:function(e,t,n){"use strict";n.d(t,{$A:function(){return p},Ch:function(){return h},Ey:function(){return u},M7:function(){return j},OV:function(){return f},SH:function(){return d},jy:function(){return b},l8:function(){return c},tP:function(){return C},x9:function(){return g},zi:function(){return v}});var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(45911),c="trivial_first-event",u="trivial_first-behavior",d="trivial_first-preview",p="trivial_first-web-export",h="trivial_first-extension",f="trivial_first-effect",g="trivial_first-debug",m=function(e,t){return e.map((function(e){return e.achievementId})).includes(t)},x=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c,u,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.badges,o=t.firebaseUser,a=t.getAuthorizationHeader,c=t.onBadgesChanged,r&&o){e.next=3;break}return e.abrupt("return",null);case 3:if(!m(r,n)){e.next=5;break}return e.abrupt("return",null);case 5:return u=o.uid,e.prev=6,e.next=9,a();case 9:return d=e.sent,e.next=12,s().post("".concat(l.ST.baseUrl,"/user/").concat(u,"/badge"),{achievementId:n},{params:{userId:u},headers:{Authorization:d}});case 12:return p=e.sent,c(),e.abrupt("return",p.data);case 17:if(e.prev=17,e.t0=e.catch(6),!e.t0.response||409!==e.t0.response.status){e.next=23;break}console.warn("Badge already exists"),e.next=24;break;case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e,t,n){var r=e.badges;return r?m(r,t)?n:function(){try{x(e,t)}catch(a){console.error("Couldn't create badge ".concat(t,"; ").concat(a))}for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n.apply(null,o)}:n},b=function(){return s().get("".concat(l.ST.baseUrl,"/achievement")).then((function(e){return e.data}))},j=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,a,c,u,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.badges,r=t.firebaseUser,o=t.getAuthorizationHeader,a=t.onBadgesChanged,n&&r){e.next=3;break}return e.abrupt("return",null);case 3:if(0!==(c=n.filter((function(e){return!e.seen}))).length){e.next=6;break}return e.abrupt("return");case 6:return u=r.uid,e.prev=7,e.next=10,o();case 10:return d=e.sent,e.next=13,s().patch("".concat(l.ST.baseUrl,"/user/").concat(u,"/badge"),c.map((function(e){return{achievementId:e.achievementId,seen:!0}})),{params:{userId:u},headers:{Authorization:d}});case 13:return p=e.sent,a(),e.abrupt("return",p.data);case 18:e.prev=18,e.t0=e.catch(7),console.error("Couldn't mark badges as seen: ".concat(e.t0));case 21:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e,t){return t.unlockedAt&&e.unlockedAt?t.unlockedAt-e.unlockedAt:e.unlockedAt&&!t.unlockedAt?-1:!e.unlockedAt&&t.unlockedAt?1:0}},10959:function(e,t,n){"use strict";n.d(t,{$C:function(){return g},BY:function(){return x},Bc:function(){return f},Fp:function(){return u},QX:function(){return v},UN:function(){return d},Xr:function(){return m},Zi:function(){return p},c8:function(){return b},ch:function(){return h}});var r=n(14446),o=n.n(r),i=n(28842),a=n(45911),s=n(68151),l=n(70983),c=function(e){var t=e.gameName,n=e.gameVersion;try{var r=/[./\\[\]<>&$@=;:+,?^{}%#~|'"*]/g;return"".concat(t.slice(0,50).replace(r,"_"),"-").concat(n.slice(0,15).replace(r,"_"))}catch(o){return console.warn("An error happened when computing game extensionless filename:",o),"game"}},u=function(e,t){return e&&e[t]?"s3Key"===t?e.gameId?a.Zw.getInstantBuildUrl(e.id):"https://games.gdevelop-app.com/".concat(e[t],"/index.html"):"https://builds.gdevelop-app.com/".concat(e[t]):null},d=function(e,t){var n=e.getResourcesManager(),r=e.getPlatformSpecificAssets().get("liluo","thumbnail");if(!n.hasResource(r))return"";var o=n.getResource(r).getFile(),i=(0,l.basename)(o);if(!i)return"";var a="https://games.gdevelop-app.com/game-".concat(t,"/").concat(i);return encodeURI(a)},p=function(){var e="game-archive-"+(0,i._)(),t="application/zip",n=e+"/game-archive.zip";return(0,s.eu)({uploadType:"build",key:n,contentType:t}).then((function(e){return{signedUrl:e.signedUrl,contentType:t,key:n}}))},h=function(e,t,n,r,i,s){return e().then((function(e){return o().post("".concat(a.pB.baseUrl,"/build"),null,{params:{userId:t,key:n,type:"electron-build",targets:r.join(","),gameId:i,filename:c(s)},headers:{Authorization:e}})})).then((function(e){return e.data}))},f=function(e,t,n,r,i){return e().then((function(e){return o().post("".concat(a.pB.baseUrl,"/build"),null,{params:{userId:t,key:n,type:"web-build",targets:"s3",gameId:r},headers:{Authorization:e}})})).then((function(e){return e.data}))},g=function(e,t,n,r,i,s,l){return e().then((function(e){return o().post("".concat(a.pB.baseUrl,"/build"),JSON.stringify({signing:{keystore:i}}),{params:{userId:t,key:n,type:"cordova-build",targets:r.join(","),gameId:s,filename:c(l)},headers:{Authorization:e}})})).then((function(e){return e.data}))},m=function(e,t,n){return e().then((function(e){return o().get("".concat(a.pB.baseUrl,"/build/").concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},x=function(e,t,n){return e().then((function(e){return o().get("".concat(a.pB.baseUrl,"/build"),{params:{userId:t,gameId:n},headers:{Authorization:e}})})).then((function(e){return e.data}))},v=function(e,t,n,r){var i=r.name,s=r.description;return e().then((function(e){return o().patch("".concat(a.pB.baseUrl,"/build/").concat(n),{name:i,description:s},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},b=function(e,t,n){return e().then((function(e){return o().delete("".concat(a.pB.baseUrl,"/build/").concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))}},91:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var r=function(e){return e?"object"!=typeof e?null:"object"===typeof e.response&&e.response&&"number"===typeof e.response.status?{status:e.response.status,code:"object"===typeof e.response.data&&e.response.data&&"string"===typeof e.response.data.code?e.response.data.code:null}:null:null}},69197:function(e,t,n){"use strict";n.d(t,{Ex:function(){return d},W7:function(){return u},rx:function(){return c}});var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(45911),c=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/example-short-header-and-filter"));case 2:if(t=e.sent,t.data){e.next=6;break}throw new Error("Unexpected response from examples endpoint.");case 6:return e.abrupt("return",t.data);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/example-v2/").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/example-short-header"),{params:{authorId:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},39126:function(e,t,n){"use strict";n.d(t,{E:function(){return m},Fk:function(){return v},In:function(){return g},RT:function(){return b},a2:function(){return f},y7:function(){return j}});var r=n(15861),o=n(1413),i=n(64687),a=n.n(i),s=n(14446),l=n.n(s),c=n(45911),u=n(55736),d=n.n(u),p=n.g.gd,h=function(e){return Array.isArray(e.tags)?e:(0,o.Z)((0,o.Z)({},e),{},{tags:e.tags.split(",").map((function(e){return e.trim().toLowerCase()}))})},f=function(e,t){return!t.gdevelopVersion||d()(e,t.gdevelopVersion,{includePrerelease:!0})},g=function(){var e=(0,r.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.Ud.baseUrl,"/extensions-registry"));case 2:if(t=e.sent,n=t.data){e.next=6;break}throw new Error("Unexpected response from the extensions endpoint.");case 6:return n.headers||(n.headers=n.extensionShortHeaders),n.views.default.firstIds||(n.views.default.firstIds=n.views.default.firstExtensionIds),e.abrupt("return",(0,o.Z)((0,o.Z)({},n),{},{headers:n.headers.map(h)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.Ud.baseUrl,"/behaviors-registry"));case 2:if(t=e.sent,n=t.data){e.next=6;break}throw new Error("Unexpected response from the behaviors endpoint.");case 6:return e.abrupt("return",(0,o.Z)((0,o.Z)({},n),{},{headers:n.headers.map(x)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){return e.type=p.PlatformExtension.getBehaviorFullType(e.extensionNamespace||e.extensionName,e.name),e=h(e)},v=function(e){return l().get(e.headerUrl).then((function(e){var t=e.data;return h(t)}))},b=function(e){return l().get(e.url).then((function(e){var t=e.data;return h(t)}))},j=function(){var e=(0,r.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.Ud.baseUrl,"/extension-short-header"),{params:{authorId:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},16999:function(e,t,n){"use strict";n.d(t,{Bi:function(){return p},IH:function(){return c},Oo:function(){return l},Pv:function(){return v},TT:function(){return m},WO:function(){return u},b:function(){return f},bb:function(){return b},cF:function(){return g},m7:function(){return x},r$:function(){return d},wC:function(){return h}});var r=n(14446),o=n.n(r),i=n(65522),a=n.n(i),s=n(45911),l=function(e,t){switch(e){case"action":return t._({id:"Action"});case"adventure":return t._({id:"Adventure"});case"shooter":return t._({id:"Shooter"});case"platformer":return t._({id:"Platformer"});case"rpg":return t._({id:"RPG"});case"horror":return t._({id:"Horror"});case"strategy":return t._({id:"Strategy"});case"puzzle":return t._({id:"Puzzle"});case"racing":return t._({id:"Racing"});case"simulation":return t._({id:"Simulation"});case"sport":return t._({id:"Sport"});case"story-rich":return t._({id:"Story-Rich"});case"survival":return t._({id:"Survival"});case"building":return t._({id:"Building"});case"multiplayer":return t._({id:"Multiplayer"});case"leaderboard":return t._({id:"Leaderboard"});case"educational":return t._({id:"Educational"});default:return a()(e)}},c=function(e){if(!e)return null;var t=e.cachedCurrentSlug;return t?s.Zw.getGameUrlWithSlug(t.username,t.gameSlug):s.Zw.getGameUrl(e.id)},u=function(e){return e.map((function(e){return{userId:e,level:"owner"}}))},d=function(e,t,n){var r=n.gameId,i=n.gameName,a=n.authorName,l=n.templateSlug;return e().then((function(e){return o().post("".concat(s.qD.baseUrl,"/game/").concat(r),{gameName:i,authorName:a,templateSlug:l},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},p=function(e,t,n,r){var i=r.gameName,a=r.categories,l=r.authorName,c=r.publicWebBuildId,u=r.description,d=r.playWithKeyboard,p=r.playWithGamepad,h=r.playWithMobile,f=r.orientation,g=r.thumbnailUrl,m=r.discoverable,x=r.acceptsBuildComments,v=r.acceptsGameComments,b=r.displayAdsOnGamePage;return e().then((function(e){return o().patch("".concat(s.qD.baseUrl,"/game/").concat(n),{gameName:i,categories:a,authorName:l,publicWebBuildId:c,description:u,playWithKeyboard:d,playWithGamepad:p,playWithMobile:h,orientation:f,thumbnailUrl:g,discoverable:m,acceptsBuildComments:x,acceptsGameComments:v,displayAdsOnGamePage:b},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},h=function(e,t,n,r){return e().then((function(e){return o().post("".concat(s.qD.baseUrl,"/game/action/set-acls"),{gameId:n,newAcls:r},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},f=function(e,t,n,r,i){return e().then((function(e){return o().post("".concat(s.qD.baseUrl,"/game/action/set-slug"),{gameId:n,userSlug:r,gameSlug:i},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},g=function(e,t,n){return e().then((function(e){return o().get("".concat(s.qD.baseUrl,"/game/").concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},m=function(e,t,n){return e().then((function(e){return o().delete("".concat(s.qD.baseUrl,"/game/").concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},x=function(e,t){return e().then((function(e){return o().get("".concat(s.qD.baseUrl,"/game"),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},v=function(e){return o().get("".concat(s.qD.baseUrl,"/public-game/").concat(e)).then((function(e){return e.data}))},b=function(){return o().get("".concat(s.qD.baseUrl,"/game-category")).then((function(e){return e.data}))}},19817:function(e,t,n){"use strict";n.d(t,{EB:function(){return C},HD:function(){return y},PP:function(){return k},Rv:function(){return Z},TO:function(){return P},UO:function(){return b},W3:function(){return w},Xj:function(){return v},bs:function(){return x},d1:function(){return I},oO:function(){return S},yw:function(){return j}});var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(45911),c=n(50057),u=n.n(c),d=n(2066),p=u()("fs"),h=p?p.promises:null,f=u()("path"),g=u()("@electron/remote"),m=g?g.app:null,x="flingGame",v="plinkoMultiplier",b="cameraParallax",j="healthBar",C="joystick",y="timer",Z="object3d",k=[v,y,b,j,C,Z],w=[].concat(k,[x]),T=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:return e.prev=2,e.next=5,h.readFile(t,{encoding:"utf8"});case 5:return n=e.sent,r=JSON.parse(n),e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(2),new Error(t+" is a corrupted/malformed file.");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!!g&&!d.ZP.isDev()){e.next=3;break}return e.abrupt("return",null);case 3:return n=m?m.getAppPath():process.cwd(),r=f.join(n,"..","inAppTutorials/".concat(t,".json")),e.next=7,T(r);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("inAppTutorialShortHeaders");case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn("Could not read the short headers stored locally. Trying to fetch the API.");case 11:return e.next=13,s().get("".concat(l.Ud.baseUrl,"/in-app-tutorial-short-header"));case 13:return n=e.sent,e.abrupt("return",n.data);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t.id);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn("Could not read the in app tutorial stored locally. Trying to fetch the API.");case 11:return e.next=13,s().get(t.contentUrl);case 13:return r=e.sent,e.abrupt("return",r.data);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return[v,y,b,j,C,Z].includes(e)}},14737:function(e,t,n){"use strict";n.d(t,{BM:function(){return j},GA:function(){return u},QN:function(){return v},RE:function(){return m},Rc:function(){return f},VE:function(){return y},Wk:function(){return x},YJ:function(){return h},YO:function(){return Z},mf:function(){return d},nI:function(){return b},uA:function(){return C},vW:function(){return g}});var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(45911),c=n(11858),u=function(e){return"".concat(e.split("-")[0],"-...")},d=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return a=o.uid,e.next=6,r();case 6:return c=e.sent,e.next=9,s().get("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard?deleted=false"),{headers:{Authorization:c},params:{userId:a}});case 9:return u=e.sent,e.abrupt("return",u.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(e){var t=e.split(",").map((function(e){return e.trim()})).reduce((function(e,t){var n=t.match(/;\srel="(\w*)"/),r=t.match(/^<(.*)>/);return e&&n&&r&&(e[n[1]]=r[1]),e}),{});return Object.keys(t).includes("next")?t.next:null},h=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.forceUri||"/game/".concat(t,"/leaderboard/").concat(n,"/entry"),e.next=3,s().get("".concat(l.eU.baseUrl).concat(o),{params:r.forceUri?null:{onlyBestEntry:r.onlyBestEntry,perPage:r.pageSize}});case 3:return a=e.sent,c=a.headers.link?p(a.headers.link):null,e.abrupt("return",{entries:a.data,nextPageUri:c});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a,c,u,d,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.name,a=r.sort,c=t.getAuthorizationHeader,u=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return d=u.uid,e.next=7,c();case 7:return p=e.sent,e.next=10,s().post("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard"),{name:o,sort:a},{headers:{Authorization:p},params:{userId:d}});case 10:return h=e.sent,e.abrupt("return",h.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a,c,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}throw new Error("User is not authenticated.");case 3:return c=a.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,s().post("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard/action/copy"),r,{headers:{Authorization:u},params:{userId:c}});case 9:return d=e.sent,e.abrupt("return",d.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)(i().mark((function e(t,n,r,o){var a,c,u,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,c=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return u=c.uid,e.next=6,a();case 6:return d=e.sent,e.next=9,s().patch("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(r),o,{headers:{Authorization:d},params:{userId:u}});case 9:return p=e.sent,e.abrupt("return",p.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a,c,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return c=a.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,s().put("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(r,"/reset"),{},{headers:{Authorization:u},params:{userId:c}});case 9:return d=e.sent,e.abrupt("return",d.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a,c,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return c=a.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,s().delete("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(r),{headers:{Authorization:u},params:{userId:c}});case 9:return d=e.sent,e.abrupt("return",d.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)(i().mark((function e(t,n,r,o){var a,c,u,d,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,c=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return u=c.uid,e.next=6,a();case 6:return d=e.sent,e.next=9,s().delete("".concat(l.eU.baseUrl,"/game/").concat(n,"/leaderboard/").concat(r,"/entry/").concat(o),{headers:{Authorization:d},params:{userId:u}});case 9:return p=e.sent,e.abrupt("return",p.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.gameId,a=r.type,e.abrupt("return",t().then((function(e){return s().get("".concat(l.eU.baseUrl,"/game/").concat(o,"/comment"),{params:{userId:n,type:a},headers:{Authorization:e}})})).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.gameId,a=r.commentId,c=r.processed,e.abrupt("return",t().then((function(e){return s().patch("".concat(l.eU.baseUrl,"/game/").concat(o,"/comment/").concat(a),{processed:c},{params:{userId:n},headers:{Authorization:e}})})).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(e){var t=e.limits;return{canUseTheme:!!t&&!!t.capabilities.leaderboards&&("BASIC"===t.capabilities.leaderboards.themeCustomizationCapabilities||"FULL"===t.capabilities.leaderboards.themeCustomizationCapabilities),canUseCustomCss:!!t&&!!t.capabilities.leaderboards&&!!t.capabilities.leaderboards.canUseCustomCss}},Z=function(e){var t=e&&e.theme?{backgroundColor:e.theme.backgroundColor,textColor:e.theme.textColor,highlightBackgroundColor:e.theme.highlightBackgroundColor,highlightTextColor:e.theme.highlightTextColor}:{backgroundColor:"#d0d1ff",textColor:"#000000",highlightBackgroundColor:"#5763dd",highlightTextColor:"#ffffff"};return{backgroundColor:(0,c.JO)(t.backgroundColor),textColor:(0,c.JO)(t.textColor),highlightBackgroundColor:(0,c.JO)(t.highlightBackgroundColor),highlightTextColor:(0,c.JO)(t.highlightTextColor)}}},34517:function(e,t,n){"use strict";n.d(t,{v9:function(){return V},j4:function(){return W},so:function(){return J},nZ:function(){return ne},Z7:function(){return oe},eM:function(){return re},Hj:function(){return ce},zu:function(){return fe},u_:function(){return ge},Xj:function(){return se},LG:function(){return te},NC:function(){return X},MH:function(){return ee},Sx:function(){return pe},Rn:function(){return K},xU:function(){return ae},np:function(){return le},ll:function(){return ie}});var r=n(1413),o=n(15861),i=n(64687),a=n.n(i),s=n(14446),l=n.n(s),c=n(45911),u=n(38428),d=n.n(u),p=n(60136),h=n(29388),f=n(43144),g=n(15671),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function x(e,t,n,r){var o,i,a,s=t||[0],l=(n=n||0)>>>3,c=-1===r?3:0;for(o=0;o<e.length;o+=1)i=(a=o+l)>>>2,s.length<=i&&s.push(0),s[i]|=e[o]<<8*(c+r*(a%4));return{value:s,binLen:8*e.length+n}}function v(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(e,t,r){return function(e,t,n,r){var o,i,a,s;if(0!=e.length%2)throw new Error("String of HEX type must be in byte increments");var l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(o=0;o<e.length;o+=2){if(i=parseInt(e.substr(o,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(a=(s=(o>>>1)+c)>>>2;l.length<=a;)l.push(0);l[a]|=i<<8*(u+r*(s%4))}return{value:l,binLen:4*e.length+n}}(e,t,r,n)};case"TEXT":return function(e,r,o){return function(e,t,n,r,o){var i,a,s,l,c,u,d,p,h=0,f=n||[0],g=(r=r||0)>>>3;if("UTF8"===t)for(d=-1===o?3:0,s=0;s<e.length;s+=1)for(a=[],128>(i=e.charCodeAt(s))?a.push(i):2048>i?(a.push(192|i>>>6),a.push(128|63&i)):55296>i||57344<=i?a.push(224|i>>>12,128|i>>>6&63,128|63&i):(s+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(s)),a.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),l=0;l<a.length;l+=1){for(c=(u=h+g)>>>2;f.length<=c;)f.push(0);f[c]|=a[l]<<8*(d+o*(u%4)),h+=1}else for(d=-1===o?2:0,p="UTF16LE"===t&&1!==o||"UTF16LE"!==t&&1===o,s=0;s<e.length;s+=1){for(i=e.charCodeAt(s),!0===p&&(i=(l=255&i)<<8|i>>>8),c=(u=h+g)>>>2;f.length<=c;)f.push(0);f[c]|=i<<8*(d+o*(u%4)),h+=2}return{value:f,binLen:8*h+r}}(e,t,r,o,n)};case"B64":return function(e,t,r){return function(e,t,n,r){var o,i,a,s,l,c,u=0,d=t||[0],p=(n=n||0)>>>3,h=-1===r?3:0,f=e.indexOf("=");if(-1===e.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),-1!==f&&f<e.length)throw new Error("Invalid '=' found in base-64 string");for(o=0;o<e.length;o+=4){for(s=e.substr(o,4),a=0,i=0;i<s.length;i+=1)a|=m.indexOf(s.charAt(i))<<18-6*i;for(i=0;i<s.length-1;i+=1){for(l=(c=u+p)>>>2;d.length<=l;)d.push(0);d[l]|=(a>>>16-8*i&255)<<8*(h+r*(c%4)),u+=1}}return{value:d,binLen:8*u+n}}(e,t,r,n)};case"BYTES":return function(e,t,r){return function(e,t,n,r){var o,i,a,s,l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(i=0;i<e.length;i+=1)o=e.charCodeAt(i),a=(s=i+c)>>>2,l.length<=a&&l.push(0),l[a]|=o<<8*(u+r*(s%4));return{value:l,binLen:8*e.length+n}}(e,t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(m){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e,t,r){return function(e,t,n,r){return x(new Uint8Array(e),t,n,r)}(e,t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(m){throw new Error("UINT8ARRAY not supported by this environment")}return function(e,t,r){return x(e,t,r,n)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function b(e,t,n,r){switch(e){case"HEX":return function(e){return function(e,t,n,r){var o,i,a="0123456789abcdef",s="",l=t/8,c=-1===n?3:0;for(o=0;o<l;o+=1)i=e[o>>>2]>>>8*(c+n*(o%4)),s+=a.charAt(i>>>4&15)+a.charAt(15&i);return r.outputUpper?s.toUpperCase():s}(e,t,n,r)};case"B64":return function(e){return function(e,t,n,r){var o,i,a,s,l,c="",u=t/8,d=-1===n?3:0;for(o=0;o<u;o+=3)for(s=o+1<u?e[o+1>>>2]:0,l=o+2<u?e[o+2>>>2]:0,a=(e[o>>>2]>>>8*(d+n*(o%4))&255)<<16|(s>>>8*(d+n*((o+1)%4))&255)<<8|l>>>8*(d+n*((o+2)%4))&255,i=0;i<4;i+=1)c+=8*o+6*i<=t?m.charAt(a>>>6*(3-i)&63):r.b64Pad;return c}(e,t,n,r)};case"BYTES":return function(e){return function(e,t,n){var r,o,i="",a=t/8,s=-1===n?3:0;for(r=0;r<a;r+=1)o=e[r>>>2]>>>8*(s+n*(r%4))&255,i+=String.fromCharCode(o);return i}(e,t,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(m){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e){return function(e,t,n){var r,o=t/8,i=new ArrayBuffer(o),a=new Uint8Array(i),s=-1===n?3:0;for(r=0;r<o;r+=1)a[r]=e[r>>>2]>>>8*(s+n*(r%4))&255;return i}(e,t,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(m){throw new Error("UINT8ARRAY not supported by this environment")}return function(e){return function(e,t,n){var r,o=t/8,i=-1===n?3:0,a=new Uint8Array(o);for(r=0;r<o;r+=1)a[r]=e[r>>>2]>>>8*(i+n*(r%4))&255;return a}(e,t,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var j=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],C=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],y=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Z(e){var t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},r="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);t.outputLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}var k=(0,f.Z)((function e(t,n){(0,g.Z)(this,e),this.t=t,this.i=n}));function w(e,t){var n;return t<32?(n=32-t,new k(e.t>>>t|e.i<<n,e.i>>>t|e.t<<n)):(n=64-t,new k(e.i>>>t|e.t<<n,e.t>>>t|e.i<<n))}function T(e,t){return new k(e.t>>>t,e.i>>>t|e.t<<32-t)}function E(e,t,n){return new k(e.t&t.t^e.t&n.t^t.t&n.t,e.i&t.i^e.i&n.i^t.i&n.i)}function S(e){var t=w(e,28),n=w(e,34),r=w(e,39);return new k(t.t^n.t^r.t,t.i^n.i^r.i)}function P(e,t){var n,r;n=(65535&e.i)+(65535&t.i);var o=(65535&(r=(e.i>>>16)+(t.i>>>16)+(n>>>16)))<<16|65535&n;return n=(65535&e.t)+(65535&t.t)+(r>>>16),r=(e.t>>>16)+(t.t>>>16)+(n>>>16),new k((65535&r)<<16|65535&n,o)}function I(e,t,n,r){var o,i;o=(65535&e.i)+(65535&t.i)+(65535&n.i)+(65535&r.i);var a=(65535&(i=(e.i>>>16)+(t.i>>>16)+(n.i>>>16)+(r.i>>>16)+(o>>>16)))<<16|65535&o;return o=(65535&e.t)+(65535&t.t)+(65535&n.t)+(65535&r.t)+(i>>>16),i=(e.t>>>16)+(t.t>>>16)+(n.t>>>16)+(r.t>>>16)+(o>>>16),new k((65535&i)<<16|65535&o,a)}function D(e,t,n,r,o){var i,a;i=(65535&e.i)+(65535&t.i)+(65535&n.i)+(65535&r.i)+(65535&o.i);var s=(65535&(a=(e.i>>>16)+(t.i>>>16)+(n.i>>>16)+(r.i>>>16)+(o.i>>>16)+(i>>>16)))<<16|65535&i;return i=(65535&e.t)+(65535&t.t)+(65535&n.t)+(65535&r.t)+(65535&o.t)+(a>>>16),a=(e.t>>>16)+(t.t>>>16)+(n.t>>>16)+(r.t>>>16)+(o.t>>>16)+(i>>>16),new k((65535&a)<<16|65535&i,s)}function A(e){var t=w(e,19),n=w(e,61),r=T(e,6);return new k(t.t^n.t^r.t,t.i^n.i^r.i)}function L(e){var t=w(e,1),n=w(e,8),r=T(e,7);return new k(t.t^n.t^r.t,t.i^n.i^r.i)}function M(e){var t=w(e,14),n=w(e,18),r=w(e,41);return new k(t.t^n.t^r.t,t.i^n.i^r.i)}var F=[new k(j[0],3609767458),new k(j[1],602891725),new k(j[2],3964484399),new k(j[3],2173295548),new k(j[4],4081628472),new k(j[5],3053834265),new k(j[6],2937671579),new k(j[7],3664609560),new k(j[8],2734883394),new k(j[9],1164996542),new k(j[10],1323610764),new k(j[11],3590304994),new k(j[12],4068182383),new k(j[13],991336113),new k(j[14],633803317),new k(j[15],3479774868),new k(j[16],2666613458),new k(j[17],944711139),new k(j[18],2341262773),new k(j[19],2007800933),new k(j[20],1495990901),new k(j[21],1856431235),new k(j[22],3175218132),new k(j[23],2198950837),new k(j[24],3999719339),new k(j[25],766784016),new k(j[26],2566594879),new k(j[27],3203337956),new k(j[28],1034457026),new k(j[29],2466948901),new k(j[30],3758326383),new k(j[31],168717936),new k(j[32],1188179964),new k(j[33],1546045734),new k(j[34],1522805485),new k(j[35],2643833823),new k(j[36],2343527390),new k(j[37],1014477480),new k(j[38],1206759142),new k(j[39],344077627),new k(j[40],1290863460),new k(j[41],3158454273),new k(j[42],3505952657),new k(j[43],106217008),new k(j[44],3606008344),new k(j[45],1432725776),new k(j[46],1467031594),new k(j[47],851169720),new k(j[48],3100823752),new k(j[49],1363258195),new k(j[50],3750685593),new k(j[51],3785050280),new k(j[52],3318307427),new k(j[53],3812723403),new k(j[54],2003034995),new k(j[55],3602036899),new k(j[56],1575990012),new k(j[57],1125592928),new k(j[58],2716904306),new k(j[59],442776044),new k(j[60],593698344),new k(j[61],3733110249),new k(j[62],2999351573),new k(j[63],3815920427),new k(3391569614,3928383900),new k(3515267271,566280711),new k(3940187606,3454069534),new k(4118630271,4000239992),new k(116418474,1914138554),new k(174292421,2731055270),new k(289380356,3203993006),new k(460393269,320620315),new k(685471733,587496836),new k(852142971,1086792851),new k(1017036298,365543100),new k(1126000580,2618297676),new k(1288033470,3409855158),new k(1501505948,4234509866),new k(1607167915,987167468),new k(1816402316,1246189591)];function O(e){return"SHA-384"===e?[new k(3418070365,C[0]),new k(1654270250,C[1]),new k(2438529370,C[2]),new k(355462360,C[3]),new k(1731405415,C[4]),new k(41048885895,C[5]),new k(3675008525,C[6]),new k(1203062813,C[7])]:[new k(y[0],4089235720),new k(y[1],2227873595),new k(y[2],4271175723),new k(y[3],1595750129),new k(y[4],2917565137),new k(y[5],725511199),new k(y[6],4215389547),new k(y[7],327033209)]}function R(e,t){var n,r,o,i,a,s,l,c,u,d,p,h,f,g,m,x=[];for(n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],c=t[7],p=0;p<80;p+=1)p<16?(h=2*p,x[p]=new k(e[h],e[h+1])):x[p]=I(A(x[p-2]),x[p-7],L(x[p-15]),x[p-16]),u=D(c,M(a),(g=s,m=l,new k((f=a).t&g.t^~f.t&m.t,f.i&g.i^~f.i&m.i)),F[p],x[p]),d=P(S(n),E(n,r,o)),c=l,l=s,s=a,a=P(i,u),i=o,o=r,r=n,n=P(u,d);return t[0]=P(n,t[0]),t[1]=P(r,t[1]),t[2]=P(o,t[2]),t[3]=P(i,t[3]),t[4]=P(a,t[4]),t[5]=P(s,t[5]),t[6]=P(l,t[6]),t[7]=P(c,t[7]),t}var B=function(e){(0,p.Z)(n,e);var t=(0,h.Z)(n);function n(e,r,o){var i;if((0,g.Z)(this,n),"SHA-384"!==e&&"SHA-512"!==e)throw new Error("Chosen SHA variant is not supported");var a=o||{};return(i=t.call(this,e,r,o)).S=i.k,i.N=!0,i.C=-1,i.g=v(i.o,i.h,i.C),i.H=R,i.L=function(e){return e.slice()},i.M=O,i.I=function(t,n,r,o){return function(e,t,n,r,o){for(var i,a=31+(t+129>>>10<<5),s=t+n;e.length<=a;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[a]=4294967295&s,e[a-1]=s/4294967296|0,i=0;i<e.length;i+=32)r=R(e.slice(i,i+32),r);return"SHA-384"===o?[r[0].t,r[0].i,r[1].t,r[1].i,r[2].t,r[2].i,r[3].t,r[3].i,r[4].t,r[4].i,r[5].t,r[5].i]:[r[0].t,r[0].i,r[1].t,r[1].i,r[2].t,r[2].i,r[3].t,r[3].i,r[4].t,r[4].i,r[5].t,r[5].i,r[6].t,r[6].i,r[7].t,r[7].i]}(t,n,r,o,e)},i.B=O(e),i.m=1024,i.v="SHA-384"===e?384:512,i.Y=!1,a.hmacKey&&i.X(function(e,t,n,r){var o="hmacKey must include a value and format";if(!t)throw new Error(o);if(void 0===t.value||!t.format)throw new Error(o);return v(t.format,t.encoding||"UTF8",n)(t.value)}(0,a.hmacKey,i.C)),i}return(0,f.Z)(n)}(function(){function e(t,n,r){(0,g.Z)(this,e);var o=r||{};if(this.o=n,this.h=o.encoding||"UTF8",this.numRounds=o.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.u=t,this.l=[],this.A=0,this.p=!1,this.R=0,this.U=!1,this.T=[],this.F=[]}return(0,f.Z)(e,[{key:"update",value:function(e){var t,n=0,r=this.m>>>5,o=this.g(e,this.l,this.A),i=o.binLen,a=o.value,s=i>>>5;for(t=0;t<s;t+=r)n+this.m<=i&&(this.B=this.H(a.slice(t,t+r),this.B),n+=this.m);return this.R+=n,this.l=a.slice(n>>>5),this.A=i%this.m,this.p=!0,this}},{key:"getHash",value:function(e,t){var n,r,o=this.v,i=Z(t);if(this.Y){if(-1===i.outputLen)throw new Error("Output length must be specified in options");o=i.outputLen}var a=b(e,o,this.C,i);if(this.U&&this.S)return a(this.S(i));for(r=this.I(this.l.slice(),this.A,this.R,this.L(this.B),o),n=1;n<this.numRounds;n+=1)this.Y&&o%32!=0&&(r[r.length-1]&=16777215>>>24-o%32),r=this.I(r,o,0,this.M(this.u),o);return a(r)}},{key:"setHMACKey",value:function(e,t,n){if(!this.N)throw new Error("Variant does not support HMAC");if(this.p)throw new Error("Cannot set MAC key after calling update");var r=v(t,(n||{}).encoding||"UTF8",this.C);this.X(r(e))}},{key:"X",value:function(e){var t,n=this.m>>>3,r=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.U)throw new Error("MAC key already set");for(n<e.binLen/8&&(e.value=this.I(e.value,e.binLen,0,this.M(this.u),this.v));e.value.length<=r;)e.value.push(0);for(t=0;t<=r;t+=1)this.T[t]=909522486^e.value[t],this.F[t]=1549556828^e.value[t];this.B=this.H(this.T,this.B),this.R=this.m,this.U=!0}},{key:"getHMAC",value:function(e,t){var n=Z(t);return b(e,this.v,this.C,n)(this.k())}},{key:"k",value:function(){var e;if(!this.U)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.I(this.l.slice(),this.A,this.R,this.L(this.B),this.v);return e=this.H(this.F,this.M(this.u)),e=this.I(t,this.v,this.m,e,this.v)}}]),e}()),_=function(e){crypto&&crypto.subtle&&crypto.subtle.digest("SHA-512",e).then((function(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("").substr(0,64)})),console.warn("crypto.subtle is not available in this environment - using jsSHA instead.");var t=new B("SHA-512","ARRAYBUFFER");t.update(e);var n=t.getHash("HEX");return Promise.resolve(n.substr(0,64))},N=function(){var e=(0,o.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var r=t.target?t.target.result:null;r instanceof ArrayBuffer?e(_(r)):n(new Error("Error reading file (arraybuffer issue)."))},r.onerror=function(){n(new Error("Error reading file (errored)."))},r.onabort=function(){n(new Error("Error reading file (aborted)."))},r.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=n(48409),H=n(4964),V=50,W=15e6,z=l().create({baseURL:c.O1.baseUrl,withCredentials:!(0,U._F)()}),G=l().create({baseURL:c.Nx.baseUrl}),Y=l().create({baseURL:c.Nx.baseUrl,withCredentials:!(0,U._F)()}),q=null,X=function(){return q},J=function(e){if(!q)return e;var t=-1===e.indexOf("?")?"?":"&";return e+t+"gd_resource_token="+encodeURIComponent(q)},K=function(){var e=(0,o.Z)(a().mark((function e(t,n,r){var o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,n,(function(){return z.get(J("/".concat(n,"/versions/").concat(r,".zip")),{responseType:"blob"})}));case 2:return o=e.sent,e.prev=3,e.next=6,(0,H.H)(o.data);case 6:return i=e.sent,JSON.parse(i),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Q=function(){var e=(0,o.Z)(a().mark((function e(t,n,r){var o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return o=e.sent,e.abrupt("return",o);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response||403!==e.t0.response.status){e.next=16;break}return e.next=12,te(t,n);case 12:return e.next=14,r();case 14:return i=e.sent,e.abrupt("return",i);case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),$=function(e){var t=e,n=e.indexOf("?");n>=0&&(t=e.substring(0,n));var r=t.lastIndexOf("/")+1,o=t.indexOf(".zip");return e.substring(r,o)},ee=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return i=o.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,G.get("/project/".concat(n,"/version"),{headers:{Authorization:s},params:{userId:i}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return",!1);case 3:return i=o.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,Y.get("/project/".concat(n,"/action/authorize"),{headers:{Authorization:s},params:{userId:i},validateStatus:function(e){return!0}});case 9:return l=e.sent,(0,U._F)()&&l.data&&"string"===typeof l.data.gd_resource_jwt&&(a=l.data.gd_resource_jwt,q=a),e.abrupt("return",l.status>=200&&l.status<400);case 12:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,U._F)()){e.next=4;break}q=null,e.next=6;break;case 4:return e.next=6,Y.get("/action/clear-authorization");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return",null);case 3:return i=o.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,G.post("/project",n,{headers:{Authorization:s},params:{userId:i}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=(0,o.Z)(a().mark((function e(t){var n,o,i,s,l,c,u,d,p,h,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.authenticatedUser,o=t.cloudProjectId,i=t.zippedProject,s=t.previousVersion,l=n.getAuthorizationHeader,c=n.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return u=c.uid,e.next=7,l();case 7:return d=e.sent,e.next=10,ue(n,o);case 10:if(p=e.sent){e.next=13;break}return e.abrupt("return");case 13:return h=$(p),e.next=16,Q(n,o,(function(){return z.post(J(p),i,{headers:{"content-type":"application/zip"}})}));case 16:return e.next=18,G.post("/project/".concat(o,"/action/commit"),(0,r.Z)({newVersion:h},s?{previousVersion:s}:void 0),{headers:{Authorization:d},params:{userId:u}});case 18:return f=e.sent,e.abrupt("return",f.data);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,o.Z)(a().mark((function e(t,n,r,i){var s,l,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t,n,r);case 2:return s=e.sent,l=Array(s.length),u=0,e.next=7,d().withConcurrency(10).for(s).process(function(){var e=(0,o.Z)(a().mark((function e(r){var o,d,p,h,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.resourceFile,d=r.presignedUrl,p=r.index,e.prev=1,e.next=4,Q(t,n,(function(){return z.post(J(d),o,{headers:{"content-type":o.type}})}));case 4:h="".concat(c.O1.baseUrl).concat(d),f=h.substr(0,h.indexOf("?")),l[p]={error:null,resourceFile:o,url:f},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),l[p]={error:e.t0,resourceFile:o,url:null};case 12:i(++u,s.length);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),ae=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,G.get("project",{headers:{Authorization:r},params:{userId:n}});case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return i=o.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,G.get("/project/".concat(n),{headers:{Authorization:s},params:{userId:i}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=(0,o.Z)(a().mark((function e(t,n,r){var o,i,s,l,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,i=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s={name:r.name?r.name.slice(0,V):void 0,gameId:r.gameId},l=i.uid,e.next=7,o();case 7:return c=e.sent,e.next=10,G.patch("/project/".concat(n),s,{headers:{Authorization:c},params:{userId:l}});case 10:return u=e.sent,e.abrupt("return",u.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return i=o.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,G.delete("/project/".concat(n),{headers:{Authorization:s},params:{userId:i}});case 9:return l=e.sent,e.abrupt("return",l.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r,o,i,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return i=o.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,G.post("/project/".concat(n,"/action/create-presigned-urls"),{resources:["newProjectVersion"]},{headers:{Authorization:s},params:{userId:i}});case 9:if((l=e.sent).data&&l.data[0]){e.next=12;break}return e.abrupt("return");case 12:return e.abrupt("return",l.data[0]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=(0,o.Z)(a().mark((function e(t,n,r){var i,s,l,c,u,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}throw new Error("User is not authenticated.");case 3:return l=s.uid,e.next=6,i();case 6:return c=e.sent,e.next=9,Promise.all(r.map(function(){var e=(0,o.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.t1=t.size,e.next=4,N(t);case 4:return e.t2=e.sent,e.abrupt("return",{type:"project-resource",filename:e.t0,size:e.t1,sha512TruncatedTo256:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return u=e.sent,e.next=12,G.post("/project/".concat(n,"/action/create-presigned-urls"),{requestedResources:u},{headers:{Authorization:c},params:{userId:l}});case 12:if((d=e.sent).data&&Array.isArray(d.data)){e.next=15;break}throw new Error("Response does not contain pre-signed urls for upload.");case 15:return p=d.data.map((function(e,t){return{resourceFile:r[t],presignedUrl:e,index:t}})),e.abrupt("return",p);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(){var e=(0,o.Z)(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentVersion){e.next=2;break}throw new Error("Opening of project without current version not handled");case 2:return e.next=4,z.get(J("/".concat(t.id,"/versions/").concat(n||t.currentVersion,".zip")),{responseType:"blob"});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var he=new RegExp("".concat(c.O1.baseUrl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\/(.*)\\/resources\\/(.*\\/)*([a-zA-Z0-9]+)-([^\\?\\n\\r]+)")),fe=function(e){if(e.startsWith(c.O1.baseUrl)){var t=he.exec(e);if(t)return t[4]}return-1!==e.lastIndexOf("/")?e.substring(e.lastIndexOf("/")+1):e},ge=function(e){if(e.startsWith(c.O1.baseUrl)){var t=he.exec(e);if(t)return t[1]}return null}},36465:function(e,t,n){"use strict";n.d(t,{Ab:function(){return p},B$:function(){return g},GT:function(){return b},SV:function(){return v},bW:function(){return x},cx:function(){return f},mR:function(){return m},zu:function(){return h}});var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(70983),c=n.n(l),u=n(45911),d=s().create({baseURL:u.$e.baseUrl}),p=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onlyAppStorePrivateAssetPacks,e.next=3,d.get("/asset-pack",{params:{withAppStoreProductId:!!n}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sellerId,r=t.productType,e.next=3,d.get("/user/".concat(n,"/product"),{params:{productType:r}});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,o=n.productType,a=n.role,e.next=3,t();case 3:return s=e.sent,e.next=6,d.get("/purchase",{params:{userId:r,productType:o,role:a},headers:{Authorization:s}});case 6:return l=e.sent,e.abrupt("return",l.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,d.post("/asset-pack/action/authorize",{},{headers:{Authorization:o},params:{userId:r}});case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e,t){return-1!==e.indexOf("?")?"".concat(e,"&token=").concat(t):"".concat(e,"?token=").concat(encodeURIComponent(t))},x=function(e){return e.startsWith("https://private-assets.engine.spacexpanse.org/")||e.startsWith("https://private-assets-dev.engine.spacexpanse.org/")},v=function(e){var t=e.split("?")[0];return c().basename(t)},b=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,s,l,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.priceName,o=n.productId,a=n.userId,s=n.customerEmail,l=n.password,e.next=3,t();case 3:return c=e.sent,e.next=6,d.post("/purchase/action/create-stripe-checkout-session",{priceName:r,productId:o,customerEmail:s,password:l},{headers:{Authorization:c},params:{userId:a}});case 6:if((u=e.sent).data){e.next=9;break}throw new Error("Could not create the checkout session.");case 9:if(u.data.sessionUrl){e.next=11;break}throw new Error("Could not find the session url.");case 11:return e.abrupt("return",u.data.sessionUrl);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},94446:function(e,t,n){"use strict";n.d(t,{Qp:function(){return a},cG:function(){return s},cT:function(){return c},r1:function(){return l}});var r=n(14446),o=n.n(r),i=n(45911),a=function(){return o().get("".concat(i.Ud.baseUrl,"/tutorial")).then((function(e){return e.data}))},s=function(e){switch(e){case"ParticleSystem::ParticleEmitter":return["in-depth-tutorial-particle-emitter"];case"Lighting::LightObject":return["flickering-dynamic-light-effect"];case"BitmapText::BitmapTextObject":case"TileMap::TileMap":return["intermediate-bitmap-text-and-tilemap"];default:return[]}},l=function(e){switch(e){case"Tween::TweenBehavior":return["tween-behavior"];case"AnchorBehavior::AnchorBehavior":return["responsive-ui"];case"Physics2::Physics2Behavior":return["in-depth-tutorial-physics-engine-two"];case"PlatformBehavior::PlatformerObjectBehavior":case"PlatformBehavior::PlatformBehavior":return["in-depth-tutorial-platformer"];case"TopDownMovementBehavior::TopDownMovementBehavior":return["in-depth-tutorial-top-down-behavior"];default:return[]}},c=function(e){switch(e){case"CameraX":case"CameraY":case"RotateCamera":case"ZoomCamera":case"FixCamera":case"CentreCamera":return["smooth-camera-movement"];case"ChangeTimeScale":return["pause-menu"];case"EcrireFichierExp":case"EcrireFichierTxt":case"LireFichierExp":case"LireFichierTxt":return["intermediate-storage"];case"PlatformBehavior::SimulateJumpKey":return["simple-trampoline-platformer"];case"AjoutObjConcern":case"PickNearest":case"AjoutHasard":return["intermediate-object-picking"];case"ToggleObjectVariableAsBoolean":case"ToggleGlobalVariableAsBoolean":case"ToggleSceneVariableAsBoolean":return["iIntermediate-toggle-states-with-variable"];case"Scene":case"PushScene":case"PopScene":return["intermediate-level-select-menu"];case"Animation":case"AnimationName":case"ChangeAnimation":case"ChangeAnimationName":return["intermediate-changing-animations"];case"PopStartedTouch":case"MouseButtonPressed":return["intermediate-touchscreen-controls"];default:return[]}}},68151:function(e,t,n){"use strict";n.d(t,{Bg:function(){return v},Gs:function(){return c},Hm:function(){return d},Mm:function(){return g},VZ:function(){return u},XT:function(){return w},Xp:function(){return f},YB:function(){return x},e_:function(){return C},eu:function(){return y},f3:function(){return k},jj:function(){return Z},jt:function(){return h},mX:function(){return j},oI:function(){return p},rE:function(){return m},rq:function(){return b}});var r=n(15861),o=n(64687),i=n.n(o),a=n(14446),s=n.n(a),l=n(45911),c=5,u=300,d=function(){return[{planId:null,name:"SpeXEngine Free & Open-source",monthlyPriceInEuros:0,smallDescription:{id:"Use SpeXEngine for free, forever. We also give you access to these additional online services for free."},descriptionBullets:[{message:{id:"10 cloud projects with 50MB of resources per project and 2-days version history."}},{message:{id:"2 packagings per day for Android and for desktop."}},{message:{id:"3 leaderboards per game and 10 player feedback responses per game."}}]},{planId:"gdevelop_silver",legacyPlanId:"gdevelop_indie",name:"SpeXEngine Silver",monthlyPriceInEuros:4.99,smallDescription:{id:"Build more and faster."},descriptionBullets:[{message:{id:"50 cloud projects with 250MB of resources per project and 3-month version history."}},{message:{id:"10 packagings per day for Android and for desktop."}},{message:{id:"Unlimited leaderboards and unlimited player feedback responses."}},{message:{id:"Immerse your players by removing the SpeXEngine watermark or the SpeXEngine logo when the game loads."}}]},{planId:"gdevelop_gold",legacyPlanId:"gdevelop_pro",name:"SpeXEngine Gold",monthlyPriceInEuros:9.99,smallDescription:{id:"Experimented creators, ambitious games."},descriptionBullets:[{message:{id:"100 cloud projects with 500MB of resources per project and one-year version history."}},{message:{id:"100 packagings per day for Android and for desktop."}},{message:{id:"Unlimited leaderboards and unlimited player feedback responses."}},{message:{id:"Immerse your players by removing the SpeXEngine watermark or the SpeXEngine logo when the game loads."}}]},{planId:"gdevelop_startup",name:"SpeXEngine Startup",monthlyPriceInEuros:30,smallDescription:{id:"Small game studios and startups."},descriptionBullets:[{message:{id:"500 cloud projects with 5GB of resources per project."}},{message:{id:"Unlimited packagings per day for Android, web and desktop."}},{message:{id:"Unlimited leaderboards and unlimited player feedback responses."}},{message:{id:"Immerse your players by removing the SpeXEngine watermark or the SpeXEngine logo when the game loads."}}]},{planId:"gdevelop_education",name:"SpeXEngine Education",monthlyPriceInEuros:2.99,yearlyPriceInEuros:29.99,isPerUser:!0,smallDescription:{id:"Schools and universities."},descriptionBullets:[{message:{id:"Students anonymity."}},{message:{id:"Organize students per classroom."}},{message:{id:"You and your students receive a Gold subscription."}}]}]},p=function(){return[{planId:"gdevelop_indie",name:"SpeXEngine Indie (Legacy)",monthlyPriceInEuros:2,smallDescription:{id:"Build more and faster."},descriptionBullets:[{message:{id:"50 cloud projects with 250MB of resources per project and 3-month version history."}},{message:{id:"10 packagings per day for Android and for desktop."}},{message:{id:"Unlimited leaderboards and unlimited player feedback responses."}}]},{planId:"gdevelop_pro",name:"SpeXEngine Pro (Legacy)",monthlyPriceInEuros:7,smallDescription:{id:"Experimented creators, ambitious games."},descriptionBullets:[{message:{id:"100 cloud projects with 500MB of resources per project and one-year version history."}},{message:{id:"70 packagings per day for Android and for desktop."}},{message:{id:"Unlimited leaderboards and unlimited player feedback responses."}},{message:{id:"Immerse your players by removing SpeXEngine logo when the game loads."}}]}]},h={planId:null,monthlyPriceInEuros:null,name:"SpeXEngine for businesses, game studios and professionals",smallDescription:{id:"Dedicated support, branding and solutions for engaging your players."},descriptionBullets:[]},f=function(e,t){return e().then((function(e){return s().get("".concat(l.l7.baseUrl,"/usage"),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},g=function(e,t){return e().then((function(e){return s().get("".concat(l.l7.baseUrl,"/limits"),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},m=function(e,t){return e().then((function(e){return s().get("".concat(l.l7.baseUrl,"/subscription-v2"),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},x=function(e,t,n){return e().then((function(e){return s().post("".concat(l.l7.baseUrl,"/subscription-v2"),n,{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data}))},v=function(e,t){return!!e.stripeSubscriptionId&&!t.startsWith("gdevelop_education")},b=function(e){return!!e&&!!e.purchaselyPlan},j=function(e){return!!e&&("MANUALLY_ADDED"===e.stripeSubscriptionId||"MANUALLY_ADDED"===e.stripeCustomerId)},C=function(e){return!(!e||!e.planId||e.redemptionCodeValidUntil&&!(e.redemptionCodeValidUntil>Date.now()))},y=function(e){return s().post("".concat(l.l7.baseUrl,"/upload-options/signed-url"),e).then((function(e){return e.data}))},Z=function(e,t){return e().then((function(e){return s().post("".concat(l.l7.baseUrl,"/subscription-v2/action/redirect-to-portal"),{},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return e.data})).then((function(e){var t=e.sessionPortalUrl;if(!t||"string"!==typeof t)throw new Error("Could not find the session portal url.");return t}))},k=function(e){var t=e.planId,n=e.userId,r=e.userEmail,o=e.quantity,i=new URL("".concat(l.l7.baseUrl,"/subscription-v2/action/redirect-to-checkout"));return i.searchParams.set("planId",t),i.searchParams.set("userId",n),i.searchParams.set("customerEmail",r),void 0!==o&&o>1&&i.searchParams.set("quantity",o.toString()),i.toString()},w=function(){var e=(0,r.Z)(i().mark((function e(t,n,r){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,s().post("".concat(l.l7.baseUrl,"/redemption-code/action/redeem-code"),{code:r},{params:{userId:n},headers:{Authorization:o}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},93431:function(e,t,n){"use strict";n.d(t,{Ty:function(){return A},Pk:function(){return D},r0:function(){return C},D1:function(){return Z},TL:function(){return y},HW:function(){return k},me:function(){return j}});var r=n(36600),o=n(28381),i=n(14446),a=n.n(i),s=n(3570),l=n(22853),c=n(1413),u=n(78118),d=n(29343),p=o.memo((function(e){return(0,d.jsxs)(u.Z,(0,c.Z)((0,c.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,d.jsx)("path",{d:"M19.9437 5.8767C19.8957 4.81185 19.7237 4.08327 19.4796 3.44676C19.2236 2.79023 18.8835 2.22978 18.3274 1.67734C17.7713 1.1249 17.2152 0.776621 16.559 0.52442C15.9229 0.276221 15.1948 0.108086 14.1305 0.060048C13.0623 0.0120096 12.7223 0 10.0097 0C7.29317 0 6.95311 0.0120096 5.88889 0.060048C4.82468 0.108086 4.09654 0.280224 3.46041 0.52442C2.80028 0.780625 2.24016 1.1209 1.68805 1.67734C1.13594 2.23379 0.787874 2.79023 0.535824 3.44676C0.291775 4.08327 0.11974 4.81185 0.0717308 5.8767C0.0237211 6.94556 0.0117188 7.28583 0.0117188 10C0.0117188 12.7182 0.0237211 13.0584 0.0717308 14.1233C0.11974 15.1882 0.291775 15.9167 0.535824 16.5532C0.791875 17.2098 1.13194 17.7702 1.68805 18.3227C2.24016 18.8791 2.80028 19.2234 3.45641 19.4756C4.09253 19.7238 4.82068 19.8919 5.88489 19.94C6.95311 19.988 7.29317 20 10.0057 20C12.7223 20 13.0623 19.988 14.1265 19.94C15.1908 19.8919 15.9189 19.7198 16.555 19.4756C17.2112 19.2194 17.7713 18.8791 18.3234 18.3227C18.8755 17.7662 19.2236 17.2098 19.4756 16.5532C19.7237 15.9167 19.8917 15.1882 19.9397 14.1233C19.9877 13.0544 19.9997 12.7142 19.9997 10C19.9997 7.28583 19.9917 6.94155 19.9437 5.8767ZM18.1473 14.0432C18.1033 15.02 17.9393 15.5524 17.8033 15.9007C17.6232 16.3651 17.4032 16.7014 17.0511 17.0536C16.6991 17.4059 16.367 17.6181 15.8989 17.8062C15.5468 17.9424 15.0147 18.1065 14.0425 18.1505C12.9903 18.1986 12.6743 18.2106 10.0017 18.2106C7.32918 18.2106 7.01312 18.1986 5.96091 18.1505C4.98471 18.1065 4.45261 17.9424 4.10454 17.8062C3.64044 17.6261 3.30438 17.4059 2.95231 17.0536C2.60024 16.7014 2.38819 16.3691 2.20016 15.9007C2.06413 15.5484 1.9001 15.016 1.85609 14.0432C1.80808 12.9904 1.79608 12.6741 1.79608 10C1.79608 7.32586 1.80808 7.00961 1.85609 5.95677C1.9001 4.97998 2.06413 4.44756 2.20016 4.09928C2.38019 3.63491 2.60024 3.29864 2.95231 2.94636C3.30438 2.59408 3.63644 2.38191 4.10454 2.19376C4.45661 2.05765 4.98871 1.89351 5.96091 1.84948C7.01312 1.80144 7.32918 1.78943 10.0017 1.78943C12.6743 1.78943 12.9903 1.80144 14.0425 1.84948C15.0187 1.89351 15.5508 2.05765 15.8989 2.19376C16.363 2.3739 16.6991 2.59408 17.0511 2.94636C17.4032 3.29864 17.6152 3.63091 17.8033 4.09928C17.9393 4.45156 18.1033 4.98399 18.1473 5.95677C18.1954 7.00961 18.2074 7.32586 18.2074 10C18.2074 12.6741 18.1914 12.9904 18.1473 14.0432Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M10.0013 4.85989C7.16072 4.85989 4.86426 7.16173 4.86426 10C4.86426 12.8423 7.16472 15.1401 10.0013 15.1401C12.8379 15.1401 15.1383 12.8343 15.1383 10C15.1383 7.15772 12.8419 4.85989 10.0013 4.85989ZM10.0013 13.3347C8.16092 13.3347 6.66862 11.8415 6.66862 10C6.66862 8.15852 8.16092 6.66533 10.0013 6.66533C11.8417 6.66533 13.334 8.15852 13.334 10C13.334 11.8415 11.8417 13.3347 10.0013 13.3347Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M15.3389 5.86069C16.0018 5.86069 16.5392 5.323 16.5392 4.65973C16.5392 3.99646 16.0018 3.45877 15.3389 3.45877C14.676 3.45877 14.1387 3.99646 14.1387 4.65973C14.1387 5.323 14.676 5.86069 15.3389 5.86069Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M0 10C0 12.7182 0.0120024 13.0584 0.060012 14.1233C0.108022 15.1882 0.280056 15.9167 0.524105 16.5532C0.780156 17.2098 1.12022 17.7702 1.67634 18.3227C2.22845 18.8751 2.78856 19.2234 3.44469 19.4756C4.08082 19.7238 4.80896 19.8919 5.87318 19.94C6.94139 19.988 7.28146 20 9.994 20C12.7105 20 13.0506 19.988 14.1148 19.94C15.179 19.8919 15.9072 19.7198 16.5433 19.4756C17.1994 19.2194 17.7596 18.8791 18.3117 18.3227C18.8638 17.7702 19.2118 17.2098 19.4639 16.5532C19.7119 15.9167 19.88 15.1882 19.928 14.1233C19.976 13.0544 19.988 12.7142 19.988 10C19.988 7.28183 19.976 6.94155 19.928 5.8767C19.88 4.81185 19.7079 4.08327 19.4639 3.44676C19.2078 2.79023 18.8678 2.22978 18.3117 1.67734C17.7636 1.1209 17.2034 0.776621 16.5473 0.52442C15.9112 0.276221 15.183 0.108086 14.1188 0.060048C13.0506 0.0120096 12.7105 0 9.998 0C7.28146 0 6.94139 0.0120096 5.87718 0.060048C4.81296 0.108086 4.08482 0.280224 3.44869 0.52442C2.79256 0.780625 2.23245 1.1209 1.68034 1.67734C1.12823 2.23379 0.780156 2.79023 0.528106 3.44676C0.280056 4.08327 0.108022 4.81185 0.060012 5.8767C0.0120024 6.94155 0 7.28183 0 10ZM1.80436 10C1.80436 7.32986 1.81636 7.00961 1.86437 5.95677C1.90838 4.97998 2.07241 4.44756 2.20844 4.09928C2.38848 3.63491 2.60852 3.29864 2.96059 2.94636C3.31266 2.59408 3.64473 2.38191 4.11282 2.19376C4.46489 2.05765 4.997 1.89351 5.96919 1.84948C7.0214 1.80144 7.33747 1.78943 10.01 1.78943C12.6825 1.78943 12.9986 1.80144 14.0508 1.84948C15.027 1.89351 15.5591 2.05765 15.9072 2.19376C16.3713 2.3739 16.7073 2.59408 17.0594 2.94636C17.4115 3.29864 17.6235 3.63091 17.8116 4.09928C17.9476 4.45156 18.1116 4.98399 18.1556 5.95677C18.2036 7.00961 18.2156 7.32586 18.2156 10C18.2156 12.6741 18.2036 12.9904 18.1556 14.0432C18.1116 15.02 17.9476 15.5524 17.8116 15.9007C17.6315 16.3651 17.4115 16.7014 17.0594 17.0536C16.7073 17.4059 16.3753 17.6181 15.9072 17.8062C15.5551 17.9424 15.023 18.1065 14.0508 18.1505C12.9986 18.1986 12.6825 18.2106 10.01 18.2106C7.33747 18.2106 7.0214 18.1986 5.96919 18.1505C4.993 18.1065 4.46089 17.9424 4.11282 17.8062C3.64873 17.6261 3.31266 17.4059 2.96059 17.0536C2.60852 16.7014 2.39648 16.3691 2.20844 15.9007C2.07241 15.5484 1.90838 15.016 1.86437 14.0432C1.81236 12.9904 1.80436 12.6701 1.80436 10Z",fill:"currentColor"})]}))})),h=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({},e),{},{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,d.jsx)("path",{d:"M9.99 0C4.47 0 0 4.48 0 10C0 15.52 4.47 20 9.99 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 9.99 0ZM16.92 6H13.97C13.65 4.75 13.19 3.55 12.59 2.44C14.43 3.07 15.96 4.35 16.92 6ZM10 2.04C10.83 3.24 11.48 4.57 11.91 6H8.09C8.52 4.57 9.17 3.24 10 2.04ZM2.26 12C2.1 11.36 2 10.69 2 10C2 9.31 2.1 8.64 2.26 8H5.64C5.56 8.66 5.5 9.32 5.5 10C5.5 10.68 5.56 11.34 5.64 12H2.26ZM3.08 14H6.03C6.35 15.25 6.81 16.45 7.41 17.56C5.57 16.93 4.04 15.66 3.08 14ZM6.03 6H3.08C4.04 4.34 5.57 3.07 7.41 2.44C6.81 3.55 6.35 4.75 6.03 6ZM10 17.96C9.17 16.76 8.52 15.43 8.09 14H11.91C11.48 15.43 10.83 16.76 10 17.96ZM12.34 12H7.66C7.57 11.34 7.5 10.68 7.5 10C7.5 9.32 7.57 8.65 7.66 8H12.34C12.43 8.65 12.5 9.32 12.5 10C12.5 10.68 12.43 11.34 12.34 12ZM12.59 17.56C13.19 16.45 13.65 15.25 13.97 14H16.92C15.96 15.65 14.43 16.93 12.59 17.56ZM14.36 12C14.44 11.34 14.5 10.68 14.5 10C14.5 9.32 14.44 8.66 14.36 8H17.74C17.9 8.64 18 9.31 18 10C18 10.69 17.9 11.36 17.74 12H14.36Z",fill:"currentColor"})}))})),f=n(45658),g=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,d.jsx)("path",{d:"M17.5881 13.5462C17.4864 13.2694 17.2926 13.1213 17.0719 12.9986C17.0304 12.9743 16.9922 12.9548 16.9597 12.9399C16.8939 12.9058 16.8265 12.8729 16.7596 12.8381C16.0717 12.4734 15.5345 12.0133 15.162 11.4679C15.0562 11.3144 14.9644 11.1517 14.8878 10.9817C14.856 10.8908 14.8575 10.8392 14.8803 10.792C14.9029 10.7557 14.9329 10.7245 14.9682 10.7004C15.0864 10.6222 15.2084 10.5429 15.291 10.4894C15.4384 10.394 15.5551 10.3185 15.6303 10.265C15.9127 10.0675 16.1102 9.85762 16.2337 9.62309C16.3198 9.46105 16.37 9.28236 16.3809 9.09918C16.3918 8.916 16.3632 8.73262 16.2969 8.56151C16.1098 8.06925 15.6449 7.76364 15.0816 7.76364C14.9627 7.76353 14.8442 7.77607 14.7281 7.80105C14.697 7.80778 14.666 7.81489 14.6357 7.82274C14.6409 7.48609 14.6334 7.13073 14.6035 6.78099C14.4973 5.55146 14.0667 4.90695 13.6179 4.393C13.3304 4.07093 12.9918 3.79845 12.6158 3.58652C11.9346 3.1975 11.1622 3 10.3202 3C9.47815 3 8.70946 3.1975 8.02755 3.58652C7.65054 3.79852 7.31128 4.07154 7.02358 4.39449C6.5747 4.90845 6.14416 5.55407 6.03793 6.78248C6.00801 7.13223 6.00052 7.48946 6.00539 7.82424C5.97509 7.81638 5.94442 7.80928 5.91337 7.80254C5.7972 7.77756 5.67871 7.76502 5.55988 7.76514C4.99618 7.76514 4.53047 8.07074 4.34419 8.563C4.27761 8.73419 4.24866 8.91771 4.25931 9.10108C4.26996 9.28445 4.31996 9.46338 4.40591 9.62571C4.52973 9.86024 4.72723 10.0701 5.00964 10.2676C5.08445 10.32 5.20154 10.3955 5.34891 10.492C5.42859 10.5436 5.54492 10.6192 5.65901 10.6948C5.69893 10.7206 5.73285 10.7546 5.75851 10.7946C5.78245 10.8436 5.7832 10.8964 5.74766 10.9936C5.67208 11.1601 5.58182 11.3194 5.47796 11.4698C5.11363 12.0029 4.59219 12.4547 3.92637 12.8164C3.57363 13.0035 3.20705 13.1284 3.05219 13.5492C2.93549 13.8668 3.0118 14.2281 3.30842 14.5326C3.41729 14.6463 3.54356 14.7418 3.68248 14.8158C3.97155 14.9746 4.27893 15.0976 4.5978 15.182C4.66361 15.1989 4.72608 15.2269 4.78259 15.2646C4.89069 15.3593 4.87536 15.5018 5.01937 15.7105C5.09166 15.8184 5.18352 15.9118 5.29019 15.9858C5.59243 16.1946 5.93207 16.2076 6.29192 16.2215C6.61697 16.2338 6.98542 16.248 7.40624 16.3868C7.58055 16.4444 7.76159 16.5559 7.97144 16.6861C8.4753 16.9958 9.16506 17.4196 10.3194 17.4196C11.4738 17.4196 12.1684 16.9935 12.676 16.6827C12.8843 16.5548 13.0643 16.4444 13.2337 16.3883C13.6545 16.2492 14.023 16.2353 14.348 16.223C14.7079 16.2091 15.0475 16.1961 15.3497 15.9873C15.4761 15.8992 15.5813 15.7843 15.658 15.6507C15.7616 15.4745 15.759 15.3514 15.8562 15.2654C15.9092 15.2294 15.9679 15.2026 16.0298 15.1861C16.353 15.1015 16.6646 14.9773 16.9575 14.8165C17.1051 14.7373 17.2379 14.6333 17.3502 14.509L17.354 14.5046C17.6323 14.2068 17.7022 13.8559 17.5881 13.5462Z",fill:"currentColor"})}))})),m=n(44023),x=n(42839),v=n(44579),b=n(45911),j=function(e){return a().get("".concat(b.ST.baseUrl,"/user-public-profile/search"),{params:{username:e,type:"creator"}}).then((function(e){return e.data}))},C=function(e){return a().get("".concat(b.ST.baseUrl,"/user/").concat(e,"/badge")).then((function(e){return e.data}))},y=function(e){return a().get("".concat(b.ST.baseUrl,"/user-public-profile"),{params:{id:e.join(",")}}).then((function(e){return e.data}))},Z=function(e){return a().get("".concat(b.ST.baseUrl,"/user-public-profile/").concat(e)).then((function(e){return e.data}))},k=function(e){return a().get("".concat(b.ST.baseUrl,"/username-availability/").concat(e)).then((function(e){return e.data}))},w=/^https:\/\/[^ ]+$/,T=(0,d.jsx)(r.Trans,{id:"Please enter a valid URL, starting with https://"}),E=/^https:\/\/discord[^ ]+$/,S=(0,d.jsx)(r.Trans,{id:"Please enter a valid URL, starting with https://discord"}),P=/^$|^(?!@)/,I=(0,d.jsx)(r.Trans,{id:"You don't need to add the @ in your username"}),D={getFormattingError:function(e){return e&&!w.test(e)?T:void 0},maxLength:150},A={personalWebsiteLink:{icon:(0,d.jsx)(h,{}),getFormattingError:function(e){return e&&!w.test(e)?T:void 0},maxLength:150},personalWebsite2Link:{icon:(0,d.jsx)(h,{}),getFormattingError:function(e){return e&&!w.test(e)?T:void 0},maxLength:150},twitterUsername:{icon:(0,d.jsx)(x.Z,{}),prefix:"https://twitter.com/",maxLength:15},facebookUsername:{icon:(0,d.jsx)(l.Z,{}),prefix:"https://facebook.com/",maxLength:50},youtubeUsername:{icon:(0,d.jsx)(v.Z,{}),prefix:"https://youtube.com/",maxLength:100},tiktokUsername:{icon:(0,d.jsx)(m.Z,{}),prefix:"https://tiktok.com/@",getFormattingError:function(e){return P.test(e)?void 0:I},maxLength:30},instagramUsername:{icon:(0,d.jsx)(p,{}),prefix:"https://instagram.com/",maxLength:30},redditUsername:{icon:(0,d.jsx)(f.Z,{}),prefix:"https://reddit.com/user/",maxLength:20},snapchatUsername:{icon:(0,d.jsx)(g,{}),prefix:"https://snapchat.com/add/",maxLength:15},discordServerLink:{icon:(0,d.jsx)(s.Z,{}),getFormattingError:function(e){return e&&!E.test(e)?S:void 0},maxLength:150}}},16792:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(29439),o=n(95562),i=function(e){return e?Object.entries(e).reduce((function(e,t){var n=(0,r.Z)(t,2),i=n[0],a=n[1];return a&&(e["data-".concat((0,o.m)(i))]=a),e}),{}):void 0}},39949:function(e,t,n){"use strict";n.d(t,{KL:function(){return o},Q1:function(){return r},vA:function(){return i}});var r=function(e){return e.startsWith("/")},o=function(e){return e.startsWith("http://")||e.startsWith("https://")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r(e)?"https://wiki.engine.spacexpanse.org/spexengine5".concat(e,"?utm_source=gdevelop&utm_medium=help-link").concat(t?"#".concat(t):""):o(e)?e:""}},19431:function(e,t,n){"use strict";n.d(t,{t:function(){return p}});var r=n(15861),o=n(64687),i=n.n(o),a=n(38428),s=n.n(a),l=n(997),c=n(50057),u=n.n(c)()("electron"),d=u?u.ipcRenderer:null,p=function(){var e=(0,r.Z)(i().mark((function e(t){var n,o,a,c,u,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlContainers,o=t.onProgress,a=t.throwIfAnyError,c=0,u=null,d){e.next=5;break}throw new Error("Download to local files is not supported.");case 5:return e.next=7,s().withConcurrency(20).for(n).process(function(){var e=(0,r.Z)(i().mark((function e(t){var a,s,p,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,s=t.filePath,e.prev=1,e.next=4,(0,l.x)({times:2},(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.invoke("local-file-download",a,s);case 2:case"end":return e.stop()}}),e)}))));case 4:return p={item:t},e.abrupt("return",p);case 8:return e.prev=8,e.t0=e.catch(1),u=e.t0,h={item:t,error:e.t0},e.abrupt("return",h);case 13:return e.prev=13,o(c++,n.length),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})));return function(t){return e.apply(this,arguments)}}());case 7:if(p=e.sent,h=p.results,!a||!u){e.next=11;break}throw u;case 11:return e.abrupt("return",h);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},18455:function(e){var t=function(e,t,n){for(var r=[],o=e;o<t;o++)r.push(n(o));return r};e.exports={mapFor:t,mapReverseFor:function(e,t,n){for(var r=[],o=t-1;o>=e;o--)r.push(n(o));return r},mapVector:function(e,n){return t(0,e.size(),(function(t){return n(e.at(t),t)}))}}},84360:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n.g.gd,o=function(e){var t=new r.MapStringString;for(var n in e)t.set(n,e[n]);return t}},96355:function(e,t,n){"use strict";n.d(t,{R:function(){return r},q:function(){return o}});var r=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},o=function(e,t){return Number.parseFloat(e.toFixed(t)).toString()}},59603:function(e,t,n){"use strict";n.d(t,{IR:function(){return c},Vl:function(){return s},dZ:function(){return l},tF:function(){return u}});var r=n(4942),o=n(79431),i=n(91479),a=n.n(i),s=function(e,t){var n=t.pathSeparator,o=t.getArrayItemReferenceName,i=t.shouldSplit,a=t.isReferenceMagicPropertyName,s=[],l=function(e,t){var n;return s.push({reference:e,object:t}),n={},(0,r.Z)(n,a,!0),(0,r.Z)(n,"referenceTo",e),n};return function e(t,r,a){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var s in t){var c=r+n+"*";if(i(c)){var u=t[s],d=o(u,a),p=a+n+d;t[s]=l(p,u),e(u,c,p)}else{var h=a+n+s;e(t[s],c,h)}}else for(var f in t){var g=r+n+f,m=a+n+f;if(i(g)){var x=t[f];t[f]=l(m,x),e(x,g,m)}else e(t[f],g,m)}}(e,"",""),s},l=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,i){if(void 0!==o&&i>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var a=Object.keys(t);if(a)return Promise.all(a.map((function(o){var a=function(e){return!0===e[n]?e:null}(t[o]);return a?r(a.referenceTo).then((function(n){return t[o]=n,e(t[o],i+1)})):e(t[o],i+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},c=function(e){return function(t){return e.has(t)}},u=function(e){var t={};return function(n,r){var i=n[e];if("string"!==typeof i)throw new Error("Property ".concat(e," is not a string"));t[r]=t[r]||{};var s=(0,o.Z)(a()(i),(function(e){return!!t[r][e]}));return t[r][s]=!0,s}}},83297:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(29439),o=n(28381);var i=function(){var e=o.useState("undefined"===typeof navigator||"boolean"!==typeof navigator.onLine||navigator.onLine),t=(0,r.Z)(e,2),n=t[0],i=t[1],a=function(){return i(!0)},s=function(){return i(!1)};return o.useEffect((function(){return window.addEventListener("online",a),window.addEventListener("offline",s),function(){window.removeEventListener("online",a),window.removeEventListener("offline",s)}}),[]),n}},20049:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(50057),o=n.n(r);function i(e){var t=!1,n=void 0;return function(){return t||(console.info("Lazy loading ".concat(e,"...")),n=o()(e),t=!0),n}}},32921:function(e,t,n){"use strict";n.d(t,{IE:function(){return u},O8:function(){return s},nu:function(){return l},vv:function(){return c}});var r=n(30141),o=n(50394),i=n.n(o),a=n.g.gd,s=function(e){return/^([A-Za-z]{1}[A-Za-z\d_]*\.)+[A-Za-z][A-Za-z\d_]*$/i.test(e)},l=function(e,t){var n={},r=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n[e]||(n[e]=[]),n[e].push({type:t,message:r,extraExplanation:o})};return t.getPackageName()?t.getPackageName().length>=255?r("packageName","error",e._({id:"The package name is too long."}),e._({id:"Change the package name in the game properties."})):s(t.getPackageName())||r("packageName","error",e._({id:'The package name is containing invalid characters or not following the convention "xxx.yyy.zzz" (numbers allowed after a letter only).'}),e._({id:"Change the package name in the game properties."})):r("packageName","error",e._({id:"The package name is empty."}),e._({id:"Choose and enter a package name in the game properties."})),t.getName()||r("name","error",e._({id:"The name of your game is too long"}),e._({id:"Change the name in the game properties."})),(!t.getVersion()||t.getVersion().split(".").length<3)&&r("packageName","error",e._({id:"The version that you've set for the game is invalid."}),e._({id:"Enter a version in the game properties."})),n},c=function(e,t){return!Object.keys(t).length||((0,r.gR)({message:e._({id:"Your game has some invalid elements, please fix these before continuing:"})+"\n\n"+i()(t).map((function(e){return e.map((function(e){return"- ".concat(e.message)})).join("\n")})).join("\n"),rawError:void 0,errorId:"project-invalid-settings-error",doNotReport:!0}),!1)},u=function(e){for(var t=a.WholeProjectRefactorer.findInvalidRequiredBehaviorProperties(e),n=0;n<t.size();n++){var r=t.at(n),o=a.WholeProjectRefactorer.getBehaviorsWithType(r.getSourceObject(),r.getExpectedBehaviorTypeName()).toJSArray();console.error('Invalid value for required behavior property "'.concat(r.getSourcePropertyName(),'" in object ').concat(r.getSourceObject().getName()," for behavior ").concat(r.getSourceBehaviorContent().getName(),".")),console.info("Expected behavior of type ".concat(r.getExpectedBehaviorTypeName(),". Possibles values are: ").concat(o.join(", ")||"(none)","."))}}},997:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var r=n(15861),o=n(64687),i=n.n(o),a=function(){var e=(0,r.Z)(i().mark((function e(t,n){var r,o,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.times,o=0,a=null;case 3:if(!(o<r)){e.next=18;break}return o++,a=null,e.prev=6,e.next=9,n();case 9:return s=e.sent,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(6),a=e.t0;case 16:e.next=3;break;case 18:throw a;case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}()},41006:function(e,t,n){"use strict";n.d(t,{XH:function(){return o},h_:function(){return i},qx:function(){return a}});var r=n.g.gd;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"serializeTo",n=new r.SerializerElement;e[t](n);var o=JSON.parse(r.Serializer.toJSON(n));return n.delete(),o}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"serializeTo",n=new r.SerializerElement;e[t](n);var o=r.Serializer.toJSON(n);return n.delete(),o}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unserializeFrom",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=r.Serializer.fromJSObject(t);o?e[n](o,i):e[n](i),i.delete()}},95562:function(e,t,n){"use strict";n.d(t,{S:function(){return r},m:function(){return o}});var r=function(e,t){return e.length>t?e.substring(0,t)+"...":e},o=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}},10684:function(e,t,n){"use strict";n.d(t,{ej:function(){return c},it:function(){return a},kL:function(){return l},tc:function(){return i},zJ:function(){return s}});var r=n(37762),o=n(93433),i=function(e,t){return e.filter((function(e){return e!==t}))},a=function(e){var t=e.noTagLabel,n=e.getAllTags,r=e.selectedTags,a=e.onChange,s=e.onEditTags,l=e.editTagsLabel,c=n(),u=s&&l?[{type:"separator"},{label:l,click:s}]:[];return c.length?c.map((function(e){return{type:"checkbox",label:e,checked:r.includes(e),click:function(){var t,n;r.includes(e)?a(i(r,e)):a((t=r,n=[e],Array.from(new Set([].concat((0,o.Z)(t),(0,o.Z)(n))))))}}})).concat(u):[{label:t,enabled:!1}].concat(u)},s=function(e){return""===e.trim()?[]:e.split(",").map((function(e){return e.trim()}))},l=function(e){return e.join(", ")},c=function(e,t){var n,o=(0,r.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(-1===e.indexOf(i))return!1}}catch(a){o.e(a)}finally{o.f()}return!0}},28842:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var r=function(){return Date.now()+"-"+Math.floor(1e6*Math.random())}},68009:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(28381),o=n(12813),i=n(71046),a=n.n(i),s=function(e,t){var n=(0,o.t)(),i=(0,r.useRef)({cb:e,delay:t});return(0,r.useEffect)((function(){i.current={cb:e,delay:t}})),(0,r.useCallback)(a()((function(){var e;i.current.delay===t&&n.current&&(e=i.current).cb.apply(e,arguments)}),t,{leading:!1,trailing:!0}),[t,a()])}},38501:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(29439),o=n(28381);function i(){var e=o.useState(),t=(0,r.Z)(e,2)[1];return o.useCallback((function(){return t({})}),[])}},51063:function(e,t,n){"use strict";n.d(t,{s:function(){return b}});var r=n(15861),o=n(29439),i=n(64687),a=n.n(i),s=n(36600),l=n(28381),c=n(1773),u=n(67835),d=n(40243),p=n(86278),h=n(11374),f=n(61325),g=n(64480),m=n(29343),x={tableCell:{wordBreak:"break-word"}},v=function(e){var t=e.progress,n=e.result,r=e.onAbandon,o=e.onRetry,i=e.genericError,a=n&&n.erroredResources.length>0||!!i;return(0,m.jsx)(c.ZP,{title:(0,m.jsx)(s.Trans,{id:"Importing project resources"}),actions:[r?(0,m.jsx)(u.Z,{label:(0,m.jsx)(s.Trans,{id:"Ignore"}),disabled:!r,onClick:r},"close"):null,o?(0,m.jsx)(c.vF,{label:(0,m.jsx)(s.Trans,{id:"Retry"}),primary:!0,onClick:o},"retry"):null],cannotBeDismissed:!a,noMobileFullScreen:!a,open:!0,maxWidth:"sm",children:(0,m.jsxs)(f.ak,{noMargin:!0,expand:!0,children:[(0,m.jsx)(p.Z,{children:a?(0,m.jsx)(s.Trans,{id:"There were errors when importing resources for the project. You can retry (recommended) or continue despite the errors. In this case, the project will be missing some resources."}):null}),(0,m.jsx)(d.x1,{noMargin:!0,expand:!0,children:(0,m.jsx)(g.Z,{variant:t>0?"determinate":"indeterminate",value:t})}),a?(0,m.jsxs)(h.iA,{children:[(0,m.jsx)(h.xD,{children:(0,m.jsxs)(h.SC,{children:[(0,m.jsx)(h.bY,{children:(0,m.jsx)(s.Trans,{id:"Resource name"})}),(0,m.jsx)(h.bY,{children:(0,m.jsx)(s.Trans,{id:"Error"})})]})}),(0,m.jsxs)(h.RM,{children:[n?n.erroredResources.map((function(e){var t=e.resourceName,n=e.error;return(0,m.jsxs)(h.SC,{children:[(0,m.jsx)(h.Nn,{style:x.tableCell,children:t}),(0,m.jsx)(h.Nn,{style:x.tableCell,children:n.toString()})]},t)})):null,i?(0,m.jsxs)(h.SC,{children:[(0,m.jsx)(h.Nn,{style:x.tableCell,children:"-"}),(0,m.jsx)(h.Nn,{style:x.tableCell,children:i.toString()})]}):null]})]}):null]})})},b=function(e){var t=e.onDoProcess,n=l.useState(0),i=(0,o.Z)(n,2),s=i[0],c=i[1],u=l.useState(null),d=(0,o.Z)(u,2),p=d[0],h=d[1],f=l.useState(!1),g=(0,o.Z)(f,2),x=g[0],b=g[1],j=l.useState(null),C=(0,o.Z)(j,2),y=C[0],Z=C[1],k=l.useState(null),w=(0,o.Z)(k,2),T=w[0],E=w[1],S=l.useState(null),P=(0,o.Z)(S,2),I=P[0],D=P[1],A=l.useCallback(function(){var e=(0,r.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(0),E(null),D(null),Z(null),h(null),b(!0),r=null,e.prev=7,e.next=10,t(n,(function(e,t){c(e/t*100)}));case 10:if(r=e.sent,c(100),0!==r.erroredResources.length){e.next=17;break}return b(!1),h(null),Z(null),e.abrupt("return");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),h(e.t0);case 22:return e.abrupt("return",new Promise((function(e){E((function(){return function(){e(A(n))}})),D((function(){return function(){b(!1),h(null),Z(null),e()}})),Z(r),b(!1)})));case 23:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}(),[t]),L=l.useCallback((function(){var e=y&&y.erroredResources.length>=0||!!p;return x||e?(0,m.jsx)(v,{progress:s,result:y,genericError:p,onAbandon:I,onRetry:T}):null}),[x,s,y,I,T,p]);return l.useMemo((function(){return{ensureProcessIsDone:A,renderProcessDialog:L}}),[A,L])}},21676:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(28381),o=function(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e})),(0,r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},12813:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var r=n(28381),o=function(){var e=r.useRef(!1);return r.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},39631:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(28381),o={},i=function(e,t){var n=r.useRef(null),i=r.useRef({clientX:0,clientY:0}),a=r.useCallback((function(){t&&delete o[t],n.current&&clearTimeout(n.current)}),[t]);return r.useEffect((function(){return document.addEventListener("scroll",a,{capture:!0}),function(){a(),document.removeEventListener("scroll",a,{capture:!0})}}),[a]),{onTouchStart:r.useCallback((function(r){if(n.current&&clearTimeout(n.current),t){if(o[t])return;o[t]=!0}i.current=function(e){return e.touches&&e.touches.length>0?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:0,clientY:0}}(r),n.current=setTimeout((function(){e(i.current)}),600)}),[e,t]),onTouchMove:r.useCallback((function(e){if(1===e.touches.length){var t=e.touches[0],n=i.current,r=n.clientX,o=n.clientY;(Math.abs(t.clientX-r)>10||Math.abs(t.clientY-o)>10)&&a()}else a()}),[i,a]),onTouchEnd:a}}},51265:function(e,t,n){"use strict";var r=n(28381),o=new Set;if("undefined"!==typeof window){var i,a=function(){return o.forEach((function(e){return e()}))};window.addEventListener("resize",(function(){clearTimeout(i),i=setTimeout(a,200)}))}t.Z=function(e){r.useEffect((function(){return o.add(e),function(){o.delete(e)}}),[e])}},4964:function(e,t,n){"use strict";n.d(t,{G:function(){return l},H:function(){return s}});var r=n(15861),o=n(64687),i=n.n(o),a=n(20392),s=function(){var e=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.k)();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){n.createReader(new n.BlobReader(t),(function(t){t.getEntries((function(t){t[0].getData(new n.TextWriter,(function(t){e(t)}))}))}),(function(e){console.error("An error occurred when unzipping blob",e),r(e)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,o,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"file.txt",e.next=3,(0,a.k)();case 3:return r=e.sent,o=new r.TextReader(t),e.abrupt("return",new Promise((function(e,t){r.createWriter(new r.BlobWriter("application/zip"),(function(t){t.add(n,o,(function(){t.close((function(t){e(t)}))}))}),(function(e){console.error("An error occurred when zipping content",e),t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},20392:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});var r=n(95018),o=".",i="/external/zip.js/WebContent",a="/external/zlib-asm",s=!1,l=null,c=function(){if(s){var e=n.g.zip;return Promise.resolve(e)}return l||(l=(0,r.v)(o+i+"/zip.js").then((function(){var e=n.g.zip;if(!e)throw new Error('Can not find "zip" in the global namespace after loading zip.js. Has the zip.js script being loaded properly?');return l=null,s=!0,e.workerScripts={deflater:[o+i+"/z-worker.js",o+a+"/zlib.js",o+i+"/zlib-asm/codecs.js"],inflater:[o+i+"/z-worker.js",o+a+"/zlib.js",o+i+"/zlib-asm/codecs.js"]},e})),l)}},5675:function(e,t,n){"use strict";n.d(t,{$u:function(){return l},Qi:function(){return i},e_:function(){return a},r9:function(){return c}});var r=1/16,o=Math.pow(2,.125),i=o,a=Math.pow(o,-1),s=Math.pow(1.7,r),l=function(e){return Math.pow(s,Math.sign(e))},c=function(e){return Math.max(Math.min(e,128),.0078125)}},88991:function(e,t,n){"use strict";n.d(t,{L:function(){return o},P:function(){return r}});var r=function(e){var t=e;return t?function(e){return t._(e)}:null},o=function(e){var t=e;return t?function(e){return t._(e)}:function(e){return e}}},91485:function(e,t,n){var r={"./af_ZA/messages":[39278,3190],"./ar_SA/messages":[94560,6067],"./az_AZ/messages":[46914,7902],"./bg_BG/messages":[31974,3883],"./bn_BD/messages":[46307,6337],"./br_FR/messages":[63195,2094],"./ca_ES/messages":[14692,683],"./cs_CZ/messages":[42947,1e3],"./da_DK/messages":[78356,3450],"./de_DE/messages":[50413,9569],"./el_GR/messages":[48435,5550],"./en/messages":[96781,2181],"./eo_UY/messages":[38909,2736],"./es_ES/messages":[35745,3458],"./fa_IR/messages":[42280,2548],"./fi_FI/messages":[22335,5897],"./fil_PH/messages":[62281,260],"./fr_FR/messages":[5155,8672],"./ha_HG/messages":[37288,9882],"./he_IL/messages":[94320,2402],"./hi_IN/messages":[19114,5719],"./hu_HU/messages":[40018,922],"./id_ID/messages":[34383,335],"./ig_NG/messages":[10374,7273],"./it_IT/messages":[88672,9840],"./ja_JP/messages":[94959,2855],"./ka_GE/messages":[54953,8680],"./km_KH/messages":[61072,7543],"./ko_KR/messages":[52488,4292],"./lt_LT/messages":[3157,1683],"./lv_LV/messages":[74372,3090],"./mr_IN/messages":[55850,7732],"./ms_MY/messages":[63596,8404],"./my_MM/messages":[27254,2247],"./nl_NL/messages":[35025,7274],"./no_NO/messages":[57657,7500],"./pl_PL/messages":[33102,3137],"./pseudo_LOCALE/messages":[98610,7699],"./pt_BR/messages":[30513,6163],"./pt_PT/messages":[22242,2437],"./ro_RO/messages":[23753,5229],"./ru_RU/messages":[46088,9917],"./si_LK/messages":[14313,2750],"./sk_SK/messages":[81651,7013],"./sl_SI/messages":[25413,6842],"./sq_AL/messages":[49622,3799],"./sr_CS/messages":[47207,9957],"./sr_SP/messages":[69323,7289],"./sv_SE/messages":[97400,9331],"./sw_KE/messages":[75457,4014],"./th_TH/messages":[91813,255],"./tr_TR/messages":[22415,1918],"./uk_UA/messages":[99584,5339],"./ur_PK/messages":[10472,6147],"./uz_UZ/messages":[44540,3418],"./vi_VN/messages":[12823,7883],"./yo_NG/messages":[79525,7018],"./zh_CN/messages":[70344,5188],"./zh_TW/messages":[66003,4003]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,23)}))}o.keys=function(){return Object.keys(r)},o.id=91485,e.exports=o},97396:function(e){"use strict";e.exports=JSON.parse('{"\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0401":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"Ts","\u0427":"Ch","\u0428":"Sh","\u0429":"Shch","\u042b":"Y","\u042d":"E","\u042e":"Yu","\u042f":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"ts","\u0447":"ch","\u0448":"sh","\u0449":"shch","\u044b":"y","\u044d":"e","\u044e":"yu","\u044f":"ya","\u042a":"","\u044a":"","\u042c":"","\u044c":""}')}}]);
//# sourceMappingURL=9641.79530800.chunk.js.map